2000-06-25  Fatih Demir	<kabalak@gmx.net>

	* configure.in: Applied some updates to the configure.in, e.g.
	a check for GtkHTML >= 0.4.

2000-06-24  John Sullivan  <sullivan@eazel.com>

	Finished task 585 (Handle handing URI to programs that
	can only handle local paths). After talking to Darin,
	decided not to do some automagic local-copying in this
	case. Instead, Athena detects the case and puts up an
	alert explaining the situation instead of launching the app.

	* libathena-extensions/athena-program-choosing.h,
	* libathena-extensions/athena-program-choosing.c:
	(athena_launch_application_parented): New function, just
	like athena_launch_application but takes a parent window
	for error dialogs. Checks whether the application can
	handle uris and if not puts up an alert.
	(athena_launch_application): Guts moved to _parented call,
	which this now calls.
	(athena_launch_application_from_command): No longer converts
	the uri to a local path here; callers have to handle this
	themselves if they want to.
	* src/file-manager/fm-directory-view.c: 
	(get_containing_window): New utility function, returns the
	GtkWindow that the directory view is in.
	(fm_directory_view_launch_application): Now calls new
	athena_launch_application_parented.
	(choose_program): Now calls get_containing_window.

2000-06-24  Pavel  <pavel@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(athena_directory_get_info_for_new_files),
	(start_monitoring_file_list), (start_getting_file_info):
	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri):
	* libathena-extensions/athena-icon-factory.c:
	(path_represents_svg_image):
	* libathena-extensions/athena-mime-actions.c:
	(get_mime_type_from_uri):
	* src/file-manager/dfos-corba.c: (convert_options):
	* src/file-manager/fm-properties-window.c:
	(get_property_names_from_uri):
	* src/athena-applicable-views.c: (got_metadata_callback):
	* src/athena-link-set-window.c: (get_link_set_names):
	* src/athena-property-browser.c: (ensure_uri_is_image),
	(make_properties_from_directory_path):
	Switched to match new GnomeVFS renamings. 

	* libathena-extensions/athena-directory-async.c:
	(start_monitoring_file_list):
	Changed to use default mime type rather than forcing the
	fast mode.

2000-06-23  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-horizontal-splitter.c:
	(athena_horizontal_splitter_button_release):
	Made #defines for a couple of constants.

2000-06-23  John Sullivan  <sullivan@eazel.com>

	Finished task 1007 (Should show program "match quality" in
	"View as Other" dialog). There's now a "status" column that
	you can sort by. It would be better if it showed some 
	supertype info but I'm putting that off (with a bug report).

	* libathena-extensions/athena-program-chooser.c:
	(program_file_pair_compute_status), (program_file_pair_set_file),
	(program_file_pair_new_from_content_view),
	(program_file_pair_new_from_application), (program_file_pair_free),
	(program_file_pair_get_program_name_for_display),
	(get_supertype_from_file),
	(program_file_pair_get_short_status_text),
	(program_file_pair_get_long_status_text),
	(repopulate_program_list),
	(program_file_pair_is_default_for_file_type),
	(program_file_pair_is_default_for_file),
	(program_file_pair_is_in_short_list_for_file_type),
	(program_file_pair_is_in_short_list_for_file),
	(get_program_file_pair_from_row_data),
	(get_selected_program_file_pair), (update_selected_item_details),
	(update_all_status), (add_to_short_list_for_file),
	(remove_from_short_list_for_file), (add_to_short_list_for_type),
	(remove_from_short_list_for_type), (remove_default_for_type),
	(remove_default_for_item), (set_default_for_type),
	(set_default_for_item), (run_program_configurator_callback),
	(compare_program_file_pairs), (switch_sort_column),
	(create_program_clist), (athena_program_chooser_new),
	(athena_program_chooser_get_application),
	(athena_program_chooser_get_component): Did vast quantities of
	renaming and refactoring in here while adding this feature. Believe
	me, it's not worth the time to explain in great detail.

2000-06-23  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-horizontal-splitter.c:
	(athena_horizontal_splitter_initialize),
	(toggle_splitter_position),
	(athena_horizontal_splitter_button_release):
	fixed recently introduced bug that Carbamide found, where clicking in the
	list view titles would toggle the sidebar.  Fixed by making the splitter
	toggle only if it's the splitters window.  Also, made it open properly when
	you quit the program in the closed state.
	
2000-06-23  Darin Adler  <darin@eazel.com>

	Some icon layout fixes.

	* libathena-extensions/athena-icon-canvas-item.h:
	* libathena-extensions/athena-icon-canvas-item.c: (map_pixbuf),
	(draw_label_text_aa), (athena_icon_canvas_item_render),
	(athena_icon_canvas_item_event),
	(athena_icon_canvas_item_hit_test_stretch_handles),
	(athena_icon_canvas_item_get_max_text_width):
	Added comments and FIXMEs and fixed formatting. Removed unused
	functions and changed all the functions to return values in world
	coordinates rather than doing some in canvas coordinates.
	
	* libathena-extensions/athena-icon-container.c:
	(athena_gtk_adjustment_set_value): Added a function that clamps
	to the scroll bar range. The original in Gtk allows scrolling past
	the end of where the scroll bar does.
	(scroll): Call the new function. This fixes the "auto-scroll past
	edge of the screen" problem.
	(reveal_icon): Use the new function even though it shouldn't matter
	here.
	(set_scroll_region): Add some padding on the left and right and
	fix some of the math. Also use the new function to clamp the value
	instead of trying to do it by hand here. I think this fixes the
	dancing icon problem.
	(get_icon_space_width), (lay_down_one_line), (relayout): Wrote new
	layout code that works more simply and is closer to the layout we
	want. This fixes a few bugs, but for now it's only for auto layout
	-- I still need to fix manual layout.
	(athena_icon_container_update_icon): Made the maximum size for
	icons take the X and Y scale factors into account too. Now we
	probably need maximum scale factors, but without this stretching
	was quite broken.
	(athena_icon_container_start_renaming_selected_item): Simplified
	some of the renaming code to require a bit less from the canvas
	item.
	(athena_icon_container_emit_preview_signal): Let booleans be
	booleans.
	
	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-private.h:
	Moved athena_icon_container_set_anti_aliased_mode into the
	private header.
	
2000-06-23  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-horizontal-splitter.c,h:
	(athena_horizontal_splitter_initialize_class),
	(athena_horizontal_splitter_initialize),
	(athena_horizontal_splitter_destroy), (toggle_splitter_position),
	(athena_horizontal_splitter_button_press),
	(athena_horizontal_splitter_button_release):
	made tapping on the splitter show or hide the sidebar
	* src/athena-sidebar.c:
	reduced the minimum size of the sidebar
	
2000-06-22  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/command-line/Makefile.am:
	Fixing build bustage. There is no eazel-install-query.c checked into
	cvs.  I assume Eskil forgot to add it.  It should build now.

2000-06-22  Rebecka Schulman  <rebecka@eazel.com>

	* libathena-extensions/athena-search-uri.c:
	* libathena-extensions/athena-search-uri.h:
	(athena_search_uri_to_simple_search_criteria),
	(athena_search_uri_to_search_bar_mode),
	(athena_search_uri_is_displayable_by_mode), (other_search_mode):
	* src/athena-simple-search-bar.c:
	* src/athena-switchable-search-bar.c:
	(athena_switchable_search_bar_set_mode),
	(athena_switchable_search_bar_set_search_controls):
	* src/athena-switchable-search-bar.h:

	(athena_simple_search_bar_set_search_controls):
	Extended search uri api; Some functions came from
	athena-switchable-search-bar.c
	* src/athena-complex-search-bar.c:
	(athena_complex_search_bar_initialize):
	fixed it so the containers work right
	* src/athena-search-bar-criterion.c:
	* src/athena-search-bar-criterion.h:
	(athena_search_bar_criterion_initialize),
	(athena_search_bar_criterion_initialize_class), (destroy),
	(athena_search_bar_criterion_new),
	(athena_search_bar_criterion_file_type_new),
	(athena_search_bar_criterion_file_name_new),
	(athena_search_bar_criterion_add_to_search_bar):
	added file name and type, and new functions
	to aid in displaying

	* src/athena-search-bar.c: (athena_search_bar_new):
	* src/athena-search-bar.h:
	added athena_search_bar_new
	


2000-06-22  Michael Engber  <engber@eazel.com>

	* libathena/athena-view-component.idl:
	* libathena/athena-zoomable.c:
	(athena_zoomable_initialize_class):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize), (athena_zoom_level_from_double),
	(zoomable_set_zoom_level_callback):
	* src/athena-view-frame.c:
	* src/athena-view-frame.h:
	* src/athena-window.c: (zoom_to_level_callback):
	* src/athena-zoom-control.c:
	(athena_zoom_control_class_initialize), (zoom_menu_callback),
	(zoom_menu_item_free_zoom_level), (create_zoom_menu_item),
	(create_zoom_menu):
	Removed zoom_to_level from the zoomable interface - starting
	on the process of removing the zoom control being tied to
	7 discrete icon sizes. Bug #1425
	

2000-06-22  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/Makefile.am:
	*
	components/services/install/command-line/eazel-alt-install-corba.c:
	(main):
	Vamped to use the gtk+ client wrapper for the corba nastiness.

	* components/services/install/idl/trilobite-eazel-install.idl:
	Added the query call.
	
	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_new), (eazel_install_callback_corba),
	(eazel_install_callback_install_packages),
	(eazel_install_callback_query):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_category_list_from_categorydata_list):
	* components/services/install/lib/eazel-install-corba-types.h:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install_install_packages), (impl_Eazel_Install_query),
	(eazel_install_get_epv):
	* components/services/install/lib/eazel-install-metadata.c:
	(transferoptions_destroy), (installoptions_destroy):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_destroy), (eazel_install_initialize),
	(eazel_install_get_type), (eazel_install_new_with_config),
	(create_temporary_directory),
	(eazel_install_fetch_remote_package_list),
	(eazel_install_open_log), (eazel_install_install_packages),
	(eazel_install_uninstall), (eazel_install_emit_download_failed),
	(eazel_install_emit_install_failed):
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (ftp_fetch_remote_file),
	(local_fetch_remote_file), (get_url_for_package),
	(get_search_url_for_package):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_query_package_system):
	* components/services/install/lib/eazel-install-query.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(download_all_packages), (install_all_packages),
	(uninstall_packages), (uninstall_a_package), (do_rpm_install),
	(do_rpm_uninstall), (eazel_install_prune_packages_helper),
	(eazel_install_load_rpm_headers),
	(eazel_install_prepare_rpm_system),
	(eazel_install_add_headers_to_rpm_set),
	(eazel_install_fetch_rpm_dependencies),
	(eazel_install_ensure_deps), (rpm_uninstall):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/server/main.c:
	(trilobite_service_factory_destroy):
	i18n a lot of strings. Did some more work on the gtk+ wrapper for
	the corba interface to libinstall. Added categories to the idl and
	the code. Added comments to the gtk+ interface, converters to/from
	the corba structs and CategoryData. Also closed bug 1024, 982, 980 and 1092.
	
	* components/services/time/command-line/main.c: (main):
	* components/services/time/service/trilobite-eazel-time-service.c:
	(trilobite_eazel_time_service_destroy):
	* components/services/trilobite/libtrilobite/trilobite-service.c:
	(trilobite_service_destroy):
	* components/services/trilobite/sample/command-line/main.c: (main):
	* components/services/trilobite/sample/service/main.c:
	(trilobite_service_factory_destroy):
	*
	components/services/trilobite/sample/service/sample-service-impl.c:
	(sample_service_destroy):
	Fixed the component destroy routines with Darins help.

2000-06-22  Ramiro Estrugo  <ramiro@eazel.com>

	* components/websearch/Makefile.am:
	Fix a silly typo in the last checkin for this makefile.
	
2000-06-22  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-properties-window.c: (attach_label),
	(attach_left_aligned_label), (attach_right_aligned_label),
	(attach_value_field), (attach_directory_contents_value_field),
	(attach_title_field): Oops, some refactoring in my previous
	checkin left all the labels left-aligned, when the title
	ones are supposed to be right-aligned. Fixed that up.

2000-06-22  John Sullivan  <sullivan@eazel.com>

	Finished task 970 (Properties window should show deep
	directory sizes)

	* libathena-extensions/athena-file.c:
	(format_item_count_for_display): New utility function
	used by some _as_string functions.
	(athena_file_get_size_as_string): Now uses 
	format_item_count_for_display
	(athena_file_get_deep_count_as_string_internal),
	(athena_file_get_deep_size_as_string),
	(athena_file_get_deep_total_count_as_string),
	(athena_file_get_deep_file_count_as_string),
	(athena_file_get_deep_directory_count_as_string):
	New functions to get various "deep" info about a
	directory in handy string format.
	(athena_file_get_string_attribute),
	(athena_file_get_string_attribute_with_default):
	Taught these two functions about deep directory counts.
	
	* src/file-manager/fm-properties-window.c: 
	(create_properties_window): Now uses athena_file_monitor_add
	to request the info it needs, including new deep counts. 
	Formerly was just relying on all the information already having 
	been requested by someone else, which worked in practice but was 
	fragile and wouldn't work for deep counts.
	(forget_properties_window): Renamed from remove_properties_window_
	from_hash_table, and made it stop monitoring file.
	(fm_properties_window_get_or_create): Account for name change.
	(directory_contents_value_field_update),
	(attach_directory_contents_value_field), 
	(attach_directory_contents_fields): New functions that manage
	showing the deep info.
	(attach_label), (attach_value_field), (attach_title_field),
	(attach_title_value_pair), (create_basic_page), 
	(add_permissions_row_label), (create_permissions_page):
	Some renamings and reorganization.

2000-06-22  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory-async.c:
	(cancel_deep_count): Added code to make sure we don't see a
	canceled deep count as an eternally "in progress" one.
	(athena_directory_async_state_changed): Exported this
	function for use in AthenaFile.
	
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-file.c:
	(athena_file_get_deep_counts): Fixed the comment.
	(athena_file_recompute_deep_counts): Added a function to
	force the deep count to be recomputed.
	
	* libathena-extensions/athena-mime-actions.h:
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_set_default_action_type_for_uri),
	(athena_mime_set_default_application_for_uri),
	(athena_mime_set_default_component_for_uri),
	(athena_mime_set_short_list_applications_for_uri),
	(athena_mime_set_short_list_components_for_uri),
	(athena_mime_add_application_to_short_list_for_uri),
	(athena_mime_remove_application_from_short_list_for_uri),
	(athena_mime_add_component_to_short_list_for_uri),
	(athena_mime_remove_component_from_short_list_for_uri),
	(athena_mime_extend_all_applications_for_uri),
	(athena_mime_remove_from_all_applications_for_uri):
	Added some rudimentary error handling.

2000-06-22  Darin Adler  <darin@eazel.com>

	Finished task 975 (Need API for asynchronously computing a
	directory's recursive item count). More thorough testing will wait
	for John to implement the high level feature.
	
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory-async.c:
	(directory_count_callback): Used a local variable.
	(start_monitoring_file_list): Reduced use of GnomeVFSURI a bit.
	(cancel_deep_count), (athena_directory_cancel),
	(set_up_request_by_file_attributes),
	(athena_async_destroying_file), (lacks_deep_count),
	(wants_deep_count), (request_is_satisfied),
	(start_monitoring_file_list), (deep_count_one),
	(deep_count_callback), (deep_count_load), (deep_count_start),
	(state_changed): Added the code to compute deep counts.
	
	* libathena-extensions/athena-directory.c:
	(athena_self_check_directory): Added a self-check to try out
	the deep counts.
	
	* libathena-extensions/athena-file-attributes.h:
	Renamed the attribute now that it's for more than one kind of
	deep count, not just a directory items count.
	
	* libathena-extensions/athena-file-private.h:
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-file.c:
	(athena_file_get_deep_counts):
	Added the high-level interface for getting at the counts.
	
2000-06-22  John Sullivan  <sullivan@eazel.com>

	Finished task 877 (SUID/SGID/Sticky bits should be settable
	in Properties). There are still several appearance loose ends
	that I'll write up bugs for. This change requires the latest 
	gnome-vfs.

	* libathena-extensions/athena-file.c:
	(athena_file_get_permissions_as_string): Make permissions
	string display funky bits using ls conventions.
	* libathena-extensions/athena-global-preferences.h,
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui): Added a preference for
	allowing editing of the funky bits; defaults to on for hacker,
	off otherwise.
	* src/file-manager/fm-properties-window.c:
	(add_special_execution_checkbox), (add_special_execution_flags),
	(create_permissions_page): Wired up the funky bit checkboxes to
	the right funky bits; made some but not yet all of the Arlo
	layout improvements; decide whether to show funky bit checkboxes
	based on preference.

2000-06-22  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/install/command-line/.cvsignore:
	Ignore more generated things.
	
	* libathena-extensions/athena-search-async.c:
	I fixed medusa to properly export its public header file, so
	update its inclusion here.
	
2000-06-22  Seth Nickell  <seth@eazel.com>

	Changes from Ali Abdin (rak), aliabdin@aucegypt.edu
	* components/websearch/Makefile.am:
	Fixed error message on Athena startup by correctly setting
	the directory websearch "make install"s into.
	
2000-06-22  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-property-browser.c:
	(make_properties_from_directory_path),
	(make_properties_from_directory):
	made the reset background property appear at the top level,
	and widened the window slightly so all of the properties fit
	* src/athena-window-toolbars.c: (toolbar_clear_search_mode),
	(toolbar_home_callback):
	made it leave search mode when the user presses the home button
	
2000-06-21  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-sidebar.c: (athena_sidebar_get_sidebar_panel_key),
	(athena_sidebar_sidebar_panel_enabled), (toggle_sidebar_panel),
	(athena_sidebar_add_panel_items),
	(athena_sidebar_create_context_menu):
	added sidebar panel enable/disable items to sidebar context menu
	
2000-06-21  Andy Hertzfeld  <andy@eazel.com>

	added two different ways to reset sidebar background customizations:
	a context menu and a reset background property to reset it via
	drag and drop
	
	* data/backgrounds/Makefile.am:
	added a new background image for resetting
	* data/backgrounds/reset.png:
	new image for resetting the background
	* libathena-extensions/athena-background.c:
	(athena_background_set_tile_image_uri):
	special-case the reset image to reset the background
	* src/athena-property-browser.c: (element_clicked_callback),
	(make_properties_from_directory_path),
	(make_properties_from_directory):
	scaled background properties to the nominal size, so they line
	up better
	* src/athena-sidebar.c,h: (reset_background_callback),
	(athena_sidebar_create_context_menu),
	(athena_sidebar_press_event):
	added a context menu for the sidebar that has a reset background
	item.  Soon, it will also allow enabling/disabling of sidebar views.
	
2000-06-21  John Sullivan  <sullivan@eazel.com>

	Made athena_file_get_string_attribute return NULL
	for unknown/missing attributes; added new
	athena_file_get_string_attribute_with_default that
	never returns NULL; callers can choose which behavior
	they prefer.

	* libathena-extensions/athena-file.h,
	* libathena-extensions/athena-file.c:
	(athena_file_get_string_attribute_with_default):
	New function, calls _get_string_attribute and chooses
	default strings for the NULL cases. The default default
	string is "unknown", but some attributes get more
	specific ones.
	
	(athena_file_get_octal_permissions_as_string),
	(athena_file_get_permissions_as_string),
	(athena_file_get_owner_as_string),
	(athena_file_get_group_as_string),
	(athena_file_get_mime_type_as_string_attribute),
	(athena_file_get_size_as_string),
	(athena_file_get_string_attribute),
	(athena_file_get_type_as_string): Changed these to
	return NULL if the value is unknown/unknowable.

	(athena_file_get_date_as_string): Changed to return NULL
	in some cases; also added case for "date_permissions",
	which returns ctime iff it differs from mtime, otherwise
	NULL.

	* libathena-extensions/athena-program-chooser.c:
	(update_selected_item_details),
	(run_program_configurator_callback):
	* src/file-manager/fm-icon-view.c: (get_icon_text_callback):
	* src/file-manager/fm-list-view.c: (add_to_list):
	use athena_file_get_string_attribute_with_value
	
	* src/athena-sidebar-title.c: (update_more_info):
	when the type is NULL, don't put ", " before the size.


	More work on the obscure unixisms of the Properties window.

	* src/file-manager/fm-properties-window.c: (value_field_update),
	(create_basic_page), (permissions_label_update),
	(set_up_permissions_checkbox), (add_permissions_checkbox),
	(add_special_execution_checkbox), (add_special_execution_flags),
	(create_permissions_page), (create_properties_window):
	Wired up GUID/SUID/Sticky bit checkboxes in a temporary way
	(not to the correct bits); moved some stuff around and
	renamed some stuff.

2000-06-21  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file-utilities.c:
	(athena_read_entire_file), (read_entire_file_close_callback),
	(read_entire_file_close), (read_entire_file_succeeded),
	(read_entire_file_failed), (read_entire_file_read_callback),
	(read_entire_file_read_chunk), (read_entire_file_open_callback),
	(athena_read_entire_file_async),
	(athena_read_entire_file_cancel): Made new read-entire-file call
	with sync. and async. versions since Andy needs it.

	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory-async.c:
	(cancel_metafile_read), (metafile_read_done),
	(metafile_read_failed), (metafile_read_done_callback),
	(metafile_read_start), (athena_directory_request_read_metafile):
	* libathena-extensions/athena-directory.c:
	(athena_directory_destroy):
	Changed the metafile reading to use the new stuff.
	
	* components/services/install/command-line/.cvsignore:
	* components/services/install/server/.cvsignore:
	Ignore a few new generated files.
	
2000-06-21  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/Makefile.am:
	trying to convince it to do the orbit-idl
	
2000-06-21  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/Makefile.am:
	Added trilobite-eazel-install.h to noinst_HEADERS
	
2000-06-21  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/server/main.c:
	Forgot this, better commit it before Ramiro kills me.
	* components/services/trilobite/sample/command-line/main.c: (main):
	Darins patch reg. unref.
	
2000-06-21  Michael Engber  <engber@eazel.com>

	* src/athena-window-manage-views.c:
	(athena_window_load_content_view):
	* src/athena-window.c: (athena_window_constructed),
	(athena_window_zoom_level_changed_callback):
	Zoom controls are now hidden when viewing non-zoomable stuff.

2000-06-21  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/Makefile.am:
	Added the server directory.
	
	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-alt-install-corba.c:
	(set_parameters_from_command_line),
	(eazel_download_progress_signal), (eazel_install_progress_signal),
	(download_failed), (install_failed), (dep_check), (create_package),
	(done), (main):
	* components/services/install/command-line/genpkg_list.example:
	Vamping together yet another eazel-alt-install that uses the new
	corba service installer.
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_download_progress), (impl_download_failed), (impl_dep_check),
	(impl_install_progress), (impl_uninstall_progress),
	(impl_install_failed), (impl_uninstall_failed), (impl_done),
	(eazel_install_callback_get_epv),
	(eazel_install_callback_create_corba_object),
	(eazel_install_callback_destroy),
	(eazel_install_callback_class_initialize),
	(eazel_install_callback_initialize),
	(eazel_install_callback_get_type), (eazel_install_callback_new),
	(eazel_install_callback_corba):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagestructlist_from_packagedata_list),
	(corba_packagedatastructlist_from_packagedata_list),
	(corba_packagedatastruct_from_packagedata),
	(corba_packagestruct_from_packagedata),
	(packagedata_list_from_corba_packagestructlist),
	(packagedata_list_from_corba_packagedatastructlist),
	(packagedata_from_corba_packagedatastruct),
	(packagedata_from_corba_packagestruct):
	* components/services/install/lib/eazel-install-corba-types.h:
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install_install), (impl_Eazel_Install_uninstall),
	(impl_Eazel_Install_install_packages),
	(impl_Eazel_Install_uninstall_packages),
	(impl_Eazel_Install__set_verbose),
	(impl_Eazel_Install__get_verbose),
	(impl_Eazel_Install__set_silent), (impl_Eazel_Install__get_silent),
	(impl_Eazel_Install__set_test_mode),
	(impl_Eazel_Install__get_test_mode),
	(impl_Eazel_Install__set_force), (impl_Eazel_Install__get_force),
	(impl_Eazel_Install__set_update), (impl_Eazel_Install__get_update),
	(impl_Eazel_Install__set_tmp_dir),
	(impl_Eazel_Install__get_tmp_dir),
	(impl_Eazel_Install__set_server), (impl_Eazel_Install__get_server),
	(impl_Eazel_Install__set_server_port),
	(impl_Eazel_Install__get_server_port),
	(impl_Eazel_Install__set_log_file),
	(impl_Eazel_Install__get_log_file),
	(impl_Eazel_Install__set_protocol),
	(impl_Eazel_Install__get_protocol), (eazel_install_get_epv),
	(eazel_install_create_corba_object):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_arg), (eazel_install_class_initialize),
	(eazel_install_initialize), (eazel_install_get_type),
	(eazel_install_new_with_config),
	(eazel_install_fetch_remote_package_list),
	(eazel_install_open_log), (eazel_install_install_packages),
	(eazel_install_uninstall), (eazel_install_emit_install_progress),
	(eazel_install_emit_install_progress_default),
	(eazel_install_emit_download_progress),
	(eazel_install_emit_download_progress_default),
	(eazel_install_emit_download_failed),
	(eazel_install_emit_download_failed_default),
	(eazel_install_emit_install_failed),
	(eazel_install_emit_install_failed_default),
	(eazel_install_emit_uninstall_failed),
	(eazel_install_emit_dependency_check),
	(eazel_install_emit_dependency_check_default),
	(eazel_install_emit_done), (eazel_install_emit_done_default):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(get_url_for_package), (get_search_url_for_package):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (download_all_packages),
	(install_all_packages), (rpm_show_progress), (do_rpm_install),
	(eazel_install_prune_packages_helper),
	(eazel_install_prepare_rpm_system),
	(eazel_install_add_headers_to_rpm_set),
	(eazel_install_fetch_rpm_dependencies), (print_package_list),
	(eazel_install_ensure_deps), (ei_extract_attributes),
	(eazel_install_query_package_system):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-types.c:
	(rpmfilename_from_packagedata):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/trilobite-eazel-install-service.oafinfo:
	* components/services/install/server/Makefile.am:
	* components/services/install/server/trilobite-eazel-install-service.oafinfo:
	Added a load of stuff to make the install service a corba
	service. There are corba/c converters in
	eazel-install-corba-types, moved a load of the corba magic into
	eazel-install-corba.c and created a gtk+ object in
	eazel-install-corba-callback that embodies the client interface to
	the install service.
	
	* components/services/time/service/Makefile.am:
	* components/services/time/service/trilobite-eazel-time-service.c:
	(trilobite_eazel_time_service_initialize):
	Changed the default url to the new testmachine. 
	
	* components/services/trilobite/libtrilobite/trilobite-core-distribution.c:
	(trilobite_get_distribution_name), (trilobite_get_distribution_enum):
	* components/services/trilobite/libtrilobite/trilobite-core-distribution.h:
	Added call to get the distro enum from the generated string. Used
	for the corbafication of libinstall.
	
	* configure.in:
	Added the server dir makefile for services/install/server
	
	* athena-installer/src/HACKING:
	* athena-installer/src/Makefile:
	* athena-installer/src/Makefile.am:
	* athena-installer/src/installer.c: (installer):
	* athena-installer/src/interface.c: (create_window):
	* athena-installer/src/link.sh:
	* athena-installer/src/prescript:
	Updated to still work, as long as libinstall is compiled using
	EAZEL_INSTALL_NO_CORBA (see the hacking file)
	
	* athena.spec.in:
	Changed gnome-xml to libxml

2000-06-21  Darin Adler  <darin@eazel.com>

	* components/hardware/athena-hardware-view.c:
	(get_RAM_description):
	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri):
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_update_from_uri):
	* components/services/startup/athena-view/athena-service-startup-view.c:
	(gather_config_button_cb), (register_button_cb),
	(athena_service_startup_view_destroy):
	* libathena-extensions/athena-directory-async.c:
	(set_up_request_by_file_attributes):
	* libathena-extensions/athena-file-utilities.c:
	(athena_format_uri_for_display),
	(athena_get_uri_from_local_path):
	* libathena-extensions/athena-file.c:
	(athena_file_get_size_as_string):
	* libathena-extensions/athena-link-set.c: (link_set_path_name),
	(expand_uri):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_display_selection_info):
	* src/athena-desktop-window.c:
	(athena_desktop_window_initialize),
	(athena_desktop_window_new), (realize):
	Updated callers of the gnome-vfs calls that I just changed.
	In some cases I made them use higher-level athena utility
	functions instead.

2000-06-21  Gene Z. Ragan  <gzr@eazel.com>

	More updating of code to change gnome-vfs error codes to reflect
	renaming done to fix bug 1162.

	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_name_for_file):
	Some old constants here.

2000-06-21  Gene Z. Ragan  <gzr@eazel.com>

	Update code to change gnome-vfs error codes to reflect
	renaming done to fix bug 1162.
	
	* components/help/help-method.c: (help_do_transform):
	* libathena-extensions/athena-directory.c:
	(athena_make_directory_and_parents),
	(construct_alternate_metafile_uri):
	* libathena-extensions/athena-file.c: (athena_file_rename),
	(athena_file_set_permissions), (athena_file_delete):
	* libathena-extensions/athena-gdk-pixbuf-extensions.c:
	(athena_gdk_pixbuf_load), (file_read_callback):
	* libathena-extensions/athena-icon-factory.c:
	(athena_make_directory_and_parents),
	(athena_icon_factory_get_thumbnail_uri):
	* libathena-extensions/athena-search-async.c:
	(athena_async_medusa_search), (request_search):
	* src/file-manager/dfos-xfer.c: (fs_xfer), (fs_move_to_trash):
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file):
	* src/athena-applicable-views.c:
	(get_athena_navigation_result_from_gnome_vfs_result),
	(got_file_info_callback), (async_get_file_info_text):

2000-06-21  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-horizontal-splitter.c:
	(athena_horizontal_splitter_initialize), (draw_resize_bar),
	(draw_resize_bar_thumb), (athena_horizontal_splitter_draw):
	Arlofication of the splitter widget.  Bug 759.
	
2000-06-20  J Shane Culpepper  <pepper@eazel.com>

	* components/services/login/athena-view/main.c:
	(login_object_destroyed), (login_make_object), (main):
	* components/services/login/athena-view/athena-login-view.c:
	(generate_login_form), (entry_changed_cb), (login_button_cb),
	(maintenance_button_cb), (show_feedback), (generate_form_title),
	(athena_login_view_initialize_class),
	(athena_login_view_initialize), (athena_login_view_destroy),
	(athena_login_view_get_athena_view),
	(athena_login_view_load_uri), (login_load_location_callback):
	* components/services/login/athena-view/athena-login-view.h:
	* components/services/login/athena-view/athena-login-view.oafinfo:
	Initial stab at a decent login view for services. Doesn't
	actually do any connecting or authentication yet but it's a good
	start to the view. Still needs some work before I hook it up to
	the build.

2000-06-20  Rebecca Schulman  <rebecka@eazel.com>

	* src/athena-search-bar-private.h:
	forgot to add this to the last commit

2000-06-20  Rebecca Schulman  <rebecka@eazel.com>

	* src/Makefile.am:
	* src/athena-search-bar.c:
	* src/athena-search-bar.h:
	(athena_search_bar_initialize_class),
	(athena_search_bar_initialize),
	(athena_search_bar_set_location),
	(athena_search_bar_set_search_controls):
	* src/athena-switchable-search-bar.c: 
	* src/athena-switchable-search-bar.h:
	* src/athena-search-bar-criterion.c:
	* src/athena-search-bar-criterion.h:
	Set up search-bar as a virtual class that switches between the
	available search bars, similar to athena-navigation-bar.

	* src/athena-complex-search-bar.c:
	* src/athena-complex-search-bar.h:
	* src/athena-simple-search-bar.c:
	* src/athena-simple-search-bar.h:
	Added simple and complex search bar skeletons.
	These need to get filled out a lot more.
	
	* src/athena-switchable-navigation-bar.c:
	(athena_switchable_navigation_bar_initialize):
	Switchable navigation bar uses a switchable search bar instead of
	a normal search bar, since that class is now virtual.
	
	* src/athena-navigation-bar.c:
	fixed comment typos
	
	* libathena-extensions/athena-directory.h:
	Exported athena_uri_is_search_uri function
	* libathena-extensions/Makefile.am:
	Added athena-search-uri.c and .h files.
	The functions aren't filled out yet, though.
	* libathena-extensions/athena-search-uri.c:
	(athena_search_uri_to_simple_search_criteria):
	* libathena-extensions/athena-search-uri.h:
	
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_register_for_ui):
	* libathena-extensions/athena-global-preferences.h:
	Changed search bar preference names from
	ATHENA_SEARCH_BAR_ONE_BOX and ATHENA_SEARCH_BAR_MULTI_BOX to
	ATHENA_SIMPLE_SEARCH_BAR and ATHENA_COMPLEX_SEARCH_BAR to
	match respective object names

2000-06-20  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_stretch_handles_aa):
	Improved the positioning of the anti-aliased stretch handles by
	using the icon rect instead of the bounds rect.
	
2000-06-20  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-program-chooser.c:
	(athena_program_chooser_new): Left-justified prompt.
	
	* src/file-manager/fm-properties-window.c:
	(add_prompt_and_separator), (add_permissions_row_label),
	(add_special_execution_checkbox), (add_special_execution_flags),
	(create_permissions_page): Added as yet non-working checkboxes
	for the SUID, GUID, and Sticky flags. The layout and wording
	are abysmal; this will not stand.

2000-06-20  Darin Adler  <darin@eazel.com>

	Fixed bug 1359 (Navigating into empty folder hangs).

	* libathena-extensions/athena-directory-async.c:
	(dequeue_pending_idle_callback): Fixed bug where directories with
	multiples of 32 files would hang the state machine.

2000-06-20  Andy Hertzfeld  <andy@eazel.com>

	* data/backgrounds/Makefile.am:
	added and removed some background images
	
	* data/backgrounds/baize.png:
	* data/backgrounds/cherrywood.jpg:
	* data/backgrounds/darkwood.png:
	* data/backgrounds/grass.png:
	* data/backgrounds/gray_fabric.png:
	* data/backgrounds/greenery.jpg:
	* data/backgrounds/manila.jpg:
	* data/backgrounds/raindrops.png:
	* data/backgrounds/sky.jpg:
	removed old background images
	
	* data/backgrounds/blue_sky.png:
	* data/backgrounds/brown_bag.png:
	* data/backgrounds/clouds.png:
	* data/backgrounds/irish_spring.png:
	* data/backgrounds/manila_paper.png:
	* data/backgrounds/pale_coins.png:
	* data/backgrounds/ridged_paper.png:
	* data/backgrounds/rough_paper.png:
	added new background images from Susan
	
	* icons/emblem-noread.png:
	changed the "can't read" emblem to a newer one from Susan

2000-06-20  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1428 (Back button crashes in bookmark code)

	* src/athena-window-menus.c: 
	(bookmark_holder_new),
	(bookmark_holder_free): Replaced comment that says
	"bookmark here is unreffed, if this causes problem
	we can ref it someday" with ref/unref pair, now that
	we've found a case where it caused a problem. Going
	Back unrefs the bookmark for the current location before
	this go-menu code does its thing.

2000-06-20  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_get_octal_permissions_as_string):
	Make octal permissions always at least 3 digits long.
	
	* libathena-extensions/athena-undo-manager.c:
	(destroy_servant), (create_servant), (release_transaction),
	(corba_append), (corba_forget), (corba_undo),
	(athena_undo_manager_initialize),
	(athena_undo_manager_initialize_class),
	(athena_undo_manager_undo), (destroy), (update_undo_menu_item):
	Rewrote undo manager to support one level of undo and redo.

2000-06-20  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_remove_image_uri),
	(athena_icon_factory_get_icon_for_file), (mark_recently_used),
	(cached_image_still_valid), (get_image_from_cache):
	Made image files that use themselves as their icon update properly
	when the image file changes. To do this, I added a "cached_time"
	field to the image cache key, and used it in get_image_from_cache
	to remove the stale image from the cache if necessary

2000-06-20  Darin Adler  <darin@eazel.com>

	Made AthenaFile async. like AthenaDirectory already was.
	
	* RENAMING: Added a renaming idea.
	
	* libathena-extensions/athena-directory-async.c:
	(cancel_get_info), (cancel_metafile_read),
	(athena_directory_cancel): Added the new getting of file info
	to the cancel logic.
	(athena_compare_file_with_name): Changed to get the name in a
	way that works with files with no info.
	(athena_async_destroying_file): Handle the cancelling for the
	get_file_info case.
	(lacks_info), (wants_info), (request_is_satisfied): Add code to
	handle the need for file info for a newly created AthenaFile.
	(get_info_callback), (start_getting_file_info), (state_changed):
	Add code to get file info for files that lack it.
	
	* libathena-extensions/athena-directory-private.h:
	Add fields for getting file info for new files.
	
	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_moved): Moved the logic about
	updating the name on a file as it is moved into athena-file.c.
	
	* libathena-extensions/athena-file-attributes.h:
	Added a "deep count" attribute and function as a placeholder for
	work that I'll be doing for John shortly.
	
	* libathena-extensions/athena-file-private.h:
	Moved the calls relating to updating an existing AthenaFile
	so they are private and added one for a name change.
	
	* libathena-extensions/athena-file-utilities.h:
	Added interface for new athena_read_entire_file family of calls
	that I still need to implement.
	
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-file.c:
	(athena_file_new_from_name), (athena_file_new_from_info):
	Added a way to create a file without having GnomeVFSFileInfo yet.
	(athena_file_get): Don't get the GnomeVFSFileInfo; let the async.
	logic handler that.
	(rename_update_info_and_metafile): Handle new name field.
	(athena_file_rename): Use new name field.
	(athena_file_get_gnome_vfs_uri): Common code shared in a couple
	of places. Started fixing the "no file object for root" problem.
	(athena_file_matches_uri): Use athena_file_get_gnome_vfs_uri.
	(athena_file_update_info): Handle NULL case and new name field.
	(athena_file_update_name): New function used by move code in
	athena-directory.c.
	(athena_file_compare_by_type): Handle NULL info case.
	(athena_file_compare_for_sort_internal): Handle NULL info case.
	(athena_file_compare_name): Use new name field.
	(athena_file_get_metadata), (athena_file_get_metadata_list):
	Handle NULL file and use new name field.
	(athena_file_set_metadata), (athena_file_set_metadata_list):
	Use new name field.
	(athena_file_get_name): Handle NULL file and use new name field.
	(athena_file_get_uri): Use athena_file_get_gnome_vfs_uri.
	(info_missing): New function to handle NULL file case, NULL info
	case, and check the valid_fields more thoroughly.
	(athena_file_get_date_as_string), (athena_file_get_size),
	(athena_file_can_get_permissions),
	(athena_file_get_owner_as_string),
	(athena_file_get_group_as_string),
	(athena_file_get_size_as_string),
	(athena_file_get_type_as_string), (athena_file_get_file_type),
	(athena_file_get_mime_type), (athena_file_is_mime_type),
	(athena_file_is_symbolic_link),
	Use info_missing to handle NULL file and NULL info cases and to
	do valid_fields checks as needed.
	(athena_file_get_permissions_as_string): Move file check so the
	NULL case will work properly.
	(athena_file_get_mime_type_as_string_attribute): Got rid of
	redundant g_free call.
	(athena_file_get_string_attribute): Remove file check so NULL
	case will work properly.
	(athena_file_get_emblem_names): Handle NULL file case.
	(athena_file_get_keywords): Handle NULL file case.
	(athena_file_is_executable): Remove file check so NULL case will
	work properly.
	(athena_file_mark_gone): Add code to get rid of info which we
	don't need to keep around for files that are gone.
	(athena_file_activate_custom): Added FIXME comments.

	* libathena-extensions/athena-gdk-extensions.c:
	(athena_get_largest_fitting_font): Changed so it handles the case
	of NULL for passed-in text properly.
	
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file): Formatting.
	(athena_icon_factory_get_pixbuf_for_file): Handle NULL file by
	returning NULL for the pixbuf.
	(athena_icon_factory_get_pixmap_and_mask_for_file):
	Handle NULL for the pixbuf by return NULL for the pixmap/mask.
	
	* src/athena-main.c: (print_leaks), (main): Do the leak printing
	from an atexit function so more of the cleanup will run first.

	* libathena-extensions/athena-gtk-extensions.h:
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_pixmap_new_empty): A simple cover for allocating a
	GtkPixmap before we have a GdkPixmap to display.
	
	* src/athena-sidebar-title.c: (athena_sidebar_title_initialize):
	Create the widgets when the title is set up instead of creating
	them "as needed".
	(update_icon): Always update the icon, even if the file is NULL.
	(update_title): Always update the title, even if the file is NULL.
	Also got rid of the line-breaking code. We instead use the line-
	breaking code inside GtkLabel, which we can tweak as needed by
	setting a line width. We may need to revisit this, but lets not
	re-add our own line-break code unless we have to.
	(append_and_eat), (update_more_info): Always update the info field,
	even if the file is NULL. I rewrote this.
	(add_emblem), (update_emblems): Always update the emblems, even if
	the file is NULL.
	(update_notes): Always update the notes, even if the file is NULL.
	(update_all): Update all the pieces separately (the old code was
	doing them strangely bunched up).
	(athena_sidebar_title_set_uri): Always ask for the directory
	item count, even when the item is not yet known to be a directory.
	
	* src/athena-window.c: (athena_window_constructed): Get rid
	of the call to gtk_widget_show_all that was showing things that
	were intentionally hidden.
	(athena_window_load_content_view_menu): Removed an unused
	variable that was set up but never examined.

2000-06-20  Darin Adler  <darin@eazel.com>

	* RENAMING:
	* libathena-extensions/athena-directory-async.c:
	(cancel_get_info), (cancel_metafile_read),
	(athena_directory_cancel),
	(athena_directory_request_read_metafile),
	(athena_compare_file_with_name),
	(update_file_info_in_list_if_needed),
	(dequeue_pending_idle_callback),
	(athena_directory_get_info_for_new_files),
	(athena_async_destroying_file), (lacks_info), (wants_info),
	(request_is_satisfied), (start_monitoring_file_list),
	(get_info_callback), (start_getting_file_info), (state_changed):
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.c:
	(athena_directory_destroy),
	(athena_directory_notify_files_moved):
	* libathena-extensions/athena-file-attributes.h:
	* libathena-extensions/athena-file-private.h:
	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file.c:
	(athena_file_new_from_name), (athena_file_new_from_info),
	(athena_file_get), (rename_update_info_and_metafile),
	(athena_file_rename), (athena_file_get_gnome_vfs_uri),
	(athena_file_matches_uri), (athena_file_update_info),
	(athena_file_update_name), (athena_file_compare_by_type),
	(athena_file_compare_for_sort_internal),
	(athena_file_compare_name), (athena_file_get_metadata),
	(athena_file_get_metadata_list), (athena_file_set_metadata),
	(athena_file_set_metadata_list), (athena_file_get_name),
	(athena_file_get_uri), (info_missing),
	(athena_file_get_date_as_string), (athena_file_get_size),
	(athena_file_can_get_permissions),
	(athena_file_get_permissions_as_string),
	(athena_file_get_owner_as_string),
	(athena_file_get_group_as_string),
	(athena_file_get_mime_type_as_string_attribute),
	(athena_file_get_size_as_string),
	(athena_file_get_string_attribute),
	(athena_file_get_type_as_string), (athena_file_get_file_type),
	(athena_file_get_mime_type), (athena_file_is_mime_type),
	(athena_file_get_emblem_names), (athena_file_get_keywords),
	(athena_file_is_symbolic_link), (athena_file_is_executable),
	(athena_file_mark_gone), (athena_file_activate_custom):
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-gdk-extensions.c:
	(athena_get_largest_fitting_font):
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file),
	(athena_icon_factory_get_pixbuf_for_file),
	(athena_icon_factory_get_pixmap_and_mask_for_file):
	* src/athena-main.c: (athena_leak_checker_init),
	(athena_leak_print_leaks), (print_leaks), (main):
	* src/athena-sidebar-title.c: (athena_gtk_pixmap_new_empty),
	(athena_sidebar_title_initialize),
	(athena_sidebar_title_destroy), (update_icon), (update_title),
	(append_and_eat), (update_more_info), (add_emblem),
	(update_emblems), (update_notes),
	(athena_sidebar_title_get_text),
	(athena_sidebar_title_set_text), (update_all),
	(athena_sidebar_title_set_uri):
	* src/athena-window.c: (athena_window_constructed),
	(athena_window_load_content_view_menu):

2000-06-20  Michael Engber  <engber@eazel.com>

	* src/file-manager/fm-list-view.c: (fm_list_view_bump_zoom_level),
	(fm_list_view_zoom_to_level),
	(fm_list_view_restore_default_zoom_level),
	(fm_list_view_begin_loading), (fm_list_view_set_zoom_level):
	Finished off bugs 301 and 450 by making analogous zooming
	fixes for list-view as were previously done for icon-view.

2000-06-20  John Sullivan  <sullivan@eazel.com>

	Finished task 878 (permissions should be displayed as an
	octal number in Properties window)

	Finished task 880 (should show accessed & modified dates
	in Properties window)

	* libathena-extensions/athena-file.c:
	(athena_file_get_octal_permissions_as_string):
	New function, returns permissions as octal number.
	(athena_file_get_permissions_as_string): Added check
	for invalid permissions.
	(athena_file_get_string_attribute): Added case for
	"octal_permissions"
	* src/file-manager/fm-icon-text-window.c: Made "octal
	permissions" a new choice for icon captions.
	* src/file-manager/fm-properties-window.c:
	(mtime_and_ctime_different): New function, does what you
	might think.
	(create_basic_page): Include accessed date/time, and 
	include modification date/time if different than changed
	date/time.
	(create_permissions_page): Show permissions as octal number
	in addition to as string.

2000-06-20  Michael Engber  <engber@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_report_zoom_level_changed):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c: (fm_icon_view_begin_loading),
	(fm_icon_view_set_zoom_level), (fm_icon_view_bump_zoom_level),
	(fm_icon_view_zoom_to_level),
	(fm_icon_view_restore_default_zoom_level):
	* src/athena-view-frame.c: (athena_view_frame_load_client):
	* src/athena-window.c:
	(athena_window_zoom_level_changed_callback),
	(athena_window_connect_view),
	(athena_window_real_set_content_view):
	* src/athena-zoom-control.c: (set_zoom_level),
	(athena_zoom_control_button_press_event),
	(athena_zoom_control_reset_zoom_level),
	(athena_zoom_level_from_double),
	(athena_zoom_control_set_zoom_level):
	The zoom control is now driven by its zoomable. This corrected
	the most visible problem - getting the correct initial state.
	Previously, the zoomable never propagated any messages back
	(not that anyone was listening for them anyway).

2000-06-20  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/Makefile.am:
	Exorcise libathena-extensions.h.  Its really used anywhere and
	stuff in this library is private anyway.  Also, prevent the
	makefile from even creating the installed libathena-extensions
	directory since nothing gets installed there.

	* libathena-extensions/libathena-extensions.h:
	Removed from build.
	
	* components/help/hyperbola-main.c:
	Updated for libathena-extensions.h exorcism.
	
2000-06-20  Ramiro Estrugo  <ramiro@eazel.com>

	* components/tree/.cvsignore:
	Ignore the generated files. 

2000-06-20  John Sullivan  <sullivan@eazel.com>

	Finished task 670 (Open multiple windows when multiple
	URIs dropped on location bar).

	* src/athena-location-bar.c: 
	(athena_location_bar_get_window): New helper function.
	(drag_data_received_callback): If multiple URIs dropped,
	ask the user whether they want to view each in a separate 
	window.

2000-06-20  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	* libathena-extensions/Makefile.am:
	* libathena/Makefile.am:
	* librsvg/Makefile.am:
	* athena-installer/src/Makefile:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	* test/Makefile.am:
	Remove the GNOMECANVASPIXBUF depedency.  Its not used no more.

Tue Jun 20 01:49:08 2000  George Lebl  <jirka@5z.com>

	* test/athena-leak-symbol-lookup.c
	(athena_leak_symbol_map_get_offsets):  Do the sscanf into a
	gulong and then assign to the inode which is of type ino_t to avoid
	#ifdefs or other hacks to make it work on alpha.

2000-06-19  Maciej Stachowiak  <mjs@eazel.com>

	FIXME 1262 believed fixed now:
	
	* libathena-extensions/athena-mime-actions.c
	(athena_mime_get_short_list_components_for_uri,
	gnome_vfs_mime_application_has_id_not_in_list): Fixed some memory
	leaks.
	
	* src/athena-window.c (athena_window_load_content_view_menu):
	Fixed a memory leak.

2000-06-19  Ramiro Estrugo  <ramiro@eazel.com>

	* components/html/ntl-web-browser.oafinfo:
	* components/mozilla/athena-mozilla-content-view.oafinfo:
	Update the "name" attributes to reflect the fact that mozilla is
	the default "text/html" handler for gnome vfs.
	
2000-06-19  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Added better mozilla detection artificial intelligence and voodoo.
	
2000-06-19  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/Makefile.am, components/tree/main.c,
	components/tree/athena-tree-view.c,
	components/tree/athena-tree-view.h,
	components/tree/athena-tree-view.oafinfo: Skeleton of the tree
	component. For now it just creates the tree widget and puts in
	some hard-coded directories.

	* components/Makefile.am, configure.in: Add tree component to the
	build.

2000-06-19  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-icon-factory.h:
	Removed old never-implemented prototypes that no longer even fit
	the general design.

2000-06-19  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-mime-actions.c: Remove stray
	#ifdef.

2000-06-19  John Sullivan  <sullivan@eazel.com>

	Finished bug 1401 (bookmark icon never updates) and some
	related issues.

	* libathena-extensions/athena-directory-async.c:
	(metafile_read_done): Call emit_metadata_changed so
	change-watchers will know that new metadata is available.
	(set_up_request_by_file_attributes): Added FIXME comment
	about confusion between file attributes and metadata.
	(is_anyone_waiting_for_metafile): Made it check monitor_list
	as well as call_when_ready_list.
	
	* libathena-extensions/athena-icon-factory.h,
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_required_file_attributes):
	New function, returns the list of file attributes needed
	to get the right icon for a file.
	(athena_icon_factory_is_icon_ready_for_file): Rewrote
	to call this new function.
	
	* src/athena-bookmark-list.c:
	(bookmark_in_list_changed_callback), (stop_monitoring_bookmark),
	(stop_monitoring_one), (insert_bookmark_internal),
	(athena_bookmark_list_append),
	(athena_bookmark_list_delete_item_at),
	(athena_bookmark_list_delete_items_with_uri),
	(athena_bookmark_list_insert_item),
	(athena_bookmark_list_load_file): Made bookmark list monitor
	the "changed" signal of all its bookmarks, so it knows to save
	new improved icons or names to disk.
	* src/athena-sidebar-title.c: 
	(athena_sidebar_title_set_uri): add file monitor in all cases,
	not just if it's a directory; monitor the attributes needed for
	getting an icon too. This fixes a bug where a custom icon on the
	user's home directory wouldn't appear in the sidebar.
	(release_file): remove file monitor in all cases.

2000-06-19  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_component_for_uri_internal),
	(athena_mime_get_short_list_components_for_uri),
	(make_oaf_query_with_known_mime_type),
	(make_oaf_query_with_uri_scheme_only): Make sort conditions
	syntactically valid when we don't have a MIME type. Added a FIXME
	to report the error properly when we have better error handling.
	
	* src/athena.oafinfo: Remove hardware: as a supported URI scheme
	from the list view.

2000-06-19  Maciej Stachowiak  <mjs@eazel.com>

	* HACKING: Added docs on how to use the leak checker, thanks to
	Pavel.

2000-06-19  John Sullivan  <sullivan@eazel.com>

	Fixed uninitialized variable that was masking the real
	reason why eazel: URIs don't work today (real reason 
	has not been figured out yet).

	* src/athena-applicable-views.c: (got_file_info_callback):
	Initialize default_id to NULL.

	More work towards bug 1401 (bookmark icon never updates).
	Almost done, but for a bug where bookmark for current
	location in Go menu doesn't get an icon.

	* libathena-extensions/athena-string.h,
	* libathena-extensions/athena-string.c:
	(athena_str_is_empty): New function, returns TRUE for
	NULL or zero-length string.

	* libathena-extensions/athena-file-attributes.h:
	Added #define for ATHENA_FILE_ATTRIBUTE_CUSTOM_ICON
	
	* libathena-extensions/athena-directory-async.c:
	Add file_info to Request struct.
	(request_is_satisfied): Renamed from ready_callback_is_satisfied;
	now takes a Request and a AthenaFile instead of a ReadyCallback.
	(call_ready_callbacks): Update existing caller for API change.
	(set_up_request_by_file_attributes): Set request's file_info
	field to TRUE if mime type requested; set request's metafile
	field to TRUE if custom icon requested.	
	(athena_directory_check_if_ready_internal): New function,
	use request_is_satisfied to see whether specified attributes 
	are available.
	* libathena-extensions/athena-directory-private.h:
	Added athena_directory_check_if_ready_internal.
	* libathena-extensions/athena-file.c:
	(athena_file_check_if_ready): Call athena_directory_check_
	if_ready_internal.

	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_is_icon_ready_for_file): Implemented
	this formerly nonexistent function by calling 
	athena_file_check_if_ready

	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_destroy), (athena_bookmark_icon_is_different),
	(athena_bookmark_update_icon), (bookmark_file_changed_callback),
	(athena_bookmark_set_icon_to_default), (athena_bookmark_new),
	(athena_bookmark_new_with_icon): AthenaBookmark now keeps
	ahold of a AthenaFile internally so it can notice its
	"changed" signal. When this signal fires, the bookmark determines
	whether a changed icon is available.

2000-06-19  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-list.c: (activate_row),
	(athena_list_is_row_selected), (row_set_selected),
	(select_row_unselect_others), (athena_list_select_all),
	(athena_list_button_press), (athena_list_button_release),
	(athena_list_set_keyboard_focus),
	(athena_list_keyboard_move_to), (athena_list_select_row),
	(keyboard_row_reveal_timeout_callback),
	(schedule_keyboard_row_reveal), (reveal_row),
	(athena_list_keyboard_navigation_key_press),
	(athena_list_activate_selected_items), (athena_list_key_press),
	(list_requisition_width), (new_column_width),
	(size_allocate_columns), (get_cell_style),
	(gdk_window_size_as_rectangle), (draw_cell_pixmap),
	(draw_cell_pixbuf), (get_cell_horizontal_start_position),
	(last_column_index), (get_cell_rectangle),
	(get_cell_greater_rectangle), (draw_cell), (draw_row), (draw_rows),
	(athena_list_resize_column), (athena_list_mark_cell_as_link),
	(athena_list_set_cell_contents), (athena_list_set_pixbuf_list),
	(athena_list_track_new_column_width),
	(athena_list_column_resize_track_start),
	(athena_list_column_resize_track),
	(athena_list_column_resize_track_end),
	(athena_list_drag_motion), (athena_list_drag_drop),
	(athena_list_drag_data_received), (athena_list_row_at),
	(insert_row):
	Rewrite draw_row introducing draw_cell and splitting up the drawing
	code into several routines.
	Eliminate/simplify a bunch of confused blitting code in draw_row.
	Fix formatting in athena_list.c.
	Rename a number of function arguments to more meaningful names.
	
2000-06-18  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-background.c:
	(athena_background_draw_flat_box):
	fixed long-standing bug where gradient or tiled image backgrounds
	would draw over other widgets in the sidebar.  Fixed by making
	athena_background_draw_flat_box set up the clip rectangle if
	necessary.
	
2000-06-18  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_remove_image_uri),
	(athena_icon_factory_clear_image), (first_file_more_recent),
	(athena_icon_factory_get_thumbnail_uri), (check_for_thumbnails):
	made it check modification dates to update thumbnails when their
	underlying image changes.  Had to add a routine to remove specific
	images from the icon cache.
	
2000-06-18  J Shane Culpepper  <pepper@eazel.com>

	* components/services/inventory/.cvsignore:
	* components/services/inventory/Makefile.am:
	* components/services/inventory/command-line/README:
	* components/services/inventory/idl/.cvsignore:
	* components/services/inventory/idl/Makefile.am:
	* components/services/inventory/idl/trilobite-eazel-inventory.idl:
	* components/services/inventory/lib/.cvsignore:
	* components/services/inventory/lib/Makefile.am:
	* components/services/inventory/lib/trilobite-eazel-inventory-public.h:
	* components/services/inventory/athena-view/.cvsignore:
	* components/services/inventory/athena-view/Makefile.am:
	* components/services/inventory/athena-view/icons/.cvsignore:
	* components/services/inventory/athena-view/icons/Makefile.am:
	* components/services/inventory/athena-view/main.c: (main):
	* components/services/inventory/athena-view/athena-inventory-view.c:
	* components/services/inventory/athena-view/athena-inventory-view.h:
	* components/services/inventory/service/.cvsignore:
	* components/services/inventory/service/Makefile.am:
	* components/services/inventory/service/main.c: (main):
	* components/services/inventory/service/trilobite-eazel-inventory-impl.c:
	* components/services/login/athena-view/.cvsignore:
	* configure.in:

	Adding one more template.  I forgot about this one.  Its not hooked up
	to core builds yet but it will build.

2000-06-18  Pavel  <pavel@eazel.com>

	* test/athena-leak-symbol-lookup.c:
	(athena_leak_symbol_map_get_offsets):
	Do a better 64-bit clean fix avoiding messy ifdefs.

Sun Jun 18 02:50:47 2000  George Lebl <jirka@5z.com>

	* components/help/help-method.c (file_in_info_path):
	  s/g_str_freev/g_strfreev/ as that's the correct glib name

	* components/help/hyperbola-main.c,
	  components/help/hyperbola-nav-index.c,
	  components/help/hyperbola-nav-search.c
	  components/help/hyperbola-nav-tree.c,
	  components/help/hyperbola-nav.h:  Use hyperbola-nav.h as a header
	  to put the prototypes from the hyperbola-nav-*.c files.  And
	  include this file in hyperbola-main.c and hyperbola-nav-*.c

	* libathena-extensions/athena-global-preferences.c
	  (global_preferences_register_boolean_with_defaults)
	  (global_preferences_register_enum_with_defaults),
	  libathena-extensions/athena-preferences.c
	  (preferences_hash_node_check_changes_func)
	  (user_level_changed_callback):
	  use GU?INT_TO_POINTER and GPOINTER_TO_U?INT macros to get and pass
	  ints and uints as pointers.

	* librsvg/rsvg-bpath-util.c, test/athena-leak-checker.c:
	  include <string.h>
	
	* test/athena-leak-checker.c (athena_leak_record_malloc)
	  (athena_leak_record_realloc) (athena_leak_record_free)
	  (print_one_leak):  Store pointers in gulongs not guints and
	  when printing size_t, cast to long and use %ld.

	* test/athena-leak-symbol-lookup.c
	  (athena_leak_symbol_map_get_offsets): When reading in gint64,
	  check if long is actually 64bit, in which case use %lx otherwise
	  use %Lx for sscanf.

2000-06-18  J Shane Culpepper  <pepper@eazel.com>

	* components/services/login/.cvsignore:
	* components/services/login/Makefile.am:
	* components/services/login/command-line/README:
	* components/services/login/idl/.cvsignore:
	* components/services/login/idl/Makefile.am:
	* components/services/login/idl/trilobite-eazel-login.idl:
	* components/services/login/lib/.cvsignore:
	* components/services/login/lib/Makefile.am:
	* components/services/login/lib/trilobite-eazel-login-public.h:
	* components/services/login/athena-view/.cvsignore:
	* components/services/login/athena-view/Makefile.am:
	* components/services/login/athena-view/icons/.cvsignore:
	* components/services/login/athena-view/icons/Makefile.am:
	* components/services/login/athena-view/main.c: (main):
	* components/services/login/athena-view/athena-login-view.c:
	* components/services/login/athena-view/athena-login-view.h:
	* components/services/login/service/.cvsignore:
	* components/services/login/service/Makefile.am:
	* components/services/login/service/main.c: (main):
	* components/services/login/service/trilobite-eazel-login-impl.c:
	* components/services/summary/.cvsignore:
	* components/services/summary/Makefile.am:
	* components/services/summary/command-line/README:
	* components/services/summary/idl/.cvsignore:
	* components/services/summary/idl/Makefile.am:
	* components/services/summary/idl/trilobite-eazel-summary.idl:
	* components/services/summary/lib/.cvsignore:
	* components/services/summary/lib/Makefile.am:
	* components/services/summary/lib/trilobite-eazel-summary-public.h:
	* components/services/summary/athena-view/.cvsignore:
	* components/services/summary/athena-view/Makefile.am:
	* components/services/summary/athena-view/icons/.cvsignore:
	* components/services/summary/athena-view/icons/Makefile.am:
	* components/services/summary/athena-view/main.c: (main):
	*
	components/services/summary/athena-view/athena-summary-view.c:
	*
	components/services/summary/athena-view/athena-summary-view.h:
	* components/services/summary/service/.cvsignore:
	* components/services/summary/service/Makefile.am:
	* components/services/summary/service/main.c: (main):
	*
	components/services/summary/service/trilobite-eazel-summary-impl.c:

	Adding 2 new templates to finish out all of the missing service pieces
	I know of right now.  Once again these will build but they are not
	hooked into he core build. They don't do anything yet.

	* components/services/trilobite/libtrilobite/helixcode-utils.h:
	*
	components/services/trilobite/libtrilobite/trilobite-core-distribut
	ion.h:
	*
	components/services/trilobite/libtrilobite/trilobite-core-messaging
	.c:
	*
	components/services/trilobite/libtrilobite/trilobite-core-messaging
	.h:
	*
	components/services/trilobite/libtrilobite/trilobite-core-metadata-
	manager.c:
	*
	components/services/trilobite/libtrilobite/trilobite-core-metadata-
	manager.h:
	*
	components/services/trilobite/libtrilobite/trilobite-core-network.c
	:
	*
	components/services/trilobite/libtrilobite/trilobite-core-network.h
	:
	*
	components/services/trilobite/libtrilobite/trilobite-core-package-m
	anager.c:
	*
	components/services/trilobite/libtrilobite/trilobite-core-package-m
	anager.h:
	*
	components/services/trilobite/libtrilobite/trilobite-core-security-
	manager.c:
	*
	components/services/trilobite/libtrilobite/trilobite-core-security-
	manager.h:
	*
	components/services/trilobite/libtrilobite/trilobite-core-tests.c:
	*
	components/services/trilobite/libtrilobite/trilobite-core-tests.h:
	*
	components/services/trilobite/libtrilobite/trilobite-core-utils.c:
	*
	components/services/trilobite/libtrilobite/trilobite-core-utils.h:
	* components/services/trilobite/libtrilobite/trilobite-tests.c:
	* components/services/trilobite/libtrilobite/trilobite-tests.h:
	* components/services/trilobite/libtrilobite/trilobite-utils.c:
	* components/services/trilobite/libtrilobite/trilobite-utils.h:

	Cleaned up some more trilobite code to be in sync with our current
	standards.

	* components/services/vault/idl/trilobite-eazel-vault.idl:
	* components/services/vault/lib/.cvsignore:
	* components/services/vault/athena-view/athena-vault-view.h:
	* components/services/vault/service/.cvsignore:

	Minor fixes to previous checkin.

	* configure.in:

	Added makefile generation of login and summary directories.

2000-06-17  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/sample/command-line/main.c: (main):
	* components/services/trilobite/sample/athena-view/main.c:
	*
	components/services/trilobite/sample/athena-view/athena-sample-
	service-view.c:
	*
	components/services/trilobite/sample/athena-view/athena-sample-
	service-view.h:
	*
	components/services/trilobite/sample/athena-view/athena-sample-
	service-view.oafinfo:
	*
	components/services/trilobite/sample/service/trilobite-eazel-sample
	-service.oafinfo:

	Fixing oafinfo files to coorespond to the naming scheme. Minor cosmetic
	fixes.

2000-06-17  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/lib/eazel-install-metadata.h:
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-tests.h:
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.h:

	Fixed install headers to use correct ifdefs.  Mostly cosmetic.

	* components/services/trilobite/sample/lib/sample-service-public.h:
	* components/services/trilobite/sample/athena-view/.cvsignore:
	* components/services/trilobite/sample/athena-view/Makefile.am:
	*
	components/services/trilobite/sample/athena-view/athena-eazel-s
	ample-service-view.oafinfo:
	*
	components/services/trilobite/sample/athena-view/athena-sample-
	service-view.oafinfo:
	*
	components/services/trilobite/sample/service/sample-service-public.
	h:

	More sample fixes to standardize our defacto service template.

	* components/services/vault/.cvsignore:
	* components/services/vault/Makefile.am:
	* components/services/vault/command-line/.cvsignore:
	* components/services/vault/command-line/Makefile.am:
	* components/services/vault/command-line/main.c: (main):
	* components/services/vault/idl/.cvsignore:
	* components/services/vault/idl/Makefile.am:
	* components/services/vault/idl/trilobite-eazel-vault.idl:
	* components/services/vault/lib/.cvsignore:
	* components/services/vault/lib/Makefile.am:
	* components/services/vault/lib/trilobite-eazel-vault-public.h:
	* components/services/vault/athena-view/.cvsignore:
	* components/services/vault/athena-view/Makefile.am:
	* components/services/vault/athena-view/icons/.cvsignore:
	* components/services/vault/athena-view/icons/Makefile.am:
	* components/services/vault/athena-view/main.c: (main):
	* components/services/vault/athena-view/athena-vault-view.c:
	* components/services/vault/athena-view/athena-vault-view.h:
	* components/services/vault/service/.cvsignore:
	* components/services/vault/service/Makefile.am:
	* components/services/vault/service/main.c: (main):
	* components/services/vault/service/trilobite-eazel-vault-impl.c:
	* configure.in:

	Added the vault skeleton.  Not hooked up to the build yet since there's
	nothing of substance here yet.  It will build though.

2000-06-16  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/knob.png:
	added a nice knobbie image for the stretch handles
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_stretch_handles_aa), (athena_icon_canvas_item_render):
	use the knob image instead of a black rectangle for the
	stretch handles.  For now, it only appears in aa mode and they're
	not positioned right.
	* src/athena-window-toolbars.c: (get_stock_callback),
	(get_stock_widget), (setup_button), (setup_toolbar_images):
	added the search button to the toolbar theming machinery
	
2000-06-16  John Sullivan  <sullivan@eazel.com>

	* src/athena-window-menus.c: (clear_appended_bookmark_items):
	Added a NULL check that prevents it from crashing when you
	add bookmarks or change themes.

2000-06-16  John Sullivan  <sullivan@eazel.com>

	More work towards bug 1401 (bookmark icon never updates).
	You can avoid some warnings if you get the latest Bonobo.

	* libathena-extensions/athena-bookmark.h:
	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_initialize_class), (athena_bookmark_set_name):
	Define "changed" signal for bookmarks and wire it up (though
	not yet to the icon-changing case). Remove never-implemented
	and never-to-be-implemented "athena_bookmark_get_file" since
	I changed my mind on the design.
	* src/athena-window-menus.c: (append_bookmark_to_menu),
	(clear_appended_bookmark_items): Connect and disconnect
	signals from the window to the bookmarks in the Go and
	Bookmarks menus.

2000-06-16  Arlo Rose  <arlo@eazel.com>
	* icons/eazel/search.png
	* icons/About_Image.png
	Fixed the invalid white point error on out about image.
	Made the "Eazel Theme" search icon look like an icon Susan
	would have done.

2000-06-16  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_action_type_for_uri),
	(athena_mime_get_default_application_for_uri_internal),
	(athena_mime_get_short_list_applications_for_uri),
	(athena_mime_get_short_list_components_for_uri),
	(athena_mime_get_all_applications_for_uri),
	(athena_mime_set_short_list_applications_for_uri),
	(athena_mime_set_short_list_components_for_uri):
	Simplify the handling of NULL MIME type.

2000-06-16  Rebecka Schulman  <set EMAIL_ADDRESS environment variable>

	* icons/Makefile.am:
	* icons/eazel/Makefile.am:
	* icons/search.png:
	Fixed search icon issues, I hope

2000-06-16  Darin Adler  <darin@eazel.com>

	Another round in the war against computer poetry at the console.

	* components/loser/content/main.c: (loser_make_object), (main):
	* components/loser/sidebar/main.c: (loser_make_object), (main):
	* components/sample/main.c: (sample_make_object), (main):
	* components/services/startup/athena-view/main.c:
	(services_object_destroyed), (services_make_object):
	* src/athena-location-bar.c:
	(athena_location_bar_set_location):
	* src/athena-switchable-navigation-bar.c:
	(athena_switchable_navigation_bar_set_location):
	Took out a lot of puts calls that may have once been useful for
	debugging but now are mostly misleading.

2000-06-16  John Sullivan  <sullivan@eazel.com>

	Some work towards bug 1401 (bookmark icon never updates).
	No visible effect yet.

	* libathena-extensions/athena-bookmark.h:
	Added athena_bookmark_get_file prototype, not yet
	called or implemented.
	
	* libathena-extensions/athena-file.h,
	* libathena-extensions/athena-file.c:
	(athena_file_check_if_ready): New function, does
	nothing yet.

	* libathena-extensions/athena-icon-factory.h:
	Added athena_icon_factory_is_icon_ready_for_file
	prototype, not yet called or implemented.
		
	* src/athena-window-menus.c:
	(athena_window_initialize_bookmarks_menu),
	(athena_window_initialize_go_menu),
	(athena_window_remove_bookmarks_menu_callback),
	(athena_window_remove_go_menu_callback),
	(refresh_bookmarks_menu), 
	(refresh_bookmarks_menu_idle_callback),
	(schedule_refresh_bookmarks_menu), (refresh_go_menu),
	(refresh_go_menu_idle_callback), (schedule_refresh_go_menu):
	Made the code that rebuilds the Go and Bookmarks menus when
	there's been a change to the bookmarks use idle handling to
	batch up requests. This will be important when bookmarks
	broadcast updates for their icons.
	
	* src/athena-window-private.h: Defined AthenaWindowDetails
	struct. We should eventually migrate all of the fields
	of AthenaWindow in here, but I didn't do that now.
	Added two fields used by bookmark-menu-updating code.
	* src/athena-window.h: Made a details field using
	AthenaWindowDetails.

	* src/athena-window.c: 
	(athena_window_init): Create details field.
	(athena_window_destroy): Clean up any pending idle bookmark
	refreshing stuff.

2000-06-16  Rebecka Schulman  <rebecka@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	* libathena-extensions/athena-global-preferences.h:
	* src/athena-search-bar.c: (athena_search_bar_initialize):
	* src/athena-search-bar.h: 
	Changed search preferences, and fixed search icon
	
2000-06-16  Darin Adler  <darin@eazel.com>

	* src/athena-location-bar.c: (try_to_expand_path):
	Removed first cut at a fix for the "space accepts" problem.
	(entry_would_have_inserted_characters),
	(editable_key_press_callback), (athena_location_bar_initialize):
	Put in a new fix that uses a marshal function to avoid clobbering
	the return value of key_press_event.

2000-06-16  Rebecka Schulman  <rebecka@eazel.com>

	* icons/eazel/Search.png:
	Added search icon to toolbar, courtesy of Arlo.
	It still has graphics issues, we will try and iron
	those out
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	Changed the word on the search preferences

2000-06-16  Darin Adler  <darin@eazel.com>

	* components/services/trilobite/sample/lib/.cvsignore:
	New generated files that needed to be ignored.
	
	* libathena-extensions/athena-bookmark.c: (get_icon_for_uri):
	* libathena-extensions/athena-icon-dnd.c:
	(receive_dropped_keyword):
	* src/athena-sidebar.c: (receive_dropped_keyword),
	(open_with_callback):
	* src/athena-window-manage-views.c: (handle_unreadable_location),
	(athena_window_end_location_change_callback):
	* src/athena-window.c: (view_menu_choose_view_callback):
	Added FIXME comments for all cases I might have to revisit to
	finish with bug 866.
	
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.c:
	(athena_search_directory_new),
	(athena_directory_new), (athena_directory_is_local),
	(athena_directory_is_search_directory):
	Removed the is_local and is_search_directory booleans since they
	are very fast to compute.
	(athena_directory_call_when_ready): Removed the special case for
	search directories that was causing a problem with NULL
	directories.  This is better handled inside
	athena-directory-async.c.
	(athena_uri_is_search_uri): Greatly simplified the
	implementation of the function and moved it out of the
	"self-check-specific" part of the file.
	
	* libathena-extensions/athena-file-utilities.c:
	(athena_format_uri_for_display), (athena_make_uri_from_input),
	(athena_get_user_main_directory):
	Renamed SCHEMA -> SCHEME. Converted code to use
	athena_get_uri_from_local_path instead of just adding a file://
	on the beginning of path names.
	
	* libathena-extensions/athena-file.c: (athena_file_get):
	Did part of the work needed to make this function do its work
	async. It now only does the I/O if the file is not already known,
	but there's still the issue of doing the I/O only when requested.
	
	* libathena-extensions/athena-icon-dnd.c:
	(receive_dropped_keyword): Fixed storage leaks.
	(athena_icon_container_receive_dropped_icons),
	(athena_icon_dnd_update_drop_target): Added FIXMEs about
	file-specific stuff that's in here but should be in FMIconView.
	
	* libathena-extensions/athena-icon-factory.c:
	(path_represents_svg_image): Changed local svg check to use
	gnome-vfs instead of AthenaFile.  This is better since we want
	it to be sync.
	(load_specific_image): Change to use
	athena_get_local_path_from_uri instead of doing its own file://
	checks and unescaping.
	
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_component_for_uri_internal): Call the
	new public OAF_ServerInfo_duplicate from liboaf instead of our
	own copy. The one I checked in liboaf has a number of bugs fixed
	from the one that was in here.
	(mime_type_get_supertype): Put in a special case for NULL so we
	don't return "/*" as a supertype for NULL.
	(athena_do_component_query): Call OAF_ServerInfo_duplicate.
	Also get rid of a NULL check before CORBA_free.
	
	* libathena-extensions/athena-stock-dialogs.c:
	(athena_timed_wait_start), (athena_timed_wait_free):
	* libathena-extensions/athena-stock-dialogs.h:
	Added a window title to the still-not-implemented code in here.
	
	* src/file-manager/fm-icon-text-window.c:
	(create_icon_text_window): Changed the window title to match the
	menu item.
	
	* src/athena-main.c: Formatting tweaks.
	
	* src/athena-sidebar.c: (receive_dropped_keyword), Fixed a
	storage leak. Put in a FIXME about the code that is a copy of
	what's in the icon view.
	
2000-06-16  Maciej Stachowiak  <mjs@eazel.com>

	Task 1351: implement controllers to allow location bar and the
	search/browse button

	* src/athena-location-bar.h, src/athena-location-bar.c:
	Factored this into two classes, AthenaNavigationBar, a class
	that defines the abstract interface (the set_location function and
	the location_changed signal), and AthenaLocationBar, a concrete
	implementation that works like the previous location bar.
	(athena_location_bar_set_location,
	athena_location_bar_get_location): Made static. Made
	`athena_location_bar_set_location' the handler for the
	set_location virtual method.
	* src/athena-navigation-bar.h, src/athena-navigation-bar.c:
	Abstract superclass for navigation bars.
	* src/athena-search-bar.h, src/athena-search-bar.c: New
	subclass of AthenaNavigationBar. Contains placeholder widgets
	for now, will eventually be the search bar.
	* src/athena-switchable-navigation-bar.h,
	src/athena-switchable-navigation-bar.c: New subclass of
	AthenaNavigationBar that allows switching between the location
	bar and the search bar.
	* src/athena-window.h: Rename `ent_uri' member of the window
	struct to `navigation_bar'.
	* src/athena-window.c
	(athena_window_navigation_bar_mode_changed_callback): Callback
	to sync the "search" toggle button to the mode of the switchable
	navigation bar.
	(athena_window_constructed): Create a
	AthenaSwitchableNavigationBar instead of a AthenaLocationBar.
	(athena_window_set_search_mode): New function to be used by the
	search toggle button callback; simply sets the mode of the
	switchable navigation bar appropriately.
	* src/athena-window-toolbars.c: Made Search button a toggle
	button.
	(toolbar_search_callback): Call `athena_window_set_search_mode'.
	* src/athena-window-manage-views.c
	(athena_window_update_internals,
	athena_window_end_location_change_callback): Use
	NautlusNavigationBar calls instead of AthenaLocationBar ones.
	* src/Makefile.am: Add new files to the build, and split all
	headers into noinst_HEADERS out from the athena_SOURCES
	variable.

2000-06-16  Seth Nickell  <seth@eazel.com>

	* src/athena-location-bar.h:
	* src/athena-location-bar.c: (athena_location_bar_get_location)
	Added function athena_location_bar_get_location
	* src/athena-location-bar.c: (drag_data_received_callback),
	(drag_data_get_callback), (editable_activated_callback),
	Changed to call athena_location_bar_get_location. An incidental
	effect (well actually intentional) is that athena-location-bar.c
	no longer uses gtk_entry_get_text. Hopefully this function will
	keep people adding code "mid-stream" to the URL bar (eg before
	activation, such as the auto-completion code) from being confused
	by the disparity between URIs and what the user is allowed to
	type.

2000-06-16  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/idl/sample-service.idl:
	* components/services/trilobite/sample/Makefile.am:
	* components/services/trilobite/sample/command-line/.cvsignore:
	* components/services/trilobite/sample/command-line/Makefile.am:
	* components/services/trilobite/sample/idl/.cvsignore:
	* components/services/trilobite/sample/idl/Makefile.am:
	* components/services/trilobite/sample/idl/sample-service.idl:
	* components/services/trilobite/sample/lib/Makefile.am:
	* components/services/trilobite/sample/athena-view/Makefile.am:
	* components/services/trilobite/sample/service/Makefile.am:
	* configure.in:
	Fixing the trilobite sample component to use a more suitable layout.
	This will make the sample much easier to use as a template for new
	service components.

2000-06-16  Seth Nickell  <seth@eazel.com>

	* src/athena-location-bar.c: (try_to_expand_path):
	Don't be fooled by the meager function count!  This bug was/is a
	bitch. Added a gtk_widget_grab_focus call to the end of the
	function because *somewhere* in the above procedure the gtk focus
	is being fscked with. Will track the actual problem down later,
	but this will get it out of our hair so we can test things like
	unescaping code.  Also changed from gtk_entry_get_text to
	gtk_editable_get_chars as the former is deprecated and Truly Evil
	(tm).
	
2000-06-15  John Sullivan  <sullivan@eazel.com>

	Modernized some AthenaBookmark code that had been written
	in the dark ages (by me).

	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_compare_with), (athena_bookmark_copy),
	(athena_bookmark_get_name),
	(athena_bookmark_get_pixmap_and_mask),
	(athena_bookmark_get_pixbuf), (athena_bookmark_get_icon),
	(athena_bookmark_get_uri), (create_pixmap_widget_for_bookmark),
	(athena_bookmark_menu_item_new): Eliminated the use of
	const AthenaBookmark *; made _get_name and _get_uri return
	copies instead of the original text; tweaked a little formatting.

	* components/history/athena-history-view.c: (install_icon),
	(hyperbola_navigation_history_load_location),
	(hyperbola_navigation_history_select_row):
	* libathena-extensions/athena-bookmark.h:
	* src/athena-bookmark-list.c: (append_bookmark_node),
	(athena_bookmark_list_append), (athena_bookmark_list_contains),
	(athena_bookmark_list_delete_items_with_uri),
	(athena_bookmark_list_insert_item):
	* src/athena-bookmark-list.h:
	* src/athena-bookmarks-window.c: (install_bookmark_icon),
	(on_select_row), (repopulate):
	* src/athena-window-manage-views.c:
	(athena_window_reset_title_internal), (handle_go_back),
	(handle_go_forward), (handle_go_elsewhere):
	* src/athena-window-menus.c: (bookmark_holder_new),
	(show_bogus_bookmark_window), (activate_bookmark_in_menu_item),
	(append_bookmark_to_menu),
	(athena_window_add_bookmark_for_current_location):
	* src/athena-window.c: (athena_window_back_or_forward):
	Eliminated the use of const AthenaBookmark *; changed all
	callers of athena_bookmark_get_name and _get_uri to free
	the results.

2000-06-15  John Sullivan  <sullivan@eazel.com>

	Fixed bug 705 (Need to avoid network hit on startup for
	each remote bookmark). Bookmarks now get their icon only
	when they're initially created, and then store a text
	version of it to disk for future sessions. We might have
	to update the icon at certain times later (maybe when it's
	used?).

	* libathena-extensions/athena-bookmark.h,
	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_copy), (athena_bookmark_get_pixbuf),
	(athena_bookmark_get_icon), (get_icon_for_uri),
	(athena_bookmark_new), (athena_bookmark_new_with_icon):
	Changed guts of AthenaBookmark to keep a 
	AthenaScalableIcon around. Also some miscellaneous
	cleanup in this ancient file (need to do more).
	
	* libathena-extensions/athena-icon-factory.h,
	* libathena-extensions/athena-icon-factory.c:
	(get_themed_icon_file_path): Added icon != NULL assert.
	(get_icon_file_path): Handle NULL icon name by returning NULL;
	some style fixes.
	(athena_scalable_icon_get_text_pieces): New function,
	returns all four pieces of text used to define a
	AthenaScalableIcon.
	(athena_scalable_icon_new_from_text_pieces):
	Renamed from athena_scalable_icon_get and made public.
	(athena_icon_factory_get_icon_for_file),
	(athena_icon_factory_get_emblem_icon_by_name),
	(load_image_with_embedded_text): Updated for function renaming.
	
	* src/athena-bookmark-list.c: (append_bookmark_node),
	(make_bookmark_from_node), (athena_bookmark_list_load_file):
	Save & restore AthenaScalableIcon with each bookmark.

	Added custom error message when trying to open a location
	fails with GNOME_VFS_LOGINFAILED

	* src/athena-applicable-views.h: Define 
	ATHENA_NAVIGATION_RESULT_LOGIN_FAILED
	* src/athena-applicable-views.c:
	(get_athena_navigation_result_from_gnome_vfs_result):
	Support GNOME_VFS_LOGINFAILED, and tweak message for
	unhandled case.
	* src/athena-window-manage-views.c:
	(athena_window_end_location_change_callback):
	Support ATHENA_NAVIGATION_RESULT_LOGIN_FAILED and
	remove message for unhandled case since complaining
	about unhandled cases is done elsewhere.

2000-06-15  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-window.c: (athena_window_constructed):
	At Arlo's request, removed the frame containing the sidebar.  This
	will look even better as the new splitter widget gets refined.
	
2000-06-15  Pavel Cisler  <pavel@eazel.com>

	* components/hardware/athena-hardware-view.c:
	* components/html/ntl-web-browser.oafinfo:
	* components/mozilla/athena-mozilla-content-view.oafinfo:
	* components/music/athena-music-view.c:
	* components/music/athena-music-view.oafinfo:
	* components/rpmview/athena-rpm-view.c:
	* components/shell/shell.oafinfo:
	* libathena-extensions/athena-drag.c:
	(athena_drag_build_selection_list):
	* libathena-extensions/athena-drag.h:
	* libathena-extensions/athena-file.c:
	(athena_file_get_type_as_string):
	* src/athena-sidebar.c:
	* src/athena.oafinfo:
	Convert a bunch of illegal mime types "special/*" to 
	legal equivalents.
	
2000-06-15  Robin * Slomkowski <rslomkow@eazel.com>

	* athena.spec.in: added a requirment for ORbit 0.5.1

2000-06-15  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c: (fetch_play_time),
	(play_current_file), (athena_music_view_update_from_uri):
	fixed bug where the track time slider in the music view was not
	working anymore, that Darin introduced when he was cleaning
	stuff up.  Fixed by escaping and unescaping uris properly.
	
2000-06-15  J Shane Culpepper  <pepper@eazel.com>

	* HACKING:
	* components/services/install/command-line/Makefile.am:
	* components/services/install/lib/Makefile.am:
	* components/services/startup/lib/Makefile.am:
	* components/services/trilobite/sample/service/Makefile.am:
	* configure.in:
	* athena-installer/src/Makefile.am:

	Removing the gnet dependancy.  It is no longer used.

2000-06-15  JP Rosevear  <jpr@arcavia.com>

	* test/Makefile.am: Make sure that libleakcheck does not rely
	on the /gnome prefix to build. Make sure libleakcheck is cleaned
	and uninstalled properly.

2000-06-15  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(load_specific_image):
	fixed bug where images that had special characters (like blanks) wouldn't
	display as custom icons, by unescaping the uri before using it as a path
	* libathena-extensions/athena-icon-canvas-item.c:
	(map_pixbuf):
	tweaked positioning of preview icon
	* src/athena-window-toolbars.c:
	fixed a misspelling in a tooltip (heirarchy -> hierarchy)
	* icons/audio.png,
	* icons/emblem-nowrite.png:
	new icons from Susan
	
2000-06-14  Rebecka Schulman  <rebecka@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	* libathena-extensions/athena-global-preferences.h:
	Added search preferences to the preferences dialog
	
	* libathena-extensions/athena-search-async.c:
	(athena_async_medusa_search), (request_search),
	(search_results_received_callback):
	changed the result getting implementation to use 
	g_io_channel_watch, which emits a signal when
	results arrive at the socket

2000-06-14  Maciej Stachowiak  <mjs@eazel.com>

	Task 1057: Terminal-based programs should open into a new terminal window

	* libathena-extensions/athena-program-choosing.h,
	libathena-extensions/athena-program-choosing.c:
	(athena_launch_application): Take a GnomeVFSMimeApplication *
	instead of a command string; add gnome-terminal -x
	(athena_launch_application_from_command): Old version that takes
	a command string renamed. Also, uses `system' instead of `execlp',
	so command-line arguments in the command string work.
	* libathena-extensions/athena-program-chooser.c
	(launch_mime_capplet): Adjusted to conform.
	* src/file-manager/fm-directory-view.c
	(fm_directory_view_launch_application): Likewise.
	* src/athena-sidebar.c: (command_button_callback,
	athena_sidebar_chose_application_callback, add_command_buttons):
	Likewise.
	* test/test-athena-mime-actions.c (print_application): Show the
	requires_terminal field for applications.

2000-06-14  Pavel Cisler  <pavel@eazel.com>

	* test/Makefile.am:
	* test/athena-leak-checker.c: (detect_reentry),
	(athena_leak_record_malloc), (athena_leak_record_realloc),
	(athena_leak_record_free), (allocate_temporary_fallback_memory),
	(__libc_malloc), (__libc_memalign), (__libc_realloc),
	(__libc_free), (malloc), (realloc), (memalign), (calloc), (free),
	(main):
	Fix problems in the reentry detection code that caused malloc/frees
	sometimes getting counted twice.
	Add reentry detection for malloc getting reentered as a result of 
	calling realloc.
	
2000-06-14  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-horizontal-splitter.c:
	(athena_horizontal_splitter_initialize_class),
	(athena_horizontal_splitter_initialize),
	(athena_horizontal_splitter_destroy),
	(athena_horizontal_splitter_draw),
	(athena_horizontal_splitter_new):
	* libathena-extensions/athena-horizontal-splitter.h:
	Damn, forgot to commit these 2 in the last checkin.
	
2000-06-14  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	* components/hardware/Makefile.am:
	* components/help/Makefile.am:
	* components/history/Makefile.am:
	* components/html/Makefile.am:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/music/Makefile.am:
	* components/notes/Makefile.am:
	* components/rpmview/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/startup/athena-view/Makefile.am:
	* components/services/time/athena-view/Makefile.am:
	* components/services/trilobite/sample/athena-view/Makefile.am:
	* components/websearch/Makefile.am:
	* configure.in:
	* cut-n-paste-code/.cvsignore:
	* cut-n-paste-code/Makefile.am:
	* cut-n-paste-code/README:
	* cut-n-paste-code/widgets/.cvsignore:
	* cut-n-paste-code/widgets/Makefile.am:
	* cut-n-paste-code/widgets/e-paned/.cvsignore:
	* cut-n-paste-code/widgets/e-paned/Makefile.am:
	* cut-n-paste-code/widgets/e-paned/e-hpaned.c: (e_hpaned_get_type),
	(e_hpaned_class_init), (e_hpaned_init), (e_hpaned_new),
	(e_hpaned_size_request), (e_hpaned_size_allocate), (e_hpaned_draw),
	(e_hpaned_xor_line), (e_hpaned_button_press),
	(e_hpaned_button_release), (e_hpaned_motion),
	(e_hpaned_handle_shown):
	* cut-n-paste-code/widgets/e-paned/e-hpaned.h:
	* cut-n-paste-code/widgets/e-paned/e-paned.c: (e_paned_get_type),
	(e_paned_class_init), (e_paned_child_type), (e_paned_init),
	(e_paned_set_arg), (e_paned_get_arg), (e_paned_realize),
	(e_paned_map), (e_paned_unmap), (e_paned_unrealize),
	(e_paned_expose), (e_paned_add1), (e_paned_add2), (e_paned_pack1),
	(e_paned_pack2), (e_paned_add), (e_paned_remove), (e_paned_forall),
	(e_paned_get_position), (e_paned_set_position),
	(e_paned_set_handle_size), (e_paned_compute_position),
	(e_paned_handle_shown), (e_paned_quantized_size):
	* cut-n-paste-code/widgets/e-paned/e-paned.h:
	* cut-n-paste-code/widgets/e-paned/e-vpaned.c: (e_vpaned_get_type),
	(e_vpaned_class_init), (e_vpaned_init), (e_vpaned_new),
	(e_vpaned_size_request), (e_vpaned_size_allocate), (e_vpaned_draw),
	(e_vpaned_xor_line), (e_vpaned_button_press),
	(e_vpaned_button_release), (e_vpaned_motion),
	(e_vpaned_handle_shown):
	* cut-n-paste-code/widgets/e-paned/e-vpaned.h:
	* helper-utilities/authenticate/Makefile.am:
	* libathena-extensions/Makefile.am:
	* libathena-extensions/README:
	* libathena/README:
	* src/Makefile.am:
	* test/Makefile.am:
	Added a place to put cut-n-paste code.  Cut-n-pasted the e-paned
	widget from evolution.  Yes, and evil thing to do.  Send me mail
	with alternative solutions.

	Also added README files for libathena and
	libathena-extenstions to clarify thieir public vs internal
	state.

	* src/athena-window.c: (athena_window_constructed),
	(athena_window_real_set_content_view):
	Use the new AthenaHorizontalSplitter widget instead of 
	the gtk one.

2000-06-14  John Sullivan  <sullivan@eazel.com>

	Fixed bug 173 (UI for reverting directory view background 
	to default). Added "Reset Background" to Settings and 
	context menu.

	* libathena-extensions/athena-background.h:
	* libathena-extensions/athena-background.c:
	(athena_background_is_set), (athena_background_reset):
	New functions for checking whether the background has
	been set, and for resetting it to the uncustomized state.
	
	* libathena-extensions/athena-directory-background.c:
	(background_changed_callback), (directory_changed_callback):
	Changed default metadata value from white to NULL.
	
	* src/file-manager/fm-directory-view.h,
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class), (reset_background_callback),
	(fm_directory_view_get_background_widget),
	(fm_directory_view_get_background), (compute_menu_item_info),
	(append_gtk_menu_item_with_view), (append_selection_menu_subtree),
	(fm_directory_view_real_create_background_context_menu_items),
	(create_open_with_gtk_menu),
	(fm_directory_view_real_create_selection_context_menu_items),
	(insert_bonobo_menu_item), (insert_bonobo_menu_subtree),
	(reset_bonobo_trash_delete_menu), (reset_bonobo_open_with_menu),
	(fm_directory_view_real_merge_menus), (update_one_menu_item),
	(fm_directory_view_real_update_menus): Put "Reset Background"
	menu item in Settings menu and context menu; keep its
	sensitivity synched with background state.
	
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_get_background_widget): New function to let
	superclass get at the AthenaBackground.
	(fm_icon_view_initialize_class): Wire up new function.
	(fm_icon_view_initialize), (create_icon_container): Remove
	unused return value for create_icon_container.
	
	* src/file-manager/fm-list-view.c: 
	(fm_list_view_get_background_widget): New function to let
	superclass get at the AthenaBackground.
	(fm_list_view_initialize_class): Wire up new function.
	(create_list): Remove unused return value.

2000-06-14  Robin * Slomkowski <rslomkow@eazel.com>

	* athena.spec.in: Added multiple Requires: because we can't rely on other packages

2000-06-14  Eskil Heyn Olsen  <eskil@eazel.com>

	* athena.spec.in: Added popt > 1.5 as a requirement, since RH61
	installs popt 1.4.
	
2000-06-14  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-list.c:
	(athena_list_drag_data_received): Fixed bug where dropping
	colors into list view crashed by setting details->data_type and
	got_drop_data_type.
	* src/file-manager/fm-icon-view.c: (compute_menu_item_info):
	Changed menu item title from "Customize Icon Text..." to
	"Icon Captions...". Not sure if I like this verbless style yet.

2000-06-14  Robin * Slomkowski <rslomkow@eazel.com>

	* athena.spec.in: added permission so it can run for non-root
	* HACKING: clean up orginization, and added what could be used from Helix

2000-06-14  Pavel Cisler  <pavel@eazel.com>

	* configure.in:
	Fix some configure breakage.

2000-06-14  Fatih Demir	<kabalak@gmx.net>
	
	* configure.in: Reordered the languages.

	  Also added a check for bzip2 > 1.0.0 which has
	   got other bz-routines (but this point does need
	    more work to work.)	

2000-06-14  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* configure.in: Added German (de) to ALL_LINGUAS
	* athena.desktop: Added German translations
	
2000-06-14  Rebecka Schulman  <rebecka@eazel.com>

	* libathena-extensions/athena-search-async.c: (run_search),
	(initialize_socket), (get_key_from_cookie), (parse_results):
	added dummy search to athena-search-async 

2000-06-13  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c:
	(icon_container_preview_callback):
	made it display an icon's file name in the status bar at low zoom levels
	* src/file-manager/fm-directory-view.c,h:
	(fm_directory_view_display_selection_info),
	(display_selection_info_idle_callback):
	exposed display_selection_info routine externally, so the file name
	previewing can restore the selection info
	
2000-06-13  Pavel Cisler  <pavel@eazel.com>

	* test/Makefile.am:
	Couldn't figure out how to build the leakchecker shared library
	with libtool, added a simple link rule instead.
	
	* test/athena-leak-symbol-lookup.c:
	(athena_leak_find_symbol_in_map),
	(athena_leak_symbol_map_get_offsets),
	(athena_leak_symbol_map_load),
	(athena_leak_symbol_map_load_if_needed),
	(athena_leak_find_symbol_address),
	(athena_leak_print_symbol_address):
	Redid symbol lookup to work better in some cases where dladdr
	would not give us the right function.

	* test/athena-leak-checker.c: (allocate_lots), (leak_mem2),
	(leak_mem), (main):
	tweaks to testing code.

2000-06-13  Rebecca Schulman  <rebecka@eazel.com>
	Initial changes to implement search architecture.

	* libathena-extensions/Makefile.am:

	* libathena-extensions/athena-directory-async.c:
	Changed metafile reading to skip this for search directories
	call a separate sync reader for search directories (the
	async handle creates a thread but doesn't talk to medusa
	yet)

	Added
	* libathena-extensions/athena-search-async.c:
	* libathena-extensions/athena-search-async.h:
	location of future async search calls
	
	* libathena-extensions/athena-directory-private.h:
	added is_search_directory boolean field to AthenaDirectoryDetails
	* libathena-extensions/athena-directory.c:
	* libathena-extensions/athena-directory.h:
	athena_search_directory_new supplemnts athena_directory_new
	and test functions athena_diretory_is_search_directory and
	athena_uri_is_search_uri

	* src/athena-window.c:
	* src/athena-window-toolbars.c:
	added search button (icon to come!)
	
	* src/athena.oafinfo:
	added search: to list of acceptable 
	content for list view
	
2000-06-13  Darin Adler  <darin@eazel.com>

	Preparations to make athena_file_get use async. I/O.
	There's still a long way to go.

	* components/music/athena-music-view.c: (fetch_play_time),
	(format_play_time), (fetch_song_info), (play_status_display),
	(play_current_file), (athena_music_view_update_from_uri):
	Changed the music view so it doesn't use AthenaFile any more
	since it already has what it needs from gnome-vfs. There's still
	the issue of sync. vs. async. for this component.
	
	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-stock-dialogs.c:
	(athena_timed_wait_start), (athena_timed_wait_free),
	(athena_timed_wait_stop):
	* libathena-extensions/athena-stock-dialogs.h:
	Started on something called athena_timed_wait that we need to
	use when all our lines are busy. Checked it in since I'll be in
	Palo Alto and don't want any non-checked-in changes.
	
	* libathena-extensions/athena-background-canvas-group.c:
	Added comments and removed some dead code.
	
	* src/athena-window-menus.c: (uri_known_not_to_exist):
	Rewrote this to use sync. I/O on local files instead of using
	athena_file_get.
	
	* test/.cvsignore: Ignore some of the new files in this directory.

2000-06-13  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-mime-actions.c
	(athena_mime_get_short_list_components_for_uri): Completed task
	1267 (component query should pass allowed iids).
	
	(athena_mime_get_default_component_for_uri_internal,
	athena_mime_get_all_components_for_uri,
	make_oaf_query_with_known_mime_type,
	make_oaf_query_with_uri_scheme_only, athena_do_component_query):
	Adjust to necessary interface changes.

2000-06-13  John Sullivan  <sullivan@eazel.com>

	Finished task 1044 (Make "Open With Other" behave sensibly
	when there are no programs available for this file), and
	some related UI tweaking.

	* libathena-extensions/athena-program-chooser.c:
	(launch_mime_capplet), (launch_mime_capplet_and_close_dialog):
	Split old launch_mime_capplet into these two parts, so I
	could call the simpler one from two places.
	(run_program_configurator_callback),
	(athena_program_chooser_new): Moved the "Why not visit the
	Control Center?" box from the sub-dialog into the main dialog.
	Also created both a "Cancel" and "Done" button, only one of
	which is shown at a time.
	(athena_program_chooser_set_is_cancellable): New function,
	determines which of the two buttons "Cancel" and "Done" to
	display.
	(athena_program_chooser_show_no_choices_message):
	New function, puts up a modeless dialog telling user that
	there are no applications/viewers for this file and asking
	if they want to go to the File Types and Programs capplet.

	* libathena-extensions/athena-program-chooser.h:
	Prototype for athena_program_chooser_show_no_choices_message. 

	* libathena-extensions/athena-program-choosing.c:
	(any_programs_available_for_file): New helper function.
	(athena_choose_component_for_file),
	(athena_choose_application_for_file): Reworked a bit to
	call athena_program_chooser_show_no_choices_message
	in the case where there are no choices at all.

2000-06-13  Pavel Cisler <pavel@eazel.com>

	* test/athena-leak-checker-stubs.h:
	* test/athena-leak-checker.c:
	(athena_leak_allocation_record_init),
	(athena_leak_allocation_record_copy),
	(athena_leak_allocation_record_finalize),
	(athena_leak_allocation_record_free),
	(athena_leak_stack_crawl_compare), (athena_leak_initialize),
	(get_stack_trace), (detect_reentry), (athena_leak_record_malloc),
	(athena_leak_record_realloc), (athena_leak_record_free),
	(athena_leak_initialize_if_needed), (__libc_malloc),
	(__libc_memalign), (__libc_calloc), (__libc_realloc),
	(__libc_free), (malloc), (realloc), (memalign), (calloc), (free),
	(print_one_leak), (athena_leak_print_leaks),
	(athena_leak_checker_init), (allocate_lots), (leak_mem2),
	(leak_mem), (main):
	* test/athena-leak-checker.h:
	* test/athena-leak-hash-table.c:
	(athena_leak_hash_element_finalize),
	(athena_leak_hash_element_hash),
	(athena_leak_hash_element_match),
	(athena_leak_hash_element_vector_inititalize),
	(athena_leak_hash_element_vector_finalize),
	(athena_leak_hash_element_vector_at),
	(athena_leak_hash_element_vector_add),
	(athena_leak_hash_element_vector_remove),
	(athena_leak_hash_table_optimal_size),
	(athena_leak_hash_table_initialize),
	(athena_leak_hash_table_finalize),
	(athena_leak_hash_table_new), (athena_leak_hash_table_free),
	(athena_leak_hash_table_hash), (athena_leak_hash_table_find),
	(athena_leak_hash_table_add),
	(athena_leak_hash_table_remove_element),
	(athena_leak_hash_table_remove),
	(athena_leak_table_new_entry_at),
	(athena_leak_table_add_entry), (athena_leak_table_new),
	(athena_leak_table_free), (sort_by_count),
	(athena_leak_table_sort_by_count), (sort_by_size),
	(athena_leak_table_sort_by_size),
	(athena_leak_table_each_item):
	* test/athena-leak-hash-table.h:
	* test/athena-leak-symbol-lookup.c:
	(athena_leak_find_symbol_in_map),
	(athena_leak_symbol_map_load),
	(athena_leak_symbol_map_load_if_needed),
	(athena_leak_print_symbol_cleanup),
	(athena_leak_find_symbol_address),
	(athena_leak_print_symbol_address):
	* test/athena-leak-symbol-lookup.h:
	New small leakchecking library. It is a bit simpler than MemProf in that
	it doesn't try to find leaks, just lists all the outstanding allocations
	(which if done at application quit is a list of leaks). It borrows heavily
	from MemProf.

	* test/Makefile.am:
	Currently broken makefile changes for the leakchecker library. Needs some
	libtool wrestling that Ramiro kindly offered to help with.
	
	* src/athena-main.c: (athena_leak_checker_init),
	(athena_leak_print_leaks), (main):
	Call the leakchecker. Noop unless the leakchecker lib is loaded with
	Athena using the LD_PRELOAD variable (the only way of turning the 
	thing on/off).

2000-06-14  Anders Carlsson  <andersca@gnu.org>

	* libathena-extensions/athena-background-canvas-group.c
	(athena_background_canvas_group_draw): Add a check to see if the
	AthenaBackground is too complex which means we have do draw if
	ourselves. Otherwise, we can have a light touch and let the canvas
	handle it without our "help".
	
	* libathena-extensions/athena-background.c,
	  libathena-extensions/athena-background.h
	(athena_background_is_too_complex_for_gtk_style): New function. 
	Checks if a AthenaBackground is too complex to be drawn by
	GtkStyle, forcing us to draw it ourselves.

2000-06-13  Seth Nickell  <seth@eazel.com>

	* libathena-extensions/athena-file-utilities.c:
	(athena_format_uri_for_display):
	Fix stupid bug that clipped the inital '/' in many cases
	caused by a #define.
	* src/athena-location-bar.c: (drag_data_received_callback),
	(drag_data_get_callback)
	Add calls to athena_make_uri_from_input rather than reading
	the input "raw" out of the location box.
	(try_to_expand_path):
	Add calls to athena_make_uri_from_input and make sure that
	selection allignments etc are appropriate between actual uri
	being completed and the user's display.

2000-06-13  John Sullivan  <sullivan@eazel.com>

	Fixed bug mjs noticed where the Properties window tended
	to crash on close.

	* src/file-manager/fm-properties-window.c:
	(name_field_done_editing): use gtk_editable_get_chars
	instead of gtk_entry_get_text, since _get_text returns
	the original text and is deprecated. This was being freed
	twice.
	(name_field_update_to_match_file): Made this function use
	the safe call too, which required adding a local variable.

	Fixed bug 1212 ("View as" menu doesn't update after user
	modifies preferred list from "View as Other" dialog)
	
	* src/athena-applicable-views.h: Eliminated 
	content_identifiers from AthenaNavigationInfo.
	* src/athena-applicable-views.c: (got_file_info_callback):
	Don't bother getting short list here since it's no longer
	stored; just get default component.
	(athena_navigation_info_free): Take out cleanup for
	content_identifiers.
	* src/athena-window.c: 
	(create_content_view_menu_item): Made this function take
	ownership of a parameter instead of copying it, so that
	one of the two callers wouldn't have to make extra copies.
	Commented this.
	(replace_special_current_view_in_content_view_menu):
	This was caller #1, now it passes copy as parameter.
	(athena_window_load_content_view_menu): This was caller
	#2. Now it gets preferred list for uri here, instead of
	examining AthenaNavigationInfo parameter. Eliminated
	that parameter.
	(chose_component_callback): Reload the content view menu
	after the View as Other dialog closes.
	* src/athena-window-private.h,
	* src/athena-window-manage-views.c: Eliminated 2nd parameter
	from athena_window_load_content_view.

2000-06-13  Maciej Stachowiak  <mjs@eazel.com>

	* components/help/help-method.c: (help_uri_to_string,
	convert_file_to_uri, transform_absolute_file, file_in_info_path):
	Complete task 695 (Help component is missing a test for info
	pages), also many general style fixes.
	
	* libathena-extensions/athena-mime-actions.c
	(athena_mime_get_default_component_for_uri_internal): Complete
	task 1145 (Add fallback code to choose one of short list
	components)
	
2000-06-13  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug #306, right click menu in zoom control doesn't work.
	The menu now works.
	
	* libathena/athena-view-component.idl:
	Added zoom_to_level interface.
	
	* libathena/athena-zoomable.c:
	(impl_Athena_Zoomable_zoom_to_level):
	(athena_zoomable_initialize_class):
	Implimentation of zoom_to_level interface
	
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	(fm_directory_view_initialize_class),
	(fm_directory_view_initialize), (zoomable_zoom_to_level_callback),
	(fm_directory_view_zoom_to_level):
	Added signal handling and callback for new ZOOM_TO_LEVEL signal.
	
	* src/file-manager/fm-icon-view.c: 
	(fm_icon_view_zoom_to_level),
	(fm_icon_view_initialize_class):
	ZOOM_TO_LEVEL handling.
	
	* src/file-manager/fm-list-view.c: (fm_list_view_initialize_class),
	(fm_list_view_zoom_to_level),
	(fm_list_view_restore_default_zoom_level):
	ZOOM_TO_LEVEL handling.
	
	* src/athena-view-frame.c: 
	* src/athena-view-frame.h:
	(athena_view_frame_zoom_to_level):
	New public function for zoom to level.
	
	* src/athena-window.c: 
	(zoom_to_level_callback):
	Yes, a zoom to level callback.
	
	* src/athena-zoom-control.c:
	* src/athena-zoom-control.h:
	(athena_zoom_control_class_initialize), (zoom_menu_callback),
	(create_zoom_menu), (set_zoom_level):
	Enabled context zoom menu functionality.
	
2000-06-13  John Sullivan  <sullivan@eazel.com>

	Finished task 994 (add button connecting "View as Other"
	dialog with mime-type-configuring capplet.

	* libathena-extensions/athena-program-chooser.c:
	(launch_mime_capplet), (run_program_configurator_callback):
	Added a button to go to the "File Types and Programs"
	capplet from within the "View as Other" dialog (actually
	from its sub-dialog).

2000-06-13  Darin Adler  <darin@eazel.com>

	Some build fixes.

	* acconfig.h:
	* configure.in:
	Removed the ATHENA_PREFIX that I added. I did it wrong.
	
	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file-utilities.c:
	(athena_pixmap_file):
	* components/hardware/athena-hardware-view.c:
	(setup_overview_form):
	* components/services/startup/athena-view/athena-service-startup-view.c:
	(setup_form_title), (setup_signup_form), (setup_config_form):
	* libathena-extensions/athena-icon-canvas-item.c: (map_pixbuf):
	* libathena-extensions/athena-icon-factory.c:
	(make_full_icon_path):
	* src/athena-application.c: (display_caveat):
	* src/athena-property-browser.c:
	(athena_property_browser_initialize),
	(athena_emblem_dialog_new), (make_category_link):
	* src/athena-zoom-control.c: (athena_zoom_control_initialize):
	Replaced most uses of gnome_pixmap_file on "athena/"
	with a call to a new athena_pixmap_file in an attempt to
	make installations where athena has a different prefix
	from gnome-libs work. I now think this is a waste of time,
	but Mathieu Lacage says this is still an improvement.
	
	* components/help/Makefile.am:
	* components/help/hyperbola-filefmt.c: (fmt_map_entry):
	Use HYPERBOLA_DATADIR instead of ATHENA_PREFIX.
	
	* components/websearch/ntl-web-search.c:
	(web_search_populate_engines):
	Use WEB_SEARCH_DATADIR instead of ATHENA_PREFIX.
	
	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize),
	(mozilla_content_view_set_busy_cursor),
	(mozilla_content_view_request_progress_change),
	(mozilla_content_view_clear_busy_cursor),
	(mozilla_load_location_callback), (bonobo_mozilla_callback),
	(mozilla_merge_bonobo_items_callback),
	(mozilla_title_changed_callback),
	(mozilla_location_changed_callback), (mozilla_net_status_callback),
	(mozilla_link_message_callback), (mozilla_progress_callback),
	(mozilla_open_uri_callback):
	Took a cut at fixing the Mozilla component for the new API.
	Ramiro will have to take care of the rest.
	
	* components/services/install/lib/Makefile.am:
	* components/services/time/command-line/Makefile.am:
	* components/services/time/athena-view/Makefile.am:
	* components/services/time/service/Makefile.am:
	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/sample/command-line/Makefile.am:
	* components/services/trilobite/sample/service/Makefile.am:
	* libathena/Makefile.am:
	Updated all ORBit IDL compiles to use IDL_CFLAGS as suggested
	in the form of a patch by Martijn van Beers.
	
	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_main_directory),
	(athena_get_pixmap_directory):
	* libathena-extensions/athena-link-set.c:
	(get_link_set_document):
	* src/Makefile.am:
	* src/athena-property-browser.c:
	(athena_property_browser_drag_data_get), (make_drag_image),
	(get_xml_path), (make_properties_from_directory):
	* src/athena-link-set-window.c: (get_link_set_names):
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-properties-window.c: (get_property_names):
	Used ATHENA_DATADIR and DATADIR instead of ATHENA_PREFIX.
	
	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_uri_from_local_path): Added a new helper function for
	use when you have a path and need a URI. This does a better job
	than just adding a "file://" on the front.
	
	* libathena-extensions/athena-gtk-extensions.h:
	* libathena-extensions/athena-gtk-extensions.c:
	(get_first_callback), (athena_gtk_container_get_first_child):
	* src/athena-window-toolbars.c: (setup_button):
	* src/athena-window.c:
	(replace_special_current_view_in_content_view_menu):
	Implemented the first_child function and used it where appropriate.
	
	* libathena-extensions/athena-preferences-item.c:
	(add_icon_themes): Use athena_get_pixmap_directory intead of
	misusing gnome_pixmap_file by calling it on a directory name.
	
	* athena-installer/src/support.c: (create_pixmap),
	(create_image): Added FIXMEs since it isn't clear if this code
	will work with a Athena prefix that's not the same as the
	gnome-libs prefix.
	
	* Makefile.am: Tweaked white space.
	
2000-06-13  Seth Nickell  <seth@eazel.com>

	* libathena-extensions/athena-directory.c:
	(athena_directory_get):
	Minor assertion changes.
	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file-utilities.c:
	(athena_format_uri_for_display), (athena_make_uri_from_input):
	Created two functions for preparing data to display to the user
	(unescape, filter file://, probably more stuff later), and
	dealing with URIs inputed by the user (currently tacks on a
	file:// if the "uri" starts with a /)
	* src/athena-location-bar.c: (editable_activated_callback),
	(athena_location_bar_set_location):
	Changed to use athena_format_uri_for_display and
	athena_make_uri_from_input.

2000-06-13  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug #305.  Clicking in center of zoom control
	does not change zoom level.

	Clicking in the center of the zoom control emits a ZOOM_DEFAULT
	signal.  It is up to each view that connects to this signal
	to determine what is the default zoom setting.  Right now, all
	views are using ATHENA_ZOOM_LEVEL_STANDARD.  This could be
	changed to a zoom level better suited for the view.
	
	* libathena/athena-view-component.idl:
	Added zoom_default interface.
	
	* libathena/athena-zoomable.c:
	* libathena/athena-zoomable.h:
	(impl_Athena_Zoomable_zoom_default)
	Implimetation function of zoom_default interface
	
	(athena_zoomable_initialize_class):
	Set up new ZOOM_DEFAULT signal.
	
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	(fm_directory_view_initialize_class),
	(fm_directory_view_initialize), (zoom_out_callback),
	(zoom_default_callback), (zoomable_zoom_default_callback),
	(fm_directory_view_restore_default_zoom_level):
	New functions to enable zoom to default.
	
	* src/file-manager/fm-icon-view.c:	
	(fm_icon_view_initialize_class):
	Override zoom_default method.
	
	(fm_icon_view_restore_default_zoom_level),
	New function to enable zoom to default.
	
	* src/file-manager/fm-list-view.c: 
	(fm_list_view_initialize_class):
	Override zoom_default method.
	
	(fm_list_view_restore_default_zoom_level):
	New function to enable zoom to default.
	
	* src/file-manager/fm-properties-window.c: 
	(create_basic_page):

	* src/athena-view-frame.c: 
	* src/athena-view-frame.h:
	(athena_view_frame_zoom_default):
	New signal handling callback

	* src/athena-window.c: 
	(zoom_default_callback):
	New signal handling callback
	
	* src/athena-zoom-control.c:
	* src/athena-zoom-control.h:
	(athena_zoom_control_class_initialize),
	(athena_zoom_control_button_press_event):

	Work in progress on bug #971
	* src/file-manager/fm-directory-view.c:
	(open_one_properties_window),

	* libathena-extensions/athena-undo-signal-handlers.c:
	(athena_entry_user_changed_callback),
	(editable_register_edit_undo),
	(restore_editable_from_undo_snapshot_callback):

2000-06-13  Darin Adler  <darin@eazel.com>

	Renamed and changed around parameters for the basic operations on
	views to simplify and clarify Athena. Later we will be able to
	clean up the state machine.

	Some "theoretical" stuff may be lost in this process, but we can
	easily re-add what we really need. The old stuff had many
	unimplemented placeholders and half-baked ideas.

	* libathena/athena-view-component.idl:
	* libathena/athena-view.h:
	* libathena/athena-view.c:
	* libathena/athena-zoomable.c:
	(athena_zoomable_ensure_zoomable_frame),
	(athena_zoomable_set_zoom_level):
	* src/athena-applicable-views.c: (got_file_info_callback),
	(got_metadata_callback), (athena_navigation_info_new),
	(athena_navigation_info_free):
	* src/athena-applicable-views.h:
	* src/athena-view-frame-bonobo-control.c:
	(athena_view_frame_activate_uri),
	(bonobo_control_try_load_client), (bonobo_control_load_location):
	* src/athena-view-frame-bonobo-embeddable.c:
	(bonobo_subdoc_notify_location_change),
	(bonobo_subdoc_try_load_client):
	* src/athena-view-frame-corba.c:
	(impl_Athena_ViewFrame__destroy),
	(impl_Athena_ViewFrame__create),
	(impl_Athena_ViewFrame_open_location),
	(impl_Athena_ViewFrame_open_location_in_new_window),
	(impl_Athena_ViewFrame_report_location_change),
	(impl_Athena_ViewFrame_report_selection_change),
	(impl_Athena_ViewFrame_report_status),
	(impl_Athena_ViewFrame_report_load_underway),
	(impl_Athena_ViewFrame_report_load_progress),
	(impl_Athena_ViewFrame_report_load_complete),
	(impl_Athena_ViewFrame_report_load_failed),
	(impl_Athena_ViewFrame_set_title):
	* src/athena-view-frame-athena-view.c:
	(athena_view_try_load_client), (load_location), (stop_loading),
	(selection_changed):
	* src/athena-view-frame-private.h:
	* src/athena-view-frame.c:
	(athena_view_frame_initialize_class),
	(athena_view_frame_destroy_client),
	(athena_view_frame_handle_client_destroy_2),
	(athena_view_frame_new), (athena_view_frame_load_client),
	(athena_view_frame_load_location),
	(athena_view_frame_stop_loading),
	(athena_view_frame_selection_changed),
	(athena_view_frame_is_zoomable),
	(athena_view_frame_open_location),
	(athena_view_frame_open_location_in_new_window),
	(athena_view_frame_report_location_change),
	(athena_view_frame_report_selection_change),
	(athena_view_frame_report_status),
	(athena_view_frame_report_load_underway),
	(athena_view_frame_report_load_progress),
	(athena_view_frame_report_load_complete),
	(athena_view_frame_report_load_failed),
	(athena_view_frame_set_title),
	(athena_view_frame_zoom_level_changed):
	* src/athena-view-frame.h:
	* src/athena-zoomable-frame-corba.c:
	(impl_Athena_ZoomableFrame__destroy),
	(impl_Athena_ZoomableFrame__create),
	(impl_Athena_ZoomableFrame_zoom_level_changed):
	Changed the API and added a ton of comments.
	
	* components/hardware/athena-hardware-view.c:
	(athena_hardware_view_initialize),
	(hardware_view_load_location_callback):
	* components/help/hyperbola-nav-index.c:
	(hyperbola_navigation_index_select_row):
	* components/help/hyperbola-nav-search.c:
	(hyperbola_navigation_search_select_row):
	* components/help/hyperbola-nav-tree.c:
	(hyperbola_navigation_tree_new),
	(hyperbola_navigation_tree_load_location),
	(hyperbola_navigation_tree_select_row):
	* components/history/athena-history-view.c:
	(hyperbola_navigation_history_load_location),
	(hyperbola_navigation_history_select_row), (make_obj):
	* components/html/ntl-web-browser.c: (browser_url_load_done),
	(browser_vfs_callback), (browser_goto_url_real),
	(browser_goto_url), (browser_select_url), (browser_title_changed),
	(browser_notify_location_change):
	* components/loser/content/athena-content-loser.c:
	(athena_content_loser_initialize),
	(loser_load_location_callback):
	* components/loser/sidebar/athena-sidebar-loser.c:
	(athena_sidebar_loser_initialize),
	(loser_load_location_callback):
	* components/music/athena-music-view.c:
	(athena_music_view_initialize),
	(music_view_load_location_callback):
	* components/notes/athena-notes.c: (notes_load_location),
	(make_notes_view):
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_initialize), (go_to_button_callback),
	(rpm_view_load_location_callback):
	* components/sample/athena-sample-content-view.c:
	(athena_sample_content_view_initialize),
	(sample_load_location_callback):
	* components/services/startup/athena-view/athena-service-startup-view.c:
	(go_to_uri), (athena_service_startup_view_initialize),
	(service_load_location_callback):
	* components/services/time/athena-view/trilobite-eazel-time-view.c:
	(trilobite_eazel_time_view_initialize), (load_location_callback):
	* components/websearch/ntl-web-search.c: (do_search), (make_obj):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_switch_location),
	(fm_directory_view_initialize), (display_selection_info),
	(fm_directory_view_send_selection_change),
	(load_location_callback), (selection_changed_callback),
	(stop_loading_callback), (done_loading), (finish_loading_uri):
	Switch components to use the new API.
	
	* libathena-extensions/athena-gtk-extensions.h:
	Added a placeholder for a new operation to get the first child of a
	container. This will be way more efficient than all the code that
	gets a list of all the children and then looks at the first one.
	
	* src/athena-application.c: (manufactures), (create_object),
	(create_factory), (athena_application_initialize_class),
	(athena_application_initialize), (athena_application_new),
	(athena_application_destroy),
	(athena_application_check_user_directories),
	(athena_application_startup),
	(athena_application_destroy_window), (athena_application_quit),
	(athena_application_create_window):
	* src/athena-application.h:
	* src/athena-desktop-window.c: (athena_desktop_window_new):
	* src/athena-desktop-window.h:
	* src/athena-main.c: (main):
	Renamed AthenaApp -> AthenaApplication while changing it around.
	
	* libathena-extensions/athena-undo-manager.h:
	Add a blank line.
	
	* src/athena-window-manage-views.h:
	* src/athena-window-manage-views.c: (compare_strings),
	(athena_window_report_selection_change): Changed code so that it
	won't report the same selection change twice.
	(athena_window_report_status),
	(athena_window_report_load_underway),
	(athena_window_report_load_progress),
	(athena_window_report_load_complete),
	(athena_window_report_load_failed), (compute_default_title),
	(athena_window_set_title), (handle_go_back), (handle_go_forward),
	(handle_go_elsewhere), (update_up_button),
	(athena_window_update_internals), (athena_window_update_view),
	(athena_window_view_destroyed),
	(athena_window_has_really_changed),
	(athena_window_load_sidebar_panel), (open_location),
	(athena_window_open_location),
	(athena_window_open_location_in_new_window),
	(athena_window_report_location_change),
	(athena_window_load_content_view),
	(athena_window_update_state),
	(athena_window_end_location_change_callback),
	(athena_window_begin_location_change): Updated everything for the
	new API.
	
	* src/athena-window-menus.c: (file_menu_new_window_callback),
	(edit_menu_undo_callback), (edit_menu_cut_callback),
	(edit_menu_copy_callback), (edit_menu_paste_callback),
	(edit_menu_clear_callback), (append_bookmark_to_menu),
	(clear_appended_bookmark_items),
	(athena_window_add_bookmark_for_current_location),
	(append_separator), (new_top_level_menu),
	(athena_window_initialize_menus), (update_user_level_menu_items):
	* src/athena-window-private.h:
	* src/athena-window-toolbars.c: (setup_button),
	(athena_window_initialize_toolbars),
	(athena_window_toolbar_remove_theme_callback):
	* src/athena-window.c: (athena_window_class_init),
	(athena_window_goto_uri), (athena_window_constructed),
	(athena_window_set_arg), (athena_window_get_arg),
	(athena_window_destroy), (athena_window_switch_views),
	(view_menu_choose_view_callback),
	(athena_window_load_content_view_menu),
	(athena_window_back_or_forward), (athena_window_go_up),
	(athena_window_allow_back), (athena_window_allow_forward),
	(athena_window_allow_up),
	(athena_window_open_location_callback),
	(athena_window_open_location_in_new_window_callback),
	(athena_window_report_location_change_callback),
	(athena_window_report_selection_change_callback),
	(athena_window_report_status_callback),
	(athena_window_report_load_underway_callback),
	(athena_window_report_load_progress_callback),
	(athena_window_report_load_complete_callback),
	(athena_window_report_load_failed_callback),
	(athena_window_set_title_callback),
	(athena_window_connect_view),
	(athena_window_connect_content_view), (athena_window_reload),
	(window_update_sidebar_panels_from_preferences):
	* src/athena-window.h:
	Other changes related to the API switchover.
	
	* src/athena.oafinfo: Changed the ntl-xx iids to use the work
	athena instead.

2000-06-13  Maciej Stachowiak  <mjs@eazel.com>

	* components/loser/content/athena-content-loser.oafinfo,
	components/sample/athena-sample-content-view.oafinfo: Fix so
	these can be put in the short list for a type.

	* libathena-extensions/athena-mime-actions.c
	(athena_mime_get_short_list_components_for_uri): Fixed wording
	of a FIXME.

	* src/file-manager/fm-directory-view.c
	(notify_selection_change_callback, display_pending_files,
	start_renaming_item): Fix bugzilla bug #658 (fix memory management
	in display_pending_files) and some related memory leaks.

2000-06-12  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-property-browser.c:
	(athena_property_browser_drag_data_get):
	fixed a crash I noticed while demoing today where dropping image backgrounds
	would segfault or hang.  Fixed by removing code that was freeing an
	otherwise unused variable.
	
2000-06-12  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install.c:
	(set_parameters_from_command_line), (main):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_new_with_config),
	(eazel_install_fetch_remote_package_list),
	(eazel_install_install_packages):
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (filename_from_url),
	(eazel_install_fetch_package), (get_url_for_package),
	(get_search_url_for_package):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_all_packages), (do_rpm_install),
	(eazel_install_fetch_rpm_dependencies),
	(eazel_install_ensure_deps):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new), (packagedata_new_from_rpm_conflict),
	(packagedata_new_from_rpm_conflict_reversed),
	(packagedata_new_from_rpm_header), (packagedata_destroy_foreach),
	(packagedata_destroy), (rpmfilename_from_packagedata),
	(packagedata_hash):
	* components/services/install/lib/eazel-install-types.h:
	Did most of the work for bug 1300 & 1090. It now uses an
	rpmsearch.cgi script on a server to query for packages as
	dependency fails occur.
	
	* components/services/install/lib/eazel-install-metadata.c:
	(create_default_metadata):
	Fixed bug 1310.

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(generate_xml_package_list):
	Fixed bug 1284.
	
	* athena-installer/src/callbacks.c: (set_images),
	(set_white_stuff):
	* athena-installer/src/callbacks.h:
	* athena-installer/src/installer.c: (create_package),
	(create_categories), (installer):
	* athena-installer/src/interface.c: (create_window):
	Update to the new apt-get alike stuff in libinstall. Also make
	things white to please Arlo.
	
	* components/services/install/lib/Makefile.am:
	* components/services/time/command-line/Makefile.am:
	* components/services/time/athena-view/Makefile.am:
	* components/services/time/service/Makefile.am:
	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/sample/command-line/Makefile.am:
	* components/services/trilobite/sample/service/Makefile.am:
	* libathena-extensions/Makefile.am:
	* athena-installer/src/Makefile:
	* athena.spec.in:
	* po/POTFILES.in:
	More patchine to make the rpm building succeed. Basically a
	removed files that where no longer in existence (POTFILES), and
	adding missing .h files to Makefile.am's.

2000-06-12  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-link-set-window.c,h:
	(athena_link_set_configure_window), (delete_window_callback),
	(athena_link_set_toggle_configure_window):
	clean-up for the link set configuration window.  Added some
	descriptive text, tweaked it's size, and made its visibility optionally toggle.
	* src/athena-sidebar.c: (metadata_button_callback):
	checked the call invoking the link_set_window to toggle it's visiblity

2000-06-12  John Sullivan  <sullivan@eazel.com>

	Finished task 1006 (Should be able to set default
	viewer/application from "View/Open with Other" dialog)

	* libathena-extensions/athena-mime-actions.h,
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_is_default_application_for_uri_user_chosen):
	New public function, analogous to the component version
	that already existed.
	(athena_mime_get_default_application_for_uri_internal):
	New private function used to implement the public function.
	(athena_mime_get_default_application_for_uri):
	Now calls the _internal version.
	(athena_mime_is_default_component_for_uri_user_chosen):
	Fixed a leak I noticed in here.
	(athena_mime_set_default_application_for_uri),
	(athena_mime_set_default_component_for_uri): Set the default
	action type if it's unspecified.
	
	* libathena-extensions/athena-program-chooser.c:
	(is_application_default_for_type), (is_component_default_for_type),
	(is_application_default_for_uri), (is_component_default_for_uri),
	(is_default_for_file_type), (is_default_for_file),
	(remove_default_for_type), (remove_default_for_item), 
	(set_default_for_type),	(set_default_for_item): New helper
	functions to check and set default program.	
	(update_selected_item_details), 
	(run_program_configurator_callback): Modify UI for
	"View as" dialog and "Modify <program>" subdialog to include
	setting default program for type or file. Various other
	tweaks.
	
	* src/athena-applicable-views.c: 
	(got_file_info_callback): Eliminated the logic about preferring
	the viewer from the previous location over the default viewer.
	Now that the UI lets users easily specify the default viewer
	per type and file, preferring the previous viewer over the
	user-specified default made no sense.
	(check_iid), (set_initial_content_id): Removed these functions.

2000-06-12  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-link-set.c,h:
	(athena_link_set_remove):
	removed the link_set_configure_window routine from here
	* src/Makefile.am:
	* src/athena-link-set-window.c,h: (link_set_check_box_toggled),
	(make_link_set_check_box), (get_link_set_names),
	(athena_link_set_configure_window):
	added a new file  to hold the athena-link-set-configure-window,
	and made it call reload after installing or removing a link set
	* src/athena-sidebar.c:
	updated since the location of the configure window changed
	* src/athena-window.c,h: (athena_window_reload):
	added athena_window_reload to allow external routines to
	request a reload
	* src/athena-window-toolbars.c: (toolbar_reload_callback):
	made it use athena_window_reload

2000-06-12  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-undo-signal-handlers.c:
	* libathena-extensions/athena-undo-signal-handlers.h:
	(athena_entry_user_changed_callback),
	(athena_undo_setup_athena_entry_for_undo),
	(athena_undo_teardown_athena_entry_for_undo),
	(free_editable_undo_data), (free_editable_object_data),
	(editable_insert_text_callback), (editable_delete_text_callback),
	(editable_register_edit_undo),
	(athena_undo_setup_editable_for_undo),
	(athena_undo_teardown_editable_for_undo),
	(restore_editable_from_undo_snapshot_callback),
	(editable_key_press_event), (athena_undo_editable_set_undo_key):
	New file and functions to handle undo in AthenaEntry and
	GtkEditables.  This file is intended to contain signal handlers
	that enable undo for a variety of GTK widgets. Calling a 
	setup_for_undo function will prepare the widget to handle
	undo functionality.

	* libathena-extensions/Makefile.am:
	Added entries for new files athena-undo-signal-handlers.c
	and athena-undo-signal-handlers.h
	
	* components/notes/athena-notes.c: (make_notes_view):
	Fixed bug #973.  Add undo to notes component.
	
	* components/websearch/ntl-web-search.c: (make_obj):
	Changed to use new undo signal handlers.
	
	* libathena-extensions/athena-entry.c:
	(athena_entry_initialize), (athena_entry_key_press),
	(athena_entry_set_text), (athena_entry_delete_text):
	Removed old undo code that had been rendered obsolete by the
	new signal handlers mentioned above.
	
	* src/athena-bookmarks-window.c: (create_bookmarks_window):
	Changed to use new undo signal handlers.

2000-06-12  John Sullivan  <sullivan@eazel.com>

	Fixed bug 692 (Bookmarks for deleted files don't do
	sensible things)

	* libathena-extensions/athena-gnome-extensions.h,
	* libathena-extensions/athena-gnome-extensions.c:
	(athena_info_dialog),
	(athena_info_dialog_parented): New functions for showing
	a one-button informational dialog.
	(athena_yes_no_dialog),
	(athena_yes_no_dialog_parented): New functions for
	showing a two-button question dialog.
	(show_yes_no_box): Helper function used to implement
	yes_no_dialog routines.
	
	* src/athena-bookmark-list.h,
	* src/athena-bookmark-list.c:
	(athena_bookmark_list_delete_items_with_uri):
	New function for deleting all bookmarks with a given uri.
	
	* src/athena-window-menus.c: 
	(bookmark_holder_new), (bookmark_holder_free): New helper
	functions for dealing with BookmarkHolder structs.
	(remove_bookmarks_for_uri),
	(show_bogus_bookmark_window), 
	(uri_known_not_to_exist): New helper functions for dealing
	with bookmarks for missing (local) files. In the Go menu
	case, the user is just told that the location doesn't exist;
	in the Bookmarks menu case, the user has the option of
	removing bookmarks with this URI from their list.
	(activate_bookmark_in_menu_item): Added a parameter to
	distinguish Go menu case from Bookmarks menu case.
	(append_bookmark_to_menu): Added this parameter here also,
	where it's stored in a BookmarkHolder; deploy 
	bookmark_holder_new and	_free.
	(refresh_bookmarks_in_bookmarks_menu),
	(refresh_bookmarks_in_go_menu): Pass the new parameter to
	append_bookmark_to_menu.

2000-06-11  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-link-set.c,h: (link_set_path_name),
	(create_new_link), (athena_link_set_install),
	(athena_link_set_is_installed), (athena_link_set_remove),
	(link_set_check_box_toggled), (make_link_set_check_box),
	(athena_link_set_configure_window):
	made link set install and remove really work, and added a link set configuration
	window to install and remove link sets.  This is working now but not quite finished.
	* libathena-extensions/athena-metadata.h:
	added ATHENA_METADATA_SIDEBAR_BUTTONS
	* src/athena-sidebar.c: (metadata_button_callback),
	(add_buttons_from_metadata), (athena_sidebar_update_buttons):
	added mechanism for command buttons to be specified by directory metadata.
	* data/top/Makefile.am:
	* data/top/.athena-metafile.xml:
	added pre-built metafile to novice home directory, so it could specify command buttons
	and have better control over defaults

2000-06-10  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(load_specific_image_svg):
	use the correct scale factor for vector icons, the same as image icons, instead
	of expecting them to be twice the size of regular icons.
	* icons/vector/i-directory-accept.svg:
	* icons/vector/i-directory.svg:
	* icons/vector/i-regular.svg:
	new versions of the icons in the vector theme, scaled to their proper size	
	* libathena-extensions/athena-link-set.c,h:
	(make_link_set_check_box), (get_link_set_names),
	(athena_link_set_configure_window):
	added code for configuring link sets.  Still not finished yet.
	* src/athena-sidebar.c: (athena_sidebar_initialize):
	allowed sidebar to be reduced to a very narrow width, to start experimenting
	with how to give it a minimal mode.
	
2000-06-10  J Shane Culpepper  <pepper@eazel.com>

	* configure.in: Fixed the test for ghttp to jive with changes made to
	gnome-http.  Miguel asked that we not use gttp-config but instead use
	gnome-config + ghttpConf.sh.  Requires an updated build of gnome-http
	now.

2000-06-10  J Shane Culpepper  <pepper@eazel.com>

	* athena-installer/.cvsignore:
	* athena-installer/src/.cvsignore:
	* athena-installer/src/link.sh:

	Minor link fix to get athena-installer compiling. Added .cvsignore.

2000-06-10  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	* components/services/trilobite/libtrilobite/helixcode-utils.h:
	Removed duplicated distribution functions.
	* helper-utilities/authenticate/Makefile.am:
	Fixed the NULL declaration (removed space)

2000-06-10  J Shane Culpepper  <pepper@eazel.com>

	Reviving helixcode-utils.c and helixcode-utils.h so that I can fix the
	build breakage.

2000-06-10  Andy Hertzfeld  <andy@eazel.com>

	* data/top/Computer.link:
	* data/top/Services.link:
	removed the suffix from the custom image reference
	* libathena-extensions/athena-icon-factory.c:
	(get_themed_icon_file_path), (get_icon_file_path),
	(load_specific_image):
	fixed a bug I introduced earlier today where custom icons wouldn't scale properly,
	by using a different test to identify vector images
	
2000-06-09  Eskil Heyn Olsen  <eskil@eazel.com>
	
	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	* components/services/trilobite/libtrilobite/helixcode-utils.h:
	* components/services/trilobite/libtrilobite/trilobite-core-distribution.c:
	(determine_turbolinux_version),
	(determine_mandrake_version), (determine_suse_version),
	(determine_debian_version), (determine_redhat_version),
	(trilobite_get_distribution), (trilobite_get_distribution_name):
	* components/services/trilobite/libtrilobite/trilobite-core-distribution.h:
	As bug 908 said, the helixcode installers way of indentifying
	distro sucked (Red Hat 6.099999 ?!), so I revamped it and moved
	the code into trilobite-core-distribution. Only wrote the redhat
	version check, not the other ones (see bug 908). Instead of only
	using a enum for the distro, it's now a struct, containing an enum
	identifying the distroname and two ints for the version.
	
	* components/services/install/command-line/eazel-alt-install.c:
	(create_package):
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (eazel_install_fetch_package),
	(add_to_url), (get_url_for_package), (get_search_url_for_package):	
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(download_all_packages), (install_all_packages):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package):
	
	Updated to use the new get_distribution call. Also worked on the
	rpmsearch stuff. It generates url's like
	http://vorlon.eazel.com/rpmsearch.cgi?name=jade&arch=i386&version>=1.2.1&protocol=http&distro="Red Hat Linux 6.1"
	Hat Linux 6.1" and should get a url pointing to an appropriate rpm
	returned, which should then be fetched. 

	* athena-installer/src/Makefile:
	* athena-installer/src/Makefile.am:
	Updated so it still links.
	
2000-06-09  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-mime-actions.c
	(make_oaf_query_with_known_mime_type,
	make_oaf_query_with_uri_scheme_only): Support new
	bonobo:additional_uri_schemes attribute needed for Rebecca's
	stuff.

2000-06-09  John Sullivan  <sullivan@eazel.com>

	* src/athena-window.c: (athena_window_connect_view):
	%$#$@! state machine. I discovered that my last attempt
	to fix the "set_sensitive called on bad GTK_WIDGET" bug
	introduced a harmless but annoying warning when switching
	locations in the same window. This change (taking the
	"while_alive" off a signal handler) gets rid of that
	warning, but reintroduces the set_sensitive bug in certain
	cases. The good news is that I know how to reproduce the
	set_sensitive bug every time. I don't know the best fix
	for it though, so I'll just write a bug report.

2000-06-09  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(get_themed_icon_file_path):
	fixed problem where vector icons were scaled from the nominal
	size instead of being rendered at the appropriate size.  Fixed by
	no longer appending the size suffix for vector icons in
	get_themed_icon_file_path
	
2000-06-09  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	* components/hardware/Makefile.am:
	* components/help/Makefile.am:
	* components/history/Makefile.am:
	* components/html/Makefile.am:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/music/Makefile.am:
	* components/notes/Makefile.am:
	* components/rpmview/Makefile.am:
	* components/sample/Makefile.am:
	* components/services/startup/athena-view/Makefile.am:
	* components/services/time/athena-view/Makefile.am:
	* components/services/trilobite/sample/athena-view/Makefile.am:
	* components/websearch/Makefile.am:
	* configure.in:
	* helper-utilities/authenticate/Makefile.am:
	* helper-utilities/authenticate/athena-authenticate.c:
	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-caption-table.c:
	* libathena-extensions/athena-caption.c:
	* libathena-extensions/athena-file-utilities.c:
	* libathena-extensions/athena-global-preferences.c:
	* libathena-extensions/athena-global-preferences.h:
	* libathena-extensions/athena-lib-self-check-functions.h:
	* libathena-extensions/athena-link-set.c:
	* libathena-extensions/athena-link.c:
	* libathena-extensions/athena-password-dialog.c:
	* libathena-extensions/athena-preference.c:
	* libathena-extensions/athena-preferences-box.c:
	* libathena-extensions/athena-preferences-box.h:
	* libathena-extensions/athena-preferences-dialog.c:
	* libathena-extensions/athena-preferences-dialog.h:
	* libathena-extensions/athena-preferences-group.c:
	* libathena-extensions/athena-preferences-group.h:
	* libathena-extensions/athena-preferences-item.c:
	* libathena-extensions/athena-preferences-item.h:
	* libathena-extensions/athena-preferences-pane.c:
	* libathena-extensions/athena-preferences-pane.h:
	* libathena-extensions/athena-preferences.c:
	* libathena-extensions/athena-preferences.h:
	* libathena-extensions/athena-radio-button-group.c:
	* libathena-extensions/athena-string-picker.c:
	* libathena-extensions/athena-string-picker.h:
	* libathena-extensions/athena-text-caption.c:
	* libathena-extensions/athena-text-caption.h:
	* libathena-extensions/athena-undo-manager.c:
	* libathena-extensions/athena-user-level-manager.c:
	* libathena-extensions/athena-user-level-manager.h:
	* libathena-extensions/athena-widgets-self-check-functions.c:
	* libathena-extensions/athena-widgets-self-check-functions.h:
	* libathena-extensions/test-athena-preferences.c:
	* libathena-extensions/test-preferences.c:
	* athena-widgets/Makefile.am:
	* athena-widgets/athena-caption-table.c:
	* athena-widgets/athena-caption-table.h:
	* athena-widgets/athena-caption.c:
	* athena-widgets/athena-caption.h:
	* athena-widgets/athena-password-dialog.c:
	* athena-widgets/athena-password-dialog.h:
	* athena-widgets/athena-preference.c:
	* athena-widgets/athena-preference.h:
	* athena-widgets/athena-preferences-box.c:
	* athena-widgets/athena-preferences-box.h:
	* athena-widgets/athena-preferences-dialog.c:
	* athena-widgets/athena-preferences-dialog.h:
	* athena-widgets/athena-preferences-group.c:
	* athena-widgets/athena-preferences-group.h:
	* athena-widgets/athena-preferences-item.c:
	* athena-widgets/athena-preferences-item.h:
	* athena-widgets/athena-preferences-pane.c:
	* athena-widgets/athena-preferences-pane.h:
	* athena-widgets/athena-preferences.c:
	* athena-widgets/athena-preferences.h:
	* athena-widgets/athena-radio-button-group.c:
	* athena-widgets/athena-radio-button-group.h:
	* athena-widgets/athena-string-picker.c:
	* athena-widgets/athena-string-picker.h:
	* athena-widgets/athena-text-caption.c:
	* athena-widgets/athena-text-caption.h:
	* athena-widgets/athena-user-level-manager.c:
	* athena-widgets/athena-user-level-manager.h:
	* athena-widgets/athena-widgets-self-check-functions.c:
	* athena-widgets/athena-widgets-self-check-functions.h:
	* athena-widgets/test-athena-preferences.c:
	* athena-widgets/test-athena-widgets.c:
	* athena-widgets/test-preferences.c:
	* src/Makefile.am:
	* src/athena-main.c:
	* src/athena-sidebar.c:
	* src/athena-window-menus.c:
	* test/Makefile.am:
	Move the athena-widgets classes to libathena-extensions.

2000-06-09  Maciej Stachowiak  <mjs@eazel.com>

	* src/athena-applicable-views.c (got_file_info_callback): Do not
	add default to short list; instead, make sure we don't fail if
	there is a default but not short list.

2000-06-09  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/Makefile.am:
	Made all headers in this library private.  That means they dont
	get installed.
	
2000-06-09  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/install/command-line/eazel-install.c:
	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-install-metadata.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	* components/services/install/lib/eazel-install-xml-package-list.h:
	Fix some #include with directory prefix dumbness.
	
2000-06-09  Mike Fleming  <mfleming@eazel.com>

	* components/services/install/lib/trilobite-eazel-install-service.oafinfo:
	Eskil should stop putting ":"'s at the end of 
	"bonobo:supported-uri-schemes" entries

2000-06-09  John Sullivan  <sullivan@eazel.com>

	OK, this time I REALLY fixed the bug where you get
	occasional "set_sensitive called on bad GTK_WIDGET"
	errors. I think.

	* src/athena-window-private.h: Swapped parameters
	of athena_window_view_destroyed so the window is first.
	* src/athena-window-manage-views.c:
	(athena_window_free_load_info): Remove pending
	action_id function before setting field to 0.
	(athena_window_view_destroyed): Swapped the parameters
	to match prototype.
	* src/athena-window.c: (athena_window_connect_view): Use 
	gtk_signal_connect_object_while_alive instead of just
	gtk_signal_connect so the window won't be notified of its
	view's demise after the window's own demise.

2000-06-09  John Sullivan  <sullivan@eazel.com>

	* src/athena-window.c: (athena_window_destroy):
	Changed the way the window->action_tag is destroyed.
	I think this actually fixes the occasional "set_sensitive
	called on bad GTK_WIDGET" errors that Darin tried to
	fix yesterday.

2000-06-09  John Sullivan  <sullivan@eazel.com>

	Fixed bugs related to selection and activation in directory
	views, including 881 (right-click on selected item in list
	view shouldn't change selection), 918 (mouse activation
	in list view shouldn't affect only clicked item), and some
	others I found while in this code. Redefined the behavior
	of activation and multiple selection to some extent. Now
	double-clicking on a selected item always opens all selected
	items, and always opens them in new windows. If in single-click
	mode, single-clicking in list view when there's a multiple
	selection still opens only the clicked-on item, since the UI
	makes it pretty clear that you're clicking on a link for this
	one item. In icon view, single-clicking on a selected item in
	a multiple selection opens all selected items in new windows,
	since this feels to me more like "activate selected items"
	than "follow link", but I'm not really sure which is better.

	I changed the old behavior where single-clicking in icon view
	with a multiple selection would open the clicked item in the
	same window (if your preference was for "open in same window")
	and all others in new windows. In practice this seemed wrong,
	and opening all of the items in new windows is equivalent to
	the "Open in n New Windows" menu item. Please argue with me
	if you disagree.

	* libathena-extensions/athena-icon-container.c: 
	(remember_selected_files), (forget_selected_files): Removed these
	functions, which were part of an earlier incomplete selection
	behavior fix.
	(destroy): Removed call to forget_selected_files.
	(athena_icon_container_almost_drag): Changed name to
	somewhat less misleading "athena_icon_container_did_not_drag";
	fixed bug where clicking on selected item (in double-click mode)
	would deselect other selected items; replaced remember/forget
	pair with call to activate_selected_items.
	(handle_icon_button_press): replaced remember/forget pair with
	call to activate_selected_items.
	(activate_selected_items): Reimplemented to use athena_icon_
	container_get_selection instead of remember/forget.
	
	* libathena-extensions/athena-icon-private.h: Removed
	last_selected_files field, formerly used by remember_ and
	forget_selected_files.
	
	* libathena-extensions/athena-list.h: Changed "activate"
	signal to pass a list of items to activate instead of just one.
	
	* libathena-extensions/athena-list.c:
	(event_state_modifies_selection): New helper function, checks
	for control or shift key mask.
	(activate_row_data_list): New function, emits activate signal
	on a list of row_data elements.
	(activate_selected_rows): New function.
	(activate_row): Reimplemented to use activate_row_data_list.
	(athena_list_button_press): Deployed 
	event_state_modifies_selection; fixed 881 by not deselecting
	other items when right-clicking on a selected item; fixed 918
	by making double-click activate all selected rows.
	(athena_list_button_release): Deployed 
	event_state_modifies_selection; fixed bug where (left-)
	clicking on a selected item would unselect others
	
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_activate_file): Renamed from
	fm_directory_view_activate_files; now takes a list
	of files to activate and opens them all in new windows
	if there are more than one (otherwise respects preference).
	(fm_directory_view_activate_file_internal): Renamed to
	fm_directory_view_activate_file now that this name was
	available.
	
	* src/file-manager/fm-icon-view.c:
	(icon_container_activate_callback): Now calls 
	fm_directory_view_activate_files instead of iterating here.
	* src/file-manager/fm-list-view.c: 
	(list_activate_callback): Changed to take list parameter and
	call fm_directory_view_activate_files.

2000-06-09  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-text-item.c:
	(draw_pixbuf_aa), (iti_render), (iti_class_init):
	made rename work in anti-aliased mode by implementing
	a render method for the icon text item.  Modulo a few
	minor clean-ups and possibly some performance issues,
	this completes the work on the anti-aliased canvas.
	
2000-06-09  Mike Engber  <engber@eazel.com>

	* libathena-extensions/athena-file-utilities.c:
	(athena_make_path): 
	simplified obtuse expression (name[0] != '\0' > 0).

2000-06-09  Martin Baulig  <martin@home-of-linux.org>

	* libathena-extensions/athena-file-utilities.c:
	(athena_get_local_path_from_uri): New function.  Returns
	a local path for a file:// URI.

2000-06-09  Martin Baulig  <baulig@suse.de>

	* src/athena-view-frame-bonobo-embeddable.c:
	(bonobo_subdoc_notify_location_change): Added
	PersistFile support.

2000-06-09  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-property-browser.c:
	(athena_property_browser_drag_data_get):
	Darin left an unused variable in his wake, so I fixed it.
	
2000-06-08  Darin Adler  <darin@eazel.com>

	* acconfig.h:
	* configure.in:
	Added ATHENA_PREFIX so we can locate our installed files
	correctly instead of assuming they are in the gnome-libs prefix.
	
	* components/help/hyperbola-filefmt.c: (fmt_map_entry):
	* components/websearch/ntl-web-search.c:
	(web_search_populate_engines):
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_main_directory):
	* libathena-extensions/athena-link-set.c:
	(get_link_set_document):
	* src/file-manager/fm-properties-window.c: (get_property_names):
	* src/athena-property-browser.c:
	(athena_property_browser_drag_data_get), (make_drag_image),
	(get_xml_path), (make_properties_from_directory):
	Use ATHENA_PREFIX instead of gnome_datadir_file so we get the
	files from the right directory. Since gnome_datadir_file does a
	check to see if the file exists, had to add some explicit checks
	in various places.
	
	* components/html/glib-www-callbacks.c:
	Got rid of some warnings.
	
	* components/services/time/command-line/.cvsignore:
	* components/services/time/athena-view/.cvsignore:
	* components/services/time/service/.cvsignore:
	Ignore the new time stamp files.
	
	* libathena-extensions/athena-gdk-pixbuf-extensions.h:
	Fixed formatting.

	* RENAMING:
	* src/athena-sidebar-tabs.c:
	* src/athena-sidebar-tabs.h:
	* src/athena-sidebar-title.c:
	* src/athena-sidebar-title.h:
	* src/athena-sidebar.c:
	Renamed IndexTabs and IndexTitle to SidebarTabs
	and SidebarTitle as planned.

2000-06-08  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-view-identifier.h,
	libathena-extensions/athena-view-identifier.c
	(athena_view_identifier_compare): New function to use when
	searching view identifier lists.

	* src/athena-applicable-views.c (got_file_info_callback): Merge
	the default view into the menu.

2000-06-08  Andy Hertzfeld  <andy@eazel.com>

	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_initialize), (file_selection_callback),
	(go_to_button_callback), (athena_rpm_view_update_from_uri):
	added a "go to selected file" button to the rpm view that navigates
	to a file selected in the package file list.
	
2000-06-08  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/docs/installer-dep-check:
	(set_parameters_from_command_line), (eazel_progress_signal),
	(download_failed), (install_failed), (dep_check), (create_package),
	(main):
	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_arg), (eazel_install_class_initialize),
	(eazel_install_initialize),
	(eazel_install_fetch_remote_package_list),
	(eazel_install_emit_install_failed),
	(eazel_install_emit_dependency_check),
	(eazel_install_install_packages), (eazel_install_uninstall):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (ftp_fetch_remote_file),
	(local_fetch_remote_file), (eazel_install_fetch_file),
	(eazel_install_fetch_package):
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (download_all_packages),
	(install_all_packages), (uninstall_packages),
	(uninstall_a_package), (build_packagedata_list_from_deps),
	(do_rpm_install), (do_rpm_uninstall),
	(eazel_install_prune_packages_helper),
	(eazel_install_prune_packages), (eazel_install_load_rpm_headers),
	(eazel_install_load_headers), (eazel_install_free_rpm_system),
	(eazel_install_prepare_rpm_system),
	(eazel_install_prepare_package_system),
	(eazel_install_free_package_system),
	(eazel_install_add_headers_to_rpm_set),
	(eazel_install_add_headers_to_set),
	(eazel_install_package_name_compare),
	(eazel_install_package_conflict_compare),
	(eazel_install_add_to_extras_foreach),
	(eazel_install_fetch_rpm_dependencies),
	(eazel_install_fetch_dependencies), (print_package_list),
	(eazel_install_ensure_deps), (rpm_install):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-types.c:
	(protocol_as_string), (packagedata_new),
	(packagedata_new_from_rpm_conflict),
	(packagedata_new_from_rpm_conflict_reversed),
	(packagedata_new_from_rpm_header),
	(packagedata_fill_from_rpm_header), (packagedata_destroy_foreach),
	(packagedata_destroy), (rpmfilename_from_packagedata),
	(packagedata_hash), (packagedata_equal):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (parse_local_xml_package_list):
	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	(xml_get_value):
	Too much to list it all. Basically it now tries to do what apt-get
	has done for ages. Given a list of packages to install, it
	recursively traverses the packagelist, fetches missing
	dependencies (no remote fetch yet, requires a search script on the
	server side) untill all deps are satisfies. If deps failed, it
	prunes the tree and emit signals.
	I've tried to do it modular enough to add support for other
	package systems then rpm, but rpm calls are still strewm about.

	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-alt-install.c:
	Now takes random package names at commandline and should
	ideally try to download them from the server.
	
	* athena-installer/src/Makefile:
	* athena-installer/src/Makefile.am:
	* athena-installer/src/installer.c: (eazel_download_progress),
	(install_failed_helper), (install_failed), (installer):
	Fixed to work the new stuff in libinstall. Also generates
	prettier (but still ugly) error reports.
	
2000-06-08  John Sullivan  <sullivan@eazel.com>

	Fixed bug 542 (context menus in directory view sometimes
	partially offscreen)

	* libathena-extensions/athena-gtk-extensions.c:
	(athena_popup_menu_position_func): Made the menu-positioning
	function take screen size into account.

	Fixed bug 541 (unusably wide dialog when trying to
	rename a file to a gigantically long name)

	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file),
	(fm_report_error_setting_permissions):
	Used athena_error_dialog (which does word wrapping)
	instead of GnomeMessageBox directly.

	Fixed bug 1242 (Possibly unnecessary widget resizing when
	content view swapped)

	* src/athena-window.c: (athena_window_real_set_content_view):
	Scientists proved that it was unnecessary. Removed it.

2000-06-08  Andy Hertzfeld  <andy@eazel.com>

	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_initialize), (check_installed):
	improved the layout of the rpm view by making the file list be
	the dominant, growable item.  Also, made other tweaks and clean-ups.
	
2000-06-08  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-entry.c:
	(athena_entry_initialize_class), 
	(athena_entry_initialize):
	Fixed bug 983.  Added user_changed signal.
	
	(athena_entry_destroy), (athena_entry_set_text),
	(athena_entry_insert_text), (athena_entry_delete_text),
	(free_undo_data), (register_edit_undo),
	(restore_from_undo_snapshot_callback),
	(athena_entry_set_undo_key):
	Cleanups in the way undo was being registered.  Created
	local undo data structure and removed cached undo text
	from class.  Localized checking of undo registered
	boolean to a single location.

	(user_changed_callback):
	Added callback coonected to user changed signal.
	Undo registering is handled here.

	* src/athena-bookmarks-window.c: (create_bookmarks_window),
	(on_select_row), (on_text_field_focus_in_event),
	(on_text_field_focus_out_event), (repopulate):
	Updated code to properly handle undo.
	
	* src/athena-location-bar.c:
	(athena_location_bar_set_location):
	Updated code to properly handle undo.

2000-06-08  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1097 (double-click in list should activate
	"Choose" button in View as Other dialog)

	* libathena-extensions/athena-gnome-extensions.h:
	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_dialog_get_button_by_index): New
	function, returns one of the bottom-of-the-dialog buttons
	specified by index.

	* libathena-extensions/athena-gtk-extensions.h,
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_button_auto_click): New function, 
	acts as if invisible finger had clicked the specified
	button.
	(finish_button_activation): New idle function used by
	auto_click.
	
	(athena_gtk_clist_set_double_click_button):
	New function, specifies a button to be auto-clicked
	when a clist gets a double-click.
	(activate_button_on_double_click): New signal handler
	function used by set_double_click_button.

	* libathena-extensions/athena-program-chooser.c:
	(athena_program_chooser_new): Wire up the "Choose"
	button with athena_gtk_clist_set_double_click_button.

2000-06-08  Shane Culpepper  <pepper@eazel.com>

	* components/services/install/command-line/Makefile.am:
	Fixed include path to point to top level trilobite directory.
	Could not build from a clean tree because helixcode-utils.h could
	not be found.

2000-06-08  Darin Adler  <darin@eazel.com>

	* src/athena-window-manage-views.c:
	(athena_window_end_location_change_callback),
	(athena_window_begin_location_change):
	* src/athena-window.h:
	Fixed the bug where bogus URIs would cause a seg fault.
	Unfortunately doing this in a simple clean way required
	adding a field to the already-packed AthenaWindow.

2000-06-08  Pavel  <pavel@eazel.com>

	* components/services/time/command-line/Makefile.am:
	* components/services/time/athena-view/Makefile.am:
	* components/services/time/service/Makefile.am:
	Ooops, my previous makefile fixes, weren't right -- they
	caused trilobite to get rebuild again each time.
	Replaced a phony rule with a timestamp file to fix
	the problem.

2000-06-08  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(dequeue_pending_idle_callback), (directory_load_done):
	Moved a state changed call in for the case where we discover
	new items in a directory. This fixes bugs 1066 and 1068.
	
	* src/athena-window.c: (athena_window_destroy):
	Fixed problem where we get occasional stray calls to
	"set_sensitive". The problem is that we must remove the
	idle call used by the window state machine when the window
	in question is destroyed.

2000-06-08  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-mime-actions.c
	(athena_mime_get_default_component_for_uri_internal): Fix 1265
	(OAF_ServerInfo__copy): Fine-tuning to avoid crashing.
	(athena_do_component_query): Fix 1270
	(strv_length, strv_concat): New utility functions.

	* RENAMING: Added more renaming ideas.
	* libathena-extensions/athena-mime-actions.c:
	(get_mime_type_from_uri): Adjusted a FIXME comment.

2000-06-08  Pavel Cisler <pavel@eazel.com>

	* athena-widgets/Makefile.am:
	Fix dependencies to make parallel make on MP machines work.

	* components/services/time/command-line/Makefile.am:
	* components/services/time/athena-view/Makefile.am:
	* components/services/time/service/Makefile.am:
	Fix dependencies to make parallel make work.
	Fix clean target to delete all the autogenerated files.

2000-06-07  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_canvas_fill_with_gradient):
	fixed problem with the anti-aliased gradient draw at
	small scale factors by pinning the interpolation ratio
	between 0.0 and 1.0
	
2000-06-07  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file.c: (destroy):
	Fixed another storage leak, we forgot to call through
	to the parent destroy.
	(athena_self_check_file): Fixed a leak in the test.
	
	* libathena-extensions/athena-string-list.c:
	(athena_string_list_new_from_tokens): Fixed a leak
	by calling g_strfreev instead of g_free.

2000-06-07  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1299 (view-and-location switching fails if
	short list empty)

	* libathena-extensions/athena-mime-actions.h,
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_has_any_applications_for_uri),
	(athena_mime_has_any_components_for_uri): New functions,
	return a gboolean. Currently they just get the whole list
	and check if it's non-NULL, but perhaps this can be
	optimized later.
	
	* src/athena-sidebar.c: (athena_sidebar_update_buttons):
	Deploy athena_mime_has_any_applications_for_uri where it
	was already doing this kind of check.

	* src/athena-applicable-views.c: 
	(set_initial_content_id): removed an obsolete assert.
	(got_file_info_callback): Don't report no handler just because
	preferred list is empty; if any component is available use it.

	* src/athena-window.c: (athena_window_load_content_view_menu):
	Leave out the divider below the preferred list if the preferred
	list is empty.

2000-06-07  Mike Fleming  <mfleming@eazel.com>

	* components/services/time/athena-view/Makefile.am:
	Added include path; wasn building correctly for everyone

2000-06-07  Darin Adler  <darin@eazel.com>

	Leak-checking-related fixes.

	* libathena-extensions/athena-file.c: (destroy):
	Fixed a storage leak (we weren't freeing file->details).
	* libathena-extensions/athena-self-checks.c:
	(athena_check_string_result): Fixed a storage leak.
	
	* libathena-extensions/athena-directory-async.c:
	(metafile_read_done), (metafile_read_failed),
	(metafile_read_complete): Added some asserts.
	* libathena-extensions/athena-directory.c:
	(athena_self_check_directory): Added one more "assert".
	
	* libathena-extensions/athena-lib-self-check-functions.c:
	(athena_run_lib_self_checks): Formatting tweaks.
	* athena-widgets/athena-widgets-self-check-functions.c:
	(athena_widgets_run_self_checks): Formatting tweaks.
	
	* athena-widgets/athena-preference.c:
	(athena_widgets_self_check_preference): Made the test
	not repeat things so many times. It doesn't help find the
	leaks, it actually hurts :-)
	
	* src/athena-application.c: (athena_app_quit):
	* src/athena-main.c: (main):
	Moved the gnome_vfs_shutdown out to the main loop instead of
	putting it inside athena-application.c since that matches
	how we do the initializing.

2000-06-07  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-location-bar.c: (accumulate_name),
	(try_to_expand_path), (editable_key_press_callback),
	(athena_location_bar_initialize):
	implemented first cut at auto-completion for the location bar text
	entry. For now, it only handles file uris.

2000-06-07  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-list.c: (athena_list_destroy):
	Fix a memory thrasher Darin and John were running into.
	
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_component_for_uri_internal),
	(athena_mime_get_short_list_components_for_uri),
	(athena_mime_get_all_components_for_uri):
	Fix more leaks.

2000-06-07  John Sullivan  <sullivan@eazel.com>

	Made switching location with a specified view work.
	There's still a bug outstanding (1053) about doing this a more
	reliable way.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_switch_location): New helper function to
	switch location, specifying whether or not a new window
	should be used.
	(switch_location_and_view): Set the default component for this
	uri and then switch location.
	(fm_directory_view_activate_file_internal): Use
	fm_directory_view_switch_location to consolidate code.

2000-06-07  John Sullivan  <sullivan@eazel.com>

	Did task 1058 (Activating an item in directory view needs
	to use application when appropriate)

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_activate_file_internal):
	Check default_action_type_for_uri and launch default application
	or switch location depending on result.

2000-06-07  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_canvas_fill_with_gradient):
	made gradient fill work properly on the anti-aliased canvas
	by changing a multiplier from 4 to 3 (no alpha value in the
	canvas buffer) and pinning the gradient fraction to 1.0.
	* libathena-extensions/athena-background-canvas-group.c:
	(athena_background_canvas_group_render):
	added some slop to the bounds passed to gradient fill

2000-06-07  John Sullivan  <sullivan@eazel.com>

	* src/athena-window.c: (chose_component_callback):
	Moved a g_return_if_fail so that it doesn't trigger erroneously
	when the window is closing.

2000-06-07  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(key_press_event):
	Fixed bug #1154.  The Enter key was getting checking
	for improperly.  A check was being performed for
	being in editing mode after a check for not being in editing mode 
	had occured.  Moved the check to the proper code block.
	
2000-06-07  Darin Adler  <darin@eazel.com>

	Updated code affected by destroy-notify addition to bonobo.
	Requires new bonobo.
	
	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_ui_handler_menu_set_toggle_appearance):
	Save and restore the destroy notify function as well as the
	callback. This requires using the new function
	bonobo_ui_handler_menu_remove_callback_no_notify to do right.
	
	* src/file-manager/fm-directory-view.c:
	(application_launch_parameters_new),
	(application_launch_parameters_free): Ref and unref the directory
	view object now that we correctly free this as needed.
	(viewer_launch_parameters_new), (viewer_launch_parameters_free):
	Ref and unref the directory view object now that we correctly free
	this as needed.
	(add_open_with_bonobo_menu_item): Add a destroy-notify function
	parameters and apply it using bonobo_ui_handler_menu_set_callback.
	(add_application_to_bonobo_menu): Free the launch parmaeters using
	a destroy-notify function.
	(add_component_to_bonobo_menu): Free the launch parmaeters using
	a destroy-notify function.
	
	* src/athena-window-menus.c: (append_bookmark_to_menu): Use a
	destroy-notify function to destroy the bookmark holder.
	(clear_appended_bookmark_items): Get rid of the code that gets
	the callback data and destroys it explicitly.

	* libathena/athena-clipboard.c: (add_menu_item):
	* src/file-manager/fm-directory-view.c: (insert_bonobo_menu_item),
	(fm_directory_view_real_merge_menus):
	* src/file-manager/fm-icon-view.c: (append_bonobo_menu_item),
	(fm_icon_view_merge_menus):
	Rename BonoboUIHandlerCallbackFunc -> BonoboUIHandlerCallback.
	
	* HACKING: Some reformatting.

2000-06-07  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-gtk-extensions.h,
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_button_set_padding): New function, puts some
	padding around the label (or other contained widget) in a
	button.
	* src/athena-bookmarks-window.c: (create_bookmarks_window):
	Use this new function where it was doing this the long way.
	* libathena-extensions/athena-program-chooser.c:
	(athena_program_chooser_new): Use this new function to make
	the "Modify..." button not so squashed.

2000-06-07  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/athena-mozilla-content-view.oafinfo:
	Expose the fact that this component can grok text/html.
	
2000-06-07  John Sullivan  <sullivan@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_destroy):
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(generate_xml_package_list):
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_main_directory):
	* libathena-extensions/athena-gdk-extensions.c:
	(athena_fill_rectangle_with_color):
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_add), (athena_icon_container_remove):
	* libathena-extensions/athena-list.c:
	(athena_list_drag_data_received):
	* libathena-extensions/athena-undo-manager.c:
	(athena_undo_manager_undo):
	* libathena-extensions/athena-view-identifier.h:
	* libathena/athena-distributed-undo.idl:
	* athena-widgets/athena-user-level-manager.c:
	(athena_user_level_manager_get_user_level):
	Final batch (for now) of adding bug numbers to FIXMEs.

2000-06-07  Pavel  <pavel@eazel.com>

	* libathena-extensions/athena-file.c: (athena_file_get):
	Added missing unrefs to three exit places. 

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_action_type_for_uri),
	(athena_mime_get_default_application_for_uri),
	(athena_mime_get_default_component_for_uri_internal),
	(athena_mime_get_short_list_applications_for_uri),
	(athena_mime_set_short_list_applications_for_uri),
	(athena_mime_set_short_list_components_for_uri),
	(athena_do_component_query):
	Fixed a ton of leaked mime type strings.

2000-06-07  Andy Hertzfeld  <andy@eazel.com>

	more work on gradient backgrounds in anti-aliased mode; vertical ones are
	working now but horizontals still aren't
	
	* libathena-extensions/athena-background-canvas-group.c:
	(athena_background_canvas_group_render):
	get the width and height of entire area from get_scroll_area
	* libathena-extensions/athena-background.c,h:
	(athena_background_draw_aa):
	added parameters for entire area to use for color determination
	* libathena-extensions/athena-gnome-extensions.c,h:
	(athena_gnome_canvas_fill_with_gradient):
	added entire width and height parameters, and use them to
	compute the color
	
Wed Jun  7 01:20:22 2000  Raph Levien  <raph@acm.org>

	* librsvg/art_render.h: Workaround to compile with older
	versions of Libart that didn't define art_u16.

2000-06-06  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_short_list_applications_for_uri),
	(athena_mime_get_short_list_components_for_uri),
	(athena_mime_get_all_applications_for_uri),
	(athena_mime_get_all_components_for_uri):
	Fixed leaked uris in each of the above.

	* athena-widgets/athena-preferences-item.c:
	(preferences_item_create_editable_string):
	Fix a leaked string.

	* athena-widgets/athena-preferences-item.c:
	(has_image_file):
	Add a missing gnome_vfs_file_info_init that will make
	gnome_vfs_get_file_info not leak.

	* src/athena-window-menus.c:
	(update_user_level_menu_items):
	Fix a leaked string.

	* src/athena-window-menus.c:
	(update_preferences_dialog_title):
	Fix a leaked title string.

2000-06-06  Darin Adler  <darin@eazel.com>

	The main change here is revamping the undo manager.
	To get a complete check-out you might have to delete
	the file named libathena/athena-undo.h that used
	to be a generated file and is now checked-in.

	* components/help/help-method.c: (vfs_module_transform):
	Removed a bogus extraneous FIXME.
	
	* libathena-extensions/Makefile.am:
	Moved the undo manager into libathena-extensions
	since it's not needed by Athena components.
	
	* libathena-extensions/athena-entry.c:
	* libathena-extensions/athena-icon-text-item.c:
	* libathena/athena-view.c:
	* src/athena-application.c:
	* src/athena-bookmarks-window.c: (create_bookmarks_window):
	* src/athena-view-frame.c:
	* src/athena-window-private.h:
	* src/athena-window.c:
	Updated includes and a few small function name changes.
	
	* libathena-extensions/athena-gtk-extensions.h:
	* libathena-extensions/athena-gtk-extensions.c:
	(alive_disconnecter),
	(athena_gtk_signal_connect_full_while_alive):
	Added a new function that combines the features of
	gtk_signal_connect_full with gtk_signal_connect_while_alive.
	
	* libathena/athena-undo-context.h: [removed]
	* libathena/athena-undo-context.c: [removed]
	* libathena-extensions/athena-undo-context.h:
	* libathena-extensions/athena-undo-context.c:
	(impl_Athena_Undo_Context__destroy),
	(impl_Athena_Undo_Context__create),
	(impl_Athena_Undo_Context__get_undo_manager),
	(athena_undo_context_new), (destroy),
	(athena_undo_context_initialize_class):
	Rewrote this class to simplify it (after moving it here).
	
	* libathena/athena-undo-manager.h: [removed]
	* libathena/athena-undo-manager.c: [removed]
	* libathena/athena-undo-manager-private.h: [removed]
	* libathena-extensions/athena-undo-manager.h:
	* libathena-extensions/athena-undo-manager.c:
	(impl_Athena_Undo_Manager__destroy),
	(impl_Athena_Undo_Manager__create),
	(impl_Athena_Undo_Manager__append),
	(impl_Athena_Undo_Manager__forget),
	(athena_undo_manager_initialize),
	(athena_undo_manager_initialize_class),
	(athena_undo_manager_undo),
	(athena_undo_manager_add_transaction),
	(athena_undo_manager_forget_transaction),
	(athena_undo_manager_set_queue_depth),
	(athena_undo_manager_attach),
	(athena_undo_manager_add_interface), (update_undo_menu_item),
	(undo_menu_handler_connection_free),
	(undo_menu_handler_connection_free_cover),
	(athena_undo_manager_set_up_bonobo_ui_handler_undo_item):
	Rewrote this class to simplify it. Got rid of many old
	interfaces and added some new ones.
	
	* libathena/.cvsignore:
	* libathena/Makefile.am:
	Renamed the old athena-undo.idl to
	athena-distributed-undo.idl.  The IDL is only about the internal
	part of the undo framework.  Clients use calls that are in
	athena-undo.h. The part that's public needs the prettier name.
	
	* libathena/athena-undo.idl: [removed]
	* libathena/athena-distributed-undo.idl:
	Updated the names of menu-item-related things to better match the
	standard terminology.
	
	* libathena/athena-undo-private.h:
	Added this new header for things needed by the undo manager that
	are in libathena. Maybe we can eliminate this later.

	* libathena/athena-undo-transaction.h:
	* libathena/athena-undo-transaction.c:
	(impl_Athena_Undo_Transaction__destroy),
	(impl_Athena_Undo_Transaction__create),
	(impl_Athena_Undo_Transaction__get_undo_menu_item),
	(impl_Athena_Undo_Transaction__get_redo_menu_item),
	(impl_Athena_Undo_Transaction__get_operation_name),
	(impl_Athena_Undo_Transaction__undo),
	(athena_undo_transaction_new),
	(athena_undo_transaction_initialize),
	(remove_transaction_from_object),
	(athena_undo_transaction_destroy),
	(athena_undo_transaction_initialize_class),
	(athena_undo_transaction_add_atom),
	(athena_undo_transaction_undo),
	(athena_undo_transaction_add_to_undo_manager), (remove_atoms),
	(remove_atoms_cover),
	(athena_undo_transaction_unregister_object), (undo_atom_free),
	(undo_atom_undo_and_free), (undo_atom_free_cover),
	(undo_atom_undo_and_free_cover), (undo_atom_list_free),
	(undo_atom_list_undo_and_free):
	Rewrote and simplified this class and got rid of all uses of
	AthenaUndoable.
	
	* libathena/athena-undoable.h: [removed]
	* libathena/athena-undoable.c: [removed]
	* libathena/athena-undo.h:
	* libathena/athena-undo.c: (athena_undo_register),
	(athena_undo_register_full), (athena_undo_unregister),
	(athena_undo), (athena_undo_get_undo_manager),
	(undo_manager_ref), (undo_manager_unref),
	(undo_manager_unref_cover), (athena_undo_attach_undo_manager),
	(athena_undo_share_undo_manager), (set_up_bonobo_control),
	(athena_undo_set_up_bonobo_control):
	Added this new file with the public interface of the undo code and
	most of the basic implementation. Most of this was previously in
	athena-undoable.c.
	
	* athena-widgets/athena-preferences.c:
	(preferences_hash_node_free), (preferences_hash_node_add_callback),
	(preferences_hash_node_remove_callback),
	(preferences_hash_node_check_changes_func),
	(preferences_callback_node_alloc),
	(preferences_callback_node_free),
	(preferences_callback_node_free_func),
	(preferences_callback_node_invoke_func),
	(preferences_gconf_callback):
	Fixed a repeated spelling error in this file.
	
	* src/athena-application.c: (athena_app_init):
	* src/athena-view-frame.c: (athena_view_frame_load_client):
	* src/athena-window-menus.c: (edit_menu_undo_callback),
	(athena_window_initialize_menus):
	* src/athena-window.c: (athena_window_constructed):
	Changed to use public parts of the undo API instead of the old
	stuff that used private secret stuff. Many places use nice new
	convenient calls that do a lot of the work for you.

2000-06-06  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(get_themed_icon_file_path),
	(athena_icon_factory_get_icon_for_file):
	Fix leaks.
	
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_component_for_uri_internal):
	Add an assert to augument a funny if statement and trap 
	a potential leak case.

	* src/file-manager/fm-icon-view.c: (get_icon_text_callback):
	Fix a leak

2000-06-06  Andy Hertzfeld  <andy@eazel.com>

	made gradient backgrounds work with the anti-aliased canvas.  This
	isn't finished yet but will be soon.
	
	* libathena-extensions/athena-background-canvas-group.c:
	(athena_background_canvas_group_render):
	call athena_background_draw_aa to draw the background
	* libathena-extensions/athena-background.c:
	(draw_pixbuf_tiled_aa), (athena_background_draw_aa):
	made it call athena_gnome_canvas_fill_with_gradient
	to fill with a gradient background if necessary
	* libathena-extensions/athena-gnome-extensions.c,h:
	(athena_gnome_canvas_item_get_world_bounds),
	(athena_gnome_canvas_fill_with_gradient):
	implemented athena_gnome_canvas_fill_with_gradient

2000-06-06  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences.c:
	* athena-widgets/athena-user-level-manager.c:
	(user_level_manager_new):
	Use "/apps/athena" instead of "/athena" to conform to the
	gconf "standard"

	Thanks to andersca@gnu.org for pointing this out.
	
2000-06-06  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-glib-extensions.c: Removed FIXME
	comments for 1277.

	* libathena-extensions/athena-glib-extensions.c:
	(athena_test_predicate), (athena_self_check_glib_extensions):
	Un #if-0'd out, and replaced the free that was killing things with
	a comment explaining why it is not necessary.

2000-06-06  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences.c:
	(athena_preferences_get_enum):
	Add missing g_free.
	
2000-06-06  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-glib-extensions.c:
	(athena_self_check_glib_extensions):
	Comment out broken athena_g_list_paritition tests and adeed
	FIXME blurb with bug number.
	
2000-06-06  John Sullivan  <sullivan@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_new_with_config):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(do_rpm_install):
	* components/services/time/service/trilobite-eazel-time-service.c:
	(impl_Trilobite_Eazel_Time_Service_update_time):
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_get_sidebar_panel_view_identifiers),
	(global_preferences_register_sidebar_panels_preferences_for_ui):
	* libathena/athena-clipboard.c: (add_menu_items_callback):
	* athena-widgets/athena-preferences-item.c:
	(preferences_item_create_font_family):
	* athena-widgets/athena-preferences.c:
	(preferences_hash_node_check_changes_func),
	(preferences_gconf_callback):
	Added bug numbers to FIXMEs.

2000-06-06  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_action_type_for_uri),
	(athena_mime_get_default_application_for_uri),
	(athena_mime_get_default_component_for_uri_internal),
	(athena_mime_get_short_list_applications_for_uri),
	(athena_mime_get_short_list_components_for_uri),
	(athena_mime_get_all_applications_for_uri),
	(athena_mime_set_short_list_applications_for_uri),
	(athena_mime_set_short_list_components_for_uri),
	(athena_do_component_query), (get_mime_type_from_uri):
	Added bug numbers to FIXMEs.

2000-06-06  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_get_type_as_string):
	* src/file-manager/fm-directory-view.c:
	(bonobo_control_activate_callback), (new_folder_done),
	(fm_directory_view_real_create_background_context_menu_items):
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c: (fm_list_handle_dropped_icons):
	* src/athena-application.c: (athena_app_startup):
	* src/athena-desktop-window.c:
	(athena_desktop_window_initialize),
	(athena_desktop_window_new), (realize):
	* src/athena-property-browser.c: (remove_background),
	(remove_emblem), (add_background_to_browser):
	* src/athena-sidebar.c:
	* src/athena-view-frame-bonobo-embeddable.c:
	(bonobo_subdoc_notify_location_change):
	* src/athena-window-manage-views.c:
	(athena_window_request_location_change):
	Added bug numbers to FIXMEs.

2000-06-06  John Sullivan  <sullivan@eazel.com>

	* components/music/athena-music-view.c:
	* components/services/trilobite/libtrilobite/trilobite-service.c:
	* src/athena-window-menus.c: (update_user_level_menu_items):
	* src/athena-window.c: (athena_window_constructed),
	(athena_window_real_set_content_view):
	Added bug numbers to FIXMEs, and removed a few stale ones.

2000-06-06  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-metadata.h:
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_action_type_for_uri),
	(athena_mime_get_default_application_for_uri),
	(athena_mime_get_default_component_for_uri_internal),
	(athena_mime_get_short_list_applications_for_uri),
	(athena_mime_get_short_list_components_for_uri),
	(athena_mime_get_all_applications_for_uri),
	(athena_mime_set_default_action_type_for_uri),
	(athena_mime_set_default_application_for_uri),
	(athena_mime_set_default_component_for_uri),
	(athena_mime_set_short_list_applications_for_uri),
	(athena_mime_set_short_list_components_for_uri),
	(athena_mime_extend_all_applications_for_uri),
	(athena_mime_remove_from_all_applications_for_uri),
	(get_explicit_content_view_iids_from_metafile):
	Made all the metadata keys in this file be #defines
	instead of in-line strings.

2000-06-06  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1219 (saved viewer not used if not in preferred list)

	* libathena-extensions/athena-metadata.h:
	Removed ATHENA_METADATA_KEY_INITIAL_VIEW 'cuz it's not needed
	anymore.
	
	* libathena-extensions/athena-mime-actions.h:
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_component_for_uri_internal):
	New private function, returns both the default component
	and whether it was user-chosen (as opposed to just inherited
	from the value for this MIME type).
	(athena_mime_get_default_component_for_uri): Now calls
	this new function. Also fixed a bug where it was using a
	different metadata string than _set_default_, and thus
	never retrieving the stored value.
	(athena_mime_is_default_component_for_uri_user_chosen):
	New public function, reports whether the default component
	was chosen by the user or just inherited.
	
	* src/athena-window.c: (athena_window_switch_views):
	Call athena_mime_set_default_component_for_uri when the
	user explicitly chooses a view, rather than setting the
	now-obsolete "INITIAL_VIEW" metadata.

	* src/athena-applicable-views.c: 
	(got_file_info_callback): Rename "fallback_id" to "default_id"
	and eliminate code that adds default component to menu here.
	The current view is always added to the menu in a special way
	if required later.
	(set_initial_content_id): Don't get remembered value, instead
	use athena_mime_is_default_component_for_uri_user_chosen to
	choose priority between default component and referring component.
	And don't require that the initial component is in the preferred
	list.

2000-06-06  Andy Hertzfeld  <andy@eazel.com>

	made tiled image backgrounds work properly in anti-aliased mode
	
	* libathena-extensions/athena-background-canvas-group.c:
	(athena_background_canvas_group_initialize_class),
	(athena_background_canvas_group_draw),
	(athena_background_canvas_group_render):
	overrode the render method so backgrounds draw in anti-aliased mode
	
	* libathena-extensions/athena-background.c:
	(athena_background_draw), (draw_pixbuf_aa), (draw_pixbuf_tiled),
	(athena_background_draw_aa):
	added athena_background_draw_aa to draw the background in
	anti-aliased yet.  We don't support gradients yet, but that's
	coming soon.
	* libathena-extensions/athena-background.h:
	added athena_background_draw_aa
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_render):
	made it respect the is_bg flag
	
2000-06-05	Mathieu Lacage	<mathieu@gnome.org>

	* components/rpmview/Makefile.am: add 
	athena_rpm_view_LDADD: don't ask me why
	it is necessary.
	* src/file-manager/Makefile.am: add ORBIT_IDL.

2000-06-05	Mathieu Lacage	<mathieu@gnome.org>

	* configure.in: add check for ORBit.
	* libathena/Makefile.am: use the previous check.
	The above is a trivial patch which does not correct the
	problem of the Bonobo idl files. How can you get their 
	location ?
	* librsvg/Makefile.am: make it use the proper flags for 
	GDK_PIXBUF.

2000-06-05  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences-item.c:
	(preferences_item_construct),
	(preferences_item_create_editable_string),
	(preferences_item_create_font_family),
	(preferences_item_create_icon_theme),
	(preferences_item_create_toolbar_icon_theme),
	(text_item_changed_callback), (editable_string_changed_callback):
	* athena-widgets/athena-preferences-item.h:
	New type of preference, EDITABLE_STRING.
	
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog):
	Add a new pane, navigation pane.
	
	Add support for manually keying in a home page.  Needs some more
	work to work better.
	
	* athena-widgets/Makefile.am:
	* athena-widgets/athena-caption.c:
	(athena_caption_initialize_class), (athena_caption_initialize),
	(athena_caption_destroy), (athena_caption_new),
	(athena_caption_set_title_label),
	(athena_caption_get_title_label), (athena_caption_set_child):
	* athena-widgets/athena-caption.h:
	New class.  Common stuff for caption widgets.

	* athena-widgets/athena-string-picker.c:
	(athena_string_picker_initialize_class),
	(athena_string_picker_initialize), (entry_changed_callback),
	(athena_string_picker_set_string_list):
	* athena-widgets/athena-string-picker.h:
	Subclass from caption class.
	
	* athena-widgets/athena-text-caption.h:
* athena-widgets/athena-text-caption.c:
	(athena_text_caption_initialize_class),
	(athena_text_caption_initialize),
	(athena_text_caption_destroy), (entry_changed_callback),
	(athena_text_caption_new), (athena_text_caption_get_text),
	(athena_text_caption_set_text):
	New caption sublcass that manages an text widget.
	
	* athena-widgets/test-athena-widgets.c: (main),
	(test_string_picker), (test_text_caption),
	(string_picker_changed_callback), (text_caption_changed_callback):
	Update for new class and caption changes.
	
2000-06-05  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-icon-factory.c: (embed_text):
	* src/athena-sidebar-title.c:
	(athena_index_title_update_label):

	Update FIXME blurbs to reflect new bugs filed for these issue.

2000-06-05  John Sullivan  <sullivan@eazel.com>

	Used newly-publicized functions from gnome-vfs-mime-handlers.c
	to avoid replicating a bunch of code.

	* libathena-extensions/athena-mime-actions.c:
	(gnome_vfs_mime_application_matches_id),
	(gnome_vfs_mime_component_matches_id),
	(gnome_vfs_mime_id_in_application_list),
	(gnome_vfs_mime_id_in_component_list),
	(id_list_from_application_list),
	(id_list_from_component_list):
	Removed these functions.
	
	(athena_mime_add_application_to_short_list_for_uri),
	(athena_mime_remove_application_from_short_list_for_uri),
	(athena_mime_add_component_to_short_list_for_uri),
	(athena_mime_remove_component_from_short_list_for_uri):
	Rewrote to call newly-publicized gnome-vfs-mime functions.

2000-06-05  John Sullivan  <sullivan@eazel.com>

	Cleaned up the directory view code that launches applications 
	or switches to viewers so that when bugs 1053 and 1072 are
	fixed it will be trivial to finish this code.

	* libathena-extensions/athena-gtk-extensions.h,
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_signal_connect_free_data_custom): New function
	to specify a GtkDestroyNotify function when connecting to a
	signal, without having to specify everything else in
	gtk_signal_connect_full.
	(athena_gtk_signal_connect_free_data): Changed to call
	athena_gtk_signal_connect_free_data_custom.

	* libathena-extensions/athena-view-identifier.c:
	(athena_view_identifier_copy): Made it handle NULL parameter.
	
	* src/file-manager/fm-directory-view.c:
	(application_launch_parameters_new),
	(application_launch_parameters_free),
	(viewer_launch_parameters_new), 
	(viewer_launch_parameters_free): New helper functions for
	dealing with the structs needed to launch an app or viewer.
	
	(fm_directory_view_launch_application): New wrapper for
	athena_launch_application that will let us handle
	errors in a single place.

	(switch_location_and_view): New bottleneck function or going
	to a particular location with a particular viewer. This 
	doesn't work yet (bug 1053) and it currently puts up a
	message box telling the user so.

	(fm_directory_view_chose_application_callback),
	(fm_directory_view_chose_component_callback), (choose_program),
	(choose_application), (choose_component),
	(launch_application_from_menu_item), (view_uri_from_menu_item),
	(add_application_to_gtk_menu), (add_component_to_gtk_menu),
	(create_open_with_gtk_menu), (bonobo_launch_application_callback),
	(add_application_to_bonobo_menu),
	(bonobo_open_location_with_viewer_callback),
	(add_component_to_bonobo_menu):
	Reworked to pass around launch_parameters structs instead of other
	bits and pieces of info. Darin will be happy to know that info
	needed for menu item callbacks is now bundled up and passed as
	the callback data instead of sneaking in as gtk_object_data.

2000-06-05  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1118: Generic error message for bogus ftp location

	* src/athena-applicable-views.h: 
	Added ATHENA_NAVIGATION_RESULT_UNDEFINED to enum.
	* src/athena-applicable-views.c: (got_file_info_callback):
	Used this new value to fix bug where early goto was not
	setting result code. Goto considered evil.
	* src/athena-window-manage-views.c:
	(athena_window_end_location_change_callback):
	Added "complain to sullivan@eazel.com" message when an
	unhandled result code is stumbled across.

2000-06-05  Ramiro Estrugo  <ramiro@eazel.com>

	Bug 647.  Should report missing special directories to user.
	
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_directory), (athena_get_desktop_directory),
	(athena_get_user_main_directory):
	Fixed uninitialized static pointers.  Remove FIXME blurbs are
	error checking happens "above" in athena-application now.
	
	* src/athena-application.c:
	(athena_app_check_user_directories), (athena_app_startup):
	Add error checking for missing user directories with appropiate
	FIXME for current bad names for these dirs.
	
2000-06-05  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-file-utilities.c:
	Added FIXME note for bug 1117.
	
2000-06-05  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-string-list.c:
	(athena_string_list_as_concatenated_string),
	(athena_self_check_string_list):
	* libathena-extensions/athena-string-list.h:
	New function.  Return the string list items concatenated into a
	single string delimited by a given delimeter.
	
2000-06-05  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_main_directory):
	don't install the web link set by default
	
2000-06-05  Andy Hertzfeld  <andy@eazel.com>

	* data/linksets/Makefile.am:
	* data/linksets/portals.xml:
	* data/linksets/search_engines.xml:
	added 2 new linksets of web links
	* libathena-extensions/Makefile.am:
	made us link with ghttp
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_main_directory):
	install the search engines linkset by default (temporarily until we have more UI)
	* libathena-extensions/athena-link.c: (load_image_from_http),
	(make_local_path), (athena_link_get_image_uri):
	made links handle remote images by loading them through http using g_http, and
	caching them locally.
	
2000-06-04  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	reorganized the icon theming in the preferences dialog, combining toolbar and
	icon themes into one section, and generalizing toolbar themes to support any
	number of themes.
	* libathena-extensions/athena-global-preferences.h:
	generalized the toolbar icon theme preference from a boolean to a string,
	changing its name to avoid confusion
	* athena-widgets/athena-preferences-item.c:
	(preferences_item_construct), (has_image_file), (add_icon_themes),
	(preferences_item_create_icon_theme),
	(preferences_item_create_toolbar_icon_theme):
	added support for toolbar icon themes and made it more robust for icon themes
	in general, by adding code to check that a candidate directory actually has
	the required icons.
	* athena-widgets/athena-preferences-item.h:
	added a new item type for toolbar themes
	* src/athena-window-toolbars.c: (setup_button),
	(setup_toolbar_images), (athena_window_initialize_toolbars),
	(athena_window_toolbar_remove_theme_callback):
	generalized the toolbar icon switching code to support arbitrary themes instead
	of just two.
	* libathena-extensions/athena-link-set.c:
	(get_link_set_document), (expand_uri), (athena_link_set_install),
	(athena_link_set_remove):
	added link set remove code, which hasn't been tested yet, but will be soon.
	* icons/zoom.png:
	cleaner version of magnifier icon
		
2000-06-04  Ian McKellar  <yakk@yakk.net>

	* athena-widgets/athena-preferences.c:
	(preferences_hash_node_add_callback):
	Little mistake: `char *key; g_assert (key);' Unsurprisingly this
	stopped Athena actually running.

2000-06-02  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_remove_component_from_short_list_for_uri):
	Fixed a component/application typo.

2000-06-02  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_action_type_for_uri):
	Tiny tweak.
	(athena_mime_get_short_list_components_for_uri):
	Fixed a double destroy and a storage leak.

2000-06-02  Andy Hertzfeld  <andy@eazel.com>

	* icons/hand.svg:
	Here's a scaled up version of the services hand to compensate for
	the scale factor introduced in my last checkin
	
2000-06-02  Darin Adler  <darin@eazel.com>

	* data/linksets/desktop.xml:
	* icons/Makefile.am:
	* icons/trash.png: [removed]
	Changed to use the new trash icon Arlo checked in and removed
	the old one.

2000-06-02  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_add_application_to_short_list_for_uri),
	(athena_mime_remove_application_from_short_list_for_uri),
	(athena_mime_add_component_to_short_list_for_uri),
	(athena_mime_remove_component_from_short_list_for_uri):
	Provided implementations for these functions (formerly empty).
	Unfortunately bad things happen when I invoke them. Will
	debug now.
	(id_list_from_application_list), (id_list_from_component_list),
	(gnome_vfs_mime_application_matches_id),
	(gnome_vfs_mime_component_matches_id), (component_has_id_in_list),
	(gnome_vfs_mime_id_in_application_list),
	(gnome_vfs_mime_id_in_component_list): New helper functions all
	used to implement the add/remove functions.

2000-06-02  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog):
	Add a boolean preference for toggling the display of hidden files.

	In order to make space for this one, i moved the remote views one
	to a new tradeoffs pane, which was commandeered by sullivan.
	
2000-06-02  Andy Hertzfeld  <andy@eazel.com>

	added a new theme composed of vector icons, and a generalized theme
	selector in the preferences dialog
	
	* configure.in:
	* icons/Makefile.am:
	* icons/vector/.cvsignore:
	* icons/vector/Makefile.am:
	* icons/vector/i-directory-accept.svg:
	* icons/vector/i-directory.svg:
	* icons/vector/i-regular.svg:
	* icons/vector/i-regular.xml:
	added a new directory for a vector
	
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	changed the type of the icon theme selector to a custom one
	
	* athena-widgets/athena-preferences-item.c:
	(preferences_item_construct),
	(preferences_item_create_font_family), (add_icon_themes),
	(preferences_item_create_icon_theme), (text_item_changed_callback):
	implemented a custom type for icon theme selecting; added a routine
	to iterate through the icons directory to find available themes
	
	* athena-widgets/athena-preferences-item.h:
	defined a custom type for icon theme selection
	
	* src/athena-window-menus.c: (athena_window_initialize_menus),
	(refresh_bookmarks_in_go_menu):
	removed the old code that maintained a menu item for icon
	theme selection now that we have it in preferences
	
	* libathena-extensions/athena-icon-factory.c:
	(load_specific_image_svg):
	changed the default scaling for vector icons to match the
	size that Susan's been drawing them at
	
2000-06-02  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory.c: (uri_get_basename):
	Need to unencode the name here because it's used to compare with
	file names that come from get_file_info.
	
	* src/file-manager/dfos-xfer.c: (get_parent_make_name_list):
	Unescape the result of get_basename to convert it to a plain old
	file name, since that's why gnome_vfs_xfer wants in its file name
	lists (for now, see bug 1107).

	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-file-changes-queue-private.h:
	Removed the private header since it's so private it can be in the
	.c file :-)
	
	* libathena-extensions/athena-file-changes-queue.h:
	* libathena-extensions/athena-file-changes-queue.c:
	(athena_file_changes_queue_new),
	(athena_file_changes_queue_get), (athena_file_change_free),
	(athena_file_changes_queue_free),
	(athena_file_changes_queue_add_common),
	(athena_file_changes_queue_get_change):
	A little simplification and reformatting. Got rid of the details
	indirection since the entire data structure is private.

2000-06-02  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-mime-actions.h,
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_add_application_to_short_list_for_uri),
	(athena_mime_remove_application_from_short_list_for_uri),
	(athena_mime_add_component_to_short_list_for_uri),
	(athena_mime_remove_component_from_short_list_for_uri):
	New prototypes and empty function bodies, convenience
	covers for modifying the short lists. Not yet implemented,
	but callable.
	
	* libathena-extensions/athena-program-chooser.c:
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(add_to_short_list_for_type), (remove_from_short_list_for_type),
	(run_program_configurator_callback): Wired up things so if
	the user switches radio buttons in the "Modify details" dialog,
	the right code is called when they hit OK. But this right code
	doesn't yet do anything.

2000-06-02  Arlo Rose  <arlo@eazel.com>

	* icons/Makefile.am:
	* icons/trash-empty.png:
	* icons/trash-full.png:
	Added the new trash icons

2000-06-02  Anders Carlsson  <andersca@gnu.org>

	* libathena-extensions/athena-icon-container.c (realize): 
	Reduce flicker by setting the back pixmap to NULL on realize.
	
2000-06-02  John Sullivan  <sullivan@eazel.com>

	Finished task 968 (Add one-time viewer choice to "View as"
	menu temporarily)

	* libathena-extensions/athena-view-identifier.h,
	* libathena-extensions/athena-view-identifier.c:
	(athena_view_identifier_copy): New function, does the obvious.
	
	* src/athena-applicable-views.h: Made AthenaNavigationInfo
	store a AthenaViewIdentifier instead of just the iid part
	in initial_content_iid (now initial_content_id).

	* src/athena-applicable-views.c: (set_initial_content_id),
	(got_file_info_callback), (athena_navigation_info_free):
	Reworked code to handle change from char *iid to AthenaViewIdentifier.

	* src/athena-window.h: New field for content_view_id,
	a AthenaViewIdentifier for the current view.

	* src/athena-window-private.h,
	* src/athena-window-manage-views.c:
	(athena_window_load_content_view): Now takes a
	AthenaViewIdentifier * instead of just a char *,
	and resets content_view_id field.
	(athena_window_update_state): Reworked code to handle
	initial_content_iid change.
	
	* src/athena-window.c: 
	(athena_window_destroy): Destroy content_view_id.
	(athena_window_switch_views), (view_menu_switch_views_callback):
	Reworked to take AthenaViewIdentifier * instead of just char *.
	(create_content_view_menu_item): New helper function, extracted 
	from athena_window_load_content_view_menu.
	(replace_special_current_view_in_content_view_menu): New
	function, does the work of putting the current content view
	as the initial item in the menu, followed by a separator.
	(athena_window_synch_content_view_menu): Calls
	replace_special_current_view_in_content_menu if the current view
	is not found in the menu.
	(chose_component_callback): Took out fixed FIXMEs.
	(athena_window_load_content_view_menu): Now calls function
	that was extracted from it.

2000-06-02  Ramiro Estrugo  <ramiro@eazel.com>

	Task 667.  Unhardcode font strings.

	* libathena-extensions/athena-font-factory.c:
	(athena_get_current_font_factory), (athena_font_factory_get),
	(athena_font_factory_new), (athena_font_factory_initialize),
	(athena_font_factory_initialize_class), (font_hash_node_alloc),
	(font_hash_node_free), (font_hash_node_lookup),
	(font_hash_node_lookup_with_insertion),
	(athena_font_factory_get_font_by_family),
	(athena_font_factory_get_font_from_preferences),
	(athena_font_factory_get_fallback_font), (make_font_name_string):
	* libathena-extensions/athena-font-factory.h:
	New class to obtain fonts either by family or from preferences.  A
	specific size can be requested.

	Right now its a pretty dumb class, but it can be enhanced to do
	smart things like looking at gtkstyles and/or smarted choosing of
	fonts if the specifically requested size is not avialable.
	
	* components/hardware/athena-hardware-view.c: (setup_form_title):
	* components/music/athena-music-view.c:
	(athena_music_view_initialize):
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_initialize):
	* components/services/startup/athena-view/athena-service-startup-view.c:
	(setup_form_title):
	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_initialize):
	* src/athena-property-browser.c:
	(athena_property_browser_initialize):
	* src/athena-sidebar-title.c: (athena_index_title_update_info):
	Unhardcode xlfd font strings in all of these and use the font
	factory instead.

2000-06-02  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/fm-list-view.c: (fm_list_handle_dropped_icons):
	Fix a bug that caused a crash when dropping dragged items back 
	in their original location.
	
	* libathena-extensions/athena-drag.c:
	(athena_drag_drag_data_get):
	Tweak whitespace.	

2000-06-02  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-drag.c:
	(athena_drag_finalize): Fix typo that caused us to unref a NULL
	GdkBitmap.
	
	* libathena-extensions/athena-icon-dnd.c:
	(athena_icon_dnd_fini): Fix double-free that caused everything
	to go haywire.
	
	* src/file-manager/fm-directory-view.c:
	(add_component_to_gtk_menu), (add_component_to_bonobo_menu):
	Marked a couple of strings for localization that were missed.

2000-06-02  Darin Adler  <darin@eazel.com>

	* components/services/install/idl/.cvsignore:
	* components/services/time/idl/.cvsignore:
	Ignore some Makefile and Makefile.in files.
	
	* data/linksets/Makefile.am:
	* data/linksets/desktop.xml:
	Added a link set for the trash on the desktop.
	
	* icons/Makefile.am:
	Added a trash icon (actually a copy of the Athena icon right
	now :-).
	
	* libathena-extensions/athena-link-set.h:
	* libathena-extensions/athena-link-set.c: (create_new_link),
	(athena_link_set_install), (athena_link_set_remove):
	Fixed some URI-related issues and added a special case for the ~
	character so we can have link sets that are for the home directory.
	
	* libathena-extensions/athena-string.c:
	(athena_str_capitalize): Got rid of the unneeded call to strlen.
	strlen == 0 is the slowest way I know to check for an empty string.
	Also check islower before calling toupper for paranoia like the
	calls in glib do (internally).
	
	* src/athena-desktop-window.c: (athena_desktop_window_new):
	Install the desktop link set when we are created. For now this
	installs the trash (in a fairly lame way).
	
	* src/athena-property-browser.c: (remove_color),
	(add_color_to_file), (make_properties_from_xml_node),
	(athena_property_browser_update_contents):
	Changed code to not reference "childs" directly so it's easy to
	switch to a new version of gnome-xml.
	
	* test/.cvsignore: Ignore test-athena-mime-actions-set.

2000-06-02  Ramiro Estrugo  <ramiro@eazel.com>

	Task 518.  Support for changing preferences individually
	within each confgurable user level.

	* libathena-extensions/athena-global-preferences.h:
	Change all preferences strings to not include the "/athena"
	prefix.  The prefix is not automatically computed by the prefences
	api taking into account the user level.

	Add (athena_global_preferences_dialog_update) to rebuild the
	preferences dialog when the user level changes.

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_get_dialog),
	(global_preferences_register_sidebar_panels_preferences_for_ui),
	(global_preferences_register_with_defaults),
	(global_preferences_register_boolean_with_defaults),
	(global_preferences_register_string_with_defaults),
	(global_preferences_register_enum_with_defaults),
	(global_preferences_register_for_ui),
	(global_preferences_initialize_if_needed),
	(athena_global_preferences_show_dialog),
	(athena_global_preferences_hide_dialog),
	(athena_global_preferences_set_dialog_title),
	(athena_global_preferences_dialog_update),
	(athena_global_preferences_shutdown):
	remove the user level tracking hack.  We now set default values
	for each of the user levels.

	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_initialize):
	Simplified preference callback api by having a single add_callback
	function.  Use it here.

	* libathena-extensions/athena-list.c:
	(athena_list_initialize):
	Simplified preference callback api by having a single add_callback
	function.  Use it here.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize):
	Simplified preference callback api by having a single add_callback
	function.  Use it here.

	* athena-widgets/athena-preference.c:
	(preference_initialize_if_needed), (preference_hash_node_alloc),
	(preference_hash_node_free_func), (preference_hash_node_free),
	(preference_register), (preference_hash_node_lookup),
	(preference_hash_node_lookup_with_registration),
	(athena_preference_shutdown), (athena_preference_find_by_name),
	(athena_preference_set_info_by_name),
	(athena_preference_enum_add_entry_by_name):
	* athena-widgets/athena-preference.h:
	Move the preference description hash table here from
	athena-preferences.  These are preferences that are expected to
	have nice defaults as well as descriptions and possibly extra data
	for the preferences widgets to use (like enumeration values)

	I moved the tabulation and hashing stuff intactly even though it
	contains many turds.  I plan to fix these soon.
	
	* athena-widgets/athena-preferences-group.c:
	(athena_preferences_group_add_item):
	* athena-widgets/athena-preferences-item.c:
	(preferences_item_construct), (enum_radio_group_changed_callback):
	Update for the above.

	* athena-widgets/athena-preferences.c:
	(preferences_hash_node_alloc), (preferences_hash_node_free),
	(preferences_hash_node_add_callback),
	(preferences_hash_node_remove_callback),
	(preferences_hash_node_check_changes_func),
	(preferneces_callback_node_invoke_func), (preferences_register),
	(preferences_hash_node_lookup_with_registration),
	(preferences_gconf_callback), (user_level_changed_callback),
	(preferences_initialize_if_needed),
	(athena_preferences_add_callback),
	(athena_preferences_set_boolean),
	(athena_preferences_get_boolean),
	(athena_preferences_set_enum), (athena_preferences_get_enum),
	(athena_preferences_set), (athena_preferences_get),
	(athena_preferences_shutdown):
	* athena-widgets/athena-preferences.h:
	Move the tabulation of nice preferences to athena-preference.

	Install one gconf notification for each user level.  Remove all
	the extra unused registration parameters.  

	Use generated keys that take into account the current user level
	to communicato with GConf.

	Keep track of user level changes so that we can compare
	preferences between user levels and fire callbacks accordingly.
	This simplifies the lifes of preferences callers as they can
	continue to install one simple callback as before.  They will get
	notified when a preference changes for whatever reason.  That
	could be the user manaually tweaking it, or a sweeping user level
	change. 

	Again, i tried to keep as much of the original hashing logic
	intact.  It needs cleaning up as well.

	* athena-widgets/athena-user-level-manager.c:
	(athena_user_level_manager_set_default_value_if_needed),
	(athena_user_level_manager_compare_preference_between_user_levels
	):
	* athena-widgets/athena-user-level-manager.h:
	Add a public function to determine whether a preference is the
	same between 2 user levels.

	* athena-widgets/test-athena-preferences.c:
	(register_global_preferences):
	Update to reflect api changes.
	
	* src/athena-window-menus.c: (athena_window_initialize_menus),
	(user_level_changed_callback),
	(get_customize_user_level_setttings_menu_string),
	(update_preferences_dialog_title):
	Update the preferences dialog whenever the user level changes.
	This is an easy way to have the dialog reflect reallity.

	It would be a lot nicer it the contents updated on the fly instead
	of rebuilding the whole thing.  I can do that later.

2000-06-02  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-list.c:
	(athena_list_button_press), (athena_list_button_release),
	(athena_list_motion):
	Fixed a problem where gtk_drag_begin was being called repetitively.
	Made it so that more than one item can be grabbed and dragged in 
	list view.

	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_moved):
	Removed a forgotten g_message.

2000-06-02  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-drag.c:
	* libathena-extensions/athena-drag.h:
	(add_one_gnome_icon_list), (add_one_uri_list),
	(athena_drag_drag_data_get):
	Move more code from athena-icon-dnd.c to the common
	athena-drag.c. Add a common athena_drag_drag_data_get
	function that gets passed iterators and assembles selection
	data.
	
	* libathena-extensions/athena-gtk-extensions.c:
	* libathena-extensions/athena-gtk-extensions.h:
	(athena_gtk_marshal_NONE__POINTER_INT_INT_INT):
	Added more marshalling glue. One day there will be enough
	for everyone.

	* libathena-extensions/athena-icon-dnd.c:
	(athena_icon_container_each_selected_icon):
	(icon_get_data_binder), (each_icon_get_data_binder),
	(drag_data_get_callback):
	Iterators and binders to support the AthenaIconContainer
	flavor of athena_drag_drag_data_get.
	
	* libathena-extensions/athena-list.c:
	* libathena-extensions/athena-list.h:
	* src/file-manager/fm-list-view.c:
	(athena_list_initialize_class), (athena_list_initialize),
	(athena_list_drag_begin), (athena_list_drag_end),
	(athena_list_drag_leave), (athena_list_drag_motion),
	(athena_list_drag_data_received), (athena_list_set_selection),
	(athena_list_each_selected_row),
	(row_get_data_binder), (each_icon_get_data_binder),
	(fm_list_drag_data_get), (create_list):
	Hookup fm_list_drag_data_get to support drags originating from the
	list view. Connect the drag_data_get to fm_list_view and 
	handle it there.

	* libathena-extensions/athena-list.c:
	* src/file-manager/fm-list-view.c:
	(athena_list_initialize_class), (fm_list_handle_dropped_icons):
	Fix an improperly marshalled signal.

2000-06-02  Ramiro Estrugo  <ramiro@eazel.com>

	* components/history/athena-history-view.c: (main):
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_get_dialog),
	(global_preferences_register_for_ui),
	(global_preferences_initialize_if_needed),
	(athena_global_preferences_shutdown):
	* libathena-extensions/athena-global-preferences.h:
	* athena-widgets/athena-preferences-group.c:
	(athena_preferences_group_add_item):
	* athena-widgets/athena-preferences-item.c:
	(preferences_item_construct), (athena_preferences_item_new):
	* athena-widgets/athena-preferences-pane.c:
	(athena_preferences_pane_add_item_to_nth_group):
	* athena-widgets/athena-preferences.c: (preferences_register),
	(set_default_value_if_needed), (preferences_hash_node_lookup),
	(preferences_hash_node_lookup_with_registration),
	(preferences_gconf_callback), (preferences_initialize_if_needed),
	(athena_preferences_find_preference),
	(athena_preferences_set_info),
	(athena_preferences_enum_add_entry),
	(athena_preferences_add_boolean_callback),
	(athena_preferences_add_enum_callback),
	(athena_preferences_add_callback),
	(athena_preferences_set_boolean),
	(athena_preferences_get_boolean),
	(athena_preferences_set_enum), (athena_preferences_get_enum),
	(athena_preferences_set), (athena_preferences_get),
	(athena_preferences_shutdown):
	* athena-widgets/athena-preferences.h:
	* athena-widgets/test-athena-preferences.c: (main),
	(register_global_preferences):
	* src/athena-main.c: (main):
	Once again, back to implicit initialization of preferences stuff.
	It makes things simpler.
	
2000-06-02  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-user-level-manager.c:
	(athena_user_level_manager_get_user_level),
	(athena_user_level_manager_make_gconf_key),
	(athena_user_level_manager_make_current_gconf_key),
	(athena_user_level_manager_get_user_level_as_string):
	* athena-widgets/athena-user-level-manager.h:
	* src/athena-window-menus.c: (get_customize_user_level_string):
	Some dumb fixes.  Use proper guint type for user_level arguments.
	Fix some cut-n-pasted code.  Rename "get_user_level_string" to
	"get_user_level_as_string"
	
2000-06-02  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(do_rpm_install):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new_from_rpm_header):
	* athena-installer/src/Makefile:
	* athena-installer/src/prescript:
	Ensured that the current stuff in cvs builds a working installer.
	(closing bug#969)

2000-06-02  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences.c:
	(athena_preferences_initialize):
	* athena-widgets/athena-user-level-manager.c:
	* athena-widgets/athena-user-level-manager.h:
	No longer need to retrieve the gconf_client from the user level
	manager.  The bug preventing multiple clients has been fixed in
	gconf.	

2000-06-02  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_close_dialog_callback),
	(athena_global_preferences_show_dialog),
	(athena_global_preferences_hide_dialog),
	(athena_global_preferences_set_dialog_title):
	* libathena-extensions/athena-global-preferences.h:
	Add functions for hiding the preferences dialog and changing its
	title.  Also, connect a "closed" signal to prevent the dialog from
	killing itself since its singleton and lives for the entire life
	of the application.
	
	* athena-widgets/athena-user-level-manager.c:
	(athena_user_level_manager_get_user_level),
	(athena_user_level_manager_make_current_gconf_key),
	(athena_user_level_manager_get_user_level_string):
	* athena-widgets/athena-user-level-manager.h:
	Make athena_user_level_manager_get_user_level_string () public.
	
	* src/athena-window-menus.c: (settings_menu_customize_callback),
	(athena_window_initialize_menus), (user_level_changed_callback),
	(update_user_level_menu_items), (get_customize_user_level_string),
	(get_customize_user_level_setttings_menu_string):
	Change the customize menu item's label based on the user level.
	Make it insensitive for the novice user level.  Close the
	preferences dialog when the user level changes to novice.

2000-06-02  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-string.c:
	(athena_str_capitalize), (athena_self_check_string):
	* libathena-extensions/athena-string.h:
	Add a function to capitalize strings along with check tests.

2000-06-02  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_open_uri_callback), (mozilla_is_uri_handled_by_athena):
	Add hook to check which uris are passed back to athena.

2000-06-02  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/docs/installer-dep-check:
	Docs with my scetches on how to redo the rpm-glue to make
	eazel-install-lib autofetch deps.
	
	* components/services/install/command-line/eazel-alt-install.c:
	(eazel_download_progress):
	Borked, but compiles again. Will update when libinstall stabilizes.
	
	* components/services/install/lib/eazel-install-object.c:
	(gtk_marshal_NONE__POINTER_ENUM_POINTER),
	(eazel_install_class_initialize),
	(eazel_install_emit_download_failed),
	(eazel_install_emit_install_failed),
	(eazel_install_emit_uninstall_failed):
	Revamped the install_failed signal to take a PackageData object
	instead of char * name.

	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (download_a_package),
	(download_all_packages), (install_all_packages),
	(uninstall_packages), (uninstall_a_package),
	(build_packagedata_list_from_deps), (do_rpm_install),
	(do_rpm_uninstall), (ensure_deps_are_fetched):
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_destroy_foreach), (categorydata_destroy),
	(packagedata_new_from_rpm_header), (packagedata_destroy_foreach),
	(packagedata_destroy):
	* components/services/install/lib/eazel-install-types.h:
	Doing a lot of hacking to prepare for the autofetch stuff. 
	
	* athena-installer/src/prescript:
	* athena-installer/src/HACKING:
	* athena-installer/src/Makefile:
	* athena-installer/src/Makefile.am:
	* athena-installer/src/callbacks.c: (druid_cancel),
	(begin_install), (druid_finish), (prep_install), (set_images):
	* athena-installer/src/installer.c:
	(append_string_to_window_list), (download_failed),
	(install_failed_foreach), (requeue), (install_failed),
	(gen_report), (installer):
	* athena-installer/src/link.sh:
	* athena-installer/src/main.c:
	Hacking in the installer. This one is borked sine I'm trying to
	figure out the right scheme of reported dep fails. Actually, I
	want the lib to autofetch deps by option, instead of failing them
	Also added stuff to link.sh, so it builds static from scratch,
	strips gzips and adds prescript to the gzexe file. So if you build
	using link.sh, you get a 644 binary which when executed using
	sh ./athena-installer prompts for root password and does the
	magic. Easier for newbies.
	
	* components/services/time/idl/Makefile.am:
	* components/services/install/idl//Makefile.am:
	* components/services/time/Makefile.am:
	* components/services/install/Makefile.am:
	* components/services/install/lib/Makefile.am:
	* components/services/time/service/Makefile.am:
	* components/services/trilobite/idl/Makefile.am:
	* components/services/trilobite/libtrilobite/Makefile.am:
	* components/services/trilobite/sample/service/Makefile.am:
	* configure.in:
	* athena.spec.in:
	* po/POTFILES.in:
	* src/Makefile.am:
	Loads of makefile fixing to make make dist and rpm -ta work.
	
2000-06-02  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-mime-actions.c: Moved static
	functions to bottom of file and prototyped them at the top.
	
	Final portion of task 370 (mime write API)

	* libathena-extensions/athena-mime-actions.h: *
	libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_short_list_components_for_uri,
	athena_mime_set_default_action_type_for_uri,
	athena_mime_set_default_application_for_uri,
	athena_mime_set_default_component_for_uri,
	athena_mime_set_short_list_applications_for_uri,
	athena_mime_set_short_list_components_for_uri,
	athena_mime_extend_all_applications_for_uri,
	athena_mime_remove_from_all_applications_for_uri): Implemented
	(they write the metadata and everything - happy fun).
	(str_list_difference): Helper function compied from gnome-vfs.

	* test/test-athena-mime-actions-set.c: Tests for these
	functions.  
	* test/Makefile.am: Build it.

2000-06-01  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c: (play_file):
	fixed audio previewing, which broke when Darin changed the API to
	gnome_vfs_unescape_string, which now allocates a new string instead
	of modifying the old one.
	* data/linksets/apps.xml:
	added the gimp to the default linkset and removed abiword
	* icons/Makefile.am:
	* icons/netscape.png:
	* icons/gnome-gimp.png:
	* icons/gnome-gnumeric.png:
	added icons for the default linkset
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_main_directory):
	made it install the default linkset when it makes the novice home directory
	* libathena-extensions/athena-file.c:
	(athena_file_contains_text)
	added condition so link files don't contain text
	(athena_file_activate_custom):
	added routine invoked when a file is activated to allow for custom behavior
	for specific types; used to implement command processing for links.
	* libathena-extensions/athena-file.h:
	added athena_file_activate_custom
	* libathena-extensions/athena-link-set.c: (create_new_link),
	(athena_link_set_install):
	made installing linksets work
	* libathena-extensions/athena-link.c:
	(athena_link_get_additional_text), (athena_link_get_image_uri),
	(athena_link_get_link_uri):
	made things work when the file name has special characters
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_activate_file_internal):
	added call to athena_file_activate_custom to allow for custom handling
	
2000-06-01  Gene Z. Ragan  <gzr@eazel.com>

	* libathena/athena-undo-manager.c:
	* libathena/athena-undo-manager.h:
	(athena_undo_manager_get_current_undo_transaction):
	New call to be used internally to get the current undo transaction.
	An example of this call being used is in the menu code that displays
	the current undo operation name.
	
	* libathena/athena-undo-transaction.c:
	(impl_Athena_Undo_Transaction__get_undo_description),
	(impl_Athena_Undo_Transaction__get_redo_description),
	(impl_Athena_Undo_Transaction__get_operation_name),
	(impl_Athena_Undo_Transaction__undo),
	Added actual functionlality to these calls.  They now
	work as advertised.

	(athena_undo_transaction_new),
	Made changed needed to actually use the operation
	name and description that is passed in.

	(athena_undo_transaction_destroy),
	Clean up stored operation name and description strings.

	* src/athena-window-menus.c: 
	(update_undo_menu_item):
	The undo operation name is now displayed in the menu item.

2000-06-01  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-drag.h:
	* libathena-extensions/athena-icon-dnd.c:
	* libathena-extensions/athena-drag.c: 
	* libathena-extensions/athena-list.h:
	* libathena-extensions/athena-icon-dnd.h:
	* libathena-extensions/athena-list.c:
	(athena_drag_init), (athena_drag_finalize),
	(create_selection_shadow), (set_gnome_icon_list_selection),
	(athena_icon_container_dropped_icon_feedback),
	(drag_data_received_callback),
	(athena_icon_container_ensure_drag_data), (drag_end_callback),
	(confirm_switch_to_manual_layout), (handle_local_move),
	(handle_nonlocal_move),
	(athena_icon_container_receive_dropped_icons),
	(athena_icon_dnd_update_drop_target),
	(athena_icon_container_free_drag_data), (athena_icon_dnd_init),
	(athena_icon_dnd_fini), (athena_icon_dnd_begin_drag),
	(drag_drop_callback), (athena_list_initialize),
	(athena_list_destroy),
	(athena_list_drag_begin), (athena_list_drag_data_get),:
	More list view drag&drop work. Move more code from athena-icon-dnd.c
	to the shared nautlus-drag.c file. Split common drag&drop state from 
	AthenaIconDndInfo into AthenaDragInfo.
	
	* libathena-extensions/athena-list.c:
	(athena_list_drag_motion), (athena_list_motion):
	Start hooking up drag-related signals.

	* libathena-extensions/athena-list.c:
	* libathena-extensions/athena-list.h:
	(athena_list_initialize_class):
	Get rid of the unused START_DRAG signal.

2000-06-01  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/fm-icon-view.c: (play_file):
	Fix call to gnome_vfs_unescape_string to match new prototype.

2000-06-01  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c: (play_file):
	fixed bug where sounds that had spaces or other special characters
	in their name wouldn't preview properly; fixed by calling
	gnome_vfs_unescape_string on the uri.
	
	* icons/Makefile.am:
	* icons/computer.svg:
	added a more generic, vector-based computer icon
	* data/top/Computer.link:
	switched the computer link to use the vector icon
	* icons/eazel/i-directory-accept.svg:
	changed the open folder icon to use a nicer one with gradients

2000-06-01  Darin Adler  <darin@eazel.com>

	* components/services/startup/athena-view/athena-service-startup-view.c:
	(gather_config_button_cb), (register_button_cb):
	Fixed callers that were using the escape and unescape calls from
	gnome-vfs. My guess is that these callers don't want exactly what
	they are getting, but at least this makes it compile.

	* src/athena-window-manage-views.c:
	(athena_window_request_location_change):
	There was code here to just unescape. This is not a good idea,
	since it will turn good URIs into bad URIs. On the other hand, we
	may need to do something for basic characters like %20 for better
	readability.

	* athena-widgets/athena-user-level-manager.c:
	(user_level_manager_new),
	(athena_user_level_manager_get_user_level):
	Added some FIXMEs.
	
2000-06-01  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-program-chooser.c:
	(athena_program_chooser_get_type), (compare_mime_applications),
	(compare_component_with_view), (is_component_in_short_list),
	(is_component_in_short_list_for_uri),
	(is_application_in_short_list),
	(is_application_in_short_list_for_uri),
	(is_in_short_list_for_file_type), (is_in_short_list_for_file),
	(update_selected_item_details),
	(run_program_configurator_callback),
	(athena_program_chooser_new),
	(athena_program_chooser_get_application),
	(athena_program_chooser_get_component): Provided real
	implementation for checking whether a program is in the
	file-specific list, just short list, or just full list,
	as used in "View as Other" dialog. These values were
	formerly all hardwired. Still need to add code to
	react to user's changes. Also renamed "Change" button to
	"Modify" when Josh rightly pointed out that "Change" is
	a little ambiguous.

2000-06-01  Maciej Stachowiak  <mjs@eazel.com>

	Completed task 772: Make "View as" menu use short list, not all
	available components
	
	* src/athena-applicable-views.c (got_file_info_callback):
	Changed to use the mime APIs to determine the preferred list and
	default for view components.

	(view_identifier_has_iid, view_identifier_iids_compare): Some
	utility functions.

	Also removed many of the other functions in here that are no
	longer necessary and have effectively moved to
	athena-mime-actions.c
	
2000-06-01  John Sullivan  <sullivan@eazel.com>

	Fixed bug where choosing viewer from "View as Other..."
	dialog from "View as" menu wouldn't update the menu
	title.

	* src/athena-window.c: (athena_window_synch_content_view_menu),
	(view_menu_choose_view_callback),
	(athena_window_load_content_view_menu): Renamed
	"synch_view_as_menu" to "athena_window_synch_content_view_menu".
	* src/athena-window-private.h: Put this function here so it
	can be used in -manage-views.c.
	* src/athena-window-manage-views.c:
	(athena_window_has_really_changed): Call this function to
	fix "View as" menu title when the view but not the location changes.

2000-06-01  Andy Hertzfeld  <andy@eazel.com>

	* icons/eazel/Makefile.am:
	* icons/eazel/Refresh.png:
	* icons/eazel/Stop.png
	added Susan's toolbar button images for reload and stop
	* src/athena-window-toolbars.c: (setup_toolbar_images):
	made reload and stop subject to toolbar icon theming
	
2000-06-01  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(add_component_to_gtk_menu), 
	(add_component_to_bonobo_menu): Call viewers "xxx Viewer"
	in "Open With" submenu.
	(add_open_with_bonobo_menu_item): Use the double-underscore
	trick to avoid getting underlined characters in program names.
	* src/athena-window.c: (chose_component_callback):
	Don't destroy identifier here; caller handles that. Now the
	View as Other choice in the option menu works, with one bug:
	the option menu label isn't updated properly.

2000-06-01  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-mime-actions.c:
	(OAF_ServerInfo__copy): Copy correctly.
	(get_mime_type_from_uri): Handle NULL URIs

2000-06-01  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-metafile.c:
	(athena_directory_set_metadata_list): Added this function.
	The guts was already there.
	
	* test/.cvsignore: Ignore some newly generated files.

2000-06-01  Maciej Stachowiak  <mjs@eazel.com>

	Completed bugizlla task 601, Need API for getting "short list" of
	programs associated with file.

	* libathena-extensions/athena-mime-actions.c
	(athena_mime_get_short_list_applications_for_uri,
	athena_mime_get_short_list_components_for_uri): Implemented
	properly with metadata checking, etc.
	(gnome_vfs_mime_application_has_id,
	gnome_vfs_mime_id_matches_application,
	gnome_vfs_mime_id_matches_component,
	gnome_vfs_mime_application_has_id_not_in_list,
	component_has_id_in_list, string_not_in_list): Helper functions
	for g_list_find_custom and g_list_partition calls.

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_all_applications_for_uri,
	athena_mime_get_all_components_for_uri): Properly implemented w/
	appropriate metadata checking, etc.
	(gnome_vfs_mime_application_has_id): Utility function for
	comparison purposes.

	* libathena-extensions/athena-directory.h,
	libathena-extensions/athena-directory.c:
	(athena_directory_wait_until_ready): Non-asynchronous equivalent
	of `athena_directory_call_when_ready'. However, it doesn't block
	the UI while waiting.
	(athena_directory_wait_until_ready_callback): Helper function
	for implementing the above.

	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_action_type_for_uri,
	athena_mime_get_default_action_for_uri,
	athena_mime_get_default_application_for_uri,
	athena_mime_get_default_component_for_uri): Implemented with
	fully with proper metadata checking and interface querying, etc.

	(athena_mime_get_short_list_applications_for_uri,
	athena_mime_get_short_list_components_for_uri,
	athena_mime_get_all_applications_for_uri,
	athena_mime_get_all_components_for_uri): Adjusted to deal with
	the mime type checking function changing names.

	(OAF_ServerInfo__copy, extract_prefix_add_suffix,
	mime_type_get_supertype, uri_string_get_scheme),
	get_explicit_content_view_iids_from_metafile,
	make_oaf_query_for_explicit_content_view_iids,
	make_oaf_query_with_known_mime_type,
	make_oaf_query_with_uri_scheme_only,
	file_list_to_mime_type_hash_table, free_key,
	mime_type_hash_table_destroy, server_matches_content_requirements,
	athena_do_component_query): Oodles of helper functions, many cut
	& pasted from elswhere and only slightly modified.
	get_mime_type_from_uri: Removed `_hack' from the name.

	* libathena-extensions/athena-mime-actions.h: Added prototype
	for athena_mime_get_default_action_type_for_uri.
	
	* test/test-athena-mime-actions.c (main): Call gnome_init.

	* src/athena-applicable-views.c: Removed a stray comment that no
	longer applies.

2000-05-31  Maciej Stachowiak  <mjs@eazel.com>

	* test/test-athena-mime-actions.c: Simple test program to check
	_for_uri athena metadata calls in athena.
	* test/Makefile.am: Build test-athena-mime-actions
	* Makefile.am, configure.in: add test directory to the build.

	* libathena-extensions/athena-mime-actions.c
	(athena_mime_get_default_action_for_uri,
	athena_mime_get_default_application_for_uri,
	athena_mime_get_default_component_for_uri): Implemented in the
	same temporary stub way as the other calls.

2000-05-31  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 991, large dimension, small size images not scaled properly.  It was
	passing a max size of 1000; fixed by using 96 * zoom_factor
	
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_update_icon):
	pass the icon factory a reasonable max size based on the zoom factor
	* libathena-extensions/athena-icon-factory.c:
	(load_image_for_scaling),
	(athena_icon_factory_get_pixbuf_for_icon):
	set up a reasonable max size, plus fixed a typo where maximum_width was used
	twice instead of maximum_height.
	
2000-05-31  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-mime-actions.h,
	libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_action_for_uri,
	athena_mime_get_default_application_for_uri,
	athena_mime_get_default_component_for_uri,
	athena_mime_get_short_list_applications_for_uri,
	athena_mime_get_short_list_components_for_uri,
	athena_mime_get_all_applications_for_uri,
	athena_mime_get_all_components_for_uri,
	athena_mime_set_default_action_type_for_uri,
	athena_mime_set_default_application_for_uri,
	athena_mime_set_default_component_for_uri,
	athena_mime_set_short_list_applications_for_uri,
	athena_mime_set_short_list_components_for_uri,
	athena_mime_extend_all_applications_for_uri,
	athena_mime_remove_from_all_applications_for_uri): Moved from
	gnome-vfs-handlers.[ch] and renamed from gnome_vfs_mime... to
	athena_mime...
	(get_mime_type_from_uri_hack): Internal helper fucntion moved from
	gnome-vfs-handlers.c
	* libathena-extensions/Makefile.am: Build and install
	athena-mime-actions.c and athena-mime-actions.h repsectively.
	* libathena-extensions/athena-program-chooser.c:
	(populate_program_list):
	* src/file-manager/fm-directory-view.c:
	(create_open_with_gtk_menu), (reset_bonobo_open_with_menu):
	* src/athena-sidebar.c: (athena_sidebar_update_buttons):

2000-05-31  John Sullivan  <sullivan@eazel.com>

	More incremental work to use the new mime-handling API.

	* src/file-manager/fm-directory-view.c:
	(add_open_with_bonobo_menu_item): Now takes callback
	and callback data and uses them for menu item construction.
	(bonobo_launch_application_callback),
	(add_application_to_bonobo_menu),
	(bonobo_open_location_with_viewer_callback),
	(add_component_to_bonobo_menu): Pass along structs containing
	info necessary to launch app or switch viewers. Tragically
	these are leaked due to the lack of DestroyNotify mechanism
	in Bonobo (bug written).
	(reset_bonobo_open_with_menu): Uncomment out list-freeing
	lines now that API is in place.
	(fm_directory_view_chose_component_callback),
	(choose_component): Pass AthenaFile instead of view so we
	can get at the uri in the future when we have API for
	switching locations with specified viewer.

2000-05-31  Andy Hertzfeld  <andy@eazel.com>

	first checkin for link-sets, which are still incomplete and
	not hooked up yet.
	
	* configure.in:
	* data/Makefile.am:
	* data/linksets/.cvsignore:
	* data/linksets/Makefile.am:
	* data/linksets/apps.xml:
	added data directory for link sets and one actual set
	
	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-link-set.c: (make_new_link),
	(athena_link_set_install), (athena_link_set_remove):
	* libathena-extensions/athena-link-set.h:
	first, incomplete implementation of link sets
	
	* src/athena-property-browser.c:
	(athena_property_browser_initialize):
	added a title to the property browser window
	
	* data/browser.xml:
	improved the default colors in the property browser to ones
	suggested by Susan
	
2000-05-31  Seth Nickell  <snickell@stanford.edu>

	* libathena-extensions/athena-directory.c:
	(construct_alternate_metafile_uri), (athena_directory_new):
	* libathena-extensions/athena-file.c: 
	(athena_file_matches_uri), (athena_file_get_uri):
	Changed calls to gnome_vfs_append_path to use the similar
	but more specific gnome_vfs_append_file_name instead.
	
2000-05-31  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_denies_access_permission): Fixed a bug where I
	accidentally treated root as "unable to access anything" instead
	of "able to access everything".
	
	* src/athena-sidebar-tabs.h: Fixed file name in include guard.
	I'll probably need to write a script to find the broken ones.
	
	* src/athena-window-manage-views.c: (handle_unreadable_location):
	Fixed a bug where we unref's a file object before using it.
	
	* src/athena-window-private.h: Got rid of a straggler prototype
	for a nonexistent function.

	* RENAMING: Some are done.
	
2000-05-31  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-sidebar-tabs.c:
	(athena_index_tabs_initialize_class), (draw_one_tab),
	(draw_or_hit_test_all_tabs):

	Honor the gtkstyle font instead of hacking in our own.  Part of
	bug 667.
	
2000-05-31  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-program-chooser.c:
	(populate_program_list), (athena_program_chooser_new),
	(athena_program_chooser_get_application),
	(athena_program_chooser_get_component):
	* libathena-extensions/athena-program-chooser.h:
	* libathena-extensions/athena-program-choosing.c:
	(set_up_program_chooser), (athena_choose_component_for_file),
	(athena_choose_application_for_file): Got rid of enum
	AthenaProgramChooserType, replaced with equivalent but
	more general enum GnomeVFSMimeActionType.

2000-05-31  Darin Adler  <darin@eazel.com>

	* src/athena-application.c: (athena_app_startup):
	Make a new window even when you say --manage-desktop for now,
	because closing the last window or Quit is the only way to get
	rid of the desktop until we do some more work on it.
	
	* src/athena-window-manage-views.c:
	(athena_window_request_location_change):
	Always open in a new window when starting with the desktop.
	
	* src/athena-window.c: (athena_window_goto_uri_callback),
	(athena_window_constructed): Tiny formatting tweak.

2000-05-31  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-mime-type.c,
	* libathena-extensions/athena-mime-type.h:
	Removed these files, which had contained the old stopgap
	mime-type-to-application table.
	* libathena-extensions/Makefile.am: Take removed files out
	of build.
	* src/athena-property-browser.c,
	* src/athena-sidebar.c: Remove #includes for removed files.

2000-05-31  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-program-chooser.c:
	(populate_program_list): Change the way data from program lists
	is freed; this clarifies the code and fixes a double-destroy.
	* src/athena-sidebar.c: (athena_sidebar_update_buttons):
	Don't display "Open With..." button if there are no available
	choices. This fixes part of bug 1044 (need to do the same
	kind of thing for menus). 

2000-05-31  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(start_rubberbanding):
	at Susan's suggestion, made the selection box 25% opaque instead
	of 50% opaque in anti-aliased mode.
	
	* src/file-manager/fm-icon-view.c: (play_file):
	added the "-q" option to mpg123 invocation so it doesn't spew
	stuff to standard output

2000-05-31  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c: 
	(compute_menu_item_info): Initialize *return_sensitivity to
	TRUE; it was uninitialized in some cases.
	(add_application_to_gtk_menu), (create_open_with_gtk_menu):
	Cleaned up list-handling using new gnome-vfs API.
	
	* src/athena-sidebar.c: Removed placeholder local implementation
	of gnome_vfs_mime_application_list_free now that there's a real
	one in gnome-vfs.

2000-05-31  Darin Adler  <darin@eazel.com>

	Another cut on the desktop. Way closer.

	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-generous-bin.h:
	* libathena-extensions/athena-generous-bin.c:
	Added a new class AthenaGenerousBin. This is a GtkBin
	subclass that gives its entire allocation to its child.
	Used both in the widgetry for desktop windows and as a
	base class for AthenaViewFrame for now.
	
	* libathena-extensions/athena-gnome-extensions.c:
	(turn_on_line_wrap_flag), (turn_on_line_wrap_flag_callback):
	Changed to use gtk_container_foreach instead of the old
	gtk_container_children, since I now understand that the
	latter is just a convenience cover for the former.
	
	* src/Makefile.am:
	* src/athena-window-state.c: [removed]
	* src/athena-window-state.h: [removed]
	The only function in here was a wonky one that did goto_uri
	of go_home depending on the parameter. Changed the callers
	and things got clearer anyway.
	
	* src/athena-application.h:
	* src/athena-application.c: (display_caveat),
	(athena_app_startup):
	* src/athena-main.c: (main):
	Changed rules about which windows are created on startup. This
	puts us into a slightly bad state because it's now easy to
	create a desktop window with no way to get rid of it.
	
	* src/athena-desktop-window.h:
	* src/athena-desktop-window.c:
	(athena_desktop_window_initialize_class),
	(athena_desktop_window_initialize), (destroy), (realize):
	A better cut at the desktop window creation that now mostly works.
	
	* src/athena-main.c: (main):
	Changed the "--desktop" option's name to "--manage-desktop".
	
	* src/athena-view-frame.h:
	* src/athena-view-frame.c:
	(athena_view_frame_initialize_class),
	(athena_view_frame_initialize),
	(athena_view_frame_destroy_client),
	(athena_view_frame_destroy),
	(athena_view_frame_construct_arg_set):
	Changed to use AthenaGenerousBin as base class. Also use the
	Athena boilerplate macros.
	
	* src/athena-window-manage-views.c:
	(athena_window_request_location_change):
	Use goto_uri instead of set_initial_state.
	
	* src/athena-window-private.h:
	* src/athena-window.h:
	* src/athena-window.c: (athena_window_go_home):
	Make go_home public and move the actual code needed to go to the
	home package into the function.

	* src/athena-window.c: (athena_window_constructed):
	Reduced the amount of hackery on behalf of the desktop window and
	used the AthenaGenerousBin class.

2000-05-31  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_load_uri),
	(mozilla_content_view_request_location_change):
	Exorcist the moz:// hack.
	
	* components/mozilla/athena-mozilla-content-view.oafinfo:
	Change the protocol from moz to http.

	* src/athena-applicable-views.c:
	Prefer the mozilla component over the ntl-web-browser.
	
2000-05-31  Ramiro Estrugo  <ramiro@eazel.com>

	* components/rpmview/athena-rpm-view.oafinfo:

	"fix" bug 725 by changing the supported uri types of the rpm view
	component to be only "file" since it doesnt grok remote uris.

	Having the rpm view grok remote uris would be a cool, feature.  I
	have resummarized bug 725 to reflect this.
	
2000-05-31  Darin Adler  <darin@eazel.com>

	* RENAMING: Small updates.
	
	* components/help/converters/gnome-info2html2/main.c: (main):
	* components/html/glibwww-init.c: (glibwww_parse_proxy_env):
	* components/html/ntl-web-browser.c: (main):
	* components/loser/content/athena-content-loser.c:
	(ensure_fail_env):
	* components/loser/sidebar/athena-sidebar-loser.c:
	(ensure_fail_env):
	* components/notes/athena-notes.c: (main):
	* libathena-extensions/athena-view-identifier.c:
	(get_lang_list):
	* src/athena-application.c: (athena_app_startup):
	* src/athena-main.c: (main):
	Changed from getenv to g_getenv, even though it makes no
	difference right now, because it's "the right thing to do (tm)".
	
	* components/services/time/athena-view/trilobite-eazel-time-view.h:
	Fixed include (the build was broken for me or anyone who doesn't
	have old .h files sitting around in their install directory).
	
	* libathena-extensions/athena-directory.c:
	(construct_alternate_metafile_uri):
	Use athena_get_user_directory instead of hard-coding the name
	of the user directory.
	
	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_directory), (athena_get_user_main_directory):
	Use #defines instead of global constants since these are things
	that do not change and this is not C++ :-) Added "get_" to the
	names of these functions so they would be verbs instead of nouns.
	(athena_get_desktop_directory): Added this new function for use
	by the desktop code.
	
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(athena_global_preferences_get_enabled_sidebar_panel_view_identifiers),
	(athena_global_preferences_get_disabled_sidebar_panel_view_identifiers),
	(global_preferences_register_sidebar_panels_preferences_for_ui):
	* libathena-extensions/athena-view-identifier.h:
	* libathena-extensions/athena-view-identifier.c:
	(athena_view_identifier_list_free):
	* src/athena-applicable-views.c: (athena_navigation_info_free):
	Changed athena_view_identifier_free_list to *_list_free to match
	other calls with similar names.
	
	* libathena-extensions/athena-global-preferences.c:
	(user_level_changed_callback):
	* libathena-extensions/athena-icon-factory.c:
	(get_themed_icon_file_path):
	* src/file-manager/fm-properties-window.c: (get_property_names):
	* src/athena-bookmark-list.c:
	(athena_bookmark_list_get_file_path):
	* src/athena-property-browser.c:
	(athena_property_browser_drag_data_get), (make_drag_image),
	(remove_color), (remove_background), (remove_emblem),
	(get_xml_path), (add_background_to_browser), (add_color_to_file),
	(emblem_dialog_clicked), (make_properties_from_directory):
	Change to use directory calls by new "get_" names.
	
	* src/Makefile.am: Removed athena.h since it is long gone,
	and fixed spelling of nautlus-window-state.h.
	
	* src/file-manager/.cvsignore: Stop ignoring things that we
	no longer generated.
	
	* src/file-manager/desktop-item.c: [removed]
	* src/file-manager/desktop-item.h: [removed]
	* src/file-manager/desktop-layout.c: [removed]
	* src/file-manager/desktop-layout.h: [removed]
	* src/file-manager/desktop-window.c: [removed]
	* src/file-manager/desktop-window.h: [removed]
	The rest of the code has been harvested from the desktop
	implementation. As I said before we can always recover it if we
	decide we want to reuse it.
	
	* src/file-manager/fm-main.c: [removed]
	This was no longer used and was getting out of date. The file manager
	is now compiled in rather than being a separate process.
	
	* src/athena-desktop-window.c:
	(athena_desktop_window_initialize_class),
	(athena_desktop_window_initialize),
	(athena_desktop_window_new), (realize):
	Another cut at the desktop code. Still not working too well,
	but way further along.
	
	* src/athena-sidebar.h:
	* src/athena-sidebar.c:
	* src/athena-view-frame.c:
	(athena_view_frame_handle_client_destroy_2):
	* src/athena-window-manage-views.c:
	* src/athena-window.h:
	* src/athena-window.c:
	* src/athena-window-private.h:
	Changed the names to use Sidebar instead of IndexPanel.
	Also changed to say sidebar panel instead of meta view in many
	places.

2000-05-31  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-user-level-manager.c:
	(athena_user_level_manager_make_gconf_key),
	(athena_user_level_manager_make_current_gconf_key):
	* athena-widgets/athena-user-level-manager.h:

	New functions to generate keys for the current user level as well
	as any other user level.
	
2000-05-31  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences-pane.c:
	(athena_preferences_pane_destroy), (prefs_pane_construct):

	Fix bug 993.  Some frames in the preferences dialog were too big
	cause the parent vbox was erroneously marked homogenous.
	
2000-05-31  Ramiro Estrugo  <ramiro@eazel.com>

	Remove the user level pane from the preferences dialog.  Place the
	user level choices directly in the settings menu.

	Also uncouple user level from preferences.  User level is no
	longer a preference itself.

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui),
	(user_level_changed_callback),
	(athena_global_preferences_shutdown),
	(athena_global_preferences_startup):
	Remove all of the user level ui stuff.
	
	* athena-widgets/athena-user-level-manager.c:
	(user_level_manager_new), (athena_user_level_manager_initialize),
	(athena_user_level_manager_initialize_class),
	(user_level_manager_destroy), (gconf_get_user_level_string),
	(user_level_set_default_if_needed),
	(gconf_user_level_changed_callback),
	(athena_user_level_manager_get),
	(athena_user_level_manager_set_user_level),
	(athena_user_level_manager_get_user_level):
	Emit the the "user_level_changed" signal from a gconf callback
	instead of "by hand".  Otherwise we are out of whack because of
	gconf asyncness.

	* src/athena-window-menus.c:
	(settings_menu_user_level_radio_group_callback),
	(settings_menu_user_level_customize_callback),
	(settings_menu_customize_callback),
	(athena_window_initialize_menus),
	(user_level_menu_path_to_user_level),
	(user_level_user_level_to_menu_path):
	* src/athena-window.h:
	Remove the "General Settings" menu item.  Replace it with a
	user level chooser as well as current user level customizer.
	
2000-05-31  Fatih Demir	<kabalak@gmx.net>
	
	* athena.desktop: Added the Turkish entries.

2000-05-31  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/time/athena-view/.cvsignore:
	Ignore generated files.
	
2000-05-31  Pavel Cisler <pavel@eazel.com>

	* src/file-manager/dfos-xfer.c: (fs_move_to_trash):
	* src/file-manager/fm-directory-view.c: (fm_directory_is_trash),
	(fm_directory_view_confirm_deletion),
	(fm_directory_view_trash_or_delete_selection),
	(duplicate_callback):
	More work on fallback deletion when move to Trash is not available.
	Display a warning dialog.
	Get rid of commented out code that I'll no longer need.
	Removed FIXMEs that are no longer true.
	
2000-05-30  Mike Fleming  <mfleming@eazel.com>

	* components/services/time/Makefile.am:

	Added simple time view to the build

2000-05-30  Mike Fleming  <mfleming@eazel.com>

	* components/services/time/athena-view/.cvsignore:
	* components/services/time/athena-view/Makefile.am:
	* components/services/time/athena-view/main.c:
	(sample_object_destroyed), (sample_make_object), (main):
	* components/services/time/athena-view/trilobite-eazel-time-view.c:
	(set_status_text), (sync_button_pressed), (url_button_pressed),
	(timediff_button_pressed), (update_time_display),
	(trilobite_eazel_time_view_initialize_class),
	(trilobite_eazel_time_view_initialize),
	(trilobite_eazel_time_view_destroy),
	(trilobite_eazel_time_view_get_athena_view),
	(trilobite_eazel_time_view_load_uri),
	(sample_notify_location_change_callback), (bonobo_sample_callback),
	(sample_merge_bonobo_items_callback):
	*
	components/services/time/athena-view/trilobite-eazel-time-view.h:
	*
	components/services/time/athena-view/trilobite-eazel-time-view.oa
	finfo:
	*
	components/services/time/service/trilobite-eazel-time-service.oafin
	fo:

	Added embarassingly weak simple Athena View for the eazal-time 
	service

2000-05-30  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/audio.png:
	new icon for audio preview feedback; I'm sure Susan will want to improve this.
	* libathena-extensions/athena-icon-canvas-item.c: (map_pixbuf):
	finished off audio preview task 259 by showing an image to indicate previewing audio.
	* src/file-manager/fm-icon-view.c: (play_file), (preview_sound):
	fixed problem with aborting sound previews by calling setsid() and killing the entire group

2000-05-30  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(launch_application_from_menu_item), (add_application_to_gtk_menu),
	(add_component_to_gtk_menu), (create_open_with_gtk_menu),
	(add_open_with_bonobo_menu_item), (add_application_to_bonobo_menu),
	(add_component_to_bonobo_menu), (reset_bonobo_open_with_menu),
	(fm_directory_view_real_update_menus):

2000-05-30  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-types.h:
	* athena-installer/src/callbacks.h:
	* athena-installer/src/support.c: (lookup_widget),
	(create_dummy_pixmap), (create_pixmap), (create_image):
	* athena-installer/src/support.h:
	Added the support files
	
2000-05-30  Eskil Heyn Olsen  <eskil@eazel.com>

	* athena-installer/Makefile.in:
	* athena-installer/src/Makefile.am:
	* athena-installer/src/Makefile.in:
	Removed the Makefile.in's and added the .am instead.
	
2000-05-30  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/dfos-xfer.h:
	* src/file-manager/dfos-xfer.c: (handle_xfer_ok), 
	(fs_delete):
	Added delete calls that set up a gnome-vfs delete operation.

	* src/file-manager/dfos-xfer.c:
	(fs_xfer), (fs_move_to_trash), (fs_empty_trash):
	Changed to use new xfer options making it a little
	clearer which copy engine operation gets to run.

	* src/file-manager/dfos-xfer.c:
	(fs_xfer), (fs_move_to_trash):
	Fixed a leak of the item_names list.
	
	* src/file-manager/dfos-xfer.c: 
	(fs_new_folder):
	Changed to use "untitled folder".
	
	* src/file-manager/fm-directory-view.c:
	(bonobo_menu_move_to_trash_callback),
	(fm_directory_can_move_to_trash),
	(fm_directory_view_trash_or_delete_selection), (trash_callback),
	(compute_menu_item_info), (reset_bonobo_trash_delete_menu),
	(fm_directory_view_real_merge_menus),
	(fm_directory_view_real_update_menus),
	(fm_directory_view_get_context_menu_index):
	Add logic that picks the Delete/Move To Trash menu items depending
	on whether selected items can be moved to Trash or not. Added code
	that decides if items can be moved to Trash from a given folder.  

	* src/file-manager/dfos-corba.c: (convert_options):
	Disabled some dead code.
	
2000-05-30  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install.c:
	(main):
	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_class_initialize), (fetch_remote_package_list),
	(eazel_install_emit_download_progress),
	(eazel_install_emit_download_failed),
	(eazel_install_emit_install_failed),
	(eazel_install_emit_uninstall_failed), (eazel_install_log),
	(eazel_install_open_log):
	Fixed a horribly cut'n'paste bug in the signal bindings. Also
	doing some stuff on making the lib log properly
	
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(download_all_packages), (install_all_packages),
	(uninstall_packages):
	More cleaning out of g_errors, g_asserts and such.
	
	* components/services/trilobite/libtrilobite/Makefile.am:
	* athena-installer/src/Banner_Left.xpm:
	* athena-installer/src/Final_Inside.xpm:
	* athena-installer/src/Final_Top.xpm:
	* athena-installer/src/Makefile:
	* athena-installer/src/Makefile.in:
	* athena-installer/src/Step_3a_Inside.xpm:
	* athena-installer/src/Step_3b_Inside.xpm:
	* athena-installer/src/Step_One_Inside.xpm:
	* athena-installer/src/Step_One_Top.xpm:
	* athena-installer/src/Step_Three_Top.xpm:
	* athena-installer/src/Step_Two_Inside.xpm:
	* athena-installer/src/Step_Two_Top.xpm:
	* athena-installer/src/callbacks.c: (set_images):
	* athena-installer/src/installer.c: (append_name_to),
	(download_failed), (install_failed), (gen_report),
	(dump_failure_info), (installer):
	* athena-installer/src/interface.c: (create_window):
	* athena-installer/src/main.c: (main):
	More work on the installer, especially making it
	use Arlo's graphics and still be a static binary.
	
2000-05-30  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_label_text_aa), (athena_icon_canvas_item_render):
	fixed bug where we would crash when going down to the lowest zoom
	level on the anti-aliased canvas, by checking the drawing conditions
	and exiting if they're not met.
	
2000-05-30  John Sullivan  <sullivan@eazel.com>

	Adapted much of the open-with and view-as code to use
	the new API, whose implementation awaits. This causes 
	us to temporarily lose the command-buttons-in-sidebar 
	feature until the new API's implementation happens.

	Some of these changes are only partially done; I've
	got a list of things to finish still. But feel free 
	to bug me about anything in particular that seems bad.

	* libathena-extensions/athena-program-chooser.h:
	* libathena-extensions/athena-program-chooser.c:
	(populate_program_list): Use real API to add programs
	to list in dialog.
	(athena_program_chooser_new): Remember whether this
	is an application-choosing or component-choosing dialog.
	(athena_program_chooser_get_application),
	(athena_program_chooser_get_component): New functions,
	get the item in the list that the user selected.
	* libathena-extensions/athena-program-choosing.h:
	Change parameter in AthenaApplicationChoiceCallback
	from char * to GnomeVFSMimeApplication.
	* libathena-extensions/athena-program-choosing.c:
	(athena_choose_application_for_file),
	(athena_choose_component_for_file): Get the chosen
	item from the dialog instead of returning a hardwired
	value.
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_chose_application_callback): Take
	GnomeVFSMimeApplication instead of char *.
	(add_open_with_gtk_menu_item): Enable menu items now
	that they work.
	(launch_application_from_menu_item): New function, callback
	used when user picks an app from context menu.
	(view_uri_from_menu_item): New function, callback used
	when user picks a viewer from context menu. 
	(add_application_to_gtk_menu),
	(add_component_to_gtk_menu): New functions, set up menu items.
	(create_open_with_gtk_menu): Use real API to populate
	open_with context menu items.
	(bonobo_menu_select_all_callback), (select_all_callback),
	(fm_directory_view_real_merge_menus):
	Fixed bug where context menu "Select All" didn't work by
	separating bonobo and gtk callbacks.
	* src/athena-sidebar.c:
	(athena_index_panel_chose_application_callback),
	(add_command_buttons), (gnome_vfs_mime_application_list_free),
	(athena_index_panel_update_buttons): Use real API instead
	of hardwired set of buttons for different MIME types. This
	currently means you always get only the "Open with ..." button,
	but the real buttons will reappear once we have our new
	application-choosing scheme in place.

2000-05-30  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c: (play_file),
	(icon_container_preview_callback):
	play it preview a much broader range of sounds using "play"
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_filled_rectangle_aa), (draw_stretch_handles_aa),
	(athena_icon_canvas_item_render):
	draw the stretch handles in anti-aliased mode.  This isn't quite
	finished yet, since there's a bug that makes the icon itself disappear
	
2000-05-30  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/dfos-xfer.h:
	* src/file-manager/dfos-xfer.c: (sync_xfer_callback), (fs_xfer),
	(new_folder_xfer_callback), (fs_new_folder), (fs_move_to_trash),
	(fs_empty_trash):
	New copy engine entry calls supporting New Folder creation.
	Pass NULL to sync_xfer_callback because it doesn't use any pass-thru
	state.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class),
	(bonobo_menu_new_folder_callback), (start_renaming_item),
	(new_folder_rename_later), (new_folder_done),
	(fm_directory_view_new_folder), (compute_menu_item_info),
	(fm_directory_view_real_create_selection_context_menu_items),
	(reset_bonobo_open_with_menu),
	(fm_directory_view_real_merge_menus),
	(fm_icon_view_start_renaming_item),
	(fm_icon_view_initialize_class):
	Add the "New Folder" command. Add a menu item that invokes it.
	Add code to allow me to select the new folder once it was 
	created and start a rename on it.
	

Tue May 30 11:21:31 2000  Raph Levien  <raph@acm.org>

	* librsvg/art_render.h:
	* librsvg/art_render.c:
	* librsvg/art_render_svp.h:
	* librsvg/art_render_svp.c:
	* librsvg/art_render_gradient.h:
	* librsvg/art_render_gradient.c: Changed version number test to
	2.3. This will avoid build problems against latest
	gnome-libs-1-0 libart_lgpl.

2000-05-30  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences.c:
	(athena_preferences_initialize):
	Instead of creating our own gconf client, share one with the user
	level manager.  Otherwise i get weird gconf connection errors.

	* athena-widgets/athena-user-level-manager.c:
	(user_level_manager_new),
	(athena_user_level_manager_initialize_class),
	(user_level_manager_ensure_global_manager),
	(user_level_set_default_if_needed),
	(athena_user_level_manager_get),
	(athena_user_level_manager_get_user_level),
	(athena_user_level_manager_get_user_level_names),
	(athena_user_level_manager_get_gconf_client):
	* athena-widgets/athena-user-level-manager.h:
	Add method to expose a refed gconf client.
	Change the global manager initialization code to prevent stoopid
	infinite loop.  Let gconf know about the ~/.gconf/athena
	directory.  
	
2000-05-30  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Fix bug 724 by adding a slightly better, but still lame mozilla
	detection artificial intelligence.

2000-05-30  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-user-level-manager.c:
	(user_level_manager_new), (athena_user_level_manager_initialize),
	(athena_user_level_manager_initialize_class),
	(user_level_manager_destroy),
	(user_level_manager_get_global_manager),
	(user_level_manager_is_initialized), (get_gconf_user_level_string),
	(user_level_set_default_if_needed),
	(athena_user_level_manager_get),
	(athena_user_level_manager_set_user_level),
	(athena_user_level_manager_get_user_level),
	(athena_user_level_manager_get_num_user_levels),
	(athena_user_level_manager_get_user_level_names):
	* athena-widgets/athena-user-level-manager.h:
	New class to manage user level stuff.
	
	* libathena-extensions/athena-global-preferences.c:
	(athena_global_preferences_startup):
	* athena-widgets/Makefile.am:
	* athena-widgets/athena-preferences.c:
	(athena_preferences_initialize):
	* athena-widgets/athena-preferences.h:
	* athena-widgets/test-athena-preferences.c: (main):
	Undo the last stoopid change cuz the user level stuff is now
	hidden in the AthenaUserLevelManager class.
	
2000-05-30  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-drag.c:
	* libathena-extensions/athena-drag.h:
	(athena_drag_items_local), (athena_drag_can_accept_item),
	(athena_drag_can_accept_items):
	More drag&drop support calls shared between list and icon view.
	
	* libathena-extensions/athena-icon-dnd.c:
	(athena_icon_container_selection_items_local),
	(receive_dropped_keyword),
	(athena_icon_container_receive_dropped_icons),
	(athena_icon_dnd_update_drop_target):
	Remove calls that are replaced by athena-drag.c equivalents.
	Tweak some whitespace.

	* libathena-extensions/athena-gtk-extensions.c:
	* libathena-extensions/athena-gtk-extensions.h:
	(athena_gtk_marshal_NONE__INT_INT_INT):
	Add some more signal glue.
	
	* libathena-extensions/athena-list.h:
	* libathena-extensions/athena-list.c:
	(athena_list_initialize_class), (athena_list_drag_drop),
	(athena_list_row_at):
	Add more drop handling. Add signal that sends of dropped data
	and context to fm-list-view.c. Added athena_list_row_at
	that fm-list-view.c needs to handle the drop.
	
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c: (icon_view_can_accept_item),
	(icon_view_get_container_uri), (icon_view_move_copy_items),
	(create_icon_container), (fm_directory_view_get_uri), 
	(fm_directory_view_move_copy_items),
	(fm_directory_view_can_accept_item):
	Rework public calls to not take a container view as an argument
	and can be used by both list and icon view classes.
	Add new private signal handler callbacks that replace the 
	public calls.
	
	* src/file-manager/fm-list-view.c: (fm_list_athena_file_at),
	(fm_list_handle_dropped_icons), (create_list):
	Drop handling code.

2000-05-30  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences-group.c:
	(athena_preferences_group_add_item):
	* athena-widgets/athena-preferences-item.c:
	(preferences_item_construct), (enum_radio_group_changed_callback):
	* athena-widgets/athena-preferences.c:
	(athena_preferences_find_preference):
	* athena-widgets/athena-preferences.h:

	Rename (athena_preferences_find_preference) to 
	(athena_preferences_find_preference) to avoid confusion with a
	function ill add next.
	
2000-05-30  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(athena_global_preferences_startup):
	* athena-widgets/athena-preferences.c:
	(preferences_hash_node_alloc), (preferences_hash_node_free),
	(preferences_hash_node_add_callback),
	(preferences_hash_node_remove_callback),
	(preferences_hash_node_free_func),
	(preferneces_callback_node_alloc),
	(preferneces_callback_node_free),
	(preferneces_callback_node_free_func),
	(preferneces_callback_node_invoke_func), (preferences_register),
	(athena_preferences_get_preference),
	(athena_preferences_set_info), (set_default_value_if_needed),
	(athena_preferences_enum_add_entry),
	(preferences_hash_node_lookup),
	(preferences_hash_node_lookup_with_registration),
	(preferences_gconf_callback),
	(athena_preferences_add_boolean_callback),
	(athena_preferences_add_enum_callback),
	(athena_preferences_add_callback),
	(athena_preferences_remove_callback),
	(athena_preferences_set_boolean),
	(athena_preferences_get_boolean),
	(athena_preferences_set_enum), (athena_preferences_get_enum),
	(athena_preferences_set), (athena_preferences_get),
	(athena_preferences_initialize),
	(athena_preferences_is_initialized),
	(athena_preferences_shutdown):
	* athena-widgets/athena-preferences.h:
	* athena-widgets/test-athena-preferences.c: (main):

	Cleanup preferences to make the code easier to modify.  Name
	things more consistently.  Put global variables in a struct to
	make then clearly distiguishable from local ones.  

	Also, add change the initialize api to be fed the number of user
	levels and their names.  More on this later.
	
2000-05-30  Ramiro Estrugo  <ramiro@eazel.com>

	* components/history/athena-history-view.c: (main):
	* libathena-extensions/athena-global-preferences.c:
	(athena_global_preferences_startup):
	* libathena-extensions/athena-global-preferences.h:
	* src/athena-application.c: (athena_app_class_init):
	* src/athena-main.c: (main):

	Change preferences startup code to occur in only one place.
	
2000-05-29  Raph Levien  <raph@acm.org>

	* librsvg/art_render_gradient.c (art_render_gradient_setpix): Fixed
	an off-by-one loop error.

2000-05-29  Andy Hertzfeld  <andy@eazel.com>

	implemented task 259, simple UI for previewing sounds.  Implemented by
	making the icon container emit a preview signal on mouse-over, then connecting
	to it in fm-icon-view to inspect the mime-type and launch/kill a sound player.
	Currently only works for mp3 files, but others types are coming soon.
	
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_marshal_INT__POINTER_INT):
	* libathena-extensions/athena-gtk-extensions.h:
	added new marshaller to handle our "preview" signal
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_event):
	generate the preview signal when the mouse enters and leaves the icon
	
	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-icon-container.h:
	(athena_icon_container_initialize_class),
	(athena_icon_container_emit_preview_signal):
	support for the preview signal
	
	* src/file-manager/fm-icon-view.c: (play_file), (preview_sound),
	(icon_container_preview_callback), (create_icon_container):
	receive the preview signal and inspect the mime type.  Right now we
	just handle mp3s.  Use a timeout to delay, current set at 1000 ms.
	When the timeout fires, launch a player.  If we leave the icon, kill the
	timeout and player as necessary.
	
2000-05-29  Raph Levien  <raph@acm.org>

	This commit adds the ability to render SVG gradients to librsvg.
	The full imaging model is supported. However, coordinate handling
	is still a subset of the SVG spec. In particular, only
	gradientUnits = userSpace is supported, and coordinates can only
	be specified in user units (ie not percentages or other CSS
	dimensions). Nonetheless, this level of functionality should be
	adequate for rendering gradient-containing images converted from
	Illustrator.

	* librsvg/art_render.c:
	* librsvg/art_render.h:
	* librsvg/art_render_gradient.c:
	* librsvg/art_render_gradient.h:
	* librsvg/art_render_svp.c:
	* librsvg/art_render_svp.h: Added these files, which provide
	features of Libart 2.3.0 (ie, cvs HEAD as of today) conditionally
	on systems with 2.2.0 (ie, cvs gnome-libs-1-0 as of today)
	installed.

	* librsvg/art_rgba.c:
	* librsvg/art_rgba.h:
	* librsvg/art_rgba_svp.c:
	* librsvg/art_rgba_svp.h: Removed these libart source files, as
	they are no longer used (rgba compositing is done in art_render
	now).

	* librsvg/rsvg.c: Numerous changes to accomodate new paint server
	approach (based on libart's new modular rendering architecture).

	* librsvg/rsvg-defs.h:
	* librsvg/rsvg-defs.c: Added these files, containing utility
	functions for managing SVG defs.

	* librsvg/rsvg-css.h:
	* librsvg/rsvg-css.c: Added these files. Moved all CSS parsing
	functions of rsvg.c here.

	* librsvg/rsvg-paint-server.h:
	* librsvg/rsvg-paint-server.c: Added these files. Filling and
	stroking are now done through the paint server abstraction
	rather than direct calls to Libart.

	* librsvg/test.svg: Added this test file containing some SVG
	gradients.

	* librsvg/Makefile.am: Added new files.

	* librsvg/test-rsvg.c (main): Added multiple iteration option, for
	memory leak testing.

2000-05-29  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-list.c:
	(athena_list_drag_drop): Removed unused variable.

2000-05-29  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-drag.c:
	* libathena-extensions/athena-drag.h:
	* libathena-extensions/athena-icon-dnd.c:
	* libathena-extensions/athena-icon-dnd.h:
	* libathena-extensions/athena-list.c:
	(athena_drag_selection_item_new), (drag_selection_item_destroy),
	(athena_drag_destroy_selection_list),
	(athena_drag_build_selection_list),
	(create_selection_shadow),
	(athena_icon_container_dropped_icon_feedback),
	(drag_data_received_callback),
	(athena_icon_container_ensure_drag_data), (drag_end_callback),
	(athena_icon_container_selection_items_local),
	(athena_icon_canvas_item_can_accept_items), (handle_local_move),
	(handle_nonlocal_move),
	(athena_icon_container_receive_dropped_icons),
	(athena_icon_container_free_drag_data), (athena_icon_dnd_fini),
	(drag_drop_callback), (athena_list_initialize), (athena_list_drag_end),
	(athena_list_drag_leave), (athena_list_drag_drop),
	(athena_list_drag_data_received):
	Start splitting out drag&drop code common between icon view and list view
	into a new file.
	Start adding drag&drop calls to list view.
	Bunch of renamings.

2000-05-29  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-string-list.c:
	(athena_string_list_get_index_for_string),
	(athena_self_check_string_list):
	* libathena-extensions/athena-string-list.h:
	New function to access the index for a given string.
	
2000-05-29  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-clean.sh:
	Update for latest ntl-* -> athena-* renaming.  Keep the old ntl-
	names as well to prevent stale component braindamage.
	
2000-05-29  Ramiro Estrugo  <ramiro@eazel.com>

	* components/history/.cvsignore:
	* components/notes/.cvsignore:
	* components/services/time/command-line/.cvsignore:
	Ignore generated files.
	
2000-05-29  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-string-picker.c,
	* athena-widgets/athena-string-picker.h:
	New widget to pick a string from a list.
	
	* athena-widgets/test-athena-preferences.c:
	New test program.  Test prefrences things.

	* athena-widgets/test-athena-widgets.c:
	Remove preference tests.  Test only non preference widgetry.

	* athena-widgets/Makefile.am,
	* athena-widgets/.cvsignore:
	Add test-athena-preferences.	

2000-05-28  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-string-list.h,
	* libathena-extensions/athena-string-list.c:
	(athena_string_list_as_g_list): New function to return the
	string list as a GList. 	

2000-05-28  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-global-preferences.h:
	Remove unneeded inclusion of athena-string-list.h
	
	* libathena-extensions/athena-global-preferences.c:
	Fix a user visible typo in appearance/graphics.
	Add a better description for the sidebar panels pane (bug 304)

2000-05-28  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 604, handle dropped files in sidebar by setting location.  Followed
	Maciej's suggestion of making sidebar work like the location bar, emitting the
	"location_changed" signal and making the window attach to it.
	
	* src/athena-sidebar.c: (athena_index_panel_initialize_class),
	(receive_dropped_uri_list):
	added a location_changed signal, and emitted it when receiving a dropped uri
	* src/athena-sidebar.h:
	added slot for the location_changed signal
	* src/athena-window.c: (athena_window_constructed):
	connect window to sidebar's location_changed signal
	
2000-05-28  Andy Hertzfeld  <andy@eazel.com>

	added a preference for alternative toolbar icons, which defaults to the
	standard Gnome icons.
	
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	added a checkbox for alternative toolbar icons in appearance pane	
	* libathena-extensions/athena-global-preferences.h:
	added ATHENA_PREFERENCES_EAZEL_TOOLBAR_ICONS
	
	* src/athena-window-private.h:
	added field to remember home button	
	* src/athena-window-toolbars.c: (remember_buttons),
	(setup_button), (setup_toolbar_images),
	added code to change the button images according to the preference
	(athena_window_initialize_toolbars),
	restructured to choose proper icons, and added a callback to watch the preference
	(athena_window_toolbar_remove_theme_callback):
	* src/athena-window.c: (athena_window_destroy):
	* src/athena-window.h:
	made it remove the preference callback when the window is destroyed
	
	* icons/eazel/Makefile.am:
	* icons/eazel/Back.png:
 	* icons/eazel/Forward.png:
	* icons/eazel/Up.png:
	* icons/eazel/Home.png:
 	added Susan's icons to eazel images folder

2000-05-28  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-sidebar-tabs.c: (athena_index_tabs_add_view),
	(athena_index_tabs_remove_view),
	(athena_index_tabs_set_visible):
	* src/athena-window.c:
	(window_update_sidebar_panels_from_preferences):

	g_warning with trailing \n == EVIL! - fix.

2000-05-28  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_register_for_ui):
	* athena-widgets/athena-preferences.c:
	(athena_preferences_set_boolean),
	(athena_preferences_set_enum), (athena_preferences_set):

	Make sure the preference values are indeed different than the
	currently stored ones.  Otherwise, bogus callbacks get emitted
	causing innefecient (and unneeded!) things such as directories
	reloading.
	
2000-05-28  Pavel Cisler  <pavel@eazel.com>

	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	Fix an accent.

2000-05-27  Pavel Cisler  <pavel@eazel.com>

	* src/athena-application.c: (athena_app_quit):
	Used the fixed-up gnome_vfs_shutdown to properly synchronize 
	with GnomeVFS threads that are still finishing up. Got rid of
	athena_app_real_quit and the other hacky code that I used
	to do this before gnome_vfs_shutdown was working properly.
	Got rid of a bunch of FIXMEs that are now take care of.

	* libathena-extensions/athena-directory-async.c:
	(cancel_directory_counts), (top_left_read_close),
	(cancel_top_left_read), (athena_metafile_read_cancel),
	(start_getting_directory_counts), (start_getting_top_lefts):
	Added cancel calls to the different GnomeVFS async tasks that
	can be running when opening a Athena window, called them
	from the AthenaDirectory destroy call.
	
	Athena now shuts down GnomeVFS jobs cleanly during a quit. 
	There is still a problem where in some cases it will take a 
	while before the async jobs go away. This seems to be because
	the corresponding AthenaDirectory doesn't get destroyed right
	away when a window is closed. I need to get Darin to help me fix
	this. 

2000-05-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_uninstall):
	* components/services/install/lib/eazel-install-public.h:
	Added eazel_install_uninstall call to the gtk+ object. This
	opened a can of worms reg. error during uninstall, which is
	also relevant to install. See bug#1024.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (download_a_package),
	(download_all_packages), (install_all_packages),
	(uninstall_packages), (uninstall_a_package), (do_rpm_uninstall),
	(rpm_uninstall):
	More passing around of a EazelService object. And more sane
	errorhandling to avoid the lib causing an exit.
	
	* athena-installer/src/installer.c: (installer):
	Partial uninstall support.

2000-05-27  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/time/command-line/Makefile.am:
	* components/services/time/service/trilobite-eazel-time-service.c:
	(trilobite_eazel_time_service_initialize):
	The eazel-time service cli binary is now called eazel-time.
	Default maxdiff is now set to 180 secs.
	
2000-05-27  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-scroll-frame.c,
	libathena-extensions/athena-scroll-frame.h: Removed these
	unused files.
	* libathena-extensions/Makefile.am: Remove them from the build.

	* Renamed files as follows, as per RENAMING: 
	components/history/ntl-history-view.c -> components/history/athena-history-view.c
	components/history/ntl-history-view.oafinfo -> components/history/athena-history-view.oafinfo
	components/notes/ntl-notes.c -> components/notes/athena-notes.c
	components/notes/ntl-notes.oafinfo -> components/notes/athena-notes.oafinfo
	libathena-extensions/gtkscrollframe.c -> libathena-extensions/athena-scroll-frame.c
	libathena-extensions/gtkscrollframe.h -> libathena-extensions/athena-scroll-frame.h
	libathena/athena-view-frame.c -> libathena/athena-view.c
	libathena/athena-view-frame.h -> libathena/athena-view.h
	src/athena-index-tabs.c -> src/athena-sidebar-tabs.c
	src/athena-index-tabs.h -> src/athena-sidebar-tabs.h
	src/athena-index-title.c -> src/athena-sidebar-title.c
	src/athena-index-title.h -> src/athena-sidebar-title.h
	src/athena-zoomable-frame-svr.c -> src/athena-zoomable-frame-corba.c
	src/ntl-app.c -> src/athena-application.c
	src/ntl-app.h -> src/athena-application.h
	src/ntl-index-panel.c -> src/athena-sidebar.c
	src/ntl-index-panel.h -> src/athena-sidebar.h
	src/ntl-main.c -> src/athena-main.c
	src/ntl-miniicon.c -> libathena-extensions/athena-mini-icon.c
	src/ntl-miniicon.h -> libathena-extensions/athena-mini-icon.h
	src/ntl-uri-map.c -> src/athena-applicable-views.c
	src/ntl-uri-map.h -> src/athena-applicable-views.h
	src/ntl-view-bonobo-control.c -> src/athena-view-frame-bonobo-control.c
	src/ntl-view-bonobo-subdoc.c -> src/athena-view-frame-bonobo-embeddable.c
	src/ntl-view-frame-svr.c -> src/athena-view-frame-corba.c
	src/ntl-view-athena.c -> src/athena-view-frame-athena-view.c
	src/ntl-view-private.h -> src/athena-view-frame-private.h
	src/ntl-view.c -> src/athena-view-frame.c
	src/ntl-view.h -> src/athena-view-frame.h
	src/ntl-window-msgs.c -> src/athena-window-manage-views.c
	src/ntl-window-msgs.h -> src/athena-window-manage-views.h
	src/ntl-window-private.h -> src/athena-window-private.h
	src/ntl-window-state.c -> src/athena-window-state.c
	src/ntl-window-state.h -> src/athena-window-state.h
	src/ntl-window.c -> src/athena-window.c
	src/ntl-window.h -> src/athena-window.h

	* components/history/Makefile.am, components/notes/Makefile.am,
	libathena-extensions/Makefile.am, libathena/Makefile.am,
	po/POTFILES.in, src/Makefile.am,
	components/hardware/athena-hardware-view.h,
	components/loser/content/athena-content-loser.h,
	components/loser/sidebar/athena-sidebar-loser.h,
	components/mozilla/athena-mozilla-content-view.h,
	components/music/athena-music-view.h,
	components/rpmview/athena-rpm-view.h,
	components/sample/athena-sample-content-view.h,
	components/services/startup/athena-view/athena-service-startup-view.h,
	libathena/libathena.h, src/athena-desktop-window.h,
	src/athena-window-menus.c, src/athena-window-toolbars.c,
	src/file-manager/fm-directory-view.h : Updated for renamings.

	* RENAMING: removed old renamings

2000-05-26  Eskil Heyn Olsen  <eskil@eazel.com>

	* athena-installer/Makefile:
	* athena-installer/Makefile.am:
	* athena-installer/Makefile.in:
	* athena-installer/athena-installer.c:
	* athena-installer/athena-installer.glade:
	* athena-installer/src/HACKING:
	* athena-installer/src/Makefile:
	* athena-installer/src/Makefile.in:
	* athena-installer/src/callbacks.c: (druid_cancel),
	(begin_install), (druid_finish), (prep_install):
	* athena-installer/src/installer.c: (eazel_install_progress),
	(eazel_download_progress), (installer):
	* athena-installer/src/installer.h:
	* athena-installer/src/interface.c: (create_window):
	* athena-installer/src/interface.h:
	* athena-installer/src/main.c: (main):
	Added the first pieces if the GUI installer. Since we don't want
	it to be part of the built, I've committed the generated makefiles
	as well. This also means you should be able to build it straigt
	from cvs. It already has base functionality, and is almost 70% done.
	
2000-05-26  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-alt-install.c:
	(set_parameters_from_command_line), (eazel_install_progress),
	(eazel_download_progress), (main):
	Don't build eazel-install, only eazel-alt-install, which
	uses the EazelInstall object.
	
	* components/services/install/lib/eazel-install-object.c:
	(impl_Eazel_Install_new_packages), (eazel_install_get_epv),
	(eazel_install_destroy), (eazel_install_set_arg),
	(eazel_install_class_initialize),
	(eazel_install_create_corba_object), (eazel_install_initialize),
	(eazel_install_get_type), (eazel_install_new),
	(eazel_install_new_with_config), (create_temporary_directory),
	(fetch_remote_package_list), (eazel_install_emit_install_progress),
	(eazel_install_emit_download_progress),
	(eazel_install_new_packages):
	Implemented a GTK+ object for libinstall. It has the basic
	functionality needed for the May 31st gui installer. This means it
	can be instantiated, the install and transferoptions be set and it
	can do the download of the packagelist, and download and install
	the files mentioned there. Needs upgrade & uninstall, plus a lot
	of errorchecking and memleaks (bug#982). This halfway completed bug#980.
	
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (download_a_package),
	(download_all_packages), (install_all_packages),
	(uninstall_packages), (rpm_show_progress), (do_rpm_install),
	(rpm_install):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	Did a lot of hacking and slashing to pass the EazelInstall object
	downwards so progress signals can be emitted. Also a lot of
	errorhandling was fixed so it doesn't just g_assert or such.
	But a lot more of that is needed (bug#1014) and some major
	slashing so the EazelInstall passing isn't so ugly (bug#980).
	
2000-05-26  Darin Adler  <darin@eazel.com>

	A little more desktop window work.

	* src/athena-desktop-window.c:
	(athena_desktop_window_initialize_class),
	(athena_desktop_window_initialize),
	(athena_desktop_window_new):
	* src/athena-desktop-window.h:
	* src/ntl-app.c: (athena_app_startup), (athena_app_quit),
	(athena_app_create_window):
	* src/ntl-app.h:
	* src/ntl-main.c: (main):
	Made a desktop window that's created when you start the program
	if you pass the --desktop option. At the moment it's a normal
	window and not set up to take over the desktop.

	* libathena-extensions/athena-glib-extensions.c:
	(athena_self_check_glib_extensions): Fixed some broken self-
	checks. Now we have one really broken self-check in the
	athena-directory.c file. I might turn that one off soon so we
	can at least run the others.
	
	* libathena-extensions/athena-gtk-macros.h:
	Changed how some of the macros work. Few of these macros were used
	in Athena. I hope they aren't used in the Mozilla component,
	because then I broke it.
	
	* libathena-extensions/athena-list-column-title.c:
	(athena_list_column_title_motion),
	(athena_list_column_title_button_press),
	(athena_list_column_title_button_release):
	Updated to use ATHENA_INVOKE_METHOD instead of ATHENA_KLASS,
	because I renamed it to ATHENA_CLASS and had to change these
	anyway.
	
	A little sweep for code that should be using
	CORBA_Object_is_nil instead of direct compares with
	CORBA_OBJECT_NIL.
	
	* components/html/main.c: (url_requested_cb):
	* libathena-extensions/bonobo-stream-vfs.c:
	(bonobo_stream_create):
	* libathena/athena-undo-manager.c:
	(set_up_bonobo_control):
	* libathena/athena-undoable.c: (athena_undo_register_full),
	(athena_undo_unregister), (athena_undo):
	* src/file-manager/dfos.c: (dfos_new):
	Switch to use CORBA_Object_is_nil.

	* libathena/athena-undo-manager.c: (undo_manager_unref),
	(athena_attach_undo_manager), (athena_share_undo_manager),
	(set_up_bonobo_control):
	Do some missing duplicate and release calls.
	
	* libathena/athena-undoable.c: (athena_undo_unregister):
	Fix a place where we'd keep a reference to a freed list.
	Change O(n^2) walk of list by index to O(n) walk by pointer.
	
	* src/ntl-index-panel.c: (athena_index_panel_remove_meta_view):
	Changed g_warning to a g_return_if_fail, which was designed for
	cases just like this one.
	
	* src/ntl-view-bonobo-subdoc.c:
	(bonobo_subdoc_notify_location_change):
	Put in a better version of the FIXME.

	* RENAMING: More updates.

2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>

	Add support for toggling sidebar panels on the fly via the
	preferences dialog.

	Also moved function prototypes and macro definitions to top of
	file.

	* src/ntl-window.c: (impl_Athena_ViewWindow__create),
	(athena_window_remove_meta_view):
	Removed the *_real cruft.  Cleaned this a tiny bit.
	
	(window_find_sidebar_panel_by_identifier):
	New function for finding panels given an identifiers.
	
	(window_update_sidebar_panels_from_preferences):
	New function to update the current list of sidebar panels from
	preferences. 
	Disabled panels are removed if they are already in the list.
	Enabled panels are added if they are not already in the list.

	NOTE: It would be 'nice' if in the future all updates of the
	sidebar panel occur in just one place - the above function for
	example.  This is in contrast to the current mess where both
	ntl-window.c and ntl-window-msgs.c abuse the meta_views list at
	random places.  Ill look into this later.

	(sidebar_panels_changed_callback):
	Now actually responds to changes.
	
	* src/ntl-window.h:
	Style dumbness.
	
2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(athena_global_preferences_get_enabled_sidebar_panel_view_identifiers),
	(athena_global_preferences_get_disabled_sidebar_panel_view_identifiers):
	* libathena-extensions/athena-global-preferences.h:

	Add a function that returns the disabled sidebar panels.  Needed
	so that on-the-fly sidebar panel toggling can be smart about
	adding and removing views.

	Also rename some variabled to make it obvious which are the enabled
	and disabled lists.
	
2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>

	* src/ntl-index-panel.c: (athena_index_panel_remove_meta_view):
	Remove the tab associated with meta view as well.  Add a warning
	for the case when the page_num is bogus.  Perhaps this should be
	an assertion.  But at least this way it wont fail silently.
	
2000-05-26  John Sullivan  <sullivan@eazel.com>

	* src/ntl-view-bonobo-subdoc.c:
	(bonobo_subdoc_notify_location_change):
	Added a FIXME to the line that Dan Winship says should
	be passing a MIME type but is currently passing "".

2000-05-26  John Sullivan  <sullivan@eazel.com>

	Fixed bug 992 ("Fully Decorate Remote Views" is not a 
	sensible preference). Note that before making the
	quick wording fix Darin, Ian, and I came up with a
	longer-term plan for handling this general kind of
	thing well (bug 995).

	* libathena-extensions/athena-global-preferences.h:
	* libathena-extensions/athena-directory-async.c:
	(state_changed):
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file):
	Changed "Fully Decorate Remote Views" to "Display text in
	icons even for remote text files"
	Changed ATHENA_PREFERENCES_REMOTE_VIEWS to
	ATHENA_PREFERENCES_SHOW_TEXT_IN_REMOTE_ICONS

2000-05-26  John Sullivan  <sullivan@eazel.com>

	* src/ntl-view-bonobo-subdoc.c:
	(bonobo_subdoc_notify_location_change):
	Changed the NULL to a "", now text files work. I think
	it's back to normal now.

2000-05-26  John Sullivan  <sullivan@eazel.com>

	* src/ntl-view-bonobo-subdoc.c:
	(bonobo_subdoc_notify_location_change):
	Added a NULL parameter to a Bonobo_PersistStream_load call
	to get the build to finish. The API for this call changed.
	I have no idea whether this is the correct change, but with it
	I can build and run Athena. I noticed clicking on a text file
	crashes, which might be related (maybe no Bonobo components will
	work until we fix this properly)?

2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>
	* src/ntl-window.c: (athena_window_init),
	(athena_window_destroy), (athena_window_real_set_content_view),
	(sidebar_panels_changed_callback):

	Keep track of sidebar panel enabled/disabled toggling.  Currently
	the callback doesnt do nothing.  Soon it will.
	
2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/install/command-line/.cvsignore:
	* components/services/install/lib/.cvsignore:
	Ignore generated files.
	
2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_get_sidebar_panel_view_identifiers),
	(athena_global_preferences_get_enabled_sidebar_panel_view_identifiers),
	(global_preferences_register_sidebar_panels_preferences_for_ui),
	(global_preferences_is_sidebar_panel_enabled),
	(athena_global_preferences_shutdown):
	* libathena-extensions/athena-global-preferences.h:

	Expose only a single function to deal with sidebar panels.  Return
	a list of enabled view indentifiers, saving callers the work and
	complication of figuring out which panels are on.

	Make ATHENA_PREFERENCES_SIDEBAR_PANELS_NAMESPACE cause i need it
	to later keep track of sidebar panel changes in AthenaWindow.

	* src/ntl-uri-map.c: (got_file_info_callback),
	(athena_navigation_info_free):
	* src/ntl-uri-map.h:
	* src/ntl-window-msgs.c: (athena_window_update_state):
	Exorcise the 'sidebar_panel_identifiers' member.  Instead of
	complicating life by managing this list, simply obtain it when
	needed from global preferences.
	
2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-index-tabs.c: (athena_index_tabs_initialize),
	(athena_index_tabs_size_request), (draw_one_tab),
	(draw_or_hit_test_all_tabs), (tab_item_find_by_name),
	(athena_index_tabs_add_view),
	(athena_index_tabs_get_title_from_index),
	(athena_index_tabs_remove_view),
	(athena_index_tabs_prelight_tab),
	(athena_index_tabs_select_tab), (athena_index_tabs_set_color),
	(athena_index_tabs_receive_dropped_color),
	(athena_index_tabs_set_title),
	(athena_index_tabs_set_title_mode),
	(athena_index_tabs_set_visible):

	Some cleanup of index tabs.

	Changed find_tab() to tab_item_find_by_name() which returns the
	actual tab item instead of a list node.

	Changed the GList append and remove operations to be more sane and
	actually work in the latter case.

	Print warnings on attempts to operate on non-existing tab items as
	these indicate programming errors upstream.

	Also add bulletproofing g_return_* macros.
	
2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences.c: (pref_hash_node_alloc),
	(pref_hash_node_free), (pref_hash_node_add_callback),
	(pref_hash_node_remove_callback), (pref_callback_info_alloc),
	(preferences_gconf_callback):

	Install only ONE gconf notification for each preference or
	namespace that we care about.  Otherwise we get an exponential
	number of notifications.  Move the gconf_connection from the
	callback list info to the preference hash node.

	Remove lingering gconf notifications on destruction of hash
	nodes. 
	
2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>

	* components/help/hyperbola-nav-index.c:
	(hyperbola_navigation_index_new):
	* components/help/hyperbola-nav-search.c:
	(hyperbola_navigation_search_new):

	Fix the annoying as hell assertions coming from these components.
	Dont install the entry widgets as the titles for the clist.  You
	cant do this cause they have already be added to the vbox
	container and thus the barfing in gtk_container_add() about the
	widget already having a parent.  There doesnt seem to be any
	noticeable ui change because of this.  The help search/index
	continue to work as "good" as before.
	
2000-05-26  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences.c:
	(pref_hash_node_add_callback), (pref_hash_node_remove_callback),
	(preferences_gconf_callback):

	Add support for keeping track of changes within a whole preference
	namespace.  

	Pass in the expected preference to the gconf callback.  Do this so
	that we can compare the expected prefrence name with the one that
	gconf reports.  If they dont match, then we have something that
	changed within a namespace and not an individual key.
	
	Also fix some memory leaks.  Was forgetting to free a couple of
	returned preference names.
	
2000-05-26  Eskil Heyn Olsen  <chief_wanker@eazel.com>

	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-alt-install.c:
	(set_parameters_from_command_line), (eazel_install_progress),
	(main):
	* components/services/install/lib/eazel-install-object.c:
	(impl_Eazel_Install_new_packages), (eazel_install_get_epv),
	(eazel_install_destroy), (eazel_install_set_arg),
	(eazel_install_class_initialize),
	(eazel_install_create_corba_object), (eazel_install_initialize),
	(eazel_install_get_type), (eazel_install_new),
	(eazel_install_new_with_config), (create_temporary_directory),
	(fetch_remote_package_list), (eazel_install_emit_install_progress),
	(eazel_install_new_packages):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (download_a_package),
	(download_all_packages), (install_all_packages),
	(uninstall_packages), (rpm_show_progress), (do_rpm_install),
	(rpm_install):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	*
	components/services/install/lib/trilobite-eazel-install-service.oaf
	info:
	Missed a file...
	
2000-05-25  Gene Z. Ragan  <gzr@eazel.com>

	More work on undo.  Note that undo in text entry fields still
	misbehaves.  More improvements are on the way.
	
	* components/websearch/ntl-web-search.c: 
	(make_obj):
	Removed obsolete enable undo code.
	
	* libathena-extensions/athena-entry.c:
	* libathena-extensions/athena-entry.h:
	(athena_entry_initialize_class), (athena_entry_key_press),
	(athena_entry_insert_text), (athena_entry_delete_text),
	(register_edit_undo), (athena_entry_set_undo_key):
	Removed the enable_undo function and made undo functionality
	a default feature of AthenaEntry.
	
	* libathena/athena-undo-transaction.c:
	(athena_undo_transaction_add_undoable),
	(athena_undo_transaction_undo):
	
	* libathena/athena-undoable.c:
	* libathena/athena-undoable.h:
	(athena_undoable_save_undo_snapshot), (athena_undo_unregister):
	
	* src/file-manager/fm-properties-window.c: (create_basic_page):
	Removed obsolete enable undo code.
	
	* src/athena-bookmarks-window.c: (on_text_field_focus_in_event),
	(on_text_field_focus_out_event), (on_window_delete_event):
	Removed obsolete enable undo code.
	
	* src/athena-location-bar.c:
	* src/athena-location-bar.h:
	(athena_location_bar_set_location):
	Removed obsolete enable undo code.
	
	* src/ntl-window.c: (athena_window_constructed):
	Removed obsolete enable undo code.

2000-05-25  Eskil Heyn Olsen  <chief_wanker@eazel.com>

	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-alt-install.c:
	Small program to test the gtk+ version of the installer.
	
	(set_parameters_from_command_line), (main):
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/Makefile.am:	
	* components/services/install/lib/eazel-install-object.c:
	(impl_Trilobite_Eazel_Install_new_packages),
	(trilobite_eazel_install_get_epv),
	(trilobite_eazel_install_destroy),
	(trilobite_eazel_install_set_arg),
	(trilobite_eazel_install_class_initialize),
	(trilobite_eazel_install_create_corba_object),
	(trilobite_eazel_install_initialize),
	(trilobite_eazel_install_get_type), (trilobite_eazel_install_new),
	(trilobite_eazel_install_new_with_config),
	(create_temporary_directory), (fetch_remote_package_list),
	(trilobite_eazel_install_new_packages):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-public.h:
	Created a gtk+ object for the installer. Will be needed for the ui
	object to do callbacks for the progress bars
	
	* components/services/install/lib/eazel-install-metadata.c:
	(xml_doc_sanity_checks), (init_default_install_configuration),
	(init_default_transfer_configuration):
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_local_xml_package_list):
	Removed various g_errors and g_asserts and replaced them
	with some sort of return code (boolean or NULL)
	
2000-05-25  John Sullivan  <sullivan@eazel.com>

	* src/ntl-app.c: (display_caveat): Added a missing space.


	More work on the "Open with Other" dialogs. Most of
	the UI features are present now, but they don't do
	anything since there's no API to call yet.

	* libathena-extensions/athena-gtk-extensions.h,
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_clist_get_first_selected_row),
	(athena_gtk_clist_get_last_selected_row):
	Moved these functions to here from AthenaList, since
	they only require a GtkCList and I needed to use one
	of them outside of AthenaList.
	
	* libathena-extensions/athena-list.c:
	(athena_list_get_first_selected_row),
	(athena_list_get_last_selected_row),
	(athena_list_keyboard_navigation_key_press),
	(athena_list_new_with_titles):
	Removed get_first and get_last_selected_row, and updated
	callers to call new athena_gtk_clist versions.
	
	* libathena-extensions/athena-program-chooser.c:
	(populate_program_list), (athena_program_chooser_get_file),
	(athena_program_chooser_get_clist),
	(athena_program_chooser_get_frame),
	(athena_program_chooser_get_status_label),
	(athena_program_chooser_set_file),
	(athena_program_chooser_set_clist),
	(athena_program_chooser_set_frame),
	(athena_program_chooser_set_status_label), (is_in_short_list),
	(is_in_metadata_list), (update_selected_item_details),
	(program_list_selection_changed_callback), (pack_radio_button),
	(run_program_configurator_callback),
	(athena_program_chooser_new):
	Whole bunch of changes to push the "Open with Other" dialogs
	closer to reality.
	
	* src/ntl-window.c: 
	(view_menu_choose_view_callback): Comment changes only.
	(athena_window_load_content_view_menu): Changed menu item
	text from "View as ..." to "View as Other..."

2000-05-25  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file.c:
	I am getting a little careless. This must end.
	
	* libathena-extensions/athena-file.c:
	(athena_file_denies_access_permission): Fixed some checks
	that I had reversed.
	
	* src/ntl-app.c: (display_caveat): Took out some test code I
	checked in.

2000-05-25  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_denies_access_permission): Checked it in
	without finishing it. Bad Darin.

2000-05-25  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_denies_access_permission),
	(athena_file_can_set_permissions): Made the permission check
	match the Unix access model. Maciej points out that this is
	still not good enough, and Pavel points out that bug 458 is
	about just this problem.
	
	* libathena-extensions/athena-gnome-extensions.c:
	(turn_on_line_wrap_flag): Got rid of a bad g_free that was
	trashing memory when locating the label for line wrapping.
	
	* src/ntl-app.c: (display_caveat): Used line wrapping, now that
	I know wrapping wasn't the cause of the bug before.

2000-05-25  Ramiro Estrugo  <ramiro@eazel.com>

	Cleanup cut-n-paste code for dealing the sidebar panels.
	
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_sidebar_panels_preferences_for_ui),
	(global_preferences_get_sidebar_panel_key),
	(athena_global_preferences_is_sidebar_panel_enabled),
	(global_preferences_register_for_ui),
	(user_level_changed_callback),
	(athena_global_preferences_startup):
	Added define for sidebar panels namespace.
	
	Rename preference defines to make it clear whether they are keys
	or namespaces.

	Add function to obtain a sidebar panel key from an iid.

	Use "sidebar panels" consistently in both code and preferences
	dialog. 
	
	* libathena-extensions/athena-global-preferences.h:
	New public function
	athena_global_preferences_is_sidebar_panel_enabled () that
	returns whether a sidebar panel is enabled.

	* src/ntl-uri-map.c: (sidebar_panel_preference_is_on):
	Use athena_global_preferences_is_sidebar_panel_enabled() instead
	of hard-coding the namespace string.
	
2000-05-25  Robin * Slomkowski <rslomkow@eazel.com>

	* configure.in (added fr)
	* po/fr.po (added new file)
	Added French language support as created by 
	Jean-Michel Ardantz <jmardantz@ifrance.com>

2000-05-25  Darin Adler  <darin@eazel.com>

	* libathena/athena-clipboard.c:
	(athena_clipboard_set_up_editable): Instead of ref'ing the
	control we want to do a "while_alive". The old way could be
	dangerous, so I'm glad I caught this.

2000-05-25  Darin Adler  <darin@eazel.com>

	* libathena/athena-view-frame.c:
	(athena_view_get_bonobo_control): Took out an extra
	bonobo_object_ref that was wreaking havoc.  If we want to make
	this ref the thing before returning it, we'll have to get it
	right.

2000-05-25  Darin Adler  <darin@eazel.com>

	* RENAMING: Updated to reflect completed tasks.
	
	* components/notes/ntl-notes.c: (make_notes_view):
	* components/websearch/ntl-web-search.c: (make_obj):
	Changed to use simplified clipboard API.
	
	* components/services/trilobite/libtrilobite/.cvsignore:
	Ignore generated files.
	
	* libathena-extensions/gtkscrollframe.c:
	* libathena-extensions/gtkscrollframe.h:
	Renamed GtkScrollFrame to AthenaScrollFrame so we won't conflict
	if a GtkScrollFrame actually gets added to gtk some day. The file
	still needs renaming (mentioned in RENAMING).
	
	* libathena/athena-clipboard.h:
	* libathena/athena-clipboard.c: (cut_callback),
	(copy_callback), (paste_callback), (clear_callback),
	(add_menu_item), (add_menu_items_callback),
	(remove_menu_items_callback), (athena_clipboard_set_up_editable):
	Simplified clipboard implementation. Does the same thing the old
	code did without needing a class and with a simpler API.
	
	* athena-widgets/athena-preferences-item.c:
	* src/file-manager/fm-icon-text-window.c:
	* src/athena-zoom-control.c:
	* src/ntl-window.c:
	Renamed _cb to _callback. Some other (minor) cleanup.

	* src/file-manager/Makefile.am:
	* src/file-manager/desktop-canvas.c: [removed]
	* src/file-manager/desktop-canvas.h: [removed]
	* src/file-manager/desktop-menu.c: [removed]
	* src/file-manager/desktop-menu.h: [removed]
	* src/file-manager/gnome-desktop.c: [removed]
	Now that I'm doing the desktop work, I know we don't need these.
	I'll be deleting the desktop source files that Havoc added as I
	harvest the useful code from them.
	
	* src/file-manager/fm-directory-view.c:
	(bonobo_control_activate_callback): Add comments.
	
	* src/athena-zoom-control.h: Fixed problem where the zoom
	control didn't know if it was an event box or a pixmap.
	
	* src/ntl-index-panel.c: (athena_index_panel_add_meta_view):
	Fixed bug that was trashing the sidebar panel names. I put
	the g_free call in the wrong place.
	
	* src/ntl-uri-map.c: (sidebar_panel_preference_is_on):
	Fixed bug where the sidebar preference wasn't saved. I found
	another place with another copy of the preference path. This
	sort of thing really needs to go in a header file, I think.
	
2000-05-25  J Shane Culpepper  <pepper@eazel.com>

	* athena-installer/Makefile:
	* athena-installer/athena-installer.c:
	(create_temporary_directory), (fetch_remote_package_list), (main):

	Fixed athena-installer so that it uses the async ghttp fetch of the
	package-list.xml.  My changes to eazel-install broke it last night.

2000-05-25  Ali Abdin  <aliabdin@aucegypt.edu

	* components/help/help-methods.c:
	(transform_absolute_file): Fixed a bug to get it to really treat
	URI's as 'absolute'. Also fixed another bug with trailing spaces.
	Necessary because the URI holds the '\n' (when the user presses
	enter.
	
	Also added debugging statements in the functions (#define ALI_DEBUG
	to turn them on). I will take them out once help actually starts
	working

2000-05-25  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/command-line/eazel-install.c:
	(generate_new_package_list), (create_temporary_directory),
	(fetch_remote_package_list), (main):
	* components/services/install/lib/eazel-install-metadata.c:
	(create_default_metadata), (create_default_configuration_metafile),
	(xml_doc_sanity_checks), (get_urltype_from_string):
	* components/services/install/lib/eazel-install-protocols.c:
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (download_a_package),
	(download_all_packages), (install_all_packages),
	(uninstall_packages), (uninstall_a_package), (do_rpm_install):
	* components/services/install/lib/eazel-install-tests.c:
	(dump_package_list):
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category), (parse_local_xml_package_list),
	(generate_xml_package_list), (parse_pkg_template):
	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	* components/services/trilobite/libtrilobite/helixcode-utils.h:

	Big time clean up of the overall flow of installs.  Now, all packages
	are downloaded before install.  Tried to setup as many of the print 
	functions as possible to support internationalization.  Removed old
	gnet http groks of the package list and now grab the package list with
	the async ghttp fetch functionality.  Did alot of cleanups in the
	rpm glue functions to make them more managable.  Removed the prune_xml
	function i swiped from Helix Code since it is no longer needed.

2000-05-24  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_net_status_callback):

	Update status flags to latest and gratest gtkmozembed api.

2000-05-24  Gene Z. Ragan  <gzr@eazel.com>
	
	* libathena/athena-undo-manager.c:
	(impl_Athena_Undo_Manager__forget),
	(athena_undo_manager_add_transaction),
	(athena_undo_manager_forget_transaction):
	Added code to these functions that actually works.

	* libathena-extensions/athena-entry.c:
	(athena_entry_enable_undo):
	Work in progress on undo.
			
	* libathena/athena-undo-manager.h:
	* libathena/athena-undoable.c: 
	* libathena/athena-undoable.h:
	(athena_undo_unregister):
	Make this call private to the source file.
	
	* src/ntl-window-msgs.c: 
	(athena_window_request_title_change):
	Fixed a build breakeing typo made by my hero.  
	I can't believe it!

2000-05-24  Darin Adler  <darin@eazel.com>

	Eliminated ContentView and ContentViewFrame.

	* components/hardware/athena-hardware-view.c:
	(athena_hardware_view_initialize),
	(hardware_view_notify_location_change_callback):
	* components/hardware/athena-hardware-view.h:
	* components/help/hyperbola-nav-index.c:
	(hyperbola_navigation_index_select_row):
	* components/help/hyperbola-nav-search.c:
	(hyperbola_navigation_search_select_row),
	(hyperbola_navigation_search_new):
	* components/html/ntl-web-browser.c: (browser_url_load_done),
	(browser_vfs_callback), (browser_goto_url_real),
	(browser_goto_url), (browser_select_url), (browser_title_changed),
	(browser_notify_location_change), (make_obj):
	* components/loser/content/main.c: (loser_make_object):
	* components/loser/content/athena-content-loser.c:
	(athena_content_loser_initialize),
	(loser_notify_location_change_callback):
	* components/loser/content/athena-content-loser.h:
	* components/loser/sidebar/main.c: (loser_make_object):
	* components/loser/sidebar/athena-sidebar-loser.c:
	(athena_sidebar_loser_initialize),
	(loser_notify_location_change_callback):
	* components/mozilla/main.c: (mozilla_make_object):
	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize),
	(mozilla_content_view_request_progress_change),
	(mozilla_content_view_request_location_change),
	(mozilla_notify_location_change_callback),
	(mozilla_title_changed_callback), (mozilla_link_message_callback):
	* components/mozilla/athena-mozilla-content-view.h:
	* components/music/main.c: (music_view_make_object):
	* components/music/athena-music-view.c:
	(athena_music_view_initialize), (click_column_callback),
	(music_view_notify_location_change_callback),
	(athena_music_view_drag_data_received):
	* components/music/athena-music-view.h:
	* components/rpmview/main.c: (rpm_view_make_object):
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_initialize),
	(rpm_view_notify_location_change_callback):
	* components/rpmview/athena-rpm-view.h:
	* components/sample/main.c: (sample_make_object):
	* components/sample/athena-sample-content-view.c:
	(athena_sample_content_view_initialize),
	(sample_notify_location_change_callback):
	* components/sample/athena-sample-content-view.h:
	* components/services/startup/athena-view/main.c:
	(services_make_object):
	* components/services/startup/athena-view/athena-service-startup-view.c:
	(go_to_uri), (athena_service_startup_view_initialize),
	(service_main_notify_location_change_cb):
	* components/services/startup/athena-view/athena-service-startup-view.h:
	* libathena/Makefile.am:
	* libathena/libathena.h:
	* libathena/athena-content-view-frame.c: [removed]
	* libathena/athena-content-view-frame.h: [removed]
	* libathena/athena-view-component.idl:
	* libathena/athena-view-frame-private.h:
	* libathena/athena-view-frame.c:
	(impl_Athena_View_save_state), (impl_Athena_View_load_state),
	(impl_Athena_View_notify_location_change),
	(impl_Athena_View_show_properties),
	(impl_Athena_View_notify_selection_change),
	(impl_Athena_View_stop_location_change),
	(impl_Athena_View__destroy), (impl_Athena_View__create),
	(athena_view_initialize_class), (athena_view_initialize),
	(athena_view_new), (athena_view_new_from_bonobo_control),
	(get_view_frame), (athena_view_request_location_change),
	(athena_view_request_selection_change),
	(athena_view_request_status_change),
	(athena_view_request_progress_change),
	(athena_view_request_title_change),
	(athena_view_get_bonobo_control),
	(athena_view_get_main_window):
	* libathena/athena-view-frame.h:
	* src/Makefile.am:
	* src/file-manager/fm-directory-view.c: (get_bonobo_control),
	(fm_directory_view_initialize), (display_selection_info),
	(fm_directory_view_send_selection_change),
	(notify_location_change_callback), (stop_location_change_callback),
	(done_loading), (fm_directory_view_activate_file_internal),
	(finish_loading_uri):
	* src/file-manager/fm-directory-view.h:
	* src/ntl-app.c: (impl_Athena_Application_create_object):
	* src/ntl-content-view.c: [removed]
	* src/ntl-content-view.h: [removed]
	* src/ntl-uri-map.c: (make_oaf_query_with_known_mime_type),
	(make_oaf_query_with_uri_scheme_only):
	* src/ntl-view-frame-svr.c: (impl_Athena_ViewFrame__destroy),
	(impl_Athena_ViewFrame__create),
	(impl_Athena_ViewFrame__get_main_window),
	(impl_Athena_ViewFrame_request_location_change),
	(impl_Athena_ViewFrame_request_selection_change),
	(impl_Athena_ViewFrame_request_status_change),
	(impl_Athena_ViewFrame_request_progress_change),
	(impl_Athena_ViewFrame_request_title_change):
	* src/ntl-view-private.h:
	* src/ntl-view.c: (athena_view_frame_class_init),
	(athena_view_frame_set_arg), (athena_view_frame_get_arg),
	(athena_view_frame_request_location_change),
	(athena_view_frame_request_selection_change),
	(athena_view_frame_request_status_change),
	(athena_view_frame_request_progress_change),
	(athena_view_frame_request_title_change),
	(athena_view_frame_set_label), (athena_view_frame_activate):
	* src/ntl-view.h:
	* src/ntl-window-msgs.c: (athena_window_request_title_change),
	(athena_window_load_meta_view),
	(athena_window_request_location_change),
	(athena_window_load_content_view):
	* src/ntl-window-msgs.h:
	* src/ntl-window-private.h:
	* src/ntl-window.c:
	(athena_window_request_title_change_callback),
	(athena_window_connect_content_view),
	(athena_window_real_set_content_view):
	Got rid of ContentView and ContentViewFrame.

2000-05-24  John Sullivan  <sullivan@eazel.com>

	* src/ntl-app.c: (display_caveat): Made the startup caveat
	window look cool. Everyone who set an environment variable
	to avoid it will now be sad.

2000-05-24  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog): Oops. Missed one case of
	"metaview" -> "sidebar-view".
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_pixbuf_aa), (draw_label_text_aa),
	(athena_icon_canvas_item_render): Some minor code tweaks.

2000-05-24  Darin Adler  <darin@eazel.com>

	* libathena/athena-view-component.idl:
	* src/Makefile.am:
	* src/ntl-index-panel.c: (athena_index_panel_add_meta_view):
	* src/ntl-meta-view.c: [deleted]
	* src/ntl-meta-view.h: [deleted]
	* src/ntl-view.c: (athena_view_frame_handle_client_destroy_2),
	(athena_view_frame_set_active_errors),
	(athena_view_frame_get_label), (athena_view_frame_set_label):
	* src/ntl-view.h:
	* src/ntl-window-msgs.c: (athena_window_load_meta_view),
	(athena_window_update_state):
	* src/ntl-window.c:
	Removed Athena::MetaViewFrame and all the related classes.

2000-05-24  Gene Z. Ragan  <gzr@eazel.com>

	* libathena/athena-undo-context.c:
	(impl_Athena_Undo_Context__get_undo_manager):
	Removed commented out cruft code.

2000-05-24  Gene Z. Ragan  <gzr@eazel.com>

	* components/notes/ntl-notes.c: 
	(notes_notify_location_change):
	Removed undo manager test code.
	
	* components/websearch/ntl-web-search.c: 
	(make_obj):
	Added undo functionality to web search component.
	
	* libathena/athena-undo-context.c:
	(impl_Athena_Undo_Context__get_undo_manager):
	Added ref code to call CORBA_object_duplicate()
	
	* libathena/athena-undo-manager.c:
	(impl_Athena_Undo_Manager__append), (athena_undo_manager_redo),
	(athena_undo_manager_add_transaction):
	Added ref code to call CORBA_object_duplicate()
	
2000-05-24  John Sullivan  <sullivan@eazel.com>

	* src/ntl-app.c: (display_caveat), (athena_app_startup):
	Round one of caveat dialog improvement. I managed to get it
	to be modeless and come up in front of the Athena window.
	The word-wrapping had to be done by hand to work around
	unsolved bug (963). The next round will involve using Arlo's
	cool picture.

2000-05-24  Darin Adler  <darin@eazel.com>

	* libathena/Makefile.am:
	* libathena/libathena.h:
	* libathena/athena-meta-view-frame.c: [deleted]
	* libathena/athena-meta-view-frame.h: [deleted]
	* libathena/athena-view-component.idl:
	* po/POTFILES.in:
	* src/ntl-index-panel.c: (athena_index_panel_add_meta_view):
	* src/ntl-window.c: (athena_window_add_meta_view):
	Removed Athena::MetaView and all the related classes.
	We still have Athena::MetaViewFrame (will go soon).
	
	* components/help/hyperbola-nav-index.c:
	(hyperbola_navigation_index_new):
	* components/help/hyperbola-nav-search.c:
	(hyperbola_navigation_search_new):
	* components/help/hyperbola-nav-tree.c:
	(hyperbola_navigation_tree_new):
	* components/history/ntl-history-view.c: (make_obj):
	* components/loser/sidebar/athena-sidebar-loser.c:
	(athena_sidebar_loser_initialize),
	(loser_notify_location_change_callback):
	* components/loser/sidebar/athena-sidebar-loser.h:
	* components/notes/ntl-notes.c: (make_notes_view):
	* components/websearch/ntl-web-search.c: (make_obj):
	Changed to use just plain view insetad of meta_view.
	
	* libathena-extensions/athena-global-preferences.h:
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(athena_global_preferences_get_sidebar_panel_view_identifiers),
	(athena_global_preferences_get_sidebar_view_iids),
	(athena_preferences_register_sidebar_view_preferences_for_ui),
	(global_preferences_register_for_ui):
	Changed naming to call them sidebar views instead of meta views,
	and got rid of code that depends on MetaView interface. We now
	use the sidebar_panel_name to determine if a view should show
	up in the sidebar.
	
	* src/ntl-view.h: Fixed a comment to reflect the future
	instead of the past.
	
2000-05-24  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-program-chooser.c:
	(populate_program_list), (athena_program_chooser_new):
	Some work on the innards of the program-choosing dialogs.
	Still not wired up to any actual data.

2000-05-24  Darin Adler  <darin@eazel.com>

	* HACKING: Moved to make clear that popt must build first.
	
	* RENAMING: Added some new file renamings.
	
	* src/athena-zoomable-frame-svr.c:
	* src/athena.h: [removed]
	* src/ntl-app.c:
	* src/ntl-main.c:
	* src/ntl-meta-view.c:
	* src/ntl-types.h: [removed]
	* src/ntl-uri-map.c:
	* src/ntl-view-bonobo-control.c:
	* src/ntl-view-bonobo-subdoc.c:
	* src/ntl-view-frame-svr.c:
	* src/ntl-view-athena.c:
	* src/ntl-view-private.h:
	* src/ntl-view.c:
	* src/ntl-window-msgs.c:
	* src/ntl-window-state.c:
	* src/ntl-window.c:
	Got rid of "athena.h" and "ntl-types.h".

	* libathena/athena-undo-context.c:
	(impl_Athena_Undo_Context__destroy),
	(impl_Athena_Undo_Context__create),
	(impl_Athena_Undo_Context__get_undo_manager),
	(athena_undo_context_new), (athena_undo_context_initialize),
	(destroy):
	* libathena/athena-undo-manager.c:
	(impl_Athena_Undo_Manager__destroy),
	(impl_Athena_Undo_Manager__create),
	(impl_Athena_Undo_Manager__append),
	(impl_Athena_Undo_Manager__forget),
	(impl_Athena_Undo_Manager__undo), (athena_undo_manager_new),
	(athena_undo_manager_initialize),
	(athena_undo_manager_initialize_class),
	(athena_undo_manager_undo), (athena_undo_manager_redo),
	(athena_undo_manager_add_transaction),
	(athena_undo_manager_unregister_object),
	(athena_undo_manager_can_undo), (athena_undo_manager_can_redo),
	(destroy), (athena_undo_manager_enable_redo),
	(athena_undo_manager_set_queue_depth), (free_undo_manager_list):
	Various code cleanups. Specifically, get rid of unused
	bonobo_object and rename gtk_object to bonobo_object.
	Get rid of some yucky function pointer casts.
	
	* src/ntl-app.c: (athena_app_init):
	Got rid of bogus extra ref.

	* libathena-extensions/athena-program-chooser.c:
	(athena_program_chooser_new): Reindent part just to annoy John.
	* libathena-extensions/athena-program-choosing.c:
	(athena_launch_application): Newline at end of file (ugh).
	
	* src/ntl-index-panel.c: (add_command_buttons): Format tweaking.
	
2000-05-24  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in: 
	* components/services/install/command-line/Makefile.am:
	* components/services/install/lib/Makefile.am: 
	* components/services/startup/lib/Makefile.am: 
	* components/services/startup/athena-view/Makefile.am:
	* components/services/time/command-line/Makefile.am: 
	* components/services/time/command-line/main.c: 
	* components/services/time/service/Makefile.am: 
	* components/services/time/service/main.c: 
	* components/services/time/service/trilobite-eazel-time-service.c: 
	* components/services/trilobite/Makefile.am (SUBDIRS): 
	* components/services/trilobite/sample/command-line/Makefile.am: 
	* components/services/trilobite/sample/command-line/main.c: 
	* components/services/trilobite/sample/athena-view/Makefile.am (SUBDIR): 
	* components/services/trilobite/sample/service/Makefile.am: 
	* components/services/trilobite/sample/service/main.c: 
	* components/services/trilobite/sample/service/sample-service-impl.c: 
	Major cvs gymnastics to move trilobite/lib into
	trilobite/libtrilobite.

	All files in components/services/trilobite/src and lib have been
	deleted and are now in components/services/trilobite/libtrilobite.
	
2000-05-24  J Shane Culpepper  <pepper@eazel.com>

	* athena-installer/athena-installer.c:
	* athena-installer/Makefile:
	Removed the duplicate helixcode files from the installer.  Temporarily
	added 4 duplicate functions to the installer until I get libtrilobite
	statically linked in.

2000-05-24  Maciej Stachowiak  <mjs@eazel.com>

	* src/ntl-uri-map.c: Make content loser component have lower
	priority than anything else.

2000-05-24  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/trilobite/Makefile.am:
	Accidently removed the wrong subdir, reinserted lib and removed src.

	* components/services/trilobite/sample/service/Makefile.am
	* components/services/trilobite/sample/command-line/Makefile.am
	* components/services/time/service/Makefile.am:
	updated to use libtrilobite instead of libtrilobited

	* components/services/time/command-line/Makefile.am:
	Updated to only use libtrilobite

	* components/services/trilobite/Makefile.am (SUBDIRS): 
	Removed src from subdirs.

	* components/services/trilobite/lib/Makefile.am
	* components/services/trilobite/lib/libtrilobite.h: Moved
	the libtrilobited stuff into libtrilobite.

2000-05-24  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_label_text_aa), (athena_icon_canvas_item_render):
	made the text beneath the icons draw properly on the anti-aliased
	canvas.  There may be performance issues that require caching, but
	first I want to try this straightforward approach.
	
2000-05-23  Ramiro Estrugo  <ramiro@eazel.com>

	* HACKING:
	Added control-center blurb
	
2000-05-23  Darin Adler  <darin@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize),
	(athena_mozilla_content_view_destroy),
	(athena_mozilla_content_view_get_athena_view),
	(mozilla_content_view_request_progress_change),
	(mozilla_content_view_request_location_change),
	(mozilla_notify_location_change_callback),
	(mozilla_title_changed_callback), (mozilla_link_message_callback):
	* components/mozilla/athena-mozilla-content-view.h:
	* components/mozilla/main.c:
	Updated the Mozilla component too (oops).

2000-05-23  Arlo Rose  <arlo@eazel.com>

	* icons/Makefile.am:
	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	* icons/athena3.jpg
	* icons/About_Image.png
	Added new about image, and a few names to the about box 
        that were missing.

2000-05-23  Maciej Stachowiak  <mjs@eazel.com>

	* RENAMING: Put in renamings for some of the "?" renamings that
	Darin had put in.

2000-05-23  Gene Z. Ragan  <gzr@eazel.com>

	* libathena/athena-undo-context.c:
	(impl_Athena_Undo_Context__get_undo_manager):
	Added call to CORBA_Object_duplicate(). This fixed an explosive
	bug.
	
	* libathena/athena-undo-manager.c:
	* libathena/athena-undo-manager.h:
	(athena_undo_manager_stash_global_undo),
	(athena_undo_manager_get_global_undo):
	New functions to save application global instance of
	Athena_Undo_Manager
	
	* src/ntl-app.c: (athena_app_init):
	Add call to athena_undo_manager_stash_global_undo.
	
	* src/ntl-view.c:
	(athena_view_frame_load_client):
	Connected Athena_Undo_Context interface to view frame.

2000-05-23  Ramiro Estrugo  <ramiro@eazel.com>

	* icons/Makefile.am:
	  icons/gnome-application-encapsulated_postscript.png,
	  icons/gnome-application-pdf.png,
	  icons/gnome-application-pgp.png,
	  icons/gnome-application-postscript.png,
	  icons/gnome-application-x-c-header.png,
	  icons/gnome-application-x-c-source.png,
	  icons/gnome-application-x-cc-source.png,
	  icons/gnome-application-x-e-theme.png,
	  icons/gnome-application-x-generic-spreadsheet.png,
	  icons/gnome-application-x-gnome-app-info.png,
	  icons/gnome-application-x-java-source.png,
	  icons/gnome-application-x-kde-app-info.png,
	  icons/gnome-application-x-php.png,
	  icons/gnome-application-x-reject.png,
	  icons/gnome-application-x-scheme-source.png,
	  icons/gnome-application-x-sql.png,
	  icons/gnome-audio-basic.png,
	  icons/gnome-audio-midi.png,
	  icons/gnome-audio-ulaw.png,
	  icons/gnome-audio-x-aiff.png,
	  icons/gnome-audio-x-mod.png,
	  icons/gnome-audio-x-pn-realaudio.png,
	  icons/gnome-audio-x-s3m.png,
	  icons/gnome-audio-x-stm.png,
	  icons/gnome-audio-x-voc.png,
	  icons/gnome-audio-x-wav.png,
	  icons/gnome-audio-x-xi.png,
	  icons/gnome-audio-x-xm.png,
	  icons/gnome-audio.png,
	  icons/gnome-core.png,
	  icons/gnome-font-afm.png,
	  icons/gnome-font-ttf.png,
	  icons/gnome-font-x-pcf.png,
	  icons/gnome-http-url.png,
	  icons/gnome-image-bmp.png,
	  icons/gnome-image-generic.png,
	  icons/gnome-image-gif.png,
	  icons/gnome-image-ief.png,
	  icons/gnome-image-jpeg.png,
	  icons/gnome-image-pbm.png,
	  icons/gnome-image-pgm.png,
	  icons/gnome-image-png.png,
	  icons/gnome-image-pnm.png,
	  icons/gnome-image-ppm.png,
	  icons/gnome-image-psd.png,
	  icons/gnome-image-ras.png,
	  icons/gnome-image-rgb.png,
	  icons/gnome-image-tga.png,
	  icons/gnome-image-tiff.png,
	  icons/gnome-image-x-xfig.png,
	  icons/gnome-image-xbm.png,
	  icons/gnome-image-xcf.png,
	  icons/gnome-image-xpm.png,
	  icons/gnome-image-xwd.png,
	  icons/gnome-pack-deb.png,
	  icons/gnome-tex.png,
	  icons/gnome-text-html.png,
	  icons/gnome-text-x-authors.png,
	  icons/gnome-text-x-copying.png,
	  icons/gnome-text-x-credits.png,
	  icons/gnome-text-x-install.png,
	  icons/gnome-text-x-makefile.png,
	  icons/gnome-text-x-readme.png,
	  icons/gnome-textfile.png,
	  icons/gnome-video-mpeg.png,
	  icons/gnome-video-quicktime.png,
	  icons/gnome-video-x-msvideo.png:
	Copy icons from gmc so that icon-association for mime type keys
	work with athena.

2000-05-23  John Sullivan  <sullivan@eazel.com>

	A few cleanup tweaks inspired by debugging session
	with Darin.

	* libathena-extensions/athena-program-choosing.h,
	* libathena-extensions/athena-program-choosing.c:
	(athena_choose_application_for_file): Make callback
	take a const char * instead of a char *.
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_chose_application_callback): take
	a const char * instead of a char *.
	* src/ntl-index-panel.c:
	(athena_index_panel_chose_application_callback):
	take a const char * instead of a char *.
	(open_with_callback): unref file
	(add_command_buttons): Use gtk_signal_connect instead of
	athena_gtk_signal_connect_free_data when passing NULL
	as the data (Doh!).

2000-05-23  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_pixbuf_aa), (athena_icon_canvas_item_render):
	made emblems draw properly in anti-aliased mode
	
2000-05-23  John Sullivan  <sullivan@eazel.com>

	Some pieces of the application and component-choosing UI.
	They don't do anything useful yet.

	* libathena-extensions/athena-program-chooser.h,
	* libathena-extensions/athena-program-chooser.c:
	New files with code for creating a program-choosing
	dialog (which is really degenerate right now).

	* libathena-extensions/athena-program-choosing.h,
	* libathena-extensions/athena-program-choosing.c:
	New files with functions for choosing a component or other
	program to display or open a file with. This uses the
	dialog in athena-program-chooser, but callers don't
	need to know that.

	* libathena-extensions/Makefile.am: add these new
	files to the build.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_chose_application_callback),
	(fm_directory_view_chose_component_callback), (choose_application),
	(choose_component), (bonobo_menu_other_program_callback),
	(other_application_callback), (other_viewer_callback): 
	New functions that connect the program-choosing UI to the
	menu items.
	(compute_menu_item_info): Stop desensitizing the "Other ..." items.
	(append_gtk_menu_item): Eliminated this function, made callers use
	more elaborate append_gtk_menu_item_with_view instead.
	(fm_directory_view_real_create_background_context_menu_items),
	(create_open_with_gtk_menu):
	Updated callers to append_gtk_menu_item.
	(fm_directory_view_real_create_selection_context_menu_items):
	Pass view to create_open_with_gtk_menu.
	(reset_bonobo_open_with_menu): Now takes an FMDirectoryView and
	uses it as callback data for "Other..." items.
	(fm_directory_view_real_merge_menus),
	(fm_directory_view_real_update_menus): Pass view to
	reset_bonobo_open_with_menu.
	
	* src/ntl-index-panel.c: (command_button_callback): Renamed from
	command_button_cb, also broke out application-launching code and
	moved it to libathena-extensions/athena-program-choosing.c.
	(athena_index_panel_chose_application_callback),
	(open_with_callback): New functions, used to wire up functionality
	of "Open with ..." button.
	(add_command_buttons): Stop desensitizing "Open with ..." button,
	and wire it up to do something.
	
	* src/ntl-window.h: Renamed field "option_cvtype" to "view_as_option_menu".
	* src/ntl-window.c: 
	(athena_window_constructed): Updated to match field name change.
	(athena_window_switch_views): New function, broken out of
	view_menu_switch_views_callback; switches window to new content view.
	(view_menu_switch_views_callback): Now calls athena_window_switch_views.
	(synch_view_as_menu): New function, resets displayed name of "View as"
	menu to match current content view.
	(chose_component_callback), (view_menu_choose_view_callback): New
	functions, used to implement "View as ..." menu item.
	(athena_window_load_content_view_menu): Store iid in menu item;
	call synch_view_as_menu; wire up "View as ..." menu item.


	* src/ntl-window-msgs.c: (handle_unreadable_location):
	Tweaked wording of an error message.
	
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file): Tweaked wording of an error message.

2000-05-23  Darin Adler  <darin@eazel.com>

	* libathena/athena-undo-manager.c:
	(impl_Athena_Undo_Manager__append), (athena_undo_manager_undo),
	(athena_undo_manager_redo),
	(athena_undo_manager_add_transaction),
	(athena_undo_manager_unregister_object), (destroy),
	(athena_undo_manager_set_queue_depth), (free_undo_manager_list),
	(prune_undo_manager_list), (athena_get_undo_manager),
	(undo_manager_unref), (undo_manager_ref),
	(athena_attach_undo_manager), (set_up_bonobo_control),
	(athena_undo_set_up_bonobo_control):
	Some cleanup of the undo code, including a first cut of the
	set_up_bonobo_control function. Also got rid of all the excess
	unrefs that we didn't need. I hope this is right now. Also fixed
	bug where code was trying to bonobo_object_unref a CORBA object
	directly.
	
	* libathena/athena-undo-manager.c:
	(athena_undo_set_up_bonobo_control):
	* libathena/athena-undo-manager.h:
	* libathena/athena-view-frame.c:
	(athena_view_real_set_bonobo_control):
	Change from setup to set_up. Setup is a noun, set up a verb phrase.
	
	* libathena/athena-undoable.c: (athena_undo_register_full),
	(athena_undo): Some minor cleanup and unrefing the transaction
	after adding it to the undo manager.
	
2000-05-23  Darin Adler  <darin@eazel.com>

	The ViewFrame <-> View renaming.
	We still have to rename the files.

	* RENAMING: Put in explicit cases for file name renaming.
	
	* src/Makefile.am:
	* src/athena-desktop-window.c:
	* src/athena-desktop-window.h:
	Added placeholders. I'll be putting code in here soon.
	
	* src/ntl-app.c: (display_prototype_caveat):
	Changed to use athena_simple_dialog again since otherwise it
	comes up behind the main window. Perhaps someone will resolve
	that issue and change it back.

	* libathena-extensions/athena-gnome-extensions.h:
	* libathena-extensions/athena-gnome-extensions.c:
	(athena_warning_dialog), (athena_warning_dialog_parented):
	Added centered version of the warning dialog as well, since
	Eskil was using gnome_warning_dialog in a case where he really
	wanted lines wrapped.
	
	* components/loser/.cvsignore:
	* components/loser/content/.cvsignore:
	* components/loser/sidebar/.cvsignore:
	Ignore some generated files.

	* components/hardware/main.c: (hardware_view_make_object):
	* components/hardware/athena-hardware-view.c:
	(athena_hardware_view_initialize),
	(athena_hardware_view_destroy),
	(athena_hardware_view_get_athena_view),
	(hardware_view_notify_location_change_callback):
	* components/hardware/athena-hardware-view.h:
	* components/help/hyperbola-nav-index.c:
	(hyperbola_navigation_index_select_row),
	(hyperbola_navigation_index_new):
	* components/help/hyperbola-nav-search.c:
	(hyperbola_navigation_search_select_row),
	(hyperbola_navigation_search_new):
	* components/help/hyperbola-nav-tree.c:
	(hyperbola_navigation_tree_new),
	(hyperbola_navigation_tree_notify_location_change),
	(hyperbola_navigation_tree_select_row):
	* components/history/ntl-history-view.c:
	(hyperbola_navigation_history_notify_location_change),
	(hyperbola_navigation_history_select_row), (make_obj):
	* components/html/ntl-web-browser.c: (browser_url_load_done),
	(browser_vfs_callback), (browser_goto_url_real),
	(browser_goto_url), (browser_select_url), (browser_title_changed),
	(browser_notify_location_change), (make_obj):
	* components/loser/content/main.c: (loser_make_object):
	* components/loser/content/athena-content-loser.c:
	(athena_content_loser_initialize),
	(athena_content_loser_destroy),
	(athena_content_loser_get_athena_view),
	(athena_content_loser_load_uri),
	(loser_notify_location_change_callback), (bonobo_loser_callback):
	* components/loser/content/athena-content-loser.h:
	* components/loser/sidebar/main.c: (loser_make_object):
	* components/loser/sidebar/athena-sidebar-loser.c:
	(athena_sidebar_loser_initialize),
	(athena_sidebar_loser_destroy),
	(athena_sidebar_loser_get_athena_view),
	(loser_notify_location_change_callback):
	* components/loser/sidebar/athena-sidebar-loser.h:
	* components/music/main.c: (music_view_make_object):
	* components/music/athena-music-view.c:
	(athena_music_view_initialize), (athena_music_view_destroy),
	(athena_music_view_get_athena_view),
	(music_view_notify_location_change_callback):
	* components/music/athena-music-view.h:
	* components/notes/ntl-notes.c: (notes_notify_location_change),
	(make_notes_view):
	* components/rpmview/main.c: (rpm_view_make_object):
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_initialize), (athena_rpm_view_destroy),
	(athena_rpm_view_get_athena_view),
	(rpm_view_notify_location_change_callback):
	* components/rpmview/athena-rpm-view.h:
	* components/sample/main.c: (sample_make_object):
	* components/sample/athena-sample-content-view.c:
	(athena_sample_content_view_initialize),
	(athena_sample_content_view_destroy),
	(athena_sample_content_view_get_athena_view),
	(sample_notify_location_change_callback):
	* components/sample/athena-sample-content-view.h:
	* components/services/startup/athena-view/main.c:
	(services_make_object):
	* components/services/startup/athena-view/athena-service-startup-view.c:
	(go_to_uri), (athena_service_startup_view_initialize),
	(athena_service_startup_view_get_athena_view),
	(service_main_notify_location_change_cb):
	* components/services/startup/athena-view/athena-service-startup-view.h:
	* components/websearch/ntl-web-search.c:
	(web_search_notify_location_change), (do_search), (make_obj):
	* libathena/athena-clipboard.c:
	(athena_clipboard_info_set_view),
	(athena_clipboard_info_get_view),
	(athena_clipboard_info_get_bonobo_control):
	* libathena/athena-clipboard.h:
	* src/file-manager/fm-directory-view.c:
	(bonobo_menu_move_to_trash_callback), (get_bonobo_control),
	(fm_directory_view_initialize), (display_selection_info),
	(fm_directory_view_send_selection_change),
	(notify_location_change_callback),
	(notify_selection_change_callback),
	(stop_location_change_callback), (done_loading),
	(fm_directory_view_get_athena_view),
	(fm_directory_view_activate_file_internal), (finish_loading_uri):
	* src/file-manager/fm-directory-view.h:
	Updated for new libathena where the AthenaViewFrame
	classes are now named AthenaView.
	
	* libathena/athena-content-view-frame.c:
	(athena_content_view_initialize), (athena_content_view_new),
	(athena_content_view_new_from_bonobo_control),
	(athena_content_view_destroy),
	(athena_content_view_initialize_class),
	(athena_content_view_request_title_change):
	* libathena/athena-content-view-frame.h:
	* libathena/athena-meta-view-frame.c:
	(athena_meta_view_initialize), (athena_meta_view_new),
	(athena_meta_view_new_from_bonobo_control),
	(athena_meta_view_destroy),
	(athena_meta_view_initialize_class):
	* libathena/athena-meta-view-frame.h:
	Changed Athena*ViewFrame classes to Athena*View. This is
	something we had in RENAMING for some time, and it's consistent
	with Bonobo's naming of BonoboControl and BonoboControlFrame.
	Also changed interfaces to use actual BonoboControl * instead of
	using BonobObject * and query_interface.
	
	* libathena/athena-undo-manager.c:
	(athena_undo_setup_bonobo_control):
	* libathena/athena-undo-manager.h:
	Changed the BonoboControl parameter to actually be of type
	BonoboControl * instead of BonoboObject *.
	
	* libathena/athena-view-frame-private.h:
	* libathena/athena-view-frame.c:
	(impl_Athena_View_save_state), (impl_Athena_View_load_state),
	(impl_Athena_View_notify_location_change),
	(impl_Athena_View_show_properties),
	(impl_Athena_View_notify_selection_change),
	(impl_Athena_View_stop_location_change),
	(impl_Athena_View__destroy), (impl_Athena_View__create),
	(athena_view_initialize_class), (athena_view_set_arg),
	(athena_view_get_arg), (athena_view_initialize),
	(athena_view_new), (athena_view_new_from_bonobo_control),
	(athena_view_destroy), (athena_view_ensure_view_frame),
	(athena_view_request_location_change),
	(athena_view_request_selection_change),
	(athena_view_request_status_change),
	(athena_view_request_progress_change),
	(athena_view_get_bonobo_control),
	(athena_view_get_main_window),
	(athena_view_real_set_bonobo_control):
	* libathena/athena-view-frame.h:
	* libathena/athena-zoomable.c:
	(impl_Athena_Zoomable__get_zoom_level),
	(impl_Athena_Zoomable__set_zoom_level),
	(impl_Athena_Zoomable__get_min_zoom_level),
	(impl_Athena_Zoomable__get_max_zoom_level),
	(impl_Athena_Zoomable__get_is_continuous),
	(impl_Athena_Zoomable_zoom_in),
	(impl_Athena_Zoomable_zoom_out),
	(impl_Athena_Zoomable_zoom_to_fit),
	(impl_Athena_Zoomable__destroy),
	(impl_Athena_Zoomable__create), (marshal_NONE__DOUBLE),
	(athena_zoomable_initialize_class), (athena_zoomable_set_arg),
	(athena_zoomable_get_arg), (athena_zoomable_initialize),
	(athena_zoomable_new),
	(athena_zoomable_new_from_bonobo_control),
	(athena_zoomable_destroy),
	(athena_zoomable_ensure_zoomable_frame),
	(athena_zoomable_set_zoom_level),
	(athena_zoomable_get_bonobo_control),
	(athena_zoomable_real_set_bonobo_control):
	* libathena/athena-zoomable.h:
	* src/athena-zoomable-frame-svr.c:
	(impl_Athena_ZoomableFrame__destroy),
	(impl_Athena_ZoomableFrame__create),
	(impl_Athena_ZoomableFrame_notify_zoom_level):
	* src/ntl-app.c: (impl_Athena_Application_create_object),
	* src/ntl-content-view.c:
	(impl_Athena_ContentViewFrame_request_title_change),
	(athena_content_view_frame_get_type),
	(athena_content_view_frame_class_init),
	(athena_content_view_frame_init),
	(athena_content_view_frame_set_active),
	(athena_content_view_frame_request_title_change):
	* src/ntl-content-view.h:
	* src/ntl-index-panel.c: (athena_index_panel_add_meta_view),
	(athena_index_panel_remove_meta_view):
	* src/ntl-index-panel.h:
	* src/ntl-meta-view.c: (athena_meta_view_frame_initialize_class),
	(athena_meta_view_frame_initialize),
	(athena_meta_view_frame_set_label),
	(athena_meta_view_frame_get_label):
	* src/ntl-meta-view.h:
	* src/ntl-view-bonobo-control.c: (destroy_bonobo_control_view),
	(athena_view_frame_activate_uri),
	(bonobo_control_try_load_client),
	(bonobo_control_notify_location_change):
	* src/ntl-view-bonobo-subdoc.c: (destroy_bonobo_subdoc_view),
	(bonobo_subdoc_notify_location_change),
	(bonobo_subdoc_try_load_client):
	* src/ntl-view-frame-svr.c: (impl_Athena_ViewFrame__destroy),
	(impl_Athena_ViewFrame__create),
	(impl_Athena_ViewFrame_request_location_change),
	(impl_Athena_ViewFrame_request_selection_change),
	(impl_Athena_ViewFrame_request_status_change),
	(impl_Athena_ViewFrame_request_progress_change):
	* src/ntl-view-athena.c: (athena_view_try_load_client),
	(destroy_athena_view), (nv_show_properties), (nv_save_state),
	(nv_load_state), (nv_notify_location_change),
	(nv_notify_selection_change), (nv_stop_location_change):
	* src/ntl-view-private.h:
	* src/ntl-view.c: (athena_view_frame_get_type),
	(athena_view_frame_class_init), (athena_view_frame_set_arg),
	(athena_view_frame_get_arg), (athena_view_frame_init),
	(athena_view_frame_destroy_client),
	(athena_view_frame_destroy), (athena_view_frame_constructed),
	(athena_view_frame_construct_arg_set),
	(athena_view_frame_size_request),
	(athena_view_frame_size_allocate),
	(athena_view_frame_handle_client_destroy),
	(athena_view_frame_handle_client_destroy_2),
	(athena_view_frame_load_client),
	(athena_view_frame_notify_location_change),
	(athena_view_frame_notify_selection_change),
	(athena_view_frame_load_state), (athena_view_frame_save_state),
	(athena_view_frame_show_properties),
	(athena_view_frame_stop_location_change),
	(athena_view_frame_is_zoomable),
	(athena_view_frame_get_zoom_level),
	(athena_view_frame_set_zoom_level),
	(athena_view_frame_get_min_zoom_level),
	(athena_view_frame_get_max_zoom_level),
	(athena_view_frame_get_is_continuous),
	(athena_view_frame_zoom_in), (athena_view_frame_zoom_out),
	(athena_view_frame_zoom_to_fit), (athena_view_frame_get_iid),
	(athena_view_frame_get_client_objref),
	(athena_view_frame_get_objref),
	(athena_view_frame_request_location_change),
	(athena_view_frame_request_selection_change),
	(athena_view_frame_request_status_change),
	(athena_view_frame_request_progress_change),
	(athena_view_frame_notify_zoom_level), (check_object),
	(athena_view_frame_set_active_errors):
	* src/ntl-view.h:
	* src/ntl-window-msgs.c: (athena_window_notify_selection_change),
	(athena_window_request_selection_change),
	(athena_window_request_status_change),
	(athena_window_request_progress_change),
	(athena_window_request_title_change),
	(athena_window_update_internals), (athena_window_update_view),
	(athena_window_view_destroyed), (athena_window_load_meta_view),
	(athena_window_request_location_change),
	(athena_window_load_content_view),
	(athena_window_update_state), (athena_window_set_state_info),
	(athena_window_begin_location_change):
	* src/ntl-window-msgs.h:
	* src/ntl-window-private.h:
	* src/ntl-window.c: (zoom_in_cb), (zoom_out_cb),
	(athena_window_set_arg), (athena_window_send_show_properties),
	(view_menu_switch_views_callback),
	(athena_window_set_content_view),
	(athena_window_add_meta_view),
	(athena_window_remove_meta_view_real),
	(athena_window_remove_meta_view),
	(athena_window_request_location_change_cb),
	(athena_window_request_selection_change_cb),
	(athena_window_request_status_change_cb),
	(athena_window_request_progress_change_cb),
	(athena_window_request_title_change_callback),
	(athena_window_connect_view),
	(athena_window_connect_content_view),
	(athena_window_real_set_content_view):
	* src/ntl-window.h:
	Changed Athena*View classes to Athena*ViewFrame. This is
	something we had in RENAMING for some time, and it's consistent
	with Bonobo's naming of BonoboControl and BonoboControlFrame.
	Also changed interfaces to use actual BonoboControl * instead of
	using BonoboObject * and query_interface.
	
2000-05-23  Gene Z. Ragan  <gzr@eazel.com>

	* libathena/athena-undo-context.c:
	* libathena/athena-undo-context.h:
	(impl_Athena_Undo_Context__get_undo_manager),
	(athena_undo_context_new), (athena_undo_context_initialize):
	Additonal work on making the undo context CORBA object.
	
	* libathena/athena-undo-manager.c:
	* libathena/athena-undo-manager.h:
	* libathena/athena-undo-manager-private.h:
	(impl_Athena_Undo_Manager__undo),
	(athena_undo_manager_initialize),
	(athena_undo_manager_add_transaction),
	(athena_undo_manager_unregister_object),
	(athena_get_undo_manager), (athena_attach_undo_manager),
	Changed APIs to accept and return Athena_Undo_Manager CORBA
	object instead of AthenaUndoManager pointer.

	(athena_undo_setup_bonobo_control):
	Added function stub to be filled later.  This function
	will attach an undo manager to a bonobo control.

	Removed several functions no longer needed in new design,
	including athena_undo_manager_begin_transaction(),
	and athena_undo_manager_end_transaction().
	
	* src/athena-window-menus.c: (edit_menu_undo_callback),
	(athena_window_initialize_menus), (update_undo_menu_item):
	Changed to use modified undo API
	
	* src/ntl-app.c: 
	(athena_app_init):
	Changed to use modified undo API
	
	* src/ntl-window.c: (athena_window_constructed)
	Changed to use modified undo API

2000-05-23  Andy Hertzfeld  <andy@eazel.com>

	Made a preference for the anti-aliased canvas, and hooked it up so
	you can switch on the fly. Anti-aliased drawing is still only
	partially implemented, so it defaults off.
	
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	added a preference category "Appearance" and an entry for
	"smoother but slower"
	* libathena-extensions/athena-global-preferences.h:
	added ATHENA_PREFERENCE_ANTI_ALIASED_CANVAS
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_pixbuf_aa), (map_pixbuf), (athena_icon_canvas_item_draw),
	(athena_icon_canvas_item_render):
	made the render method draw right at different scales, partially
	implemented emblems
	* libathena-extensions/athena-icon-container.c: (destroy),
	(athena_icon_container_initialize),
	(athena_icon_container_new),
	(athena_icon_container_set_anti_aliased_mode),
	(click_policy_changed_callback),
	(anti_aliased_preferences_changed):
	receive notification when the anti-aliased preference changes, and
	update the canvas
	* libathena-extensions/athena-icon-container.h:
	added athena_icon_container_set_anti_aliased_mode
	
2000-05-22  Maciej Stachowiak  <mjs@eazel.com>

	Completed bugzilla task 763, Test component needed for failure
	cases. Two new components called "Content Loser" and "Sidebar
	Loser" will fail on startup based on environment variables or in
	response to menu or toolbar items (Darin suggested using silly
	names, though not these specific ones).
	
	* components/loser/README: Some docs on making the new components
	fail.

	* components/loser/content/main.c,
	components/loser/content/athena-content-loser.c,
	components/loser/content/athena-content-loser.h: New content
	view which fails on demand.
	* components/loser/content/athena-content-loser.oafinfo: oaf
	activation record for it.

	* components/loser/sidebar/main.c,
	components/loser/sidebar/athena-sidebar-loser.c,
	components/loser/sidebar/athena-sidebar-loser.h: New sidebar
	panel that fails on demand.
	* components/loser/sidebar/athena-sidebar-loser.oafinfo: oaf
	activation record for it.

	* components/Makefile.am, components/loser/Makefile.am,
	components/loser/content/Makefile.am,
	components/loser/sidebar/Makefile.am, configure.in: Added loser
	components to build.

	* athena-clean.sh: Added loser components to athena-clean.sh

2000-05-22  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages):
	* configure.in:
	* athena-installer/.cvsignore:
	* athena-installer/Makefile:
	* athena-installer/Makefile.am:
	* athena-installer/helixcode-utils.c: (xml_get_value),
	(prune_xml), (check_for_root_user), (check_for_redhat),
	(determine_redhat_version), (determine_mandrake_version),
	(determine_turbolinux_version), (determine_suse_version),
	(determine_debian_version), (determine_distribution_type),
	(get_distribution_name):
	* athena-installer/helixcode-utils.h:
	* athena-installer/athena-installer.c: (show_usage),
	(show_license), (init_default_iopts), (init_default_topts),
	(create_temporary_directory), (fetch_remote_package_list), (main):
	Adding a simple implementation of the athena-installer.  Beginning
	of the fix for Bug # 863.  This is a statically linked command line
	implementation only right now.

2000-05-22  Eskil Heyn Olsen  <eskil@eazel.com>

	* src/ntl-app.c (display_prototype_caveat): Changed to simply use
	a gnome_warning_dialog instead of a athena_simple_dialog. We
	loose the word wrapping though. But now the main window loads
	while the warning is present, plus it's a real GNOME warning box,
	so be afraid...
	(display_prototype_caveat): If ATHENA_NO_CAVEAT_DIALOG is set,
	do not display the caveat warning.

	* components/services/time/service/trilobite-eazel-time-service.oafinfo: 
	* components/services/trilobite/sample/service/trilobite-eazel-sample-service.oafinfo: 
	Fixed faulty tags
	
2000-05-22  Darin Adler  <darin@eazel.com>

	* components/services/time/command-line/.cvsignore:
	Ignore some generated files.

	* components/services/time/service/trilobite-eazel-time-service.oafinfo: 
	Eskil rescued this file from the attic, but he probably won't think
	that's worth putting into the change log :-)

2000-05-22  Darin Adler  <darin@eazel.com>

	Implemented Reload for directory views.
	
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory-async.c:
	(athena_directory_monitor_add_internal),
	(dequeue_pending_idle_callback), (cancel_directory_load),
	(directory_load_done),
	(athena_directory_monitor_remove_internal),
	(athena_directory_call_when_ready_internal),
	(mark_all_files_unconfirmed), (start_monitoring_file_list),
	(athena_directory_stop_monitoring_file_list),
	(athena_directory_force_reload):
	* libathena-extensions/athena-directory.c:
	(call_files_changed_unref_free_list),
	(athena_directory_notify_files_removed),
	(athena_directory_notify_files_moved),
	(athena_directory_file_monitor_add):
	* libathena-extensions/athena-file-private.h:
	* libathena-extensions/athena-file.c: (athena_file_get),
	(destroy), (athena_file_monitor_remove), (athena_file_delete),
	(athena_file_mark_gone), (athena_file_changed),
	(athena_file_emit_changed):
	Added the necessary tweaks to the async. I/O so we can handle
	a reload, not just the initial load.
	
	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_add): Changed API so it will detect if
	you try to add the same item twice and indicate it with a return
	value; needed so we can handle reload.
	
	* libathena-extensions/athena-list.c: (set_single_click_mode),
	(update_single_click_mode_from_preferences),
	(athena_list_initialize), (click_policy_changed_callback):
	Fixed bug where a change in single click mode would chang the
	appearance of the names in the list, but not cause a redraw when
	the setting was changed.
	
	* libathena/athena-undoable.c:
	(undo_atom_destroy_callback_data), (undo_atom_destroy),
	(undo_atom_destroy_callback_data_g_func_cover),
	(athena_undo_register_full):
	Fixed a bug where it would try to destroy the undo atom even when
	it didn't own it.
	
	* libathena/athena-undoable.h:
	Got rid of some cruft I left in here by accident.
	
	* src/file-manager/fm-icon-view.c: (fm_icon_view_add_file):
	* src/file-manager/fm-list-view.c: (fm_list_view_add_file):
	Only add the files if they are not already in the list. This is
	needed for reload.
	
	* src/ntl-main.c: (main): Tweaked this function to be easier to
	understand and better organized. Also added a "desktop" option
	as a start for my next task.

2000-05-22  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/trilobite/src/trilobite-service-private.h: 
	* components/services/trilobite/src/trilobite-service-public.h: 
	* components/services/trilobite/src/trilobite-service.c:
	Changed for the _uri change.
	
	* components/services/trilobite/sample/service/main.c: 
	* components/services/trilobite/sample/command-line/main.c: 
	Changed for the new OAFID's.

	* components/services/trilobite/idl/trilobite-service.idl: 
	Removed the _uri from get_icon_uri

	* components/services/time/service/trilobite-eazel-time-service.c:
	Better error handling, eg. for bad urls and whatnot.

	* components/services/time/service/Makefile.am (pixmap_DATA): 
	Installs an icon for the service (now we need an icon)

	* components/services/time/idl/trilobite-eazel-time-service.idl: 
	Added two strings to the CannotGetTime exception.

	* components/services/time/command-line/main.c (main): 
	Updated to use the new oafids. Better error handling.

	* components/services/Makefile.am (SUBDIRS): 
	Added the time service

	* components/services/trilobite/sample/service/trilobite-eazel-sample-service.oafinfo: 
	* components/services/time/service/trilobite-eazel-time-service.oafinfo: 
	Added attributes to the oafinfo files. Also gave them some real oafids.
	
2000-05-22  Andy Hertzfeld  <andy@eazel.com>

	fixed task 514, show file/folder permissions with emblems.
	
	* icons/Makefile.am:
	* icons/emblem-noread.png:
	* icons/emblem-nowrite.png:
	added Susan's emblems for "cant read" and "cant write"
	
	* libathena-extensions/athena-file.c:
	(athena_file_get_emblem_names):
	made get_emblem_names return appropriate keywords when we can't
	read the file or we can't write it.
	
2000-05-22  John Sullivan  <sullivan@eazel.com>

	* src/ntl-app.c: (display_prototype_caveat): Tweaked
	wording to match Maciej & Arlo's latest agreement. 

2000-05-22  John Sullivan  <sullivan@eazel.com>

	Put up a "Athena is still flaky" dialog at launch so
	people who obtain Athena some random way won't expect
	too much.

	* src/ntl-app.c: (display_prototype_caveat),
	(athena_app_startup): Put up simple text-only modal
	dialog at launch.

2000-05-22  Andy Hertzfeld  <andy@eazel.com>

	first, incomplete attempt to use the anti-aliased canvas.
	For now, it's a compile-time flag in athena-icon-container to
	optionally enable it, and there's no text drawing in aa mode yet.
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_initialize_class), (draw_pixbuf),
	(athena_icon_canvas_item_render):
	added a render method to draw the item in anti-aliased mode
	
	* libathena-extensions/athena-icon-container.c:
	(start_rubberbanding), (athena_icon_container_new):
	optionally put the canvas in anti-aliased mode if a compile-time
	flag is set; added code to make the selection rectangle semi-transparent
	in anti-aliased mode.
	
	* libathena-extensions/athena-icon-dnd.c:
	(athena_icon_dnd_begin_drag):
	at Arlo's suggestion, changed the alpha threshold used to compute
	the pixmap to drag from the pixbuf, so it doesn't look so lumpy when
	there's lots of information in the alpha channel
	
2000-05-22  J Shane Culpepper  <pepper@eazel.com>

	* components/services/time/service/.cvsignore: Adding .cvsignore.

2000-05-22  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/command-line/eazel-install.c:
	(show_usage), (main):

	Cosmetic fixes to the command line options.

2000-05-22  Ian McKellar  <yakk@yakk.net>

	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.c:
	(athena_directory_new), (athena_directory_is_local):
	* libathena-extensions/athena-directory.h:
	* libathena-extensions/athena-file.c: (athena_file_is_local):
	* libathena-extensions/athena-file.h:
	Added athena_directory_is_local and athena_file_is_local.

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog),
	(global_preferences_register_for_ui):
	* libathena-extensions/athena-global-preferences.h:
	Added a preference to specify whether to display detailed remote
	views.

	* libathena-extensions/athena-directory-async.c:
	(state_changed):
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file):
	Only download top left text if the file is local or if
	the user has specified that they want detailed remote views.

2000-05-21  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(make_thumbnail_path):
	fixed bad bug introduced a few days ago that made thumbnailing no longer work - it was
	appending ".png" to directory names.
	* libathena-extensions/athena-graphic-effects.c:
	(athena_draw_frame):
	made the thumbnail frame drop shadow lighter
	
2000-05-21  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c: (get_song_text):
	fixed a crash in the music view due to uninitialized variables that occured when
	the album name was not present.
	
2000-05-21  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/command-line/Makefile.am:
	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file):
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages):
	* components/services/install/lib/eazel-install-rpm-glue.h:

	Added async http fetches of remote files.  Fix for bug # 810.

2000-05-21  J Shane Culpepper  <pepper@eazel.com>

        * components/services/install/lib/eazel-install-rpm-glue.c:
        (install_new_packages), (uninstall_packages), (do_rpm_install),
        (do_rpm_uninstall), (rpm_uninstall): Adding uninstall depend checks.
        More fixes for Bug # 731. Added a few minor tweaks to the rpm install
        functions.

2000-05-21  Ettore Perazzoli  <ettore@helixcode.com>

	* components/html/ntl-web-browser.c: Updated for latest GtkHTML
	API that uses `GtkHTMLStream *' instead of `GtkHTMLStreamHandle'.
	(browser_goto_url_real): No need to pass the url to
	`gtk_html_begin()' anymore.  Also, call the
	`browser_url_requested()' signal explicitly because
	"url_requested" is not emitted by `gtk_html_begin()' anymore.

2000-05-21  Ettore Perazzoli  <ettore@helixcode.com>

	* components/notes/Makefile.am (INCLUDES): Add
	`-I$(top_builddir)/libathena'.

2000-05-20  Andy Hertzfeld  <andy@eazel.com>

	* components/music/mpg123_handler.c: (sigchld_handler),
	(start_playing_file), (stop_playing_file):
	* components/music/athena-music-view.c: (selection_callback),
	(update_play_controls_status), (reset_playtime),
	(play_status_display), (go_to_next_track), (slider_moved_callback),
	(xpm_dual_label_box), (add_play_controls):
	pretty much finished up playing in the music view.  Made it reflect
	play and pause status, advance to the next track when a song is completed,
	and terminate at the end of the last song.  Made clicking on a new song
	while playing work properly.
	
	* components/music/pixmaps.h:
	added colored play and pause images to reflect status

2000-05-20  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/command-line/eazel-install.c: (main):
	fixed the package list generation routine.  It was corrupting the
        eazel-services-config.xml file instead of creating a package-list.xml.
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (rpm_show_progress), (do_rpm_install),
	(rpm_install): Found the magic function rpmRunTransactions that allows
	me to check for dependancies and get a progress callback without having
	to hack rpmlib like helixcode did.  These functions need to be cleaned
	up because they are too long but they work very well.
	This is part of the fix of Bug # 731.  Need to clean up the uninstall
	routine now as well using rpmRunTransactions instead of rpmErase.

2000-05-20  Andy Hertzfeld  <andy@eazel.com>

	* components/music/mpg123_handler.c: (get_play_status),
	(get_current_frame), (set_current_frame), (parse_header_info):
	* components/music/mpg123_handler.h:
	* components/music/athena-music-view.c:
	(athena_music_view_initialize), (get_song_text),
	(music_view_set_selected_song_title), (play_status_display),
	(play_current_file), (stop_if_playing), (go_to_next_track),
	(go_to_previous_track), (play_button_callback),
	(prev_button_callback), (next_button_callback),
	(slider_press_callback), (slider_moved_callback),
	(slider_release_callback), (add_play_controls),
	(athena_music_view_update_from_uri):
	
	made all of the play command buttons in the music view work correctly, although
	they still don't give play state feedback by hilighting properly.  Also, added a
	timeout task, removed the volume slider and made the play time slider work.
	
2000-05-19  Ettore Perazzoli  <ettore@helixcode.com>

	* libathena/Makefile.am (INCLUDES): Add `-I.' so that it works
	with builddir != srcdir.

	* libathena-extensions/Makefile.am (INCLUDES): Add
	`-I$(top_builddir)/libathena' that it works with builddir !=
	srcdir.  [This module needs generated include files from the
	builddir.]
	* src/Makefile.am (INCLUDES): Likewise.

2000-05-20  Andy Hertzfeld  <andy@eazel.com>

	After Maciej's checkin, I didn't kill oafd so I was getting OAFIIDs as sidebar panel labels.
	We should never show the user OAFIIDs, even as a fallback, so I added a little code
	to clean them up before displaying them.
	* libathena-extensions/athena-view-identifier.c:
	(athena_view_identifier_new_from_oaf_server_info):

2000-05-19 Andy Hertzfeld  <andy@eazel.com>

	* components/music/mpg123_handler.c: (parse_header_info),
	(start_playing_file), (stop_playing_file), (pause_playing_file):
	* components/music/mpg123_handler.h:
	* components/music/athena-music-view.c: (selection_callback),
	(play_button_callback), (stop_button_callback),
	(pause_button_callback):
	made basic playing from the music view work.  The play, stop and pause button
	now work, but there's still a lot more refinement necessary
	
2000-05-19  Maciej Stachowiak  <mjs@eazel.com>

	Fix bugzilla tasks #599 (hex number is bad default for meta view
	names) and #631 (nead oaf query to determine metaviews).

	* libathena-extensions/athena-view-identifier.h,
	libathena-extensions/athena-view-identifier.c:
	(athena_view_identifier_new, get_lang_list,
	athena_view_identifier_new_from_oaf_server_info,
	athena_view_identifier_free): Moved AthenaViewIdentifier code
	here from ntl-uri-map.[ch].
	(athena_view_identifier_new_from_content_view),
	(athena_view_identifier_new_from_sidebar_panel),
	(athena_view_identifier_free_callback),
	(athena_view_identifier_free_list): New functions.
	* libathena-extensions/Makefile.am: Add
	athena-view-identifier.[ch] to build.
	* src/ntl-types.h: Removed typedef for AthenaViewIdentifier.

	* libathena-extensions/athena-glib-extensions.h:
	* libathena-extensions/athena-glib-extensions.c
	(athena_g_list_free_deep_custom): New function, like
	`athena_g_list_free_deep' but lets you pass your own free
	function.
	(athena_g_list_free_deep): Use `athena_g_list_free_deep_custom'
	(athena_g_list_partition): New function to destructively
	partition a GList into two, depending on whether they satisfy the
	provided predicate or not.
	(athena_test_predicate), (athena_self_check_glib_extensions):
	Added unit tests for `athena_g_list_partition' and for
	`athena_g_list_equal' since the `athena_g_list_partition'
	tests rely on it.
	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_moved): Use
	`athena_g_list_free_deep_custom'.
	* libathena-extensions/athena-gdk-pixbuf-extensions.c
	(athena_gdk_pixbuf_list_free): Likewise.
	* libathena-extensions/athena-icon-factory.c
	(athena_scalable_icon_list_free): Likewise.
	* libathena-extensions/athena-string-list.c
	(athena_string_list_clear): Likewise.
	* athena-widgets/athena-preferences.c (pref_hash_node_free,
	prefs_hash_lookup_with_implicit_registration): Likewise.
	
	* libathena-extensions/athena-global-preferences.c,
	libathena-extensions/athena-global-preferences.h
	(global_preferences_create_dialog,
	athena_global_preferences_get_sidebar_panel_view_identifiers,
	athena_global_preferences_get_meta_view_iids,
	athena_preferences_register_meta_view_preferences_for_ui,
	global_preferences_register_for_ui): Change things around to
	determine the set of sidebar panel prefs at run time, and to pass
	around AthenaViewIdentifiers rather than just iid strings so we
	can use the statically defined name in the oafinfo.

	* src/ntl-uri-map.h, src/ntl-uri-map.c: (set_initial_content_iid,
	got_file_info_callback, sidebar_panel_preference_is_on,
	(add_sidebar_panel_identifiers, athena_navigation_info_free):
	Changed things around to better handle sidebar panel (AKA meta
	view) selection, and pass around both name and iid.

	* src/ntl-window-msgs.c:
	(athena_window_request_selection_change,
	athena_window_has_really_changed,
	athena_window_load_meta_view, athena_window_update_state,
	athena_window_set_state_info): Fixed everything to pass around
	ViewIdentifiers instead of iids for sidebar panels and set the
	label approrpiately when activating; replaced a whole bunch of
	GSList usage with GList (we can always optimize this stuff later).
	* src/ntl-window.h, src/ntl-window.c: (athena_window_destroy,
	athena_window_load_content_view_menu,
	athena_window_set_content_view, athena_window_add_meta_view,
	athena_window_remove_meta_view_real,
	athena_window_remove_meta_view): Deal with the above changes
	(mostly GSList -> GList changes).

	* src/ntl-view-bonobo-control.c, src/ntl-view-bonobo-subdoc.c,
	src/ntl-view-athena.c, src/ntl-view-private.h: Remove all
	get_label related calls since we get that from the oafinfo now.
	* libathena/athena-meta-view-frame.h,
	libathena/athena-meta-view-frame.c:
	(athena_meta_view_frame_initialize,
	athena_meta_view_frame_new_from_bonobo_control,
	athena_meta_view_frame_destroy): Remove
	`athena_meta_view_frame_set_label' machinery and associated
	machinery since we now get the label statically from the oafinfo.
	* components/history/ntl-history-view.c: (make_obj): Don't call
	`athena_meta_view_frame_set_label' any more, the label is now
	statically determined from the oafinfo file.
	* components/notes/ntl-notes.c: (make_notes_view): Likewise.
	* components/websearch/ntl-web-search.c: (make_obj): Likewise.
	* components/help/hyperbola-nav-index.c: Likewise.
	(hyperbola_navigation_index_new): Likewise.
	* components/help/hyperbola-nav-search.c: Likewise.
	(hyperbola_navigation_search_new): Likewise.
	* components/help/hyperbola-nav-tree.c: Likewise.
	(hyperbola_navigation_tree_new): Likewise.
	* src/ntl-meta-view.h, src/ntl-meta-view.c:
	(athena_meta_view_set_label),
	(athena_meta_view_get_label): Have an explicit value to set,
	rather than trying to get it through CORBA. This is kind of a
	hack, really we should pass around a label and a AthenaMetaView
	separately and remove this stuff.
	* components/help/hyperbola.oafinfo,
	components/notes/ntl-notes.oafinfo,
	components/websearch/ntl-web-search.oafinfo,
	components/history/ntl-history-view.oafinfo: Updated to include
	latest Athena attributes.
	
2000-05-19  Andy Hertzfeld  <andy@eazel.com>

	* components/music/Makefile.am:
	* components/music/mpg123_handler.c: (sigchld_handler),
	(parse_header_info), (parse_frame_info), (stop_data),
	(song_finished), (parse_pipe_buffer), (check_pipe_for_data),
	(read_data), (start_playing_file), (stop_playing_file),
	(do_mpg123_pause):
	* components/music/mpg123_handler.h:
	* components/music/athena-music-view.c: (selection_callback),
	(play_button_callback), (stop_button_callback),
	(pause_button_callback), (prev_button_callback),
	(next_button_callback), (add_play_controls):
	added playing code to the music view, but it's still not working
	so it's disabled
	
2000-05-19  Eskil Heyn Olsen  <eskil@eazel.com>

	* configure.in:
	added the components/services/time/ makefiles

	* components/services/time/service/trilobite-eazel-time-service.oafinfo: 
	Fixed the horribly cut'n'paste errors.

	* components/services/time/service/trilobite-eazel-time-service-public.h:
	Stripped some superflous stuff from the TrilobiteEazelTimeService
	structure.

	* components/services/time/command-line/main.c (main): 
	Implemented the basic cli for the time service

	* components/services/time/idl/trilobite-eazel-time-service.idl: 
	The check_time now returns the difference instead of a bool. If
	diff != 0, your clock is wrong (or the server is).

	* components/services/time/command-line/Makefile.am:
	Lot of juju to make the time service cli work

	* components/services/trilobite/src/trilobite-service.c
	(trilobite_service_create_corba_object): Uncommented some
	more g_message noise

	* components/services/trilobite/src/libtrilobited.h: 
	Now assuming the libtrilobited headers are in libtrilobite/, not
	libtrilobited/

	* components/services/trilobite/sample/command-line/Makefile.am: 
	Some idl compiling rearranging.

2000-05-19  Gene Z. Ragan  <gzr@eazel.com>
	
	* libathena/athena-undo-context.c:
	* libathena/athena-undo-context.h:
	(impl_Athena_Undo_Context__destroy),
	(impl_Athena_Undo_Context__create),
	(impl_Athena_Undo_Context__get_undo_manager),
	(athena_undo_context_new), (athena_undo_context_initialize),
	(athena_undo_context_initialize_class), (destroy):
	GTK and CORBA object that acts as interface to an undo manager.
	
	* libathena/Makefile.am:
	Added entries for new AthenaUndoContext files. 
	
	* libathena/athena-undo-manager.c:		
	(impl_Athena_Undo_Manager__forget), (athena_undo_manager_undo),
	(athena_undo_manager_unregister_object),
	(get_current_transaction_name), (free_undo_manager_list_data),
	(prune_undo_manager_list):
	Removed all references to AthenaUndoTransaction and changed them to use
	the Athena_Undo_Transaction CORBA object instead.

2000-05-19  Darin Adler  <darin@eazel.com>

	* components/services/trilobite/sample/command-line/.cvsignore:
	* components/services/trilobite/sample/service/.cvsignore:
	File name changes.
	
	* libathena-extensions/athena-directory.c:
	(athena_directory_file_monitor_add),
	(athena_self_check_directory):
	* libathena-extensions/athena-directory.h:
	* src/file-manager/fm-directory-view.c: (finish_loading_uri):
	Added reload interface.
	
	* libathena/athena-undoable.c: (athena_undo_register),
	(undo_atom_destroy), (undo_atom_destroy_notify_cover),
	(undo_atom_destroy_g_func_cover), (save_callback),
	(restore_callback), (athena_undo_register_full),
	(athena_undo_unregister), (athena_undo):
	* libathena/athena-undoable.h:
	Implemented new simplified Undo API.
	
	* libathena-extensions/athena-entry.c:
	(athena_entry_initialize), (athena_entry_destroy),
	(athena_entry_key_press), (athena_entry_changed),
	(register_edit_undo), (update_undo_text),
	(restore_from_undo_snapshot_callback),
	(athena_entry_enable_undo):
	* libathena-extensions/athena-icon-container.c:
	(hide_rename_widget):
	* libathena-extensions/athena-icon-text-item.c: (iti_event),
	(register_rename_undo), (restore_from_undo_snapshot_callback):
	* src/athena-bookmarks-window.c: (on_window_delete_event):
	* src/athena-location-bar.c: (destroy):
	Use new simplified Undo API.
	
	* libathena/athena-undo-manager.h:
	Remove UNDO_MANAGER_NAME, which is no longer used.
	
	* src/file-manager/fm-icon-view.c:
	(icon_position_changed_callback): Fixed a bad g_free that was
	cause seg faults when you resized an icon.
	
2000-05-19  John Sullivan  <sullivan@eazel.com>

	Finished task 174 (make "Open in new window" preference
	sensible)

	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog), 
	(global_preferences_register_for_ui): Consolidated "Window
	Options" pane & "Click Policy" pane into new "Directory 
	Views" pane, to make it clear that these preferences apply 
	just to directory views. Also removed unimplemented "use 
	existing window for same location" preference that is not 
	in our plans. Tweaked wording a little.

	* libathena-extensions/athena-global-preferences.h:
	* libathena-extensions/athena-icon-canvas-item.c:
	(in_single_click_mode): New function, checks preference.
	(draw_or_measure_label_text): Don't draw underlines on icons
	if we're not in single-click mode.

2000-05-19  John Sullivan  <sullivan@eazel.com>

	A few tweaks to this new class inspired by Darin's
	review.

	* libathena-extensions/athena-keep-last-vertical-box.c:
	(athena_keep_last_vertical_box_new): More comments.
	(athena_keep_last_vertical_box_size_allocate): More comments.
	Also now handles the case where the last item doesn't fit
	even all by itself by moving & shrinking it to fit. Previously 
	the last item would be left at its original position & size in 
	this case.

2000-05-19  Gene Z. Ragan  <gzr@eazel.com>

	More undo framework work.  Still incomplete.
	
	* libathena-extensions/athena-entry.c:
	(athena_entry_changed):
	Modified to use new undo manager location API
	
	* libathena-extensions/athena-icon-text-item.c: 
	(iti_event),
	(restore_from_undo_snapshot_callback):
	Modified to use new undo manager location API

	* libathena/athena-undo-manager.c:
	* libathena/athena-undo-manager.h:
	(impl_Athena_Undo_Manager__create),
	(impl_Athena_Undo_Manager__append),
	(impl_Athena_Undo_Manager__forget),
	(athena_undo_manager_begin_transaction),
	(athena_undo_manager_end_transaction),
	(athena_undo_manager_undo), (athena_undo_manager_redo),
	(athena_undo_manager_add_transaction),
	(athena_undo_manager_unregister_object),
	(free_undo_manager_list_data), (prune_undo_manager_list):
	Modified to use new API and Undo::Manager::Transaction 

	* libathena/athena-undo-transaction.c:
	* libathena/athena-undo-transaction.h:
	(impl_Athena_Undo_Transaction__destroy),
	(impl_Athena_Undo_Transaction__create),
	(impl_Athena_Undo_Transaction__get_undo_description),
	(impl_Athena_Undo_Transaction__get_redo_description),
	(impl_Athena_Undo_Transaction__get_base_description),
	(impl_Athena_Undo_Transaction__undo),
	(athena_undo_transaction_new),
	(athena_undo_transaction_initialize),
	(athena_undo_transaction_destroy),
	(athena_undo_transaction_initialize_class),
	(athena_undo_transaction_undo),
	(athena_undo_transaction_contains_object):
	Added support for new Undo::Manager::Transaction object

2000-05-19  Ali Abdin  <aliabdin@aucegypt.edu>

	* components/help/converters/gnome-db2html2/gdb3html.c:
	(main): Fixed a typo - This fixed BUG #930

	* components/help/converters/gnome-info2html2/main.c:
	(main): Fixed it to it looks in /usr/info always and then any
	other fir found in the INFOPATH variable - Fixes bug #934 but
	there is a suggestion in there I think should be implemented
	(since I wrote it - DOH!).

2000-05-19  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_initialize), (get_song_text),
	(music_view_set_selected_song_title), (selection_callback),
	(sort_by_bitrate), (sort_song_list), (add_play_controls),
	(athena_music_view_update_from_uri):
	fixed bug where sorting by time was wrong because I added the bitrate column,
	added sorting by bitrate,
	more work on the play controls, but they don't actually play yet
	
2000-05-18  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/trilobite/sample/command-line/Makefile.am:
	* components/services/trilobite/sample/command-line/main.c: 
	Did some athena to trilobite renaming.

	* components/services/time/service/trilobite-eazel-time-service.oafinfo: 
	* components/services/time/service/main.c: 
	* components/services/time/service/trilobite-eazel-time-service-public.h:
	* components/services/time/service/trilobite-eazel-time-service-private.h: 
	* components/services/time/service/trilobite-eazel-time-service.c:
	* components/services/time/service/Makefile.am:
	* components/services/time/idl/trilobite-eazel-time-service.idl: 
	Added the first stuff for the time service

	* components/services/trilobite/src/trilobite-service.c: 
	removed some g_messages

	* components/services/trilobite/sample/service/sample-service-public.h (struct _SampleService):
	removed superflous element servant;

	* components/services/trilobite/sample/service/sample-service-impl.c: 
	Added a lot of comments for educational purpose. Also changed
	the parent class pointer to be of type BonoboObjectClass.

	* components/services/trilobite/sample/service/main.c: 
	Did some athena to trilobite renaming.

	* components/services/trilobite/sample/service/Makefile.am:
	Did some athena to trilobite renaming.

2000-05-19  Yukihiro Nakai <nakai@gnome.gr.jp>

	* configure.in: Add Japanese from Akira Tagoh.

2000-05-18  John Sullivan  <sullivan@eazel.com>

	Finished task 598 (Command button layout should account
	for window height)

	* libathena-extensions/athena-keep-last-vertical-box.h,
	* libathena-extensions/athena-keep-last-vertical-box.c:
	New files, subclass of GtkVBox that truncates contents to
	fit, except last item which is always kept. (GtkVBox in the
	same situation just merrily places its child widgets outside
	of its allocation.)
	* libathena-extensions/Makefile.am: Build the new files.

	* src/ntl-index-panel.c: 
	(make_button_box): Use AthenaKeepLastVerticalBox so only
	as many command buttons appear as fit, and the "Open with ..."
	button always appears; also embed this box in a GtkHBox to
	get horizontal sizing the way we want it.
	(add_command_buttons): Add (not yet active) "Open with ..."
	button.
	(athena_index_panel_update_buttons): Throw away the
	GtkHBox containing the button box instead of the button
	box itself.

2000-05-18  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c: (extract_initial_number),
	(fetch_song_info):
	put in heuristic to grab the track number from the beginning of
	the file name if it's present there and not encoded in the id3 tag
	
2000-05-18  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-graphic-effects.c,h:
	(athena_draw_frame):
	added routine to draw a frame with a drop-shadow into a pixbuf
	* libathena-extensions/athena-icon-factory.c:
	(make_thumbnail_path), (athena_icon_factory_make_thumbnails):
	at Arlo's suggestion, made thumbnails have drop shadows.  Enhanced
	the routine that was drawing the frame and moved it into graphic
	effects.  Also, fixed an embarrasing bug where thumbnails for
	non-png images were being stored in weird directories with the
	proper extension.
	
2000-05-18  Darin Adler  <darin@eazel.com>

	* libathena/Makefile.am:
	* src/file-manager/Makefile.am:
	Eskil showed me how to fix these so they'd work when orbit-idl
	was not in the path at compile time.

2000-05-18  Darin Adler  <darin@eazel.com>

	* HACKING: Change format to make popt "pop" out more.
	
	* libathena-extensions/athena-entry.h:
	* src/file-manager/fm-properties-window.c: (create_basic_page):
	* src/athena-bookmarks-window.c: (on_text_field_focus_in_event),
	(on_window_delete_event):
	* src/athena-location-bar.c: (athena_location_bar_enable_undo):
	* src/athena-location-bar.h:
	* src/athena-window-menus.c: (edit_menu_undo_callback),
	(bookmarks_menu_add_bookmark_callback),
	(bookmarks_menu_edit_bookmarks_callback),
	(get_or_create_bookmarks_window), (athena_bookmarks_exiting),
	(edit_bookmarks), (athena_window_initialize_menus),
	(update_undo_menu_item):
	* src/ntl-app.c: (athena_app_init), (athena_app_destroy):
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_start_renaming_selected_item):
	* libathena-extensions/athena-entry.c:
	(athena_entry_key_press), (athena_entry_enable_undo):
	* libathena/athena-undo-manager.c:
	(athena_undo_manager_begin_transaction),
	(athena_undo_manager_unregister_object),
	(prune_undo_manager_list), (athena_get_undo_manager),
	(athena_attach_undo_manager), (athena_share_undo_manager):
	* libathena/athena-undo-manager.h:
	* src/ntl-window-private.h:
	* src/ntl-window.c: (athena_window_constructed),
	(athena_window_real_set_content_view),
	(athena_window_get_undo_manager):
	* src/ntl-window.h:
	Got rid of the undo manager parameter for the enable_undo
	operation.
	Eliminated code that sets up the undo manager except for the top
	widgets. We only need it attached to windows and to the top widget
	in each component.
	Change callers to get the undo manager in a few simple ways
	instead of calling gtk_object_get_data directly. Added some calls
	to attach the undo manager to an arbitrary object.
	
	* libathena/athena-undo.idl: Added comments to the IDL and
	also added the Undo::Context class.
	
	* libathena/athena-view-component.idl: Removed the dependency
	on the undo IDL and the undo_manager attribute.
	
	* src/athena-bookmarks-window.h:
	* src/athena-bookmarks-window.c: (create_bookmarks_window):
	Changed interface to take object to inherit the undo manager from
	instead of the undo manager itself. Got rid of unnecesary undo
	manager setting.
	(athena_bookmarks_window_save_geometry): Also changed interface
	to use GtkWindow instead of GtkWidget.
	
2000-05-18  John Sullivan  <sullivan@eazel.com>

	Added the ability to switch sort order in Icons view. Note
	that one time while developing this I saw a problem at startup
	where the icons all danced back and forth a few pixels forever.
	I can't reproduce this, so I don't think my changes caused it,
	but be wary of the evil jig-dancing icons.

	* libathena-extensions/athena-metadata.h:
	Added #define for icon view sort direction.
	
	* src/file-manager/fm-icon-view.c: 
	Added sort_reversed to FMIconViewDetails;
	(update_layout_menus): Set sensitivity of "Ascending"/"Descending"
	menu items appropriately, and activate the right one.
	(set_sort_reversed), (get_sort_reversed_from_menu_path),
	(sort_direction_callback): New functions used for setting
	the sort direction.
	(fm_icon_view_begin_loading): Read sort direction from metadata.
	(fm_icon_view_merge_menus): Add sort-direction menu items to 
	Layout menu.
	(icon_container_compare_icons_callback): Take sort direction
	into account.

2000-05-18  Andy Hertzfeld  <andy@eazel.com>

	* components/music/Makefile.am:
	* components/music/athena-music-view.c:
	(athena_music_view_initialize), (format_play_time),
	(button_callback), (slider_press_callback),
	(slider_moved_callback), (slider_release_callback),
	(volume_callback), (xpm_label_box), (add_play_controls),
	(athena_music_view_update_from_uri):
	added a "bitrate" column to the music view, started adding 
	the play controls, but not yet finished, so they're 
	disabled for now
	* components/music/pixmaps.h:
	some inline images for the buttons
		
2000-05-17  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/trilobite/sample/service/sample-service-impl.c:
	Added a bug for the destroyer

	* components/services/trilobite/sample/service/main.c:
	the trilobite creating now uses gtk_object_new to
	set the name, version and such.

	* components/services/trilobite/src/trilobite-service-public.h
	* components/services/trilobite/src/trilobite-service.c:
	defined a set of set_* methods for the name, version
	and friends. Also added gtk_arg stuff to trilobite for
	these fields. The default of these is now NULL. Had to
	restructure the _initialize call to make gtk_object_new
	work.

2000-05-17  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/dfos-xfer.c: (fs_xfer), (fs_move_to_trash):
	Fixed 636 -  don't allow copying into Trash. Also added 
	checks for Trashing the Trash, moving or copying the Trash,
	Trashing the parents of Trash, moving and copying folders in 
	their children.

	* libathena-extensions/athena-icon-dnd.c:
	(athena_icon_container_selection_items_local):
	Fix 625: move uri_is_parent into a new call in GnomeVFS and 
	added more features that I needed for the above fix.

2000-05-17  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-caption-table.c:
	(athena_caption_table_resize), (athena_caption_table_new):
	* athena-widgets/athena-caption-table.h:
	Make the resize function public.
	
2000-05-17  John Sullivan  <sullivan@eazel.com>

	* src/ntl-index-panel.c: (make_button_box),
	(athena_index_panel_initialize), (add_command_buttons):
	A little widget-packing tweaking with the command buttons.
	It's not right yet, but I want to check this in so I can
	work on it later from home.

2000-05-17  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c: (selection_callback),
	(release_song_info), (is_mp3_file), (read_id_tag),
	(scan_for_header), (fetch_bit_rate), (fetch_play_time),
	(format_play_time), (fetch_song_info),
	(athena_music_view_update_from_uri):
	fixed bug 722, music view should use gnome-vfs for all file operations,
	by rewriting the above routines to use gnome-vfs
	
2000-05-17  Gene Z. Ragan  <gzr@eazel.com>

	First phase of modifying undo code.  These changes
	affect the way undo is handled internally to Athena and
	also defines a new IDL.  This is work in progress.
	
	* libathena-extensions/athena-entry.c:
	Modified to use gtk_object_get_data() mechanism to locate undo manager

	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_start_renaming_selected_item):
	Modified to use gtk_object_get_data() mechanism to locate undo manager
	
	* libathena-extensions/athena-icon-text-item.c: (iti_event),
	(restore_from_undo_snapshot_callback):
	Modified to use gtk_object_get_data() mechanism to locate undo manager

	* libathena/.cvsignore:
	Added generated IDL source and header files to ignore
	
	* libathena/Makefile.am:
	Modified makefile to include new IDL file for undo manager
	
	* libathena/athena-undo-manager.c:
	(impl_Athena_Undo_Manager__destroy),
	(impl_Athena_Undo_Manager__create),
	(impl_Athena_Undo_Manager__append),
	(impl_Athena_Undo_Manager__forget),
	(athena_undo_manager_initialize),
	(athena_undo_manager_initialize_class),
	(athena_undo_manager_begin_transaction),
	(athena_undo_manager_end_transaction),
	(athena_undo_manager_undo), (athena_undo_manager_redo),
	(athena_undo_manager_add_transaction),
	(athena_undo_manager_unregister_object),
	(athena_undo_manager_can_undo), (athena_undo_manager_can_redo),
	(get_current_transaction_name),
	(athena_undo_manager_get_current_undo_transaction_name),
	(athena_undo_manager_get_current_redo_transaction_name),
	(destroy), (athena_undo_manager_enable_redo),
	(athena_undo_manager_set_queue_depth),
	(free_undo_manager_list_data), (prune_undo_manager_list):
	Changes to support new IDL and new undo manager mechanism.
	
	* libathena/athena-undo.idl:
	New undo manager IDL file

	* libathena/athena-undo-manager-component.idl:
	Removed old undo manager IDL file
	
	* src/file-manager/fm-properties-window.c: 
	(create_basic_page):
	Modified to use gtk_object_get_data() mechanism to locate undo manager
	
	* src/athena-bookmarks-window.c: 
	(create_bookmarks_window),
	(on_text_field_focus_in_event), 
	(on_window_delete_event):
	Modified to use gtk_object_get_data() mechanism to locate undo manager
	
	* src/athena-location-bar.c:
	(athena_location_bar_set_location),
	(athena_location_bar_enable_undo):
	Modified to use gtk_object_get_data() mechanism to locate undo manager
	
	* src/athena-window-menus.c: 
	(edit_menu_undo_callback),
	(edit_menu_cut_callback), 
	(bookmarks_menu_edit_bookmarks_callback),
	(get_bookmarks_window), 
	(athena_bookmarks_exiting),
	(athena_window_edit_bookmarks),
	(athena_window_initialize_menus), 
	(update_undo_menu_item):
	Modified to use gtk_object_get_data() mechanism to locate undo manager

	* src/ntl-app.c: 
	(impl_Athena_Application__get_view_windows),
	(impl_Athena_Application_new_view_window),
	(impl_Athena_Application_supports),
	(impl_Athena_Application_create_object),
	(impl_Athena_Application__create), (athena_app_get_type),
	(athena_app_class_init), (athena_app_init), (athena_app_new),
	(athena_app_destroy), (athena_app_startup),
	(athena_app_create_window):
	Modified to use gtk_object_get_data() mechanism to locate undo manager.
	Added and modified IDL C stubs to match new IDL interface.
	
	* src/ntl-window.c: 
	(athena_window_constructed),	
	(athena_window_set_arg):
	Changed order that arguments are set at time of main window create so the app instance
	variable is valid when the main window is contructed.

2000-05-17  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/command-line/eazel-install.c:
	(show_usage), (generate_new_package_list),
	(create_temporary_directory), (fetch_remote_package_list), (main):
	* components/services/install/lib/eazel-install-metadata.c:
	(create_default_metadata), (create_default_configuration_metafile),
	(xml_doc_sanity_checks), (get_urltype_from_string),
	(get_boolean_value_from_string),
	(init_default_install_configuration),
	(init_default_transfer_configuration):
	* components/services/install/lib/eazel-install-metadata.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (uninstall_packages):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-tests.c:
	* components/services/install/lib/eazel-install-tests.h:
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(generate_xml_package_list), (parse_pkg_template):

	Partial fix of bug #814.  Broke alot of functions into more maintainable
	functions.  Fixed bug #730.  Added a --force option to remove hardwired
	rpm filters. Fixed bug #811. Moved metadata home to /var/eazel/services
	until we get the root dependancy fixed.  This will then allow metadata
	to be stored in the user directory. Lots of cosmetic cleanups to make
	the code more readable.

2000-05-17  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-list-view.c: (create_list):
	Fixed bug 357 (Text not vertically centered when starting
	up in List View): Wait until after "map" signal before
	setting row height, to work around bug/design flaw in
	GtkCList.

2000-05-17  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-container.h:
	Added comments.
	
	* libathena-extensions/athena-icon-factory.c:
	(scale_image_and_rectangle): Added a minimum height and width to
	avoid problems with scaling things down to 0.
	
	* libathena-extensions/athena-list.c:
	(athena_list_initialize_class), (insert_row):
	* src/file-manager/fm-list-view.c: (add_to_list):
	Moved GtkCList workaround into AthenaList so all clients can get
	the advantage of it instead of just FMListView. Also eliminated
	some unneeded empty functions for signals, since NULL works for an
	empty signal handler.

2000-05-17  John Sullivan  <sullivan@eazel.com>

	Started tweaking with the command buttons in the sidebar
	as a step towards hooking them into the final MIME API.

	* libathena-extensions/athena-mime-type.c:
	Removed verbs from display names, since we don't plan
	to support arbitrary verbs (i.e., alternate verbs to
	"Open") at least for this release.
	
	* src/ntl-index-panel.c: (add_command_buttons): Simplify code
	a little by using gtk_button_new_with_label; use "Open with"
	terminology; fix memory leak with command string stored in button.
	(athena_index_panel_update_info): Deleted obsolete comment.
	
	* src/ntl-window.c: (athena_window_load_content_view_menu):
	Added (currently insensitive) "View as ..." item to menu.

2000-05-17  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize),
	(athena_mozilla_content_view_load_uri),
	(mozilla_content_view_request_progress_change),
	(mozilla_content_view_request_location_change),
	(substitute_prefix), (mozilla_content_view_hack_uri),
	(mozilla_content_view_unhack_uri),
	(mozilla_notify_location_change_callback),
	(mozilla_title_changed_callback),
	(mozilla_location_changed_callback), (mozilla_net_status_callback),
	(mozilla_link_message_callback), (mozilla_progress_callback),
	(mozilla_open_uri_callback):
	Add initial support for stopping the loading of a uri in mozilla
	in order for athena to deal with it.  It works for some
	protocols, like ftp.  Its broken on some more fundamental ones,
	like file://.  

	Move the uri protocol moz: hack into its own place in order to
	make it easy to fix later once the real problem is fixed.

	Add a bunch of paranoid assertions.

	Bottleneck location change requests to athena through a single
	function.
	
2000-05-17  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/trilobite/idl/sample-service.idl: 
	* components/services/trilobite/sample/service/sample-service-public.h:
	* components/services/trilobite/sample/service/sample-service-impl.c:
	* components/services/trilobite/sample/service/main.c:
	The sample service is now a Bonobo::Unknown subclass. The factory
	creates a trilobite and adds the interface of the sample service.
	
	* components/services/trilobite/src/libtrilobited.h: 
	* components/services/trilobite/src/trilobite-service.c:
	* components/services/trilobite/src/trilobite-service-public.h: 
	Mutated the code and especially the object creation/(v)epv binding
	so calls now correctly end up in the defined methods. This almost
	completed 851, except that this is only the most basic of the 
	frameworks.
	
	* components/services/trilobite/sample/command-line/main.c:
	The sample cli now checks for the interface support, and
	if a trilobite, dumps the standard info, if a sample service,
	uses the two sample calls.
	
2000-05-16  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c: (scan_for_header),
	(fetch_bit_rate), (fetch_play_time), (format_play_time),
	(fetch_song_info), (athena_music_view_update_from_uri):
	fixed bug 723, mp3 play time calculation not right for non-128kbps, by
	reading the header and fetching the bitrate, then using it for the time
	calculation.
	
2000-05-16  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/fm-list-view.c: (add_to_list):
	Fix 834 - bad keyboard focus behavior. Added a workaround for 
	GtkCList broken behavior that moved the focused item to a pretty much
	random point when populating the list.

2000-05-16  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(select_previous_or_next_name):
	Fixed a crash when using Tab and Shift-Tab in an empty folder,
	caused by an uninitialized variable.

2000-05-16  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_initialize), (click_column_callback),
	(fetch_play_time), (format_play_time), (fetch_song_info),
	(sort_by_track_number), (sort_by_title), (sort_by_artist),
	(sort_by_time), (sort_song_list),
	(athena_music_view_update_from_uri):
	fixed bug #891, clicking on the tabs in the music view doesn't sort,
	by adding the appropriate sorting functions and a callback
	to switch the sort mode when you click the column header.  Also, a
	bit of restructuring and clean up.
	
2000-05-16  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/fm-list-view.c: (make_sorted_row_array),
	(select_row_common), (select_matching_name_callback),
	(create_list):
	Fix a problem in my new typeselect code where it would only 
	work properly if the list was sorted alphabetically to begin with.

	* libathena-extensions/athena-list.c:
	(athena_list_key_press):
	* src/file-manager/fm-list-view.c: (make_sorted_row_array),
	(select_row_common), (select_matching_name_callback),
	(select_previous_next_common), (select_previous_name_callback),
	(select_next_name_callback), (create_list):
	Added support for Tab and Shift-Tab selecting the alphabetically
	next and previous files. Reorganized the code a bit to share more
	with the typeselect calls.

2000-05-16  Darin Adler  <darin@eazel.com>

	* check-FIXME.pl: Maciej helped me refine the find command so it
	doesn't go into po or CVS directories and only looks at files.
	
	* components/music/athena-music-view.c:
	(athena_music_view_background_changed): Turned the metadata saving
	code back on. I think I fixed the problem that made Andy turn it off.
	
	* libathena-extensions/athena-directory-metafile.c:
	(set_metadata_eat_value): Fixed a double-delete problem. Oops.
	(athena_directory_set_metadata): Fixed code that wasn't emitting the
	metadata_changed signal enough.
	
	* libathena-extensions/athena-gdk-extensions.c:
	(athena_fill_rectangle_with_color): Fixed a crash in Gdk. It turns
	out gdk_rgb needs to be initialized, even though I don't think that
	was the intent.

2000-05-16  John Sullivan  <sullivan@eazel.com>

	Some work getting the menu items for "Open With" in place,
	and some related cleanup. "Open With" submenus now appear
	in the File and context menus, but filled with bogus
	insensitive items.

	* src/file-manager/fm-directory-view.h:
	Add #defines for bonobo-style menu paths for "Open With"-related
	items.
	* src/file-manager/fm-directory-view.c: 
	(compute_menu_item_info): Added new cases.
	(append_gtk_menu_item_with_view): Renamed from
	"append_selection_menu_item" because it's now used more
	generally; checks for view != NULL before using view.
	(append_gtk_menu_item): New function, calls _with_view
	with some default values.
	(append_selection_menu_subtree): New function.
	(fm_directory_view_real_create_background_context_menu_items):
	Uses append_gtk_menu_item now instead of duplicating some code/data.
	(add_open_with_gtk_menu_item), (create_open_with_gtk_menu):
	New functions, used to create the "Open With" submenu in
	the context menu.
	(fm_directory_view_real_create_selection_context_menu_items):
	Adds "Open With" submenu to context menu.
	(insert_bonobo_menu_subtree), (add_open_with_bonobo_menu_item),
	(reset_bonobo_open_with_menu): New functions, used to create
	the "Open With" submenu in the File menu in the menu bar.
	(fm_directory_view_real_merge_menus): Adds "Open With" submenu
	to File menu.
	(fm_directory_view_real_update_menus): Updates the "Open With"
	submenu to match selection.
	(fm_directory_view_get_context_menu_index): Updated to match
	current reality.

2000-05-16  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_initialize),
	(athena_music_view_background_changed),
	(athena_music_view_update_from_uri):
	Improved the layout of the music view, and pinned the size of the
	album cover image, temporarily disabled background_changed since
	it's not working with recent metadata changes
	
2000-05-16  Darin Adler  <darin@eazel.com>

	Quick cleanup pass on FIXMEs.
	
	* check-FIXME.pl: Added the count of FIXMEs with bug numbers
	as well as the count of FIXMEs without.
	
	* components/services/trilobite/lib/helixcode-utils.c:
	(xml_get_value), (prune_xml), (check_for_root_user),
	(check_for_redhat), (determine_redhat_version),
	(determine_mandrake_version), (determine_turbolinux_version),
	(determine_suse_version), (determine_debian_version),
	(determine_distribution_type), (get_distribution_name):
	A tiny bit of cleanup on these functions. There was some really
	bad code in here, including code that compared strings with ==.
	Also a lot of code that does open and then no close, for no
	good reason, so I added the close.
	
	* libathena-extensions/athena-file.c: (rename_callback),
	(athena_file_get_mapped_uri):
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_update_icon):
	* libathena-extensions/athena-icon-dnd.c:
	(confirm_switch_to_manual_layout), (athena_icon_dnd_begin_drag):
	* src/file-manager/fm-icon-view.c: (update_layout_menus),
	(sort_callback), (manual_layout_callback):
	* src/ntl-view.c: (athena_view_destroy_client):
	Added bug numbers to some FIXMEs.

2000-05-16  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/trilobite/sample/service/Makefile.am
	(sample-service.h): Missed a -I on the orbit-idl

2000-05-16  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(metafile_read_done), (metafile_read_failed),
	(metafile_read_complete): Factored out code that's common to failure
	and success and made it call the new
	athena_directory_metafile_apply_pending_changes function to take
	care of changes made while reading the metafile.
	
	* libathena-extensions/athena-directory-metafile.h:
	* libathena-extensions/athena-directory-metafile.c:
	(get_metadata_list_from_node), (get_file_node),
	(get_metadata_string_from_metafile),
	(get_metadata_list_from_metafile),
	(set_metadata_string_in_metafile), (set_metadata_list_in_metafile),
	(set_metadata_in_metafile), (get_metadata_string_from_table),
	(get_metadata_list_from_table), (str_or_null_hash),
	(str_or_null_equal), (set_metadata_eat_value),
	(free_file_table_entry), (free_directory_table_entry),
	(destroy_metadata_changes_hash_table),
	(athena_directory_get_metadata),
	(athena_directory_get_file_metadata),
	(athena_directory_get_metadata_list),
	(athena_directory_get_file_metadata_list),
	(athena_directory_set_metadata),
	(athena_directory_set_file_metadata),
	(athena_directory_set_file_metadata_list),
	(athena_directory_update_file_metadata), (apply_one_change),
	(apply_file_changes),
	(athena_directory_metafile_apply_pending_changes),
	(athena_directory_get_boolean_metadata),
	(athena_directory_set_boolean_metadata),
	(athena_directory_get_integer_metadata),
	(athena_directory_set_integer_metadata):
	Redid everything to use two hash tables to hold metadata before the
	metafile is read in.
	
	* libathena-extensions/athena-directory-private.h:
	Made the "NAME" XML tag be private again. It's now only used inside
	the athena-directory-metafile.c code.
	
	* libathena-extensions/athena-file.c:
	(rename_update_info_and_metafile): Moved the code for this inside the
	athena-directory-metafile.c code.
	
	* libathena-extensions/athena-glib-extensions.c:
	(athena_g_ptr_array_sort): Took out a FIXME comment now that my
	question about the code is answered. We can't use qsort because it
	does not take a context pointer.
	
	* libathena-extensions/athena-string.h: Formatting.

2000-05-16  Eskil Heyn Olsen  <eskil@eazel.com>

    	* components/services/trilobite/src/trilobite-service-public.h: 
	* components/services/trilobite/src/trilobite-service.c
	Bonobonizing the trilobite interface (bugzille.eazel.com 899). 
	The service is broken right now.

	* components/services/trilobite/sample/service/sample-service-impl.c
	The sample service is aslo begin bonobonized, and is also broken.
	    
	* components/services/trilobite/sample/command-line/main.c
	The sample client is (guess what) also being bonobonized.

2000-05-16  Jonathan Blandford  <jrb@redhat.com>

	* components/music/athena-music-view.c
	(athena_music_view_initialize): minor repacking of widgets to
	allow clist to be the dominant item, get rid of a gray band around
	the outside due to the wrong container having it's border_width
	set.

2000-05-16  Darin Adler  <darin@eazel.com>

	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-directory-metafile.c:
	(get_metadata_from_node), (get_metadata_list_from_node),
	(create_metafile_root), (athena_directory_get_metadata),
	(athena_directory_get_metadata_list),
	(athena_directory_get_boolean_metadata),
	(athena_directory_set_boolean_metadata),
	(athena_directory_get_integer_metadata),
	(athena_directory_set_integer_metadata),
	(athena_directory_get_file_metadata_node),
	(athena_directory_get_file_metadata),
	(athena_directory_get_file_metadata_list), (real_set_metadata),
	(real_set_metadata_list), (metadata_key_new),
	(metadata_key_destroy), (metadata_key_hash),
	(metadata_key_hash_equal), (metadata_value_new),
	(metadata_value_new_list), (metadata_value_destroy),
	(metadata_value_equal), (set_metadata_in_metafile),
	(set_metadata_eat_parameters),
	(free_metadata_changes_hash_table_entry),
	(destroy_metadata_changes_hash_table),
	(athena_directory_metafile_destroy),
	(athena_directory_set_metadata),
	(athena_directory_set_file_metadata),
	(athena_directory_set_file_metadata_list):
	* libathena-extensions/athena-directory-metafile.h:
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.c:
	(athena_directory_destroy):
	* libathena-extensions/athena-file.c:
	Moved metafile code into its own source file. Also worked on making
	it all bottleneck so we can store it before we read in a metafile.
	
	* src/file-manager/fm-list-view.c: (select_matching_name_callback):
	* libathena-extensions/athena-glib-extensions.h:
	Added athena_boolean_bit for use in bit fields where gboolean
	results in a signed bitfield.
	* libathena-extensions/athena-glib-extensions.c:
	(athena_g_list_copy), (athena_g_str_list_equal),
	(athena_g_str_list_copy): Added functions for dealing with a
	list of C strings. Also got rid of const GList *. For GList we
	don't use const because the functions in <glib.h> don't.
	(athena_g_ptr_array_new_from_list), (athena_g_ptr_array_sort),
	(athena_g_ptr_array_search): Renamed the new functions and types
	to more closely match the standard. For example, the types must
	have a Athena prefix.
	
	* src/ntl-window.h:
	* libathena-extensions/athena-icon-private.h:
	* libathena-extensions/athena-icon-container.c:
	(icon_set_selected), (rubberband_select):
	Switched to use the athena_boolean_bit type.

	* components/html/glibwww-callbacks.c:
	Moved <config.h> include down to fix some warnings.
	
2000-05-16  Pavel Cisler <pavel@eazel.com>

	Added keyboard type-ahead selection to the list view.
	
	* libathena-extensions/athena-list.c:
	(athena_list_initialize_class), (select_matching_name), 
	(select_next_name), (select_previous_name):
	Add new signals to allow hooking in keyboard selection callbacks
	from fm_list_view.

	* libathena-extensions/athena-list.c:
	(athena_list_initialize), (athena_list_destroy), 
	(athena_list_button_press), (athena_list_flush_typeselect_state),
	(athena_list_handle_typeahead), (athena_list_key_press):
	Setup/flush the typeselect state properly.

	* libathena-extensions/athena-list.c:
	* libathena-extensions/athena-list.h:
	(athena_list_keyboard_move_to), (athena_list_select_row):
	Add a convenience call to allow selecting an indexed row from
	fm_list_view.
	
	* libathena-extensions/athena-file.c
	* libathena-extensions/athena-file.h:
	(athena_file_compare_name):
	Added a compare function that compares a file's name with a given
	pattern.

	* libathena-extensions/athena-glib-extensions.h:
	* libathena-extensions/athena-glib-extensions.c
	(athena_g_ptr_array_copy_list), (athena_g_ptr_array_sort),
	(athena_g_ptr_array_search):
	Add utility calls to enhance GPtrArray.

	* libathena-extensions/athena-glib-extensions.c:
	(athena_get_system_time):
	Added more comments.
	
	* src/file-manager/fm-list-view.c:
	(fm_list_view_initialize_class),
	(compare_rows_by_name), (match_row_name),
	(select_matching_name_callback):
	Connect to new AthenaList signals. Add calls for sorting and 
	searching a pointer array by AthenaFile name.

	* src/file-manager/fm-list-view.c:
	(create_list), (add_to_list):
	Tweak some white space.

2000-05-16  Andy Hertzfeld  <andy@eazel.com>

	started work on cleaning up the music view, but it's still in an
	interim state.
	
	* components/music/athena-music-view.c:
	(athena_music_view_initialize),
	(athena_music_view_background_changed),
	(athena_music_view_set_up_background),
	(athena_music_view_update_from_uri),
	(athena_music_view_drag_data_received):
	made the view sizing more dynamic, made it receive colors and
	backgrounds
	
	* libathena-extensions/athena-gdk-pixbuf-extensions.c:
	(athena_gdk_pixbuf_render_to_drawable_tiled),
	(athena_gdk_pixbuf_scale_to_fit):
	dded new athena_gdk_pixbuf_scale_to_fit routine, adapted from
	the property browser since I need it in the Music view
	* libathena-extensions/athena-gdk-pixbuf-extensions.h:
	added new routine
	* src/athena-property-browser.c: (make_drag_image),
	(set_emblem_image_from_file),
	(make_properties_from_directory_path):
	made them use athena_gdk_pixbuf_scale_to_fit
	
2000-05-15  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_initialize_class),
	(athena_icon_canvas_item_update), (gnome_icon_underline_text):
	* libathena-extensions/athena-icon-container.c:
	(bounds_changed_callback):
	A long time ago I removed the parameter from the bounds_changed
	signal of the canvas item and I did a half-assed job which left
	the code broken. This made it crash a lot for Martin Baulig
	<baulig@suse.de>. So I finished the job.

2000-05-15  J Shane Culpepper  <pepper@eazel.com>

	* HACKING: Added new gnome-http dep.  Minor fixes to order to jive
	with our current build env.
	* components/services/startup/athena-view/Makefile.am: Removed
	hardcoded -lghttp
	* components/services/trilobite/sample/athena-view/Makefile.am:
	Removed hardcoded -lghttp
	* configure.in: Added test for ghttp since it is now a dependency.

2000-05-15  Darin Adler  <darin@eazel.com>

	First cut at metadata cleanup in preparation for fixing bug
	with setting metadata before the metafile is read.

	* libathena-extensions/athena-directory.h:
	* libathena-extensions/athena-directory.c:
	(get_metadata_list_from_node),
	(athena_directory_get_metadata_list),
	(athena_directory_set_boolean_metadata),
	(athena_directory_set_integer_metadata),
	(athena_directory_get_file_metadata_node),
	(athena_directory_get_file_metadata_list),
	(athena_directory_set_file_metadata),
	(athena_directory_set_file_metadata_list),
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-file.c:
	(athena_file_get_metadata), (athena_file_get_metadata_list),
	(athena_file_set_metadata), (athena_file_set_metadata_list),
	(athena_file_get_keywords), (athena_file_set_keywords):
	Unified code to deal with metadata lists and made both get and
	set work the same way. Also got rid of the default value. For
	lists, the default value is always NULL.

	* components/notes/ntl-notes.c: (notes_load_metainfo):
	* libathena-extensions/athena-directory-async.c:
	(athena_directory_monitor_add_internal),
	(athena_directory_call_when_ready_internal):
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.h:
	* libathena-extensions/athena-directory.c:
	(athena_directory_call_when_ready),
	(athena_directory_file_monitor_add),
	(athena_self_check_directory):
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-file.c:
	(athena_file_monitor_add), (athena_file_call_when_ready):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_load_uri), (finish_loading_uri):
	* src/athena-index-title.c: (athena_index_title_set_uri):
	* src/ntl-uri-map.c: (set_initial_content_iid),
	(get_explicit_content_view_iids_from_metafile),
	(athena_navigation_info_new):
	Converted to use new API that specifies only that metadata is
	needed, not which keys. Maciej and I agreed that it's no use
	to specify which keys you are interested in when you can just
	get it wrong and have everything work anyway. Also the old API
	didn't work for metadata lists.
	
	* components/services/trilobite/sample/command-line/.cvsignore:
	Added generated files.
	
	* libathena-extensions/athena-xml-extensions.c:
	(athena_xml_get_property_for_children): Format tweak.
	
	* src/file-manager/fm-directory-view.c:
	(bonobo_menu_delete_callback), (bonobo_menu_duplicate_callback),
	(bonobo_menu_open_properties_window_callback),
	(display_selection_info), (notify_selection_change_callback),
	(queue_pending_files), (append_uri_one),
	(fm_directory_view_duplicate_selection),
	(fm_directory_view_trash_selection): Formatting tweaks.
	
2000-05-14  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-property-browser.c:
	(athena_property_browser_initialize),
	(athena_property_browser_destroy), (strip_extension),
	(athena_property_browser_preferences_changed):
	made the property browser respond to preference changes by setting
	up a callback, removing it when we're destroyed, and updating the
	contents when it's invoked
	
2000-05-14  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/lib/helixcode-utils.c:
	(determine_distribution_type), (get_distribution_name):
	Beginning part of fix for Bug #860. Created the 2 functions
	listed above to determine valid DistributionType and return a
	printable string name of the DistributionType.
	* components/services/trilobite/lib/helixcode-utils.h:
	Minor fixes to DistributionType enum.  Added declarations for
	determine_distribution_type and get_distribution_name.

2000-05-13  Andy Hertzfeld <andy@eazel.com>

	fixed bug 842, finish emblems UI in properties window 
	* src/file-manager/fm-properties-window.c:
	removed hard-wired list of emblems
	(get_property_names_from_uri), (get_property_names):
	added routine to return a list of available keywords on the fly
	(create_emblems_page):
	used get_property_names instead of a hardwired list
	
	* src/athena-property-browser.c: (element_clicked_callback):
	fixed bug where it wasn't exiting remove mode properly after
	removing an element
	
2000-05-13  J Shane Culpepper  <pepper@eazel.com>

	* configure.in
	* components/services/startup/lib
	* components/services/install/lib
	Created a shared lib directory for the athena-view and
	command-line.  This allows an abstracion layer between each
	individual service and libtrilobite.so so that we don't have to
	link libtrilobite against libathena, etc.  Also allows
	abstraction of common functions in eazel-install that can now be
	statically linked into athena-installer.
	
	* components/services/trilobite/lib
	Removed some useless templates that were checked in by accident.

2000-05-12  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 620, when multiple files are selected, they all should
	be opened when the user single or double click.

	* libathena-extensions/athena-icon-private.h:
	added last_selected_files field to icon_container details, so the
	selection can be remembered through the double click process
	* libathena-extensions/athena-icon-container.c: (destroy),
	(forget_selected_files), (remember_selected_files),
	(athena_icon_container_almost_drag), (handle_icon_button_press),
	(activate_selected_items):
	changed the activate signal to take a list of file objects instead
	of a single one; added routines remember_selected_files and
	forget_selected_files to build and release the list; called
	remember and forget when appropriate, and used the list to pass to
	the signal.
	* src/file-manager/fm-icon-view.c (icon_container_activate_callback):
	made the signal handler activate all the files in the list
	
2000-05-12  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(notify_selection_change_callback), (display_pending_files):
	some of Darin's recent changes wouldn't compile, so I fixed them
	
2000-05-12  Eskil Heyn Olsen  <eskil@eazel.com>

	* libathena/Makefile.am (BUILT_SOURCES): This is way people
	should use a highlighting editor so you wouldn't have these broken
	BUILT_SOURCES things.

	* Makefile.am (SUBDIRS): Moved components and helper-utilies
	downwards in the SUBDIRS so it builds again.

2000-05-12  Darin Adler  <darin@eazel.com>

	* components/services/trilobite/src/trilobite-service.c:
	Format FIXME comments the way check-FIXME.pl recognizes.
	
	* libathena-extensions/athena-file.c: (rename_callback):
	Added a bug number to a FIXME.
	
	* libathena-extensions/athena-list.c:
	(athena_list_set_selection): Finished fixing bug 613.
	I had marked it fixed but missed one FIXME.
	
	* src/athena-property-browser.c:
	(athena_property_browser_initialize): Added a bug number
	to a FIXME.
	(make_properties_from_directory_path),
	(make_properties_from_xml_node), (make_category_link):
	Fixed storage leaks I noticed earlier today.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize), (fm_directory_view_destroy),
	(notify_selection_change_callback), (display_pending_files),
	(fm_directory_view_can_accept_item): Fixed bug 440 by removing
	the hash table that Maciej added. Each AthenaFile is already
	unique because of how the class works.
	
	* src/file-manager/fm-list-view.c: (create_list): Got rid of
	the FIXME now that Pavel fixed bug 315.

2000-05-12  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/trilobite/sample/service/Makefile.am 
	* components/services/trilobite/sample/athena-view/Makefile.am
	* components/services/trilobite/sample/command-line/Makefile.am
	Polishing the makefiles for the sample service build.
	
	* components/services/trilobite/src/trilobite-service-private.h: 
	* components/services/trilobite/src/trilobite-service-public.h: 
	* components/services/trilobite/src/trilobite-service.c
	Implemented the rest of the base object get_* methods. Moved the
	corba activation into a seperate call. Need to look at the
	destruction and possible use of bonobo for this sucker
	(bugzilla.eazel.com 899 & 900). Also did the destroyer so the
	servers can put themselves down.
	
	* components/services/trilobite/sample/service/sample-service-impl.c
	Implemented the most basic for the sample service. It's useless as
	an example, since it does not add new features to the trilobite yet.
	
	* components/services/trilobite/sample/command-line/main.c
	Basic cli for the sample service tool. Currently connects to a
	running athena-eazel-sample-service and lists the basic info for
	it.

2000-05-12  Darin Adler  <darin@eazel.com>

	* Makefile.am: Added the idl directory.
	
	* libathena-extensions/athena-gnome-extensions.h:
	* libathena-extensions/athena-gnome-extensions.c:
	(athena_simple_dialog): Turned on line wrapping for the label
	in the simple dialog.
	(turn_on_line_wrap_flag), (show_ok_box), (athena_error_dialog),
	(athena_error_dialog_parented): Made alternate versions of
	gnome_error_dialog and gnome_error_dialog_parented that turn on
	line wrapping for the message label.
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text): Made the list of characters to break
	lines on localizable.
	
	* libathena-extensions/athena-icon-dnd.c:
	(confirm_switch_to_manual_layout): Took newlines out of messages
	since the dialog now does line wrapping.

	* src/file-manager/dfos-xfer.c: (handle_xfer_vfs_error),
	(handle_xfer_overwrite): Took out some extraneous spaces. I could
	have also removed the newlines since the functions call something
	that does line wrapping, but I decided not to.
	
	* src/file-manager/fm-properties-window.c:
	(name_field_update_to_match_file): Fixed a double delete bug.
	This may have been what Ali was running into when he was clicking
	quickly on all the emblems in succession.
	
	* src/athena-property-browser.c:
	Did a cleanup pass on the entire file. Marked things localizable
	and marked some bugs with FIXME among other things.
	
	* src/ntl-window-msgs.c: (athena_window_update_state): Added
	code to check for NULL so that we won't core dump when trying
	to "go back" from the first failed view.
	(athena_window_progress_indicate),
	(athena_window_end_location_change_callback): Got rid of newlines
	from messages and called the function that now does line wrapping.

2000-05-12  Darin Adler  <darin@eazel.com>

	* HACKING: Get rid of obsolete requirement for "--without-bonobo"
	for the gtkhtml module. The internal modules list at Eazel was
	updated but someone forgot to update HACKING, as usual.
	
	* components/services/trilobite/sample/command-line/.cvsignore:
	* components/services/trilobite/sample/athena-view/.cvsignore:
	* components/services/trilobite/sample/athena-view/icons/.cvsignore:
	* components/services/trilobite/sample/service/.cvsignore:
	Lots of generated files that need to be ignored for CVS happiness.
	
	* libathena-extensions/athena-file.c: (rename_callback):
	Fixed bug in handling error cases. I couldn't test this until Pavel
	fixed the GNOME VFS bug that prevented any errors from being
	reported, but he did and I am ready.
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text): Fixed a bug where you'd have a big
	black box behind the text you are renaming by checking for rename
	mode before drawing the black background.
	
	* src/file-manager/fm-icon-view.c:
	(set_sort_criterion), (get_sort_criterion_by_metadata_text),
	(get_sort_criterion_by_menu_path), (fm_icon_view_begin_loading),
	(sort_callback): Add code to save and load the "sort by" setting.

2000-05-12  Eskil Heyn Olsen  <eskil@eazel.com>

	* src/file-manager/Makefile.am (CLEANFILES): Fixed the CLEANFILES
	so the corba generated file and the dfos_corba_stamp get's deleted
	on make clean - thus build no longer breaks on missing files after
	a few make all/clean iterations.

2000-05-11  J Shane Culpepper <pepper@eazel.com>

	* components/services/trilobite/lib/*
	* components/services/install/command-line
	More file gymnastics to isolate generic service code into libtrilobite.
	Revived some dead files in eazel-install for now until I can do some
	more work to clean the current functions up.
	Added a distribution type function to helixcode-utils.c so that we can
	start determining distribution.  This will be used by inventory and
	eazel-install.  Created several skeleton files that will be filled with
	generic functionality like logging, networking, security, etc.

2000-05-11  Andy Hertzfeld <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	improved the look of the highlighting by adding more margins to
	the box, and tightened things up vertically in the non-highlighted
	case.
	
2000-05-11  Andy Hertzfeld <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	fixed bug #758, selected items difficult to see at a glance, by
	going back to drawing a filled box around the text to indicate
	selection. I kept the emboldening, since it improves
	readability. This time it doesn't use XOR and has a settable
	color, which I'll make a preference for soon.
	
2000-05-11  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-list-column-title.c:
	(truncate_string), (athena_list_column_title_paint):
	Fix 376 - Truncate text in columns. Clean up
	athena_list_column_title_paint a little in the process.
	
	* src/file-manager/fm-list-view.c: (create_list),
	(fm_list_view_set_zoom_level):
	Fix 315 - Icon columns are now fixed width. Fix a bug that this
	uncovered where setting column width, column min width and column
	max width have to be done in a predetermined order to not get
	messed up by a bug in GtkCList.

2000-05-11  Darin Adler  <darin@eazel.com>

	* idl/Makefile.am:
	* idl/fsextension.idl:
	* libathena-extensions/Makefile.am:
	* libathena-extensions/.cvsignore:
	Removed the fsextension IDL, which was a work in progress that no
	one is working on.
	
	* libathena/.cvsignore:
	Added the undo manager stuff.

	* libathena-extensions/.cvsignore:
	Removed the undo manager stuff.
	
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-file.c:
	(athena_file_denies_access_permission): Handle deleted file case.
	(athena_file_can_rename): Handle deleted file case.
	(file_operation_state_new), (file_operation_state_free),
	(file_operation_state_complete),
	(rename_update_info_and_metafile), (rename_callback),
	(athena_file_rename): Put in a basic framework for file
	operations that can take a while.  Used it to make renaming async.
	(athena_file_can_get_permissions): Handle deleted file case.
	(athena_file_set_permissions): Handle case where you can't get
	permissions properly. I inadvertently deleted this last time.
	
	* libathena-extensions/athena-metadata.h:
	Added a metadata key for the icon view sort. Still need to write
	the code to save this.
	
Thu May 11 16:52:14 2000  Raph Levien  <raph@acm.org>

	* librsvg/rsvg.c (rsvg_render_bpath): Added a check to avoid
	zero-width stroke lines, which libart doesn't like. This is a
	workaround for broken svg files. A separate commit will fix
	ill2svg.pl to make it less likely to generate broken files.

2000-05-11  Andy Hertzfeld <andy@eazel.com>

	* src/ntl-index-panel.c:
	fixed bug #600, command buttons don't handle file names with spaces,
	by quoting the file name.  There's still a weakness for file names
	containing single quotes, but we can address that later.
	
2000-05-11  Andy Hertzfeld <andy@eazel.com>

	* src/athena-index-tabs.c:
	fixed bug #858, index tabs pre-darken, instead of prelighten, by
	making the lighten and switching to black text so the labels are
	still readable.
	Also, made it choose light or dark text on the fly when the tab
	color is changed, so the labels are always readable
	
	* components/services/trilobite/sample/athena-view/Makefile.am:
	removed the icons subdir, since it had nothing in it and it was
	breaking the build
	
2000-05-11  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.h,
	* src/file-manager/fm-directory-view.c: (compute_menu_item_info),
	(fm_directory_view_real_create_selection_context_menu_items),
	(insert_bonobo_menu_item), (fm_directory_view_real_merge_menus),
	(fm_directory_view_real_update_menus),
	(fm_directory_view_get_context_menu_index): Some more menu code
	cleanup. Renamed FM_DIRECTORY_VIEW_MENU_PATH_SET_PROPERTIES
	to _SHOW_PROPERTIES to match menu text; made new function
	insert_bonobo_menu_item that calls compute_menu_item_info
	to get name & sensitivity so that _real_merge_menus
	doesn't have a separate and potentially diverging copy of
	menu item names.

2000-05-11  John Sullivan  <sullivan@eazel.com>

	Some cleanup in directory view menu-handling code.

	* src/file-manager/fm-directory-view.h,
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class),
	(fm_directory_view_real_create_background_context_menu_items),
	(fm_directory_view_real_create_selection_context_menu_items),
	(create_selection_context_menu),
	(fm_directory_view_create_background_context_menu_items),
	(create_background_context_menu): Renamed context-menu functions
	and signals from using "append_" to using "create_" since they
	don't necessarily append.
	
	* src/file-manager/fm-icon-view.c: (insert_one_context_menu_item),
	(append_one_context_menu_item): Made append_ call insert_ with
	-1 for the position to eliminate duplicated code.
	(fm_icon_view_create_selection_context_menu_items): Removed code
	that passed a different position depending on whether or not
	the Duplicate item was present. This subclass can assume that it
	will always be present (or we'll rewrite the code here if we
	change that assumption).
	(fm_icon_view_create_background_context_menu_items),
	(fm_icon_view_merge_menus), (fm_icon_view_initialize_class):
	Renamed functions and signals to use create_ as above.
	
	* src/file-manager/fm-list-view.c: 
	(fm_list_view_append_background_context_menu_items),
	(fm_list_view_append_selection_context_menu_items),
	(fm_list_view_merge_menus), (fm_list_view_update_menus),
	(fm_list_view_compute_menu_item_info),
	(append_one_context_menu_item),	(insert_one_context_menu_item),
	(rename_list_item_callback): Removed these functions, which were
	all used only for Rename (which we won't have in 1.0) and
	Undo (which the list view never interacts with).
	(fm_list_view_initialize_class): Removed function overrides.

2000-05-11  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_merge_menus):
	Moved the Layout menu to between Settings and Help.

2000-05-11  Gene Z. Ragan  <gzr@eazel.com>

	* helper-utilities/authenticate/Makefile.am:
	* athena-widgets/Makefile.am:
	* libathena-extensions/Makefile.am:
	* libathena/Makefile.am:
	Change makefiles to link against libathena.  This is so calls
	to the undo manager code resolve.  There is probably a better way to
	do this.
	
	* libathena-extensions/athena-entry.c:
	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-icon-text-item.c:
	* src/athena-bookmarks-window.c:
	* src/athena-location-bar.c:
	* src/athena-window-menus.c:
	* src/ntl-app.c:
	Changed to #include <libathena-extensions/athena-undo-manager.h>
	to #include <libathena/athena-undo-manager.h>

2000-05-10  Gene Z. Ragan  <gzr@eazel.com>

	* libathena/athena-undo-manager-component.idl:
	* libathena/athena-undo-manager-private.h:
	* libathena/athena-undo-manager.c:
	* libathena/athena-undo-manager.h:
	* libathena/athena-undo-transaction.c:
	* libathena/athena-undo-transaction.h:
	* libathena/athena-undoable.c:
	* libathena/athena-undoable.h:
	Moved files to libathena so IDL compilation would work properly
	and at the suggestion of mjs.

	* libathena-extensions/Makefile.am:
	Removed undo files.

	* libathena/Makefile.am:
	Added undo files.

	* libathena/athena-undo-manager-component.idl:
	Additional fixes so a clean build would occuer properly.
	
2000-05-10  J Shane Culpepper  <pepper@eazel.com>

	* libathena-extensions/athena-undo-manger-component.idl:
	Moved the includes to top of the file so that the idl would compile
	correctly.

2000-05-10  Pavel Cisler  <pavel@eazel.com>

	* src/ntl-app.c:
	* src/ntl-app.h:
	(athena_app_destroy_window), (athena_app_real_quit),
	(athena_app_quit)
	Work in progress on fixing Athena deadlocking when quitting while
	async file operations are in progress. Made it so that Athena
	waits for gnome VFS threads to complete before it quits and takes
	down the idle task. This only fixes part of the problem, Athena
	still deadlocks on gnome vfs jobs that get cancelled right after
	they were started.
	
2000-05-10  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-undo-manager-component.idl:
	Added IDL entries to access undo manager functions.
	
	* libathena/athena-view-component.idl:
	Added Athena::UndoManager instance to Athena::Application
	
	* libathena/athena-view-frame.c:
	* libathena/athena-view-frame.h:
	(athena_view_frame_get_main_window):
	New function that returns Athena::ViewWindow instance
	held by Athena::ViewFrame.  Calls CORBA C utility function.

	* src/ntl-app.c: 
	(impl_Athena_Application__get_undo_manager):
	New function to return Athena::Application global 
	instance of Athena::UndoManager.
	
2000-05-10  John Sullivan  <sullivan@eazel.com>

	* libathena/athena-bonobo-ui.h: Added #define for path of
	Athena's toolbar so components can use Bonobo merging without
	secret inside information.
	* components/sample/athena-sample-content-view.c:
	(sample_merge_bonobo_items_callback): Replaced secret inside
	information about menu & toolbar paths & positions with use of
	#defines in athena-bonobo-ui.h.

2000-05-10  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-file.c: (athena_file_rename):
	(athena_file_set_permissions): Changed to do both rename and set
	permissions with an interface that will work for async. Also
	improved the handling of deleted files, empty-string names, and
	files you can't change permissions on: they are considering
	runtime errors instead of coding mistakes now. Also send out
	file_changed even if the call fails.
	
	* src/file-manager/fm-error-reporting.h:
	* src/file-manager/fm-error-reporting.c: (show_error_message_box),
	(fm_report_error_renaming_file),
	(fm_report_error_setting_permissions): Simplified interface to
	these calls. Now we don't require the caller to pass anything we
	can compute ourselves and you can call these with GNOME_VFS_OK
	and they will do nothing. Also merged common code to put up the
	error message box into a helper function.
	
	* src/file-manager/fm-icon-view.c: (rename_callback),
	(fm_icon_view_icon_text_changed_callback):
	* src/file-manager/fm-properties-window.c: (rename_callback),
	(name_field_done_editing), (permission_change_callback),
	(permissions_check_button_toggled):
	Updated callers to use the new calls.

2000-05-10  Darin Adler  <darin@eazel.com>

	* fm-icon-view.c: (update_layout_menus), (sort_callback),
	(manual_layout_callback), (fm_icon_view_merge_menus),
	(update_one_menu_item), (fm_icon_view_update_menus),
	(icon_container_compare_icons_callback), (get_icon_text_callback),
	(text_attribute_names_changed_callback),
	(fm_icon_view_initialize_class), (fm_icon_view_initialize): Added
	a Layout menu with a separate item for Manual Layout and for each
	kind of auto-layout sort.

	* libathena-extensions/athena-icon-container.c:
	(idle_handler): Reinstated the call to relayout. It broke looking
	at a sorted folder the first time.

	Tons of gratuitous whitespace reformatting. I'm so sorry, but
	I was listening to a talk by rms.

2000-05-10  John Sullivan  <sullivan@eazel.com>

	Fixed bug 853 (assert and weird window behavior in Properties)

	* src/file-manager/fm-properties-window.c:
	(remove_default_viewport_shadow): New function, sets the viewport
	shadow to the no-shadow style.
	(create_emblems_page): Call remove_default_viewport_shadow
	at "realize" signal time, since Gtk bug causes trouble if
	it's called before realizing.

2000-05-10  Darin Adler  <darin@eazel.com>

	* components/services/trilobite/src/.cvsignore:
	Ignore the generated files in this new directory.
	
	* libathena-extensions/athena-gnome-extensions.h:
	* libathena-extensions/athena-gnome-extensions.c:
	(convert_varargs_to_name_array), (athena_simple_dialog):
	Moved simple-dialog function from dfos. It just calls
	gnome_dialog with the right options.
	
	* libathena-extensions/athena-gtk-extensions.h:
	Added another marshal function.
	
	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-private.h:
	* libathena-extensions/athena-icon-container.c:
	(reload_icon_positions), (athena_icon_container_move_icon),
	(athena_icon_container_initialize_class),
	(athena_icon_container_add),
	(athena_icon_container_request_update_all),
	(athena_icon_container_set_auto_layout),
	(athena_icon_container_freeze_icon_positions),
	(athena_icon_container_sort),
	(athena_icon_container_start_renaming_selected_item):
	Reorganized signals. Added AthenaIconPosition to simplify
	the interface for signals that deal with icon position. Removed the
	now-unused icon_text_edit_occurred signal. Added the layout_changed
	signal. Added athena_icon_container_sort function. Moved some code
	out of the "omit self check" conditional.
	
	* libathena-extensions/athena-icon-dnd.c:
	(confirm_switch_to_manual_layout), (handle_local_move): Added code
	that switches to manual layout if you move an icon within the window
	and it's on auto layout.
	
	* src/file-manager/dfos-xfer.h:
	* src/file-manager/dfos-xfer.c: (handle_xfer_vfs_error),
	(handle_xfer_overwrite), (dfos_xfer): Switch code to use the new
	athena_simple_dialog instead of file_operation_alert, which I
	removed from here.
	
	* src/file-manager/fm-icon-view.c:
	(get_stored_icon_position_callback), (update_layout_menus),
	(fm_icon_view_begin_loading), (auto_layout_callback),
	(manual_layout_callback), (layout_changed_callback),
	(fm_icon_view_merge_menus), (icon_position_changed_callback),
	(create_icon_container):
	Added workaround for Bonobo bug where it calls the radio menu item
	callback that was making it always use auto layout. Converted to use
	the updated signal parameters. Added a signal handler to update the
	layout menu to match the layout when the layout is changed elsewhere.

2000-05-10  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	Commented out shadow-setting line that causes asserts and
	strange window behavior for some people's builds (but not mine
	when I checked this in). Will fix later.

2000-05-09  Andy Hertzfeld <andy@eazel.com>
	
	* src/athena-window-toolbar.c:
	restored standard Gnome toolbar icons, for now, while we figure
	out how to make Susan's optional in some fashion
	
2000-05-09  Andy Hertzfeld <andy@eazel.com>

	added Susan's toolbar icons; she still needs to do reload and stop
	
	* icons/home.png
	* icons/leftarrow.png
	* icons/rightarrow.png
	* icons/uparrow.png
	* icons/Makefile.am:
	Susan's new toolbar icons, except for uparrow, which was modified
	* src/athena-window-toolbar.c:
	used Susan's new toolbar icons
	
2000-05-09  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/command-line/eazel-install-metadata.c
	* components/services/install/command-line/eazel-install-metadata.h
	* components/services/install/command-line/eazel-install-protocols.h
	* components/services/install/command-line/eazel-install-protocols.c
	* components/services/install/command-line/eazel-install-rpm-glue.c
	* components/services/install/command-line/eazel-install-rpm-glue.h
	* components/services/install/command-line/eazel-install-tests.h
	* components/services/install/command-line/eazel-install-tests.c
	* components/services/install/command-line/eazel-install-types.h
	* components/services/install/command-line/eazel-install-utils.h
	* components/services/install/command-line/eazel-install-utils.c
	* components/services/install/command-line/eazel-install-xml-package-list.c
	* components/services/install/command-line/eazel-install-xml-package-list.h
	* components/services/install/command-line/helixcode-install-utils.c
	* components/services/install/command-line/helixcode-install-utils.h
	* components/services/startup/athena-view/eazel-register.h
	* components/services/startup/athena-view/eazel-register.c

	Merged all of the listed files into:
	components/services/trilobite/lib to create a shared library of common
	service functions.  These functions still need to made much more
	generic in order to use them for common tasks.

2000-05-09  Andy Hertzfeld <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	taught the icon factory to look in the user's home directory
	for user-defined emblem images
	
2000-05-09  Andy Hertzfeld <andy@eazel.com>

	* src/athena-property-browser.c:
	added gnome warning messages when the user chooses non-image files
	for backgrounds or emblems.
	
2000-05-09  Andy Hertzfeld <andy@eazel.com>

	made the add and remove buttons in the content browser not
	show up for novice-level users
	
	* libathena-extensions/athena-global-preferences.h:
	defined new preference for CAN_ADD_CONTENT
	* libathena-extensions/athena-global-preferences.c:
	turned CAN_ADD_CONTENT off for novices, on for other levels
	* src/athena-property-browser.c:
	respect CAN_ADD_CONTENT when deciding to show the buttons
	
2000-05-09  John Sullivan  <sullivan@eazel.com>

	fixed bug 843 (Emblem checkboxes in Properties window
	don't react to external emblem changes)

	* src/file-manager/fm-properties-window.c: 
	(create_emblems_page): Added file-changed signal
	handler so checkboxes react to external emblem changes.
	Also changed page to use a GtkTable rather than four 
	nested boxes; this keeps all the cells the same size 
	despite differing image sizes.

2000-05-09  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(athena_directory_call_when_ready_internal),
	(athena_directory_cancel_callback_internal),
	(directory_count_callback), (athena_async_destroying_file),
	(start_getting_directory_counts), (top_left_read_done),
	(start_getting_top_lefts):
	Eliminated code that ref's files when they are the target of the
	call_when_ready list or the current file being read for top left
	text or the current directory being counted. Instead, cancel the
	I/O when the file is destroyed (we already had the hook).
	
	* libathena-extensions/athena-directory-async.c:
	(lacks_top_left):
	* libathena-extensions/athena-file-private.h:
	* libathena-extensions/athena-file.c:
	(athena_file_contains_text), (athena_file_get_top_left_text):
	Change top left text reading to only read text files and other
	regular files with unknown type.
	
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_marshal_NONE__POINTER_POINTER_POINTER_POINTER_POINTER_POINTER):
	* libathena-extensions/athena-gtk-extensions.h:
	Needed a new marshal function.
	
	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-container.c:
	(resort_and_clear), (auto_position_icon), (relayout):
	Changed around to share more code.
	(reload_icon_positions): Call to reload icon positions when you
	switch from auto to manual layout.
	(idle_handler): Get rid of relayout on idle.
	(athena_icon_container_move_icon): Renamed icon_changed to
	icon_position_changed.
	(rubberband_select): Fixed bug where rubberband would never deselect.
	(athena_icon_container_initialize_class): Add a new signal called
	get_stored_icon_position and also renamed the icon_changed signal to
	icon_position_changed.
	(athena_icon_container_update_icon): Changed back the
	get_icon_images interface to return AthenaScaledIcon objects
	instead of actual pixbufs. This is made possible by the change to
	include the embedded text as one of the parameters when creating
	a AthenaScaledIcon.
	(athena_icon_container_add): Merged the two flavors of add and
	removed the extra parameters. Now the icon position and scale comes
	from a callback (via signal).
	(athena_icon_container_set_selection): Use a hash table (fixes
	Bugzilla bug 613).
	(athena_icon_container_select_list_unselect_others): Use a hash
	table.
	(athena_icon_container_set_auto_layout): Reload the previous
	icon positions and "freeze" them (store them) when switching from
	automatic layout to manual.
	(athena_icon_container_freeze_icon_positions): Public function
	to store all the icon psoitions. For use later with the dialog that
	you get when you drag an icon.
	* src/file-manager/fm-icon-view.c:
	(get_stored_icon_position_callback): Support new interface for
	getting the icon position. Also used setlocale so metadata always
	uses a locale-independent format for floating point numbers.
	(fm_icon_view_add_file), (fm_icon_view_done_adding_files):
	New simplified interface for adding icons.
	(auto_layout_callback), (manual_layout_callback): Fixed a bug where
	we'd always switch to auto layout on startup. It's actually a bug
	in Bonobo where new radio menu items get callbacks right away.
	(icon_position_changed_callback): Used setlocale so metadata always
	uses a locale-independent format for floating point numbers.
	(get_icon_images_callback): Changed for new simpler embedded text
	API. Moved the actual pixbuf stuff back into AthenaIconContainer.
	(create_icon_container): New get_stored_icon_position callback and
	renamed icon_position_changed callback.
	
	* libathena-extensions/athena-icon-dnd.c: (handle_local_move),
	(handle_nonlocal_move),
	(athena_icon_container_receive_dropped_icons):
	Restructured the drag code a little bit to make it easy to add the
	dialog that you get when you drag an icon within an auto-layed-out
	window (that I will add soon).
	
	* libathena-extensions/athena-icon-factory.h:
	* libathena-extensions/athena-icon-factory.c:
	(athena_scalable_icon_get), (athena_scalable_icon_unref),
	(athena_scalable_icon_hash), (athena_scalable_icon_equal),
	(athena_icon_factory_get_icon_for_file),
	(athena_icon_factory_get_emblem_icon_by_name),
	(athena_icon_factory_get_emblem_icons_for_file),
	(get_image_from_cache),
	(athena_icon_factory_get_pixbuf_for_icon),
	(athena_icon_factory_get_pixbuf_for_file), (embed_text),
	(load_image_with_embedded_text):
	* src/file-manager/fm-list-view.c:
	(fm_list_view_get_emblem_pixbufs_for_file):
	* src/file-manager/fm-properties-window.c:
	(create_image_widget_for_emblem):
	* src/athena-index-title.c: (athena_index_title_update_info):
	Even though John talked me out of it, I talked myself back into it.
	Redid the embedded text so it's done entirely inside the icon
	factory. This keeps the interface simple.
	
	* libathena-extensions/athena-icon-private.h: Add a missing
	newline.
	
2000-05-09  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_load_uri),
	(mozilla_notify_location_change_callback),
	(mozilla_location_changed_callback):
	Notify athena when the location changes so that back/forward
	navigation and history work as expected.

2000-05-09  John Sullivan  <sullivan@eazel.com>

	Work on task 842 (Finish emblems UI in property window)

	* src/file-manager/fm-properties-window.c:
	(create_image_widget_for_emblem): Finished this function
	that I had checked in the beginnings for last time.
	(create_emblems_page): Now displays images and puts
	emblems into a scrolling area in case there are too
	many to fit. Still need to get the real list of emblems
	instead of a hard-wired one.

2000-05-09  Andy Hertzfeld <andy@eazel.com>

	* src/athena-window-menus.c:
	removed the color selector widget from the debug menu, since it's
	no longer needed now that we have colors in the property browser.
	Since there was nothing else in the menu, I removed it, too.
	
2000-05-09  Ramiro Estrugo  <ramiro@eazel.com>

	* acconfig.h,
	* configure.in: Remove the MOZILLA_FIVE_HOME hack.  I dont like
	how this causes the whole of athena to rebuild.  Its also
	something that should be set in the user's environment.
	
	* components/mozilla/main.c: (mozilla_check_environment), (main):
	Remove the MOZILLA_FIVE_HOME hack from here too.  Replace it with
	a environment check instead.
	
	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize),
	(athena_mozilla_content_view_destroy),
	(athena_mozilla_content_view_load_uri),
	(mozilla_content_view_set_busy_cursor),
	(mozilla_content_view_send_progress_request),
	(mozilla_content_view_clear_busy_cursor),
	(mozilla_notify_location_change_callback),
	(bonobo_mozilla_callback), (mozilla_merge_bonobo_items_callback),
	(mozilla_title_changed_callback),
	(mozilla_location_changed_callback), (mozilla_net_status_callback),
	(mozilla_link_message_callback), (mozilla_progress_callback):
	Add support for mousing over link status, progress notification,
	title changed, location changed, busy cursor.  Some of this still
	needs work to get it right.
	Factor the progress request sending code into its own function.
	
2000-05-09  Andy Hertzfeld <andy@eazel.com>

	* src/athena-property-browser.c:
	implemented adding new emblems and removing them
	* icons/emblem-generic.png:
	added image for generic emblems
	* icons/Makefile.am:
	added new icon
	
2000-05-09  John Sullivan  <sullivan@eazel.com>

	Checked in to fix silly problem from previous checkin:
	I had left the sense of a check reversed for testing
	purposes, and no permissions would ever appear in the
	Properties window.

	I've also got some new changes that have no visible
	effect yet.

	* libathena-extensions/athena-icon-factory.h,
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_emblem_icon_by_name):
	New function, gets a single emblem icon.
	(add_emblem): Calls _get_emblem_icon_by_name now.
	* src/file-manager/fm-properties-window.c:
	(create_image_widget_for_emblem), (create_emblems_page):
	Some preliminary work towards making emblem images appear.
	(create_permissions_page): Took out a "!" so permissions
	show up.

2000-05-09  J Shane Culpepper  <pepper@eazel.com>

	* components/services/ ALL
	* athena-installer/ ALL
	Massive reorganization of components/services.  All service components
	are now broken up into a command-line and a athena-view.  Added
	directories for trilobite, the core service framework.  Added
	directories for the proof of concept time sync service.  Also added
	athena-installer directory at the base level of athena which will
	contain the bootstrap installer for athena and its dependencies. Most
	these changes are in the build harness yet.

2000-05-09  John Sullivan  <sullivan@eazel.com>

	Finished task 547 (show and set permissions in
	Properties window). It's kinda geeky as unix
	permissions like to be. As always, I welcome feedback
	about this UI.

	* libathena-extensions/athena-file.h,
	* libathena-extensions/athena-file.c:
	(athena_file_can_get_permissions): New function, checks
	whether the permissions of a file can be determined.
	(athena_file_can_set_permissions): New function, checks
	whether the current user is capable of changing the
	permissions of a file.

	(athena_file_denies_access_permission),
	(athena_file_is_executable): Deploy _can_get_permissions.
	
	(athena_file_get_permissions): New function, returns
	permissions for file.
	
	(athena_file_set_permissions): New function, changes
	permissions for file. Returns GnomeVFSResult that reports
	whether change succeeded.
	 
	* src/file-manager/fm-properties-window.c: (add_prompt),
	(add_prompt_and_separator),
	(get_pixmap_and_mask_for_properties_window), (install_value_field),
	(install_title_value_pair), (create_page_with_vbox),
	(apply_standard_table_padding), (create_attribute_value_table),
	(create_page_with_table_in_vbox), (create_emblems_page),
	(permissions_label_update), (add_permissions_row_label),
	(add_permissions_column_label),
	(update_permissions_check_button_state),
	(permissions_check_button_toggled), (add_permissions_checkbox),
	(create_permissions_page), (create_more_page): Lots of new code
	and refactoring to display the permissions UI.

	* src/file-manager/fm-error-reporting.h,
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_setting_permissions): New function to
	complain to user if attempt to set permissions fails.
	The UI won't let the user try to set the permissions if
	athena_file_can_set_permissions returns FALSE, but there
	can always be oddball failures for other reasons.
	
2000-05-08  Maciej Stachowiak  <mjs@eazel.com>

	* src/ntl-uri-map.c (get_lang_list),
	(athena_view_identifier_new_from_oaf_server_info): Provide the
	language from either the LANGUAGE or LANG environment variable,
	for proper l10n of OAF name attributes,

2000-05-09  Christopher Blizzard  <blizzard@redhat.com>

	* components/mozilla/athena-mozilla-content-view.c
	(athena_mozilla_content_view_load_uri): add GTK_MOZ_EMBED() cast
	since the prototype for embed_load_url has changed on the Mozilla
	tip.
	(bonobo_mozilla_callback): Same.

2000-05-08  John Sullivan  <sullivan@eazel.com>

	* src/ntl-uri-map.c: DEBUG_MJS was accidentally checked in
	defined. I commented it out. Also changed an #if DEBUG_MJS
	to #ifdef to match the others.

2000-05-08  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-list.c
	* libathena-extensions/athena-icon-container.c
	(realize), (unrealize), (athena_list_realize),
	(athena_list_unrealize),
	(athena_icon_container_initialize_class),
	(athena_list_initialize_class),
	(athena_list_realize),
	(athena_list_unrealize):
	Fix 296 - properly set the default focus to the icon and
	list views so that keyboard navigation works right away.
	Properly defocus the icon and list view when switching 
	between the two views. 

	* libathena-extensions/athena-icon-container.c:
	(keyboard_arrow_key), (keyboard_right), (keyboard_left),
	(keyboard_down), (keyboard_up):
	Properly handle the first keyboard arrow press when we have no selection
	yet. To do this pass in a new empty_start predicate.
	
	* libathena-extensions/athena-icon-container.c
	* libathena-extensions/athena-list.c
	(athena_list_initialize),
	(select_row_from_mouse),
	(athena_list_keyboard_navigation_key_press),
	(athena_list_key_press):
	Properly handle the first keyboard arrow press when we have no selection
	yet (this will only start working when 454 gets fixed).
	Make it so that the keyboard focus gets collapsed with the selection
	when selecting an item with a mouse.

2000-05-08  Darin Adler  <darin@eazel.com>

	* check-FIXME.pl:
	* check-config-h.pl: Added "." parameter to "find" so it works
	with non-GNU versions of find. This was for Morten, who wanted
	to run check-config-h.pl on Gnumeric.
	
	* libathena-extensions/athena-directory-async.c:
	(start_getting_top_lefts): Turn embedded text back on.
	
	* libathena-extensions/athena-directory.c:
	(athena_directory_get_metadata): Fixed a bug that was showing
	up in "make check".
	(athena_self_check_directory): Got rid of GNOME VFS tests,
	since I moved the same tests into test-async-cancel in the
	gnome-vfs module.

2000-05-08  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena/athena-clipboard.c:
	(athena_clipboard_info_destroy),
	(athena_clipboard_info_set_view_frame): 
	Reference the view on set_view_frame() and unreference on
	destruction.  This fixes a problem where the clipboard code was
	trying to use a view that has already been trashed.
	
	Thanks to Carbamide <linuxfan@ionet.net> for finding the problem.

2000-05-08  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in,
	* HACKING: Remove libglade check and hacking blurb.  We don't
	use libglade no more,

2000-05-08  Andy Hertzfeld <andy@eazel.com>

	* src/athena-property-browser.c:
	added an up arrow image in the property browser title bar, to act
	as a "go-back" button.
	Also, made the "add background" command check the mime-type of the
	specified file and only add it if it's an image
	* icons/uparrow.png:
	new image to serve as goback button in browser title bar
	* icons/Makefile.am:
	added new image to Makefile

2000-05-08  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(key_press_event):
	Fixed bug introduced by Pavel's new super cool keyboard icon
	selection feature. An icon in renaming mode no longer received
	keyboard events. A check is now made to see if the icon container
	is in renaming mode before processing event for icon selection.

2000-05-08  Maciej Stachowiak  <mjs@eazel.com>

	Fixed merging of explicitly specified components. Now the name is
	properly determined from OAF, nonexistent ones are ignored, the
	syntax for specifying then is improved, and they can be defined
	for files as well as directories. In the process I defined some
	new general-purpose metadata operations. These are
	bugzilla.eazel.com tasks #763 and #673.

	* libathena-extensions/athena-xml-extensions.h,
	libathena-extensions/athena-xml-extensions.c
	(athena_xml_get_property_for_children): New function. Get a
	specific property for all children of a node that have a
	particular name.

	* libathena-extensions/athena-directory-private.h,
	libathena-extensions/athena-directory.h,
	libathena-extensions/athena-file.h,
	libathena-extensions/athena-file.c
	(athena_file_get_metadata_list),
	libathena-extensions/athena-directory.c
	(get_metadata_list_from_node), (athena_directory_get_metadata),
	(athena_directory_get_metadata_list),
	(athena_directory_get_file_metadata_list): NewFunctions to allow
	getting lists of info for files or directories.

	* libathena-extensions/athena-file.c
	(athena_file_get_keywords): Use the new interface for getting
	the keywords for a file.

	* src/ntl-uri-map.h: Added explicit_iids field to
	Athena_NavigationInfo struct.

	* src/ntl-uri-map.c
	(get_explicit_content_view_iids_from_metafile): New function to
	get IIDs for explicitly selected views from the metafile.
	(make_oaf_query_for_explicit_content_view_iids): Create a query
	clause from the explicit IID list.
	(make_oaf_query_with_known_mime_type),
	(make_oaf_query_with_uri_scheme_only): Accept explicitly selected
	IIDs whether or not they would otherwise apply.
	(server_matches_content_requirements): Don't check content
	requirements for explicitly selected servers.
	(athena_navigation_info_new), (athena_navigation_info_free):
	initialize and free the explicit_iids field.

2000-05-08  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-directory-async.c
	(directory_count_callback): Improved the logic so it records the
	fact that the directory count is complete earlier and more
	cleanly. This stops an assertion failure I was seeing occasionally
	from showing up, by fixing or at least hiding the underlying
	problem.

2000-05-08  Maciej Stachowiak  <mjs@eazel.com>

	* src/ntl-uri-map.c (get_lang_list),
	(athena_view_identifier_new_from_oaf_server_info): GSList, not
	GList!

2000-05-07  Maciej Stachowiak  <mjs@eazel.com>

	* src/ntl-uri-map.c (get_lang_list),
	(athena_view_identifier_new_from_oaf_server_info): fix
	bugzilla.eazel.com task #694; pass the language to the oaf calls
	that get a name so those attributes can be i18n'd.

2000-05-07  Maciej Stachowiak  <mjs@eazel.com>

	* athena-clean.sh: Added pdf component to list. Added -x option
	to also kill oafd and gconfd.

2000-05-08  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-icon-private.h:
	(match_best_name), (select_matching_name), (destroy), 
	(button_press_event), (athena_icon_container_almost_drag),
	(athena_icon_container_flush_typeselect_state),
	(athena_icon_container_handle_typeahead), (key_press_event),
	(athena_icon_container_initialize):
	Support for icon selection by typing the item's name. Initialize 
	and flush the new typeselect state properly. Rework key_press_event
	a little bit to make it easier to call the inherited key_press call
	when we did not handle the keyboard event ourselves.

	* libathena-extensions/athena-icon-container.c:
	(select_previous_or_next_name), (compare_icons_by_name),
	(build_sorted_icon_list):
	Support for selecting next/previous icon alphabetically using
	Tab and Shift-Tab.
	
	* libathena-extensions/athena-icon-container.c:
	(find_best_icon), (find_best_selected_icon), (leftmost_in_top_row),
	(rightmost_in_bottom_row), (same_row_right_side_leftmost),
	(same_row_left_side_rightmost), (same_column_above_lowest),
	(same_column_below_highest), (keyboard_home), (keyboard_end),
	(keyboard_arrow_key):
	Add data parameter to find_best_icon and find_best_selected_icon
	to allow using more complicated match predicates.
	
	* libathena-extensions/athena-glib-extensions.c:
	* libathena-extensions/athena-glib-extensions.h:
	(athena_g_list_copy):
	Add a list shallow copy utility call.

	* libathena-extensions/athena-glib-extensions.c:
	* libathena-extensions/athena-glib-extensions.h:
	(athena_get_system_time), (athena_self_check_glib_extensions)
	Add a utility call to get the system time in microseconds.

	* libathena-extensions/athena-icon-canvas-item.c:
	Fix a typo.

	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_start_renaming_selected_item):
	Fix white space.

2000-05-08  Andy Hertzfeld <andy@eazel.com>

	src/athena-property-browser.c:
	implemented adding and removing colors and backgrounds to the property browser
	libathena-extensions/athena-icon-factory.c:
	removed some code for making frames for non-standard format thumbnails that was
	never being executed
	data/browser.xml:
	added another color so they line up better
	
2000-05-07  Maciej Stachowiak  <mjs@eazel.com>


	Fix bugzilla.eazel.com task 479:

	* libathena/athena-clipboard.c
	(athena_clipboard_info_destroy),
	(athena_clipboard_info_set_view_frame): Do not ref and unref the
	view_frame. Because the AthenaClipboardInfo will only be
	destroyed when the view_frame is destroyed in the normal use case,
	if it holds a ref on the view_frame it will prevent it from ever
	being destroyed. This was causing the notes and history view
	processes to stay around forever.
	
2000-05-06  John Sullivan  <sullivan@eazel.com>

	Fixed up code that limits how small icons are before they
	stop showing embedded text. Too bad you can't see it in
	action until embedded text is turned back on.

	* icons/eazel/i-regular.xml: Added an embedded-text rectangle
	for one size smaller icon than had one before.
	
	* libathena-extensions/athena-icon-factory.c:
	Added #defines for minimum embedded text rectangle width
	and height.
	(embedded_text_rect_usable): New function, ensures that the
	embedded text rectangle is sufficiently large.
	(athena_icon_factory_embed_text),
	(athena_icon_factory_embed_file_text): Use new function to
	skip embedded text if rectangle is nonexistent or too small.
	
	* src/file-manager/fm-icon-view.c:
	(get_icon_images_callback): Removed the text-rectangle size
	limit here since now there's a universal one inside
	athena_icon_factory.

2000-05-06  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(start_getting_top_lefts): Disabled the embedded text until I can
	fix the file descriptor linking problem. It's easy to re-enable,
	but then you quickly run out of FDs.

2000-05-06  Jesus Bravo Alvarez  <jba@pobox.com>

	* configure.in: Added Galician (gl) to ALL_LINGUAS

2000-05-05  Andy Hertzfeld <andy@eazel.com>

	did some work at the request of Bud
	
	* libathena-extensions/athena-global-preferences.h:
	added preference ATHENA_PREFERENCES_SIDEBAR_WIDTH
	* src/ntl-window.c:
	set the initial sidebar width from ATHENA_PREFERENCES_SIDEBAR_WIDTH.  
	As a welcome side-effect, this allowed  me to remove the old "sopwidth 
	hack". I also increased	the default size.
	* src/ntl-index-panel:
	added old_width to details.  Overrode size_allocate signal to get 
	in there when the size changes to record it in preferences when 
	it changes
	
	* src/athena-index-title.c:
	changed the font used for the title to helvetica, to match the other text
	
2000-05-05  Darin Adler  <darin@eazel.com>

	* libathena-extensions/.cvsignore: Ignore the new files that
	are generated by Gene's new .idl.
	
	* libathena-extensions/athena-debug.h:
	* libathena-extensions/athena-debug.c:
	(athena_get_available_file_descriptor_count):
	Changed the interface on Pavel's excellent new debugging function.
	
	* libathena-extensions/athena-directory.c:
	(file_open_callback), (file_close_callback), (open_and_close_one),
	(athena_self_check_directory): Added some checks for GNOME VFS
	in here. This is a bad place for them but it's better than not
	having them at all.
	* libathena-extensions/athena-icon-factory.c:
	(athena_self_check_icon_factory): Updated self checks so they
	work again. John didn't notice that he needed to fix these when
	he added the 20-pixel size icon to the standard sizes.
	
2000-05-05  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-undo-manager-component.idl:
	New IDL file describing CORBA interface to the undo manager.
	
	* libathena-extensions/Makefile.am:
	Modified to include athena-undo-manager-component.idl
	
	* libathena-extensions/athena-undo-manager.c
	* libathena-extensions/athena-undo-manager-private.h:
	(impl_Athena_UndoManager__destroy),
	(impl_Athena_UndoManager__create),
	(impl_Athena_UndoManager__begin_transaction),
	(impl_Athena_UndoManager__end_transaction):
	CORBA/Bonobo functions to access undo manager features.

	* libathena-extensions/athena-undo-manager.h:
	* src/file-manager/fm-list-view.c
	(fm_list_view_append_background_context_menu_items),
	(fm_list_view_merge_menus), (fm_list_view_update_menus),
	(rename_list_item_callback):
	Began the task of 
	
	* src/ntl-main.c 
	(main):
	Removed intialization of undo manager from main,

	* src/ntl-app.c 
	(athena_app_init):
	Moved initialization of undo manager. A reference to the undo manager
	is saved for easy access from components.
	
	
2000-05-05  Andy Hertzfeld <andy@eazel.com>

	* src/athena-property-browser.c:
	improved the appearance of color properties by putting them
	in a frame
	
2000-05-05  Andy Hertzfeld <andy@eazel.com>

	* icons/colors.png:
	added icon for colors category
	* icons/Makefile.am:
	added new icon to Makefile
	* data/backgrounds/ice.png:
	added cool new background
	* data/backgrounds/Makefile.am:
	added new background to Makefile
	
2000-05-05  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-properties-window.c:
	(install_title_value_pair), (create_page_with_table_in_vbox),
	(create_basic_page), (create_emblems_page),
	(create_permissions_page), (create_more_page),
	(create_properties_window):
	More early work on the Properties window. Nudging it into
	shape one step at a time.

2000-05-05  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-debug.c,
	libathena-extensions/athena-debug.h:
	(athena_print_available_file_descriptor_count):

	Added a debugging call to help locate file descriptor leaks.
	
2000-05-05  Darin Adler  <darin@eazel.com>

	Fix up the code for cancelling so we don't leave files open and
	objects around so much. It was getting out of hand.
	
	* libathena-extensions/athena-directory-async.c:
	(empty_close_callback): Give a warning if we ever have a close
	that fails.
	(directory_count_callback): For easier debugging, NULL out the
	file after unref'ing.
	(start_getting_directory_counts): Unref the file when we cancel
	a directory count part-way through (leak #1).
	(start_getting_top_lefts): Close the file when we cancel a top
	left read part-way through (leak #2). Unref the file when we
	cancel a top left read part way thorugh (leak #3).

2005-05-05  Andy Hertzfeld <andy@eazel.com>

	* src/athena-property-browser.c:
	made color drag and drop work from the property browser.
	
2000-05-05  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_embed_text): The old code assumed that white
	was == 0xFFFFFF. But that's not always true due to bugs (well maybe
	not bugs but imperfections) in the code that converts 555 to 888 in
	gdk-pixbuf. Fixed it now.

2000-05-05  Darin Adler  <darin@eazel.com>

	Moved the "embedded text" feature into the icon factory and
	AthenaFile. Also fixed some FIXMEs that were in the modified
	code along the way.

	This code requires a new version of GdkPixbuf to work properly.
	A bug in the old one makes embedded text look wrong.

	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory-async.c:
	(metafile_read_close), (athena_metafile_read_cancel),
	(metafile_read_failed), (metafile_read_complete),
	(metafile_read_callback), (metafile_read_some),
	(metafile_read_open_callback), (metafile_read_start),
	(athena_directory_request_read_metafile), (metafile_write_done),
	(metafile_write_failed), (metafile_write_callback),
	(metafile_write_create_callback), (athena_metafile_write_start),
	(metafile_write), (lacks_top_left), (wants_top_left),
	(has_problem), (select_needy_file), (count_lines),
	(top_left_read_done), (top_left_read_failed),
	(top_left_read_complete), (top_left_read_close),
	(top_left_read_callback), (top_left_read_some),
	(top_left_open_callback), (start_getting_top_lefts),
	(state_changed):
	Added code to read top lefts of files in the background.
	Restructured things to accomodate this new code nicely with
	a minimum of copy and paste (there still was plenty of copy
	and paste so there's room for improvement).
	
	* libathena-extensions/athena-directory.c:
	(athena_directory_destroy):
	Name changes from above required revising some asserts.
	
	* libathena-extensions/athena-file-private.h:
	* libathena-extensions/athena-file.c:
	(athena_file_get_top_left_text): Now it returns something
	besides just NULL.
	(athena_extract_top_left_text): Function that remembers only
	the part of the top left text that we want to keep around.
	
	* libathena-extensions/athena-gtk-extensions.h:
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_marshal_NONE__POINTER_POINTER_POINTER),
	(athena_gtk_marshal_POINTER__POINTER_INT_INT_POINTER_POINTER):
	Needed some new marshal functions.
	
	* libathena-extensions/athena-icon-canvas-item.h:
	* libathena-extensions/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_initialize_class),
	(athena_icon_canvas_item_destroy),
	(athena_icon_canvas_item_set_arg),
	(athena_icon_canvas_item_get_arg),
	(athena_icon_canvas_item_get_image),
	(athena_icon_canvas_item_set_image),
	(athena_icon_canvas_item_draw):
	Removed the old embedded text support. It came with a whole lot
	of baggage, also removed.
	
	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_update_icon): Moved pixbuf computing code
	into the FMIconView class. We might decide later to move it back
	again, but for now the embedded text makes it easier to do it
	this way.
	(athena_icon_container_initialize_class): Merged
	get_icon_editable_text and get_icon_additional_text back into
	a single signal that gets both.
	
	* libathena-extensions/athena-icon-dnd.c:
	(athena_icon_dnd_begin_drag): Updated for change in icon factory
	API.
	
	* src/file-manager/fm-directory-view.c: (finish_loading_uri):
	Ask for top-left text attribute for all directories.
	
	* src/file-manager/fm-icon-view.c: (get_icon_images_callback):
	Moved pixbuf computing code into the FMIconView class. We might
	decide later to move it back again, but for now the embedded text
	makes it easier to do it this way.
	(get_icon_text_callback): Merged get_icon_editable_text and
	get_icon_additional_text back into a single signal that gets both.

2000-05-04  Andy Hertzeld

	added colors to the property browser.  Dragging isn't quite working yet.
	
	* src/athena-property-browser.c:
	added inline xml mode for the property browser and used it to add color properties
	* data/browser.xml:
	added some color definitions.
		
2000-05-04  John Sullivan  <sullivan@eazel.com>

	* src/ntl-index-panel.c (athena_index_panel_initialize):
	Added a nice little GNOME_PAD worth of space above (and
	below, but who could tell?) the index-title. Now that icon
	isn't jammed up against the top of the sidebar.

2000-05-04  John Sullivan  <sullivan@eazel.com>

	Some work on the Properties window. It now shows some
	more properties (location, type, size, date).

	* libathena-extensions/athena-file.c:
	(athena_file_get_parent_uri_as_string): New function, returns
	the URI of the enclosing directory.
	(athena_file_get_string_attribute): Now supports attributes
	"uri" and "parent_uri".
	* src/file-manager/fm-directory-view.c: (compute_menu_item_info),
	(fm_directory_view_real_merge_menus): Changed menu name from
	"Set Properties..." to "Show Properties" since the read-only ones
	now outnumber the changeable ones.
	* src/file-manager/fm-properties-window.c:
	(create_pixmap_widget_for_file), (value_field_update),
	(install_title_value_pair), (create_basic_page),
	(create_emblems_page), (create_properties_window): Broke up
	huge create_properties_window into smaller functions, and
	added location, type, size, and date to Basic page.

2000-05-04  J Shane Culpepper <pepper@eazel.com>
	
	* components/services/install/Makefile.am
	* components/services/startup/main.c
	* components/services/startup/eazel-register.c
	* components/services/startup/eazel-register.h
	* components/services/startup/athena-services-startup-view.h
	* components/services/startup/athena-services-startup-view.c

	Code cleanup to conform to eazel hacking standards.

2000-05-04  Andy Hertzfeld <andy@eazel.com>

	now you can drop emblems from the property browser onto
	icons in the icon view.
	
	* libathena-extensions/athena-icon-dnd.h:
	added definitions for the "property/keyword" drag type
	* libathena-extensions/athena-icon-dnd.c:
	added receive_dropped_keyword and integrated it;
	made it highlight by testing for keywords in
	athena_icon_dnd_update_drop_target;
	also, with Pavel's help, fixed a long-standing drag and drop bug
	by calling athena_icon_container_free_drag_data in the
	drag_leave_callback.
	
	* data/backgrounds/Makefile.am:
	added another background image
	* data/backgrounds/beige_tile.jpg:
	new background image
	
2000-05-04  Darin Adler  <darin@eazel.com>

	* src/ntl-uri-map.c: (file_list_to_mime_type_hash_table),
	(free_key), (mime_type_hash_table_destroy),
	(got_file_info_callback): Fixed bug I introduced earlier.
	Now MIME types are just like other text -- potentially
	dynamically computed and all.

	Special thank-you fix for Carbamide. With all his testing he deserves
	some special treatment.

2000-05-04  Ramiro Estrugo  <ramiro@eazel.com>

	* src/run-athena: Pass command line arguments on to the script.
	
2000-05-04  J Shane Culpepper  <pepper@eazel.com>
	*components/eazel/services/install/eazel-install-xml-package-list.c
	Making minor fixes.  Changed gint reference to int. Made
	parse_package_template function static.

2000-05-04  Darin Adler  <darin@eazel.com>

	* HACKING: Some more instructions and cleanup.
	* RENAMING: Removed one gratuitous renaming we won't do.
	
	* components/html/ntl-web-browser.c:
	Removed stray "#include <config.h>" that I added by accident.

	* components/hardware/main.c: (main):
	* components/help/hyperbola-main.c: (main):
	* components/html/ntl-web-browser.c: (main):
	* components/music/main.c: (main):
	* components/notes/ntl-notes.c: (main):
	* components/rpmview/main.c: (main):
	* components/websearch/ntl-web-search.c: (main):
	* src/file-manager/gnome-desktop.c (main):
	* src/ntl-main.c (main):
	Added ifdefs so you don't get warnings when building with
	localization turned off. Ugly, but needed I think.
	
	* components/help/converters/gnome-db2html2/gdb3html.c:
	(ulink_start_element), (start_element):
	* components/help/converters/gnome-db2html2/sect-elements.c:
	(sect_sect_start_element), (sect_sect_end_element),
	(sect_title_start_element), (sect_xref_start_element),
	(sect_graphic_start_element), (sect_get_infobox_logo):
	* components/help/converters/gnome-db2html2/sect-preparse.c:
	(sect_preparse_sect_start_element),
	(sect_preparse_title_characters):
	* components/help/converters/gnome-db2html2/toc-elements.c:
	(toc_sect_start_element), (toc_title_start_element):
	* components/help/converters/gnome-info2html2/html.c:
	(write_node_link_html):
	* components/help/hyperbola-filefmt.c: (tree_key_compare):
	* components/help/hyperbola-nav-index.c: (start_element),
	(end_element), (hyperbola_navigation_index_new):
	* components/html/ntl-web-browser.c: (browser_submit):
	Replaced all uses of strcasecmp with g_strcasecmp.
	Why? Because Michael Meeks said so and that's good enough
	for me (in this case :-).
	
	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri):
	* libathena-extensions/athena-file.c:
	(athena_file_get_mime_type_as_string_attribute),
	(athena_file_get_mime_type):
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_name_for_regular_file):
	* src/file-manager/fm-icon-view.c (get_icon_property_callback):
	* src/ntl-index-panel.c (athena_index_panel_update_buttons):
	* src/ntl-uri-map.c (file_list_to_mime_type_hash_table):
	Changed get_mime_type to be like all other text functions and
	return a strdup'd string. John said it was a good idea.

	* libathena-extensions/athena-file-private.h:
	* libathena-extensions/athena-directory-async.c:
	(metafile_read_callback), (metafile_read_some),
	(set_up_request_by_file_attributes),
	(athena_directory_monitor_add_internal),
	(directory_list_get_next_position), (directory_load_callback),
	(ready_callback_call),
	(athena_directory_call_when_ready_internal),
	(wants_directory_count), (has_problem),
	(ready_callback_is_satisfied), (is_anyone_monitoring_file_list),
	(is_anyone_waiting_for_metafile), (is_wanted), (select_needy_file),
	(start_getting_directory_counts):
	Reorganize to get ready for adding code to read the top left text.
	
	* libathena-extensions/athena-file-attributes.h:
	Added name for the "top left text" attribute.
	
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-file.c:
	(athena_file_get_top_left_text):
	Added call to get the top left text.
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_embedded_text): Tiny format tweak.
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_update_icon): Tiny format tweak.
	
	* libathena-extensions/athena-icon-factory.h:
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_pixbuf_for_file),
	(athena_icon_factory_get_pixmap_and_mask_for_file),
	(athena_icon_factory_embed_text),
	(athena_icon_factory_embed_file_text):
	Added support for embedded text. Not completely deployed yet.
	
2000-05-03  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/dfos-xfer.c (create_xfer_dialog),
	(handle_xfer_ok), (handle_xfer_vfs_error), (fs_xfer),
	(fs_move_to_trash), (fs_empty_trash):
	Add a simple heuristic to only show the progress dialog
	for file operations that are likely to take a non-trivial
	ammount of time in which case the progress dialog flashed
	on the screen for a split of a second.

	* libathena-extensions/athena-icon-dnd.c
	(athena_icon_dnd_modifier_based_action):
	Switch the modifier key for copy to Control. This is a better
	modifier because Alt had to be held down after the drag started
	otherwise one would move the window instead of starting a drag.
	
2000-05-03  Andy Hertzfeld <andy@eazel.com>

	* src/athena-property-browser.c:
	at John's suggestion, made the property browser stay open if you
	drag with the shift key held down.  Also, changed the format of
	the data accompanying the "property/keyword" item to just be the
	keyword instead of a file uri.
	* src/ntl-index-panel.c:
	adjusted the index panel to accept the new "property/keyword" format,
	removing the hack to extract the keyword from the uri.
	
2000-05-03  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/eazel-install-xml-package-list.c:
	parse_pkg_template checks the fopen return val. Also changed the
	arguments, so it returns the number of lines, thus loosing the
	hardcoded 500 lines in generate_xml_package_list.

2000-05-03  Gene Z. Ragan <gzr@eazel.com>

	* libathena-extensions/athena-entry.c
	* libathena-extensions/athena-entry.h:
	Refined undo support.
	(athena_entry_enable_undo_key):
	New function to set internal handling of ctl-z for undo.
	
	* libathena-extensions/athena-icon-container.c
	(hide_rename_widget):
	Removed deletion of undo transaction.  This is now handled
	by the owner of the widget.
	
	* libathena-extensions/athena-undo-manager.c	
	(athena_undo_manager_unregister_object):
	New function to unregister a GtkObject from the undo manager.
	Any transaction that contains the object is removed from the
	undo and redo lists.  This should be called for any object that
	is no longer available for user interaction.

	* libathena-extensions/athena-undo-transaction.c
	(athena_undo_transaction_contains_object):
	Function added to support athena_undo_manager_unregister_object()
	call in the undo manager.  Each AthenaUndoable in a transaction
	is checked for the object to be removed.
	
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-properties-window.c
	(create_properties_window):
	Added call to unregister rename widget from undo manager.

	* src/athena-bookmarks-window.c
	Added undo support for entry widgets.
	
	* src/athena-location-bar.c
	Changed to support modified undo manager APIs.
	
2000-05-03  Kjartan Maraas  <kmaraas@online.no>

	* components/html/Makefile.am: Added -DGNOMELOCALEDIR
	* components/html/ntl-web-browser.c: Added bindtextdomain()
	and textdomain() to initialize the i18n support.
	* components/music/Makefile.am: Same as above.
	* components/music/main.c: Same as above.
	* components/music/athena-music-view.c: Marked strings.
	* components/notes/Makefile.am: Same as above.
	* components/notes/ntl-notes.c: Same as above.
	* components/rpmview/Makefile.am: Same as above.
	* components/rpmview/main.c: Same here too.
	* components/rpmview/athena-rpm-view.c: Marked strings.
	* components/sample/athena-sample-content-view.c: Same here too.
	* components/websearch/Makefile.am: Same as above.
	* components/websearch/ntl-web-search.c: Again.

2000-05-03  Fatih Demir	<kabalak@gmx.net>
	
	* athena.desktop: Yes, yes, athena can be such a
	typotic word (nautlius->athena in Name entry...)
	
	* configure.in: Added ko to ALL_LINGUAS .

2000-05-02  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-index-title.c,h:
	made it display the emblems associated with a file.  Also, added a
	routine to return the current title.
	* src/ntl-index-panel.c:
	made dropping emblems on the index panel work by adding a new
	receive_dropped_keyword routine
	* src/athena-property-browser.c:
	fixed bug where the title background image wasn't being set correctly	
	* data/browser.xml:
	changed drop type for emblems to "property/keyword"
	* data/backgrounds/Makefile.am:
	added new background image
	* data/backgrounds/white_ribs.png:
	added new "white_ribs" background image

2000-05-02  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-entry.c
	Connected widget to undo manager.
	(athena_entry_initialize),
	(athena_entry_destroy), 
	(athena_entry_key_press):
	Added check for ctl-z.  An undo is requested when the key combination
	is triggered.
	(athena_entry_changed):
	Added undo registration when text is modified.
	(save_undo_snapshot_callback),
	(restore_from_undo_snapshot_callback):
	Standard undo manager callbacks
	(athena_entry_enable_undo):
	Added new function. Pass in boolean value to enable or disable
	undo functionality.
	
2000-05-02  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-icon-factory.c
	(athena_icon_factory_get_icon_name_for_regular_file):
	Removed special case for "core" files, which are now
	handled by the MIME type database used in gnome-vfs.

2000-05-02  Andy Hertzfeld  <andy@eazel.com>

	1st cut at property browser for drag and drop customization;
	Backgrounds are fully implemented, emblems are only partially there,
	more coming soon

	* src/Makefile.am: added property browser source files
	* src/athena-property-browser.c,h:
	new class that implements the property browser
	
	* src/athena-window-menus.c:
	added "customize" menu item and a callback that brings up
	the property browser
	
	* src/ntl-index-panel.c:
	changed index panel to accept "property/bgimage" drag type and
	change the background image accordingly

	* libathena-extensions/athena-icon-dnd.c:
	changed icon canvas to accept "property/bgimage" drag type and
	change the background image accordingly; removed the old shift key hack
	
	* libathena-extensions/athena-icon-dnd.h:
	defined constants for the new drag type
	
	* configure.in: two new data directories for backgrounds and emblems
	* data/Makefile.am: added two new directories
	* data/browser.xml: xml file that defines the categories

	added some background images to play with:
	
	* data/backgrounds/.cvsignore
	* data/backgrounds/Makefile.am
	* data/backgrounds/baize.png
	* data/backgrounds/bricks.jpg
	* data/backgrounds/bubbles.png
	* data/backgrounds/buffedwood.jpg
	* data/backgrounds/burlap.jpg
	* data/backgrounds/chalk.jpg
	* data/backgrounds/cherrywood.jpg
	* data/backgrounds/cork.png
	* data/backgrounds/dark-gnome.jpg
	* data/backgrounds/darkwood.png
	* data/backgrounds/frost.jpg
	* data/backgrounds/gnome.jpg
	* data/backgrounds/gold.jpg
	* data/backgrounds/grass.png
	* data/backgrounds/gray_fabric.png
	* data/backgrounds/greenery.jpg
	* data/backgrounds/manila.jpg
	* data/backgrounds/pink_fabric.png
	* data/backgrounds/puzzle.jpg
	* data/backgrounds/raindrops.png
	* data/backgrounds/sky.jpg
	* data/backgrounds/stucco.jpg
	* data/backgrounds/white_marble.jpg
	* data/backgrounds/white_paper.jpg
	* data/backgrounds/yellow_paper.jpg
	
	added some emblem images:
	
	* data/emblems/.cvsignore
	* data/emblems/Makefile.am
	* data/emblems/certified.gif
	* data/emblems/changed.gif
	* data/emblems/confidential.gif
	* data/emblems/encrypted.gif
	* data/emblems/important.gif
	* data/emblems/new.gif
	* data/emblems/personal.gif
	* data/emblems/remote.gif
	
	added images for the top-level categories
	
	* icons/Makefile.am: added 2 images to Makefile
	* icons/backgrounds.png
	* icons/emblems.png
		
2000-05-02  Maciej Stachowiak  <mjs@eazel.com>

	* RENAMING: Added some idl-related renamings.

2000-05-02  Darin Adler  <darin@eazel.com>

	* HACKING: Added a mention of "killall oafd" and "killall gconfd".
	
	* libathena-extensions/athena-list.c (athena_list_destroy):
	Fixed a bug where we'd free the details structure and then write
	to it afterwards. This was torturing John today. It happens when
	you leave a page that's set to list view.
	
	* src/file-manager/fm-icon-view.c
	(fm_icon_view_icon_changed_callback): Fixed bug 663 that was
	about the issue of similar but not identical floating point
	numbers and also bug 661 that wasn't a bug at all!
	
	* src/file-manager/fm-properties-window.c
	(get_pixmap_and_mask_for_properties_window):
	Removed the FIXME from this file, since the bug is fixed.

2000-05-02  Cody Russell  <car0969@gamma2.uta.edu>

	* src/ntl-window.c: Respect the user's GNOME preferences. Lock
	down the "Location" toolbar if the user has "Can detach and
	move toolbars" disabled in gnomecc.

2000-05-02  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(load_specific_image_svg): Open .svg file in binary mode.
	(load_specific_image): Factor out some shared code.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	Renamed *_cb to *_callback.
	(remove_custom_icon), (files_have_any_custom_images),
	(remove_custom_icons_callback), (finish_adding_menu_item),
	(fm_directory_view_real_append_background_context_menu_items):
	(append_selection_menu_item),
	(fm_directory_view_real_append_selection_context_menu_items),
	(fm_directory_view_real_merge_menus), (update_one_menu_item),
	(fm_directory_view_real_update_menus),
	(create_selection_context_menu):
	Added the "Remove Custom Image" command.
	(compute_menu_item_info): Made more similar to the one in
	FMIconView.

	* src/file-manager/fm-icon-view.c (compute_menu_item_info),
	(append_one_context_menu_item), (insert_one_context_menu_item),
	(fm_icon_view_append_selection_context_menu_items),
	(append_bonobo_menu_item), (fm_icon_view_merge_menus),
	(update_one_menu_item), (fm_icon_view_update_menus):
	Made more similar to code in FMDirectoryView.

2000-05-02  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-icon-container.c
	(motion_notify_event):
	Get rid of FIXME 623 - the problem was already fixed, I just
	forgot to remove the FIXME.

	* src/file-manager/dfos-xfer.c (handle_xfer_ok):
	Fix FIXME 676 - the particular switch case doesn't need any
	handling, took it out.

	* libathena-extensions/athena-list-column-title.c
	(athena_list_column_title_paint),
	(athena_list_column_title_leave),
	(athena_list_column_title_button_press),
	(athena_list_column_title_button_release):
	Fix bug 423 - Double-clicking Header boundary in List View
	fails assertion. 
	Fix a column press tracking bug Gene found - the coulumn would
	stay pressed if you tracked out of the column and let go of the
	mouse button - made it so that when tracking a column press the
	cursor gets grabbed.
	Fix FIXME 618 - used offscreen bitmap draws instead of invalidates
	during the different mouse tracking state changes.

	* file-manager/fm-directory-view.c:
	Added comments to some #if 0 code that I left behind and will use
	later.

2000-05-02  John Sullivan  <sullivan@eazel.com>

	Fixed bug 641: should check MIME type for SVG files.
	Fixed bug 438: Bookmark menu items need to limit icon size

	* libathena-extensions/athena-icon-factory.h:
	Defined a new standard icon size, ATHENA_ICON_SIZE_FOR_MENUS.
	None of the existing standard sizes look good in menus.

	* libathena-extensions/athena-file.h,
	* libathena-extensions/athena-file.c
	(athena_file_is_mime_type): New function, compares against
	a particular MIME type so the caller doesn't have to get the
	MIME type and worry about whether to free it or not.

	* libathena-extensions/athena-icon-factory.c:
	(get_larger_icon_size),
	(get_smaller_icon_size): Include ATHENA_ICON_SIZE_FOR_MENUS
	when looking for the next size.
	(str_has_svg_suffix): Removed this function.
	(athena_icon_factory_get_icon_for_file): Use
	athena_file_is_mime_type to check for SVG instead
	of checking file suffix.
	(path_represents_svg_image): New function.
	(load_specific_image): Use path_represents_svg_image to
	check for SVG instead of checking file suffix.

	* libathena-extensions/athena-bookmark.c:
	(create_pixmap_widget_for_bookmark): Use 
	ATHENA_ICON_SIZE_FOR_MENUS.
	* src/athena-window-menus.c (append_bookmark_to_menu):
	Use ATHENA_ICON_SIZE_FOR_MENUS.

2000-05-02  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-container.c (icon_new),
	(athena_icon_container_update_icon):
	Got rid of the old maximum size hack and use the new maximum size
	parameter instead.
	
	* src/athena-index-title.c (athena_index_title_update_icon):
	Took out maximum size hack and use the maximum size parameter
	instead.

	* libathena-extensions/athena-icon-factory.c
	(str_has_svg_suffix), (athena_icon_factory_get_icon_for_file),
	(load_specific_image): Renamed suffix_is_scalable to
	str_has_svg_suffix to make it clearer what it does.
	
2000-05-02  Darin Adler  <darin@eazel.com>

	* check-FIXME.pl: Added -print as suggested by Morten Welinder
	<terra@diku.dk>.
	* check-config-h.pl: Added -print and fixed broken message as
	suggested by Morten Welinder <terra@diku.dk>.
	
	* libathena-extensions/athena-icon-factory.h:
	* libathena-extensions/athena-icon-factory.c
	(suffix_is_scalable): Simpler implementation.
	(get_themed_icon_file_path): Look for size-specific version of
	even .svg files. Although not so useful, it's not ridiculous to do so.
	(athena_icon_factory_get_icon_for_file): Fixed the twisted logic to
	be less twisted. Also changed the ".svg" extension check to use the
	common function suffix_is_scalable.
	(load_specific_image): Untwist logic here too, and note in the FIXME
	that both the .svg library and gdk-pixbuf are limiting us to file:
	URIs, although the gdk-pixbuf case is fixable without redoing the
	library by just using our utility functions.
	(load_image_for_scaling): Update for new size request structure which
	contains maximum sizes as well as nominal ones.
	(scale_image_and_rectangle), (revise_scale_factors_if_too_big),
	(scale_image_down_if_too_big): New helper functions for scaling.
	(load_image_scale_if_necessary): Take the maximum size into account.
	(get_image_from_cache): Use new size request structure and take the
	maximum size into account.
	(athena_icon_factory_get_pixbuf_for_icon): Changed to take maximum
	size parameters and pass them in to the underlying function.
	(icon_cache_key_hash): Include the maximum size in the hash.
	(icon_cache_key_equal): Check the maximum size too.
	(athena_icon_factory_get_pixbuf_for_file): Pass new max. size
	parameters to the athena_icon_factory_get_pixbuf_for_icon
	function.

	* libathena-extensions/athena-icon-container.c
	(athena_icon_container_update_icon): Pass new max. size
	parameters to the athena_icon_factory_get_pixbuf_for_icon
	function.
	
	* src/file-manager/fm-list-view.c
	(fm_list_view_get_emblem_pixbufs_for_file): Pass new max. size
	parameters to the athena_icon_factory_get_pixbuf_for_icon
	function.

2000-05-02  John Sullivan  <sullivan@eazel.com>

	* data/mime/.cvsignore,
	* data/mime/Makefile.am:,
	* data/mime/athena.keys: Removed files. Athena
	doesn't need to install the human-readable MIME
	descriptions any more because gnome-vfs does it.

	* configure.in,
	* data/Makefile.am: Removed build system fu that
	was installing athena.keys.

2000-05-01  Kjartan Maraas  <kmaraas@gnu.org>

	* libathena/athena-clipboard.c: Cosmetic change.
	* src/Makefile.am: Added -DGNOMELOCALEDIR to $INCLUDES.
	* src/ntl-main.c: Added calls to bindtextdomain() and 
	textdomain() to make the translations work.
	* components/help/hyperbola-main.c: Same here.
	* components/help/Makefile.am: Here as well. This should be
	done for any main() function in any module containing text
	to be translated.
		
2000-05-01  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-file-changes-queue.c:
	(athena_file_changes_consume_changes):
	Temporary workaround for an apparent codegen bug Carbamide
	was running into. (I'll need to track this down some more,
	this change makes the crash go away.)

	* src/file-manager/dfos-xfer-progress-dialog.c:
	* src/file-manager/dfos-xfer-progress-dialog.h:
	* src/file-manager/dfos-xfer.c:
	(dfos_xfer_progress_dialog_get_type), 
	(dfos_xfer_progress_dialog_new),
	(dfos_xfer_progress_dialog_new_file),
	(create_xfer_dialog),
	(fs_xfer), (handle_xfer_ok):
	Fix up the progress dialog so that it displays meaningful
	information while emptying the trash and moving files to
	trash.
	
2000-05-01  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-gconf.c,
	  src/athena-gconf.h: Retired.  Not used or needed no more.

2000-05-01  Darin Adler  <darin@eazel.com>

	* check-config-h.pl: Wrote a script to check for files that forget
	to include <config.h> and optionally edit to add it.
	
	* src/athena-zoom-control.c (set_zoom_level): Fixed the bug
	number in a FIXME.

	* docs/style-guide.html: Added one more tip.

	* check-FIXME.pl: Use my newfound Perl knowledge to spruce it up.

	* components/help/converters/gnome-db2html2/gdb3html.c:
	* components/help/converters/gnome-db2html2/sect-elements.c:
	* components/help/converters/gnome-db2html2/sect-preparse.c:
	* components/help/converters/gnome-db2html2/toc-elements.c:
	* components/help/converters/gnome-info2html2/html.c:
	* components/help/converters/gnome-info2html2/main.c:
	* components/help/converters/gnome-info2html2/parse.c:
	* components/help/converters/gnome-info2html2/utils.c:
	* components/help/converters/gnome-man2html2/gnome-man2html.c:
	* components/help/hyperbola-filefmt.c:
	* components/help/hyperbola-nav-index.c:
	* components/help/hyperbola-nav-search.c:
	* components/help/hyperbola-nav-tree.c:
	* components/html/glibwww-callbacks.c:
	* components/html/glibwww-init.c:
	* components/html/glibwww-trans.c:
	* components/html/gnome-dialogs.c:
	* components/html/ntl-web-browser.c:
	* components/services/install/eazel-install-metadata.c:
	* components/services/install/eazel-install-protocols.c:
	* components/services/install/eazel-install-rpm-glue.c:
	* components/services/install/eazel-install-tests.c:
	* components/services/install/eazel-install-utils.c:
	* components/services/install/eazel-install-xml-package-list.c:
	* components/services/install/eazel-install.c:
	* components/services/install/helixcode-install-utils.c:
	* components/services/startup/eazel-register.c:
	* components/websearch/ntl-web-search.c:
	* helper-utilities/authenticate/athena-authenticate-fork.c:
	* helper-utilities/authenticate/athena-authenticate-pam.c:
	* helper-utilities/authenticate/athena-authenticate.c:
	* libathena-extensions/athena-bonobo-extensions.c:
	* libathena-extensions/athena-file-utilities.c:
	* libathena-extensions/athena-glib-extensions.c:
	* libathena-extensions/athena-link.c:
	* libathena-extensions/athena-mime-type.c:
	* libathena-extensions/athena-undo-transaction.c:
	* librsvg/art_rgba.c:
	* librsvg/art_rgba_svp.c:
	* librsvg/rsvg-bpath-util.c:
	* librsvg/rsvg-path.c:
	* librsvg/rsvg.c:
	* librsvg/test-rsvg.c:
	* athena-widgets/athena-caption-table.c:
	* athena-widgets/athena-password-dialog.c:
	* athena-widgets/athena-preferences-box.c:
	* athena-widgets/athena-preferences-dialog.c:
	* athena-widgets/athena-preferences-group.c:
	* athena-widgets/athena-preferences-item.c:
	* athena-widgets/athena-preferences-pane.c:
	* athena-widgets/athena-radio-button-group.c:
	* athena-widgets/test-athena-widgets.c:
	* athena-widgets/test-preferences.c:
	* src/file-manager/desktop-item.c:
	* src/file-manager/desktop-layout.c:
	* src/file-manager/desktop-menu.c:
	* src/athena-bookmarks-window.c:
	* src/athena-gconf.c:
	* src/athena-window-menus.c:
	* src/athena-window-toolbars.c:
	* src/athena-zoom-control.c
	* src/athena-zoomable-frame-svr.c:
	* src/ntl-app.c:
	* src/ntl-content-view.c:
	* src/ntl-main.c:
	* src/ntl-meta-view.c:
	* src/ntl-miniicon.c:
	* src/ntl-uri-map.c:
	* src/ntl-view-frame-svr.c:
	* src/ntl-view.c:
	* src/ntl-window-state.c:
	Added includes of <config.h>.

2000-05-01  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-icon-text-item.c 
	* libathena-extensions/athena-icon-private.h
	(iti_event),
	(athena_icon_text_item_configure),
	(athena_icon_text_item_start_editing),
	(save_undo_snapshot_callback),
	(restore_from_undo_snapshot_callback):
	
	* libathena-extensions/athena-undo-manager.c
	(athena_undo_manager_remove_transaction),
	(athena_undo_manager_add_undo_transaction),
	(athena_undo_manager_add_redo_transaction), 
	(prune_undo_manager_list):
	Fixed bug in above functions where GList was not getting properly updated 		
	after an insert or remove operation.
	
	* src/athena-location-bar.c 
	(athena_location_bar_initialize_class):
	Added signal connection to the "changed" signal of the GtkEntry item.
	(editable_changed_callback): 
	Added undo operation functionality.
	Original location text is cached in anticipation of an undo operation.
	(athena_location_bar_initialize):
	Added two new memeber variables, undo_text and undo_registered.  undo_text is
	a char * that keeps a cache of the location text before editing.
	undo_registered is a boolean that is set when an undo can be registered.
	(athena_location_bar_set_location):
	undo_registered is set to FALSE and undo_text is updated. 
	(save_undo_snapshot_callback):
	Callback called to create undo transaction
	(restore_from_undo_snapshot_callback):
	Callback called to restore the location bar text.
	(destroy):
	undo_text is freed if it has been allocated.

2000-05-01  John Sullivan  <sullivan@eazel.com>

	Fixed bug 575 (Make Athena use gnome-vfs-mime)

	Converted all the (few) places where Athena code was 
	using the old gnome-libs MIME API to use the new gnome-vfs
	MIME API.

	* components/help/help-method.c (convert_file_to_uri):
	Use gnome_vfs_mime_type_of_file. This function should
	probably use AthenaFile rather than calling the MIME
	stuff directly, but I just couldn't get distracted into
	trying to improve it.
	
	* libathena-extensions/athena-file.c
	(athena_file_get_type_as_string): 
	Use gnome_vfs_mime_description.
	* libathena-extensions/athena-icon-factory.c
	(athena_icon_factory_get_icon_name_for_regular_file):
	Use gnome_vfs_mime_get_value.


	* data/mime/athena.keys: Added a translation for
	"special/symlink" because it now starts showing up when
	using ftp:// locations. Perhaps we need to fix something
	in ftp also.

2000-05-01  Darin Adler  <darin@eazel.com>

	* HACKING: Added option for eog. (Sorry Maciej, I had done it
	before I got your mail.)
        * src/ntl-uri-map.c (make_oaf_query_with_known_mime_type),
        (make_oaf_query_with_uri_scheme_only): Improved comments and
	formatting a little bit more. (Sorry again, Maciej. You can
	merge it however you want!)

2000-05-01  Maciej Stachowiak  <mjs@eazel.com>

	* libathena/athena-zoomable.c: Remove FIXME comment for #681;
	everything wrong with this file seems to be separately recorded.

2000-05-01  Darin Adler  <darin@eazel.com>

	Another cut at icon positioning. Still much tweaking needed.

	* libathena-extensions/athena-icon-canvas-item.c
	(athena_icon_canvas_item_bounds): Got rid of "slop".
	* libathena-extensions/athena-icon-grid.c
	(get_icon_size_power_from_bounds), (get_icon_size_power):
	Get more grid space per icon now that slop is gone.
	(athena_icon_grid_add): Base grid space occupied on the size of
	the icon, not the side of the grid.
	(athena_icon_grid_get_position): Position icons horizontally
	centered in the space, but vertically at the top.

	Made the OAF queries more readable as I discussed with Maciej.
	
	* src/ntl-uri-map.c (extract_prefix_add_suffix),
	(mime_type_get_supertype), (uri_string_get_scheme):
	Make special-purpose string routines use common function instead.
	We must not optimize this kind of thing for speed, but rather for
	ease of reading the code.  This can be whittled down a little more
	and put into athena-string.h
	(make_oaf_query_with_known_mime_type),
	(make_oaf_query_with_uri_scheme_only):
	Reformatted and commented the OAF queries so they are easy to read.

2000-04-30  Darin Adler  <darin@eazel.com>

	* src/file-manager/fm-icon-view.c:
	Fixed a typo that prevented my Bonobo bug fix from working.
	We were still getting crashes when we switched views because
	the radio group was in "Setings", not "Settings".

2000-04-29  Christopher Blizzard  <blizzard@redhat.com>

	* components/mozilla/Makefile.am (INCLUDES): Add $(BONOBO_CFLAGS)
	so that we can pick up the path to the bonobo includes in case
	they are built somewhere else than the standard location.

2000-04-29  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	* librsvg/Makefile.am:
	Check in patch suggested by Roberto Zunino
	<zunino@cli.di.unipi.it>.  Check for gdk-pixbuf in configure and
	use the flags set by that in the rsvg makefile.
	
2000-04-28  Gene Z. Ragan  <gzr@eazel.com>
	
	* libathena-extensions/athena-icon-text-item.c
	* libathena-extensions/athena-icon-text-item.h
	* libathena-extensions/athena-undo-manager-private.h
	Fixed the following FIXME bugs: 684 686 687
	Hooked up the undo mechanism to work properly with
	the renaming widget.

	* libathena-extensions/athena-undo-manager.c
	* libathena-extensions/athena-undo-manager.h
	Add configuration defaults to sets the UndoManager to 
	not use the redo functionality and sets the depth of
	the undo list to one transaction.
	(athena_undo_manager_enable_redo):
	Function to toggle on or off the ability to redo undone transactions.
	(athena_undo_manager_set_queue_depth):
	Function to set the max depth of the undo/redo queues
	(free_undo_manager_list_data):
	New utility function to clean up data in undo/redo list
	(prune_undo_manager_list):
	New utility function that prunes a set number of items from
	either the undo or redo list.
	(athena_undo_manager_add_undo_transaction):
	Manually insert an externally created undo transaction into
	the undo queue.
	(athena_undo_manager_add_redo_transaction):
	Manually insert an externally created undo transaction into
	the redo queue.

	* libathena-extensions/athena-undo-transaction.c
	* libathena-extensions/athena-undo-transaction.h
	(athena_undo_transaction_destroy):
	Added destructor function for a AthenaUndoTransaction object

	* src/athena-window-menus.c
	(update_undo_menu_item):
	Fixed bug 755.  Connected to signal sent by undo manager that informs
	Undo menu item sensitivity to be set.
	
2000-04-28  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-background.c
	(background_destroyed_callback),
	(athena_connect_background_to_directory):
	gtk_signal_connect_while_alive wasn't quite up to the task,
	so I had to redo the fix from my last check-in.

2000-04-28  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/Makefile.am:
	Add missing .h files to SOURCES.
	
2000-04-28  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-background.c
	(athena_connect_background_to_directory): 
	Added code to disconnect when the background is destroyed.
	This was exposed by our lack of leaking now!
	
2000-04-28  Darin Adler  <darin@eazel.com>

	* ntl-window-msgs.c (athena_window_has_really_changed):
	Quick, kinda-hacky fix for the bug you'd see when you
	switch to "hardware:" and then do go-back.

2000-04-28  Darin Adler  <darin@eazel.com>

	* src/ntl-uri-map.c (async_get_file_info_text):
	Fix bug that prevents non-vfs URIs from working.
	Just need to initialize the async. handle to NULL.

2000-04-28  Darin Adler  <darin@eazel.com>

	This little check-in fixes the last April bug and maybe one or
	two leaks in Athena.

	* src/ntl-view.c (athena_view_destroy_client): To work around
	the circular reference problem in Bonobo, change a call to
	bonobo_object_unref to bonobo_object_destroy. This fixes the leak
	of the entire viewer each time.

	* src/file-manager/fm-directory-view.c (fm_directory_view_destroy):
	The FMDirectoryView does not own its view_frame. This is confusing
	and needs some reorganization, but it should not unref. It's actually
	the view_frame that owns the directory view despite the fact that
	it's created by the directory view and the directory view holds a
	reference to it! This bug prevented Maciej from doing the workaround
	the last time he tried it.

	* libathena-extensions/athena-file-changes-queue.c
	(athena_file_changes_queue_get),
	(athena_file_changes_consume_changes):
	A small cleanup. The global variable was getting in the way.
	
2000-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	* src/ntl-main.c (main): Fix a dumbass mistake.  Take out some
	real code from inside an assert.
	
2000-04-28  Darin Adler  <darin@eazel.com>

	Some cleanup inspired by Maciej's check-in.
	
	* libathena-extensions/athena-directory-async.c
	(ready_callback_call),
	(athena_directory_call_when_ready_internal),
	(call_ready_callbacks):
	Made the fix so that call_when_ready works properly when a NULL
	directory is passed in.
	
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-file.c
	(athena_file_call_when_ready): Fix for call_when_ready with
	a NULL file.
	(athena_file_ref), (athena_file_list_ref),
	(athena_file_list_copy): Filled out the operations on lists.
	
	* libathena-extensions/athena-gtk-extensions.h:
	* libathena-extensions/athena-gtk-extensions.c
	(athena_gtk_object_list_ref), (athena_gtk_object_list_copy):
	Filled out the operations on lists.
	
	* src/ntl-uri-map.c (got_metadata_callback): Factored out the
	call to async get_file_info to simplify the logic.
	(athena_navigation_info_new): Took out the check for NULL that
	Maciej mentioned in his notes below now that call_when_ready can
	handle things.
	(athena_navigation_info_cancel),
	(athena_navigation_info_free): Took out some excessive NULL
	checks when calling routines that work with NULL.

2000-04-28  Maciej Stachowiak  <mjs@eazel.com>

	* src/ntl-content-view.c (athena_content_view_set_active): Fix a
	refcounting problem; make sure to unref the interface we
	query_local_interface for.

	* components/music/athena-music-view.oafinfo: Add "audio/x-mp3"
	as directory content type that satisfies the requirement so the
	music view activates automatically (the point of the below
	excercise). Netscape thinks the mime type for mp3's should be
	"audio/x-mpeg" but I am not going to argue.

	Achieved bugzilla tasks #701 and #108, plus did some refactoring
	of the big hairy `got_file_info_callback' function.

	* src/ntl-uri-map.h: add a `files' member to the
	AthenaNavigationInfo struct, a GList of AthenaFiles it
	contains in case it is a directory.
	
	* src/ntl-uri-map.c (got_file_info_callback): Factored out some
	code into separate functions and simplified the control flow. For
	each potential component, test if it matches the content
	requirements before adding it to the list of available content
	view components.

	(make_oaf_query_with_known_mime_type,
	make_oaf_query_with_uri_scheme_only): New function; breaks out the
	logic of constructing an oaf query when the mime type is known and
	unknown repsectively from `got_file_info_callback'.
	(make_oaf_query_with_known_mime_type): Remove the hack to try to
	explicitly exclude the music view.

	(file_list_to_mime_type_hash_table): New utility function; takes a
	GList of AthenaFiles and returns a hash table which has an entry
	for each mime type that at least one of thse files has. This is so
	that we can susequently test if any of the files on the list has a
	particular mime type in constant time.
	(server_matches_content_requirements): New fucntion. Returns true
	if the server record does not require specific content mime types,
	or if it does and the passed hash table contains at least one of
	those.

	(athena_view_identifier_new_from_oaf_server_info): New helper
	function to create a AthenaViewIdentifier directly from an
	OAF_ServerInfo record.

	(got_metadata_callback): Initialize the `files' field of the
	navinfo struct to a copy of the file list that
	`athena_directory_call_when_ready' gave us; ref all the
	AthenaFiles in this copy.
	(athena_navigation_info_new): Ask for the mime types of files in
	the directory as well as for the metadata keys we need.
	(athena_navigation_info_cancel): Only try to cancel if the
	navinfo actually has a directory, to avoid segfaulting.
	(athena_navigation_info_free): Free the files list. Free both
	this and the directory if and only if they are not NULL.

	
	* src/ntl-uri-map.c (athena_navigation_info_new): When
	navinfo->directory is null, call got_metadata_callback directly
	instead of calling `athena_directory_call_when_ready' to avoid
	segfaulting on protocols that gnome-vfs does not understand like
	`hardware:'. There is probably a way to fix this in
	`athena_directory_call_when_ready' but I did not want to mess
	with it.
	(got_file_info_callback): Renamed from `my_notify_when_ready'.

2000-04-27  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-directory-async.c: include
	<stdlib.h>, my compiler insists on it.

2000-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	Add a real check for pam.

	* acconfig.h:
	Add HAVE_PAM.
	
	* configure.in:
	Check for pam.
	
	* helper-utilities/authenticate/Makefile.am:
	Use $(PAM_LIBS) instead of hardcoding.

2000-04-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 660 (Need to publish menu positions for components to use)

	* libathena/athena-bonobo-ui.h:
	New file, contains #defines for Bonobo-style menu paths for all
	the menus & menu items in Athena that we promise components
	will exist.
	* libathena/Makefile.am: Include this new header file in library.
	
	* src/athena-window-menus.c: Extensive changes, too many to list
	every function. Replaced all the GnomeUIInfo mechanism with
	Bonobo-style menu creation, using the menu paths from
	athena-bonobo-ui.h. While I was in here, I also renamed some
	functions (especially xxx_cb -> xxx_callback), tweaked some text, 
	and used some more standard Gnome menu item pixmaps (not sure if I 
	like them or not yet).
	
	* src/ntl-window-private.h,
	* src/ntl-window.c:
	(athena_window_back_cb), (athena_window_forward_cb),
	(athena_window_up_cb), (athena_window_home_cb): Replaced
	these GtkWidget-callback style functions (formerly used
	by both menu items and toolbar buttons) with new AthenaWindow
	oriented ones athena_window_go_back, athena_window_go_forward,
	athena_window_go_up, and athena_window_go_home.
	(athena_window_allow_back), (athena_window_allow_forward),
	(athena_window_allow_up): replaced hardwired Bonobo menu paths
	with the new #defines.

	* src/athena-window-toolbars.c:
	Renamed some functions xxx_cb -> xxx_callback.
	(toolbar_back_callback), (toolbar_forward_callback),
	(toolbar_up_callback), (toolbar_home_callback): New GtkWidget-callback
	style functions used exclusively by the toolbar.
	
	* src/file-manager/fm-directory-view.h:
	Removed FM_DIRECTORY_VIEW_PATH_CLOSE and 
	FM_DIRECTORY_VIEW_PATH_SELECT_ALL, since callers should use
	the paths defined by Athena for these.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_real_merge_menus): Replaced special insider knowledge
	of menu positions with use of the new #defines. Also tweaked with the
	keyboard underscore shortcuts for some items.

2000-04-27  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	Rewrite of the state machine. This adds the new feature that Maciej
	needs where you can call "call_when_ready" to get file attributes.
	
	* libathena-extensions/athena-directory-private.h:
	Added a file_list_monitored boolean to simplify the logic.
	
	* libathena-extensions/athena-directory.c
	(athena_directory_destroy): Took advantage of file_list_monitored
	simplification.
	(athena_directory_call_when_ready),
	(athena_directory_cancel_callback): Tweaked the return_if_fail
	calls to match changes in the async.c file.
	(got_files_callback), (athena_self_check_directory):
	Added self-check code to test the new feature.
	
	* libathena-extensions/athena-string.h:
	* libathena-extensions/athena-string.c (athena_str_compare):
	Added a new function for use with things that take a GCompareFunc
	to avoid a function type cast.

2000-04-27  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-undoable.c
	* libathena-extensions/athena-undoable.h
	* libathena-extensions/athena-undo-manager.c
	* libathena-extensions/athena-undo-manager.h
	* libathena-extensions/athena-undo-transaction.c
	* libathena-extensions/athena-undo-transaction.h
	* libathena-extensions/athena-undo-manager-private.h
	Added architecture for undo mechanism.
	AthenaUndoManager maintains undo and redo queues of
	AthenaUndoTransactions as well as maintaining various state
	information pertinant to the user interface.
	AthenaUndoTransaction contains a transaction name and a list of
	AthenaUndoables. AthenaUndoable is a object that contains a
	pointer to an object and a GData object. The GData object
	contains named data that can be added and retrieved during an
	undo/ redo operation. The AthenaUndoable also emits signals to
	the object that enables it to perform the undo and redo
	operations. I will write up more complete documents when the code
	has matured.
	
	* libathena-extensions/athena-icon-container.c
	* libathena-extensions/athena-icon-container.h
	* src/file-manager/fm-icon-view.c
	Removed obsolete undo functions and callbacks. These were
	invalidated by the new undo mechanism.

	* src/ntl-main.c
	Added call to athena_undo_manager_initialize_global_manager() in
	main. This call initializes a Athena global undo manager. Also
	fixed some minor coding style issues.
	
	* athena-window-menus.c (edit_menu_undo_callback):
	Added callback to handle selection of Undo item form edit menu.
	Callback checks with Undo Manager for a current undo transaction
	and asks manager to perform an undo if there is one.

2000-04-27  Darin Adler  <darin@eazel.com>

	* MAINTAINERS: Changed to the new Athena list instead of the
	old secret list.
	
	* components/notes/ntl-notes.c (notes_load_metainfo):
	* src/file-manager/fm-directory-view.c
	(fm_directory_view_load_uri), (metadata_ready_callback):
	* src/ntl-uri-map.c (got_metadata_callback),
	(athena_navigation_info_new):
	Change calls to use new API, but not to use any of the new features,
	which are not yet implemented.
	
	* libathena-extensions/athena-directory.h:
	* libathena-extensions/athena-directory.c
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory-async.c
	* libathena-extensions/athena-file.c
	* libathena-extensions/athena-file.h:
	Added the new API and moved functions around a bit to prepare
	for the new feature needed by Maciej for getting a list of files.
	
	* libathena-extensions/athena-file-attributes.h:
	Added an attribute constant for MIME type.
	
2000-04-27  J. Shane Culpepper  <pepper@eazel.com>
	
	* components/services/install/genpkg_list.example
	* components/services/install/eazel-install.c
	* components/services/install/eazel-install-protocols.c
	* components/services/install/eazel-install-rpm-glue.c
	* components/services/install/eazel-install-types.h
	* components/services/install/eazel-install-xml-package-list.h
	* components/services/install/eazel-install-xml-package-list.c

	Cleaned up invalid variable names to conform to eazel coding standards.
	Added the genpkg_list option to create a package-list.xml from a
	colon delimited input file.  Created an example file of the input
	called genpkg_list.example.

2000-04-27  Darin Adler  <darin@eazel.com>

	More FIXME-to-bug work.
	
	* check-FIXME.pl: Fixed bug that happens when there are no
	outstanding FIXMEs (hooray!).
	
	* components/hardware/athena-hardware-view.c
	(get_RAM_description):
	* components/help/help-method.c (convert_file_to_uri),
	(transform_absolute_file):
	* components/history/ntl-history-view.c
	(hyperbola_navigation_history_select_row), (make_obj), (int):
	* components/html/Makefile.am:
	* components/html/main.c (pdsink_start), (url_requested_cb),
	(view_size_query_cb):
	* components/mozilla/athena-mozilla-content-view.c
	(athena_mozilla_content_view_load_uri):
	* components/music/athena-music-view.c
	(athena_music_view_initialize), (athena_music_view_destroy),
	(is_mp3_file), (fetch_song_info), (determine_attribute):
	* components/rpmview/athena-rpm-view.c
	(athena_rpm_view_initialize), (check_installed):
	* components/services/install/eazel-install-rpm-glue.c
	(install_new_packages):
	* components/services/install/eazel-install-types.h:
	* components/services/startup/eazel-register.c (xmlDoc):
	Added bug numbers to FIXMEs, writing bug reports as needed.

2000-04-27  John Sullivan  <sullivan@eazel.com>

	More FIXME-to-bug work.
	
	* configure.in
	* components/services/startup/athena-service-startup-view.c,
	* libathena-extensions/athena-directory-async.c,
	* libathena-extensions/athena-global-preferences.c,
	* libathena-extensions/athena-icon-canvas-item.c,
	* src/ntl-uri-map.c:

	Wrote bug reports for all FIXMEs in these files. With
	this checkin and Darin's next one, there should be no
	more FIXMEs in Athena without a bug report. 

2000-04-27  Joe Shaw <joe@helixcode.com>

	* components/rpmview/athena-rpm-view.c
	(athena_rpm_view_update_from_uri): Changed call of fdValidb
	to checking to ensure that file_descriptor != NULL. fdValid was
	removed from RPM 3.0.4 and this bit of code provides the same
	functionality. It'll build on 3.0.4-based systems now (like Red   
	Hat 6.2). Bad Red Hat for breaking reverse compatibility on a
	minor upgrade.

2000-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	* src/ntl-uri-map.c (my_notify_when_ready): Quiet down the mjs
	debug noise for us mortals.
	
2000-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	Add authenticate helper utility to build.

	* Makefile.am:
	Add helper-utilities to build.

	* configure.in:
	Add helper-utilities and helper-utilities/authenticate to build
	using a conditional flag until better pam detection voodoo can be
	written.

	* helper-utilities: New dir.

	* helper-utilities/authenticate: New dir.  A simple utility to
	authenticate a user using PAM and execute a command on their
	behalf.  Still needs some work to be more useful.

	* helper-utilities/authenticate/athena-authenticate.h,
	  helper-utilities/authenticate/athena-authenticate.c,
	  helper-utilities/authenticate/athena-authenticate-pam.c,
	  helper-utilities/authenticate/athena-authenticate-fork.c:
	New files.  Code for authenticate helper utility.
	
2000-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	More 'make dist' fixes.  I missed the services dir.

	* components/services/install/Makefile.am:
	  Add missing .h files SOURCES.

	* components/services/startup/Makefile.am:
	  Add missing .h files SOURCES.

	* Makefile.am:
	Add athena.png to EXTRA_DIST.

2000-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	Add gnome panel .desktop file and logo.

	* athena.desktop: New panel .desktop file.
	* athena.png: New panel athena icon.
	* Makefile.am: Install the above 2.  Also install the
	  athena-clean.sh script.
	
	* src/run-athena: Add dumb script to run athena while we work
	  on the rogue process bugs.

	* src/Makefile.am: Install the above script.
	
2000-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	More 'make dist' fixes.  Let automake know about private headers
	so that the dist tarball will contain them.

	* components/help/Makefile.am,
	* components/mozilla/Makefile.am,
	* components/rpmview/Makefile.am,
	* components/sample/Makefile.am:
	Add .h files to SOURCES.

	* libathena/Makefile.am:
	Add missing athena-zoomable.h to HEADERS.
	Add missing private .h files SOURCES.
	
	* libathena-extensions/Makefile.am:
	Add missing .h files to HEADERS.
	Add missing private .h files SOURCES.
	Add missing idl sources top EXTRA_DIST.
	
	* athena-widgets/Makefile.am:
	Add missing athena-widgets-self-check-functions.h to SOURCES.
	
	* src/Makefile.am:
	Add missing athena.h to SOURCES.
	
2000-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	Add .h files to la_SOURCES to make 'make dist' happy.
	
2000-04-27  Maciej Stachowiak  <mjs@eazel.com>

	Fix bugzilla task #106:

	* src/ntl-uri-map.c (mime_type_get_supertype,
	uri_string_get_scheme): Helper functions for generating the
	OAF queries.
	(my_notify_when_ready): Replaced the hardcoded mess with calls to
	a couple of OAF queries. This function still needs major
	additional refactoring. I have also introduced some FIXMEs which
	call attention to problems that were already there in the code in
	most cases.

	* components/hardware/athena-hardware-view.oafinfo,
	components/help/hyperbola.oafinfo,
	components/html/ntl-web-browser.oafinfo,
	components/mozilla/athena-mozilla-content-view.oafinfo,
	components/music/athena-music-view.oafinfo,
	components/notes/ntl-notes.oafinfo,
	components/rpmview/athena-rpm-view.oafinfo,
	components/sample/athena-sample-content-view.oafinfo,
	components/services/startup/athena-service-startup-view.oafinfo,
	components/websearch/ntl-web-search.oafinfo, src/athena.oafinfo:
	Added all relevant general, bonobo and athena properties to
	content views; some to meta views.	

2000-04-26  Andy Hertzfeld <andy@eazel.com>
	
	added an "About Athena" HTML file to the novice home directory
	
	* data/top/About.html: new about file
	* data/top/Makefile.am: added new file
	* libathena-extensions/athena-file-utilities:
	installed a custom icon for the about file
	
2000-04-26  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/dfos-xfer.c:
	(fs_xfer):
	Fixed a memory thrasher Darin ran into.
	The code in question was just asking for trouble to begin with.
	 
2000-04-26  Andy Hertzfeld <andy@eazel.com>

	fixed bug #683, experts shouldn't get suffix stripped from link file
	
	* libathena-extensions/athena-global-preferences.h:
	added preference for show_real_file_names
	* libathena-extensions/athena-global-preferences.c:
	made the user level code set show_real_file_names appropriately
	* libathena-extensions/athena-link.c:
	use the above preference to control suffix stripping
	 
2000-04-26  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory.c
	(make_uri_canonical), (is_canonical_uri),
	(athena_directory_get), (get_parent_directory_if_exists),
	(athena_self_check_directory):
	Added hack for handling "file:/" vs. "file:///" and put a little
	framework in place to help us deal with caonical URIs later.
	
	* src/file-manager/fm-directory-view.c (display_pending_files):
	Fixed a FIXME bug #.

2000-04-26  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-async.c
	(athena_directory_schedule_dequeue_pending_idle),
	(new_files_callback), (athena_directory_get_info_for_new_files):
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.c (call_files_added),
	(call_files_added_free_list) (call_files_changed),
	(call_fiels_changed_free_list), (call_get_file_info_free_list),
	(athena_directory_notify_files_added),
	(athena_directory_notify_files_removed),
	(athena_directory_notify_files_moved):
	Implemented async. lookup of information about newly arrived
	files. Changed moved files to work without a new call to get
	file information. Fixed some storage leaks.

	* libathena-extensions/athena-directory-async.c
	(empty_close_callback), (metafile_read_close),
	(athena_metafile_read_cancel), (metafile_read_callback),
	(metafile_read_some), (metafile_read_open_callback),
	(metafile_write_callback): Fixed bug where we were not closing
	files when cancelling.  This requires a bug fix in GNOME VFS to be
	effective.

	* libathena-extensions/athena-directory-async.c
	(dequeue_pending_idle_callback):
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.c
	(athena_directory_destroy):
	Use new functions in GNOME VFS instead of our own.
	
	* components/html/ntl-web-browser.c (main): Fixed a warning.
	* docs/athena.faq: Tweak.

2000-04-26  John Sullivan  <sullivan@eazel.com>

	More FIXME-to-bug work.
	
	* libathena/athena-view-frame.c,
	* libathena/athena-zoomable.c,
	* libathena-extensions/athena-icon-text-item.c,
	* libathena-extensions/athena-link.c,
	* libathena-extensions/athena-mime-type.c:

	Wrote bug reports for all FIXMEs in these files. Down to 
	45 in Athena with no bug report.

2000-04-26  Rebecca Schulman <rebecka@eazel.com>

	Fixed bug #99:  Implemented copy, paste, clear, and cut for text
	Added new files athena-clipboard.c,h which contains clipboard
	functionality.  All components with text widgets should use this
	code.  It can just be copied from any existing sample code
	(see ntl-notes.c in the notes component)
	The frame cut, copy and paste stuff is now happy when there is a 
	widget in focus.

	Added
	* libathena/athena-clipboard.c
	* libathena/athena-clipboard.h

	Modified
	* src/athena-window-menus.c  (turned on clear, fixed up callbacks for
	  cut, copy, and paste buttons)
	* components/notes/ntl-notes.c (Clipboard activated notes text box)
	* components/websearch/ntl-web-search.c (Clipboard activated the search box)

2000-04-26  John Sullivan  <sullivan@eazel.com>

	More FIXME-to-bug work.
	
	* check-FIXME.pl: Added the three desktop-drawing files
	that aren't included in the build to the list of files
	in which to ignore FIXMEs.
	
	* athena-widgets/athena-caption-table.c,
	* athena-widgets/athena-preferences-group.c,
	* athena-widgets/athena-preferences.c,
	* src/file-manager/dfos-xfer-progress-dialog.c,
	* src/file-manager/dfos-xfer.c:

	Wrote bug reports for all FIXMEs in these files. Down to 
	54 in Athena with no bug report.

2000-04-26  Andy Hertzfeld <andy@eazel.com>

	fixed bug #603, set index panel background image via drag and drop
	
	* libathena-extensions/athena-background.c:
	fixed bug in athena_background_draw_flat_box, where it wasn't
	checking for the image case when deciding to let the parent do
	the drawing.
	* src/ntl-index-panel.c:
	fixed bug where it was losing the background image metadata when
	setting the background color.  Fixed by reading both before
	setting either.
	
2000-04-26  John Sullivan  <sullivan@eazel.com>

	More FIXME-to-bug work.
	
	* src/athena-bookmarks-window.c,
	* src/athena-location-bar.c,
	* src/athena-window-menus.c,
	* src/athena-zoom-control.c,
	* src/ntl-main.c,
	* src/ntl-uri-map.c:

	Wrote bug reports for all FIXMEs in these files. Down to 
	71 in Athena with no bug report.

2000-04-26  John Sullivan  <sullivan@eazel.com>

	More FIXME-to-bug work.

	* src/athena-index-title.c,
	* libathena-extensions/athena-gdk-extensions.h,
	* libathena-extensions/athena-gdk-extensions.c:
	(select_font): Moved this function to gdk_extensions
	and renamed it athena_get_largest_fitting_font.

	* src/athena-index-tabs.c,
	* src/athena-index-title.c,
	* src/file-manager/fm-list-view.c,
	* src/file-manager/fm-properties-window.c:
	Wrote bug reports for all (other) FIXMEs in these files. Down to 
	81 in Athena with no bug report.

2000-04-26  Andy Hertzfeld <andy@eazel.com>

	* src/ntl-index-panel.c:
	made dropping images on the index panel set the background tile to
	the dropped image.  There's an underlying bug in athena-background
	that prevents it from drawing unless a gradient background has been
	previously set up; Darin or I will fix that soon.
	
2000-04-26  John Sullivan  <sullivan@eazel.com>

	More FIXME-to-bug work.

	* src/file-manager/fm-directory-list.c: Removed this
	unused file rather than dealing with its FIXMEs (at
	Darin's suggestion).
	
	* src/file-manager/fm-directory-view.c,
	* src/file-manager/fm-icon-view.c:
	Wrote bug reports for all FIXMEs in these files. Down to 90
	in Athena with no bug report.

2000-04-26  Ramiro Estrugo  <ramiro@eazel.com>

	* doc/athena.faq: Added faq.
	
2000-04-26  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/fm-directory-view.c:
	Change a FIXME bug number after getting rid of a duplicate bug.

2000-04-26  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/Makefile.am: Install .h files in the
	right place.

	* athena.spec.in: New file.  First try at a rpm spec.  Not
	expected to quite work yet.

	* .cvsignore: Ignore the generated spec.

	* Makefile.am,
	  configure.in: Add athena.spec file to build.

2000-04-26  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-async.c
	(athena_directory_file_monitor_add):
	Fixed an assert that was breaking "make check".
	
	* libathena-extensions/athena-directory.c
	(athena_directory_notify_files_added),
	(athena_directory_notify_files_moved):
	Updated bug numbers on FIXMEs in here.

2000-04-26  John Sullivan  <sullivan@eazel.com>

	More FIXME-to-bug work.

	* libathena-extensions/athena-directory.c,
	* libathena-extensions/athena-file-utilities.c,
	* libathena-extensions/athena-file.c,
	* libathena-extensions/athena-icon-factory.c:

	Wrote bug reports for all FIXMEs in these files.

2000-04-26  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-password-dialog.c,
	  athena-widgets/athena-password-dialog.h,
	  test-athena-widgets.c: Add a password dialog widget.  It
	doesnt do the actual authentication, just the widgetry.

	* athena-widgets/test-athena-widgets.c: Add new test for
	password dialog, and properly call gnome_init() instead of
	gtk_init() to prevent imlib braindamage. 

	* athena-widgets/athena-caption-table.c: Style dumbness.
	
2000-04-26  Ian McKellar  <yakk@yakk.net>

	* components/hardware/athena-hardware-view.c:
	Made the hardware view detect all the CPUs in the system and 
	display an icon for each.

2000-04-26  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-caption-table.c,
	  athena-widgets/athena-caption-table.h,
	  test-athena-widgets.c: Add a caption table widget which i will
	later use for a password prompt dialog.
	
2000-04-26  Pavel Cisler  <pavel@eazel.com>

	* librsvg/test-rsvg.c:
	Make it build:
	Add a workaround const cast for poptGetContext that thinks it's using
	const properly.
	
2000-04-26  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/fm-directory-view.c
	* src/file-manager/fm-directory-view.h:
	(bonobo_menu_open_in_new_window_cb), (bonobo_menu_delete_cb),
	(bonobo_menu_duplicate_cb), (fm_directory_view_get_model),
	(fm_directory_view_delete_with_confirm), (append_uri_one),
	(fm_directory_duplicate_selection), (compute_menu_item_info),
	(fm_directory_view_real_append_selection_),
	(fm_directory_view_real_merge_menus),
	(fm_directory_view_real_update_menus), (free_file_by_uri_map),
	(fm_directory_view_get_context_menu_index):
	Added "Move to Trash" and "Empty Trash" menu items.
	Disabled the existing Delete code (I'll scavenge it later to implement
	Delete as a fallback.)
	
	* src/file-manager/dfos-xfer.h:
	* src/file-manager/dfos-xfer.c (file_operation_alert), (fs_xfer),
	(get_parent_make_name_list), (fs_move_to_trash):
	Add move to trash and empty trash calls.


	* libathena-extensions/athena-file-changes-queue.c
	(athena_file_changes_queue_get_change),
	(athena_file_changes_consume_changes):
	Fix a problem with athena_file_changes_consume_changes getting called
	when there is no change allocated yet.

	* libathena-extensions/athena-directory.c
	(athena_directory_notify_files_added),
	(athena_directory_notify_files_removed),
	(athena_directory_notify_files_moved):
	Got rid of old debugging code.

2000-04-26  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-clean.sh: Give this thing a -q flag to quiet down noise.

2000-04-26  J. Shane Culpepper  <pepper@eazel.com>
	*components/services/install/eazel-install.c
	*components/services/install/Makefile.am
	*components/services/install/eazel-install-metadata.c
	*components/services/install/eazel-install-metadata.h
	*components/services/install/eazel-install-protocols.h
	*components/services/install/eazel-install-protocols.c
	*components/services/install/eazel-install-rpm-glue.c
	*components/services/install/eazel-install-rpm-glue.h
	*components/services/install/eazel-install-tests.h
	*components/services/install/eazel-install-tests.c
	*components/services/install/eazel-install-utils.c
	*components/services/install/eazel-install-utils.h
	*components/services/install/eazel-install-xml-package-list.h
	*components/services/install/eazel-install-xml-package-list.c
	*components/services/install/helixcode-install-utils.c
	*components/services/install/helixcode-install-utils.h
	Adding the new files for eazel-install.  Basically the same as before
	but broken up better for further development.

2000-04-26  J. Shane Culpepper  <pepper@eazel.com>

	* components/services/install/eazel-install-lib.h
	* components/services/install/eazel-install-lib-xml.c
	* components/services/install/eazel-install-lib-xml.h
	* components/services/install/eazel-install-lib-rpm.c
	* components/services/install/eazel-install-lib-rpm.h
	* components/services/install/eazel-install-lib-debug.c
	* components/services/install/eazel-install-lib-debug.h
	* components/services/install/eazel-install-lib-util.h
	* components/services/install/eazel-install-lib-util.c

	Removing current installer in order to checkin the new structure

2000-04-25  Ramiro Estrugo  <ramiro@eazel.com>

	Simplified preferences api by letting gconf do most of the work.
	Removed usage of global preferences from everywhere.  There is no
	longer a global preferences object.  All preference peek/poke
	operations are done through a gconf client thing.

	* components/history/ntl-history-view.c:
	(main): Call athena_preferences_initialize()

	* libathena-extensions/athena-global-preferences.c:
	Removed usage of global preferences.

	* libathena-extensions/athena-icon-container.c:
	Remove usage of unneeded global preferences.

	* libathena-extensions/athena-icon-factory.c
	Remove usage of unneeded global preferences.

	* libathena-extensions/athena-list.c:
	Remove usage of unneeded global preferences.

	* athena-widgets/athena-preference.c
	  athena-widgets/athena-preference.h:
	Remove all default_value related crap.  Not needed no more.  Let
	gconf worry about default values.

	* athena-widgets/athena-preferences-group.c,
	  athena-widgets/athena-preferences-group.h:
	(athena_preferences_group_add_item): 
	No longer need to pass in preferences.

	* athena-widgets/athena-preferences-item.c,
	  athena-widgets/athena-preferences-item.h:
	No longer need to store a reference to a preferences object in our
	class.  Also,  no longer need to pass in preferences to any
	function.

	* athena-widgets/athena-preferences-pane.c,
	  athena-widgets/athena-preferences-pane.h:
	(athena_preferences_pane_add_item_to_nth_group): No longer need
	to pass in preferences.

	* athena-widgets/athena-preferences.c,
	  athena-widgets/athena-preferences.h:
	Remove the AthenaPreferences class.  Gconf does the thinking for
	preferences now and there is no need to divide things up by
	domain - thus no need for multiple preference objects.  The api
	was changed to reflect this.  All preferences peek/poke operations
	go through a global gconf_client thing.

	Removed the storing and usage of a value.  Gconf and only it
	stores values for preferences.

	Use gconf for callback notifications.

	* athena-widgets/test-athena-widgets.c: Update for the above
	changes.
	
2000-04-25  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-clean.sh: Return 0 at the end of the script so that it
	can be used like this: athena-clean.sh && ./src/athena

	* src/athena-window-menus.c:
	(use_eazel_theme_icons_cb): No longer need to use global
	preferences. 

	* src/ntl-main.c:
	(main): Call athena_preferences_initialize, not
	athena_preferences_init.
	
	* src/ntl-uri-map.c:
	(add_meta_view_iids_from_preferences): No longer need to use
	global preferences.  Also, changed the default value passed in to
	FALSE so that only meta views that are explicitly turned on
	(somewhere else) show up.

	* src/ntl-window-state.c:
	(athena_window_set_initial_state): No longer need to use
	global preferences.  

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize): No longer need to use
	global preferences.  
	
	* src/file-manager/fm-icon-text-window.c:
	(changed_attributes_option_menu_cb), (create_icon_text),
	(fm_icon_text_window_destroy_cb),
	(fm_get_text_attribute_names_preference_or_default): No longer
	need to use global preferences.  
	
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_initialize), (fm_icon_view_destroy), : No longer
	need to use global preferences.  

2000-04-25  Darin Adler  <darin@eazel.com>

	This change requires a new gnome-vfs.

	* HACKING: Updated URL for popt.
	
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_update_from_uri):
	Changed to use FD_t for real instead of casting a pointer to a
	raw file descriptor to it.

	* libathena-extensions/athena-directory-async.c:
	Told it to load 32 items at a time instead of 1.
	I think it's time we try this. It seems to work.

	* src/ntl-uri-map.c (my_notify_when_ready),
	(got_metadata_callback): Change to use the new version of
	async. get_file_info.

2000-04-25  Andy Hertzfeld <andy@eazel.com>

	made drag and drop to and from the location bar work properly
	
	* src/athena-location-bar.c:
	changed the exported drag action to GDK_ACTION_LINK, as well as making
	it accept links.  Fixed crashes in drag_data_get by referencing the
	actual location bar instead of the event box, and by not destroying
	the result from gtk_entry_get_text, since it's not a copy.  Made it
	actually go to the dropped in uri by emitting the location changed
	signal.

2000-04-25  John Sullivan  <sullivan@eazel.com>

	* data/mime/athena.keys
	
	Removed [en_US] from file-type human-readable descriptions.
	Added text explaining how to add a localized description.
	This fixes problem where if your language variable isn't
	set you get raw MIME types instead of human-readable descriptions.	

2000-04-25  John Sullivan  <sullivan@eazel.com>

	More FIXME-to-bug work.

	* libathena-extensions/athena-icon-container.c,
	* libathena-extensions/athena-icon-dnd.c:
	Wrote bug reports for all FIXMEs in these files.

2000-04-25  J. Shane Culpepper  <pepper@eazel.com>

	* components/services/install/eazel-install.c
	* components/services/install/eazel-install-lib.h
	* components/services/install/eazel-install-lib-xml.c
	* components/services/install/eazel-install-lib-rpm.c
	* components/services/install/eazel-install-lib-debug.c

	Added command line otions to set remote server and local download
	directory.  Did more cleaning and testing of the automatic http
	download options.

2000-04-25  John Sullivan  <sullivan@eazel.com>

	More FIXME-to-bug work.

	* libathena-extensions/athena-list.c,
	* libathena-extensions/athena-list-column-title.c:
	Wrote bug reports for all FIXMEs in these files.

2000-04-25  John Sullivan  <sullivan@eazel.com>

	Started going through the FIXMEs adding bug reports
	and fixing some trivial ones. 14 down, 152 Athena
	FIXMEs to go.

	* src/ntl-index-panel.c:
	Wrote bug reports for all FIXMEs in this file.
	
	* src/ntl-window-msgs.c,
	* src/ntl-window-private.h,
	* src/ntl-window.c:
	(view_menu_switch_views_callback), 
	(athena_window_load_content_view_menu): Moved functions from
	ntl-window-msgs.c to ntl-window.c. Updated private header file
	as necessary.
	
	Wrote bug reports for all other FIXMEs in these files.

2000-04-25  Andy Hertzfeld <andy@eazel.com>

	* src/ntl-index-panel.c:
	removed debugging statement that was accidentally checked in and
	fixed glitch where the title tab was a bit separated from the view
	
2000-04-25  Andy Hertzfeld <andy@eazel.com>

	fixed bug 519: dead space in sidebar
	
	* src/ntl-index-panel.c:
	removed set_usize call that was setting the meta-views to a fixed size;
	instead, set the expand and fill parameters to the box pack call to
	true, so the metaview is sized to fill the available space
	
	fixed bug 362: tab color is settable but not remembered
	
	* libathena-extensions/athena-metadata.h:
	added new metadata tags for the main tab and title tab colors
	* src/athena-index-tabs.c,h:
	added athena_index_tabs_set_color to set the tab color
	* src/ntl-index-panel.c:
	set the metadata in receive_dropped_color and set the tab color
	from the stored metadata in index_panel_update_info
	
2000-04-25  J. Shane Culpepper  <pepper@eazel.com>
	
	* components/services/install/eazel-install.c
	* components/services/install/eazel-install-lib-rpm.c
	* components/services/install/eazel-install-lib-rpm.h
	* components/services/install/eazel-install-lib-xml.c
	* components/services/install/eazel-install-lib-xml.h
	* components/services/install/eazel-install-lib.h
	* components/services/install/eazel-install-lib-util.h
	* components/services/install/eazel-install-lib-util.c
	* components/services/install/eazel-install-lib-debug.c
	* components/services/install/eazel-install-lib-debug.h

	Adding http fetch of remote rpm files.  Minor cleanups.  Adding credit
	to Joe Shaw <joe@helixcode.com> for portions of the current prototype.
	This should have been done at the very beginning.  The idea for using
	gnet and large chunks of the current xml parsing come from his work on
	the Helix Code install/updater.

2000-04-25  John Sullivan  <sullivan@eazel.com>

	Fixed part of bug 556 (athena_file_can_rename returns
	TRUE for /root, but shouldn't). Only remaining issue is
	the no-athena-file-for-/ problem, which is already written
	up separately.
	
	Fixed bug 546 (Folders/files without read permissions should
	not be viewable).
	
	* libathena-extensions/athena-file.h,
	* libathena-extensions/athena-file.c:
	(athena_file_denies_access_permission): New private
	function that checks permissions, including checking
	whether the current user is the owner or in the group
	of the queried file. If permissions aren't valid, returns
	FALSE.
	(athena_file_can_read), (athena_file_can_write),
	(athena_file_can_execute): New public functions that
	use athena_file_denies_access_permission to determine
	which access permissions the current user has. They return
	TRUE if permissions aren't valid, so callers still have to
	be prepared to handle failures.
	(athena_file_can_rename): Now calls athena_file_can_write
	on the parent directory. Formerly it was just checking the
	permission flags directly, ignoring whether the current user
	was the owner or not. This fixes part of bug 556.
	
	* src/ntl-window-msgs.c:
	(handle_unreadable_location): New private function, puts up
	an alert if the user tries to switch to an unreadable location.
	(athena_window_request_location_change): Try 
	handle_unreadable_location before starting up the state transition.
	This fixes bug 546.
	
	* src/file-manager/fm-error-reporting.c: 
	(fm_report_error_renaming_file): Add missing _()'s around messages.

2000-04-25  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-async.c
	(metafile_read_complete): Re-removed mismerged assert
	from Andy's change.
	* libathena-extensions/athena-directory-private.h:
	Organized the header a bit.

2000-04-25  Ettore Perazzoli  <ettore@helixcode.com>

	* libathena/Makefile.am
	(athena_view_component_idl_stamp): Use `$(srcdir)' in
	`athena_view_component_idl_sources' to make sure compilation
	works with builddir != srcdir.

2000-04-24  Maciej Stachowiak  <mjs@eazel.com>

	* src/ntl-uri-map.c (my_notify_when_ready): Updated for OAF-ized
	EOG.

2000-04-24  Darin Adler  <darin@eazel.com>

	* components/music/athena-music-view.c
	(athena_music_view_update_from_uri): Spacing tweak.
	
	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.c:
	* libathena-extensions/athena-directory-async.c:
	* libathena-extensions/athena-file.c:
	Moved half of athena-directory.c into a new file as a first step
	in cleaning up the state machine a bit.

2000-04-24  Andy Hertzfeld <andy@eazel.com>

	changed the location of the novice home directory, and gave it
	a custom icon
	
	* libathena-extensions/athena-file-utilities.c:
	renamed routines from "top" to "main", and changed the install location
	from ~/.athena/top to ~/Athena, and set a custom icon for it
	* libathena-extensions/athena-file-utilities.h:
	changed athena_user_top_directory to athena_user_main_directory
	* libathena-extensions/athena-directory.c
	disabled assert that was firing due to async metadata reading, but
	tagged it with a FIXME so we can put it back when the framework is
	completed
	* libathena-extensions/athena-global-preferences.c:
	made it use newly renamed routine to access directory
	* icons/athena-logo.png:
	added new icon for the novice home directory
	* icons/Makefile.am:
	added new icon to build
	
2000-04-24  J. Shane Culpepper  <pepper@eazel.com>

	* configure.in
	* components/services/install/Makefile.am
	Adding a gnet configure option to remove hardcoded makefile references.

2000-04-24  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-grid.c:
	Refactored the grid to use a variable-size grid that sizes itself
	to the items in the grid.
	
	* libathena-extensions/athena-file-utilities.c
	(athena_user_top_directory): Formatting tweak.
	
	* libathena-extensions/athena-gtk-extensions.c
	(athena_pop_up_context_menu): Got rid of gpointer cast, since
	George's "find bad casts" grep found it and it's not needed.
	
	* athena-widgets/test-preferences.c: Got rid of gpointer cast,
	since George's "find bad casts" grep found it and it's not needed.

2000-04-24  Darin Adler  <darin@eazel.com>

	* components/rpmview/Makefile.am:
	* components/services/install/Makefile.am:
	Fixed a few things in these make files. There's still a lot to be fixed.
	The most important fix was to add OAF_CFLAGS and OAF_LIBS. Without that
	the build was failing. But these files still have a hard-coded
	/usr/include path for librpm.

2000-04-24  J. Shane Culpepper  <pepper@eazel.com>

	* HACKING
	Updating hacking to reflect the new gnet dependency.

2000-04-24  Andy Hertzfeld <andy@eazel.com>

	changed link file suffix to .link
	
	* data/top/Computer-ntl.xml: removed file
	* data/top/Computer.link: new file
	* data/top/Makefile.am: adjusted accordingly
	* data/top/Services-ntl.xml: removed file
	* data/top/Services.link: added file
	* libathena-extensions/athena-link.c,h:
	changed suffix from "ntl-link" to "link"
	
	made links more transparent in list view
	
	* libathena-extensions/athena-file.c:
	make athena_file_get_string_attribute know about links
	* src/file-manager/fm-directory-view.c:
	map filename for links in status bar	
	
	added hardware view component for novice home directory.  Use /proc as source of info,
	but will probably move to libgtop
	
	* configure.in: added hardware view component's directories
	* athena-clean.sh: added component to list to be cleaned
	* components/Makefile.am: added hardware view component
	* components/hardware/.cvsignore: ignore generated files
	* components/hardware/Makefile.am: makefile for new component
	* components/hardware/main.c: standard component bonobo glue
	* components/hardware/athena-hardware-view.c: the actual code
	* components/hardware/athena-hardware-view.h: definitions for the component
	* components/hardware/athena-hardware-view.oafinfo: activation file
	* components/hardware/icons/.cvsignore: ignore generate files
	* components/hardware/icons/Makefile.am: icons to use in the hardware view
	* components/hardware/icons/cpu.png: cpu image
	* components/hardware/icons/memory_chip.gif: memory image
	* src/ntl-uri-map.c: we still have to kludge here to add new protocols
	
	* components/rpmview/athena-rpm-view.c:
	changed default background color of package view
	
2000-04-23  J. Shane Culpepper  <pepper@eazel.com>
	
	* components/services/install/eazel-install.c
	* components/services/install/Makefile.am
	* components/services/install/eazel-install-lib-rpm.c
	* components/services/install/eazel-install-lib-xml.c
	* components/services/install/eazel-install-lib-xml.h

	Added the http fetch of a package list from a remote server. Still 
	need to add http fetch of the rpm files.

2000-04-23  J. Shane Culpepper  <pepper@eazel.com>
	
	* components/services/install/eazel-install.c
	* components/services/install/eazel-install-lib.h
	* components/services/install/eazel-install-lib-xml.h
	* components/services/install/eazel-install-lib-xml.c
	* components/services/install/eazel-install-lib-debug.h
	* components/services/install/eazel-install-lib-debug.c
	* components/services/install/eazel-install-lib-rpm.h
	* components/services/install/eazel-install-lib-rpm.c
	* components/services/install/eazel-install-lib-util.h
	* components/services/install/eazel-install-lib-util.c

	Broke up eazel-install-lib.h to appropriate headers for each source
	file.  Did a little cleaning so that functions are more modular. 
	Setting everything up so that lib functions can be moved to a separate
	services library down the road.

2000-04-23  Martin Baulig  <martin@home-of-linux.org>

	* configure.in: Check for -lrpm and its dependency libs.
	On success, define HAVE_RPM and AC_SUBST(RPM_LIBS).
	Added BUILD_RPMVIEW_COMPONENT automake conditional.
	* acconfig.h (HAVE_RPM): Added.

	* components/Makefile.am: Conditionally compile rpmview.

	* components/rpmview/Makefile.am: Use $(RPM_LIBS) rather than
	-lrpm so we get the correct dependency libs such as -lgz2.

2000-04-22  J. Shane Culpepper  <pepper@eazel.com>
	
	* libathena-extensions/libathena-extensions.h
	Fixing build bustage in components/help.  The header was pointing to
	files in libathena instead of libathena-extensions.

2000-04-21  Gene Z. Ragan  <gzr@eazel.com>
	
	* libathena-extensions/athena-icon-canvas-item.c
	* libathena-extensions/athena-icon-canvas-item.h
	(athena_icon_canvas_item_get_max_text_width):
	Return value of MAX_TEXT_WIDTH constant.  Used is positoning the rename
	text widget.

	* libathena-extensions/athena-icon-container.c
	Added signal "icon_text_edit_occurred" called when the text rename widget
	recieves some sort of edit, such as a keyboard entry.
	(rename_text_dirty):  Returns boolean indicating edit state of
	text in rename widget.  Used in undo operation.
	(text_edited_callback):  Signal callback called when AthenaIconTextItem
	text is edited.
	(athena_icon_container_start_renaming_selected_item):  Fixed positioning
	code to address bug #543
	(athena_icon_container_undo_renaming_selected_item):  Added simple undo
	code.  This needs to be replaced with a global undo system.

	* libathena-extensions/athena-icon-text-item.c
	(iti_paint_text):  Fixed drawing of i-beam to address bug #506
	(iti_event): Added keyboard handling for simple undo
	(athena_icon_text_item_get_margins):  Returns values of MARGIN_X and
	MARGIN_X constants.  Used when positioning text item in canvas.

	* src/file-manager/fm-directory-view.c
	Moved menu item title constants to header file.  This is needed so
	FMIconView can get menu position paths when placing items in the
	bonobo and contect menus.  Renamed the constants to be specific to
	FMDirectoryView.
	(fm_directory_view_get_context_menu_index):  Added function to return
	index of requested menu item.
	
	* src/file-manager/fm-icon-view.c
	(fm_icon_view_icon_text_edit_callback):  Callback that connect to
	AthenaIconContainer signal.
	(undo_rename_icon_callback): Added simple undo functionality.
	(insert_one_context_menu_item): Added function to insert context menu
	add a specific index.
	Fixed bug #499, Rename menu in bad place in context menu.

2000-04-21  Ramiro Estrugo  <ramiro@eazel.com>

	* components/history/ntl-history-view.c:
	Yank rogue puts()

2000-04-21  Ramiro Estrugo  <ramiro@eazel.com>

	* components/history/ntl-history-view.c:
	Call athena_preferences_init to make sure gconf is in business
	before we call it.

2000-04-21  Ramiro Estrugo  <ramiro@eazel.com>

	Switched us to use gconf instead of gnome_config.  There is still
	lots of crufty preferences code that can be simplified a lot,
	since gconf does a lot of work for us.

	* components/help/Makefile.am
	* components/history/Makefile.am
	* components/html/Makefile.am
	* components/music/Makefile.am
	* components/notes/Makefile.am
	* components/rpmview/Makefile.am
	* components/sample/Makefile.am
	* components/services/install/Makefile.am
	* components/services/startup/Makefile.am
	* components/websearch/Makefile.am
	* athena-widgets/Makefile.am
	Add GCONF_CFLAGS and GCONF_LIBS where needed.

	* athena-widgets/athena-preference.c:
	Removed a rogue unused include.

	* athena-widgets/athena-preferences.c,
	  athena-widgets/athena-preferences.h:
	Straight forward switch from gnome_config api to gconf api.
	(gnome_config_make_string):  Retired, cause thankfully we dont
	need to make up dumb strings with a default value appened to the
	end. All praise gconf.
	(athena_preferences_init): Add a init function to make sure
	gconf is properly initialized.  This needs some cleanup wrt the
	global preferences crap.  Im planning to clean that up in my next
	checkin.

	* athena-widgets/test-athena-widgets.c:
	Fixed for gconf changes.

	* src/ntl-main.c:
	Call athena_preferences_init to make sure gconf is in business
	before we call it.
	
2000-04-21  Ramiro Estrugo  <ramiro@eazel.com>

	* src/ntl-window-state.h,
	  src/ntl-window-state.c: (athena_window_save_state)
	(athena_window_load_state): Retired these two old and unused
	functions.  We dont use gnome_config to store metaview state no
	more.
	
2000-04-20  Darin Adler  <darin@eazel.com>

	* components/history/ntl-history-view.c
	(hyperbola_navigation_history_notify_location_change):
	Fixed a typo that was causing the history view to fail.
	
	* components/music/athena-music-view.c
	(athena_music_view_initialize_class),
	(athena_music_view_initialize), (setup_title_font),
	(athena_music_view_realize):
	Changed to use new athena_gtk_widget_set_font_by_name
	and got rid of the old realize hack.
	
	* components/rpmview/athena-rpm-view.c
	(athena_rpm_view_initialize):
	Added a FIXME about how it's bad to hard-wire a font.
	
	* components/services/startup/athena-service-startup-view.c
	(setup_title_font), (setup_form_title),
	(athena_service_startup_view_initialize),
	(athena_service_startup_view_realize),
	(athena_service_startup_view_load_uri):
	Changed to use new athena_gtk_widget_set_font_by_name
	and got rid of the old realize hack.
	
	* libathena-extensions/athena-gtk-extensions.h:
	* libathena-extensions/athena-gtk-extensions.c
	(athena_gtk_style_set_font): Made public.
	(athena_gtk_widget_set_font): Added comments and checks on
	the parameters.
	
	* libathena-extensions/athena-icon-container.c (relayout),
	(idle_handler), (athena_icon_container_move_icon),
	(world_width_changed), (end_stretching), (button_release_event),
	(handle_icon_button_press), (athena_icon_container_add_auto),
	(athena_icon_container_remove),
	(athena_icon_container_set_auto_layout):
	Some tweaks for auto-layout mode. Made it work better with
	stretching by not laying out the currently-stretched icon,
	simplified the code a bit, and made it relayout when an icon
	is removed.
	
	* src/file-manager/fm-directory-view.c (compute_menu_item_info),
	(fm_directory_view_real_merge_menus):
	Got rid of the "..." from "Delete...". On Macintosh, at least,
	the "..." is only used when the dialog is something that adds
	parameters to the command, not when it's just a confirmation.
	
	* src/athena-index-title.c (update_font),
	(athena_index_title_update_label),
	(athena_index_title_update_info):
	Changed to use new athena_gtk_widget_set_font and
	athena_gtk_widget_set_font_by_name.

	* src/ntl-index-panel.c (athena_index_panel_remove_meta_view):
	Made the index panel do *slightly* better when a meta view
	fails to load.

	* components/help/hyperbola-main.c (main):
	Fixed a warning.
	
2000-04-20  Maciej Stachowiak  <mjs@eazel.com>

	* configure.in: Add back tests erroneously removed in the last
	checkin.

2000-04-20  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_moved):
	Darin helped me finish implementing the missing parts of the call,
	including updating the reference to the new directory object,
	updating the file info structure to match the file's new location.
	Fixed a silly bug in an if statement.
	
	* libathena-extensions/athena-file-changes-queue.c:
	Fixed another silly bug where 'file moved' notifications were
	misinterpreted as file-removed ones.
	
2000-04-20  Andy Hertzfeld <andy@eazel.com>

	* libathena-extensions/athena-gtk-extensions.c,h:
	added utility routines (written by Darin on my machine) to set the
	font associated with a widget
	* components/rpm-view/athena-rpmview.c:
	used the new routine to set the font of the package title.
	
2000-04-20  Andreas Hyden  <a.hyden@cyberpoint.se>

	* configure.in: Added sv to ALL_LINGUAS.

2000-04-19  Darin as Andy  <darin@eazel.com>

	* libathena-extensions/athena-graphic-effects.c:
	(athena_make_semi_transparent), (create_new_pixbuf_with_alpha):
	Create a new pixbuf that has an alpha channel even if the original
	pixbuf didn't!

2000-04-19  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_added):
	Work on making new files show up during copy. This is a simple
	version using sync gnome_vfs_get_file_info calls, we'll need a
	version that uses a new async get_file_info call that takes a list
	of URIs and produces a list of file info structs.
	
	* libathena-extensions/athena-directory.c:
	* libathena-extensions/athena-file.c:
	* libathena-extensions/athena-file.h:
	(update_file_info_in_list_if_needed), (dequeue_pending_idle_callback),
	(athena_file_update):
	Made dequeue_pending_idle_callback deal with getting duplicate
	file info structures or file info structures for files we already
	know about. This also fixes 395.

	* libathena-extensions/athena-file-changes-queue.c
	Added some better comments and removed a fixme that didn't really
	need fixing.

2000-04-19  John Sullivan  <sullivan@eazel.com>

	Darin and I started out thinking we were going to start entering
	bugs for the FIXME items but we were distracted into fixing bugs
	and tweaking code that we found while doing so.
	
	* check-FIXME.pl: Won't search old ChangeLogs for FIXMEs either;
	changed FIXME format from "FIXME bug xxx" to "FIXME bugzilla.eazel.com xxx"
	
	* components/history/ntl-history-view.c:
	(hyperbola_navigation_history_notify_location_change): Moved bookmark
	naming hack here and added FIXME explaining it.
	
	* libathena-extensions/athena-bookmark.h,
	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_new), (athena_bookmark_new_with_name):
	Combined these two into one routine that takes both the uri and
	title; removed hack for trying to come up with good name for
	bookmark here.
	(athena_bookmark_get_pixmap_and_mask): Changed to call
	_get_pixbuf instead of duplicating code.
	(athena_bookmark_get_pixbuf): Changed interface to return
	pixbuf or NULL instead of boolean result & "out" parameter.
	
	* src/athena-bookmark-list.c,
	* src/athena-bookmarks-window.c,
	* src/athena-window-menus.c,
	* src/ntl-window-msgs.c: 
	Updated callers of athena_bookmark_new and _new_with_name.

2000-04-19  John Sullivan  <sullivan@eazel.com>

	Fixed bug 540 (need specific error message for "access denied"
	when renaming)

	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file): Added case for
	GNOME_VFS_ERROR_ACCESSDENIED

2000-04-19  Shane Culpepper  <pepper@eazel.com>
	
	* components/services/install/eazel-install-lib-rpm.c
	Fixed Uninstall to work as advertised.  Uninstall will also skip
	source packages now since they are not stored in the rpmdb.

2000-04-19  Shane Culpepper  <pepper@eazel.com>
	
	* components/services/install/eazel-install-lib-xml.c
	* components/services/install/eazel-install-lib-debug.c
	* components/services/install/eazel-install-lib-rpm.c
	* components/services/install/eazel-install-lib.h
	* components/services/install/eazel-install.c
	Tweaked the packages struct so that rpm names are no longer
	hardcoded.  Added a the option to do dry runs without actually
	installing anything.  Good for testing.

2000-04-19  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(world_width_changed): New function, extracted from size_allocate.
	(size_allocate): Call world-width-changed.
	(athena_icon_container_set_zoom_level): Call world_width_changed.
	This makes zooming relayout when in auto-layout mode.
	
	* src/athena-window-menus.c:
	(append_bookmark_to_menu): Added line where bookmark is set in
	BookmarkHolder. This had been accidentally deleted, breaking all
	bookmarks.

2000-04-19  Pablo Saratxaga <pablo@mandrakesoft.com>

	* configure.in (ALL_LINGUAS): Added Danish language

2000-04-19  Shane Culpepper  <pepper@eazel.com>
	
	* components/services/install/eazel-install-lib-xml.c
	* components/services/install/eazel-install-lib.h
	* components/services/install/eazel-install.c
	Adding configuration file generator and creating a metadata directory.
	A directory called /etc/eazel/services will be created to store
	cofiguration options and uninstall data now.

2000-04-19  Maciej Stachowiak  <mjs@eazel.com>

	* src/ntl-view.c (athena_view_destroy_client): Reverted the last
	change, it caused serious crashage in some cases.

	* src/ntl-view.c (athena_view_destroy_client): Destroy the
	ViewFrame instead of unreffing. This is the only way to be sure
	the Control is fully unref()d. Ideally Bonobo would let us unbind
	the frame from the control to break the circular refs.
	
	* configure.in: Check for OAF the oficially approved way. Check
	for GConf.

	* src/ntl-uri-map.c (my_notify_when_ready): Fix fallback_iid for
	moz protocol.
	* components/mozilla/main.c (main): Remove ev variable to shut up gcc.
	
	* src/ntl-app.c, components/notes/ntl-notes.c: Remove some
	spurious debugging statements I accidentally left in.
	

	OAF conversion. You must now build bonobo and gnome-vfs with --enable-oaf

	* configure.in: Check for OAF

	* libathena/athena-view-component.idl: Inherit from
	Bonobo::Unknown instead of GNOME::Unknown.

	* libathena-extensions/athena-global-preferences.c,
	libathena-extensions/athena-global-preferences.h: Refer to
	meta views by OAFIID, not GOAD ID.

	* src/ntl-uri-map.c (my_notify_when_ready): Replaced hardcoded
	list of GOAD IDs with a hardcoded list of OAFIIDs.
	(add_components_from_metadata): Changed the expected format; it is
	now label=component instead of component:label since OAFIIDs
	contain colons.

	* src/ntl-view.c (athena_view_destroy_client): unref the
	Zoomable interface of the View, if any.

	* src/file-manager/dfos-corba.c, src/file-manager/dfos.c: replace
	GOAD calls with OAF ones; untested since this code is not really
	used right now.

	* src/ntl-main.c: Use OAF calls to intialize CORBA.

	* src/ntl-app.c: Replace GOAD IDs with OAFIIDs. Use
	Bonobo_Generic_Factory instead of GNOME_Generic_Factory to make
	the linker happy. Register the factory server with OAF, not GOAD.

	* src/athena.h: Include <liboaf/liboaf.h> instead of <libgnorba/gnorba.h>


	* components/help/Makefile.am, components/history/Makefile.am,
	components/html/Makefile.am, components/mozilla/Makefile.am,
	components/music/Makefile.am, components/notes/Makefile.am,
	components/rpmview/Makefile.am, components/sample/Makefile.am,
	components/services/startup/Makefile.am,
	components/websearch/Makefile.am, libathena/Makefile.am,
	libathena-extensions/Makefile.am, src/Makefile.am,
	src/file-manager/Makefile.am: Updated for OAF; install .oafinfo
	files instead of .gnorba.

	* components/help/hyperbola-main.c,
	components/history/ntl-history-view.c,
	components/html/ntl-web-browser.c, components/mozilla/main.c,
	components/music/main.c, components/notes/ntl-notes.c,
	components/rpmview/main.c, components/sample/main.c,
	components/services/startup/main.c,
	components/websearch/ntl-web-search.c: Convert to OAF; use OAFIIDs
	and oaf intialization functions.

	* src/athena.oafinfo, components/help/hyperbola.oafinfo,
	components/history/ntl-history-view.oafinfo,
	components/html/ntl-web-browser.oafinfo,
	components/music/athena-music-view.oafinfo,
	components/notes/ntl-notes.oafinfo,
	components/rpmview/athena-rpm-view.oafinfo,
	components/services/startup/athena-service-startup-view.oafinfo,
	components/websearch/ntl-web-search.oafinfo,
	components/sample/athena-sample-content-view.oafinfo,
	components/mozilla/athena-mozilla-content-view.oafinfo: New OAF
	activation records.
	
	* src/athena.goad, components/help/hyperbola.goad,
	components/history/ntl-history-view.goad,
	components/html/ntl-web-browser.goad,
	components/music/athena-music-view.goad,
	components/notes/ntl-notes.goad,
	components/rpmview/athena-rpm-view.goad,
	components/services/startup/athena-service-startup-view.goad,
	components/websearch/ntl-web-search.goad,
	components/sample/athena-sample-content-view.goad,
	components/mozilla/athena-mozilla-content-view.goad: Removed.
	
2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in,
	  acconfig.h: Add support for setting a reasonable default for
	MOZILLA_FIVE_HOME - which mozilla needs to survie.

	* components/mozilla/main.c: (mozilla_setup_environment) Add a
	function to hack the mozilla environment into something that might
	have a chance of working by default.

	* src/ntl-uri-map.c: Add a temporary hack protocol moz:// to test
	mozilla in isolation from gnome-vfs trying to do http stuff.

	* components/mozilla/athena-mozilla-content-view.c: Match the
	above.
	
2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in: Add voodoo to support --with-mozilla.

	* components/Makefile.am: Add conditional build of mozilla subdir.

	* components/mozilla/Makefile.am: Un-hardcode cflags and libs.
	Use the values set in configure instead.
	
2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-clean.sh: Grep out "emacs" so that this nice script
	doesnt kill my editor when i happen to be editting the source to
	component in question.
	
2000-04-18  Andy Hertzfeld

	made link files control the additional text displayed beneath them.
	
	* libathena/athena-link.c,.h:
	added athena_link_get_additional_text, which returns text specified
	in the xml file, if any,
	* libathena/athena-metadata.h:
	added tag to use for the additional text in the link file
	* src/file-manager/fm-icon-view.c:
	made it get additional text for link files using the new
	routines in athena-link
	* data/top/Makefile.am:
	removed the placeholder "Welcome" file from the novice home directory
	
2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/.cvsignore: Ignore built binary

	* components/mozilla/Makefile.am: Link with the right stuff.  Link
	only against libathena to be legit.

	* components/mozilla/athena-mozilla-content-view.h,
	  components/mozilla/athena-mozilla-content-view.c: Dont use
	code from libathena-extensions.  Fix struct tag names.  

2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences.c,
	  athena-widgets/athena-preferences.h:

	Simplify be removing all arguments from callbacks save for the
	user data.

	(athena_preferences_add_string_callback): Rename to
	athena_preferences_add_callback since string preferences are the
	default.
	
	* libathena-extensions/athena-global-preferences.c:
	(user_level_changed_callback): Simplify a bit.  Update for new
	simple preference callbacks.

	  libathena-extensions/athena-icon-container.c,
	  libathena-extensions/athena-icon-factory.c,
	  libathena-extensions/athena-list.c: Update for new simple
	preference callbacks.

	* src/file-manager/fm-directory-view.c,
	  src/file-manager/fm-icon-view.c: Update for new simple
	preference callbacks. 

	  src/file-manager/fm-icon-text-window.c: Update for new
	simple preference callbacks and removed unecessary usage of
	icon_view_text_attribute_changed_callback. Use
	synch_menus_with_preference directly instead.
	
2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	*  athena-widgets/athena-preferences.c:
	(athena_preferences_get):  If the stored default value is null,
	use the given one.  Do this only for strings, since integral types
	can legally have a value of zero.

	* athena-widgets/athena-preferences-item.c:
	(preferences_item_create_enum), (enum_radio_group_changed_cb):
	Deal with the enumeration values.   Before it was assuming it
	started at ZERO.

	* libathena-extensions/athena-global-preferences.c:
	ATHENA_USER_LEVEL_*: Make this enum begin with a non zero
	value.  The zero value can be misintepreted by preferences as a
	default leading to confusion.

	(user_level_changed_callback): Add a default case just in case!

	(athena_global_preferences_startup): Invoke
	user_level_changed_callback once to make sure stuff is properly
	setup.

2000-04-18  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/dfos-xfer.c:
	(handle_xfer_overwrite):
	Only offer "Replace All" in an overwrite conflict error dialog if
	there is more than one conflicting item to deal with.
 
2000-04-18  Andy Hertzfeld <andy@eazel.com>

	* components/services/startup/athena-service-startup-view.c:
	added placeholder summary page, plus used a larger font for
	the title
	
2000-04-18  Shane Culpepper  <pepper@eazel.com>
	
	* components/services/install/eazel-install-lib-rpm.c
	* components/services/install/eazel-install.c
	Adding the uninstall feature to eazel-install.

2000-04-18  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-icon-container.h:
	(compare_icons), (idle_handler), (athena_icon_container_move_icon),
	(size_allocate), (athena_icon_container_initialize_class),
	(athena_icon_container_set_auto_layout):
	First cut at the auto-layout feature. It just does a lot of
	re-laying things out.
	
	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-list.h: 
	Added interfaces for telling whether to use single-click mode or
	not. A first step in moving preferences code out of here and
	into the file-manager classes.

	* libathena-extensions/fm-icon-view.c:
	(create_icon_container), (icon_container_compare_icons_callback):
	Provide a sorting order for the auto-layout mode.

	* librsvg/test-rsvg.c:
	Rolled out the change to work with the old popt that Pavel
	accidentally checked as Gene in when he was helping me.

2000-04-18  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	* libathena-extensions/athena-icon-canvas-item.h:
	Renamed several public functions to use proper nomenclature.
	An example would be changing athena_icon_canvas_get_editable_text_bounds
	to athena_icon_canvas_item_get_editable_text_bounds. A few of 
	these misnaming were in my last submission.

	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-icon-container.h:
	Renamed athena_icon_container_show_rename_widget to
	athena_icon_container_start_renaming_selected_item

	* libathena-extensions/athena-icon-text-item.c:
	Fixed the following bugs:
	487 Trying to rename an icon to empty string should revert to original
	498 Renaming text field looks silly when empty
	500 text-editing box too narrow when renaming files with short names
	508 Icon text appears and disappears incorrectly when zooming

2000-04-18  Shane Culpepper  <pepper@eazel.com>
	
	* components/services/install/eazel-install-lib-xml.c
	* components/services/install/eazel-install-lib.h
	* components/services/install/eazel-install-lib-rpm.c
	* components/services/install/eazel-install.c
	Fixed a few memory leaks, removed some debugging code,
	and added interfaceFlags, installFlags, and probFilter
	in order to remove some hardcoded options and make use
	of the configuration files.

2000-04-18  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory.c:
	(uri_get_directory_part), (uri_get_basename),
	(get_parent_directory), (get_parent_directory_if_exists),
	(call_files_added), (call_files_changed),
	(hash_table_list_prepend),
	(athena_directory_notify_files_added),
	(athena_directory_notify_files_removed),
	(athena_directory_notify_files_moved):
	Another cut at the notify code.
	
	* libathena-extensions/athena-file-private.h:
	* libathena-extensions/athena-file.c:
	(athena_file_mark_gone): Made part of the deleted code
	accessible for the notify code.

	* libathena-extensions/athena-directory-private.h:
	Renamed remove_file_monitor_link to add a athena
	prefix since it's no longer a local function.
	
2000-04-18  John Sullivan  <sullivan@eazel.com>

	Distinguished the item count for unreadable directories
	from the "not yet known" item count. Unreadable directories
	show "xxx" and "not yet known" show "--". This fixes bug 513.

	* libathena-extensions/athena-file.h,
	* libathena-extensions/athena-file.c:
	(athena_file_compare_directories_by_size): Put unreadable
	counts before unknown counts before known counts.
	(athena_file_get_directory_item_count): New result parameter
	that callers can use to distinguish unreadable case from
	unknown case.
	(athena_file_get_size_as_string): return different string
	if unreadable.
	* libathena-extensions/athena-directory.c:
	(directory_count_callback): Call athena_file_changed
	even when we discover that the count is unreadable.
	* src/file-manager/fm-directory-view.c:
	(display_selection_info): Pass NULL for unreadable parameter
	because this caller doesn't care why it's not known.

2000-04-18  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/dfos-xfer.c:
	(handle_xfer_vfs_error):
	The function of the Abort and Retry buttons in the file operation error 
	alert was inverted.
 
2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences.c:
	(preference_get): If the stored default_value is NULL, then used
	the provided one.
	
2000-04-18  Andy Hertzfeld <andy@eazel.com>

	added better abstraction for the xml-based links introduced yesterday
	
	* libathena/athena-link.h,c:
	new routines to access xml-based link files
	* libathena/Makefile.am:
	added athena-link.c,h to build
	* libathena/athena-file.c:
	use athena_link_get_link_uri in athena-link instead of
	accessing link files directly
	* libathena/athena-icon-factory.c:
	use athena_link_get_image_uri in athena-link instead of
	accessing directly
	* src/file-manager/fm-icon-view.c:
	use athena_link_get_display_name to suppress display of
	identifying suffix
	* src/file-manager/fm-icon-text-window.c:
	fixed bug that caused crash when preference file is deleted
	by checking for NULL
	and using default in fm_get_text_attribute_names_preference_or_default
	* icons/computer.png:
	new icon for novice home
	* icons/hand.svg:
	new icon for novice home
	* icons/Makefile.am:
	added new icons
	* data/top/Computer-ntl.xml:
	added xml link for novice home
	* data/top/Services-ntl.xml:
	added link to novice home:
	* data/Makefile.am:
	added new files
	
2000-04-18  John Sullivan  <sullivan@eazel.com>

	Yet more tweakery to the file-monitoring code.

	* libathena-extensions/athena-directory.c:
	(stop_monitoring_files): Renamed to stop_monitoring_file_list.
	(athena_directory_destroy): Only stop monitoring list if we
	were monitoring list, but always complain about non-NULL
	file_monitors.
	(athena_directory_file_monitor_remove_internal): Only
	stop monitoring list if we had been monitoring it. This fixes
	CRITICAL when you launch and immediately quit.

2000-04-18 Shane Culpepper <pepper@eazel.com>

	* components/services/install/eazel-install-lib-rpm.c - fixing the
	  segfault in rpmInstall.

2000-04-18  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-directory.c:
	(dequeue_pending_idle_callback), 
	(athena_directory_file_monitor_remove_internal),
	(athena_directory_notify_files_added): Deployed
	new is_file_list_monitored function in three places.
	Two of these were bugs, one was code duplication.

2000-04-18  John Sullivan  <sullivan@eazel.com>

	Fixed bug 494 (initial directory count never appears in sidebar).

	This was a missing pieces of the async framework. Darin helped
	me finish it up.

	* libathena-extensions/athena-directory-private.h:
	Put FileMonitor struct here so AthenaFile can use it.
	(athena_directory_file_monitor_add_internal),
	(athena_directory_file_monitor_remove_internal),
	(remove_file_monitor_link): New functions, shared between
	AthenaDirectory and AthenaFile.
	* libathena-extensions/athena-file.c:
	(destroy): Complain about then clean up any remaining FileMonitors.
	(athena_file_monitor_add), (athena_file_monitor_remove): Fill 
	in the implementation for these formerly-empty routines.	
	* libathena-extensions/athena-directory.c:
	Moved FileMonitor struct out.
	(athena_directory_destroy): assert that there's no count_in_progress.
	(compare_file_monitor_with_client): changed name to
	compare_file_monitor_by_client_and_file and behavior to match.
	(find_file_monitor): Now takes a file and uses it in search.
	(cancel_unneeded_file_attribute_requests): New function, cleans up 
	no-longer-needed gnome vfs async calls.
	(remove_file_monitor_link): New function, removes a file monitor
	and cleans up storage.
	(remove_file_monitor): Uses remove_file_monitor_link to fix
	storage leak.
	(is_file_list_monitored): New function, checks whether anyone is
	monitoring all files in this directory.
	(athena_directory_file_monitor_add_internal),
	(athena_directory_file_monitor_remove): New functions,
	generalized from old non-internal versions to handle the single-file
	case too.
	(athena_directory_file_monitor_add),
	(athena_directory_file_monitor_remove): Now calls _internal function.
	(process_pending_file_attribute_requests): Now handles single-file
	case as well as all-files case.

	* src/athena-index-title.c:
	(athena_index_title_set_uri): Move the item-count-monitoring
	code inside the file != NULL check so it doesn't fail at the
	root (where, due to a bug, file is NULL).

2000-04-18  Darin Adler  <darin@eazel.com>

	Fixed bug where you'd see the name twice under each icon.
	Did some work for the new notify hooks that Pavel made.
	I'll finish those hooks soon.
	
	* src/file-manager/fm-icon-view.h:
	* src/file-manager/fm-icon-text-window.h:
	* src/file-manager/fm-icon-text-window.c:
	(set_preference_string), (synch_menus_with_preference),
	(icon_view_text_attribute_changed_callback),
	(fm_get_text_attribute_names_preference_or_default):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_initialize),
	(fm_icon_view_get_icon_text_attribute_names),
	(text_attribute_names_changed_callback):
	Moved attribute names default into FMIconTextWindow and made
	the callers use a new call that gets either the preference or
	the default if the preference is invalid. Also simplified the
	code since we don't need to cache the preference in either the
	FMIconTextWindow or the FMIconView.

	* libathena-extensions/athena-directory.c:
	(is_canonical_uri): Added a function for use in asserts.
	(athena_directory_get): Assert that we successfully
	made the URI canonical.
	(parent_directory_if_exists), (file_if_exists): Helper
	functions for implementing the notify calls.
	(athena_directory_notify_files_added),
	(athena_directory_notify_files_removed),
	(athena_directory_notify_files_moved):
	Fleshed out the bones of these routines a bit more.
	They are still not done. Also changed their interfaces
	so they are not responsible for freeing their parameters.
	
	* libathena-extensions/athena-directory.h:
	* libathena-extensions/athena-directory.c:
	* libathena-extensions/athena-file.h:
	(athena_directory_contains_file):
	New call to be used instead of athena_file_is_gone
	for callers that are monitoring a directory.

	* libathena-extensions/athena-file-changes-queue.c:
	(pairs_list_free), (athena_file_changes_consume_changes):
	Make the caller free the list instead of the called function
	Also reordered the changes so deletions come before additions.

	* src/file-manager/fm-directory-view.c: (display_pending_files):
	* src/file-manager/fm-list-view.c: (fm_list_view_file_changed):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_file_changed):
	Changed to use athena_directory_contains_file instead of
	athena_file_is_gone.
	
2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/install/.cvsignore: Ignore more generated
	files.
	
2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	Hook up click policy preference.  Bug 374.

	*  libathena-extensions/athena-global-preferences.h,
	   libathena-extensions/athena-global-preferences.c:
	Rename CLICK_ACTIVATION_TYPE to CLICK_POLICY.  

	* libathena-extensions/athena-icon-container.c:
	(click_policy_changed_callback): New preferences callback to keep
	track of click policy changes.

	(destroy): Unregister click_policy_changed callback on destroy.

	(athena_icon_container_initialize): Initialize the
	single_click_mode from preferences and register callback to keep
	track of changes in click policy.

	Also anal gtk style formatting of the private prototypes and
	sophisticated alphabetization of libathena-extensions headers.

	*  libathena-extensions/athena-list.c:
	(click_policy_changed_callback): New preferences callback to keep
	track of click policy changes.
	
	(athena_list_initialize): Initialize the single_click_mode from
	preferences and register callback to keep track of changes in
	click policy.

	(athena_list_destroy): Unregister click_policy_changed callback
	on destroy. 
	
	Also anal gtk style formatting of the private prototypes and
	sophisticated alphabetization of libathena-extensions headers.

2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	* athena-widgets/athena-preferences.c,
	  athena-widgets/athena-preferences.h: Dont expose the
	preference/enum info structure.  Remove these and use the
	AthenaPreference object instead to describe preferences.

	Add usage of default values to get_* api.  So now callers can
	provide a default which will be given back to them if no default
	exists.  For example, no default will exist for the preference
	when it was implicitly pulled out of someone's 	ass.

	The callback function no longer passes along the value.  Instead
	the caller is expected to use the get_ functions.

	Rename athena_preferences_{get,set}_string() to
	athena_preferences_{get,set}.  This matches the
	AthenaDirectory metadata api which uses strings for metadata by
	default.

	Also constify the get functions.
	
	(athena_preferneces_get_info): Renamed to 
	athena_preferneces_get_preference which returns a referenced
	pointer to the preference description object.  Perhaps this could
	have a better name.

	(athena_preferences_enum_add_entry): New function to add entries
	to enumerated preferences.

	* athena-widgets/athena-preferences-group.c,
	  athena-widgets/athena-preferences-group.h:
	(athena_preferences_group_add): Retire.

	(athena_preferences_group_add_item): New function that does all
	the work of creating an item based on a given item_type.

	* athena-widgets/athena-preferences-item.c,
	  athena-widgets/athena-preferences-item.h: Use
	AthenaPreferences directly instead of GtkObject.

	Ref/unref the preference object properly.

	Use more consistent identifiers.  Fix some stupid style things.

	Update for AthenaPreference usage instead of the info struct
	hack). 

	*  athena-widgets/athena-preferences-pane.c,
	   athena-widgets/athena-preferences-pane.h:
	(athena_preferences_pane_add_item_to_nth_group) : New function
	to do all the work of adding and managing an item based on a given
	type.
	
	*  athena-widgets/test-athena-widgets.c: Update for all the
	api changes.

 	* athena-widgets/Makefile.am: Add building of
	athena-preference.[ch] and the self test driver.

	* libathena-extensions/athena-global-preferences.c,
	  libathena-extensions/athena-global-preferences.h: Add
	CLICK_ACTIVATION_TYPE preferences.  Add HOME_URI preference.  Add
	SHOW_HIDDEN_FILES preference.

	Make all the user level stuff private.  Dont expose either the
	user level preference or the user level values at all.  Instead,
	track user level changes in a callback and set corresponsing
	preferences accordingly.

	(athena_global_preferences_startup): Hook to make the above work
	properly.
	
	Cleanup the creation of the preferences dialog.


	* libathena-extensions/athena-icon-factory.c:
	(icon_theme_changed_callback): Preference changed callback no
	longer passes in the value.  Value needs to be manually fetched.

	(athena_get_current_icon_factory): No need to call
	athena_preferences_set_info.  Instead give
	athena_preferences_get a default value.  This way, we can always
	get something reasonable back.


	* src/athena-window-menus.c:
	(use_eazel_theme_icons_cb): Update for pref api changes.  Feed the
	get function a default value.

	* src/ntl-app.c:
	(athena_app_class_init): Call
	athena_global_preferences_startup so that user level callbacks
	always works.  Also, allows preferences exposed in the ui to have
	nice defaults.
	
	* src/ntl-main.c:
	(main): Add athena-widgets self checks.

	* src/ntl-uri-map.c:
	(add_meta_view_iids_from_preferences): Feed the pref api function
	a default value. 

	* src/ntl-window-state.c:
	(athena_window_set_initial_state): User level is no longer
	publicly exposed over here.  Determine the home uri, instead by
	fetching the HOME_URI preference.

	* src/file-manager/fm-directory-view.c:
	(use_new_window_changed_callback): Retired.  Instead check
	preference when needed.  There really is not need to go to the
	trouble of installing a callback for this specific preference.
	Its just as easy (and not a performance issues) to check it
	directly.  

	Also retired the 'use_new_window' member.

	(user_level_changed_callback): Retired.  User level no longer
	publically exposed.

	(show_hidden_files_changed_callback):  Check SHOW_HIDDEN_FILES
	preference to determine if hidden files should be filtered.

	Add a 'show_hidden_files' member that keeps track of changes in
	this preference.

	(fm_directory_view_initialize): Initialize 'show_hidden_files'.
	Update for callback name change.

	(athena_preferences_remove_callback): Remove uneeded unregister
	call for retired use_new_window callback.

	(queue_pending_files): Do hidden file filtering based on
	'show_hidden_files' instead of using the user level.

	(fm_directory_view_activate_file): Check USE_NEW_WINDOW preference
	to determine if a new window is requested.

	*  src/file-manager/fm-icon-text-window.c: #include fm-icon-virw.h
	and use DEFAULT_ICON_VIEW_TEXT_ATTRIBUTE_NAMES from it instead of
	ATTRIBUTE_NAMES_DEFAULT.  This makes sure the default is not out
	of whack.  This define should probably be placed in a better place.

	NOTE: This seems to be one of the drawbacks of passing in defaults
	to fetch functions - that is out-of-whackness in 2 or more callers
	in difference places.
	
	(synch_menus_with_preference),
	(changed_attributes_option_menu_cb): Update for preference api changes.
	
	(preference_changed_callback): Rename to
	icon_view_text_attribute_changed_callback for clarity.

	(icon_view_text_attribute_changed_callback): Value no longer
	passed into callback.  Need to check preferences manually.  
	
	* src/file-manager/fm-icon-view.h:
	Add DEFAULT_ICON_VIEW_TEXT_ATTRIBUTE_NAMES to share with
	fm-icon-text-window.
	
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_icon_text_changed_callback): Update for preference
	api changes.

	Minor anal style formatting of the private prototypes.

	(fm_icon_view_initialize_class): Yank
	athena_preferences_set_info call.  No longer needed for there to
	be proper defaults.  

	(text_attribute_names_changed_callback): Value no longer
	passed into callback.  Need to check preferences manually.  Also,
	feed the get function a reasonable default.

	* components/help/Makefile.am: Needs to link with
	libathena-extensions. 
	
	* components/websearch/Makefile.am: Needs to link with
	libathena-extensions. 
	
2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	*  libathena-extensions/athena-string-list.c,
	   libathena/athena-string-list.h: Dumb underscore fix the struct tags.

2000-04-18  Ramiro Estrugo  <ramiro@eazel.com>

	Factor out the code that describes a preference from the big messy
	preferences into a class.
	
	* athena-widgets/athena-preference.c,
	  athena-widgets/athena-preference.h: New files.  A class that
	describes a athena preference.
	
	  athena-widgets/athena-widgets-self-check-functions.c,
	  athena-widgets/athena-widgets-self-check-functions.h: New
	files .  Self check code driver athena-widgets.
	
2000-04-17  Pavel Cisler  <pavel@eazel.com>

	This checkin requires new gnome-vfs.

	Plumbing for making copied/moved/deleted files show up update
	in their respective new locations.

	* libathena-extensions/athena-file-changes-queue.h
	* libathena-extensions/athena-file-changes-queue.c
	* libathena-extensions/Makefile.am
	Shared queue used by the copy engine to send update notification
	requests to AthenaDirectory during file copy/move/delete operations.

	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_added), 
	(athena_directory_notify_files_removed),
	(athena_directory_notify_files_moved):
	Stub calls that will be hooked up to the AthenaDirectory
	notification calls to dispatch the notification updates.
	
	* src/file-manager/dfos-xfer.c:
	(sync_xfer_callback):
	New callback that gets called in the async copy engine context
	and produces change entries stuffing them into the file changes
	queue.

	* src/file-manager/dfos-xfer.c:
	(handle_xfer_ok):
	Added calls to the new athena_file_changes_consume_changes
	from the progress update callback. This callback is called in
	the user interface context and consumes the change entries
	from the file changes queue, sending them in chunks to be
	dispatched by to the individual Athena directory objects. 

	* src/file-manager/dfos-xfer.c:
	(handle_xfer_ok):
	Updated to use new progress enum values.

	* src/file-manager/dfos-xfer.c:
	(update_xfer_callback):
	Renamed from sync_xfer_callback.

	* src/file-manager/dfos-xfer.c:
	(gnome_vfs_async_xfer):
	Pass in new sync_xfer_callback parameters.
	
2000-04-17  Darin Adler  <darin@eazel.com>

	* components/services/install/.cvsignore: Generated files.

2000-04-17  Darin Adler  <darin@eazel.com>

	Added commands for Auto vs. Manual layout, but the guts behind
	them is not yet implemented.

	Did some cleanup on the new renaming code.

	* athena-glib-extensions.c:
	* athena-glib-extensions.h:
	Added athena_g_list_exactly_one_item and
	athena_g_list_more_than_one_item. These are more-efficient
	versions of g_list_length (x) == 1 and g_list_length (x) > 1.

	* athena-icon-canvas-item.c:
	(draw_or_measure_label_text): Add a line break between the
	editable text and the additional text.
	(athena_icon_canvas_get_text_bounds),
	(athena_icon_canvas_get_editable_text_bounds),
	(athena_icon_canvas_get_editable_text),
	(athena_icon_canvas_set_renaming):
	Replaced g_assert with g_return_if_fail calls, and added the
	complete set of g_return_if_fail.
	(athena_icon_canvas_set_renaming): Don't update the item
	unless the renaming state has actually changed.
	
	* athena-icon-canvas-item.h: Fixed formatting.

	* athena-icon-container.c:
	* athena-icon-container.h:
	Added athena_icon_container_set_auto_layout and
	athena_icon_container_is_auto_layout. For now they are
	placeholders that just modify a boolean.

	* athena-icon-private.h:
	Added the auto_layout boolean.

	* athena-icon-text-item.c:
	* athena-icon-text-item.h:
	Just some formatting and other minor cleanup.

	* athena-metadata.h:
	Added ATHENA_METADATA_KEY_ICON_VIEW_AUTO_LAYOUT.

	* athena-location-bar.c (drag_data_received_cb): Use the new
	athena_g_list_more_than_one_item function.

	* fm-directory-view.c (bonobo_menu_open_cb), (open_cb): Use the
	new athena_g_list_exactly_one_item.

	* fm-icon-text-window.c (attribute_names_string_is_good),
	(set_preference_string), (synch_menus_with_preference),
	(preference_changed_callback),
	(changed_attributes_option_menu_cb): Got rid of the hard-coded
	first item "name" which is no longer needed.  Also changed to
	handle bad data in the preferences.

	* fm-icon-view.c (fm_icon_view_initialize_class): Updated since
	there's no "name" item needed any more.
	(fm_icon_view_compute_menu_item_info): Merged MENU_PATH_RENAME
	with MENU_RENAME_TEXT and simplified the logic.
	(fm_icon_view_append_selection_context_menu_items): Merged
	MENU_PATH_RENAME with MENU_RENAME_TEXT.
	(update_layout_menus), (auto_layout_callback),
	(manual_layout_callback), (fm_icon_view_merge_menus): Added menu
	items for auto layout and for manual layout.
	(fm_icon_view_begin_loading): Load setting for auto layout from
	metadata.
	(fm_icon_view_get_icon_text_attribute_names): Changed to get rid
	of the "name" first item from the list of text attributes.
	(get_icon_editable_text_callback): Simplified since the editable text
	is always the icon name. Also got rid of copied and pasted code that's
	no longer needed for this case.
	(get_icon_additional_text_callback): Got rid of special case for name,
	since the name is no longer treated as an attribute.

2000-04-19  Andy Hertzfeld  <andy@eazel.com>

	Added a new, xml-based type of link file that can specify it's own
	icon and other behavior.  Soon they will be used for the novice
	home directory.
	
	* libathena-extensions.athena-file.c:
	Check for the new file type in athena_directory_mapped_uri, and
	return the link contained in the file if present.
	* libathena-icon-factory.c:
	Check for the new file type in
	athena_icon_factory_get_icon_for_file and return the specified
	image as appropriate.
	
2000-04-18  Shane Culpepper  <pepper@eazel.com>

	adding the eazel-installer skelton.  very rough prototype right now
	but it works with my local configuration data.  Will be updated alot
	over the next few days.
	Location is components/services/install.  It is not part of the default
	build right now.

2000-04-18  Andy Hertzfeld  <andy@eazel.com>

	made clicking on gmc-style URL files redirect to the specified URL.
	
	* libathena-extensions/athena-file.c,h:
	added athena_file_get_mapped_uri, which checks for gmc-style URL files
	and returns the URL they reference in that case; otherwise, just return
	the file's URI.
	* src/file-manager/fm-directory-view.c:
	called athena_file_get_mapped_uri in fm_directory_view_activate_file_internal
	* data/mime/athena.keys:
	added icons to a few MIME types that I forgot last time.  Also, just
	use relative paths to reference the icons.

2000-04-18  Kjartan Maraas  <kmaraas@online.no>

	* configure.in: Added "no" to ALL_LINGUAS.
	
2000-04-18  Gene Z. Ragan  <gzr@eazel.com>

	Added functionality to allow files to be renamed in icon view.
	This feature is available by either context click on the icon or
	selecting a single file and choosing "Rename" form the File menu.

	* libathena-extensions/athena-icon-text-item.c
	* libathena-extensions/athena-icon-text-item.h: New files.
	This is an editable icon text item used in the renaming feature.
	It is based on GnomeIconTextItem but modified to fix bugs in the
	original code and add extended functionality need by athena. If
	thse changes were rolled into the current GnomeIconTextItem, it
	would break gmc.

	* libathena-extensions/Makefile.am
	Modified file so that the two new files listed above would properly
	be included in generated makefiles.

	* libathena-extensions/athena-icon-canvas-item.c
	Split text class variable into two variables, editable_text and
	additonal_text. editable_text refers to attributes that the user
	can change via rename in place. additional_text is any other text
	that the user cannot edit via the rename in place feature. Added
	a boolean flag, is_renaming, to check against during various
	operations that effect the renaming feature. Removed ARG_TEXT
	argument ID and replaced with ARG_EDITABLE_TEXT and
	ARG_ADDITIONAL_TEXT.
	(athena_icon_canvas_item_initialize_class): Function now check
	for both ARG_EDITABLE_TEXT and ARG_ADDITIONAL_TEXT. Removed check
	for ARG_TEXT.
	(athena_icon_canvas_item_destroy): Both editable_text and
	additonal_text are freed.
	(athena_icon_canvas_item_set_arg): Removed ARG_TEXT and added
	handling of ARG_EDITABLE_TEXT and ARG_ADDITIONAL_TEXT.
	(athena_icon_canvas_item_get_arg): Removed ARG_TEXT and added
	handling of ARG_EDITABLE_TEXT and ARG_ADDITIONAL_TEXT.
	(draw_or_measure_label_text): Modified function to not draw the
	label icon text if we are renaming in place.
	(draw_or_measure_label_text): Function now combines editable and
	additional text when performing the measuring operation.
	(compute_editable_text_rectangle): Added function to compute
	bounds of editable text. This is used to determine size and
	placement of editable text item when in renaming mode.
	(athena_icon_canvas_get_text_bounds): Public API to get bounds
	of icon label text.
	(athena_icon_canvas_get_editable_text_bounds): Public API to get
	bounds of editable icon label text.
	(hit_test_pixbuf): Added check against is_renaming flag.
	(athena_icon_canvas_get_editable_text): Public API to get
	editable text string.
	(athena_icon_canvas_item_set_renaming): Public API to toggle
	is_renaming flag.
	
	* libathena-extensions/athena-icon-canvas-item.h
	Added public API prototypes to functions described above.	

	* libathena-extensions/athena-icon-container.c
	Added GET_ICON_EDITABLE_TEXT and GET_ICON_ADDITONAL_TEXT signals.
	Removed GET_ICON_TEXT signal. Added ICON_TEXT_CHANGED signal.
	(icon_toggle_selected): Renaming mode is now exited when a
	selection/deselection occurs.
	(key_press_event): GDK_Return ends rename mode and attempts to
	accept modification. GDK_Escape ends rename mode and reverts
	modification to original.
	(athena_icon_container_initialize_class): icon_text_changed,
	get_icon_editable_text and get_icon_additional_text signals are
	registered.
	(editing_started): New function. Called when an edit begins.
	Inits class member variables for edit mode.
	(editing_stopped): New function. Called when edit ends. Cleans
	up edit mode.
	(athena_icon_container_initialize): rename_widget and original_text private variables
	are set to NULL.
	(icon_toggle_selected): Added call to end_renaming_mode.
	(athena_icon_container_update_icon): Added emitting of
	GET_ICON_EDITABLE_TEXT and GET_ICON_ADDITIONAL_TEXT
	signals. Updated gnome_canvas_item_set to use new arguments
	defined in athena-icon-text-item.
	(athena_icon_container_show_rename_widget): New
	function. Creates and displays renaming_widget.  Creates cached
	copy of original editable text for later compare, connects signals
	and enters renaming mode.
	(end_renaming_mode): New function. Cleans up and end renaming
	mode.
	(hide_rename_widget): Called by end_renaming_mode to hide and free
	renaming_widget.

	* libathena-extensions/athena-icon-container.h
	Added prototypes for public functions described above.

	* libathena-extensions/athena-icon-private.h
	Added boolean for renaming. Added a AthenaIconTextItem variable
	for the renaiming widget.

	* src/file-manager/fm-icon-view.c
	Added defines MENU_PATH_RENAME. Added a char * to hold original
	editable text for a later compare.  Removed get_icon_text_callback
	and added get_icon_editable_text_callback and
	get_icon_additonal_text_callback. These return the editable and
	additonal text of the icon view.
	(rename_icon_callback): Added callback that attempts to rename the
	AthenaFile the icon view represents. Action in not taken if
	there has been no change to the editable text. If the operation
	fails, the user is notified.
	(fm_icon_view_append_selection_context_menu_items): Added Rename
	menu item.
	(append_bonobo_menu_item): Added Rename menu item and callback.
	(update_bonobo_menu_item): Added sensitivity check for the Rename
	item. It is enabled only if a single item is selected.
	(fm_icon_view_icon_text_changed_callback): Added function to
	attempt to change the filename to the new text. Notify user if
	operation fails.
	(get_icon_editable_text_callback): This callback returns the text
	items that are editable by the user using the "Rename" command. In
	the case of FMIconView, this would be the attribute with the name
	"name".
	(get_icon_additional_text_callback): This callback returns the
	text items that are not editable by the user using the "Rename"
	command.

2000-04-17  John Sullivan <sullivan@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_monitor_add), (athena_file_monitor_remove):
	Added empty implementations for these two routines. Will
	fill in with actual code later after talking to Darin.

	* src/athena-index-title.c:
	(athena_index_title_set_uri): Monitor file for changes
	in directory item count.
	(release_file): Remove monitoring of file.
	
	* src/file-manager/fm-properties-window.c:
	(name_field_done_editing), (name_field_focus_out),
	(name_field_focus_in), (create_properties_window):
	Made focusing away from the name field in the Properties
	window deselect the text, and focusing in select it.

2000-04-17  John Sullivan <sullivan@eazel.com>

	Fixed bugs, mostly related to editable text fields.

	* README: Made the contents of this file slightly helpful.
	
	* data/mime/athena.keys: Added an obscure MIME type that
	someone reported running into.

	* libathena-extensions/athena-entry.h,
	* libathena-extensions/athena-entry.c: New files. Define a
	subclass of GtkEntry (one-line text editing field) that fixes
	bugs and adds convenience functions.
	(athena_entry_key_press): Override key_press handler to treat
	the keypad Enter key the same as the other Enter key (in GtkEntry
	it inserts a "/r" into the text).
	(athena_entry_select_all): Select all text, and move the text
	cursor position to the end.
	(athena_entry_select_all_at_idle): Same, but do it at the next
	idle opportunity. Useful since athena_entry_select_all won't
	work right if called in a key_press signal handler.
	* libathena-extensions/Makefile.am: Build these two new files.

	* src/file-manager/fm-properties-window.c:
	(name_field_activate): New function, updates file name and
	selects all text.
	(create_properties_window): Make name_field be a AthenaEntry.
	This fixes half of bug 433 (Enter keys don't work properly in
	properties window). Also attach to "activate" signal and update
	name change then. This fixes other half of bug 433. Also start
	with name field selected & focused. This fixes bug 432 (properties
	window should appear with name text selected).
	(name_field_update_to_match_file): Only update the displayed text
	if the new name coming in is different. This was needed to make
	select-all-on-activate work.
	(name_field_done_editing): Don't accept empty string as name;
	silently revert back to original name.

	* src/athena-bookmarks-window.c:
	(create_bookmarks_window): Change name & uri text fields to 
	AthenaEntry; this causes keypad Enter key to behave like other 
	Enter key. Also connect to focus_in and activate signals.
	(update_bookmark_from_text): New function, extracted from
	on_text_field_focus_out_event.
	(on_text_field_focus_out_event): Deselect all text after updating
	bookmark.
	(on_text_field_focus_in_event): New function, select all text.
	(name_or_uri_field_activate): New function, update bookmark and
	select all text.
	
	* src/athena-location-bar.c:
	(athena_location_bar_initialize): Use AthenaEntry instead of
	GtkEntry. This makes keypad Enter act like other Enter in uri-entry
	field.
	
	* src/ntl-window-msgs.c:
	(athena_window_end_location_change_callback): Make "Athena can't 
	handle this type of file" message mention (human-readable version of) 
	file type.

2000-04-17  Andy Hertzfeld <andy@eazel.com>

	fixed bug involving making thumbnails for directories where we don't
	have write permissions by making them in $HOME/.athena/thumbnails.
	
	* libathena/athena-directory.c:
	moved escape_slashes routine to athena-strings so it can be shared
	* libathena/athena-string.c,h:
	added athena_str_escape_slashes, copies from athena-directory
	* libathena/athena-icon-factory.c:
	added boolean to make_thumbnail_path to make the thumbnails in
	$HOME/.athena/thumbnails instead of in the local directory, and
	then used it when we can't write to the local one.
	
2000-04-16  Andy Hertzfeld <andy@eazel.com>

	* src/ntl-index-panel.c:
	fixed problem where the command buttons in the index panel were overlapping
	the metaview.  They are not supposed to be showing if a metaview is selected.
	Fixed by hiding them in athena_index_panel_update_buttons if a metaview
	is selected.
	
2000-04-15  Andy Hertzfeld <andy@eazel.com>

	installed some icons for common file types, purloined from gmc
	
	* icons/Makefile.am:
	added a bunch of icons
	* icons/gnome-icon-x-mp3.png: new icon for mp3s
	* icons/gnome-compressed.png: new icon for gzips
	* icons/gnome-library.png: new icon for shared libraries
	* icons/gnome-manpage.png: new icon for man pages
	* icons/gnome-objectfile.png: new icon for object code files
	* icons/gnome-pack-deb.png: new icon for debian packages
	* icons/gnome-pack-rpm.png: new icon for rpm packages
	* icons/gnome-package: new icon for tar archives
	* data/mime/athena.keys:
	added icon-filename entries to appropriate mime-types
	
2000-04-14  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-string.c: 
	* libathena-extensions/athena-string.h:
	After a chat with Rebecca, named athena_str_underscore_escape to
	athena_str_double_underscores since the latter name more
	accurately describes what it does.
	(athena_str_double_underscores): Changed the function to allow
	NULL and return NULL instead of doing g_return_val_if_fail.
	(Also reformatted a bit and made a few gratuitous changes.)

	* libathena-extensions/athena-bookmark.c:
	* libathena-extensions/athena-bookmark.h:
	(athena_bookmark_get_menu_display_name):
	Moved the logic about escaping menu characters up one level so
	the bookmark class doesn't have to know about it. This removes
	the function from AthenaBookmark completely.

	* src/athena-window-menus.c:
	(append_bookmark_to_menu): Fixed a storage leak and moved the
	double-underscore escaping in here.

2000-04-14 Rebecca Schulman <rebecka@eazel.com>

	Fixed test cases on athena-string.c to be correct
	
2000-04-14 Rebecca Schulman <rebecka@eazel.com>

	Bookmarks with '_' characters display
	correctly now on menus
	
	* libathena-extensions/athena-string.c
	New function to escape '_' characters in strings
	for menu display
	* libathena-extensions/athena-bookmark.c
	New function to take bookmarks and return
	'_' escaped names
	* src/athena-window-menus.c
	Calls function to escape bookmark names

2000-04-14  Darin Adler  <darin@eazel.com>

	Finished task 174 (Use deferred calculation to compute directory
	counts).

	* libathena-extensions/Makefile.am: 
	* libathena-extensions/athena-file-attributes.h: 
	Added a header file for names of file attributes.

	* libathena-extensions/athena-directory-private.h: 
	* libathena-extensions/athena-directory.c: 
	* libathena-extensions/athena-directory.h: 
	* libathena-extensions/athena-file-private.h: 
	* libathena-extensions/athena-file.c: 
	* libathena-extensions/athena-file.h: 
	Added background computation of the "directory item count"
	attribute. This is serving as a test case for the API for
	requesting additional information.

	* src/file-manager/fm-directory-view.c:
	(display_selection_info): Changed to use the new interface that
	can sometimes return "I don't know" for the number of items in
	a particular directory.
	(stop_load), (done_loading), (display_pending_files),
	(fm_directory_view_stop): Fixed a mistake in the old code where
	we stopped monitoring once the files were discovered. We need to
	keep monitoring.
	(finish_loading_uri): Pass in an attribute that we want to monitor:
	ATHENA_FILE_ATTRIBUTE_DIRECTORY_ITEM_COUNT.

2000-04-14 Rebecca Schulman <rebecka@eazel.com>
	
	Bookmarks with '_' characters display
	correctly now on menus
	
	* libathena-extensions/athena-string.c
	New function to escape '_' characters in strings
	for menu display
	* libathena-extensions/athena-bookmark.c
	New function to take bookmarks and return
	'_' escaped names
	* src/athena-window-menus.c
	Calls function to escape bookmark names

Fri Apr 14 16:35:32 2000  Raph Levien  <raph@acm.org>

	* librsvg/test-rsvg.c: Added a command line tester for rsvg, which
	outputs alpha-transparent PNG's from SVG input files. The PNG save
	code is lifted from similar code in athena-icon-factory, and
	should be deleted when this functionality appears in gdk-pixbuf.

	* librsvg/Makefile.am: Build test-rsvg.

2000-04-14  Andy Hertzfeld <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	using Raph's new machinery, made icons for .svg files use 
	a rendering of the file itself.
	
2000-04-14  Christopher James Lahey  <clahey@helixcode.com>

	* src/ntl-window.c (athena_window_constructed): Change the
	packing of the first pane so that it doesn't autoresize.

	* libathena-extensions/athena-file-utilities.c
	(athena_user_top_directory): Change this routine to use
	gnome_datadir_file to get the share directory.  Also, change to
	using g_strdup_printf.

2000-04-14  Darin Adler  <darin@eazel.com>

	* libathena-extensions/.cvsignore: Fixed to match new directory
	contents.

2000-04-14  Ramiro Estrugo  <ramiro@eazel.com>

	Split libathena into two pieces.  

	libathena now only contains the view interfaces needed by athena 
	components.

	These are the interfaces defined in athena-view-component.idl.
	
	libathena-extensions containes the remainder of the stuff.

	Also used the cvs repository munging opportunity to do some of the
	ntl-* renaming outlined in the RENAIMING file.

	* libathena/bonobo-stream-vfs.c
	  libathena/bonobo-stream-vfs.h,
	  libathena/gtkscrollframe.c,
	  libathena/gtkscrollframe.h,
	  libathena/athena-alloc.h,
	  libathena/athena-background-canvas-group.c,
	  libathena/athena-background-canvas-group.h,
	  libathena/athena-background.c,
	  libathena/athena-background.h,
	  libathena/athena-bonobo-extensions.c,
	  libathena/athena-bonobo-extensions.h,
	  libathena/athena-bookmark.c,
	  libathena/athena-bookmark.h,
	  libathena/athena-debug.c,
	  libathena/athena-debug.h,
	  libathena/athena-default-file-icon.c,
	  libathena/athena-default-file-icon.h,
	  libathena/athena-directory-background.c,
	  libathena/athena-directory-background.h,
	  libathena/athena-directory-private.h,
	  libathena/athena-directory.c,
	  libathena/athena-directory.h,
	  libathena/athena-file-private.h,
	  libathena/athena-file-utilities.c,
	  libathena/athena-file-utilities.h,
	  libathena/athena-file.c,
	  libathena/athena-file.h,
	  libathena/athena-gdk-extensions.c,
	  libathena/athena-gdk-extensions.h,
	  libathena/athena-gdk-pixbuf-extensions.c,
	  libathena/athena-gdk-pixbuf-extensions.h,
	  libathena/athena-glib-extensions.c,
	  libathena/athena-glib-extensions.h,
	  libathena/athena-global-preferences.c,
	  libathena/athena-global-preferences.h,
	  libathena/athena-gnome-extensions.c,
	  libathena/athena-gnome-extensions.h,
	  libathena/athena-graphic-effects.c,
	  libathena/athena-graphic-effects.h,
	  libathena/athena-gtk-extensions.c,
	  libathena/athena-gtk-extensions.h,
	  libathena/athena-gtk-macros.h,
	  libathena/athena-icon-canvas-item.c,
	  libathena/athena-icon-canvas-item.h,
	  libathena/athena-icon-container.c,
	  libathena/athena-icon-container.h,
	  libathena/athena-icon-dnd.c,
	  libathena/athena-icon-dnd.h,
	  libathena/athena-icon-factory.c,
	  libathena/athena-icon-factory.h,
	  libathena/athena-icon-grid.c,
	  libathena/athena-icon-grid.h,
	  libathena/athena-icon-private.h,
	  libathena/athena-lib-self-check-functions.c,
	  libathena/athena-lib-self-check-functions.h,
	  libathena/athena-list-column-title.c,
	  libathena/athena-list-column-title.h,
	  libathena/athena-list.c,
	  libathena/athena-list.h,
	  libathena/athena-metadata.h,
	  libathena/athena-mime-type.c,
	  libathena/athena-mime-type.h,
	  libathena/athena-self-checks.c,
	  libathena/athena-self-checks.h,
	  libathena/athena-string-list.c,
	  libathena/athena-string-list.h,
	  libathena/athena-string.c,
	  libathena/athena-string.h,
	  libathena/athena-xml-extensions.c,
	  libathena/athena-xml-extensions.h: moved to
	libathena-extensions.

	  libathena/ntl-content-view-frame.c,
	  libathena/ntl-content-view-frame.h,
	  libathena/ntl-meta-view-frame.c,
	  libathena/ntl-meta-view-frame.h,
	  libathena/ntl-view-frame.c,
	  libathena/ntl-view-frame.h: moved to
	libathena-extensions and renamed from "ntl-*" to "athena-*"

	* Makefile.am,
	  configure.in: added libathena-extensions to the build.

	* libathena/.cvsignore,
	  libathena/Makefile.am,
	  libathena/libathena.h,
	  libathena/athena-content-view-frame.c,
	  libathena/athena-content-view-frame.h,
	  libathena/athena-meta-view-frame.c,
	  libathena/athena-meta-view-frame.h,
	  libathena/athena-view-frame-private.h,
	  libathena/athena-view-frame.c,
	  libathena/athena-view-frame.h,
	  libathena/athena-zoomable.c: Updated for libathena ->
	libathena-extensions changes. 

	* libathena-extensions/Makefile.am,
	  libathena-extensions/athena-global-preferences.c,
	  libathena-extensions/athena-global-preferences.h,
	  libathena-extensions/athena-icon-factory.h: Updated for libathena ->
	libathena-extensions changes. 

	* athena-widgets/athena-preferences-box.c,
	  athena-widgets/athena-preferences-dialog.c,
	  athena-widgets/athena-preferences-group.c,
	  athena-widgets/athena-preferences-item.c,
	  athena-widgets/athena-preferences-pane.c,
	  athena-widgets/athena-preferences.c,
	  athena-widgets/athena-radio-button-group.c: Updated for libathena ->
	libathena-extensions changes. 

	* src/Makefile.am,
	  src/athena-bookmark-list.c,
	  src/athena-bookmark-list.h,
	  src/athena-bookmarks-window.c,
	  src/athena-index-tabs.c,
	  src/athena-index-title.c,
	  src/athena-location-bar.c,
	  src/athena-signaller.c,
	  src/athena-window-menus.c,
	  src/athena-window-toolbars.c,
	  src/athena-zoom-control.c,
	  src/ntl-app.c,
	  src/ntl-index-panel.c,
	  src/ntl-main.c,
	  src/ntl-meta-view.c,
	  src/ntl-uri-map.c,
	  src/ntl-uri-map.h,
	  src/ntl-view-bonobo-subdoc.c,
	  src/ntl-view.c,
	  src/ntl-window-msgs.c,
	  src/ntl-window-state.c,
	  src/ntl-window.c,
	  src/ntl-window.h: Updated for libathena ->
	libathena-extensions changes. 

	* src/file-manager/fm-directory-view.c,
	  src/file-manager/fm-directory-view.h,
	  src/file-manager/fm-icon-text-window.c,
	  src/file-manager/fm-icon-view.c,
	  src/file-manager/fm-list-view.c,
	  src/file-manager/fm-properties-window.c,
	  src/file-manager/fm-properties-window.h: Updated for libathena ->
	libathena-extensions changes. 

	* components/history/Makefile.am,
	  components/history/ntl-history-view.c,
	  components/html/Makefile.am,
	  components/html/ntl-web-browser.c,
	  components/music/Makefile.am,
	  components/music/athena-music-view.c,
	  components/music/athena-music-view.h,
	  components/notes/Makefile.am,
	  components/notes/ntl-notes.c,
	  components/rpmview/Makefile.am,
	  components/rpmview/athena-rpm-view.c,
	  components/rpmview/athena-rpm-view.h,
	  components/sample/Makefile.am,
	  components/sample/athena-sample-content-view.c,
	  components/sample/athena-sample-content-view.h,
	  components/services/startup/Makefile.am,
	  components/services/startup/eazel-register.c,
	  components/services/startup/athena-service-startup-view.c,
	  components/services/startup/athena-service-startup-view.h:
	Updated components for libathena -> libathena-extensions changes. 
	
2000-04-14  Fatih Demir	<kabalak@gmx.net>

	* configure.in : Added tr to ALL_LINGUAS .

2000-04-14  Ramiro Estrugo  <ramiro@eazel.com>

	* po/ChangeLog: Added this thing to make 'make dist' happy.

	Use that from now on for changes in po/.  Seems to be the standard
	thing to do.
	
2000-04-14  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena/libathena.h
	  libathena/athena-zoomable.h
	  libathena/ntl-view-frame.h:

	Include the new <athena-view-component.h> instead of
	<athena.h>
	
	  src/ntl-uri-map.h
	  src/ntl-view.h:

	Same.
	
2000-04-14  Ramiro Estrugo  <ramiro@eazel.com>

	* components/rpmview/athena-rpm-view.c:

	Did not build on redhat 5.2 because RPMTAG_FILENAMES has been
	obseleted in the version of rpm that ships with 5.2 apparently.
	I added a dumb hack to define RPMTAG_FILENAMES to
	RPMTAG_OLDFILENAMES which is almost surely the wrong thing to do,
	but i really need to have athena building while i do the
	athena view changes.  I gave myself a bug to properly address
	this soon (472).
	
2000-04-14  Maciej Stachowiak  <mjs@eazel.com>

	* ChangeLog-20000414: rolled over from ChangeLog.
