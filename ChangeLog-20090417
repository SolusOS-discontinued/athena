=== ChangeLog discontinued ===

	With the move to git, athena is switching from a ChangeLog file
	to relying on commit messages to provide change history. Please
	see README.commits for guidance on the expected message format.

2009-04-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Reversed check in last commit, fixed.

2009-04-16  Alexander Larsson  <alexl@redhat.com>

	Bug 578983 – set_more_warnings check of WARNING_CFLAGS doesn't work
	
	* configure.in:
	Actually check the options.

2009-04-16  Alexander Larsson  <alexl@redhat.com>

	* src/athena-places-sidebar.c (athena_places_sidebar_init):
	Set typeahead column to the name column.

2009-04-16  Alexander Larsson  <alexl@redhat.com>

	Bug 578468 – Change of font DPI setting does not effect desktop icons

	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_invalidate_label_size):
	Invalidate pango layouts since the context could have changed
	For instance the font DPI.

2009-04-16  Alexander Larsson  <alexl@redhat.com>

	Bug 579086 – Excessive white-space on right-hand side in icon view
	
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_update_scroll_region):
	When using at allocation->width, take zoom into account

2009-04-13  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.26.2 ===

2009-04-13  Alexander Larsson  <alexl@redhat.com>

	* src/athena-places-sidebar.c:
	(add_place):
	Don't show eject if not mounted.

2009-04-13  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2009-04-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-tree-view.c:
	* src/athena-places-sidebar.c:
	Show both unmount and eject in menus. We need to show eject for
	a lot of devices (that we can't detect ahead of time) so we're
	enabling it much more generally. However, eject sometimes does
	things you don't want (like unmounting all volumes on a drive),
	so we also need to expose unmount.

	For discussion, see bug 574067 and bug 576587.

2009-04-09  Cosimo Cecchi  <cosimoc@gnome.org>

	* cut-n-paste-code/libegg/eggsmclient.c:
	(egg_sm_client_get_option_group): revert string freeze break.

2009-04-09  Cosimo Cecchi  <cosimoc@gnome.org>

	* cut-n-paste-code/libegg/eggsmclient-xsmp.c: (save_state),
	(set_properties), (ptrarray_prop):
	* cut-n-paste-code/libegg/eggsmclient.c:
	(egg_sm_client_get_option_group):
	Update the EggSMClient code from libegg trunk.

2009-04-08  Cosimo Cecchi  <cosimoc@gnome.org>

	* cut-n-paste-code/libegg/eggtreemultidnd.c:
	(egg_tree_multi_drag_source_get_type),
	(egg_tree_multi_drag_motion_event):
	Update the eggtreemultidnd.[ch] from libegg trunk (#560335).

2009-04-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-column-utilities.c:
	(get_builtin_columns):
	Add column for location. (#374661)

2009-04-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-mime-actions.c:
	Make sure PackageKit is active before showing
	install dialog.
	Patch from  James Westby

2009-04-08  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(add_script_to_scripts_menus):
	Use gtk_action_group_add_action_with_accel so that we
	allow users to define key shortcuts for scripts.

	Patch from Holger Berndt <berndth@gmx.de>

2009-04-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.[ch]:
	* libathena-private/athena-file-utilities.h:
	Add athena_get_accel_map_file

	* src/athena-application.[ch]:
	Load accel map on startup, queue save when it changes.

	* src/athena-main.c:
	Save accel map on clean exit if it is dirty.

	Patch from Holger Berndt <berndth@gmx.de>

2009-04-07  Alexander Larsson  <alexl@redhat.com>

	* src/athena-spatial-window.c:
	Make sure we save spatial geometry and data on close both
	via WM close button and ctrl-w.

2009-04-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_get_first_visible_icon):
	Fix up this for RTL in compact mode. We need to look
	at the right place and do the right kind of comparison
	on pos.

2009-04-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_layout_now):
	Ensure that we've also size-allocated for the new contents.
	It may happen that newly added icons caused the size allocate
	to turn on a scrollbar, which will change the layout.

2009-04-07  Alexander Larsson  <alexl@redhat.com>

	Bug 559863 – RTL locales: icons in folder icon view are aligned to the left

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_update_scroll_region):
	Fix up the icon view extents so that we always
	include the full window allocation in the automatic
	layout case, plus allow extents < 0 (due to layout
	in RTL mode).
	This makes sure we RTL auto-layouting works correctly
	instead of being flushed to the left.

2009-04-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-dnd.c:
	(athena_drag_default_drop_action_for_icons):
	Fix regression in the default dnd type. We don't
	want to look recursively for the parent.
	See https://bugzilla.redhat.com/show_bug.cgi?id=456515
	for details.

2009-04-02  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.26.1 ===

2009-04-02  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for relase

2009-04-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-directory.c:
	* libathena-private/athena-file.c:
	Call query_filesystem_info asynchronously.
	Also, avoid calling it to often 

2009-04-01  Alexander Larsson  <alexl@redhat.com>

	Bug 518481 – URL shortcuts do not open query part

	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.[ch]:
	* libathena-private/athena-desktop-icon-file.c:
        (update_info_from_link):
	* libathena-private/athena-directory-async.c:
        (lacks_mount):
        (link_info_done):
	* libathena-private/athena-search-directory-file.c:
        (athena_search_directory_file_init):
	Store AthenaFile activation uri as char *uri, not
	GFile, as we sometimes handle links that are not true
	GFile locations such as mailto: links in desktop files.

	* libathena-private/athena-desktop-link.[ch]:
        Add athena_desktop_link_get_activation_uri

	* libathena-private/athena-directory.c:
        (athena_directory_notify_files_added_by_uri):
        (athena_directory_notify_files_changed_by_uri):
        (athena_directory_notify_files_removed_by_uri):
        (athena_directory_schedule_metadata_remove_by_uri):
	Use public athena_file_list_from_uris instead of local
	copy of it.

	* libathena-private/athena-mime-actions.c:
	Store both AthenaFile and char *uri in ApplicationLaunchParameters.
	This allows us to correctly handle uris that don't work well as
	GFiles and pass them unmodified to the launched applications.

	* libathena-private/athena-program-choosing.[ch]:
	Add athena_launch_application_by_uri() that launches an application
	by specifying the file as a uri, so that we can handle uris that
	don't work well as GFile/AthenaFiles.

2009-03-31  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
        (handle_netscape_url_drop_ask_cb):
        (handle_netscape_url_drop_timeout):
        (fm_directory_view_handle_netscape_url_drop):
	Wait at most 1 second for http mimetype check.

2009-03-31  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
        (handle_netscape_url_drop_ask_cb):
        (fm_directory_view_handle_netscape_url_drop):
	Check http mimetype asynchronously to avoid hanging

2009-03-30  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-error-reporting.c:
        (fm_report_error_loading_directory):
	Don't show error about not mounted when loading a directory, as
	this will anyway automaticall trigger a mount operation (and possible
	error from that).

2009-03-26  Alexander Larsson  <alexl@redhat.com>

	Bug 576761 – fallback icon when icon specified in .desktop doesn't exist is ugly

	* libathena-private/athena-default-file-icon.c:
	Replace the ancient gnome 1.x fallback icon with something contemporary.

2009-03-23  Alexander Larsson  <alexl@redhat.com>

	Bug 129963 – athena locks up during window resize (compact mode)

        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-icon-private.h:
	Work around possible infinite loop when relayouting by counting
	the number of iterations. This could happen in certain cases in
	with the compat mode. We use a clear-counter-at-idle-hack to detect
	the end of the loop.

2009-03-20  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-properties-window.c:
	(custom_icon_file_chooser_response_cb),
	(select_image_button_callback): don't use gtk_dialog_run to
	spawn the filechooser for a custom icon (#575344).

2009-03-20  Alexander Larsson  <alexl@redhat.com>

	Bug 575244 – athena crashed with SIGSEGV in athena_query_editor_changed_force()

	* src/athena-query-editor.c (athena_query_editor_dispose):
	Remove typing timeout when destroying.

2009-03-19  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-window-menus.c:
	(athena_window_remove_trash_monitor_callback):
	* src/athena-window-private.h:
	* src/athena-window.c: (athena_window_finalize):
	Remember to disconnect the signal handler to the trash monitor
	when finalizing the window, as we don't own that object.

2009-03-19  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in: bump required GTK+ version to 2.16.0.
	* src/athena-window-menus.c: (trash_state_changed_cb),
	(athena_window_initialize_trash_icon_monitor),
	(athena_window_initialize_menus):
	Update the trash icon in the "Go" menu according to the
	trash state (#575282).

2009-03-19  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/athena-audio-mime-types.h:
	Update mime types handled by totem-audio-preview.
	Patch by Bastien Nocera (#575345).

2009-03-19  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-navigation-window.c:
	(always_use_location_entry_changed),
	(athena_navigation_window_set_bar_mode):
	Always synchronize the location bar button with the pathbar
	mode. Patch by Paweł Paprota (#416891).

2009-03-19  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
	Report error for failed mounts.

2009-03-19  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-ditem-page.c:
        (item_entry_free):
        (save_entry):
        (build_table):
	Don't save desktop files if nothing actually changed.

2009-03-18  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_get_icon_text),
	(athena_icon_container_search_iter),
	(athena_icon_container_update_icon):
	* libathena-private/athena-icon-container.h:
	* src/file-manager/fm-icon-container.c:
	(fm_icon_container_get_icon_text):
	Unbreak typeahead find for 33% zoom level (#341708).

2009-03-18  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-application.c: (open_window), (open_windows),
	(message_received_cb), (athena_application_startup):
	Spawn the Athena windows on the right scren instead of always
	using the default one (#555078).

2009-03-17  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-desktop-icon-view.c:
        (trash_link_is_selection):
	Don't unref link if NULL

2009-03-17  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-progress-info.c:
	Center cancel button over progress bar, makes dialog
	much nicer for long filenames.
	Patch from anthony <dreadyman16@gmail.com>

2009-03-16  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/Makefile.am: remove -version-info LDFLAG
	from libathena-private, as that's a private library.
	Patch by Daniel Macks (#348301).

2009-03-16  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-application.c: (athena_application_load_session):
	Fix a typo in the session loading code.
	Patch by Vincent Untz (#575330).

2009-03-16  Alexander Larsson  <alexl@redhat.com>

	Bug 171655 – add support for XDS (Direct Save protocol) to list view

        * libathena-private/athena-tree-view-drag-dest.c:
	Support XDS in list view.
	Patch from Christian Neumair.

2009-03-16  Alexander Larsson  <alexl@redhat.com>

	Bug 523883 – Thumbnails for 200% zoom are regenerated each time a folder is opened.

        * libathena-private/athena-file.c:
        (athena_file_get_icon):
	allow scaling up thumbnails, use the scaled up thumnail
	for up to 25% size increase.

        * src/file-manager/fm-icon-container.c:
        (fm_icon_container_get_icon_images):
	Force thumbnail size for compact view to avoid loading at wrong size
	and then rescaling

2009-03-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.26.0 ===

2009-03-16  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Bump version to 2.26.0

2009-03-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (copy_job_done):
	desktop_location can be NULL, check before unrefing

2009-03-12  Alexander Larsson  <alexl@redhat.com>

	Bug 550250 – athena crashed with SIGSEGV in g_type_check_instance_cast()

        * libathena-private/athena-autorun.c:
        (athena_autorun_rebuild_combo_box):
        (athena_autorun_prepare_combo_box):
	Don't re-allocate data in athena_autorun_rebuild_combo_box(), as some
	places still refer to the old version.

2009-03-12  Alexander Larsson  <alexl@redhat.com>

        Bug 532725 – non-refreshing thumbnails: at 150% zoom

        * libathena-private/athena-directory-async.c:
        (thumbnail_done):
	Get mtime from right place if loading the original as thumbnail.

2009-03-12  Alexander Larsson  <alexl@redhat.com>

	Bug 538888 – crash in Home Folder: I tried to open a direct...

	* libathena-private/athena-thumbnails.c:
	(get_pixbuf_from_data):
	Don't crash when gdk-pixbuf returns an error but doesn't
	set the GError properly.

2009-03-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.25.93 ===

2009-03-11  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2009-03-11  Alexander Larsson  <alexl@redhat.com>

	Bug 529295 – Unable to unmount

        * libathena-private/athena-directory-async.c:
        (got_mount):
	Set mount on AthenaFile via athena_file_set_mount.

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Add athena_file_set_mount to set GMount.
	Connect to "unmounted" on GMount and invalidate mount attribute
	in callback.

2009-03-10  Cosimo Cecchi  <cosimoc@gnome.org>

	* Makefile.am:
	* configure.in:
	* athena.spec.in: remove this obsolete spec file.

2009-03-09  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-autorun.c:
	(athena_allow_autorun_for_volume_finish):
	inhibit autorun for 10 seconds instead of 5 seconds at login,
	as that may be too short for slower machines (#520691).

2009-03-09  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c: added a translator
	comment explaining how to handle ordinal numbers if the language
	doesn't distinguish plural forms like 1st, 2nd, 3rd, xth (#325284).

2009-03-08  Sven Herzberg  <herzi@lanedo.com>

	Bug 574546 – Document athena_property_page_provider_get_pages()

	* libathena-extension/athena-property-page-provider.c: document
	the function
	* src/athena-image-properties-page.c,
	* src/athena-notes-viewer.c: drop the function documentation, it's
	in the API reference now

2009-03-08  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-properties-window.c
	(add_permissions_combo_box):
	* src/athena-file-management-properties.c
	(create_icon_caption_combo_box_items):
	Add two comments for translators (#572158).

2009-03-07  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c (get_link_name):
	don't mark for translation a file name, as it's pointless (#534432).

2009-03-07  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-application.c
	(_unique_message_data_get_geometry_and_uris): if the geometry
	string is empty, make it NULL, so that we don't trigger geometry
	parsing later (#574410).

2009-03-06  Alexander Larsson  <alexl@redhat.com>

        Bug 569668 – Don't allow changing default app for folders

        * src/file-manager/fm-properties-window.c:
	Don't show "open with" tab for folders. Accidentally changing
	the folder handler causes all sorts of weird issues when
	e.g. opening folders from the panel.

2009-03-05  Alexander Larsson  <alexl@redhat.com>

	Bug 449397 – misinterpreted uid over ssh

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Use the gvfs reported owner/group names instead of the local
	uid/gui mapping. This allows remote shares to report the correct
	names.

2009-03-04  Alexander Larsson  <alexl@redhat.com>

	Bug 574067 – context menu lists eject and unmount option

        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-tree-view.c:
        * src/athena-places-sidebar.c:
	Never show unmount menu item if we're showing eject, as its a superset
	of unmount.

2009-03-04  Alexander Larsson  <alexl@redhat.com>

	Bug 573991 – Athena does not recognize some .desktop files as launchers

        * libathena-private/athena-link.c:
        (athena_link_get_link_info_given_file_contents):
	Don't try to sniff the contents, we'll handle that when parsing anyway.
	And sniffing breaks if there are too much comments before the first group in
	the desktop file.

2009-03-03  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-application.c (athena_application_finalize),
	(ck_session_active_changed_cb), (ck_call_is_active_cb),
	(ck_get_current_session_cb), (do_initialize_consolekit),
	(finish_startup), (mount_added_callback):
	* src/athena-application.h: commit properly the previous
	ConsoleKit patch.

2009-03-03  A. Walton  <awalton@gnome.org>

	* src/athena-application.c (athena_application_finalize),
	(finish_startup), (mount_added_callback):
	* src/athena-application.h:
	Fix the build by reverting Cosimo's CK double-patch.

2009-03-02  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-link.c
	(athena_link_local_set_key), 
	(athena_link_local_set_text),
	(athena_link_local_set_icon):
	Don't localize 'Icon=' keys.
	Fixes Launchpad Bug #336679.

2009-03-03  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-application.c (athena_application_finalize),
	(ck_session_active_changed_cb), (ck_call_is_active_cb),
	(ck_get_current_session), (do_initialize_consolekit),
	(ck_get_current_session_cb), (finish_startup),
	(mount_added_callback):
	* src/athena-application.h: use ConsoleKit to find out whether
	we are on the currently active session. If we don't, inhibit autorun
	dialogs (#573577).

2009-03-02  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.25.92 ===

2009-03-02  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2009-02-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (get_abs_path_for_symlink):
	Add helper to get the path to use for symlinks that also
	works for non-local files.
        (link_file):
	Use get_abs_path_for_symlink() for target of symlink so that
	it works for remote files too.
	Also, fix GFile comparison to use g_file_equal, not ==

2009-02-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-global-preferences.c:
        (athena_global_preferences_init):
	Remove monitoring of old gnome-vfs gconf directory.
	Preload the gconf directories that are used on startup.

2009-02-26  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (add_submenu):
	Don't ref pixbuf if it is NULL

2009-02-25  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (copy_files):
	Don't unref info if == NULL
	Query for readonly on the source directory, not the file because
	otherwise we'll follow symlinks to the wrong filesystem.
	OTOH, maybe query_filesystem_info shouldn't follow symlinks,
	but that unfortunately seems hard to implement.

2009-02-25  Alexander Larsson  <alexl@redhat.com>

        * src/athena-application.c:
	Use $XDG_DATA_HOME/.converted-launchers as marker for
	one-time desktop file trust operation.

        * libathena-private/athena-file-utilities.[ch]:
	Add athena_is_in_system_dir() to check if path is in
	XDG_DATA_DIR or in ~/.gnome2.

        * libathena-private/athena-directory-async.c:
        (is_link_trusted):
	Use new athena_is_in_system_dir() instead of open coding it.

        * libathena-private/athena-file-operations.c:
	When copying a desktop file from a trusted location to the desktop,
	mark it as trusted.

2009-02-24  Cosimo Cecchi  <cosimoc@gnome.org>

	* test/test-eel-widgets.c: remove obsolete test.

2009-02-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file-operations.h:
        * libathena-private/athena-mime-actions.c:
        Add "interactive" argument to
	athena_file_mark_desktop_file_trusted.

        * src/athena-application.c:
	Mark all desktopfiles on the desktop trusted on first
	run.

2009-02-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file-operations.h:
	Add athena_file_mark_desktop_file_trusted(), this now
	adds a #! line if there is none as well as makes the file
	executable.

        * libathena-private/athena-mime-actions.c:
	Use athena_file_mark_desktop_file_trusted() instead of
	just setting the permissions.

2009-02-24  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-mime-actions.c (activate_desktop_file):
	Capitalize words in button.

2009-02-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
	Check for trusted desktop file launchers.

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
        * libathena-private/athena-file.h:
        Add athena_file_is_trusted_link.
	Allow unsetting of custom display name.

        * libathena-private/athena-mime-actions.c:
	Display dialog when trying to launch a non-trusted desktop file.

2009-02-23  Paolo Borelli  <pborelli@katamail.com>

	* src/file-manager/fm-list-view.c (sort_criterion_changes_due_to_user):
	do not leak the columns list.

2009-02-23  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-thumbnails.c: check if the mtime
	attribute is actually available.

2009-02-23  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-thumbnails.c (get_types_table):
	don't hardcode mimetypes for which we limit the file size,
	but load the list of the supported mimetypes from GdkPixbuf
	instead (#545934).

2009-02-22  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c
	(seconds_count_format_time_units), (format_time):
	don't add 30 seconds when formatting time, as float->int conversion
	already truncates the value for us (#572284).

2009-02-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in:
	* test/Makefile.am: remove unneeded and obsolete snippets of
	autofoo.

2009-02-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in: explicitely depend on gthread.
	Patch by Damien Lespiau (#572604).

2009-02-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (style_set):
	Don't chain up on style_set, as this causes flicker.

2009-02-20  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c (get_link_name),
	(link_file):
	Do not put "Link to ..." in front of symbolic links that are created
	in another directory via DND. Fixes #534432.

2009-02-20  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_handle_scroll_event),
	(fm_directory_view_scroll_event):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c (fm_icon_view_scroll_event),
	(fm_icon_view_class_init):
	Treat vertical scroll events as horizontal ones if compact view is
	enabled, and if they do not bump the zoom level. Fixes #571770.

2009-02-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (copy_move_file):
	Better string for previous commit.

2009-02-18  Alexander Larsson  <alexl@redhat.com>

	Bug 565610 – Replacing folder with file from within that folder destroys both

        * libathena-private/athena-file-operations.c:
        (copy_move_file):
	Give a warning when the source would be overwritten by the
	destination on a copy.

2009-02-17  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
        * src/athena-main.c:
	Set the glibc MMAP limit to a static value to avoid the dynamic
	limit hitting bad behaviour due to the large temporary allocations
	when creating the desktop background. It would raise the limit
	to a large value causing several large allocations on the
	heap which are then not returned to the OS.

2009-02-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.25.91 ===

2009-02-16  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Bump version to 2.25.91

2009-02-10  David Zeuthen  <davidz@redhat.com>

	Don't use shadowed mounts.

	* libathena-private/athena-desktop-link-monitor.c (has_mount),
	(create_mount_link), (remove_mount_link), (mount_added_callback),
	(mount_removed_callback), (mount_changed_callback):
	* libathena-private/athena-directory-async.c (get_mount_at):
	* src/file-manager/fm-tree-view.c (add_root_for_mount):
	* src/athena-pathbar.c (is_file_path_mounted_mount):
	* src/athena-places-sidebar.c (update_places):
	Honor g_mount_is_shadowed().

2009-02-16  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-info.c:
        (athena_icon_info_lookup):
	Handle GIcon types other than files and themed icons.
	Patch from David Zeuthen

2009-02-13  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file.c: (athena_file_mount):
	* libathena-private/athena-vfs-file.c: (vfs_file_mount):
	use g_set_error_literal() where appropriate.
	Patch by Christian Persch (#570537).

2009-02-13  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in: require intltool 0.40.1.
	* src/file-manager/fm-properties-window.c
	(value_field_update_internal): use C_() to handle translator
	comments. Patch by A. Walton (#542658).

2009-02-09  Thomas H.P. Andersen  <phomes@gmail.com>

	* src/file-manager/fm-empty-view.c: (fm_empty_view_add_file):
	* src/file-manager/fm-directory-view.c: (connect_proxy):
	* src/athena-spatial-window.c:
	(got_file_info_for_location_menu_callback),
	(athena_spatial_window_set_location_button):
	* src/athena-property-browser.c: (make_drag_image),
	(make_color_drag_image):
	* src/athena-bookmarks-window.c: (update_bookmark_from_text):
	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_get_image):
	* libathena-private/athena-thumbnails.c:
	(async_thumbnail_read_image):
	Don't use deprecated gdk_pixbuf_unref. Bug #570953

2009-02-06  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-link.c (get_language),
	(athena_link_local_set_key):
	Pass a language code to g_key_file_set_locale_string() so that we can
	actually rename .desktop files.

2009-02-04  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-application.c: (create_window):
	Don't use unique_app_watch_window(), as we don't have a default
	window to present (#570377).

2009-02-02  Cosimo Cecchi  <cosimoc@pluto>

	* libathena-extension/athena-column.c:
	(athena_column_finalize), (athena_column_init),
	(athena_column_class_init):
	* libathena-extension/athena-menu.c: (athena_menu_finalize):
	* libathena-private/athena-cell-renderer-pixbuf-emblem.c:
	(athena_cell_renderer_pixbuf_emblem_class_init),
	(athena_cell_renderer_pixbuf_emblem_finalize):
	* libathena-private/athena-cell-renderer-text-ellipsized.c:
	(athena_cell_renderer_text_ellipsized_init),
	(athena_cell_renderer_text_ellipsized_class_init),
	(athena_cell_renderer_text_ellipsized_get_size):
	* libathena-private/athena-entry.c: (athena_entry_finalize),
	(athena_entry_key_press), (athena_entry_motion_notify),
	(athena_entry_button_press), (athena_entry_button_release),
	(athena_entry_selection_clear), (athena_entry_class_init):
	* libathena-private/athena-file.c: (athena_file_init),
	(athena_file_constructor), (finalize),
	(athena_file_class_init):
	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_finalize),
	(athena_icon_canvas_item_update),
	(athena_icon_canvas_item_class_init):
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_new):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-mime-application-chooser.c:
	(athena_mime_application_chooser_finalize),
	(athena_mime_application_chooser_destroy),
	(athena_mime_application_chooser_class_init),
	(athena_mime_application_chooser_init):
	* libathena-private/athena-open-with-dialog.c:
	(athena_open_with_dialog_finalize),
	(athena_open_with_dialog_destroy),
	(athena_open_with_dialog_class_init),
	(athena_open_with_dialog_init):
	* src/file-manager/fm-icon-container.c:
	* src/file-manager/fm-list-model.c: (fm_list_model_dispose),
	(fm_list_model_finalize), (fm_list_model_class_init):
	* src/file-manager/fm-tree-model.c: (fm_tree_model_finalize),
	(fm_tree_model_class_init):
	Use G_DEFINE_TYPE_* instead of hand-written athena_foo_get_type()
	functions where possible.

2009-02-02  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.25.4 ===

2009-02-02  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2009-02-02  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c
	(report_delete_progress): better fix for the singular/plural issue
	described in bug #551222; we now split the string into two parts,
	use ngettext() on both and concatenate them (#570141).

2009-02-01  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/Athena_shell.server.in: remove this, it's useless now that
	we don't use Bonobo anymore (#570125).

2009-01-31  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-directory-async.c (lacks_link_info),
	(monitor_includes_file), (link_info_done), (link_info_got_data),
	(link_info_start):
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c (athena_file_clear_info),
	(athena_file_should_show),
	(filter_hidden_and_backup_partition_callback),
	(athena_file_is_foreign_link):
	* libathena-private/athena-file.h:
	* libathena-private/athena-link.c (string_array_contains),
	(athena_link_get_link_info_given_file_contents):
	* libathena-private/athena-link.h:
	* src/file-manager/fm-desktop-icon-view.c
	(fm_desktop_icon_view_init):
	* src/file-manager/fm-directory-view.c (fm_directory_view_init),
	(fm_directory_view_should_show_file),
	(fm_directory_view_set_show_foreign):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-tree-model.c (should_show_file):
	Follow the "OnlyShowIn" and "NotShowIn" == GNOME keys for
	.desktop files,	when they are put on the desktop.
	Thanks to Federico Mena Quintero and Jared Moore (#338933).

2009-01-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-autorun.c: (handle_dialog_closure),
	(dialog_response_cb), (dialog_destroy_cb), (combo_box_changed):
	Don't use gtk_dialog_run to show the AthenaOpenWithDialog.
	That won't work, as we will spawn a GtkFileChooser later,
	eating all the mouse events on it if we do (#569651).

2009-01-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c:
	(seconds_count_format_time_units), (report_delete_progress),
	(report_copy_progress): make sure to use the correct singular
	or plural form for the time format when reporting a file operation
	progress detail.
	Thanks to Christian Neumair (#551222).

2009-01-28  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-directory.c:
	(athena_directory_notify_files_moved):
	Invalidate file attributes after it has been moved, so that
	they are refreshed properly (#555234).

2009-01-28  Cosimo Cecchi  <cosimoc@gnome.org>

	* icons/Makefile.am:
	* src/athena-notes-viewer.c: (athena_notes_viewer_init):
	Remove "note-indicator.png" and use the themable icon we just
	added to display the emblem in the sidebar.

2009-01-28  Cosimo Cecchi  <cosimoc@gnome.org>

	* data/icons/*:
	Bring icon handling to the 21th century.
	Add an emblem-note icon, this is copied from g-i-t "stock_note"
	icon right now, but we might change this later.
	* src/athena-application.c: (athena_application_init):
	add a lookup path for custom themable icons.

	This also fixes bug #569407. Thanks to Lapo Calamandrei for
	the tips on icon naming.

2009-01-27  Cosimo Cecchi  <cosimoc@gnome.org>

	* athena.desktop.in.in: set X-GNOME-AutoRestart=true, to make
	Athena restart automatically when it crashes (#569288).

2009-01-23  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-window-menus.c
	(menu_item_select_cb): don't rely on GTK+ implementation details
	when getting a GtkAction.
	Thanks to Christian Persch (#568880).

2009-01-22  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-file.c (athena_file_clear_info):
	Also free the description when clearing the file.

2009-01-22  Paolo Borelli  <pborelli@katamail.com>

	libathena-private/athena-file-private.c (finalize): free the
	description.

2009-01-22  Cosimo Cecchi  <cosimoc@gnome.org>

        * libathena-private/athena-icon-container.c:
        (snap_position): make sure we don't snap icons to a grid marker which
        is too near the right margin of the canvas (#527374).

2009-01-22  Cosimo Cecchi  <cosimoc@gnome.org>

        * MAINTAINERS: fix a typo.

2009-01-22  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-file-utilities.c
	(athena_unique_temporary_file_name):
	* libathena-private/athena-metafile.c (metafile_write_local):
	Use g_mkstemp() instead of mkstemp(). Pointed out by Paolo Borelli.

2009-01-22  Paolo Borelli  <pborelli@katamail.com>

	* eel/eel-gtk-extensions.[ch]: add utility function
	to get a GtkMenuToolButton's button

	* src/athena-window-menus.c:
	* src/athena-navigation-action.c:
	Use the above util function that doesn't leak the children
	list.

2009-01-20  A. Walton  <awalton@gnome.org>

	* src/athena-main.c (main):
	Bug 568503 – Misspelled word "progam"->"program"

2009-01-20  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in: we require gnome-desktop 2.25.5 now, due to the new
	GnomeBG crossfade API.

2009-01-20  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-window-slot.c: (athena_window_slot_dispose):
	Fix a crash when closing a window before it's fully populated.
	Part of bug #552859, patch by Ray Strode.

2009-01-19  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.25.3 ===

2009-01-19  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2009-01-15  Richard Hughes  <richard@hughsie.com>

	* libathena-private/athena-mime-actions.c:
	(search_for_application_dbus_call_notify_cb),
	(search_for_application_mime_type):
	We've been working with the KDE devs, and we've come up with a slightly
	changed specification that can be adopted by KPackageKit and also have
	room for expansion in the future. There's only a couple of things
	already using the old interface, athena being one of them.

	I've patched athena to convert from the old interface to the new
	interface. The new interface does not have the double confirm problem,
	and now respects the users session policy on interaction.

2009-01-14  A. Walton  <awalton@gnome.org>

	* src/file-manager/fm-ditem-page.c (create_page):
	Fix another crasher when attempting to get properties 
	on a damaged Desktop Entry file.

2009-01-13  A. Walton  <awalton@gnome.org>

	* src/file-manager/fm-empty-view.c (fm_empty_view_end_loading),
	(fm_empty_view_create), (fm_empty_view_register):
	Unbreak build when building with --enable-empty-view.
	Closes bug #558537. Patch by Emmanuel Fleury.

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-container.c:
        (get_icon_bounds_for_canvas_bounds):
	When calculating bounds, don't ignore visible but unmapped items, becase
	the root item is unmapped with the canvas, but we want to report the
	same bounds independently on the canvas mapped state.
	This caused problems when the canvas was unmapped due to being on an
	invisible notebook page navigation tabs case, causing the
	scrollbars to become invisible. (#542396)

2009-01-13  Matthias Clasen  <mclasen@redhat.com>

	Bug 567460 – AthenaTrashMonitor emits trash-state-changed too often
	
	* libathena-private/athena-trash-monitor.c (update_info_cb):
	Only emit ::trash-state-changed when the state actually changes.

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * src/athena-navigation-window-ui.xml:
        * src/athena-spatial-window-ui.xml:
	Remove Go to Burn menu items to avoid error spew.

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-debug-log.c:
        (athena_debug_logv):
	Make space for terminating zero

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-debug-log.c:
	Limit nr of URIs in log to 20 to avoid huge
	logs and bad performance for e.g. select all
	in a large dir.

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
	Fix typo in request_counter_remove_request (--, not ++)
	
2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Use the monitor and call_when_ready counts to avoid
	iterating over the potentially long lists.

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-private.h:
	Fixed type (& not &&).
	Also add some paranthesises to args for macro safety.

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
	Don't need the want_foo calls, can just pass in
	the request type directly now.

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Count all outstanding monitor and call_when_ready details

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-file.c:
	Convert Request from struct of gboolean to guin32 bitfield.
	This is both smaller and faster, plus it allows some further optimizations to come.

2009-01-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-icon-private.h:
	Only send selection_changed once when removing lots of files.

2009-01-13  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-slot.c (athena_window_slot_update_icon): 
	Only set window icon if it really changed.
	
2009-01-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-debug-log.c (athena_debug_log_with_file_list):
	Don't do conversion to uris unless debugging is enabled.
	(For performance reasons)

2009-01-13  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (fm_directory_view_notify_selection_changed):
	Don't get selection unless debugging is really turned on.
	(For performance reasons)

2009-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (file_changed_callback):
	Don't update emblems when trash dir changes.
	It changes a lot (due to file count attribute) but never
	changes writeability status.

2009-01-12  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-file.c (prepend_automatic_keywords):
	Trash files are automatically assumed read-only, 
	so we shouldn't	add read-only emblems to files in the trash.

2009-01-12  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-link.c
	(athena_link_get_link_icon_from_desktop):
	Fix last commit to actually patch the right part of the file.

2009-01-12  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-link.c
	(athena_link_get_link_info_given_file_contents):
	Fix a crasher on broken desktop entry files.
	Closes bug #567475.

2008-12-19  Alexander Larsson  <alexl@redhat.com>

        * src/athena-property-browser.c:
	Allow deleting of custom emblems. (#112292)
	Patch from DESSAI Imrane 

2008-12-16  Bastien Nocera  <hadess@hadess.net>

	* src/athena-window-menus.c:
	* src/athena-window-private.h:
	* src/athena-window.c (athena_window_constructor):
	Remove the CD/DVD creator from the places menu, and the
	places sidebar (Closes: #508384)

2008-12-15  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.25.2 ===

2008-12-15  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release
	
2008-12-15  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Remove eel-feature.h

2008-12-15  Alexander Larsson  <alexl@redhat.com>

        * test/Makefile.am:
        * test/test-eel-background.c: Added.
        * test/test-eel-editable-label.c: Added.
        * test/test-eel-image-scrolled.c: Added.
        * test/test-eel-image-table.c: Added.
        * test/test-eel-labeled-image.c: Added.
        * test/test-eel-pixbuf-scale.c: Added.
        * test/test-eel-widgets.c: Added.
        * test/test.h:
	Import eel tests

2008-12-15  Alexander Larsson  <alexl@redhat.com>

        * Makefile.am:
        * acconfig.h:
        * configure.in:
	* eel/
        * libathena-private/Makefile.am:
	Import eel into athena.

2008-12-15  Matthias Clasen  <mclasen@redhat.com>

	Bug 564207 – don't look for old kde trash

	* src/athena-application.c: Remove code that supports KDE2 
	style trash handling.

2008-12-15  Tomas Bzatek  <tbzatek@redhat.com>

	* libathena-private/athena-mime-actions.c:
	(activation_mount_not_mounted):
	Fix new windows not appearing after successful mount
	(needed for #524485)

2008-12-12  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-mime-actions.c
	(application_unhandled_file):
	Fix the build for OSes with format security turned on.
	(Ubuntu).

2008-12-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
        (search_for_application_dbus_call_notify_cb):
	Don't warn if we found no applications to install.
	
2008-12-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
	Ref the dbus proxy over the call, this means we actually get the callback, so
	remove the got_reply stuff.

2008-12-10  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
        (search_for_application_mime_type):
	Fix warning

2008-12-10  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
        * libathena-private/apps_athena_preferences.schemas.in:
        * libathena-private/athena-global-preferences.c:
        * libathena-private/athena-global-preferences.h:
        * libathena-private/athena-mime-actions.c:
	Support PackageConfig application install for unsupported mime types.
	Based on patch from Richard Hughes

2008-12-10  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        * libathena-private/athena-global-preferences.c:
        * src/athena-file-management-properties.c:
        * src/athena-file-management-properties.ui:
	Update the 2GB and 4GB thumbnail limits to the new prefs API and
	make sure they actually work.

2008-12-09  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (copy_move_file):
	Don't use G_FILE_COPY_ALL_METADATA, as we changed glib to
	copy the file by default (#515777)

2008-12-09  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-global-preferences.c:
	10GB overflows the uint, add 2 and 4 GB instead.

2008-12-09  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-global-preferences.c:
	Add 10GB size.

2008-12-08  Tomas Bzatek  <tbzatek@redhat.com>

	* libathena-private/athena-mime-actions.c:
	(activation_mount_not_mounted):
	Fix callback connection to GtkMountOperation

2008-12-06  Cosimo Cecchi  <cosimoc@gnome.org>

	* cut-n-paste-code/libegg/eggtreemultidnd.c:
	* cut-n-paste-code/libegg/eggtreemultidnd.h:
	* libathena-extension/athena-menu.c:
	* libathena-private/athena-directory-notify.h:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-file.c:
	* libathena-private/athena-icon-info.h:
	* libathena-private/athena-idle-queue.h:
	* libathena-private/athena-monitor.h:
	* libathena-private/athena-search-engine-simple.c:
	* src/file-manager/fm-list-model.c:
	* src/file-manager/fm-list-model.h:
	* src/file-manager/fm-list-view.c:
	* src/athena-emblem-sidebar.h:
	* src/athena-notebook.c:
	* src/athena-notebook.h:
	Use single GLib/GTK+ includes. Patch by Maxim Ermilov (#560432).

2008-12-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.25.1 ===

2008-12-01  Alexander Larsson  <alexl@redhat.com>

        * src/athena-main.c:
	Don't crash if athena.desktop is not installed (i.e. at make check)

2008-12-01  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2008-11-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in: completely remove librsvg checks.

2008-11-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-application.c: (athena_application_finalize):
	Don't unref the SMClient (#561402).

2008-11-18  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-main.c: (main):
	* src/athena-window-slot.c: (athena_window_slot_dispose):
	Plug two memory leaks.

2008-11-11  A. Walton  <awalton@gnome.org>

	* src/file-manager/fm-directory-view.c
	(metadata_for_directory_as_file_ready_callback),
	(metadata_for_files_in_directory_ready_callback):
	Remove two duplicate asserts.
	
	Patch by Rui Matos (bug #555044).

2008-11-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-container.c:
        (athena_icon_container_ensure_interactive_directory):
	Set correct hint on search popup window. (#536804)

	Patch from Danny Baumann

2008-10-28  Cosimo Cecchi  <cosimoc@gnome.org>

        * src/athena-window-menus.c:
        (action_about_athena_callback):
	Update the about dialog description.
	Thanks to Matthew Paul Thomas (#551483).

2008-10-27  Christian Persch  <chpe@gnome.org>

	* libathena-extension/athena-location-widget-provider.h:
	* libathena-extension/athena-menu-provider.h:
	* libathena-extension/athena-property-page.h: Only include
	gtk/gtk.h, to allow extensions to build with
	*_DISABLE_SINGLE_INCLKUDES. Bug #558070.

2008-10-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        * libathena-private/athena-icon-info.[ch]:
	Manually fall back to default fallback icon for
	files if not found. Goes with the corresponding
	glib/gvfs change to not add the fallback icon to
	the end of files icons. (#528320)

2008-10-22  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c
	(athena_file_get_symbolic_link_target_uri/path):
	Don't assert on symbolic links always marked as symlinks.
	Some broken backends will give this (like the archive backend).
	Fixes crash in #547468

2008-10-22  A. Walton  <awalton@gnome.org>

	* src/file-manager/fm-tree-model.c (fm_tree_model_get_column_type),
	(fm_tree_model_get_value):
	* src/file-manager/fm-tree-model.h:
	* src/file-manager/fm-tree-view.c (create_tree):
	Use normal weighting in the tree view sidebar. Closes bug #311786.

2008-10-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-tree-view.c: (create_popup_menu):
	Mark two strings for translation (#557156).

2008-10-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
        (pause_activation_timed_cancel):
        (unpause_activation_timed_cancel):
        (activate_mount_op_active):
        (activate_files):
	Don't show timeout-based cancel when showing the "run or display"
	dialog. (#539954)

2008-10-18  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	Add a comment for translators (#548389).

2008-10-17  Andre Klapper  <a9016009@gmx.de>

	* /src/file-manager/fm-tree-view.c:
	Fix broken mnemonic for "Create _Folder" context menu entry (bug #555016)

2008-10-17  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
        Add athena_directory_has_active_request_for_file which returns true
	if monitoring or call_when_ready the file or all the files in the directory.
        * libathena-private/athena-directory.c:
        (athena_directory_add_file):
	When adding a file to a directory, if there is an outstanding request
	for the file, add it to the work queue so we make sure to do i/o on it.
	Otherwise we could for instance block a call_when_ready with file=NULL
	because we're waiting for something to happen on all files in the dir
	but the newly added file never has any i/o happen to it.

2008-10-17  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-bookmark.c:
        (bookmark_file_changed_callback):
	Don't immediately recreate AthenaFile for the
	bookmark when the file is deleted, as this can
	cause loops if the file is monitored.
	See https://bugzilla.redhat.com/show_bug.cgi?id=465479

2008-10-17  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-manage-views.c
	(athena_window_slot_open_location_full):
	Don't unref NULL, which can happen if !do_load_location

2008-10-17  Alexander Larsson  <alexl@redhat.com>

        * src/athena-spatial-window.c:
        (athena_spatial_window_save_scroll_position):
        (athena_spatial_window_save_show_hidden_files_mode):
        (real_window_close):
	Don't access NULL slot->viewed_file if its not been set yet.

2008-10-13  Nelson Benítez León  <nbenitez@svn.gnome.org>

	* libathena-private/athena-file-operations.c
	(copy_move_file)
	(copy_move_directory)
	(copy_files):
	Pass G_FILE_COPY_TARGET_DEFAULT_PERMS flag to copy
	operations when the source file is in a readonly
	filesystem (eg. CDROM). Fixes #550816.

2008-10-13  Christian Persch  <chpe@gnome.org>

	* src/athena-image-properties-page.c: Plug a mem leak. Bug #552691.

2008-10-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-application-chooser.c:
	Allow resetting file associations (#545356)
	Patch from Matthias Clasen 

2008-10-13  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
	Require glib 2.19.0
	
        * libathena-private/athena-open-with-dialog.c:
	Allow removal of custom applications (#545354)
	Patch from Matthias Clasen

2008-10-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-open-with-dialog.c:
        (add_or_find_application):
	Don't set default when opening with other app, just
	add to open with list.

2008-10-12  Nelson Benítez León  <nbenitez@svn.gnome.org>

	* libathena-private/athena-dnd.c
	(athena_drag_default_drop_action_for_icons):
	Add new function source_is_deletable.
	When DnD'ing, change the drop action to COPY instead of MOVE, when
	the source is not deletable. Fixes #314139.

2008-10-12  Nelson Benítez León  <nbenitez@svn.gnome.org>

	* src/file-manager/fm-icon-view.c
	(set_sort_criterion_by_sort_type)
	(action_reversed_order_callback):
	Reveal the selection after the user sorts by some type or clicks the
	"reverse order" sort action. Fixes #45588.

2008-10-11  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c
	(make_file_name_valid_for_dest_fs):
	Chop trailing space characters when moving to FAT file system. Fixes #555813.

2008-10-09  Alexander Larsson  <alexl@redhat.com>

        * src/athena-spatial-window.c:
        (real_window_close):
        (athena_spatial_window_class_init):
	Save spatial geometry on window close, not slot close.
	Slot close is to late in the close by window destry case,
	as the windows have then been unrealized.

2008-10-09  Alexander Larsson  <alexl@redhat.com>

	* src/athena-main.c (main):
	Make sure uri list is NULL terminated

2008-10-09  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-horizontal-splitter.c:
        (athena_horizontal_splitter_button_press):
        (athena_horizontal_splitter_button_release):
	Don't toggle the splitter when dragging (#555619)
	Patch from Christoph Reiter
	
2008-10-09  Alexander Larsson  <alexl@redhat.com>

        * cut-n-paste-code/libegg/eggdesktopfile.c:
        * cut-n-paste-code/libegg/eggdesktopfile.h:
        * cut-n-paste-code/libegg/eggsmclient-xsmp.c:
        * cut-n-paste-code/libegg/eggsmclient.c:
	Update EggSMClient from libegg

2008-10-09  Alexander Larsson  <alexl@redhat.com>

        * src/athena-property-browser.c:
        (athena_property_browser_drag_data_get):
	Don't use eel_gdk_color_parse anymore. We don't have any colors
	left not supported by gdk_color_parse.
	
2008-10-08  Christian Persch  <chpe@gnome.org>

	* libathena-private/athena-mime-application-chooser.c:
	(create_tree_view), (refresh_model): Put the GIcon in the tree model
	and make the cell renderer display it directly instead of manually
	resolving the GIcon to a pixbuf and putting that into the model. Bug
	#552682.

2008-10-07  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
	Require trunk eel.
	Drop libgnome* and librsvg deps.
	
        * libathena-private/athena-customization-data.c:
        (athena_customization_data_get_next_element_for_display):
        * libathena-private/athena-icon-canvas-item.c:
        (real_map_pixbuf):
        * src/athena-property-browser.c:
        (make_drag_image):
	Use librsvg indirectly via gdk-pixbuf loader.
	
        * libathena-private/athena-thumbnails.c:
	Use thumbnail factory from gnome-desktop.
	
        * libathena-private/athena-undo.c:
        (athena_undo_get_undo_manager):
	Kill references to gnome canvas.
	
        * libathena-private/athena-vfs-file.c:
	Don't include removed eel-mount-operation.h header

        * src/file-manager/fm-properties-window.c:
        (update_preview_callback):
	Use thumbnail utils from gnome-desktop.

        * src/Makefile.am:
        * src/athena-bookmarks-window.c:
        * src/athena-bookmarks-window.glade: Removed.
        * src/athena-bookmarks-window.ui: Added.
        * src/athena-file-management-properties.c:
        * src/athena-file-management-properties.glade: Removed.
        * src/athena-file-management-properties.ui: Added.
	Switch from libglade to gtkbuilder.

        * libathena-private/athena-file-operations.c:
        * src/athena-emblem-sidebar.c:
        * src/athena-navigation-window.h:
        * test/test-athena-wrap-table.c:
        * test/test.c:
        * test/test.h:
	Drop old unused libgnome/librsvg includes

2008-10-07  Alexander Larsson  <alexl@redhat.com>

        * src/athena-property-browser.c:
	Don't use eel_gnome_icon_selector_new()
	Instead just use file selector with preview.

2008-10-06  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-ditem-page.c:
	Replace GnomeDesktopItem use with GKeyFile

2008-10-06  Matthias Clasen  <mclasen@redhat.com>

	* libathena-private/athena-open-with-dialog.c (set_uri_and_type):
	Fix the build

2008-10-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 553084 – leaks content type description

	* libathena-private/athena-open-with-dialog.c (set_uri_and_type):
	Don't leak the content type description.

2008-10-06  Matthias Clasen  <mclasen@redhat.com>

	Bug 553073 – invalid strcmp

	* libathena-private/athena-file.c (update_info_internal):
	Use eel_ref_str_peek where appropriate.

2008-10-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-link.[ch]:
        * src/file-manager/fm-properties-window.c:
	Use GKeyFile instead of GnomeDesktopItemp

2008-10-06  Alexander Larsson  <alexl@redhat.com>

        * src/athena-main.c:
	Don't set application name twice (avoids warning)

2008-10-06  Cosimo Cecchi  <cosimoc@gnome.org>

        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-mime-actions.c:
        * src/file-manager/fm-directory-view.c:
        * src/athena-connect-server-dialog-main.c:
        * src/athena-window-manage-views.c:
	use GtkMountOperation instead of EelMountOperation

2008-10-06  Cosimo Cecchi  <cosimoc@gnome.org>

        * libathena-private/athena-customization-data.c:
        * libathena-private/athena-dnd.c:
        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-global-preferences.c:
        * libathena-private/athena-icon-dnd.c:
        * libathena-private/athena-icon-private.h:
        * libathena-private/athena-monitor.c:
        * src/file-manager/fm-desktop-icon-view.c:
        * src/file-manager/fm-ditem-page.c:
        * src/file-manager/fm-error-reporting.h:
        * src/file-manager/fm-list-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/athena-history-sidebar.c:
        * src/athena-image-properties-page.c:
        * src/athena-information-panel.c:
        * src/athena-location-bar.c:
        * src/athena-location-entry.c:
        * src/athena-main.c:
        * src/athena-navigation-window-menus.c:
        * src/athena-navigation-window.c:
        * src/athena-places-sidebar.c:
        * src/athena-window-manage-views.c:
        * src/athena-window-toolbars.c:
	Remove unnecessary includes of libgnome

2008-10-06  Cosimo Cecchi  <cosimoc@gnome.org>

        * src/athena-property-browser.c:
	Don't use gnome_icon_entry

2008-10-06  Alexander Larsson  <alexl@redhat.com>

	Based on patch from  Cosimo Cecchi
	
        * src/file-manager/fm-tree-view.c:
        * src/athena-emblem-sidebar.c:
	Use gtk_menu_popup instead of gnome_popup_menu_do_popup_modal
	Don't use GNOME_PAD

2008-10-06  Cosimo Cecchi  <cosimoc@gnome.org>

        * libathena-private/athena-bookmark.c:
        * libathena-private/athena-desktop-directory.c:
        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-merged-directory.c:
        * libathena-private/athena-module.c:
        * libathena-private/athena-module.h:
        * libathena-private/athena-search-directory.c:
        * libathena-private/athena-signaller.c:
        * libathena-private/athena-tree-view-drag-dest.c:
        * src/file-manager/fm-icon-container.c:
        * src/athena-application.c:
        * src/athena-desktop-window.c:
        * src/athena-file-management-properties-main.c:
        * src/athena-zoom-control.c:
	Use G_DEFINE_TYPE instead of libgnome macros.

2008-10-06  Cosimo Cecchi  <cosimoc@gnome.org>

        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/athena-bookmarks-window.c:
        * src/athena-connect-server-dialog.c:
        * src/athena-file-management-properties.c:
        * src/athena-location-dialog.c:
	Use gtk_show_uri instead of gnome_help

2008-10-06  Cosimo Cecchi  <cosimoc@gnome.org>

        * src/athena-application.c:
        (initialize_kde_trash_hack):
	Replace GnomeConfig use with GKeyFile

2008-10-06  Cosimo Cecchi  <cosimoc@gnome.org>

        * src/athena-window-menus.c:
        (action_athena_manual_callback):
	Use gtk_show_uri instead of gnome_help
	
        * src/athena-file-management-properties-main.c:
        * src/athena-connect-server-dialog-main.c:
        * src/athena-autorun-software.c:
        * test/test-athena-mime-actions-set.c:
        * test/test-athena-mime-actions.c:
	Use GOption instead of GnomeProgram
	
        * src/athena-property-browser.c:
	Use GtkColorButton instead of GnomeColorPicker
	Use gtk_show_uri instead of gnome_help

2008-10-02  Alexander Larsson  <alexl@redhat.com>

        * Makefile.am:
        * athena-browser.desktop.in.in:
        * athena.desktop.in.in:
	Renamed athena.desktop to athena-browser.desktop
	(this is what it does, launch a browser window with no desktop)
	Created new NoDisplay athena.desktop file that is used
	for autostarting athena from gnome-session.
	
        * configure.in:
	Pull in the right cflags/libs for libegg
	Add athena-browser.desktop.in to output
	
        * cut-n-paste-code/libegg/Makefile.am:
        * cut-n-paste-code/libegg/eggdesktopfile.[ch]: Added.
        * cut-n-paste-code/libegg/eggsmclient-private.h: Added.
        * cut-n-paste-code/libegg/eggsmclient-xsmp.c: Added.
        * cut-n-paste-code/libegg/eggsmclient.[ch]: Added.
	Import eggsmclient from libegg.
	Save data in desktop file instead of a separate file as per the
	new gnome-session.
	
        * cut-n-paste-code/libegg/eggtreemultidnd.c:
	Minor update from libegg
	
        * src/athena-application.[ch]:
	Use eggsmclient for session handling instead of gnome-client.
	
        * src/athena-main.c:
	Don't use gnome_program, instead use eggsmsession and
	g_option_context_parse directly.
	This removes support for some internal commandline arguments
	that are not used anymore.

2008-10-02  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-extension/libathena-extension-uninstalled.pc.in:
	Remove gnome-vfs from the required libs.

2008-10-01  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
	Remove direct deps on bonobo, bonobo-activation, orbit2, startup-notification
	Add dependency on libunique
	
        * src/Makefile.am:
        * src/athena-shell-interface.idl:
        * src/athena-shell.[ch]:
	Remove AthenaShell
	
        * src/athena-application.[ch]:
	Make AthenaApplication a normal GObject
	Remove AthenaShell use.
	Implement unique application functionallity using libunique
	Remove manual startup notification handling (mostly handled by libunique)
	
        * src/athena-main.c:
	Remove bonobo initialization
	Remove manual startup notification handling
	Move command line arg to uri parsing here
	Remove weird idle handling now that we don't use bonobo anymore

        * libathena-private/athena-undo-manager.c:
        * libathena-private/athena-undo-manager.h:
        * libathena-private/athena-undo.c:
        * src/athena-window-private.h:
	Remove all leftover spurious use of bonobo
	
        * src/athena-window-slot.h:
        * src/athena-desktop-window.c:
        * src/athena-location-dialog.c:
        * src/athena-window-bookmarks.c:
	Add required includes of gi18n.h
	
2008-10-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.25.1.
	Stable version lives on the gnome-2-24 branch.
	
2008-09-28  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_set_zoom_level):
	Invalidate label, rather than its allocated size. Fixes zoom level
	changes not being applied to label sizes.

2008-09-27  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-directory-async.c
	(link_info_got_data):
	Pass link info's URI to
	athena_link_get_link_info_given_file_contents().

	* libathena-private/athena-link.c
	(athena_link_get_link_uri_from_desktop),
	(athena_link_get_link_info_given_file_contents):
	* libathena-private/athena-link.h:
	Add an input parameter for the link info's URI to
	athena_link_get_link_info_given_file_contents().
	In athena_link_get_link_uri_from_desktop(), when
	a desktop icon has an "URI=filename" entry resolve
	it like a symbolic link name relative to the link
	info parent. Ideally, we'd have
	g_file_parse_name_relative() which could do that for us,
	but it would mangle URI's fragments and queries anyway.

2008-09-24  Christian Neumair  <cneumair@gnome.org>

	* src/athena-application.c (count_slots_of_windows),
	(get_first_navigation_slot), (mount_removed_callback):
	* src/athena-navigation-window-slot.c
	(athena_navigation_window_slot_should_close_with_mount):
	* src/athena-navigation-window-slot.h:
	When unmounting, close all slots that only displayed locations on the
	mount. Never close all open slots, though. 

2008-09-24  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in:
	* libathena-private/athena-file-operations.c:
	(copy_move_directory), (copy_move_file), (copy_files),
	(move_files):
	Revert latest commit, as we can't depend on GLib 2.19.0 before
	branching.

2008-09-22  Nelson Benítez León  <nbenitez@svn.gnome.org>

	* libathena-private/athena-file-operations.c
	(copy_move_file)
	(copy_move_directory)
	(copy_files):
	Pass G_FILE_COPY_TARGET_DEFAULT_PERMS flag to copy
	operations when the source file is in a readonly
	filesystem (eg. CDROM). Fixes #550816.

	* configure.in: Bump required glib version to 2.19.0
	to make use of aforementioned GFileCopyFlag.

2008-09-22  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c
	(athena_file_get_emblem_icons):
	* libathena-private/athena-icon-info.c:
	* libathena-private/athena-icon-info.h:
	Support emblem file names that do not start with “emblem-”. Fixes
	#350643.

2008-09-22  Christian Neumair  <cneumair@gnome.org>

	* src/athena-window-slot.c
	(athena_window_slot_update_query_editor):
	Add weak ref for query editor pointer.

2008-09-22  Christian Neumair  <cneumair@gnome.org>

	* configure.in: post-release bump to 2.24.1.

=== athena 2.24.0 ===

2008-09-22  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

2008-09-22  Christian Neumair  <cneumair@gnome.org>

	* src/athena-window-manage-views.c:
	* src/athena-window-manage-views.h:
	* src/athena-window.c (athena_window_destroy),
	(athena_window_close_slot), (athena_window_slot_close):
	Remove athena_window_manage_views_destroy(), since everything it
	does is achieved by athena_window_close_slot(). Also ensure that
	slots are removed from the active slot history as they are closed.
	Fixes #553081.

2008-09-18  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file.c: (finalize),
	(athena_file_invalidate_extension_info_internal):
	Don't leak the list of pending info providers (#552310).

2008-09-17  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-list-model.c
	(fm_list_model_multi_drag_data_get),
	(fm_list_model_get_drag_target_list):
	* src/file-manager/fm-list-model.h:
	* src/file-manager/fm-list-view.c (motion_notify_callback):
	Enable text drag target for list view. Fixes #552474.

2008-09-17  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c (athena_file_rename):
	When deciding whether name actually changed, compare target
	filename with display name for desktop files, and desktop icon
	files, instead of comparing it with the filename.
	Fixes #552112.

2008-09-16  Christian Neumair  <cneumair@gnome.org>

	* src/athena-application.c (mount_removed_callback):
	Let navigation slot go home, instead of its window. Properly
	initialize window variable.

2008-09-16  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c
	(athena_file_compare_for_sort_internal),
	(athena_file_compare_for_sort),
	(athena_file_compare_for_sort_by_attribute_q):
	Also sort folders before files when the sort criterion is reversed.
	Fixes #310919.

2008-09-16  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-autorun.c
	(do_autorun_for_content_type):
	Center autorun dialog on screen.

2008-09-13  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-properties-window.c (file_has_prefix),
	(directory_contents_value_field_update):
	Don't count file size twice if a folder and a nested file is selected
	at once. Fixes #552015.

2008-09-12  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_set_is_visible),
	(athena_icon_canvas_item_invalidate_label):
	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-icon-container.c
	(invalidate_labels), (athena_icon_container_set_layout_mode),
	(athena_icon_container_set_label_position),
	(athena_icon_container_set_font),
	(athena_icon_container_set_font_size_table),
	(athena_icon_container_set_all_columns_same_width):
	Add athena_icon_canvas_item_invalidate_label(), which removes the
	associated PangoLayout - used when resetting attributes, e.g. when the
	zoom level changes or when switching from “text below” to “text
	besides” mode. Fixes #551862.

2008-09-12  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-directory.c
	(athena_directory_is_local):
	Always assume that directories in trash are local. Fixes #546353.
	Thanks to lvaro Vilanova Vidal.

2008-09-10  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-icon-container.c
	(fm_icon_container_get_icon_text_attributes_from_preferences):
	Use eel_preferences_add_auto_string_array_as_quarks(), instead of
	registering a custom callback function - which is not guaranteed to be
	run before other (instance) callbacks. Thanks to Cosimo Cecchi for the
	problem analysis. Fixes #551576.

	* configure.in:
	Depend on eel 2.24.0.

2008-09-08  Christian Neumair  <cneumair@gnome.org>

	* configure.in: post-release bump to 2.24.0.

=== athena 2.23.92 ===

2008-09-08  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

2008-09-08  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c (select_range),
	(keyboard_move_to), (handle_icon_button_press):
	Allow to select range additively when pressing ctrl and shift, i.e.
	don't unselect the old selection. Fixes #410497, at least for icon
	view.

2008-09-06  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c
	(athena_file_is_date_sort_attribute_q):
	* libathena-private/athena-file.h:
	Add athena_file_is_date_sort_attribute_q().

	* src/file-manager/fm-list-view.c
	(sort_criterion_changes_due_to_user),
	(sort_column_changed_callback):
	When manually switching to a date column, or to the default column
	with “default_sort_in_reverse_order” active, auto-reverse sort order.
	Fixes #533189.

2008-09-05  Matthias Clasen  <mclasen@redhat.com>

	Bug 550009 – small leaks

	* libathena-private/athena-directory-background.c: Plug 
	three small memory leaks.

2008-09-04  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in: Bump GTK+ required version to 2.13.0.
	* libathena-private/athena-program-choosing.c:
	(athena_launch_application), (athena_launch_desktop_file):
	* src/athena-connect-server-dialog-main.c: (show_uri):
	Use GdkAppLaunchContext instead of EelAppLaunchContext.
	This also fixes bug #550864.

2008-09-04  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(finish_adding_new_icons):
	Set layout timestamp when fixating semi-positioned icons. Fixes
	#550807.

2008-09-04  Robert-André Mauchin  <zebob.m@pengzone.org>

	* po/LINGUAS:
	* po/ps.po: Added Pashto translations by Zabeeh Khan.

2008-09-04  Gilles Dartiguelongue  <gdartigu@svn.gnome.org>

	* configure.in:
	* docs/reference/Makefile.am:
	* docs/reference/libathena-extension/Makefile.am:
	* docs/reference/libathena-extension/libathena-extension-docs.x
	ml:
	* libathena-extension/athena-column.c:
	* libathena-extension/athena-menu-item.c:
	* libathena-extension/athena-property-page.c:
	(athena_property_page_get_type):
	* libathena-extension/athena-property-page.h:
	include some documentation, bug #396929.

2008-09-03  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c (create_job):
	Use file name duplication helper, unless we create directories. Also
	consider maximal file name length. Fixes #240116.

2008-09-03  Christian Neumair  <cneumair@gnome.org>

	* src/athena-navigation-window-menus.c
	(forget_history_if_confirmed):
	Remove scary secondary dialog message. Fixes #550567.
	Also remove easter egg, which isn't translatable.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* configure.in: post-release bump to 2.23.92.

=== athena 2.23.91 ===

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_update_scroll_region),
	(athena_icon_container_get_first_visible_icon),
	(athena_icon_container_scroll_to_icon):
	Adapt manual layout borders to auto layout borders, improve horizontal
	RTL scrolling to items. Unfortunately, programmatical scrolling is
	still somewhat broken due to subsequent relayouts as the horizontal
	scroll bar is shown/hidden.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(rightmost_in_top_row), (keyboard_right), (keyboard_left),
	(keyboard_down), (keyboard_up):
	In LTR mode, always jump to the top-left icon if no icon is selected.
	In RTL mode, always jump to the top-right icon if no icon is selected.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_scroll_to_icon):
	Also reveal entire rows/columns, and ensure a nice padding around icons.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_update_scroll_region):
	Fix RTL scroll region calculation.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c (key_press_event):
	Reset event window before freeing event.

2008-09-01  Bastien Nocera  <hadess@hadess.net>

	* src/file-manager/athena-audio-mime-types.h: Update with
	latest changes from Totem, we can preview midi, XM, speex
	and FLAC files

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(item_get_canvas_bounds), (icon_get_row_and_column_bounds),
	(reveal_icon), (athena_icon_container_update_scroll_region),
	(lay_down_icons_horizontal):
	Improve icon view and compact view appearance:

	Always reveal entire rows and columns, i.e. ensure that all items
	are displayed, and a little safety padding around them is displayed.

	Increase vertical top and bottom container space for vertical layout,
	and horizontal bottom container space for horizontal layout.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* src/athena-application.c (volume_added_callback):
	Make autorun work for blank CDs. Fixes #548221. Thanks to Jerry Yu
	<jijun.yu@sun.com>.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c
	(confirm_empty_trash), (prompt_empty_trash):
	Use "Empty Trash" buttons in empty trash dialogs. Fixes #524020.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-customization-data.c
	(format_name_for_display), (load_name_map_hash_table):
	* src/file-manager/fm-directory-view.c
	(add_template_to_templates_menus):
	* src/athena-property-browser.c
	(athena_property_browser_drag_data_get),
	(make_properties_from_directories):
	* test/test-athena-wrap-table.c (main):
	Strip extensions using eel_filename_strip_extension(). Fixes #309510.
	Thanks to Paolo Borelli <pborelli@katamail.com> and Jared Moore
	<jaredm@gmx.com>.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	Require eel 2.23.91.

	* libathena-private/athena-icon-info.c
	(athena_icon_info_lookup):
	Use eel_gdk_pixbuf_load_from_stream_at_size() for loading SVG icons at
	the desired size. Fixes #529371.

2008-09-01  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c (done_loading):
	Only report that loading is complete and schedule selection 
	if all files are seen. Fixes #421759.

2008-08-31  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-icon-container.c: (key_press_event):
	Don't leak a GdkEvent.
	Thanks to Huang Peng (#548448).

2008-08-31  Christian Neumair  <cneumair@gnome.org>

	* src/athena-file-management-properties.glade:
	Modify "Behavior" category on "Behavior" tab: Use 12 pixels of
	vertical padding between click and window preferences. Fixes #158802.

2008-08-31  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-names.h:
	* src/file-manager/fm-directory-view.c (real_update_location_menu),
	(real_update_menus):
	* src/file-manager/fm-tree-view.c (create_popup_menu):
	Use "edit-delete" icon for delete actions, and "user-trash-full" icon
	for trash actions. Partially fixes #325945.
	Also make some mnemonics consistent.

2008-08-31  Christian Neumair  <cneumair@gnome.org>

	* src/athena-main.c (main):
	Detect restart requests by the session manager (i.e. after crashes),
	only show default window if no desktop window is shown. Fixes #99221.

2008-08-31  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c
	(get_file_names_as_parameter_array), (run_script_callback):
	Get script file name as script parameter relative to current
	view directory. Fixes #320215.

2008-08-30  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-icon-view.c (fm_icon_view_set_property):
	Set icon layout to T_B_R_L iff widget's text direction is RTL.

2008-08-30  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c:
	Add T_B_R_L to IS_COMPACT_VIEW() macro.

	* libathena-private/athena-icon-container.c
	(lay_down_one_column), (compare_icons_horizontal),
	(compare_icons_vertical), (previous_column_highest),
	(previous_column_lowest), (keyboard_right), (keyboard_left),
	(keyboard_down), (keyboard_up):
	Support vertical icon container RTL layout. Make RTL keynav useful.
	For wrap-around on pressing the down button in RTL mode
	compare_icons_horizontal() and compare_icons_vertical() had to be
	added for not breaking previous_column_highest(). I.e. consider both
	coordinates separately. There is probably a sort algorithm bug involved
	that only occurs in this situation.

2008-08-30  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c (get_cmp_point_x),
	(compare_with_start_row), (compare_with_start_column),
	(next_row_rightmost), (next_column_bottommost),
	(same_column_below_highest), (keyboard_home), (keyboard_end),
	(record_arrow_key_start), (keyboard_arrow_key), (keyboard_right),
	(keyboard_left), (keyboard_down), (keyboard_up),
	(button_press_event):
	Split out fallback function that determine the rightmost icon on the
	bottom row, which used to be inside same_column_below_highest().
	Add a similar concept for the vertical layout.

	Vertical layout: Move to the last item when pressing the right arrow
			 key in the penultimate column, below the last item.
				next_row_rightmost().

	Horizontal layout: Move to the last item when pressing the down arrow
			   key in the penultimate row, right to the last item.
				next_column_bottommost().

	Remove arrow_key_start, and use arrow_key_axis_x/_y, for
	horizontal/vertical position constraints in
	compare_with_start_column() and compare_with_start_row().

	Fixes #549686, at least for LTR.

	* libathena-private/athena-icon-private.h:
	Remove unused arrow_key_axis and arrow_key_start variables.

2008-08-28  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-directory-view.c:
	(update_restore_from_trash_action):
	Fix a typo in a plural string.
	Patch by Petr Kovar (#549662).

2008-08-25  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(icon_set_position):
	Fix icon container size calculation (consider margins),
	use unified container clamping code for RTL and LTR, that considers
	the entire item dimensions, instead of measuring just the icon
	rectangle.

2008-08-24  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-directory.c
	(athena_directory_schedule_position_set):
	* libathena-private/athena-file.c (get_time_from_time_string),
	(athena_file_get_time_metadata),
	(athena_file_set_time_metadata):
	* libathena-private/athena-file.h:
	* libathena-private/athena-icon-container.c
	(lay_down_icons_vertical_desktop),
	(athena_icon_container_class_init),
	(athena_icon_container_instance_init),
	(athena_icon_container_clear), (finish_adding_new_icons),
	(is_old_or_unknown_icon_data), (athena_icon_container_add),
	(athena_icon_container_begin_loading),
	(store_layout_timestamps_now),
	(athena_icon_container_end_loading),
	(athena_icon_container_get_store_layout_timestamps),
	(athena_icon_container_set_store_layout_timestamps):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-dnd.c (handle_local_move):
	* libathena-private/athena-icon-private.h:
	* libathena-private/athena-metadata.h:
	* src/file-manager/fm-desktop-icon-view.c
	(fm_desktop_icon_view_init):
	* src/file-manager/fm-directory-view.c (done_loading),
	(display_pending_files), (fm_directory_view_end_loading),
	(fm_directory_view_stop), (fm_directory_view_class_init):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c (fm_icon_view_add_file),
	(fm_icon_view_begin_loading), (fm_icon_view_end_loading),
	(fm_icon_view_screen_changed), (get_stored_layout_timestamp),
	(store_layout_timestamp), (create_icon_container):
	No more overlapping desktop icons.

	Implement a layout timestamp concept where each file on the desktop
	and the desktop directory itself is timestamped when a full layout
	happened. Iff files were not part of the last layout (or added more
	recently, through DND), they are treated as being “semi-positioned“
	(cf. 2005-11-07).
	This means that they may be freely shifted around, starting from their
	last position, until they don't overlap and fully laid out items.
	Should inter alia fix #330298.

2008-08-24  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(find_empty_location), (lay_down_icons_vertical_desktop):
	Only use relative item measures for bounds check until absolute item
	positions are figured out.

2008-08-22  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(prepare_pango_layout_for_draw), (draw_label_text):
	Always clear text background and display entire text
	if an icon is prelit or has the keyboard focus.

2008-08-22  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_invalidate_label_size),
	(athena_icon_canvas_item_set_property), (compute_text_rectangle),
	(athena_icon_canvas_item_update_bounds), (layout_get_full_size),
	(layout_get_size_for_layout), (prepare_pango_layout_width),
	(prepare_pango_layout_for_measure_entire_text),
	(prepare_pango_layout_for_draw), (measure_label_text),
	(draw_label_text), (create_label_layout),
	(athena_icon_canvas_item_get_bounds_for_entire_item),
	(athena_icon_canvas_item_ensure_bounds_up_to_date),
	(athena_icon_canvas_item_get_text_rectangle),
	(athena_icon_canvas_item_accessible_get_offset_at_point):
	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-icon-container.c
	(icon_get_bounding_box), (get_icon_bounds_for_canvas_bounds),
	(get_all_icon_bounds),
	(athena_icon_container_update_scroll_region),
	(compare_icons_by_position), (placement_grid_mark_icon),
	(find_empty_location), (lay_down_icons_vertical_desktop),
	(finish_adding_new_icons):
	Rework large chunks of canvas item text handling. Split text drawing
	and measuring function.

	Always calculate the size required to render the entire layout, then
	limit the number of lines to the allowed maximum.

	Introduce new bound calculation semantics. Introduce three item and
	text size usage and calculation contexts:
		layout: used for grid layout algorithms (ex. horizontal auto
		layout)

		entire text: for displaying the entire text (ex. canvas bound
		calculation for scroll area)

		display: actually used size (ex. text drawing)

2008-08-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Don't show "Browse Folders" in spatial mode if no folders are
	selected.
	Patch by Paweł Paprota (#351431).

2008-08-21  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(layout_get_full_size), (draw_or_measure_label_text):
	* libathena-private/athena-icon-container.c
	(athena_icon_container_constructor),
	(athena_icon_container_get_max_layout_lines_for_pango),
	(athena_icon_container_get_max_layout_lines):
	* libathena-private/athena-icon-container.h:
	Add helper for getting max. number of layout lines, which does not use
	the negative PangoLayout height convention. Use it in
	layout_get_full_size() instead of hardcoding three lines.
	Only connect GConf text ellipsis preferences container callbacks while
	the containers are alive.

2008-08-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-properties-window.c:
	(value_field_update_internal):
	Add context for translators.
	Thanks to Bob Mauchin (#548446).

2008-08-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	Fix typo in the schemas type description.
	Patch by F. Steinel (#548740).

2008-08-20  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(draw_or_measure_label_text):
	Clear underlying items if text overlaps them when displaying full
	PangoLayout.

2008-08-20  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	Post release version bump.

=== athena 2.23.90 ===

2008-08-20  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

2008-08-20  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-program-choosing.c
	(athena_launch_application_from_command),
	(athena_launch_application_from_command_array):
	* libathena-private/athena-program-choosing.h:
	Use vararg list for athena_launch_application_from_command().
	Add athena_launch_application_from_command_array() which takes a
	parameter string array. Quote each parameter separately.

	* libathena-private/athena-mime-actions.c (activate_files):
	* src/file-manager/fm-desktop-icon-view.c
	(action_new_launcher_callback),
	(action_change_background_callback):
	* src/file-manager/fm-directory-view.c
	(action_new_launcher_callback),
	(get_file_names_as_parameter_array), (run_script_callback):
	* src/file-manager/fm-tree-view.c (got_activation_uri_callback):
	Pass each parameter separately to
	athena_launch_application_from_command(_array)().
	The _array() variant is used for running scripts, where the file names
	of the selection are passed separately.

	Fixes #341657. Thanks to Cosimo Cecchi.

2008-08-20  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-search-engine-simple.c
	(visit_directory):
	Make content type search criterion useful, by fixing typo from GIO
	migration. Fixes #548645.

2008-08-19  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(draw_or_measure_label_text),
	(athena_icon_canvas_item_set_entire_text):
	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-icon-container.c
	(lay_down_one_line), (lay_down_icons_horizontal):
	Never ellipsise text in last line of a line-wise layout.

2008-08-18  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	Add "icon_view/text_ellipsis_limit" and "desktop/text_ellipsis_limit".
	They specify the maximum number of lines to display before the file
	names should be ellipsized.

	* libathena-private/athena-icon-canvas-item.c
	(draw_or_measure_label_text):
	* libathena-private/athena-icon-container.c
	(text_ellipsis_limit_changed_container_callback),
	(athena_icon_container_constructor),
	(athena_icon_container_class_init),
	(get_text_ellipsis_limit_for_zoom),
	(text_ellipsis_limit_changed_callback),
	(desktop_text_ellipsis_limit_changed_callback),
	(athena_icon_container_instance_init),
	(athena_icon_container_get_layout_height):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-info.h:
	Connect icon container to text ellipsis limit preferences.

2008-08-18  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_event):
	Raise icon when hovering with the mouse over it.

2008-08-17  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(draw_or_measure_label_text):
	Obey one-line constraint in compact mode.

2008-08-16  Christian Neumair  <cneumair@gnome.org>

	* src/athena-navigation-window.c (real_sync_zoom_widgets):
	* src/athena-window.c (real_sync_zoom_widgets):
	Properly calculate zoom level. Issue was imported from old
	"zoom-parameters-change" cruft. Fixes #548036.

2008-08-16  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(draw_or_measure_label_text), (athena_icon_canvas_item_event):
	Also display whole icon text when hovering with the mouse over the
	icon.

2008-08-16  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_invalidate_label_size),
	(athena_icon_canvas_item_set_property), (compute_text_rectangle),
	(athena_icon_canvas_item_update_bounds), (layout_get_full_size),
	(draw_or_measure_label_text), (create_label_layout),
	(athena_icon_canvas_item_get_bounds_for_layout),
	(athena_icon_canvas_item_bounds),
	(athena_icon_canvas_item_ensure_bounds_up_to_date),
	(athena_icon_canvas_item_get_text_rectangle):
	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-icon-container.c
	(icon_get_bounding_box_for_layout), (lay_down_icons_horizontal),
	(get_max_icon_dimensions), (lay_down_icons_vertical),
	(placement_grid_mark_icon), (find_empty_location),
	(lay_down_icons_vertical_desktop), (reload_icon_positions),
	(athena_icon_container_start_renaming_selected_item):
	Truncate icon label to three lines if it is not selected. Fixes
	#84390, at least in text-below-icon mode. 

2008-08-16  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c
	(update_restore_from_trash_action):
	Ensure that hash table is not NULL before getting keys if the
	selection does not contain exactly one item.

2008-08-16  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c
	(action_restore_from_trash_callback), (locations_from_file_list),
	(restore_from_trash),
	(action_location_restore_from_trash_callback),
	(get_original_directories), (files_are_all_directories),
	(files_is_none_directory), (update_restore_from_trash_action),
	(real_update_location_menu), (real_update_menus):
	* src/athena-window-manage-views.c (begin_location_change),
	(got_file_info_for_view_selection_callback),
	(free_location_change):
	Support restoring of multiple items from trash at once. Group them by
	original directory, and start a file operation for each original
	directory. Display appropriate tooltips. Fixes #547977.

2008-08-16  Christian Neumair  <cneumair@gnome.org>

	* src/athena-pathbar.c (slider_timeout),
	(athena_path_bar_init), (athena_path_bar_class_init),
	(athena_path_bar_scroll), (athena_path_bar_scroll_down),
	(athena_path_bar_scroll_up), (athena_path_bar_scroll_timeout),
	(athena_path_bar_slider_button_press):
	Handle scroll events. Fixes #547990.

2008-08-13  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-info.h:
	* src/file-manager/fm-directory-view.c (file_should_show_foreach),
	(file_should_show_self), (real_update_menus_volumes):
	* src/file-manager/fm-tree-view.c (button_pressed_callback),
	(fm_tree_view_unmount_cb), (fm_tree_view_eject_cb),
	(create_popup_menu):
	Make eject and unmount labels consistent between tree side pane and
	places side pane, display both eject and unmount for volumes supporting
	both. Partially fixes #547275.

2008-08-13  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-dnd.c
	(athena_drag_default_drop_action_for_icons):
	Use correct target file for same filesystem check when dropping to
	desktop. Fixes #547282.

2008-08-11  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-file-operations.c
	(athena_file_operations_copy_move):
	Use g_file_has_uri_scheme() instead of rolling our own.
	Fixes bug #539780.

2008-08-07  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c (athena_file_is_archive):
	Add more supported MIME types, since file-roller trunk can handle them
	for remote locations. Thanks to Nelson Benítez León.

2008-08-06  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-view.c (athena_view_base_init):
	* libathena-private/athena-view.h:
	Remove unused "zoom-parameters-changed" signal.

2008-08-06  Christian Neumair  <cneumair@gnome.org>

	* src/athena-navigation-window.c (real_sync_zoom_widgets),
	(athena_navigation_window_class_init):
	* src/athena-window-manage-views.c (create_content_view),
	(location_has_really_changed), (update_for_new_location),
	(free_location_change), (athena_window_report_view_failed),
	(athena_window_manage_views_destroy),
	(athena_window_manage_views_close_slot):
	* src/athena-window-private.h:
	* src/athena-window-slot.c (real_active),
	(title_changed_callback),
	(athena_window_slot_connect_content_view),
	(athena_window_slot_disconnect_content_view),
	(athena_window_slot_set_content_view_widget):
	* src/athena-window-slot.h:
	* src/athena-window.c (athena_window_set_active_slot),
	(real_sync_zoom_widgets), (athena_window_sync_zoom_widgets),
	(zoom_level_changed_callback),
	(athena_window_connect_content_view),
	(athena_window_disconnect_content_view),
	(athena_window_class_init):
	* src/athena-window.h:
	Consolidate zoom handling. Add athena_window_sync_zoom_level(),
	and sync_zoom_level() method to AthenaWindow. Use it to sync both
	the menu state, and the toolbar state. Remove AthenaWindow's
	(dis)connect_content_view(), and use unified code in
	athena_window_(dis)connect_content_view(), wrapped by
	athena_window_slot_(dis)connect_content_view(), which also handles
	the (notebook) title sync. Fixes #546333.

2008-08-06  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-bookmarks-window.c: (on_selection_changed),
	(update_bookmark_from_text):
	Show the parse name instead of the URI in the bookmark editor
	location entry (#546267).

2008-08-05  Jens Granseuer  <jensgr@gmx.net>

	* src/athena-window.h: fix "parameter has incomplete type"
	warning by moving the type declarations before the functions that
	use them (#546310)

2008-08-05  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-list-view.c: (create_column_editor):
	HIG improvements for the "Visible Columns" dialog.	
	Initial patch by Vincent Geddes (#457451).

2008-08-03  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	Post release version bump.

=== athena 2.23.6.1 ===

2008-08-04  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

	* configure.in:
	Change version to 2.23.6.1.

2008-08-04  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c (update_info_internal):
	When changing the file name, only clear the display name if the new
	file info has a NULL display name, i.e. it hasn't been set before with
	athena_file_set_display_name(). Fixes icon names of computer:/// items.

2008-08-03  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	Post release version bump.

=== athena 2.23.6 ===

2008-08-03  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

2008-08-03  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c (str_replace),
	(make_file_name_valid_for_dest_fs), (get_unique_target_file),
	(get_target_file_for_link), (get_target_file), (create_dest_dir),
	(copy_move_directory), (query_fs_type), (copy_move_file),
	(copy_files), (move_file_prepare), (move_files_prepare),
	(move_files), (move_job), (link_file), (link_job), (create_job):
	Support transfer of files with reserved characters to FAT. Auto-escape
	them to the unreserved underscore character. Fixes #448148.

2008-08-02  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c (keyboard_move_to):
	Never use linear selection in manual layout.

2008-08-02  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c (get_cmp_point_x),
	(same_column_below_highest), (keyboard_move_to),
	(keyboard_arrow_key), (is_rectangle_selection_event),
	(keyboard_right), (keyboard_left), (keyboard_down), (keyboard_up):
	Use linear selection instead of rectangular when pressing shift, use
	rectangular selection using shift and control at the same time.
	Do not wrap around vertically in horizontal layout mode, do not wrap
	around horzontally in vertical layout mode, never wrap around during
	rectangle selection. Fixes #338298 and #545493.

2008-08-02  Christian Neumair  <cneumair@gnome.org>

	* src/athena-pathbar.c (update_button_types),
	(button_data_file_changed), (athena_path_bar_check_parent_path),
	(athena_path_bar_update_path), (athena_path_bar_set_path):
	* src/athena-pathbar.h:
	Handle moves in the path bar hierarchy. Fixes #545941.
	Thanks to Diego Escalante Urrelo.

2008-08-02  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(rubberband_timeout_callback), (realize),
	(athena_icon_container_get_first_visible_icon),
	(athena_icon_container_scroll_to_icon),
	(athena_icon_container_update_visible_icons),
	(handle_vadjustment_changed), (handle_hadjustment_changed):
	* libathena-private/athena-icon-private.h:
	Implement visible icon handling for horizontal scrolling, i.e.
	vertical icon layout. This will properly scroll to the last displayed
	icons when reloading a directory in vertical layout.

2008-07-31  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-autorun.c
	(remove_elem_from_str_array), (add_elem_to_str_array),
	(athena_autorun_set_preferences), (combo_box_changed),
	(athena_autorun_prepare_combo_box):
	Handle NULL string arrays, and fix combo box model reference counting.
	Fixes #545658.

2008-07-31  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-tree-view-drag-dest.c
	(set_widget_highlight):
	Only queue a redraw if widget state actually changed. Fixes massive
	flickering issues when dragging over list view. Fixes #524282.

2008-07-30  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-search-directory-file.c
	(athena_search_directory_file_update_display_name),
	(athena_search_directory_file_init):
	Correctly claim that the display name for the search directory is a
	custom one.

2008-07-30  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c
	(athena_file_clear_display_name), (athena_file_clear_info),
	(update_info_internal), (update_name_internal):
	When changing the file name, clear display name if it is not a custom
	one. Custom means “not provided by GFileInfo”.

2008-07-30  Christian Neumair  <cneumair@gnome.org>

	* src/athena-navigation-window-slot.c
	* src/athena-window-slot.c (real_update_query_editor),
	(athena_window_slot_update_query_editor):
	Use weak pointer for being notified about query editor destruction.

2008-07-30  Christian Neumair  <cneumair@gnome.org>

	* src/athena-navigation-window.c
	(path_bar_button_pressed_callback),
	(path_bar_button_released_callback),
	(path_bar_button_drag_begin_callback),
	(path_bar_path_set_callback):
	Open new window when control-clicking on a path bar button, open new
	tab when middle-clicking on a path bar button. Fixes #545397.

2008-07-30  Christian Neumair  <cneumair@gnome.org>

	* athena.desktop.in.in:
	Identify to GNOME session as file manager, and not as generic desktop
	application. Fixes #525056. Matthias Clasen.

2008-07-29  David Zeuthen  <davidz@redhat.com>

	* configure.in:
	Require gio 2.17.5 for g_mount_guess_content_type().

	* data/athena.xml.in:
	Delete x-content/* definitions; these are in shared-mime-info 0.50
	and greater.

	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	* libathena-private/apps_athena_preferences.schemas.in:
	Remove /apps/athena/preferences/media_autorun_x_content_ask
	and add /apps/athena/preferences/media_autorun_x_content_start_app
	instead since we're inverting the logic. Now, by default (except
	for x-content/software for which we're shipping an app ourselves)
	we default to asking the user what action to take.

	* libathena-private/athena-autorun.c:
	* libathena-private/athena-autorun.h:
	Use g_mount_guess_content_type() instead of using our own
	sniffing code. Also provide an option for the user to select
	an application to use (#532474).

	* src/athena-file-management-properties.c:
	Catch up with API changes to athena_autorun_prepare_combo_box()

2008-07-28  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-file-management-properties.c:
	(athena_file_management_properties_dialog_setup):
	* src/athena-navigation-window.c: (real_get_icon):
	Use standard icon name, as gnome-icon-theme no longer ships
	the "file-manager" icon.
	Patch by Matthias Clasen (#545062).

2008-07-24  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-pathbar.c: (setup_button_drag_source):
	Enable middle-click dragging a path bar button (#532475).

2008-07-24  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-icon-view.c:
	(get_stored_icon_position_callback),
	(icon_position_changed_callback):
	Don't use setlocale () just to printf a float, but use
	g_ascii_dtostr () instead.
	Initial patch by Christian Persch (#461804).

2008-07-24  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c:
	(is_all_button_text), (do_run_simple_dialog),
	(run_simple_dialog_va), (run_error), (run_warning), (run_question),
	(confirm_delete_from_trash), (confirm_empty_trash),
	(confirm_delete_directly), (delete_dir), (delete_file),
	(trash_files), (scan_dir), (scan_file), (verify_destination),
	(create_dest_dir), (copy_move_directory),
	(remove_target_recursively), (copy_move_file), (move_file_prepare),
	(move_files_prepare), (link_file), (link_job), (create_job):
	Show "All" buttons in the file operations dialogs only if more than one
	file is involved in the process.
	Initial patch by Christian Neumair (#518616).

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	Post release version bump.

=== athena 2.23.5.1 ===

2008-07-22  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	* src/file-manager/fm-properties-window.c
	(value_field_update_internal):
	Revert Q_() -> C_() migration due to an intltool bug.
	Do not require intltool 0.36.3 (#542658).

2008-07-22  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

	* configure.in:
	Change version to 2.23.5.1.

2008-07-22  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c (reset_open_with_menu):
	Display submenu for more than two associated applications when all
	files are folders.

2008-07-22  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c
	(action_save_search_as_callback):
	Make save button the default widget, and proxy entry activation to the
	default widget.

2008-07-22  Christian Neumair  <cneumair@gnome.org>

	* src/athena-spatial-window.c (save_window_geometry_timeout),
	(athena_spatial_window_unrealize),
	(athena_spatial_window_save_geometry),
	(athena_spatial_window_save_scroll_position),
	(athena_spatial_window_save_show_hidden_files_mode),
	(real_close_slot), (athena_spatial_window_class_init):
	* src/athena-spatial-window.h:
	Make geomtry save methods per slot, rather than per window. The active
	slot is set to NULL before they are closed. Fixes #542656.
	Thanks to Frederic Peters.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* src/athena-places-sidebar.c (enable_tabs_changed_callback),
	(bookmarks_check_popup_sensitivity), (bookmarks_build_popup_menu),
	(athena_places_sidebar_init):
	Add separator after "Open in ..." popup menu items.

	Only show "Open in New Tab" menu item if the preference is enabled.
	Update popup menu sensitivity when tabs preference changes.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* src/athena-places-sidebar.c (clicked_eject_button),
	(athena_places_sidebar_init):
	Fix eject icon click detection, also make it work in RTL locales.
	Ellipsize sidebar text. Slightly reduce eject icon xpad. 

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	Post release version bump.

=== athena 2.23.5 ===

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* src/athena-query-editor.h:
	Fix AthenaWindowInfo header inclusion.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c
	(action_location_open_alternate_callback),
	(action_location_open_in_new_tab_callback),
	(real_update_location_menu), (real_update_menus):
	* src/file-manager/athena-directory-view-ui.xml:
	Add "Open in New Tab" item to location popup, and consolidate labels in
	case both spatial and browser mode are available.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	* src/file-manager/fm-properties-window.c
	(value_field_update_internal):
	Use C_() instead of Q_(). Require intltool 0.36.3.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	Allow to disable XMP support. Thanks to Mikel Olasagasti and Gilles
	Dartiguelongue.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c (update_info_internal),
	(athena_file_get_trash_original_file):
	* libathena-private/athena-file.h:
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c
	(action_restore_from_trash_callback), (restore_from_trash),
	(action_location_restore_from_trash_callback),
	(update_restore_from_trash_action), (real_update_location_menu),
	(real_update_menus):
	* src/file-manager/athena-directory-view-ui.xml:
	Support restoring from trash (one item at a time).

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* src/athena-window-menus.c:
	* src/athena-zoom-control.c
	(athena_zoom_control_instance_init):
	Add tooltips to the zoom controls, make menu tooltips consistent with
	and a11y description consistent with Epiphany. Related to #543935.
	Thanks to Diego Escalante Urrelo.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-icon-view.c (fm_icon_view_register),
	(fm_compact_view_register):
	* src/file-manager/fm-icon-view.h:
	* src/athena-application.c (athena_application_instance_init):
	* src/athena-file-management-properties.c:
	* src/athena-file-management-properties.glade:
	Display compact view after list view, rather than before it. Fixes
	keybindings, and #543934. Thanks to Diego Escalante Urrelo.

2008-07-21  Christian Neumair  <cneumair@gnome.org>

	* src/athena-location-bar.c (editable_activate_callback),
	(athena_location_bar_init):
	Do not emit "location-changed" if the entry is empty. Fixes #527552.
	Thanks to Pedro Villavicencio, Cosimo Cechi and others.

2008-07-20  David Zeuthen  <davidz@redhat.com>

	* libathena-private/athena-file-operations.c
	(unmount_mount_callback):
	Call the correct finish function.

2008-07-20  Christian Neumair  <cneumair@gnome.org>

	* src/athena-pathbar.c (athena_path_bar_check_parent_path),
	(athena_path_bar_update_path):
	Do not treat top-level mounts (i.e. sftp://server/) as fake roots, and
	consequently do not display up slider.

2008-07-20  Christian Neumair  <cneumair@gnome.org>

	* src/athena-pathbar.c (get_type_icon_info):
	Use AthenaFile icon for normal buttons, rather than forcing folder
	icon. Fixes special location icons like network:///, computer:/// etc.

2008-07-20  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c (update_info_internal):
	Only update referenced MIME type if it actually changed.

2008-07-20  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-dnd.c (check_same_fs),
	(athena_drag_default_drop_action_for_icons):
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c (athena_file_clear_info),
	(finalize), (update_info_internal),
	(athena_file_get_filesystem_id):
	* libathena-private/athena-file.h:
	Query filesystem ID, as referenced string. Use it to determine whether
	two files are on the same FS during DND. Gets rid of synchronous I/O.

2008-07-20  Christian Neumair  <cneumair@gnome.org>

	* src/athena-notebook.c (athena_notebook_sync_tab_label):
	Use full location name as tab tooltip.

2008-07-19  Christian Neumair  <cneumair@gnome.org>

	* src/athena-places-sidebar.c (add_place),
	(athena_places_sidebar_init):
	Only align eject icons with ejectable rows, instead of aligning them
	with all icons above the seperator.

2008-07-19  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c
	(mount_callback_data_notify), (volume_mount_cb),
	(athena_file_operations_mount_volume),
	(athena_file_operations_mount_volume_full):
	* libathena-private/athena-file-operations.h:
	Add athena_file_operations_mount_volume_full(), which
	will issue a callback with an optional user data object,
	if the object is still alive after mounting.

	* src/athena-places-sidebar.c (add_place),
	(clicked_eject_button), (volume_mounted_cb),
	(open_selected_bookmark), (athena_places_sidebar_init),
	(athena_places_sidebar_dispose):
	Open files after mounting them.

2008-07-17  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-program-choosing.c
	(athena_launch_application):
	Pass textual URIs instead of GFiles to GAppInfo for remote files,
	similar to athena_launch_desktop_file(). Fixes #543448.
	Discovered by Kamil Páral.

2008-07-16  A. Walton  <awalton@gnome.org>

	* src/file-manager/fm-properties-window.c (create_basic_page):
	Small touchup to r14351 (bug #542658) caught by Claude Paroz.

2008-07-16  Christian Neumair  <cneumair@gnome.org>

	* src/athena-pathbar.c (desktop_location_changed_callback),
	(athena_path_bar_finalize), (reload_icons),
	(get_custom_user_icon_info), (get_type_icon_info),
	(athena_path_bar_update_button_appearance),
	(athena_path_bar_update_button_state),
	(button_data_file_changed), (make_directory_button),
	(athena_path_bar_check_parent_path):
	* src/athena-pathbar.h:
	Dynamically update buttons on file changes instead of hard-coding them
	once, both labels and icons. Refactor icon code.
	Add TODO notice about reaction to XDG directory changes.
	Comment out usage of custom icons for path bar buttons, due to
	GDK pixbuf issues when scaling down large images #80925.

2008-07-15  Christian Neumair  <cneumair@gnome.org>

	* src/athena-pathbar.c (button_data_free),
	(button_data_file_changed), (make_directory_button),
	(athena_path_bar_update_path):
	Use AthenaFile instead of GFile for obtaining display name. Gets rid
	of sync I/O.

2008-07-15  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(button_press_event), (athena_icon_container_did_not_drag),
	(handle_icon_double_click), (handle_icon_button_press):
	Only use double click for left mouse button. The middle mouse button
	opens a new tab or window on one click. Fixes #543136.

2008-07-15  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-info.c
	(athena_icon_get_emblem_size_for_icon_size):
	* src/file-manager/fm-list-model.c (fm_list_model_get_value):
	Display emblems for small icon sizes, down to 16 pixels.

2008-07-15  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-dnd.c (slot_proxy_drag_motion),
	(athena_drag_slot_proxy_init):
	Also support a mode where the target URI is NULL, and the target slot is
	set.

	* src/athena-notebook.c (build_tab_label):
	Set up notebook labels as slot drag proxy, replace old DND code.

2008-07-14  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-emblem-utils.c
	(athena_emblem_install_custom_emblem),
	(athena_emblem_can_remove_emblem):
	Use the GLib gstdio functions here, suggested in bug 542819
	by Thadeu Lima de Souza Cascardo.

2008-07-13  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c:
	* libathena-private/athena-emblem-utils.c:
	Include sys/stat.h for struct stat and S_ISUID and other macros.
	Thanks to Thadeu Lima de Souza Cascardo  <cascardo@minaslivre.org>.

2008-07-13  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-dnd.c
	(athena_drag_uri_array_from_selection_list),
	(athena_drag_uri_list_from_selection_list),
	(athena_drag_uri_array_from_list),
	(athena_drag_uri_list_from_array), (slot_proxy_drag_motion),
	(drag_info_clear), (slot_proxy_drag_leave), (slot_proxy_drag_drop),
	(slot_proxy_handle_drop), (slot_proxy_drag_data_received),
	(athena_drag_slot_proxy_init):
	* libathena-private/athena-dnd.h:
	Add simple slot drop proxy API to libathena-private, centered
	around athena_drag_slot_proxy_init().
	The notebook tab label drop targets will later be ported to this API.

	Add API for converting URI lists to URI arrays, and for constructing
	URI lists and arrays from selection lists.

	* src/athena-notebook.c (notebook_tab_drag_data_received):
	Use athena_drag_uri_array_from_selection_list().

	* src/athena-pathbar.c (slider_timeout),
	(athena_path_bar_slider_drag_motion),
	(athena_path_bar_slider_drag_leave), (athena_path_bar_init),
	(athena_path_bar_finalize), (button_data_free),
	(button_drag_data_get_cb), (setup_button_drag_source),
	(make_directory_button):
	* src/athena-pathbar.h:
	Add path bar drop targets, use athena_drag_slot_proxy_init() for
	setup.
	Also offer GNOME icon lists as drag target.
	Reveal hidden paths when hovering over the up/down sliders for some
	time. Fixes #309842.

2008-07-13  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-view.c
	(athena_view_drop_proxy_received_netscape_url):
	* libathena-private/athena-view.h:
	* src/file-manager/fm-directory-view.c
	(fm_directory_view_init_view_iface),
	(fm_directory_view_drop_proxy_received_uris),
	(fm_directory_view_drop_proxy_received_netscape_url):
	Add function for receiving netscape URLs, clear colliding clipboard
	contents when receiving dropped URIs.

2008-07-13  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-window-slot-info.c
	(athena_window_slot_info_get_current_view):
	* libathena-private/athena-window-slot-info.h:
	* src/athena-window-slot.c (real_slot_info_get_current_view),
	(athena_window_slot_info_iface_init):
	Add athena_window_slot_info_get_window()
	for getting current AthenaView (one ref count added).

2008-07-12  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(handle_icon_double_click):
	Fix typo.

2008-07-12  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-properties-window.c (create_basic_page),
	(create_simple_permissions), (create_advanced_permissions),
	(create_permissions_page):
	Use UTF-8 dash instead of "--". Fixes #542658. Thanks to Claude Paroz.

2008-07-12  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(button_press_event):
	* libathena-private/athena-icon-private.h:
	Completely rewrite button press detection. Finally fixes #542269
	without any side effects.

2008-07-12  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(handle_icon_button_press):
	Fix activation of previously selected icons (introduced when fixing
	bug #347423). Fixes #542269. Thanks to Tomasz Sałaciński.

2008-07-10  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c:
	Do not bind CTRL+T to "Move to Trash".

2008-07-09  Christian Neumair  <cneumair@gnome.org>

	* src/athena-navigation-window-menus.c (action_forward_callback):
	Fix typo. Go forward instead of going back.

2008-07-09  Christian Neumair  <cneumair@gnome.org>

	* src/athena-places-sidebar.c (compute_drop_position),
	(drag_motion_callback), (reorder_bookmarks),
	(drag_data_received_callback), (athena_places_sidebar_init):
	Bookmark DND fix galore. Properly handle reordering when non-existing
	bookmarks are present. They are ignored by the view, but not by the
	Athena bookmark list. Make DND indication consistent with the GTK+
	file chooser.

2008-07-09  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-window-slot-info.h:
	Actually add it.

	* src/athena-navigation-window-slot.h:
	* src/athena-notebook.h:
	* src/athena-window-slot.h:
	Contents was added twice. Remove it once.

2008-07-08  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/*.c:
	* src/*.c:
	Merge "multiview" tab branch. Fixes #48034.

2008-07-07  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-ui-utilities.c
	(athena_toolbar_action_from_menu_item):
	Use GTK_ICON_SIZE_LARGE_TOOLBAR instead of hard coding the icon size
	to 48. Fixes #541527. Thanks to Gilles Dartiguelongue.

2008-07-06  Christian Neumair  <cneumair@gnome.org>

	* src/athena-navigation-window.c (unset_focus_widget),
	(is_in_temporary_navigation_bar), (is_in_temporary_search_bar),
	(remember_focus_widget), (restore_focus_widget),
	(hide_temporary_bars), (navigation_bar_cancel_callback),
	(navigation_bar_location_changed_callback),
	(athena_navigation_window_destroy), (real_prompt_for_location),
	(search_bar_cancel_callback),
	(athena_navigation_window_show_search), (real_set_search_mode):
	* src/athena-window-manage-views.c (location_has_really_changed):
	* src/athena-window-private.h:
	* src/athena-window.c (athena_window_set_content_view_widget):
	Always grab view focus on location change, even if it the old view is
	re-used. Remember last focus widget when temporarily showing a bar,
	and re-focus it when hiding it. Fixes #500946. Thanks to Nelson
	Benítez León.

2008-07-04  Christian Neumair  <cneumair@gnome.org>

	* src/athena-places-sidebar.c (add_place),
	(clicked_eject_button), (check_unmount_and_eject),
	(check_visibility), (rename_selected_bookmark), (do_unmount),
	(do_unmount_selection), (unmount_shortcut_cb), (do_eject),
	(eject_shortcut_cb), (eject_or_unmount_bookmark),
	(eject_or_unmount_selection), (bookmarks_key_press_event_cb),
	(bookmarks_button_press_event_cb), (athena_places_sidebar_init):
	Add eject button to places sidebar. Use multiple cell renderers for
	aligning the button with the items above the separator, but not below
	it. Thanks to Stefano Teso, Cosimo Cecchi, Juan Dapena Paz and Ignacio
	Casal Quinteiro. Fixes #343839.

2008-07-04  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-utilities.c:
	(athena_get_user_directory), (athena_get_desktop_directory),
	(athena_create_templates_directory),
	(athena_get_searches_directory):
	* libathena-private/athena-metafile.c:
	(construct_private_metafile_uri):
	* libathena-private/athena-mime-actions.c: (activate_files):
	* src/file-manager/fm-directory-view.c: (change_to_view_directory),
	(run_script_callback):
	Use g_mkdir() and g_chdir() instead of mkdir() and chdir() to fix
	some warnings under GCC 4.3.1.

2008-07-03  Wouter Bolsterlee  <wbolster@svn.gnome.org>

	* libathena-private/athena-emblem-utils.c:
	Include <glib/gstdio.h> to fix the build. Some cleanup
	in header imports to improve code legibility.

	* libathena-private/athena-file.c:
	Include <glib/gstdio.h> here as well.

2008-07-03  Wouter Bolsterlee  <wbolster@svn.gnome.org>

	* configure.in: Don't reference
	cut-n-paste-code/widgets/ directory since it was removed
	in revision 14306.

2008-06-30  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-directory-async.c (thumbnail_done),
	(thumbnail_loader_size_prepared), (get_pixbuf_for_content),
	(thumbnail_start):
	* libathena-private/athena-file.h:
	Scale down huge pixbufs when loading. Massively speed up loading of
	directories where the original image is used as thumbnail.
	Also try to write the whole file at once rather than writing in chunks.

	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c (athena_file_get_icon):
	Rewrite some flaky parts of thumbnailing.

	Never scale any thumbnails up.
	Always compose thumbnail on the fly instead storing it once and
	scaling it up and down.
	Add flag to force that thumbnail size matches
	the output icon size for tree view.

	* src/file-manager/fm-list-model.c (fm_list_model_get_value):
	Use this flag.

2008-06-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* README: Remove reference to the need of a GNOME 2.4 environment
	to build Athena.

2008-06-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* cut-n-paste-code/README: Update outdated information
	and mailing list address.

2008-06-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* cut-n-paste-code/Makefile.am:
	* cut-n-paste-code/widgets/Makefile.am:
	Remove useless empty widgets directory.

2008-06-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-window.c: (athena_window_set_status):
	Fix a huge leak as messages were pushed in the statusbar but almost
	never popped. Patch by Vincent Untz. (#536968).

2008-06-29  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(clicked_within_double_click_interval), (handle_icon_button_press):
	* libathena-private/athena-icon-private.h:
	Use customized double click detection, for supporting double clicks
	on half shown items, where the first click triggers a scroll event.
	Thanks to Nelson Benítez León. Fixes #347423.

2008-06-28  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-icon-container.c
	(keyboard_arrow_key):
	Move keyboard focus correctly after a file has been
	removed. Patch thanks to Nelson Benitez. Closes bug #540107.

2008-06-28  Christian Neumair  <cneumair@gnome.org>

	* src/athena-window-manage-views.c
	(athena_window_report_selection_changed),
	(athena_window_report_load_underway),
	(athena_window_report_load_complete), (free_location_change),
	(athena_window_report_view_failed),
	(athena_window_stop_loading):
	* src/athena-window-private.h:
	Stop loading of new view instead of just unreffing it when freeing a
	location change.
	Ignore view signals of new view when stopping it. Otherwise we'd have
	infinite recursion.

2008-06-28  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c (keyboard_move_to),
	(keyboard_space):
	If no icon is selected, but an icon has the keyboard focus, select it
	when pressing space. Thanks to Nelson Benítez León, A. Walton and Amir
	Reza Khosroshahi. Fixes #378202.

2008-06-23  Rodney Dawes  <dobey.pwns@gmail.com>

	* libathena-private/athena-emblem-utils.c:
	(is_reserved_keyword, athena_emblem_should_show_in_list):
	* libathena-private/athena-file.h:
	Add the emblem-shared icon to be hidden in the emblems dialog and
	to be used as a reserved keyword as well

2008-06-23  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in: require libbeagle >= 0.2.4. (#351288).

2008-06-19  Christian Persch  <chpe@gnome.org>

	* src/file-manager/fm-directory-view.c:
	(convert_file_list_to_string), (get_clipboard_callback),
	(clear_clipboard_callback), (convert_file_list_to_uris),
	(copy_or_cut_files), (clipboard_targets_received),
	(real_update_paste_menu), (fm_directory_view_class_init):
	* src/file-manager/fm-tree-view.c: (get_clipboard_callback),
	(clear_clipboard_callback), (convert_file_to_uri),
	(copy_or_cut_files): Store the clipboard selection also in
	text/uri-list format. Part of bug #314120.

2008-06-16  Christian Neumair  <cneumair@gnome.org>

	* configure.in: post-release bump to 2.23.5.

==================== 2.23.4 ====================

2008-06-16  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

2008-06-16  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-file.c
	(athena_file_get_permissions_as_string):
	Correct a typo in the permissions code: 
	suid should test for S_ISUID instead of G_ISGID.
	Closes bug #538468.
	Patch by Marcel Stimberg.

2008-06-16  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-emblem-utils.c
	(is_reserved_keyword), (athena_emblem_should_show_in_list):
	* libathena-private/athena-file.c (prepend_automatic_keywords):
	Remove the emblem-desktop from Athena, as GIO now returns the
	user-desktop icon for the user's Desktop directory.
	Closes bug #538152.

2008-06-16  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c (copy_move_file):
	Use G_FILE_COPY_ALL_METADATA (#515777). Thanks to Alex Rostovtsev.

2008-06-15  Cosimo Cecchi  <cosimoc@gnome.org>

	reviewed by: David Zeuthen <david@fubar.dk>

	* libathena-private/athena-autorun.c:
	Always open folder if the corresponding action is selected
	in the autorun preferences.
	Patch by Matthias Clasen. (#528675).

2008-06-12  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-dnd.c:
	(athena_drag_default_drop_action_for_icons):
	Don't use g_free () on a GFile.
	Patch by Sebastien Bacher. (#537995).

2008-06-11  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-file.c (athena_file_should_show):
	Never hide hidden or backup files in the trash. Fixes bug #153545.

2008-06-11  Christian Neumair  <cneumair@gnome.org>

	* src/athena-file-management-properties.glade:
	* src/athena-zoom-control.c (athena_zoom_control_redraw):
	Slightly change zoom level algorithm to display "66%" instead of
	"67%". This looks more consistent with the "33%" label for a .3 zoom
	level. Also change preferences dialog accordingly: rename "75%" to
	"66%", and "25%" to "33%". Fixes #485965.

2008-06-11  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c (update_info_internal),
	(athena_file_get_icon):
	* libathena-private/athena-thumbnails.c
	(athena_has_valid_failed_thumbnail):
	* libathena-private/athena-thumbnails.h:
	Fix thumbnail handling. Always request thumbnailing if a file without
	any thumbnail changes its mtime, or if a failed thumbnail is not up to
	date (i.e. its mtime differs from the file's mtime).

2008-06-08  German Poo-Caamano  <gpoo@gnome.org>

	* src/athena-window-menus.c:
	(add_extension_menu_items): New function to fill submenus from
	extensions using AthenaMenuProvider::get_background_items.
	(athena_window_load_extension_menus): Fixed submenu support
	for extensions using AthenaMenuProvider::get_background_items.
	* src/file-manager/fm-directory-view.c:
	(search_in_menu_items): Fix typo. Submenus provided by
	extensions were not activated (#508878).
	(reset_extension_actions_menu): Code cleanup, using g_list_foreach
	instead for.

2008-06-05  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_real_set_directory_sort_reversed):
	Don't return anything for void function.
	Patch by Damien Carbery. (#536787).

2008-06-03  Vincent Untz  <vuntz@gnome.org>

	* configure.in: post-release bump to 2.23.4

==================== 2.23.3 ====================

2008-06-03  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

	* configure.in:
	Require eel 2.23.2.

Sun Jun  1 19:30:58 2008  Søren Sandmann  <sandmann@redhat.com>

	* libathena-private/athena-directory-background.c
	(background_changed_callback): Make use of new
	eel_background_save_to_gconf().

2008-05-31  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_empty_trash):
	Call setup_autos() to have the confirmation preference var
	always initializated properly. Patch by Kai Willadsen (#535812).

Sat May 31 03:20:11 2008  Søren Sandmann  <sandmann@redhat.com>

	* libathena-private/athena-directory-background.c
	(athena_file_background_read_desktop_settings): If the placement
	is "none", then set image to NULL.

Fri May 30 23:33:17 2008  Søren Sandmann  <sandmann@redhat.com>

	* Revert last commit as we do still need to deal with uris.

Fri May 30 22:16:51 2008  Søren Sandmann  <sandmann@redhat.com>

	* libathena-private/athena-directory-background.c
	(initialize_background_from_settings): 
	* src/athena-information-panel.c
	(athena_information_panel_update_appearance): Update for new eel
	API
	* configure.in: Require SVN version of eel

Fri May 30 21:25:59 2008  Søren Sandmann  <sandmann@redhat.com>

	* libathena-private/athena-directory-background.c
	(initialize_background_from_settings): Don't call
	eel_background_set_image_uri_sync() since it has been exactly
	identical to eel_background_set_image_uri() for a while.

2008-05-29  Christian Neumair  <cneumair@gnome.org>

	* src/athena-bookmark-list.c (athena_bookmark_list_save_file):
	Convert g_warning() about inability to write to ~/.gtk-bookmarks to
	g_message().

2008-05-29  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-dnd.c
	(athena_drag_default_drop_action_for_icons):
	* libathena-private/athena-file-dnd.c
	(athena_drag_can_accept_files):
	* libathena-private/athena-file-utilities.c
	(athena_is_file_roller_installed):
	* libathena-private/athena-file-utilities.h:
	* libathena-private/athena-file.c (athena_file_is_archive):
	* libathena-private/athena-file.h:
	* src/file-manager/fm-directory-view.c
	(fm_directory_view_move_copy_items):
	Support adding files to archives via file-roller.
	Thanks to Nelson Benítez. Fixes #377157.

2008-05-28  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-ditem-page.c (build_table), (create_page),
	(fm_ditem_page_create_begin), (fm_ditem_page_make_box),
	(fm_ditem_page_should_show):
	* src/file-manager/fm-ditem-page.h:
	* src/file-manager/fm-properties-window.c (create_basic_page):
	* src/athena-application.c (finish_startup):
	Display launcher editables on "Basic" page. Get rid of "Launcher" page.

2008-05-27  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-icon-dnd.c: (drag_begin_callback):
	Don't try to create a Cairo context for a NULL pixmap.
	Fixes bug #534226.

2008-05-27  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-dnd.c:
	(athena_drag_default_drop_action_for_uri_list):
	* libathena-private/athena-dnd.h:
	* libathena-private/athena-icon-dnd.c:
	(athena_icon_container_get_drop_action):
	Select GDK_ACTION_MOVE as default action when DnD-ing a uri list
	into the trash. (#534769).	

2008-05-24  Christian Neumair  <cneumair@gnome.org>

	* src/athena-property-browser.c (athena_property_browser_init),
	(athena_property_browser_update_contents):
	Set window role to dialog, do not use custom hacks to pack images into
	window buttons. Fixes #78907.

2008-05-24  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-autorun.c:
	* src/athena-autorun-software.c
	(present_autorun_for_software_dialog):
	Use medium as singular of media. Fixes #522986.

2008-05-23  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-directory-async.c (seen_inode),
	(mark_inode_as_seen), (deep_count_one), (deep_count_state_free),
	(deep_count_load), (deep_count_start):
	Do not count the same inode twice when calculating size. Fixes
	#313668.

2008-05-23  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-properties-window.c (set_name_field),
	(update_name_field), (value_field_update_internal),
	(attach_title_field), (create_page_with_hbox), (append_blank_row),
	(is_merged_trash_directory), (is_computer_directory),
	(is_network_directory), (is_burn_directory),
	(should_show_file_type), (should_show_location_info),
	(should_show_accessed_date), (should_show_free_space),
	(create_basic_page), (create_properties_window), (real_response),
	(fm_properties_window_class_init), (fm_properties_window_init):
	* src/file-manager/fm-properties-window.h:
	Remove useless properties for computer, trash, burn and network
	locations. Add spacing, make properties dialog HIG compliant.
	Derive dialog from GtkDialog, instead of GtkWindow.
	Fixes #325024.

2008-05-22  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c (athena_file_get_icon):
	Fix frame size calculation.

2008-05-22  Christian Neumair  <cneumair@gnome.org>

	* src/athena-main.c (main):
	Initialize autostart to FALSE.

2008-05-21  A. Walton  <awalton@gnome.org>

	* */*.[ch]:
	Move all of Athena to single Gtk+ includes, because Mitch says so.
	Closes Bug #530315.

2008-05-20  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-clipboard.c:
	(convert_lines_to_str_list),
	(athena_clipboard_get_uri_list_from_selection_data),
	(athena_clipboard_get),
	(athena_clipboard_clear_if_colliding_uris):
	* libathena-private/athena-clipboard.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_get_copied_files_atom), (copy_or_cut_files),
	(paste_clipboard_data), (action_paste_files_callback),
	(paste_into), (real_update_paste_menu):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c: (icon_view_move_copy_items):
	* src/file-manager/fm-list-view.c: (move_copy_items_callback):
	* src/file-manager/fm-tree-view.c: (move_copy_items_callback),
	(button_pressed_callback), (copy_or_cut_files),
	(paste_clipboard_data), (fm_tree_view_paste_cb):
	Empty the clipboard when copying/moving with DnD a file contained
	in it. Also, refactor some clipboard code from fm-directory-view.c and
	fm-tree-view.c into athena-clipboard.c. (#532850).

2008-05-19  Cosimo Cecchi  <cosimoc@gnome.org>

	* docs/Makefile.am:
	* docs/athena-connect-server.1:
	* docs/athena-file-management-properties.1:
	* docs/athena.1:
	Adds manpages taken from the Debian package. Many thanks to the
	Debian doc authors for these and for making them available
	under the GPL license. (#310473 and #501698).

2008-05-19  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-property-browser.c: (make_drag_image):
	Fix a typo that was breaking the image when doing DnD of
	emblems from the property browser.

2008-05-19  Padraig O'Briain  <padraig.obriain@sun.com>

	* src/athena-application.c (mount_removed_callback): Ensure that
	window no longer shows CD contents after CD is ejected. (#531678)

2008-05-19  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c (athena_file_get_icon):
	* libathena-private/athena-icon-info.c
	(athena_icon_info_lookup),
	(athena_icon_info_get_pixbuf_nodefault_at_size),
	(athena_icon_info_get_pixbuf_at_size):
	Use bilinear interpolation instead of hyperbolic. Massively speeds up
	loading of directories with previously generated thumbnails.

2008-05-19  Christian Neumair  <cneumair@gnome.org>

	* src/athena-shell.c (corba_open_windows),
	(corba_open_default_window):
	Treat "" CORBA strings as NULL.

2008-05-19  Christian Neumair  <cneumair@gnome.org>

	* src/athena-shell.c (open_window):
	Never maximize windows opened from shell if a custom geometry has been
	specified. Fixes #92566.

2008-05-19  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-icon-view.c:
	Fix a conflicting accelerator.
	Patch from Sebastien Bacher. (#442056)

2008-05-17  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-directory-background.c
	(athena_file_background_read_desktop_settings):
	Fix possibly uninitialized variable.

Fri May 16 23:56:37 2008  Søren Sandmann  <sandmann@redhat.com>

	* libathena-private/athena-directory-background.c
	(athena_file_background_read_desktop_settings):
	Rewrite this function using gconf directly instead of relying on
	libbackground.

	* libathena-private/athena-directory-background.c
	(athena_file_background_write_desktop_settings): 
	Rewrite to use gconf directly

	* libbackground: 
	Remove.

2008-05-14  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c
	(paste_into_clipboard_received_callback), (paste_into),
	(action_paste_files_into_callback),
	(action_location_paste_files_into_callback),
	(clipboard_targets_received), (real_update_location_menu):
	* src/file-manager/athena-directory-view-ui.xml:
	Implement "Paste Into" for location context menu. Always request
	clipboard contents in real_update_paste_menu().

2008-05-13  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c
	(athena_file_operations_copy_move):
	Never move to "burn:///". Fixes #531750.

	* src/file-manager/fm-properties-window.c (real_destroy):
	Free permission_combos list.

2008-05-13  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-view.c
	(athena_view_pop_up_location_context_menu):
	* libathena-private/athena-view.h:
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c
	(action_self_properties_callback),
	(action_location_properties_callback),
	(fm_directory_view_finalize),
	(action_location_mount_volume_callback),
	(action_location_unmount_volume_callback),
	(action_location_eject_volume_callback),
	(action_location_format_volume_callback),
	(action_location_open_folder_window_callback),
	(action_location_cut_callback), (action_location_copy_callback),
	(action_location_trash_callback),
	(action_location_delete_callback),
	(real_update_location_menu_volumes), (real_update_location_menu),
	(fm_directory_view_pop_up_background_context_menu),
	(real_pop_up_location_context_menu),
	(location_popup_file_attributes_ready),
	(unschedule_pop_up_location_context_menu),
	(schedule_pop_up_location_context_menu),
	(fm_directory_view_pop_up_location_context_menu), (load_directory):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-location-bar.c (label_button_pressed_callback):
	* src/athena-navigation-window.c
	(athena_navigation_window_init),
	(path_bar_button_pressed_callback), (path_bar_path_set_callback):
	* src/athena-pathbar.c (athena_path_bar_class_init),
	(athena_path_bar_update_path),
	(athena_path_bar_get_path_for_button):
	* src/athena-pathbar.h:
	* src/athena-spatial-window.c (location_button_pressed_callback):
	Allow to open location popup menu for any location, and not just for
	currently open folder. Enable location popup menu for all path bar
	buttons. Add volume operations to location context menu. Fix
	separators in location context menu. Fixes #309844.
	Do not unref file when opening properties dialog from background
	context menu.

2008-05-13  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== athena 2.23.2 ===

2008-05-13  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release.

2008-05-09  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-directory-view.c: (select_pattern):
	* src/file-manager/fm-icon-view.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-spatial-window.c:
	Ellipsize and HIG-ify some menu items. (#335112).

2008-05-09  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	Use the right type for all_columns_have_same_width key in the
	schemas description file. (#532363).

2008-05-09  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-dnd.c:
	(athena_drag_file_local_internal), (athena_drag_drag_data_get):
	* libathena-private/athena-open-with-dialog.c:
	(add_or_find_application):
	* libathena-private/athena-program-choosing.c:
	(athena_launch_application):
	* src/athena-sidebar-title.c: (update_icon):
	* src/athena-spatial-window.c:
	(got_file_info_for_location_menu_callback):
	* libathena-private/athena-file.c: (get_custom_icon):
	Plugged some leaks around.
	* libathena-private/athena-file.c: (is_uri_relative):
	Cleaned up this bit of code.

	Bug #532126.

2008-05-08  Federico Mena Quintero  <federico@novell.com>

	http://bugzilla.gnome.org/show_bug.cgi?id=364843

	Keep the generated names for "reallylongfilename (copy).txt" from
	overflowing the maximum allowed length for path names.

	Original patch by Dave Camp <campd@campd.org>

	* libathena-private/athena-file-operations.c
	(shorten_utf8_string): New function; takes an UTF8 string and
	hygienically truncates it to a given number of bytes.
	(get_link_name): Ensure the final name doesn't exceed a maximum length.
	(make_next_duplicate_name): Likewise.
	(get_max_name_length): Wrapper around pathconf() for basename lengths.
	(get_unique_target_file): Use a maximum length for the target name.
	(get_target_file_for_link): Likewise.

2008-05-07  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c:
	Use text width of 150 pixels in vertical layout mode, instead of 300.

2008-05-06  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(next_row_leftmost), (previous_row_rightmost),
	(next_column_highest), (previous_column_lowest),
	(last_column_lowest), (keyboard_end), (keyboard_arrow_key),
	(keyboard_right), (keyboard_left), (keyboard_down), (keyboard_up):
	Wrap to next row/column when pressing arrow key, except if a11y is
	used. Fixes #526802.
	For vertical layout, make the "End" key select bottom item in last
	column, instead of the last item in the bottom row.

2008-05-05  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-global-preferences.h:
	Fixup broken GConf key define. Patch from Stephane Demurget.

2008-05-05  A. Walton  <awalton@gnome.org>

	reviewed by: Cosimo Cecchi

	* libathena-private/athena-module.c (athena_module_load):
	* src/file-manager/fm-ditem-page.c (save_entry):
	* src/athena-autorun-software.c (autorun):
	Fixes build on toolchains with -Wformat enabled. 
	Closes bug #531562.

2008-05-05  A. Walton  <awalton@gnome.org>

	* src/athena-window-menus.c (action_about_athena_callback):
	Update FSF address, bump the copyright year to 2008, and remove
	a unnecessary version test macro (we require a later Gtk+ now, 
	making this test unnecessary). Closes bug #409038.

2008-05-05  A. Walton  <awalton@gnome.org>

	* configure.in:
	Use -Wstrict-aliasing=0 instead of -Wno-strict-aliasing, known to be
	broken on GCC 4.3.x < r130902 (GCC Bug #34973). Closes GNOME 
	bug #528081.

2008-05-05  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-window.c: (athena_window_key_press_event):
	Revert the patch for bug #314431 as it seems to break cut and paste.

2008-05-05  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-connect-server-dialog-main.c:
	Do not error out if the remote share is already mounted.
	Fixes #531508.

2008-05-05  Tomas Bzatek  <tbzatek@redhat.com>

	* libathena-private/athena-file-operations.c:
	Don't allow recursive move/copy into itself. Fixes #530720.

2008-05-03  Hans Petter Jansson  <hpj@novell.com>

	* src/athena-image-properties-page.c (append_exifdata_string):
	If we get a NULL exifdata, don't try to dereference it. Fixes
	BGO #530851.

2008-05-03  Christian Neumair  <cneumair@gnome.org>

	* src/athena-file-management-properties.glade:
	Use 12 pixels of list column page indentation. Fixes #514415. Thanks
	to Marcin Galazka.

2008-05-01  Claude Paroz  <claude@2xlibre.net>

	* libathena-private/apps_athena_preferences.schemas.in: Removed
	duplicate "and" in description. Fixes #516906.

2008-04-30  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-property-browser.c: (ensure_file_is_image):
	Do not unref the file info before checking the mime type,
	otherwise the mime_type string will be invalidated. (#530549).

2008-04-30  A. Walton  <awalton@gnome.org>

	* configure.in:
	* src/file-manager/fm-icon-view.c:
	Remove false dependency for ESound. Closes bug #311445.

2008-04-30  A. Walton  <awalton@gnome.org>

	* libathena-private/athena-clipboard.c:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory.c:
	* libathena-private/athena-entry.c:
	* libathena-private/athena-file.c:
	* libathena-private/athena-horizontal-splitter.c:
	* libathena-private/athena-icon-canvas-item.c:
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-users-groups-cache.c:
	* libathena-private/athena-vfs-directory.c:
	* src/athena-emblem-sidebar.c:
	* src/athena-file-management-properties.c:
	* src/athena-window-manage-views.c:
	* src/athena-window.c:
	* src/athena-zoom-control.c:
	Replace g_return_*() with g_assert() in private, internal
	functions. Closes #530321.

2008-04-29  David Zeuthen  <davidz@redhat.com>

	* libathena-private/athena-autorun.c:
	* libathena-private/athena-autorun.h:
	* libathena-private/athena-file-operations.c:
	(volume_mount_cb), (athena_file_operations_mount_volume):
	* libathena-private/athena-file-operations.h:
	* libathena-private/athena-mime-actions.c:
	(activation_mount_not_mounted_callback):
	* libathena-private/athena-vfs-file.c:
	(vfs_file_mount_callback):
	* src/athena-application.c: (startup_volume_mount_cb),
	(volume_added_callback):
	* src/athena-places-sidebar.c: (open_selected_bookmark),
	(mount_shortcut_cb):
	* src/athena-window-manage-views.c: (mount_not_mounted_callback):
	Fix how autorunning works. Instead of inhibiting autorunning
	every time we run something, we turn things around and instead
	allow automounting only in the instance where Athena automounted
	something itself. So in essence this patch is s/inhibit/allow/.
	This fixes an annoying problem where Athena would do autorun
	everytime something was mounted even from the command line. A
	consequence of this are windows popping up and other annoyances.
	This patch fixes that problem.

	* src/athena-x-content-bar.c: (athena_x_content_bar_init):
	Make sure the label is ellipsized.

2008-04-27  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c: (delete_files),
	(trash_files), (delete_job):
	Report user cancel when all the files we're about to trash or delete
	are skipped in the operation. This allows to use the same selection for
	requesting another deletion from the view. (#519746).

2008-04-27  Christian Neumair  <cneumair@gnome.org>

	* src/athena-window-manage-views.c
	(display_view_selection_failure):
	Quote schema. Fixes #522029.

2008-04-27  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-places-sidebar.c: (athena_places_sidebar_init):
	Always use single click policy in the Places sidebar. (#355760).

2008-04-27  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-navigation-window.c:
	(athena_navigation_window_save_geometry):
	Always properly remember window size, also in the case the window is
	closed being maximized. (#385176).

2008-04-27  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-window.c: (athena_window_key_press_event):
	Reverse the order in which the keybindings are processed by the
	AthenaWindow, and use the same approach as GEdit.
	This fixes some bugs where the GtkWindow accelerators were executed
	before the focused widget one. (#314431).

2008-04-27  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-list-view.c (button_press_callback):
	Do not activate twice if the activated paths are already selected.
	Always expand when an expander is clicked, even when the activation
	paths are already selected. Add 4 to the GtkTreeView's claimed
	expander size, which accounts for hard coded internal GtkTreeView
	expander padding. Fixes #448562. Thanks to Paweł Paprota.

2008-04-26  A. Walton  <awalton@gnome.org>

	reviewed by: Christian Neumair

	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file-utilities.c
	(athena_compute_title_for_location):
	* libathena-private/athena-file.c (update_info_internal),
	(athena_file_get_description):
	* libathena-private/athena-file.h:
	Use standard::description in the window title when it's available.
	Closes bug #516007.

2008-04-27  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(emit_atk_focus_tracker_notify), (set_keyboard_focus),
	(select_range), (select_one_unselect_others), (rubberband_select),
	(keyboard_move_to):
	Properly handle selection changes when using keyboard navigation. We
	did not emit a "selection-change" signal when keyboard rubberbanding
	was used, and all except one icon were deselected. Fixes #509432.
	Thanks to Paweł Paprota.

2008-04-24  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-list-view.c: (key_press_callback):
	Properly handle Ctrl+F10 keybinding in List View.
	Patch by Paweł Paprota. (#385896).

2008-04-23  Michael J. Chudobiak  <mjc@svn.gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.c:
	Bump default thumbnailing size limit from 5 MB to 10 MB (#421342).

2008-04-21  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	Post release version bump.

=== athena 2.23.1 ===

2008-04-21  Christian Neumair  <cneumair@gnome.org>

	* Makefile.am:
	* configure.in:
	Entirely move DISTCHECK_CONFIGURE_FLAGS to Makefile.am to fix
	distcheck.

2008-04-21  Christian Neumair  <cneumair@gnome.org>

	* NEWS:
	Update for release.

2008-04-21  Christian Neumair  <cneumair@gnome.org>

	* athena.desktop.in.in:
	* src/athena-main.c (main):
	Support new gnome-session autostart semantics (#525056). Thanks to
	Lucas Rocha.

2008-04-15  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file.c: (compare_by_time):
	Initialize two vars to get rid of a warning with gcc 4.3.
	Patch by Paweł Paprota. (#528081).

2008-04-10  A. Walton  <awalton@svn.gnome.org>

	Remove GSequence directory and files (for real this time).

2008-04-10  A. Walton  <awalton@svn.gnome.org>

	* configure.in:
	* cut-n-paste-code/Makefile.am:
	* cut-n-paste-code/gsequence/Makefile.am:
	* cut-n-paste-code/gsequence/gsequence.c:
	* cut-n-paste-code/gsequence/gsequence.h:
	* src/Makefile.am:
	* src/file-manager/fm-list-model.c:
	Remove GSequence hack as it is no longer necessary;
	we require a newer GLib in order to support GIO.
	More work towards bug #520773.

2008-04-10  A. Walton  <awalton@svn.gnome.org>

	* src/Makefile.am:
	* src/athena-application.c: (athena_application_startup):
	* src/athena-application.h:
	* src/athena-first-time-druid.c:
	* src/athena-first-time-druid.h:
	* src/athena-main.c: (main):
	Remove the first-time-druid dead code (#520773).

2008-04-10  Cosimo Cecchi  <cosimoc@gnome.org>

	* configure.in: Add a missing comma to fix build with
	Autoconf 2.62. (#527315).

2008-04-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-view.c: (fm_list_view_finalize):
	Destroy column editor dialog with its parent list view. (#439097) 

2008-04-07  Christian Neumair  <cneumair@gnome.org>

	* src/athena-application.c (athena_application_destroy),
	(automount_all_volumes_idle_cb), (finish_startup):
	* src/athena-application.h:
	Automount volumes in idle callback rather than during startup
	(#526471).

2008-04-07  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-column-chooser.c (update_buttons),
	(add_buttons):
	Remove show/hide buttons. The entries can be toggled directly using
	mouse or keyboard. Do not remove buttons to move entries, since
	list DND may not be obvious for some users (#514394). Thanks to Marcin
	Galazka.

2008-04-05  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-autorun.c:
	(_g_mount_guess_content_type):
	Disable autorun when detecting autorun.exe and autorun.inf,
	as we do not support those yet (part of bug #524270).
	* src/athena-autorun-software.c: (autorun), (main):
	Plug some minor leaks.

2008-04-04  A. Walton  <awalton@svn.gnome.org>

	* configure.in:
	* docs/Makefile.am:
	* docs/reference/Makefile.am:
	* docs/reference/libathena-extension/Makefile.am:
	* docs/reference/libathena-extension/libathena-extension-docs.xml:
	* docs/reference/libathena-extension/libathena-extension.types:
	* docs/reference/libathena-extension/version.xml.in:

	Adds initial Gtk-doc support infrastructure for libathena-extension.
	(Progress towards bug #526193).

2008-04-04  Christian Neumair  <cneumair@gnome.org>

	* src/athena-places-sidebar.c (athena_places_sidebar_init),
	(athena_places_sidebar_dispose),
	(athena_places_sidebar_class_init):

	Move finalize to dispose, unset pointers to window/tree_view, use
	eel_preferences_add_callback_while_alive().

2008-04-04  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-extension/athena-file-info.c:
	(athena_file_info_get_parent_info),
	(athena_file_info_get_mount), (athena_file_info_can_write):
	* libathena-extension/athena-file-info.h:
	* libathena-private/athena-file.c:
	(athena_file_info_iface_init):
	Add new APIs for extensions to AthenaFileInfo (can_write, get_mount
	and get_parent_info). (#521612).

2008-04-04  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c (volume_mount_cb),
	(athena_file_operations_mount_volume):
	* libathena-private/athena-file-operations.h:
	* libathena-private/athena-mime-actions.c
	(activation_mount_not_mounted_callback),
	(activation_mount_not_mounted):
	* src/athena-application.c (startup_volume_mount_cb),
	(automount_all_volumes), (volume_added_callback):
	* src/athena-places-sidebar.c (open_selected_bookmark),
	(mount_shortcut_cb):
	* src/athena-window-manage-views.c (mount_not_mounted_callback),
	(got_file_info_for_view_selection_callback):
	Inhibit autorun in mount callbacks after finishing mounts rather than
	before mounting.

	It is neccessary because the mount may take a very long time (floppy,
	password prompt), which may take longer than the inhibition timeout.

	This approach works because with the current HAL volume monitor
	implementation, GVolumeMonitor signal emission is scheduled, while the
	mount callbacks are invoked synchronously.

	This should also fix the not working inhibition on startup, which
	could happen because parallel mounts in the background and the rest of
	the startup process eat resources, so the mounts may also take longer
	than the inhibition timeout.

2008-04-03  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-bookmark.c
	(athena_bookmark_icon_is_different):
	Fix icon comparison if icon has not yet been set.

	* libathena-private/athena-bookmark.c
	(athena_bookmark_update_icon):
	Never update icon if a file has not yet been confirmed.

2008-04-03  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_update_scroll_region):
	Do not make x2/y2 smaller than x1/y2. Fixes flashing scrollbar
	for empty container.

2008-04-03  Tomas Bzatek  <tbzatek@redhat.com>

	* libathena-private/athena-file.c: (update_info_internal):
	Fix SELinux:context attribute display issue

2008-04-02  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_update_scroll_region),
	(lay_down_icons_horizontal), (get_max_icon_dimensions),
	(lay_down_icons_vertical),
	(athena_icon_container_start_renaming_selected_item),
	(athena_icon_container_is_layout_vertical):
	* libathena-private/athena-icon-container.h:
	* src/athena-window.c
	(athena_window_set_initial_window_geometry):
	Subtract 1 from icon rectangle's x2/y2 positions before setting scroll
	area since the entire canvas codes requests 1 px more than it needs.
	Wrap when the icon hits the canvas, rather than wrapping to late.
	Fixes most of the "text besides icons" glitches.

	Add container padding on the RHS for vertical layout, and consider
	max. emblem rectangles when deciding whether to wrap. This may wrap
	slightly to early in some (high zoom level) situations, but we will
	never get scroll glitches.

2008-04-01  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-view-factory.h:
	* src/file-manager/fm-desktop-icon-view.c
	(fm_desktop_icon_view_register):
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c (fm_list_view_register):
	* src/athena-navigation-window.c (load_view_as_menu):
	* src/athena-window-manage-views.c:
	* src/athena-window-manage-views.h:
	* src/athena-window.c (add_view_as_menu_item):
	Remove unused "label" field of AthenaViewInfo and
	athena_window_get_view_label().
	Rename two other fields of AthenaViewInfo and make their use
	more explicit. Remove redundand "View" from view menu label.

2008-04-01  Michael J. Chudobiak  <mjc@svn.gnome.org>

	* libathena-private/athena-file.c: (athena_file_get_icon):
	Skip the thumbnailing of unreadable files. This is more efficient
	than relying on failed thumbnails. (#525594).

2008-04-01  A. Walton  <awalton@svn.gnome.org>

	reviewed by: Cosimo Cecchi
	* HACKING:
	Add advice about patches adding strings to Athena.

2008-04-01  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c: (delete_dir),
	(prompt_empty_trash), (verify_destination), (copy_move_directory),
	(remove_target_recursively), (copy_move_file):
	* libathena-private/athena-mime-actions.c:
	(report_broken_symbolic_link), (activate_files):
	* libathena-private/athena-program-choosing.c:
	(application_cannot_open_location), (athena_launch_application),
	(athena_launch_desktop_file):
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_loading_directory),
	(fm_report_error_renaming_file), (fm_report_error_setting_group),
	(fm_report_error_setting_owner),
	(fm_report_error_setting_permissions):
	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_drag_data_received),
	(create_permissions_page):
	* src/athena-application.c: (athena_application_startup):
	* src/athena-connect-server-dialog-main.c:
	(display_error_dialog):
	* src/athena-connect-server-dialog.c: (connect_to_server):
	* src/athena-emblem-sidebar.c:
	(athena_emblem_sidebar_delete_cb), (rename_dialog_response_cb):
	* src/athena-information-panel.c: (receive_dropped_uri_list):
	* src/athena-property-browser.c: (remove_pattern),
	(remove_emblem), (add_pattern_to_browser):
	* src/athena-window-manage-views.c:
	(display_view_selection_failure):
	Do not use contractions in strings. (#145356).

2008-04-01  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_unmount_mount), (empty_trash_job),
	(athena_file_operations_empty_trash):
	Do not ask twice if we want to empty the trash when unmounting
	a volume. (#525269).

2008-03-31  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-autorun.c
	(should_skip_native_mount_root), (should_autorun_mount):
	Do not automount mount points inside hidden hierarchies (#524075).

2008-03-31  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c
	(lay_down_icons_vertical):
	Reduce vertical space between icons, do not request space at the
	bottom of a column.

2008-03-31  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-canvas-item.c
	(create_label_layout),
	(athena_icon_canvas_item_get_max_text_width):
	* libathena-private/athena-icon-container.c
	(athena_icon_container_start_renaming_selected_item):
	For column layout, do not limit text width if each columns determines
	its own width.

2008-03-30  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-icon-view.c
	(fm_icon_view_real_get_directory_tighter_layout):
	Return FALSE if view does not support tighter layout.

2008-03-30  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-desktop-icon-view.c
	(fm_desktop_icon_view_register):
	Do not translate unused desktop icon view labels.

	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Use "... View" instead of "View as ..." for view menu and dropdown.
	This makes the labels consistent with the preference dialog and with
	the compact view.

2008-03-30  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-properties-window.c
	(get_image_for_properties_window), (update_properties_window_icon),
	(create_image_widget):
	Use icon name for window instead of pixbuf, if available (#519041).

2008-03-29  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.c
	(athena_global_preferences_get_default_folder_viewer_preference_a
	s_iid):
	* libathena-private/athena-global-preferences.h:
	* libathena-private/athena-icon-canvas-item.c
	(create_label_layout),
	(athena_icon_canvas_item_get_max_text_width):
	* libathena-private/athena-icon-container.c
	(lay_down_one_column), (get_max_icon_dimensions),
	(lay_down_icons_vertical), (lay_down_icons_vertical_desktop),
	(lay_down_icons), (size_allocate),
	(athena_icon_container_update_icon),
	(athena_icon_container_set_layout_mode),
	(athena_icon_container_start_renaming_selected_item),
	(athena_icon_container_set_forced_icon_size),
	(athena_icon_container_set_all_columns_same_width):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-private.h:
	* libathena-private/athena-metadata.h:
	* src/file-manager/fm-icon-container.c
	(fm_icon_container_get_icon_images),
	(fm_icon_container_get_icon_text):
	* src/file-manager/fm-icon-view.c
	(get_stored_icon_position_callback),
	(fm_icon_view_supports_manual_layout),
	(fm_icon_view_supports_tighter_layout), (update_layout_menus),
	(fm_icon_view_real_set_directory_sort_reversed),
	(fm_icon_view_get_directory_auto_layout),
	(fm_icon_view_real_get_directory_auto_layout),
	(fm_icon_view_set_directory_auto_layout),
	(fm_icon_view_real_set_directory_auto_layout),
	(fm_icon_view_real_set_directory_tighter_layout),
	(real_supports_manual_layout), (get_default_zoom_level),
	(set_labels_beside_icons), (set_columns_same_width),
	(fm_icon_view_begin_loading), (fm_icon_view_set_zoom_level),
	(fm_icon_view_zoom_to_level),
	(fm_icon_view_restore_default_zoom_level),
	(default_zoom_level_changed_callback),
	(all_columns_same_width_changed_callback),
	(fm_icon_view_set_property), (fm_icon_view_class_init),
	(fm_icon_view_get_id), (fm_icon_view_init), (fm_icon_view_create),
	(fm_compact_view_create), (fm_icon_view_is_compact),
	(fm_icon_view_register):
	* src/file-manager/fm-icon-view.h:
	* src/athena-file-management-properties.c
	(athena_file_management_properties_dialog_setup):
	* src/athena-file-management-properties.glade:
	Added compact view.

2008-03-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-window-manage-views.c:
	(display_view_selection_failure):
	Fix a typo in a string. (#521199).

2008-03-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-progress-info.c:
	(get_progress_window):
	Use title capitalization for the File Operations dialog. (#516353).

2008-03-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-places-sidebar.c: (update_places):
	Show network servers in Places sidebar. Patch by Vincent Untz.
	(#350974).

2008-03-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_invert_selection):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-view.c:
	(athena_view_invert_selection):
	* libathena-private/athena-view.h:
	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(action_invert_selection_callback),
	(fm_directory_view_invert_selection), (real_update_menus),
	(fm_directory_view_class_init):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c: (fm_icon_view_invert_selection),
	(fm_icon_view_class_init):
	* src/file-manager/fm-list-view.c: (fm_list_view_invert_selection),
	(fm_list_view_class_init):
	* src/file-manager/athena-directory-view-ui.xml:
	Add support for "Invert Selection". Patch by Amos Brocco
	<amos.brocco@unifr.ch>. (#305295).

2008-03-29  Christian Neumair  <cneumair@gnome.org>

	* src/athena-application.c
	(athena_application_save_session_to_file), (save_session):
	* src/athena-application.h:
	* src/athena-main.c (main):
	* src/athena-shell.c (open_windows_at_idle), (restart_at_idle):
	When restarting with "athena --restart", use XML file session
	save / load mechanism, instead of writing to / reading from GConf.

2008-03-29  Christian Neumair  <cneumair@gnome.org>

	* src/athena-bookmarks-window.c (create_bookmarks_window),
	(on_button_pressed), (on_key_pressed), (repopulate):
	Write back changes to selected bookmark before changing
	selection (#318278).

2008-03-28  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.23.1
	Gnome 2.22 work continues on gnome-2-22 branch

2008-03-28  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.22.1 ===

2008-03-28  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2008-03-28  A. Walton  <awalton@svn.gnome.org>

	* libathena-private/athena-progress-info.c:
	(get_progress_window):
	Fix annoying behavior of the file progress info dialog jumping
	to the center of the screen when new file operations begin.
	Closes #524241.

2008-03-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (copy_move_file):
	Make sure to queue a move even if the op was a move,
	not just an added event.

2008-03-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	(move_job): 
	Don't leak dest_fs_id by requesting it twice.
	
2008-03-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (copy_move_file):
	During the merge part of a recursive move/copy always
	disable same_fs to make sure we transcode filenames
	correctly, as the target directory may be on another
	filesystem.

2008-03-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	When prepare move fails and we didn't select overwrite
	do not silently overwrite. Instead we remember for each
	file if overwrite was already specified or not.

2008-03-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (move_file_prepare):
	Actually handle the move-file-over-directory case.

2008-03-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-monitor.c:
        (athena_monitor_directory):
	Avoid constantly trying to create directory monitors
	if it fails once by returning an "empty"
	AthenaMonitor instead of NULL.

2008-03-24  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c
	(delayed_rename_file_hack_callback),
	(delayed_rename_file_hack_removed), (rename_file):
	Ensure that the rename file callback data is destroyed. We leaked it
	in case of cancellation.

2008-03-23  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c
	(directory_list_lookup_file), (fm_directory_view_new_folder),
	(paste_clipboard_received_callback),
	(paste_into_clipboard_received_callback),
	(action_paste_files_callback), (action_paste_files_into_callback):
	Ref/unref view before/after receiving clipboard data, and check
	whether it has been disposed. Should fix most of the clipboard crashers.

	* src/file-manager/fm-tree-view.c
	(clipboard_contents_received_callback), (button_pressed_callback),
	(create_popup_menu), (fm_tree_view_init), (fm_tree_view_dispose),
	(fm_tree_view_finalize):
	Cancel activation and destroy popup in dispose() and not in finalize().
	Create popup menu on demand.
	Unref popup file in dispose() instead of leaking a reference.
	Use eel_preferences_add_callback_while_alive() for preferences
	callbacks.
	Also ref/unref before/after requesting clipboard data, and check for
	previous disposal in callback. Should fix rest of clipboard crashers.

2008-03-23  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-icon-view.c (play_file):
	Use playbin for playback, but keep video playback disabled. (#523959).

2008-03-23  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-location-entry.c: do not leak the
	location string when autocompleting.

2008-03-23  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-directory-async.c
	(directory_count_start), (deep_count_load):
	Do not follow symlinks. (#504980).

2008-03-23  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file-operations.c
	(custom_full_name_skip), (custom_basename_skip),
	(custom_size_skip), (custom_time_skip), (custom_mount_skip):
	Fix compiler warnings about unused value by casting va_arg calls with
	unused return values to void. (#523908).

2008-03-22  Christian Neumair  <cneumair@gnome.org>

	* src/file-manager/fm-directory-view.c
	(delayed_rename_file_hack_callback):
	Only start renaming if we have not yet been destroyed.

2008-03-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-program-choosing.c:
	Use GDesktopAppInfos for launching desktop files. (#342084)
	Patch from Cosimo Cecchi.
	
        * src/file-manager/fm-directory-view.c:
        (paste_clipboard_data):
	Fix leak 

2008-03-19  Frederic Crozat  <fcrozat@mandriva.com>

	* libathena-private/athena-link.c:
	Only strip icon name when it ends with a know
	icon extension.

2008-03-19  Alexander Larsson  <alexl@redhat.com>

	* MAINTAINERS:
	Add Christian Neumair as new maintainer

2008-03-19  Sebastian Dröge  <slomo@circular-chaos.org>

	* libathena-private/athena-search-engine-tracker.c:
	(athena_search_engine_tracker_new): Check that tracker is
	actually running before using it (#386512).
	Patch by Josselin Mouette.

2008-03-19  Sebastian Dröge  <slomo@circular-chaos.org>

	* src/file-manager/fm-directory-view.c:
	(action_show_hidden_files_callback): Show backup files too if the
	option for it is set. Showing hidden files and backup files is
	handled exactly the same in athena nowadays (#327361).
	Patch by Stephen Cook.

2008-03-19  Sebastian Dröge  <slomo@circular-chaos.org>

	* src/file-manager/fm-directory-view.c: (file_should_show_foreach):
	Allow "Connect to server" for sftp and ssh shares too (#385608).
	Patch from Mike Hommey.

2008-03-18  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file.c:
	(athena_file_should_show_thumbnail):
	* libathena-private/athena-thumbnails.c: (get_types_table),
	(athena_thumbnail_is_mimetype_limited_by_size):
	* libathena-private/athena-thumbnails.h:
	Always use the thumbnails regardless of the original file size if
	it has been already generated (#501268).
	Also, reimplement image	mimetypes table to determine if we have
	to check for file size limit.


2008-03-17  A. Walton  <awalton@svn.gnome.org>

	* libathena-private/athena-icon-info.h:
	Trivial build fix for users with Gtk+ SVN trunk (#522835), 
	caused by recent changes in Gtk+'s file includes.
	Patch from Marc-Andre Lureau.
	
2008-03-17  Alexander Larsson  <alexl@redhat.com>

        * src/athena-connect-server-dialog-main.c:
        * src/athena-connect-server-dialog-nonmain.c:
        * src/athena-connect-server-dialog.c:
	Mount location when using the external connect
	to server dialog app. (#520390)
	Patch from Cosimo Cecchi <anarki@lilik.it>

2008-03-14  A. Walton  <awalton@svn.gnome.org>

	* src/athena-connect-server-dialog.c
	(bookmark_checkmark_toggled),
	(athena_connect_server_dialog_init):
	Set the bookmark name widget in the connect server dialog insensitive
	if the user doesn't check the add bookmark check button.

2008-03-14  A. Walton  <awalton@svn.gnome.org>

	* libathena-private/athena-bookmark.c
	(athena_bookmark_compare_with):
	Fixes crash if the user doesn't set a name for the bookmark (#522446).

2008-03-14  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-column-chooser.c:
        (button_new_with_mnemonic):
	respect gtk-button-images property for buttons (#514130)
	Patch from Marcin Galazka

2008-03-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-application-chooser.c:
        (set_extension_and_description):
	Don't create application/x-ext-<extension> types for known mimetypes

2008-03-12  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-property-browser.c:
	(make_properties_from_directories):
	Use the correct string to lookup the icons for the emblems.
	(#505111).

2008-03-12  Tomas Bzatek  <tbzatek@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Fix a crash while changing owner

2008-03-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.22.0 ===

2008-03-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump to 2.22.0

        * AUTHORS:
        * NEWS:
        * THANKS:
        * check-THANKS.pl:
	Update for release.

2008-03-07  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c:
	(callback_for_move_to_trash):
	Fix a crash due to a missing NULL check (#520947).

2008-03-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-bookmark.c:
        (athena_bookmark_uri_known_not_to_exist):
	Fix this check to actually only access local
	files, not fuse-based gvfs paths.

2008-03-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-container.c:
        (athena_icon_container_update_icon):
	Remove dead code
	
        * libathena-private/athena-icon-info.c:
        (athena_icon_info_lookup):
	Resize custom icons (#513102)

2008-03-06  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (add_template_to_templates_menus): 
	Avoid crashing if no pixbuf for menu icon. (#513719)
	
2008-03-06  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.c:
	Avoid showing broken icons for the media type list (#519880)

2008-03-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (trash_files):
	Fix delete all button (#518616)
	Patch from Rached Ben Mustapha

2008-03-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        (athena_file_can_set_permissions):
	Try to set permissions on remote shares. (#520572)

2008-03-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-autorun.c (_g_mount_guess_content_type):
	Only look for autorun stuff for local files.
	We can't generally exec stuff for non-local files anyway,
	and is a performance hit to do the check.

2008-03-05  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-autorun.[ch]:
	Add async x-content type getter, change sync one
	to only read the cached value
	
        * src/file-manager/fm-directory-view.c:
        * src/athena-window-manage-views.c:
	Get x-content type async

2008-03-04  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_set_display_name):
	Handle the case of empty display name as if it wasn't specified.

2008-02-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* athena-computer.desktop.in.in:
	* athena-folder-handler.desktop.in.in:
	* athena-home.desktop.in.in:
	Computer, Home and Open Folder .desktop files should only show in
	GNOME. Patch from Federico Mena Quintero. (#350947)

2008-02-29  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-file-management-properties.c:
	(update_icon_captions_from_gconf):
	Fix a crasher when reading NULL values from GConf. (#518974)

2008-02-28  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-file.c: (athena_file_get_gicon):
	Handle NULL file.
	* src/athena-bookmark-list.c: (athena_bookmark_list_load_file):
	Ignore lines beginning with a space (#512593).

2008-02-28  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
        (file_should_show_foreach):
	Add mount entry for mountables, not unmount (#519056)
	
2008-02-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-progress-info.c:
	Use better icon for system tray. (#518644)
	Patch from Michael Monreal

2008-02-07  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-metafile.c: (metafile_read_state_free):
	Handle NULL state (#512042).
	* src/athena-pathbar.c: (athena_path_bar_finalize): Disconnect
	trash monitor signal (#519050).

2008-02-26  Alexander Larsson  <alexl@redhat.com>

	* src/athena-autorun-software.c (autorun):
	Fix typo in string

2008-02-25  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.21.92 ===

2008-02-25  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require glib 2.15.6

	* NEWS:
	Update for release
	
2008-02-25  Alexander Larsson  <alexl@redhat.com>

        * src/athena-autorun-software.c:
	Show dialog on autorun errors

2008-02-25  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-properties-window.c:
	Don't show permissions for computer.
	Make "open with tab" consistent for computer and trash.
	Patch from Cosimo Cecchi (#518131)

2008-02-25  Alexander Larsson  <alexl@redhat.com>

        * src/athena-window-manage-views.c:
        (got_file_info_for_view_selection_callback):
	Fix AthenaFile leak.
	Patch from Christian Neumair

2008-02-25  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-container.[ch]:
        * src/file-manager/fm-directory-view.[ch]:
        * src/file-manager/fm-icon-view.c:
	Fixes the icon position when creating a new folder,
	and the view is zoomed.
	Patch from Christian Neumair

2008-02-25  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-info.c (athena_icon_info_new_for_icon_info):
	Fix s/display_name/filename/ typo (#515903)
	Fixes blurry window icons
	Patch from Christian Neumair

2008-02-25  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-properties-window.c:
	Allow theming of chart colors (#478471)
	Patch from Baris Cicek

2008-02-25  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (is_uri_relative):
	g_uri_get_scheme -> g_uri_parse_scheme

2008-02-25  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-mime-actions.c (activation_mountable_mounted):
	Don't display error on G_IO_ERROR_FAILED_HANDLED.

2008-02-22  David Zeuthen  <davidz@redhat.com>

	* libathena-private/athena-autorun.c:
	(autorun_dialog_response), (do_autorun_for_content_type):
	Actually handle when the user presses the Eject or Unmount button.

	* src/athena-window-manage-views.c: (found_mount_cb),
	(update_for_new_location):
	* src/athena-window-private.h:
	* src/athena-window.c: (athena_window_finalize):
	Find the mount for the window, used for determining if a x-content
	clue bar should be shown, async.

2008-02-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
        (activation_mount_not_mounted):
	Don't crash if all files were removed due to error
	when activating.

2008-02-22  Chrustian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_get_selected_icons),
	(athena_icon_container_get_selected_icon_locations),
	(stop_rubberbanding): Add
	athena_icon_container_get_selected_icons(). Use icon as range
	selection base if it has been rubberbanded. Fixes #512894.

2008-02-21  Vincent Untz  <vuntz@gnome.org>

	Bring back the Connect to dialog. It still needs some work, but it's
	better than nothing.

	* libathena-private/athena-bookmark.c: (athena_bookmark_new):
	Actually save the name in the bookmark, instead of forgetting it.

	* src/Makefile.am: Updated to build the connect dialog stuff.
	* src/athena-connect-server-dialog-main.c: (show_uri),
	(athena_connect_server_dialog_present_uri), (main):
	Port to gio. We use g_app_info_launch_default_for_uri() to open the
	URI, but it will need some more work because it doesn't automount the
	URI.
	* src/athena-connect-server-dialog-nonmain.c:
	(athena_connect_server_dialog_present_uri): Trivial update.
	* src/athena-connect-server-dialog.[ch]: (get_method_description),
	(athena_connect_server_dialog_finalize), (connect_to_server),
	(response_callback), (setup_for_type), (display_server_location),
	(athena_connect_server_dialog_init),
	(athena_connect_server_dialog_new): Port to gio. Add bookmark saving
	feature, to replace the old gnome-vfs network volumes. Remove the
	Browse button, which isn't really needed there. Needs some more polish.
	* src/athena-shell-ui.xml: Uncomment the "Connect to" action
	* src/athena-window-menus.c: (action_connect_to_server_callback):
	Uncomment code to make use of the dialog

2008-02-21  David Zeuthen  <davidz@redhat.com>

	* libathena-private/athena-autorun.c: (should_autorun_mount):
	Use g_volume_should_automount() to determine if we should autorun
	programs on a mount.

	* libathena-private/athena-directory-async.c:
	(athena_directory_set_up_request),
	(athena_async_destroying_file), (lacks_filesystem_info),
	(wants_filesystem_info), (request_is_satisfied),
	(directory_count_start), (mime_list_start),
	(filesystem_info_cancel), (filesystem_info_stop),
	(filesystem_info_state_free), (got_filesystem_info),
	(query_filesystem_info_callback), (filesystem_info_start),
	(start_or_stop_io), (athena_directory_cancel),
	(cancel_filesystem_info_for_file), (cancel_loading_attributes),
	(athena_directory_cancel_loading_file_attributes):
	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-file-attributes.h: Add new
	filesystem info attribute; right now two bits in AthenaFile's
	private structure are set; the filesystem::use-preview and
	filesystem:readonly.

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_mount_volume):
	* src/athena-places-sidebar.c: (open_selected_bookmark),
	(mount_shortcut_cb): Don't inhibit automount from
	athena_file_operations_mount_volume() because then everything
	will be inhibited as the mount_added callback use it as
	well. Rather, move the call to inhibit out to the proper call
	sites.

	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c:
	(athena_file_get_filesystem_use_preview),
	(athena_file_should_show_thumbnail),
	(get_speed_tradeoff_preference_for_file),
	(athena_file_get_mount):
	* libathena-private/athena-file.h:
	* src/file-manager/fm-directory-view.c: (load_directory):
	* src/file-manager/fm-icon-view.c: (should_preview_sound):
	* src/athena-window-manage-views.c: (update_for_new_location):
	Use the new filesystem::use-preview hint to determine if we should
	preview non-native files (such as gphoto2:// and cdda://
	mounts). 

2008-02-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-application.c: (find_parent_spatial_window):
	Stop closing parent windows at Desktop in spatial mode only if it's
	not explicitly opened in a spatial window. (#515180).

2008-02-21  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/athena-pathbar.c: (trash_state_changed_cb),
	(athena_path_bar_init):
	Update the trash icon on the pathbar according to the trash state.
	(#332162).

2008-02-20  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-mime-application-chooser.c:
	(get_extension_from_file), (set_uri_and_type_for_multiple_files):
	Finish work on open with tab with multiple files selected. (#343930).

2008-02-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-application-chooser.[ch]:
        * libathena-private/athena-open-with-dialog.[ch]:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
	Initial work on open with tab with multple selected
	files. (#343930)
	Patch from Cosimo Cecchi

2008-02-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Duplicate if src and dest dirs are the same (#512392)

2008-02-20  Alexander Larsson  <alexl@redhat.com>

        * src/athena-main.c:
	Call eel_debug_shut_down() after freeing
	AthenaApplications (fixes warning about
	bookmark leaks).
	Pointed out by Christian Neumair
	
2008-02-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-info.c:
        (athena_icon_info_get_pixbuf_nodefault_at_size):
        (athena_icon_info_get_pixbuf_at_size):
	Don't scale icons if not needed (#515903)
	Patch from Christian Neumair

2008-02-19  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-tree-model.[ch]:
        Add fm_tree_model_iter_compare_roots to compare roots
        Report dummy rows added before reporting has_child_toggled.
	
        * src/file-manager/fm-tree-view.c:
        (compare_rows):
	Use fm_tree_model_iter_compare_roots when comparing roots
	to force a stable sort, because GtkTreeModelSort isn't stable.

2008-02-19  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c:
	(delete_job_done), (delete_job), (trash_or_delete_internal),
	(callback_for_move_to_trash), (athena_file_operations_copy_move):
	* libathena-private/athena-file-operations.h:
	* src/file-manager/fm-directory-view.c:
	(trash_or_delete_selected_files), (trash_or_delete_done_cb),
	(trash_or_delete_files), (action_location_trash_callback):
	Reset selection_was_removed in FMDirectoryView if the user
	cancels the deletion from trash (#337937).

2008-02-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-clipboard.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/fm-list-view.c:
        * src/athena-navigation-window-menus.c:
        * src/athena-spatial-window.c:
        * src/athena-window-menus.c:
	Move comments around to help translators (#463616)
	Patch from Yann Simon

2008-02-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/Makefile.am:
        * libathena-private/athena-file-operations-progress-icons.h:
        * libathena-private/athena-file-operations-progress.[ch]:
	Removed unused files. (#515259)
	
        * libathena-private/athena-file-operations.c:
	Don't include removed file

2008-02-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        (link_info_athena_link_read_callback):
	Avoid free of random memory if desktop file reading
	failed.

2008-02-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-dnd.c:
        (athena_drag_build_selection_list):
	Don't build selection list in wrong order. (#330357)

2008-02-15  Cosimo Cecchi  <cosimoc@gnome.org>

	* src/file-manager/fm-properties-window.c:
	(should_show_custom_icon_buttons):
	Fix typo, now you can set custom icons again. (#512795)

2008-02-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
        * libathena-private/athena-vfs-file.c:
	Fix checking when to display errors (#514135)

2008-02-14  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (report_copy_progress):
	Only change progress status string as needed when
	copying. This avoids a lot of I/O ops to get the
	name.

2008-02-14  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	ask before emptying the trash or deleting files (#509877)
	Patch from Cosimo Cecchi and Luca Ferretti

2008-02-14  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-properties-window.[ch]:
	Close properties dialog on escape (#515620)
	Patch from Cosimo Cecchi

2008-02-14  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Don't ref parent window during operation, as this
	could lead to some crash when the gtkuimanager is updated
	but the child widgets were destroyed. Instead use
	a weak ref.

2008-02-13  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
	Handle beagle >= 0.3.0

2008-02-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-bookmark.c (athena_bookmark_compare_with):
	Fix bookmark comparison (#516214)
	Patch from Cosimo Cecchi

2008-02-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-progress-info.c:
	Allow minimize of progress window (#512778)
	Patch from Cosimo Cecchi

2008-02-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-progress-info.[ch]:
        * libathena-private/athena-file-operations.c:
	Add paused status to progress infos and use it
	to avoid poping up the progress dialog while dialogs
	are up. (#512406)
	Patch from Cosimo Cecchi
	
2008-02-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-dnd.c:
	If using composite, make dnd icons partially transparent.
	
2008-02-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-canvas-item.[ch]:
        * libathena-private/athena-icon-dnd.c:
	Support alpha icons during DnD on composited screens. (#500084)
	Patch from Alexander "weej" Jones

2008-02-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-link.c:
        (athena_link_get_link_icon_from_desktop):
	Strip extension from non-absolute-filename icons.
	This fixes icons for some old-school desktop files.

2008-02-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-file-private.h:
	Add athena_file_is_launcher()
	
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-dnd.c:
        * libathena-private/athena-link.[ch]
        * libathena-private/athena-mime-actions.c:
        * libathena-private/athena-program-choosing.[ch]:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-tree-view.c:
	Remove weird desktop-file: and command: hacks, and
	replace with usage and implementation of
	athena_file_is_launcher().
	This fixes some problems where the old desktop-file uri
	was interpreted as an actual file.

2008-02-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (verify_destination):
	Don't free NULL GError.

2008-02-12  Cosimo Cecchi  <cosimoc@gnome.org>

	* libathena-private/athena-file-operations.c:
	Remove unneeded gnome-vfs includes.

2008-02-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
        (mime_application_hash):
	Fix 64bit build (#515896)

2008-02-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post-release version bump

=== athena 2.21.91 ===

2008-02-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require glib 2.15.5

	* NEWS:
	Update for release

2008-02-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-progress-info.[ch]:
        * libathena-private/athena-file-operations.c:
	Make progress setting be ratio based and not
	percent based and then ensure we handle division
	by zero correctly in all cases.

2008-02-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-mime-actions.c:
        * libathena-private/athena-vfs-file.c:
        * src/athena-application.c:
        * src/athena-window-manage-views.c:
	Update for new gio mount flags argument

2008-02-11  Alexander Larsson  <alexl@redhat.com>

	* src/athena-places-sidebar.c (update_places):
	Fix leak of volumes list.
	Pointed out by Vincent Untz

2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-autorun.c:
	C89 fix. (#515093)

2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * src/athena-application.c:
	Use the new g_volume_should_automount()

2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-link.c:
	Maks sure we disconnect from the changed
	signal on the mount.

2008-02-08  Olav Vitters  <olav@bkor.dhs.org>

	* HACKING: Change CVS things into SVN.

2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-link.c:
        (mount_changed_callback):
        (athena_desktop_link_new_from_mount):
	Handle changes of GMount objects

2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
	Fix open and open with menu display in
	always-use-browser mode.
	
2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
	Make sure delete-from-trash is correctly sensitive.
	(#514039)

2008-02-08  Alexander Larsson  <alexl@redhat.com>

        * test/test-athena-search-engine.c:
        (main):
	Initialize threads (#515031)

2008-02-07  Luca Ferretti  <elle.uca@libero.it>

	* configure.in:
	libbackground is now using LIBBACKGROUND_{CFLAGS,...}, unbreak
	the build.

2008-02-07  A. Walton <awalton@svn.gnome.org>
	* configure.in:
	* libathena-private/athena-emblem-utils.c:
	(is_reserved_keyword):
	* libathena-private/athena-file.c:
	(athena_file_fit_date_as_string):
	* src/file-manager/fm-list-model.c: (fm_list_model_get_value):
	Remove deprecated GLib symbols and build with -DG_DISABLE_DEPRECATED.

2008-02-07  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-dnd.c:
	Rewrite the desktop uri to the real uri on
	uri-list drops (i.e. from other apps) (#511764)

2008-02-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.c (athena_find_file_insensitive_next):
	Don't crash if parent doesn't exist (#512636)
	Move exact change before key generation to avoid leak.

2008-02-06  Alexander Larsson  <alexl@redhat.com>

        * src/athena-window-manage-views.c:
        (athena_window_reload):
	Selection is already GFiles now, no need to
	convert from uris (#514458)
	Patch from John Millikin

2008-02-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        (directory_load_one):
	Avoid crashing if gvfs backend gives NULL as name for
	a new file. (#511601)

2008-02-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Change how we handle cancellation of the directory count
	and mime list for files in a directory. We now make sure
	that the callback for the cancelled operation is run before
	starting a new one.
	
	This was causing problems when viewing a directory that had
	a subdirectory getting a lot of new files added, as for each
	new file added the directory count would be cancelled and
	re-started, leading to lots of outstanding (cancelled)
	operations. Each of these was using a file descriptor for
	the readdir operation, which wasn't really leaking (it was
	eventually freed) but could cause temporary out-of-fd errors.

	Perhaps we should do something similar for all kinds of
	operations, but its worst for dir count and mime list due to
	athena_directory_invalidate_count_and_mime_list() which is
	called on file creation.

2008-02-05  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (custom_basename_to_string):
	Escape characters that won't work in GMarkup.

2008-02-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-autorun.c:
	Don't autorun non-local mounts.

2008-02-04  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-dnd.c ()
	(athena_drag_default_drop_action_for_icons):
	Default to move when dragging from trash.

2008-02-04  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (create_permissions_page):
	Only show selinux context if HAVE_SELINUX.
	
2008-02-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Don't follow symlinks when emptying trash (#513912)

2008-02-01  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
	Handle GAppInfos having NULL id

2008-01-30  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-autorun.[ch]:
	Add functions to inhibit autorun for a volume
	or for the volume of a file.
	
        * src/athena-application.c:
	Convert automount code to new way to inhibit autorun.
	
        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-mime-actions.c:
        * libathena-private/athena-vfs-file.c:
        * src/athena-window-manage-views.c:
	Inhibit autorun if we manually mount stuff.

2008-01-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (report_link_progress):
	Fix string wrt plural

2008-01-28  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.21.90 ===

2008-01-28  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Update version to 2.21.90

2008-01-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-autorun.c:
	Better finding of case insensitive files. (#511450)
	
        * libathena-private/athena-file-utilities.[ch]:
        Add athena_find_file_insensitive

	Based on patch from John Millikin

2008-01-28  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
	Enable paste into folder for volume links (#386800)
	Based on patch from John Millikin

2008-01-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        (thumbnail_done):
	Don't reference thumb_mtime_str if its not
	set, fixing a crash on zoom in. (#511406)
	Patch from John Millikin

2008-01-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (report_count_progress):
	Use ngettext for number of files strings. (#512203)
	Patch from Vasiliy Faronov

2008-01-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-metafile.c:
        (escape_slashes):
	Escape slashes in the same way as old versions,
	fixing loss of metadata customization.
	Patch from Rached Ben Mustapha (#511592)

2008-01-25  Soren Sandmann  <sandmann@redhat.com>

	* libathena-private/athena-directory-background.c
	(athena_connect_desktop_background_to_file_metadata): Remove
	call of noop eel_background_set_is_constant()

2008-01-25  Matthias Clasen  <mclasen@redhat.com>

	* libathena-private/athena-file-operations.c: Update all
	GIOSchedulerJobFunc callbacks to return FALSE.

2008-01-24  Luca Ferretti  <elle.uca@libero.it>

	reviewed by: Alexander Larsson

	* libathena-private/Makefile.am:
	* libathena-private/athena-icon-names.h

	Add a new file to define icon names, like
	  #define ATHENA_ICON_HOME "user-home"
	using named icons from fd.o icon naming spec.
	
	* libathena-private/athena-desktop-link.c:
	(athena_desktop_link_new):
	* libathena-private/athena-link.c:
	(athena_link_get_link_icon_from_desktop):
	* libathena-private/athena-trash-monitor.c: (update_info_cb),
	(athena_trash_monitor_init):
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-tree-view.c: (create_popup_menu),
	(create_tree):
	* src/athena-bookmark-list.c: (new_bookmark_from_uri):
	* src/athena-connect-server-dialog-main.c: (main):
	* src/athena-desktop-window.c: (real_get_icon):
	* src/athena-main.c: (main):
	* src/athena-pathbar.c: (get_icon_for_file_path),
	(get_button_image), (is_file_path_mounted_mount),
	(make_directory_button):
	* src/athena-places-sidebar.c: (update_places),
	(bookmarks_drop_uris):
	* src/athena-window-menus.c:

	Include athena-icon-name.h and use its icons defines.
	This means that now Athena is using "user-home",
	"user-desktop", "folder", "user-trash*", "computer", 
	"drive-harddisk", "folder-remote", "network-workgroup",
	and "text-x-generic-template".

	* src/network-scheme.desktop.in:
	* athena-computer.desktop.in.in:
	* athena-file-management-properties.desktop.in.in:
	* athena-folder-handler.desktop.in.in:
	* athena-home.desktop.in.in:
	* athena.desktop.in.in:

	Use icons from fd.o spec here too. In details, we have
	 Launcher       | New Icon
	----------------+----------------------
	Computer        | computer
	File Browser    | system-file-manager
	Open Folder     | folder-open
	Home Folder     | user-home
	File Management | system-file-manager
	Network		| network-workgroup

	For other details see bug #407130.

2008-01-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Don't leak enumerators
	
        * libathena-private/athena-trash-monitor.c:
	Don't leak file info

	Fixes from Matthias Clasen

2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-extension/athena-column.c:
	Add attribute_q property that is the Quark
	of the attribute property.
	
        * src/file-manager/fm-icon-container.c:
        * src/file-manager/fm-list-model.[ch]:
        * src/file-manager/fm-list-view.c:
	Use the quark versions of the string attribute
	calls for better performance.

2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
	Add quark-bases string-attribute accessors.
	Store extension infos as quarks

2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        (athena_file_invalidate_extension_info_internal):
        (athena_file_add_string_attribute):
	Lazily allocate the extension info hashtable.
	Internalize the extension info attribute names.

2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        (athena_file_get_emblem_pixbufs):
	Don't leak AthenaIconInfo

2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-bookmark.c:
        (athena_bookmark_get_pixbuf):
	Don't leak icon
	
        * libathena-private/athena-cell-renderer-pixbuf-emblem.c:
	Indentation fixups
	
        * libathena-private/athena-icon-info.c:
        (athena_icon_info_get_pixbuf_nodefault):
	Only set toggle ref first time we get a pixbuf request.
	
2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * src/athena-main.c:
        (main):
	Clear caches on shutdown to help track leaks.

2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        (get_description):
        (update_description_for_link):
	Fix leak of description
	
        * libathena-private/athena-metafile.c:
        (set_metafile_contents):
	fix leak of xmlName.

2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/apps_athena_preferences.schemas.in:
        * libathena-private/athena-file-operations.c:
        * src/Athena_shell.server.in:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/athena-connect-server-dialog-main.c:
        * src/athena-file-management-properties.glade:
        * src/athena-navigation-window-menus.c:
	Clean up strings for l10n. (#510327)

2008-01-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-progress-info.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
	Use thousands separators (#41455)

2008-01-21  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.21.6 ===

2008-01-21  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Bump glib requirement to 2.15.3

2008-01-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
	Fix up indentation
	
        * libathena-private/athena-file.c:
	Allow umount and eject for AthenaFiles that have
	a GMount. (e.g. unix mountpoints)

2008-01-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-autorun.c:
        * src/athena-autorun-software.c:
	Fix coding style

2008-01-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-program-choosing.c:
	Just use get_activation_location instead of all
	the unnecessary special casing.
	
        * libathena-private/athena-autorun.[ch]:
        * src/file-manager/fm-directory-view.c:
        * src/athena-window-manage-views.c:
	Use athena_file_get_mount() to do the
	x-content type detection.

2008-01-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        Add athena_file_get_activation_location.
	
        * libathena-private/athena-directory-async.c:
	Get mounts from mountable files too.
	
2008-01-18  Alexander Larsson  <alexl@redhat.com>

        * src/athena-x-content-bar.c:
	Don't free result of g_app_info_get_icon ().

2008-01-17  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-file.c:
	Implement reading the mount attribute
	(not used or tested yet)

2008-01-17  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-file-attributes.h:
        * libathena-private/athena-file-private.h:
	Add GMount attribute to AthenaFile.
	(not implemented yet)
	
        * Makefile.am:
        * configure.in:
        * data/athena.xml.in:
        * libathena-private/apps_athena_preferences.schemas.in:
        * libathena-private/athena-autorun.[ch]:
        * libathena-private/athena-global-preferences.c:
        * libathena-private/athena-global-preferences.h:
        * libathena-private/athena-program-choosing.c:
        * src/Makefile.am:
        * src/file-manager/fm-directory-view.c:
        * src/athena-application.c:
        * src/athena-autorun-software.c: Added.
        * src/athena-file-management-properties.c:
        * src/athena-file-management-properties.glade:
        * src/athena-window-manage-views.c:
        * src/athena-x-content-bar.[ch]: Added.
	More work on autorun and x-content types from David Zeuthen

2008-01-16  Alexander Larsson  <alexl@redhat.com>

        * src/athena-application.c:
        (find_parent_spatial_window):
	unref, not free the GFile.
	Fixes crash in close parent windows (#509821)

2008-01-16  Alexander Larsson  <alexl@redhat.com>

        * src/athena-file-management-properties.c:
        (athena_file_management_properties_dialog_setup):
	Fix help crash by actually owning a ref to 
	xml_dialog. (#509835)

2008-01-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-dnd.[ch]:
	Add athena_drag_uris_local
	
        * libathena-private/athena-tree-view-drag-dest.c:
	Don't copy/move files if you dnd within the same
	location (#508216)

2008-01-15  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
	Selection lists are GFiles now, not uris (#505944)

2008-01-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-application-chooser.c:
        (athena_mime_application_chooser_finalize):
	Disconnect mime changed handler

2008-01-15  Alexander Larsson  <alexl@redhat.com>

        * src/athena-file-management-properties.c:
        (athena_file_management_properties_dialog_response_cb):
	Don't crash when exiting separate properties app. (#505687)
	
        * src/athena-window.c:
        (athena_window_update_icon):
	Unref pixbuf inside != NULL block.

2008-01-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Honor mtime specified in thumbnail (#504833)

2008-01-14  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.21.5 ===

2008-01-14  Alexander Larsson  <alexl@redhat.com>

        * src/athena-application.c:
	Correct includes

	* NEWS:
	Update for release

	* configure.in:
	Update version to 2.21.5
	Require eel 2.21.5
	
2008-01-14  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require glib 2.15.2

        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-monitor.c:
        * libathena-private/athena-trash-monitor.c:
        * src/athena-bookmark-list.c:
	Update to new gio API.

2008-01-14  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
        (search_in_menu_items):
        (extension_action_callback):
	Check recursively for valid menu items (#508878)
	Patch from Choe Hwanjin.

2008-01-14  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-ui-utilities.c:
        (extension_action_sensitive_callback):
        (athena_toolbar_action_from_menu_item):
	Update toolbar item sensitivity if menu item changes.

2008-01-14  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
	Add check_trash arg to athena_file_operations_unmount_mount.
	Add athena_file_operations_mount_volume().
	
        * libathena-private/athena-desktop-icon-file.c:
        * src/athena-places-sidebar.c:
        * src/file-manager/fm-tree-view.c:
	Update to API change.
	
        * data/athena.xml.in:
        * libathena-private/Makefile.am:
        * libathena-private/apps_athena_preferences.schemas.in:
        * libathena-private/athena-autorun.[ch]: Added.
        * libathena-private/athena-global-preferences.[ch]:
        * src/athena-application.c:
        * src/athena-file-management-properties.c:
        * src/athena-file-management-properties.glade:
	Add new autorun setup (by David Zeuthen)

2008-01-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
	Add athena_file_has_activation_uri.
	Don't show can't write emblems if you can't
	write in the parent either.
	
        * libathena-private/athena-mime-actions.c:
	Don't launch mountables that have no activation uri.

2008-01-10  Sven Herzberg  <herzi@gnome-de.org>

	Don't check for unportable functions, fixes #396923

	Reviewed by Alex.

	* configure.in: don't check for unportable functions to modify the
	environment
	* src/athena-main.c: don't use putenv(), use g_unsetenv()

2008-01-10  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
	Use athena_file_can_delete() to control sensitivity
	of delete menu item.

2008-01-10  Luca Ferretti  <elle.uca@libero.it>

	* icons/colors.png:
	* icons/backgrounds.png:
	* icons/emblems.png:
	New Tango icons from Ulisse Perusin (see bug #374722).

2008-01-10  Luca Ferretti  <elle.uca@libero.it>

	* data/icons/16x16/apps/Makefile.am:
	* data/icons/22x22/apps/Makefile.am:
	* data/icons/24x24/apps/Makefile.am:
	* data/icons/32x32/apps/Makefile.am:
	* data/icons/scalable/apps/Makefile.am:
	Run gtk-update-icon-cache one one when exiting from
	icons directory. Not needed to repeat it 5 times.

2008-01-10  Luca Ferretti  <elle.uca@libero.it>

	* configure.in:
	* data/Makefile.am:
	* data/icons/*:
	* icons/Makefile.am:
	* icons/appicon/*:
	Move "athena" named icon from icon/appicon to data/icons
	matching the directory and naming structure of other GNOME
	projects.

	This will also help if we'll need to add custom themeable
	icons.

2008-01-10  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
        (cancel_activate_callback):
	Fix assertion crash on cancel.

2008-01-09  A. Walton  <awalton@svn.gnome.org>

	* libathena-private/athena-file-operations.c:
	(verify_destination):
	Non-strdup()'d string potentially free()'d.

2008-01-09  A. Walton  <awalton@svn.gnome.org>

	* libathena-private/athena-file-operations.c:
	(move_file_prepare):
	Remove bad g_error_free()'s causing crashes while 
	merging files.

2008-01-09  Alexander Larsson  <alexl@redhat.com>

        * src/Makefile.am:
	EXTRA_DIST the currently not built
	connect to server dialogs.

2008-01-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.21.2 ===

2008-01-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2008-01-08  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-vfs-file.c:
        * src/file-manager/fm-directory-view.c:
	Remove unused callbacks in athena_file_unmount/eject.
	Patch from Tomas Bzatek <tbzatek@redhat.com>

2008-01-08  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-vfs-file.c:
	Implement some missing mount/unmount functionallity.
	Patch from Tomas Bzatek <tbzatek@redhat.com>

2008-01-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump glib req to 2.15.1

2008-01-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-thumbnails.c (get_file_mtime):
	Fix memleak.

2008-01-07  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-monitor.c:
        * libathena-private/athena-trash-monitor.c:
	Update to new gio API

2008-01-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-extension/libathena-extension.pc.in:
	Pull in gio, not gnome-vfs.
	
        * libathena-extension/athena-file-info.[ch]:
        * libathena-private/athena-file.c:
	Export some gio specific things like file type and
	location/parent location.
	
        * libathena-private/athena-desktop-icon-file.c:
	These are G_FILE_TYPE_SHORTCUT files, not REGULAR files.

2008-01-04  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
        * src/athena-main.c:
	Set desktop env for GAppInfo
	
        * libathena-private/athena-open-with-dialog.c:
	Filter out apps that don't take file args from
	open with list.

2008-01-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (delete_job):
	Remove unnecessary delete_if_all_already_in_trash boolean.
	
2008-01-03  Cosimo Cecchi  <cosimoc@svn.gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	Fix a typo.

2007-12-24  Brian Pepple  <bpepple@fedoraproject.org>

	* libathena-extension/libathena-extension.pc.in (extensiondir):
	* libathena-extension/libathena-extension-uninstalled.pc.in (extensiondir):
	Update to use extensions-2.0 dir.

2007-12-27  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-dnd.c:
        (athena_drag_default_drop_action_for_icons):
	Default dnd of desktop icons to move. (#504824)
	Based on patch by Cosimo Cecchi

2007-12-20  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.21.1 ===

2007-12-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_self_check_file):
	Fix old test

	* NEWS: 
	Update for release

	* configure.in:
	Remove gnome-vfs requirement
	Bump glib and eel requirements
	
2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
	Correct check for require_uri.
	Small performance fix

2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
	Missed one "std" in the conversion

2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-customization-data.c:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-dnd.c:
        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-icon-dnd.c:
        * libathena-private/athena-link.c:
        * libathena-private/athena-search-engine-simple.c:
        * libathena-private/athena-trash-monitor.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/athena-pathbar.c:
        * src/athena-property-browser.c:
	Update to new gio file attribute names

2007-12-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        * src/athena-places-sidebar.c:
	Update to new gio api

2007-12-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
	Update for glib API change.

2007-12-19  David Zeuthen  <davidz@redhat.com>

	Don't put up error dialogs if the error code is
	G_IO_ERROR_FAILED_HANDLED.

	* libathena-private/athena-file-operations.c:
	(unmount_mount_callback):
	* src/athena-places-sidebar.c: (volume_mount_cb),
	(drive_eject_cb), (volume_eject_cb), (mount_eject_cb),
	(drive_poll_for_media_cb):

2007-12-17  Alexander Larsson  <alexl@redhat.com>

        * src/athena-main.c:
        (setup_debug_log_signals):
	Disable unsafe segv handler by default

2007-12-14  David Zeuthen  <davidz@redhat.com>

	* libathena-private/athena-desktop-icon-file.c:
	(update_info_from_link):
	* libathena-private/athena-desktop-link-monitor.c:
	(volume_delete_dialog):
	* src/file-manager/fm-tree-view.c: (button_pressed_callback),
	(fm_tree_view_unmount_cb):
	* src/athena-pathbar.c: (athena_path_bar_class_init):
	* src/athena-places-sidebar.c: (check_visibility),
	(volume_mount_cb), (open_selected_bookmark), (mount_shortcut_cb),
	(drive_eject_cb), (volume_eject_cb), (mount_eject_cb),
	(eject_shortcut_cb):

	Update for API changes in gio trunk.

2007-12-14  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-monitor.c:
        * libathena-private/athena-open-with-dialog.c:
	Update to new flags API

2007-12-14  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-bookmark.c:
        * libathena-private/athena-bookmark.h:
        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-desktop-link-monitor.c:
        * libathena-private/athena-desktop-link.c:
        * libathena-private/athena-desktop-link.h:
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.h:
        * libathena-private/athena-emblem-utils.h:
        * libathena-private/athena-file-changes-queue.h:
        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file-operations.h:
        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-file-utilities.h:
        * libathena-private/athena-file.c:
        * libathena-private/athena-file.h:
        * libathena-private/athena-icon-info.c:
        * libathena-private/athena-icon-info.h:
        * libathena-private/athena-link.c:
        * libathena-private/athena-mime-actions.h:
        * libathena-private/athena-mime-application-chooser.c:
        * libathena-private/athena-monitor.c:
        * libathena-private/athena-monitor.h:
        * libathena-private/athena-open-with-dialog.c:
        * libathena-private/athena-open-with-dialog.h:
        * libathena-private/athena-program-choosing.c:
        * libathena-private/athena-program-choosing.h:
        * libathena-private/athena-progress-info.h:
        * libathena-private/athena-recent.h:
        * libathena-private/athena-search-directory.c:
        * libathena-private/athena-search-engine-simple.c:
        * libathena-private/athena-trash-monitor.c:
        * libathena-private/athena-trash-monitor.h:
        * libathena-private/athena-ui-utilities.c:
        * libathena-private/athena-view-factory.h:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-directory-view.h:
        * src/file-manager/fm-icon-container.c:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/fm-tree-model.h:
        * src/file-manager/fm-tree-view.c:
        * src/athena-application.c:
        * src/athena-application.h:
        * src/athena-bookmark-list.c:
        * src/athena-bookmark-list.h:
        * src/athena-desktop-window.c:
        * src/athena-image-properties-page.c:
        * src/athena-location-entry.c:
        * src/athena-navigation-window.c:
        * src/athena-pathbar.c:
        * src/athena-pathbar.h:
        * src/athena-places-sidebar.c:
        * src/athena-property-browser.c:
        * src/athena-query-editor.c:
        * src/athena-window-menus.c:
	Only use <gio/gio.h> include 

2007-12-14  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Update to gioscheduler.h changes

2007-12-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.c:
        * src/athena-window-manage-views.c:
	Update for g_mount_for_location to g_file_mount_enclosing_volume change.

2007-12-12  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
        (new_folder_done):
	Remove spew
        (add_submenu):
        (add_submenu_to_directory_menus):
	Avoid creating three copies of template menu actions

2007-12-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file-utilities.c:
	Update to new gio attribute names

2007-12-12  Andre Klapper  <a9016009@gmx.de>

	* libathena-private/apps_athena_preferences.schemas.in:
	fix a typo (bug #330324, committing on behalf of Jon Dufresne).

2007-12-12  Andre Klapper  <a9016009@gmx.de>

	* src/file-manager/fm-properties-window.c (create_pie_widget):
	fix a typo (bug #499715, committing on behalf of Bob mauchin); 
	add two translator comments.

2007-12-11  David Zeuthen  <davidz@redhat.com>

	Update for API changes in gio trunk.

	* libathena-private/athena-desktop-icon-file.c:
	(update_info_from_link):
	* libathena-private/athena-desktop-link-monitor.c:
	(volume_delete_dialog), (volume_file_name_used),
	(create_mount_link), (mount_added_callback),
	(mount_removed_callback), (mount_changed_callback),
	(desktop_volumes_visible_changed),
	(athena_desktop_link_monitor_init),
	(desktop_link_monitor_finalize):
	* libathena-private/athena-desktop-link.c:
	(athena_desktop_link_new),
	(athena_desktop_link_new_from_mount),
	(athena_desktop_link_get_mount), (desktop_link_finalize):
	* libathena-private/athena-desktop-link.h:
	* libathena-private/athena-file-operations.c:
	(custom_mount_to_string), (custom_mount_skip),
	(unmount_mount_callback), (do_unmount), (get_trash_dirs_for_mount),
	(has_trash_files), (athena_file_operations_unmount_mount):
	* libathena-private/athena-file-operations.h:
	* libathena-private/athena-file.c:
	(athena_file_get_volume_name):
	* src/file-manager/fm-icon-container.c: (get_sort_category):
	* src/file-manager/fm-tree-model.c: (fm_tree_model_add_root_uri),
	(fm_tree_model_get_mount_for_root_node_file),
	(fm_tree_model_remove_root_uri):
	* src/file-manager/fm-tree-model.h:
	* src/file-manager/fm-tree-view.c: (add_root_for_mount),
	(mount_added_callback), (mount_removed_callback),
	(button_pressed_callback), (fm_tree_view_unmount_cb),
	(create_tree):
	* src/athena-application.c: (athena_application_instance_init),
	(mount_added_callback), (mount_removed_callback):
	* src/athena-pathbar.c:
	(athena_path_bar_update_button_appearance),
	(is_file_path_mounted_mount), (find_button_type),
	(make_directory_button):
	* src/athena-places-sidebar.c: (add_place), (update_places),
	(mount_added_callback), (mount_removed_callback),
	(mount_changed_callback), (volume_added_callback),
	(volume_removed_callback), (volume_changed_callback),
	(drive_changed_callback), (bookmarks_popup_menu_detach_cb),
	(check_visibility), (bookmarks_check_popup_sensitivity),
	(volume_mount_cb), (open_selected_bookmark), (mount_shortcut_cb),
	(unmount_shortcut_cb), (eject_shortcut_cb),
	(drive_poll_for_media_cb), (rescan_shortcut_cb),
	(bookmarks_build_popup_menu), (athena_places_sidebar_init),
	(athena_places_sidebar_set_parent_window):

2007-12-11  A. Walton  <awalton@svn.gnome.org>
	* src/athena-shell-interface.idl:
	Fix build error from athena metafile removal.

2007-12-10  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-metafile.[ch]:
        * libathena-private/athena-metafile.[ch]:
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.c:
        * libathena-private/Makefile.am:
        * libathena-private/athena-directory-metafile-monitor.[ch]: Removed.
        * libathena-private/athena-metafile-factory.[ch]: Removed.
        * libathena-private/athena-metafile-server.idl: Removed.
        * src/athena-application.c:
        * src/athena-main.c:
        * src/athena-spatial-window.c:
	Remove the bonobo layer for metadata, as we're always in-process anyway
	these days.

2007-12-07  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-vfs-file.c:
        * src/file-manager/fm-directory-view.c:
	Add optional cancellable arg to athena_file_mount
	
        * libathena-private/athena-mime-actions.c:
	Implement cancellation of file activation

2007-12-07  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        Implement athena_file_set_permissions_recursive

2007-12-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_is_in_desktop):
	Use new gio apis to avoid getting uri.

2007-12-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory.c (athena_directory_is_in_trash):
	No need to get the uri to figure out if the
	directory is in the trash, just use
	g_file_has_uri_scheme().
	
2007-12-07  Alexander Larsson  <alexl@redhat.com>

        * src/athena-places-sidebar.c:
	Display errors on mount/unmount failure

2007-12-07  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
        * src/file-manager/fm-tree-view.c:
        * src/athena-places-sidebar.c:
	Show errors on unmount/eject failing.

2007-12-07  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
        * src/athena-places-sidebar.c:
	Implement empty trash on unmount and eject
	
        * src/file-manager/fm-tree-view.c:
	Use the file op version of unmount

2007-12-07  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
	Implement the rest of the file create ops
	
        * src/file-manager/fm-directory-view.c:
	Get sane filenames for dropped text

2007-12-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory.c:
	Don't avoid adding existing files that are not is_added.
	Fixes a problem where new folder didn't display the new folder.
	
        * libathena-private/athena-file-operations.[ch]:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-tree-view.c:
	Implement new folder.

2007-12-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Set position on move and link

2007-12-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
        * src/file-manager/fm-directory-view.c:
	Implement symlinking

2007-12-05  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
	Implement duplicate.

2007-12-05  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
	Fix merge error that made the Open Folder Window
	menu item appear in non-browser mode

2007-12-04 Kevin Kubasik <kevin@kubasik.net>
	* libathena-private/athena-search-engine-beagle.c:
	Fixed some spacing issues.

2007-12-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Implement empty trash

2007-12-04 Kevin Kubasik <kevin@kubasik.net>
	* libathena-private/athena-search-engine-beagle.c:
	Fix a memory leak from the last commit.

2007-12-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Implement trash with CommonJob
	
        * libathena-private/athena-progress-info.c:
        (athena_progress_info_set_progress):
	Ensure progress always is inside 0.0 - 1.0

2007-12-04 Kevin Kubasik <kevin@kubasik.net>
	* libathena-private/athena-search-engine-beagle.c:
	Replace depreciated beagle_query_add_hit_type and
	beagle_query_add_mime_type with compatible query strings.
	
2007-12-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Support recursive delete with progress reporting

2007-12-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Use CommonJob in the delete confirmation dialogs

2007-12-03  Christian Persch  <chpe@gnome.org>

	* libathena-private/athena-directory-metafile.c:
	(athena_directory_get_integer_file_metadata),
	(athena_directory_set_integer_file_metadata):
	* libathena-private/athena-directory.c:
	(athena_directory_schedule_position_set):
	* libathena-private/athena-dnd.c: (add_one_gnome_icon):
	* libathena-private/athena-file-operations-progress.c:
	(time_remaining_callback):
	* libathena-private/athena-icon-dnd.c: (handle_local_move):
	* src/file-manager/fm-directory-view.c: (new_folder_done):
	* src/athena-application.c: (get_desktop_manager_selection):
	* src/athena-connect-server-dialog.c: (display_server_uri):
	* src/athena-information-panel.c: (receive_dropped_color):
	* src/athena-property-browser.c: (add_color_to_browser):
	* src/athena-window.c: (athena_window_init),
	(athena_window_finalize), (free_activate_view_data),
	(add_view_as_menu_item), (athena_window_synch_view_as_menus),
	(athena_window_class_init): Remove some small allocations, and use
	GSlice more often. Bug #461795.

2007-12-03  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Move screen_num to CommonJob
	Use GtkWindow * for parent_window in CommonJob
	shallow conversion to CommonJob use for delete

2007-12-03  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Remove old gnome-vfs base implementation to make
	this easier to read.
	
2007-12-03  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Implement cancellation in all ops
	
        * libathena-private/athena-progress-info.[ch]:
	Allow cancelling in progress dialog

2007-12-03  Alexander Larsson  <alexl@redhat.com>

	* test/test.h: 
	Don't include deprectated headers

2007-12-03  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-search-engine-tracker.c:
	Fix build
	
        * src/file-manager/fm-directory-view.h:
	Don't include deprectated headers

2007-12-03  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-progress-info.c:
        * src/file-manager/fm-error-reporting.c:
	Fix ngettext use and othe i18n issues (#500945)

2007-11-30  Federico Mena Quintero  <federico@novell.com>

	Fix http://bugzilla.gnome.org/show_bug.cgi?id=354688 - Attack of
	the HIG police.

	* src/file-manager/fm-properties-window.c
	(create_permissions_page): Use header capitalization for command button.
	(add_permissions_combo_box): Use sentence capitalization for field labels.

2007-11-30  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
	Reimplement copy_move helper with _copy and _move
	Also support move to trash as trash
	
        * src/file-manager/fm-directory-view.c:
	Use _copy_move again

2007-11-30  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-changes-queue.[ch]:
	Convert changes queue to only use GFile, not uris.
	Kill all _by_uri versions
	
        * libathena-private/athena-directory-notify.h:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-link.c:
        * libathena-private/athena-monitor.c:
        * src/file-manager/fm-directory-view.c:
	Update for above changes

2007-11-30  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-changes-queue.[ch]:
	More uri -> gfile API changes
	
        * libathena-private/athena-file-operations.[ch]:
	Add move operation
	
        * src/file-manager/fm-directory-view.c:
	Use move operation

2007-11-29  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-changes-queue.[ch]:
        * libathena-private/athena-icon-dnd.c:
	Change position setting api to accept GFile instead of
	uri
	
        * libathena-private/athena-file-operations.c:
	Set positions and copy metadata.

2007-11-29  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-changes-queue.[ch]:
	Add some GFile version and rename the old to _by_uri
	
        * libathena-private/athena-file-operations.c:
	Emit change events
	
        * libathena-private/athena-file-operations-progress.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-icon-dnd.c:
        * libathena-private/athena-metafile.c:
        * libathena-private/athena-monitor.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-icon-view.c:
	Update to latest APIs

2007-11-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Better status message when copying one folder
	
        * libathena-private/athena-progress-info.c:
	Correct tooltip message for status icon

2007-11-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Nicer progress texts
	
        * libathena-private/athena-progress-info.c:
	Hide progress window when last op finishes.

2007-11-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
	Don't free uninitialized memory.
	
        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-progress-info.[ch]:
	Add progress info dialog

2007-11-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Handle debuting URIs in file copy op
	
        * src/file-manager/fm-directory-view.c:
	Use new athena_file_operations_copy for copy.
	Make debuting_uri hash into debuting_files in new
	API. Convert for old calls.

2007-11-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Add run_warning and run_error to simplify the
	code for error dialogs.

2007-11-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Add defines for common button names to make sure
	they are consistent

2007-11-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Use the right create_dest arg to copy_directory
	
2007-11-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Free primary / secondary in run_simple_dialog

2007-11-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Add IS_IO_ERROR macro and use that
	
2007-11-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-progress-info.[ch]:
	Remove printf versions
	rename _set_foo_nocopy to _take_foo

        * libathena-private/athena-file-operations.c:
	Use new custom printf formating for all strings
	
2007-11-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Use eel_strdup_printf_with_custom to make it easier
	to create error dialogs.

2007-11-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Handle deleting a directory when overwriting it with a
	file.

2007-11-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Handle errors in remove destination
	
2007-11-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Pass cancellable into strdup_with_name

2007-11-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Add progress updates to copy.
	Make some error dialogs more consistent (add skip all, reorder)

        * libathena-private/athena-progress-info.[ch]:
	Add athena_progress_info_set_status_printf

2007-11-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Don't create dest dir on merges
	
2007-11-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Handle recursive copies

2007-11-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Pass in same_fs instead of dest_fs_id so we can
	reuse copy_file recursively and only check once.

2007-11-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	More work on file copies

2007-11-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Add error handling for source scanning

2007-11-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-progress-info.[ch]:
	Add athena_get_all_progress_info()
	
        * test/test-copy.c:
	Print progress info
	
        * libathena-private/athena-file-operations.c:
	Implement generic run_simple_dialog()

2007-11-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Add generic run_simple_dialog.

2007-11-16  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-progress-info.c:
	Fix signal emissions

        * libathena-private/athena-file-operations.[ch]:
	Add athena_file_operations_copy, with some initial
	(far from done) code
	
        * test/Makefile.am:
        * test/test-copy.c:
	athena_file_operations_copy testcase

2007-11-16  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-progress-info.c:
	Reindent
	Fix threading issues wrt the idle source

2007-11-16  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/Makefile.am:
        * libathena-private/athena-progress-info.[ch]:
	Added AthenaProgressInfo class
	
        * libathena-private/athena-file-operations.c:
        * src/file-manager/fm-tree-view.c:
        * src/athena-places-sidebar.c:
	Update to new gio API

2007-11-13  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-error-reporting.c:
	Remove last use of GNOME_VFS_ERROR
	
        * libathena-private/Makefile.am:
        * libathena-private/athena-vfs-utils.[ch]: Removed.
        * src/file-manager/fm-directory-view.c:
        * src/athena-window-manage-views.c:
	Remove GNOME_VFS_ERROR

2007-11-13  Alexander Larsson  <alexl@redhat.com>

        * src/athena-window-manage-views.c:
        * src/athena-window-private.h:
	Better error reporting on view failure

2007-11-13  Alexander Larsson  <alexl@redhat.com>

        * src/athena-window-manage-views.c:
        * src/athena-window-private.h:
	Try to mount location if not mounted.

2007-11-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Handle std:target_uri gio links

2007-11-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
	Fix reversed checks

2007-11-08  Sebastian Dröge  <slomo@circular-chaos.org>

	* configure.in:
	* src/athena-image-properties-page.c:
	Add support for exempi >= 1.99.5 while keeping support for older
	versions.

2007-11-06  Sebastian Dröge  <slomo@circular-chaos.org>

	* NEWS:
	* docs/key_mouse_navigation.txt:
	* libathena-private/athena-emblem-utils.c:
	* libathena-private/athena-emblem-utils.h:
	* src/file-manager/fm-properties-window.c:
	* src/athena-emblem-sidebar.c:
	* src/athena-property-browser.c:
	Fix typo: availible -> available.

2007-11-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-program-choosing.c:
	Update to the new GAppInfo and EelAppLaunchContext APIs
	Remove old startup notify code

2007-11-05  Jürg Billeter  <j@bitron.ch>

	reviewed by: Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(action_open_folder_window_callback), (open_one_in_folder_window),
	(action_location_open_folder_window_callback),
	(real_update_location_menu), (real_update_menus):
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-actions.h:
	* src/athena-navigation-window-menus.c:
	(athena_navigation_window_update_spatial_menu_item),
	(action_folder_window_callback),
	(athena_navigation_window_initialize_menus):
	* src/athena-navigation-window-ui.xml:
	* src/athena-navigation-window.c:
	(athena_navigation_window_init), (always_use_browser_changed):
	* src/athena-window-private.h:
	Add menu item to open spatial folder window from browser window to File
	menu and context menus.

2007-11-02  Paolo Borelli  <pborelli@katamail.com>

	* src/file-manager/fm-directory-view.c:
	* src/athena-file-management-properties.c:
	* src/athena-navigation-window.c:
	* libathena-private/athena-icon-info.c:
	* libathena-private/athena-mime-application-chooser.c:
	Plug some minor memory leaks.

2007-11-02  Paolo Borelli  <pborelli@katamail.com>

        * src/file-manager/fm-icon-container.c:
        * src/file-manager/fm-list-view.c:
        * src/athena-shell.c:
        * src/athena-file-management-properties.c:
        * libathena-private/athena-column-utilities.c:
        * libathena-private/athena-column-utilities.h:
        * libathena-private/athena-column-chooser.c:
        * libathena-private/athena-column-chooser.h:
	Remove all uses of eel-string-list and update code to the new
	eel_preferences_[set|get]_string_array api.

	* libathena-private/athena-global-preferences.c:
	Update to the eel-enumerations api changes.

2007-11-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-customization-data.[ch]:
        * libathena-private/athena-desktop-directory.c:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.[ch]:
        * libathena-private/athena-file-operations-progress.[ch]:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-global-preferences.c:
        * libathena-private/athena-icon-dnd.c:
        * libathena-private/athena-metafile.c:
        * libathena-private/athena-monitor.c:
        * libathena-private/athena-program-choosing.c:
        * libathena-private/athena-query.h:
        * libathena-private/athena-search-directory.c:
        * libathena-private/athena-search-engine-tracker.c:
        * libathena-private/athena-search-engine.h:
        * libathena-private/athena-thumbnails.c:
        * libathena-private/athena-tree-view-drag-dest.c:
        * libathena-private/athena-vfs-utils.h:
        * src/file-manager/fm-desktop-icon-view.c:
        * src/file-manager/fm-ditem-page.c:
        * src/file-manager/fm-icon-container.c:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/fm-list-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/file-manager/fm-tree-view.c:
        * src/athena-desktop-window.c:
        * src/athena-emblem-sidebar.c:
        * src/athena-location-bar.c:
        * src/athena-location-dialog.c:
        * src/athena-location-entry.c:
        * src/athena-main.c:
        * src/athena-navigation-window-menus.c:
        * src/athena-places-sidebar.c:
        * src/athena-query-editor.c:
        * src/athena-shell.c:
        * src/athena-sidebar-title.c:
        * src/athena-window-manage-views.c:
        * src/athena-window.c:
        * test/test-athena-mime-actions-set.c:
        * test/test-athena-mime-actions.c:
        * test/test.h:
	Remove lots of gnome vfs includes
	
        * src/Makefile.am:
	Disable building of connect to server app

2007-11-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        Add athena_file_is_launchable

        * libathena-private/athena-program-choosing.c:
	Add launched apps to recent files
	
        * libathena-private/athena-mime-actions.[ch]:
        * src/file-manager/fm-directory-view.[ch]:
	Move all the file activaton code from FMDirectoryView
	to a common place in athena-mime-actions

2007-11-01  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
	Stub out all gnome-vfs using operations with a
	dialog saying this isn't supported yet.
	
        * src/Makefile.am:
        * src/file-manager/fm-directory-view.c:
        * src/athena-shell-ui.xml:
        * src/athena-window-menus.c:
	Remove all connect to server use for now
	Not sure what to do with it in the gvfs world
	
        * src/file-manager/fm-error-reporting.c:
        * src/athena-main.c:
	Remove gnome_vfs uses

2007-11-01  Paolo Borelli  <pborelli@katamail.com>

        * src/athena-window-manage-views.c: use g_file_get_uri_scheme
	instead of a hand rolled version.

2007-11-01  Paolo Borelli  <pborelli@katamail.com>

        * src/file-manager/fm-directory-view.c: do not use the deprecated
	gnome_util_home_file and make sure tha ~/.gnome2 is created if it
	doesn't exist.

2007-11-01  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
	Convert unmount volume to gio
	Remove unmount drive (makes no sense!)
	
        * src/athena-places-sidebar.c:
	Use new APIs

2007-11-01  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        (athena_file_get_uri_scheme):
	Better get_uri_scheme implementation
	
        * libathena-private/athena-mime-actions.[ch]:
	Remove the open_with versions (not needed anymore)
	Add support for uri_handlers
	
        * libathena-private/athena-program-choosing.[ch]:
	Remove now unused function athena_launch_show_file
	
        * src/file-manager/fm-directory-view.c:
        * src/athena-information-panel.c:
        * src/athena-window.c:
	Update for above api changes

2007-10-31  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-dnd.c:
	Convert default dnd op to gio code

2007-10-31  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-search-engine-simple.c:
	Update to changed gio API

2007-10-31  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-vfs-utils.[ch]:
	Remove more unused gnome-vfs helpers

2007-10-31  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c (play_file):
	Use a better pipeline for audio preview (doesn't play videos)
	Add back totem preview app.

        * libathena-private/athena-file.c:
        (athena_file_get_volume_name):
	Get volume name using gio
	
        * src/file-manager/fm-properties-window.c:
	Show volume name for non local files too
	Avoid crashes if query fsinfo fails

2007-10-30  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-program-choosing.c:
        (athena_launch_show_file):
	Avoid gnome_vfs calls

2007-10-30  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-canvas-item.c:
        (real_map_pixbuf):
	Fix indentation
	
        * src/file-manager/Makefile.am:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/athena-audio-mime-types.h:
	Replace audio preview code with new one based
	on gst-launch, removing all the gnome-vfs code

2007-10-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-dnd.c:
	Remove gnome-vfs code

2007-10-29  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.[ch]:
        * libathena-private/athena-file-operations.c:
	Move public gnome-vfs functions from file-utilities to internal
	calls in file-operations.c
	Replace gnome-vfs use with gio
	
        * libathena-private/athena-file-operations-progress.c:
        * src/file-manager/fm-tree-view.c:
	Replace gnome-vfs use with gio

2007-10-29  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.[ch]:
	Move athena_file_operations_delete to the gio code.

        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-tree-view.c:
	Update to use new athena_file_operations_delete

2007-10-26  Paolo Borelli  <pborelli@katamail.com>

        * libathena-private/athena-module.c:
	Fix valgrind warning on shutdown (#346401, ported from trunk).

2007-10-26  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-directory.c:
	* libathena-private/athena-desktop-link.c:
	* libathena-private/athena-desktop-icon-file.c:
	* libathena-private/athena-bookmark.c:
	* libathena-private/athena-trash-monitor.c:
	* libathena-private/athena-file.c:
	Plug minor memory leaks and improper uses of eel_ref_str_*

2007-10-26  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-desktop-link.c: unref the icon instead
	of freeing it to avoid memory corruption.

2007-10-25  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-changes-queue.[ch]:
        * libathena-private/athena-monitor.c:
	Rename some file change queue functions to _by_uri
	add GFile based version with the original name
	
        * libathena-private/athena-file-operations.[ch]:
	Add gio based athena_file_operations_trash_or_delete() call.
	
        * src/file-manager/fm-directory-view.c:
	Call athena_file_operations_trash_or_delete()
	Remove unused code

2007-10-25  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.[ch]:
	Make file activation handle mounting of mountables and non-mounted
	locations. Also general cleanup of activation.
	Cancellation not handled yet.

2007-10-25  Paolo Borelli  <pborelli@katamail.com>

	* src/file-manager/fm-list-view.c:
	* libathena-private/athena-icon-info.c:
	* libathena-private/athena-file.c:
	Plug some minor memory leaks.

2007-10-25  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-window-manage-view.c (location_has_really_changed):
	Fix a warning when switching view.

2007-10-25  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-application.c:
	* src/athena-property-browser.c:
	* src/athena-shell.c:

	Do not use EelStringList.

2007-10-24  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-file-management-properties.c:
	remove eel_string_list (ab)use.

2007-10-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-vfs-file.c:
	Pass GMountOperation instead of parent to mount.
	Nothing for unmount/eject
	
        * src/file-manager/fm-directory-view.c:
	Pass in a mount operation for mount.
	Disable timeout when mount operation is active

2007-10-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
	Use g_utf8_collate, not eel_strcoll.

2007-10-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-canvas-item.c:
        * test/test.c:
	Update for eel changes

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
        * libathena-private/athena-icon-canvas-item.[ch]:
        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-icon-dnd.c:
        * libathena-private/athena-icon-private.h:
        * test/test.c:
	Remove libart dependency, use eel rect and point types

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-program-choosing.c:
        (athena_launch_application_from_command):
	Use gdk_spawn instead of eel

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-dnd.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-program-choosing.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/athena-emblem-sidebar.c:
        * src/athena-information-panel.c:
	Don't use removed eel gnome-vfs functions

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory.[ch]:
        Add athena_directory_get_location

        * libathena-private/athena-file.[ch]:
	Add athena_file_get_parent_location.
	Port from eel_format_uri_for_display to gio parse names
	
        * libathena-private/athena-program-choosing.c:
        * src/file-manager/fm-directory-view.c:
        * src/athena-emblem-sidebar.c:
        * src/athena-location-bar.c:
        * src/athena-location-dialog.c:
        * src/athena-navigation-window-menus.c:
        * src/athena-window-bookmarks.c:
	Port from eel_format_uri_for_display to gio parse names

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.c:
        (athena_ensure_unique_file_name):
	Port from gnome-vfs
	
        * src/file-manager/fm-directory-view.c:
        (fm_directory_view_handle_netscape_url_drop):
	Handle missing mimetype

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.c:
        (athena_compute_title_for_location):
	Make this use only display name.
	
        * libathena-private/athena-icon-info.c:
        (athena_icon_info_lookup):
	Don't free filename before use
	
        * libathena-private/athena-search-directory-file.[ch]:
        * libathena-private/athena-search-directory.c:
	Create nice display name for search directories, and keep it updated.
	
        * src/athena-window-manage-views.c:
	Fix wrong type of argument passed to signal

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
	Replace some gnome vfs calls

2007-10-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-metafile.c:
	Use new gio uri escape functions instead of gnome-vfs

2007-10-22  Alexander Larsson  <alexl@redhat.com>

        * src/athena-location-entry.c:
	Use GFilenameCompleter

2007-10-22  Alexander Larsson  <alexl@redhat.com>

        * src/athena-application.c:
        * src/athena-information-panel.c:
        * src/athena-spatial-window.c:
        * src/athena-spatial-window.h:
        * src/athena-window-manage-views.c:
	Use GFile * instead of uris in some more places
	
	Patch from Paolo Borelli

2007-10-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-saved-search-file.c:
        * libathena-private/athena-search-directory-file.c:
	Fix handling of mimetype as refstring
	Fix leak of GFile
	Code cleanups

	Patch from Paolo Borelli

2007-10-19  Paolo Borelli  <pborelli@katamail.com>

	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	use g_content_type_equals instead of strcasecmp on the mime type.

	* src/athena-window-menus.c:
	Remove unneeded includes

2007-10-19  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-emblem-utils.h:
	* libathena-private/athena-emblem-utils.c:
	* src/athena-emblem-sidebar.c:
	* src/athena-property-browser.c:

	Make athena_emblem_load_pixbuf_for_emblem take a GFile.

2007-10-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        (athena_file_set_display_name):
	Don't crash on NULL display name

2007-10-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-vfs-file.c:
	Remove AthenaFileMountCallback and just make
	AthenaFileOperationCallback take an extra
	resultant file argument.
	
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-error-reporting.c:
        * src/file-manager/fm-list-view.c:
        * src/file-manager/fm-properties-window.c:
	Update to API change
	
        * src/athena-pathbar.c:
        (get_display_name_for_folder):
	Fix crash if NULL display name

2007-10-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
	Set can_mount/unmount to FALSE unless set
	
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
        * libathena-private/athena-file.h:
	Make the Operation object semi-public
	Move mount ops to virtual functions
	
        * libathena-private/athena-vfs-file.c:
	Initial work to implement mount op

2007-10-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.[ch]:
        * src/athena-pathbar.c:
        Add & use athena_get_desktop_location
	
        * libathena-private/athena-dnd.c:
	Port code to gio
	
        * libathena-private/athena-icon-dnd.c:
	Trash is now a real uri location, remove special case

2007-10-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.[ch]:
	Make compute_title take a GFile

        * libathena-private/athena-view-factory.[ch]:
        * libathena-private/athena-window-info.[ch]:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-tree-view.c:
        * src/athena-application.[ch]:
        * src/athena-bookmark-list.c:
        * src/athena-bookmarks-window.c:
        * src/athena-connect-server-dialog-nonmain.c:
        * src/athena-desktop-window.c:
        * src/athena-history-sidebar.c:
        * src/athena-location-bar.c:
        * src/athena-location-dialog.c:
        * src/athena-navigation-window.c:
        * src/athena-places-sidebar.c:
        * src/athena-shell.c:
        * src/athena-spatial-window.c:
        * src/athena-window-manage-views.[ch]:
        * src/athena-window-menus.c:
        * src/athena-window-private.h:
        * src/athena-window.[ch]:
	Use GFile * instead of char * uri in all loation handling
	for windows.

2007-10-18  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-image-properties-page.c: port to gio.

2007-10-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.[ch]:
        * src/athena-application.c:
	Make athena_directory_get_existing take GFile *.
	Add athena_directory_get taking a GFile *

2007-10-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-directory-file.c:
        * libathena-private/athena-desktop-directory.c:
        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-desktop-link-monitor.c:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-directory.h:
        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file-utilities.c:
        * src/file-manager/fm-directory-view.c:
        * src/athena-navigation-window.c:
        * src/athena-window-manage-views.c:
        * test/test-athena-directory-async.c:
	Rename athena_directory_get to athena_directory_get_by_uri.

2007-10-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-link.c:
        * libathena-private/athena-desktop-icon-file.c:
	Handle NULL volume
	
        * libathena-private/athena-file.c:
        * libathena-private/athena-icon-dnd.c:
	Convert gnome_vfs calls to gio

2007-10-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
        * src/athena-application.c:
        * src/athena-window-menus.c:
        * test/test-athena-directory-async.c:
        * test/test.c:
	Convert gnome_vfs calls to gio

2007-10-18  Alexander Larsson  <alexl@redhat.com>

        * src/athena-application.[ch]:
	Convert gnome_vfs calls to gio

	* TODO-gio:
	Document some stuff that needs doing in gio-branch

2007-10-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-search-engine-simple.c:
	Remove spew
	
        * src/athena-query-editor.c:
        Work around crash getting NULL back as the location.

2007-10-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.[ch]:
	Add athena_is_home_directory and athena_is_root_directory
	
        * src/athena-window-manage-views.c:
	Convert gnome_vfs calls to gio

2007-10-18  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window.c (athena_window_go_up):
	Use gio to find parent

2007-10-18  Alexander Larsson  <alexl@redhat.com>

	* src/athena-pathbar.[ch]:
        * src/athena-navigation-window.c:
        * src/athena-window-manage-views.c:
	Use gio in pathbar

2007-10-17  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-vfs-utils.[ch]:
	Remove now unused gnome_vfs to gio helpers

2007-10-17  Alexander Larsson  <alexl@redhat.com>

        * src/athena-location-bar.c:
	Remove some unused code
	Replace gnome_vfs code with gio code

2007-10-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_can_trash):
	Typo can_delete -> can_trash

2007-10-17  Alexander Larsson  <alexl@redhat.com>

        * src/athena-property-browser.c:
	Replace some gnome-vfs code with gio code

2007-10-17  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-properties-window.c:
	Replace some gnome-vfs code with gio code

2007-10-17  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.[ch]:
        Add can_delete and can_trash
	
        * src/file-manager/fm-directory-view.c:
	Replace some gnome-vfs code with gio code

2007-10-17  Alexander Larsson  <alexl@redhat.com>

	* src/athena-location-dialog.c (open_current_location): 
	Use g_file_parse_name instead of gnome_vfs_make_uri_from_input
	
2007-10-17  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-search-engine-simple.c:
	Update to use gio

2007-10-17  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-recent.c: do not use gnome-vfs.

2007-10-17  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-emblem-utils.c: do not use gnome-vfs.

2007-10-17  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-link.[ch]: remove.
	* libathena-private/athena-link-desktop-file.[ch]: port to gio
	and rename them to athena-link.[ch]
	* libathena-private/athena-file.c: adapt for the above change.

2007-10-17  Alexander Larsson  <alexl@redhat.com>

        * src/athena-places-sidebar.c:
	Use gio volume APIs

2007-10-17  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-file-private.h:
	Remove has/get_volume/drive, replace with
	can_mount/unmount/eject and mount/unmount/eject.
	(Which are not fully implemented yet)
	Add athena_file_is_mountpoint.
	
        * libathena-extension/athena-file-info.[ch]:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-link-desktop-file.[ch]:
        * libathena-private/athena-link.[ch]:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/file-manager/fm-tree-model.[ch]:
        * src/file-manager/fm-tree-view.c:
	Use gio volume APIs

2007-10-16  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-desktop-link-monitor.c:
        * libathena-private/athena-desktop-link.[ch]:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
        * libathena-private/athena-search-directory-file.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
	Convert some volume monitor use to gio

2007-10-16  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-trash-monitor.c:
	Ref icon in athena_trash_monitor_get_icon()
	
        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-desktop-link.c:
        * libathena-private/athena-desktop-link.h:
        * src/athena-places-sidebar.c:
	Use athena_trash_monitor_get_icon() when possible
	
2007-10-16  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-trash-monitor.[ch]:
	Add full gio implementation and get_icon()

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/Makefile.am:
        * libathena-private/athena-icon-factory-private.h: Removed.
        * libathena-private/athena-icon-factory.c: Removed.
        * libathena-private/athena-icon-factory.h: Removed.
	Remove AthenaIconFactory code.
	Now all code use the new APIs
	YAHOO!!!
	
        * libathena-private/athena-bookmark.c:
        * libathena-private/athena-bookmark.h:
        * libathena-private/athena-file.c:
        * libathena-private/athena-global-preferences.c:
        * libathena-private/athena-icon-canvas-item.c:
        * libathena-private/athena-icon-canvas-item.h:
        * libathena-private/athena-icon-container.h:
        * libathena-private/athena-icon-private.h:
        * libathena-private/athena-link-desktop-file.c:
        * libathena-private/athena-program-choosing.c:
        * libathena-private/athena-view.h:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/fm-list-model.c:
        * src/file-manager/fm-list-model.h:
        * src/file-manager/fm-list-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/file-manager/fm-tree-model.c:
        * src/file-manager/fm-tree-view.c:
        * src/athena-application.c:
        * src/athena-bookmark-list.c:
        * src/athena-bookmarks-window.c:
        * src/athena-emblem-sidebar.c:
        * src/athena-navigation-window-menus.c:
        * src/athena-navigation-window.c:
        * src/athena-pathbar.c:
        * src/athena-places-sidebar.c:
        * src/athena-sidebar-title.c:
        * src/athena-window-menus.c:
        * src/athena-window.c:
        * src/athena-zoom-control.h:
        * test/test-athena-wrap-table.c:
	Don't include the athena-icon-factory headers

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
	Add ATHENA_FILE_ICON_FLAGS_FOR_OPEN_FOLDER
	Fix force_size handling
	
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-empty-view.c:
        * src/file-manager/fm-list-model.c:
        * src/file-manager/fm-properties-window.c:
        * src/file-manager/fm-tree-model.c:
        * src/athena-emblem-sidebar.c:
        * src/athena-navigation-window-menus.c:
        * src/athena-property-browser.c:
        * src/athena-sidebar-title.c:
	Convert more stuff to new icon API

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-info.[ch]:
        Add athena_icon_info_lookup_from_name
	
        * libathena-private/athena-ui-utilities.c:
        * src/athena-desktop-window.c:
        * src/athena-navigation-window.c:
        * src/athena-pathbar.c:
	Use athena_icon_info_lookup_from_name to get less
	code

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * src/athena-pathbar.c:
        * src/athena-spatial-window.c:
	Convert more stuff to new icon API

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
	Add athena_file_get_icon_pixbuf and
	IGNORE_VISITING icon flag
	
        * libathena-private/athena-icon-info.[ch]:
        Add athena_icon_info_get_used_name function

        * libathena-private/athena-emblem-utils.c:
        * libathena-private/athena-program-choosing.c:
        * libathena-private/athena-ui-utilities.c:
        * src/athena-desktop-window.c:
        * src/athena-navigation-window.c:
        * src/athena-spatial-window.c:
        * src/athena-window.[ch]:
	Convert to new icon APIs

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/Makefile.am:
        * libathena-private/athena-audio-player.c: Removed.
        * libathena-private/athena-audio-player.h: Removed.
        * src/file-manager/fm-icon-view.c:
	Kill old unused code

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-info.[ch]:
	Add athena_icon_info_get_pixbuf_nodefault_at_size
	
        * libathena-private/athena-file.[ch]:
	New functions for getting emblem icons and emblem pixbufs
	
        * libathena-private/athena-icon-container.[ch]:
        * libathena-private/athena-icon-factory.c:
        * src/file-manager/fm-directory-view.[ch]:
        * src/file-manager/fm-icon-container.c:
        * src/file-manager/fm-list-model.c:
        * src/file-manager/fm-tree-model.c:
        * src/athena-sidebar-title.c:
	Update to use the new emblem getters

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-info.[ch]:
	Add athena_get_icon_size_for_stock_size
	
        * libathena-private/athena-bookmark.c:
        * src/athena-places-sidebar.c:
        Use the above

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-thumbnails.c:
	Add required thumbnailing stuff from AthenaIconFactory here

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-factory.[ch]:
        * libathena-private/athena-icon-info.[ch]:
	Move over icon size util functions to athena-icon-info

        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-lib-self-check-functions.h:
        * src/file-manager/fm-list-model.c:
        * src/athena-sidebar-title.c:
	Update to new names

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-icon-factory.h:
	Remove ATHENA_ICON_SIZE_THUMBNAIL define as this is
	really dynamic.

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
	Actually handle thumbnail size prefs
	
2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
	Handle thumbnail size prefs
	Handle all sorts of icon changes and emit CHANGED on
	files in this case.

        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-icon-info.c:
        * libathena-private/athena-icon-info.h:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-list-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/file-manager/fm-tree-model.c:
        * src/file-manager/fm-tree-model.h:
        * src/file-manager/fm-tree-view.c:
        * src/athena-bookmarks-window.c:
        * src/athena-sidebar-title.c:
        * src/athena-window-bookmarks.c:
        * src/athena-window.c:
	Remove use of icon factory icons_changed signal, using instead
	the file CHANGED signal.

2007-10-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_get_all_attributes):
	Add thumbnail to all attributes

2007-10-15  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.h:
	Add ATHENA_FILE_ATTRIBUTES_FOR_ICON
	
        * libathena-private/athena-bookmark.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/file-manager/fm-tree-model.c:
        * src/athena-bookmark-list.c:
        * src/athena-pathbar.c:
        * src/athena-sidebar-title.c:
	Use ATHENA_FILE_ATTRIBUTES_FOR_ICON instead of
	athena_icon_factory_is_icon_ready_for_file and
	athena_icon_factory_get_required_file_attributes.

2007-10-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-bookmark.[ch]:
        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-icon-info.c:
        * src/athena-application.c:
        * src/athena-bookmark-list.c:
        * src/athena-bookmarks-window.c:
        * src/athena-places-sidebar.c:
        * src/athena-window-manage-views.c:
        * src/athena-window-private.h:
        * src/athena-window.c:
	Convert bookmarks API to gio / GIcon

2007-10-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-thumbnails.[ch]:
	Add back support for generating thumbnails.

2007-10-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	For large icons, try to use the original file
	when thumbnailing.

2007-10-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
	Only invalidate thumbnails when sizing up, not
	on the original scale from raw
	
2007-10-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Simplify thumbnail size handling and make it work.
	Now handles resizing icons.

2007-10-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	More exact handling of thumbnail up_to_date-ness, including
	if loading a thumbnail fails.
	Return thumbnails of the right size.
	
        * libathena-private/athena-thumbnails.[ch]:
	Add athena_thumbnail_unframe_image and export
	frame element sizes as defines

2007-10-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-directory-async.c:
        Export athena_file_should_show_thumbnail and use it as needed in the
	thumbnail reading code

2007-10-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-attributes.h:
	Add ATHENA_FILE_ATTRIBUTE_THUMBNAIL attribute
	
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
	Load thumbnails asynchronosuly.
	
        * libathena-private/athena-file.c:
	Initial code to use the asynchronoulsy loaded thumbnail
	
        * libathena-private/athena-icon-factory.c:
	Add ATHENA_FILE_ATTRIBUTE_THUMBNAIL as a required attribute for
	icons

2007-10-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Read thumbnail info from gio

2007-10-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c (athena_file_get_gicon):
	Handle accept, visited and embedding text state and
	rewrite the icon as needed.
	
        * libathena-private/athena-icon-info.c:
        (athena_icon_info_finalize):
	Fix crash if pixbuf is NULL

2007-10-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/Makefile.am:
        * libathena-private/athena-icon-info.[ch]:
	Added AthenaInfoInfo, including caches and GIcon => pixbuf lookup
	
        * libathena-private/athena-file.[ch]:
	Make athena_file_get_icon return a AthenaFileInfo
	
        * libathena-private/athena-icon-canvas-item.[ch]:
	Split out attach points instead of using AthenaAttachPoints
	
        * libathena-private/athena-icon-container.[ch]:
        * src/file-manager/fm-icon-container.c:
	Use the new athena_file_get_icon and athena_file_info_* stuff

        * libathena-private/athena-icon-factory.c:
        * libathena-private/athena-program-choosing.c:
        * libathena-private/athena-mime-application-chooser.c:
        * libathena-private/athena-open-with-dialog.c:
	Update to g_themed_icon_get_names const type
	
2007-10-10  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.[ch]:
	Keep track of GIcon from gio.
	Add athena_file_get_icon()
	
        * libathena-private/athena-icon-factory.[ch]:
	Add athena_icon_factory_get_pixbuf_for_gicon().
	This is a bit temporary, but can be used to move over
	users to athena_file_get_icon().
	
        * libathena-private/athena-icon-container.[ch]:
        * src/file-manager/fm-icon-container.c:
	Use athena_file_get_icon() in icon view.

2007-10-10  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-monitor.c:
        * src/athena-bookmark-list.c:
	Update for file monitoring API change
	
        * src/athena-spatial-window.c:
	Gio port from Paolo Borelli
	
2007-10-08  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        (athena_file_peek_display_name):
	Use a display name based on the filename as the default instead
	of "" before we've read the real display name from the backend.

2007-10-08  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-icon-dnd.[ch]:
	* src/athena-emblem-sidebar.c:
	* src/athena-location-bar.c:

	Replace athena_icon_dnd_uri_list_extract_uris with
	g_uri_list_extract_uris.

2007-10-08  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-bookmark-list.[ch]: port to gio.

2007-10-05  Paolo Borelli  <pborelli@katamail.com>

	* configure.in: use gio-2.0 instead of gio-standalone.

2007-10-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/Makefile.am:
        * libathena-private/athena-trash-directory.[ch]:
        * libathena-private/athena-trash-file.[ch]:
	Remove virtual trash locations, we now use the gvfs trash:
	
        * libathena-private/athena-trash-monitor.[ch]:
	Make this a stub for now. Need to figure out how to do this.
	
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file.c:
        * src/file-manager/fm-directory-view.c:
        * src/athena-window-manage-views.c:
	Handle the removal of AthenaTrash*

2007-10-04  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-thumbnails.c:
	Use gio instead of gnome-vfs to get mtime

2007-10-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-customization-data.c:
        * libathena-private/athena-customization-data.h:
        * src/athena-property-browser.c:
	Use gio to read info

2007-10-02  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-dnd.c (selection_is_image_file):
	Use gio to get mime type

2007-10-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.c:
	Use GFileMonitor to monitor xdg user dirs file

2007-10-02  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am (INCLUDES):
	Bump name for extension dir since we're not compatible anymore

2007-10-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-bookmark.c:
        * libathena-private/athena-customization-data.c:
        * libathena-private/athena-desktop-directory.c:
        * libathena-private/athena-directory-background.c:
        * libathena-private/athena-dnd.c:
        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-icon-factory.c:
        * libathena-private/athena-metafile.c:
        * libathena-private/athena-search-directory.c:
        * libathena-private/athena-search-engine-tracker.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-ditem-page.c:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/file-manager/fm-tree-view.c:
        * src/athena-application.c:
        * src/athena-bookmark-list.c:
        * src/athena-image-properties-page.c:
        * src/athena-information-panel.c:
        * src/athena-places-sidebar.c:
        * src/athena-property-browser.c:
        * src/athena-query-editor.c:
	gnome_vfs_get_local_path_from_uri -> g_filename_from_uri
	gnome_vfs_get_uri_from_local_path -> g_filename_to_uri

2007-10-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-factory.c:
	Don't clear thumbnails and other absolute pathnames from icon
	cache when mime data or icon theme changes. This is to avoid
	flashing and async realoading of all thumbnails.

2007-10-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        (mime_db_changed_callback):
	Use the right call to invalidate attributes, so that
	they get re-read correctly.

2007-10-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-factory.c:
        (mime_type_data_changed_callback):
        * libathena-private/athena-directory-async.c:
        (mime_db_changed_callback):
	Fix up types in callbacks
	
        * libathena-private/athena-mime-application-chooser.c:
        * libathena-private/athena-open-with-dialog.c:
	Handle and emit mime_data_changed on AthenaSignaller

2007-10-01  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/Makefile.am:
        * libathena-private/athena-mime-application-chooser.[ch]:
        * libathena-private/athena-open-with-dialog.[ch]:
	Moved these from eel and renamed
	
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
	Use the athena version imported above instead of the eel one.

2007-10-01  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-icon-factory.c:
        * libathena-private/athena-signaller.c:
	Replace gnome-vfs mime monitor with AthenaSignaller signal.
	
        * src/athena-query-editor.c:
	Use gio to list all mime types

2007-10-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-theme.[ch]:
	Delete leftover files

2007-09-28  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Update for new gio pkgconfig name

2007-09-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
	Update to the new name for g_format_file_size_for_display

2007-09-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        * libathena-private/athena-link.c:
        * src/file-manager/fm-icon-container.c:
        * src/athena-query-editor.c:
	Use gio mimetype functions instead of gnome-vfs ones.

2007-09-28  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-mime-actions.[ch]:
        * libathena-private/athena-program-choosing.[ch]:
        * libathena-private/athena-recent.[ch]:
	Use GAppInfo instead of GnomeVFSMimeApplication
	
        * src/file-manager/fm-directory-view.c:
        * src/athena-information-panel.c:
        * test/test-athena-mime-actions.c:
	Update due to the api changes in the GAppInfo move.

2007-09-27  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
	Use g_file_size_format_for_display instead of
	gnome_vfs_format_file_size_for_display
	
2007-09-27  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
	Remove unused GnomeVFSHandle stuff
	
2007-09-27  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
	Forgot to change GnomeVFSResult to GError in
	one spot.

007-09-27  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        Implement athena_file_set_owner and athena_file_set_group
	using set_attributes
	

2007-09-27  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        Implement athena_file_set_permissions using
	athena_file_set_attributes.

2007-09-27  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        Add athena_file_set_attributes

2007-09-27  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-vfs-utils.[ch]:
	Add gnome_vfs_result_to_error call
	
        * libathena-private/athena-file.[ch]:
	Convert renaming to use gio.
	Pass GError instead of GnomeVFSResult in
	AthenaFileOperationCallback
	
        * src/file-manager/fm-error-reporting.c:
        * src/file-manager/fm-error-reporting.h:
        * src/file-manager/fm-list-view.c:
        * src/file-manager/fm-properties-window.c:
	Update to the AthenaFileOperationCallback API change

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Read can_delete and can_rename from gio.
	Use can_rename in athena_file_can_rename.

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
	Add athena_file_get_edit_name()

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.[ch]:
	Make string args const char * where possible.

        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Read display_name and edit_name from gio.
	Kill old cached_display_name creation.
	Use eel_ref_str for name, display_name, edit_name and make sure to
	share them when possible.
	Old use of display_name as the link info only is moved so that
	its shared with the normal name, with got_custom_display_name showing
	where its from.

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Use new refcounted string implementation for mime_type.
	This way we don't have to store duplicate strings for
	each file.

2007-09-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory.c (athena_directory_finalize):
	directory->details->pending_file_info now has GFileInfo objects, not
	GnomeVFSFileInfo objects. Free them in the correct way.

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
	Remove old irrelevant comment
	
2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
	Read top left text with gio

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-ditem-page.c:
	Use g_file_load_contents_async instead of
	eel_read_entire_file_async.

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-factory.c:
        * libathena-private/athena-thumbnails.c:
	Use g_file_load_contents_async instead of
	eel_read_entire_file_async.

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-metafile.c:
	Use g_file_load_contents_async instead of
	eel_read_entire_file_async.

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file.c:
	Initialize hidden_file_hash lazily

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
	Read link info using gio

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Read mime list using gio

2007-09-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
	Read .hidden using gio.

2007-09-25  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-factory.c:
	Free file_info after last use (fixed valgrind warning)
	
        * libathena-private/athena-file.c:
	Sometimes we freed an uninitialized pointer
	
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Keep all the directory loading info in DirectoryLoadState

2007-09-25  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Implement deep count using gio

2007-09-25  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-metafile.c (set_metafile_contents):
	Don't crash on files that have slashes in them.

2007-09-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Use gio to do directory counts

2007-09-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
	Define ATHENA_FILE_DEFAULT_ATTRIBUTES

2007-09-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-directory-file.c:
        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-file.h:
        * libathena-private/athena-saved-search-file.c:
        * libathena-private/athena-search-directory-file.c:
        * libathena-private/athena-trash-file.c:
	There was some problems removing the virtual call for
	get_file_type, as this broke getting the type for "virtual"
	directory types like trash and the desktop. Re-introduce this,
	but set the type directly instead of via an indirect jump.

2007-09-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-file.h:
	athena_file_get_for_location -> athena_file_get
	same for get_existing

2007-09-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-bookmark.c:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-file.h:
        * libathena-private/athena-icon-dnd.c:
        * libathena-private/athena-search-directory.c:
        * libathena-private/athena-thumbnails.c:
        * libathena-private/athena-trash-monitor.c:
        * libathena-private/athena-tree-view-drag-dest.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-ditem-page.c:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/fm-list-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/file-manager/fm-tree-model.c:
        * src/file-manager/fm-tree-view.c:
        * src/athena-application.c:
        * src/athena-bookmark-list.c:
        * src/athena-information-panel.c:
        * src/athena-notes-viewer.c:
        * src/athena-pathbar.c:
        * src/athena-places-sidebar.c:
        * src/athena-spatial-window.c:
        * src/athena-window-manage-views.c:
        * test/test-athena-mime-actions-set.c:
        * test/test-athena-mime-actions.c:
	Rename athena_file_get -> athena_file_get_by_uri.
	Same with athena_file_get_existing.

2007-09-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
	Fix up type for get_permissions return value (don't use gnome-vfs types).
	
        * libathena-private/athena-vfs-utils.[ch]:
	Add gnome_vfs_file_type_from_g_file_type()
	
        * libathena-private/athena-icon-factory.c:
	Set up more GnomeVFSInfo fields needed for gnome_icon_lookup.

2007-09-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-monitor.[ch]:
	Use gio to implement file monitoring.

2007-09-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Read info for new files 

2007-09-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Implement get_file_info using gio

2007-09-21  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
	Read directory list via gio instead of gnome-vfs
	
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Get is_hidden & is_backup from gio instead of doing
	filename matching ourselves.

        * libathena-private/athena-file-utilities.c:
	Remove unused hidden/backup pattern matching.
	
        * src/athena-main.c:
	Initiate GThreads, as we need this for gio async emulation.

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-vfs-utils.c:
	Fix typo in attribute name
	
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
	Make AthenaFile info update use GFileInfo.
	Update all call sites to convert to it.

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-vfs-utils.[ch]:
        Add gnome_vfs_file_info_to_gio

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-metafile-monitor.c:
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-metafile.c:
	Make the filename key for metadata be unescaped in memory.
	Escape it only when reading/writing the metadata files.
	This is to avoid escaping a lot since we're now storing the
	filename unescaped in AthenaFile.

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-notify.h:
        * libathena-private/athena-directory.c:
	Add GFile versions of metadata scheduling functions.

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-notify.h:
        * libathena-private/athena-directory.c:
	Add GFile versions:
         athena_directory_notify_files_changed
         athena_directory_notify_files_removed

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file.c:
	Avoid for_location suffix when its not needed anymore

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory.c:
	Add _by_uri suffix to uri versions of functions and
	remove suffix for GFile versions
	
2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-notify.h:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file-changes-queue.c:
        * libathena-private/athena-link-desktop-file.c:
        * libathena-private/athena-merged-directory.c:
	Rename notify functions that work on uris to _by_uri and
	the GFile ones to have no suffix

2007-09-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-metafile.c: 
        * libathena-private/athena-directory.[ch]:
	Remove unused function athena_directory_make_uri_canonical
	
2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-notify.h:
        * libathena-private/athena-directory.c:
	Added athena_directory_notify_files_moved_by_location and
	made athena_directory_notify_files_moved use that.

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-notify.h:
        * libathena-private/athena-directory.c:
        Add athena_directory_notify_files_added_by_location.
	Use GFile instead of uris in more places

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file.[ch]:
	Add athena_file_get_for_location and athena_file_get_existing_for_location.
	and implement athena_file_get based on these.

2007-09-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.[ch]:
        Add athena_file_get_location () and use it when
	generating uris.

2007-09-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory.c:
        (athena_directory_is_desktop_directory):
        * libathena-private/athena-file-utilities.[ch]:
        (athena_is_home_directory_file):
        (athena_is_desktop_directory_file):
        (athena_is_desktop_directory):
        * libathena-private/athena-file.c:
        (athena_file_is_desktop_directory):
        (athena_file_is_home):
	Don't keep dup:ing strings for these commonly called
	functions.

2007-09-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file-utilities.[ch]:
        * libathena-private/athena-file.c:
	Use GFile *location to store the uri for AthenaDirectory.
	In preparation for using GFile for all I/O.

2007-09-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-attributes.h:
        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-mime-actions.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-ditem-page.c:
        * src/file-manager/fm-properties-window.c:
        * src/athena-window.c:
	Remove slow mimetype attribute and all its use.
	This is in preparation for the gio move which has
	a canonical mimetype definition instead of the
	guessed/slow couple.

2007-09-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-attributes.h:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-file.c:
        * libathena-private/athena-icon-factory.c:
        * libathena-private/athena-mime-actions.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-properties-window.c:
        * src/file-manager/fm-tree-model.c:
        * src/file-manager/fm-tree-view.c:
        * src/athena-spatial-window.c:
        * src/athena-window-manage-views.c:
        * src/athena-window.c:
	Limit the set of file attributes to the ones we actually read
	separately. This makes it more obvious what is happening when
	doing I/O. It does put some extra work on users, because they
	need to know where the data is coming from, but that is rarely
	a problem.

2007-09-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file-utilities.[ch]:
        * libathena-private/athena-file.c:
	Store "name" instead of "relative_uri" in AthenaFile.
	We want to avoid escaping/unescaping as much as possible and
	limit that to when we go from/to a full uri.

2007-09-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-private.h:
	Remove declaration for removed function
	
2007-09-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-program-choosing.c:
        * src/file-manager/fm-directory-view.c:
        * src/athena-spatial-window.c:
        * src/athena-window-manage-views.c:
	Use GError instead of GnomeVFSResult for get_info_error

2007-09-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-directory-file.c:
        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-saved-search-file.c:
        * libathena-private/athena-search-directory-file.c:
        * libathena-private/athena-trash-file.c:
        * libathena-private/athena-vfs-file.c:
        * libathena-private/athena-vfs-utils.c:
        * libathena-private/athena-vfs-utils.h:
        * libathena-private/athena-view-factory.c:
        * libathena-private/athena-view-factory.h:
        * src/file-manager/fm-desktop-icon-view.c:
        * src/file-manager/fm-empty-view.c:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/fm-list-view.c:
	Move from GnomeVFSFileType to GFileType

2007-11-28  Alexander Larsson  <alexl@redhat.com>

        * src/athena-search-bar.c:
	Use invisible event box for search bar. (#464193)
	Patch from Andrea Cimitan

2007-11-27  Andre Klapper  <a9016009@gmx.de>

	* configure.in:
	add "sys/param.h" to AC_CHECK_HEADERS() to fix NetBSD build.
	Fixes bug #496266.

2007-11-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-canvas-item.c:
        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-icon-container.h:
        * libathena-private/athena-icon-dnd.c:
        * libathena-private/athena-icon-private.h:
        * src/file-manager/fm-desktop-icon-view.c:
        * src/file-manager/fm-icon-view.c:
	Handle RTL layout of icons (#342009)
	Patch from Yair Hershkovitz

2007-11-05  Jürg Billeter  <j@bitron.ch>

	reviewed by: Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(action_open_folder_window_callback), (open_one_in_folder_window),
	(action_location_open_folder_window_callback),
	(real_update_location_menu), (real_update_menus):
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-actions.h:
	* src/athena-navigation-window-menus.c:
	(athena_navigation_window_update_spatial_menu_item),
	(action_folder_window_callback),
	(athena_navigation_window_initialize_menus):
	* src/athena-navigation-window-ui.xml:
	* src/athena-navigation-window.c:
	(athena_navigation_window_init), (always_use_browser_changed):
	* src/athena-window-private.h:
	Add menu item to open spatial folder window from browser window to File
	menu and context menus.

2007-10-03  Christian Neumair  <cneumair@gnome.org>

        * libathena-private/athena-module.c:
	Fix valgrind warning on shutdown (#346401, re-applied).

2007-10-03  Sebastien Bacher  <seb128@ubuntu.com>

	* libathena-private/athena-icon-container.c: (key_press_event):
	patch from Joachim Sauer, fix beep when backspace or delete are pressed
	(#452067)

2007-10-03  Alexander Larsson  <alexl@redhat.com>

        * src/athena-sidebar-title.c:
        (update_title_font):
	Fix crash with small fonts (#454884)

2007-10-02  Frederic Crozat  <fcrozat@mandriva.com>

	Backport from gio-branch, fixes #480608, from 
	Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c:
	Don't clear thumbnails and other absolute pathnames from icon
	cache when mime data or icon theme changes. This is to avoid
	flashing and async realoading of all thumbnails.

	* libathena-private/athena-directory-async.c:
	(mime_db_changed_callback):
	Use the right call to invalidate attributes, so that
	they get re-read correctly.

2007-09-27  Christian Neumair  <cneumair@gnome.org>

	* libathena-private/athena-icon-factory.c:
	(async_thumbnail_load_func): Frame asynchronously loaded thumbnails.
	Fixes #478363.

2007-09-18  Alexander Larsson  <alexl@redhat.com>
	
        * libathena-private/athena-file-private.h:
	Clean up AthenaFileDetails a bit.

2007-09-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-extension/athena-file-info.[ch]:
        * libathena-private/athena-desktop-directory-file.c:
        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory.c:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.[ch]:
        * libathena-private/athena-icon-factory.c:
        * libathena-private/athena-saved-search-file.c:
        * libathena-private/athena-search-directory-file.c:
        * libathena-private/athena-thumbnails.c:
        * libathena-private/athena-trash-file.c:
        * libathena-private/athena-vfs-file.c:
        * src/file-manager/fm-directory-view.c:
	Store file info directly in AthenaFile instead of using a
	GnomeVfsFileInfo.

2007-09-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-directory-file.c:
        * libathena-private/athena-desktop-icon-file.c:
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-file-operations-progress.c:
        * libathena-private/athena-file-operations-progress.h:
        * libathena-private/athena-file-private.h:
        * libathena-private/athena-file.c:
        * libathena-private/athena-file.h:
        * libathena-private/athena-metafile.c:
        * libathena-private/athena-search-directory-file.c:
        * libathena-private/athena-thumbnails.c:
        * libathena-private/athena-trash-file.c:
        * libathena-private/athena-vfs-file.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-ditem-page.c:
        * src/file-manager/fm-icon-view.c:
        * src/file-manager/fm-properties-window.c:
	Use goffset instead of GnomeVFSFileSize

2007-09-18  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/Makefile.am:
        * libathena-private/athena-vfs-utils.[ch]:
	Added tools for conversion from GnomeVFSResult to GError
	
        * libathena-private/athena-directory-async.c:
        * libathena-private/athena-directory-private.h:
        * libathena-private/athena-directory.[ch]:
        * libathena-private/athena-search-directory.c:
        * src/file-manager/fm-directory-view.[ch]:
        * src/file-manager/fm-error-reporting.[ch]:
	Use GError instead of GnomeVFSResult for directory loading errors

2007-09-18  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Add -gio to version for now
	Pull in gio-standalone

=== gio-branch starts here ===
	
2007-09-18  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.20.0 ===

2007-09-18  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump version to 2.20.0

2007-09-14  Alexander Shopov  <ash@contact.bg>

	* libathena-private/apps_athena_preferences.schemas.in
	Added translator visible comment for difference
	between date_changed and date_modified.

2007-09-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-module.c:
	Revert. We're in hard code freeze.
	
2007-09-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-module.c:
	Fix valgrind warning on shutdown (#346401)

2007-09-10  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-thumbnails.[ch]:
	Add athena_thumbnail_load_image_async and cancel.
	
        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-icon-factory.[ch]:
	Load thumbnails asynchronously

	Patch from Christian Neumair

2007-09-10  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-dnd.h:
        * libathena-private/athena-file-dnd.c:
        * libathena-private/athena-icon-dnd.c:
	Implement direct save (XDS) DnD.
	Based on patch from BROCCO Amos

2007-09-10  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        (athena_file_get_octal_permissions_as_string):
	Filter out any non-unix-permissions flags for the
	octal mode.

2007-09-03  Christian Neumair  <cneumair@gnome.org>

	* src/athena-application.c: (save_session_to_file),
	(athena_application_load_session): 
	* src/athena-window-manage-views.c: (setup_new_window),
	(athena_spatial_window_state_event):
	* src/athena-spatial-window.c:
	(athena_spatial_window_state_event):
	* libathena-private/athena-metadata.h:
	Store keep-above and stickiness for navigation and spatial windows
	across sessions (#163335).

2007-09-03  Alexander Larsson  <alexl@redhat.com>

        * src/athena-connect-server-dialog.c:
        (port_insert_text):
	Use gdk_window_beep instead of gdk_display_beep (#373760)
	Based on patch from Young-Ho Cha

2007-08-28  Alexander Larsson  <alexl@redhat.com>

	* athena-folder-handler.desktop.in.in (MimeType):
	Add colon at end of list.

2007-08-27  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.19.91 ===

2007-08-27  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

2007-08-27  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
        (change_to_view_directory):
	Set cwd correctly for scripts on desktop. (#320218)
	Patch from Sebastien Bacher

2007-08-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-module.c:
	Be more robust against broken extensions (#449488)

2007-08-24  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-file.c:
	Avoid crashing if going to file:///# (#436071)

2007-08-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-icon-factory.c:
        * libathena-private/athena-icon-factory.h:
        * src/file-manager/fm-list-model.c:
        * src/athena-sidebar-title.c:
	The icon theme changed how the sizes of the emblem icons
	are used, update to comply with that.

2007-08-14  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump

=== athena 2.19.90 ===

2007-08-14  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

2007-08-13  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	* src/athena-navigation-window-menus.c:
	Replace references to "sidebar" with "side pane". (#131285)
	Patch from Reinout van Schouwen  <reinouts@gnome.org>

2007-08-04  Luis Medinas  <lmedinas@svn.gnome.org>

	* src/athena-window-manage-views.c:
	(display_view_selection_failure):
	Added debug message when GnomeVFS service is not available
	closes bgo #168533. Patch from Luis Medinas <lmedinas@svn.gnome.org>.

2007-08-02  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-extension/libathena-extension-uninstalled.pc.in:
	Remove excess lines from uninstalled.pc file. (#462496)
	Patch from Damien Carbery  <damien.carbery@sun.com>

2007-08-01  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-cell-renderer-text-ellipsized.c:
	* libathena-private/athena-cell-renderer-text-ellipsized.h:
	* src/file-manager/fm-list-view.c: (create_and_set_up_tree_view):
	Use a custom cell renderer for the filename column which applies
	ellipsization but reports its size based on the actual width of 
	the text to be rendered. This restores the original column
	autosizing behaviour while keeping the ellipsization. (#419343)

2007-07-31  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump

=== athena 2.19.6 ===

2007-07-31  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

2007-07-31  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in: Revert dependency on libSM 1.0.2
	added on 2007-07-24 as it makes athena unbuildable on
	everything but the most cutting-edge distributions.
	Plus, nobody else does it.  

2007-07-31  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window-toolbars.c:
	(athena_navigation_window_load_extension_toolbar_items):
	Don't use the same name for the extensions menu action group
	and the extensions toolbar action group. (#461792)
	Patch from Christian Persch <chpe@gnome.org>

2007-07-30  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window.c: (real_load_view_as_menu):
	Dont't try to remove extra_viewer_radio_action from a group
	that may already have been finalized. (#461789)
	Patch from Christian Persch <chpe@gnome.org>

2007-07-30  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-search-engine-simple.c:
	(search_visit_func): Don't try to lowercase non-unicode
	filenames with g_utf8_strdown. Fixes #454799.
	Patch from Jan de Groot  <jan@jgc.homeip.net>

2007-07-28  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-properties-window.c:
	(changed_group_callback): Don't crash if the active group
	combobox entry is removed or the group information becomes
	unreadable. Fixes #355018.

2007-07-24  Christian Persch  <chpe@gnome.org>

	* libathena-private/athena-bookmark.c:
	(athena_bookmark_menu_item_new):
	* libathena-private/athena-customization-data.c:
	(athena_customization_data_new),
	(athena_customization_data_get_next_element_for_display):
	* libathena-private/athena-customization-data.h:
	* src/athena-application.c:
	* src/athena-bookmark-list.c: (new_bookmark_from_uri):
	* src/athena-navigation-window-menus.c: (connect_proxy_cb),
	(refresh_go_menu):
	* src/athena-places-sidebar.c: (bookmarks_drop_uris),
	(drag_data_received_callback):
	* src/athena-property-browser.c:
	(make_properties_from_directories):
	* src/athena-window-bookmarks.c: (connect_proxy_cb),
	(update_bookmarks):
	* src/athena-window-menus.c:
	(athena_menus_append_bookmark_to_menu):
	* test/test-athena-wrap-table.c: (main): Use pango ellipsisation
	instead of truncating the strings. Bug #410113.

2007-07-24  Christian Persch  <chpe@gnome.org>

	* src/athena-navigation-window.c: (location_button_create),
	(athena_navigation_window_init):
	* src/athena-pathbar.c: (get_slider_button),
	(make_directory_button):
	* src/athena-zoom-control.c: (athena_zoom_control_finalize),
	(athena_zoom_control_instance_init),
	(athena_zoom_control_class_init): Don't focus the path bar buttons
	(and the others on the same 'toolbar') on click, for consistency with
	toolbars, and the gtk filechooser path bar. Bug #326774.

2007-07-24  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require cvs gnome-vfs

2007-07-24  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
        * src/Makefile.am:
        * src/athena-image-properties-page.c:
        * src/athena-main.c:
	Optionally support XMP metadata in images via exemi (#451380)
	Patch from Hubert Figuiere

2007-07-24  Alexander Larsson  <alexl@redhat.com>

        * src/athena-connect-server-dialog.c:
        (athena_connect_server_dialog_init):
	React on enter key (#449591)
	Patch from Christian Neumair

2007-07-24  Christian Kirbach  <Christian.Kirbach@googlemail.com>

        * configure.in:	
        Add missing dependency on libSM.

2007-07-24  Luca Ferretti  <elle.uca@libero.it>

	* libathena-private/apps_athena_preferences.schemas.in:
	fixed a typo in key description

2007-07-23  Andre Klapper  <a9016009@gmx.de>

	* src/athena-file-management-properties.glade:
	corrected executable text file labels (#334309)

2007-07-23  Andre Klapper  <a9016009@gmx.de>

	* src/file-manager/fm-directory-view.c:
	improved string and added ngettext support (#326952)

2007-07-23  Andre Klapper  <a9016009@gmx.de>

	* libathena-private/apps_athena_preferences.schemas.in:
	corrected description for confirm_trash (#329440)

2007-07-23  Andre Klapper  <a9016009@gmx.de>

	* src/athena-window-menus.c:
	added two missing tooltip strings (#329308)

2007-07-23  Christian Persch  <chpe@gnome.org>

	* configure.in:
	* src/athena-navigation-action.c: (connect_proxy),
	(disconnect_proxy):
	* src/athena-navigation-window-menus.c: (connect_proxy_cb),
	(refresh_go_menu):
	* src/athena-navigation-window.c: (location_button_create),
	(athena_navigation_window_init),
	(athena_navigation_window_destroy),
	(athena_navigation_window_finalize),
	(athena_navigation_window_class_init):
	* src/athena-query-editor.c: (athena_query_editor_dispose),
	(athena_query_editor_add_row), (athena_query_editor_init),
	(finish_first_line):
	* src/athena-side-pane.c: (side_panel_free),
	(athena_side_pane_class_init), (athena_side_pane_init),
	(athena_side_pane_dispose), (athena_side_pane_finalize),
	(athena_side_pane_add_panel), (create_shortcut):
	* src/athena-trash-bar.c: (athena_trash_bar_class_init),
	(athena_trash_bar_init):
	* src/athena-window-private.h: Port to new gtk+ 2.11 tooltips API.
	Bug #458284 and bug #455616.

2007-07-23  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-search-engine-simple.c:
	Don't error out when recursing into directories during search. (#433105)
	Requires recent gnome-vfs
	Patch from Marlon Nelson

2007-07-21  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	* libathena-extension/libathena-extension-uninstalled.pc.in:
	Add uninstalled pkg-config file. (#400114)
	Patch from Brian Cameron  <brian.cameron@sun.com>

2007-07-21  Martin Wehner  <martin.wehner@gmail.com>

	* athena-computer.desktop.in.in:
	* athena-folder-handler.desktop.in.in:
	* athena-home.desktop.in.in:
	Remove trailing whitespace from TryExec line. (#426949)
	Patch from Dan Winship  <danw@novell.com>

2007-07-18  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-navigation-window.c:
	(view_as_menu_switch_views_callback):
	Handle the fact that the gtk+ 2.11.x combobox emits the
	changed signal on removing the active entry without crash.

2007-07-10  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump

=== athena 2.19.5 ===

2007-07-10  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

2007-07-10  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-program-choosing.c:
	(athena_launch_desktop_file):
	Check command_string for NULL before using it. (#427618)
	Patch from Tom Parker  <palfrey@tevp.net>

2007-07-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-image-properties-page.c: (file_read_callback):
	Don't ignore EXIF metadata of JPEG with XMP. (#451344)
	Patch from Hubert Figuiere  <hfiguiere@teaser.fr>

2007-07-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-sidebar-title.c: (sidebar_title_create_title_label),
	(sidebar_title_create_more_info_label):
	Fix alignment of labels in information sidebar. (#414199)
	Patch from Andrea Cimitan  <andrea.cimitan@gmail.com>

2007-07-10  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Remove AC_ISC_POSIX: It would have to be called after AC_PROG_CC,
	but Interactive Unix is obsolete.
	Remove checks for functions and headers we don't use anymore.
	Remove check for jw as the SGML docs have been removed.
	Remove configuration for removed gimphwrapbox.
	Remove unused variables $CDDA_LIBS and $LIBJPEG. 

2007-07-10  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-cdrom-extensions.h:
	Remove unused file.

2007-06-27  Alexander Larsson  <alexl@redhat.com>

        * src/athena-file-management-properties-main.c:
	Fix warning. Patch from Hubert Figuiere.

2007-06-24  Christian Neumair  <cneumair@gnome.org>

	* configure.in:
	* src/athena-application.c:
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-empty-view.[ch]:
	Add optional empty view.

2007-06-23  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Make libexif dependency optional again. (#165773)

2007-06-23  Martin Wehner  <martin.wehner@gmail.com>

	* components/services/athena-dependent-shared/
	shared-service-widgets.c:
	Remove undead file.

2007-06-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-shell-interface.idl:
	Fix build with libIDL-0.8.5 and older. (#341173)
	Patch from Marinus Schraal  <foser@gentoo.org>

2007-06-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-connect-server-dialog-main.c: (main):
        Set translation domain for goption context. (#450159)
	Patch from Gabor Kelemen  <kelemeng@gnome.hu>

2007-06-23  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-module.c: (athena_module_init):
	Unref extension modules at shutdown. (#346401)
	Based on patch from Gustavo Carneiro  <gjc@inescporto.pt>

2007-06-23  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-utilities.c:
	(update_xdg_dir_cache), (unschedule_user_dirs_changed),
	(destroy_xdg_dir_cache), (free_xdg_dir_cache):
	Destroy xdg-user-dirs cache at shutdown.

2007-06-21  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Don't set both -Wsign-compare and -Wno-sign-compare.
	Don't set -Wchar-subscripts as it's included in -Wall.

2007-06-20  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Don't set extra warning flags in the user environment CFLAGS.
	Fixes 'make distcheck'.

2007-06-19  Martin Wehner  <martin.wehner@gmail.com>

	* Makefile.am:
	Add all past ChangeLog files to EXTRA_DIST.

2007-06-19  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump

=== athena 2.19.4 ===

2007-06-18  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

2007-06-18  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-application.c: (athena_application_startup):
	Fix whitespace typo in error message. (#424573)
	Patch from Elizabeth Green  <nerdygirl_ellie@yahoo.com>

2007-06-18  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window-menus.c: (action_about_athena_callback):
	Set program-name instead of deprecated name property
	and mark the website-label for translation (#438901).
	Patch from Christian Persch <chpe@gnome.org>

2007-06-18  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-search-engine-simple.c:
	(search_thread_data_new), (search_visit_func):
	Normalize unicode search strings and use g_utf8_strdown to
	lowercase them. (#421486/#421512)
	Patch from Denis Jacquerye  <moyogo@gmail.com>

2007-06-18  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-desktop-icon-view.c:
	(action_change_background_callback):
	Call background page of gnome-appearance-properties for
	"Change Desktop Background" menu item. (#445195)
	Patch from Denis Washington  <denisw@svn.gnome.org>

2007-06-17  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-desktop-link.c:
	(trash_name_changed), (athena_desktop_link_new),
	(trash_state_changed_callback), (athena_desktop_link_can_rename),
	(athena_desktop_link_rename), (desktop_link_finalize):
	* libathena-private/athena-global-preferences.c:
	(default_computer_link_name), (default_trash_link_name):
	* libathena-private/athena-global-preferences.h:
	Allow renaming of the network servers desktop icon. (#383182)
	Patch from Trevor Davenport  <trevor.davenport@gmail.com>

2007-06-13  Jürg Billeter  <j@bitron.ch>

	* athena-folder-handler.desktop.in.in:
	Revert OnlyShowIn=; addition from 2007-05-23 as it breaks opening
	bookmarks from the panel.

2007-06-13  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-properties-window.c:
	(should_show_volume_usage):
	Don't crash on opening properties for multiple files. (#444265)

2007-06-13  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-desktop-icon-view.c: (net_workarea_changed):
	Fix typo in warning message. (#446911)
	Patch from Florian Steinel  <fsteinel@flonet.net> 

2007-06-13  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-zoom-control.c: (zoom_popup_menu_show):
	Position the zoom popup menu under the control itself,
	not where the mouse cursor happens to be. (#446682)
	Patch from Christian Persch <chpe@gnome.org>

2007-06-12  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-zoom-control.c: (create_zoom_menu_item):
	Don't leak item text and remove stale comment.

2007-06-12  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-zoom-control.c: (athena_zoom_control_finalize),
	(zoom_popup_menu_show), (zoom_popup_menu),
	(athena_zoom_control_button_press_event),
	(athena_zoom_control_instance_init):
	Make zoom control context menu keyboard-activatable by adding
	a button to the zoom label. (#326733)
	Patch from Trevor Davenport  <trevor.davenport@gmail.com>

2007-06-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-file-management-properties.glade:
	Replace the "atkrelation" declarations with
	"mnemonic_widget" properties (#437340)

2007-06-05  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump

=== athena 2.19.3 ===

2007-06-05  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

2007-06-04  Willie Walker <william.walker@sun.com>

        * src/athena-file-management-properties.glade:
        Add accessible label for/by properties (#356124)

2007-05-23  Alexander Larsson  <alexl@redhat.com>

	* icons/thumbnail_frame.png:
	Tango compliant thumbnail frame (#440221)
	Icon from David Prieto

2007-05-23  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Fix build in some cases

2007-05-23  Alexander Larsson  <alexl@redhat.com>

        * athena-folder-handler.desktop.in.in:
	Don't show in menu editor

2007-05-22  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-canvas-item.c:
	Handle alpha in draw_frame

2007-05-16  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-utilities.[ch]:
        * libathena-private/athena-file.c:
        * libathena-private/athena-signaller.c:
        * src/file-manager/fm-directory-view.c:
	Add support for xdg-user-dirs

2007-05-14  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.19.2 ===

2007-05-14  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	* configure.in:
	Bump to 2.19.2

	* libathena-private/athena-icon-factory.c:
	* libathena-private/athena-icon-container.c:
	Fix up checks

2007-05-09  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
	Avoid displaying file size if none exists (#390055)
	Patch from Ed Catmur

2007-05-06  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file.c: (modify_link_hash_table):
	Don't leak original hash key.

2007-05-02  Alexander Larsson  <alexl@redhat.com>

        * configure.in:
        * src/file-manager/fm-properties-window.c:
	Add disk usage pie chart (#410658)
	Based on patch from Trevor Davenport

2007-04-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-thumbnails.c:
	Work with glib < 2.13.0

2007-04-13  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-thumbnails.c:
	Avoid searching possibly long lists of thumbnails.
	Based on patch from Iain

2007-04-12  Alexander Larsson  <alexl@redhat.com>

        * src/athena-window-menus.c:
        (action_about_athena_callback):
	Add url in about dialog and update copyright year.
	Patch from Jaap A. Haitsma

2007-04-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c:
	Limit number of calls to is_needy() (#320282)
	Based on patch from Aivars Kalvans

2007-04-12  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/apps_athena_preferences.schemas.in:
        * libathena-private/athena-global-preferences.c:
        * libathena-private/athena-global-preferences.h:
        * libathena-private/athena-icon-factory.c:
        * libathena-private/athena-thumbnails.c:
	Added support for a thumbnail icon size prefs (#424127)

2007-04-11  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-directory-view.c:
        (file_and_directory_list_free):
	Fix memleak (#427942)
	patch from Matthias Clasen

2007-03-30  Alexander Larsson  <alexl@redhat.com>

        * src/athena-places-sidebar.c:
	Add trash to sidebar places.
	Patch from Stefano Teso

2007-03-29  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (create_and_set_up_tree_view):
	Bump default name column width to 32 (#410361)

2007-03-28  Alexander Larsson  <alexl@redhat.com>

        * src/athena-window-manage-views.c:
        (athena_window_open_location_full):
	Avoid reloading window with same location. (#417193)
	Patch from Stefano Teso

2007-03-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_emit_changed):
	Avoid recursion when updating symlinks (#418771)

2007-03-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-icon-factory.h:
	Make default icon sizes match xdg icon sizes better (#347168)
	Patch from Christian Neumair

2007-03-19  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-metadata.h:
        * src/athena-sidebar-title.c:
	Remove unused metadata key ATHENA_METADATA_KEY_NOTES and
	code related to it.

2007-03-19  Alexander Larsson  <alexl@redhat.com>

	* src/athena-places-sidebar.c:
	Update icons on theme change (#416806)
	Patch from Stefano Teso

2007-03-19  Alexander Larsson  <alexl@redhat.com>

        * src/athena-history-sidebar.c:
        (athena_history_sidebar_class_init):
        (athena_history_sidebar_style_set):
	Update icons on theme change (#416810)
	Patch from Stefano Teso

2007-03-19  Alexander Larsson  <alexl@redhat.com>

        * src/athena-places-sidebar.c:
	Re-apply reverted context menu patch.

2007-03-19  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.19.1
	Gnome 2.18 work continues on gnome-2-18 branch

2007-03-19  Alexander Larsson  <alexl@redhat.com>

        * src/athena-places-sidebar.c:
	Revert previous checkin since it broke the freeze.

2007-03-15  Alexander Larsson  <alexl@redhat.com>

        * src/athena-places-sidebar.c:
        (bookmarks_build_popup_menu):
	Add mnemonics to Open and Open in New Window to reuse
	old translations.

2007-03-14  Alexander Larsson  <alexl@redhat.com>

        * src/athena-places-sidebar.c:
	Add open and open in new window to places sidebar context menu.
	Patch from Stefano Teso

2007-03-14  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (schedule_update_menus)
	(schedule_update_status):
	Make sure we never schedule an update after the window has been
	destroyed. Likely fixes #349551

2007-03-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.18.0.1 ===

2007-03-12  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

        * configure.in:
	Set version to 2.18.0.1

        * libathena-private/athena-file-utilities.c:
        * libathena-private/athena-file-utilities.h:
        * libathena-private/athena-file.c:
        * libathena-private/athena-signaller.c:
        * src/file-manager/fm-directory-view.c:
	Revert accidental commit.

2007-03-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.18.0 ===

2007-03-12  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Bump version to 2.18.0

2007-03-08  Christian Kirbach  <Christian.Kirbach@googlemail.com>

        * src/network-scheme.desktop.in:
	* athena-computer.desktop.in.in:
	* athena.desktop.in.in:
	* athena-home.desktop.in.in:
	* athena-file-management-properties.desktop.in.in:
        "Application" is not a valid category in the freedesktop.org
	specification. Also added GNOME and/or GTK where appropriate.

2007-03-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
        * libathena-private/athena-icon-canvas-item.c:
        * libathena-private/athena-icon-container.c:
        * libathena-private/athena-program-choosing.c:
        * libathena-private/athena-trash-file.c:
        * libathena-private/athena-tree-view-drag-dest.c:
        * src/file-manager/fm-desktop-icon-view.c:
        * src/file-manager/fm-directory-view.c:
        * src/file-manager/fm-list-model.c:
        * src/file-manager/fm-list-view.c:
        * src/file-manager/fm-tree-model.c:
        * src/athena-image-properties-page.c:
        * src/athena-navigation-bar.c:
        * src/athena-query-editor.c:
        * src/athena-search-bar.c:
        * src/athena-window-private.h:
	Sparse cleanups from kjartan

2007-03-02  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (create_and_set_up_tree_view):
	Don't make filename column expand, instead default
	to 16 chars wide. (#408155)

2007-02-26  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.17.92 ===

2007-02-26  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2007-02-26  Alexander Larsson  <alexl@redhat.com>

        * cut-n-paste-code/widgets/Makefile.am:
        * cut-n-paste-code/widgets/gimphwrapbox/Makefile.am: Removed.
        * cut-n-paste-code/widgets/gimphwrapbox/gtkhwrapbox.c: Removed.
        * cut-n-paste-code/widgets/gimphwrapbox/gtkhwrapbox.h: Removed.
        * cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.c: Removed.
        * cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.h: Removed.
        * libathena-private/Makefile.am:
        * src/Makefile.am:
	Remove unused gtkhwrapbox.

2007-02-26  Alexander Larsson  <alexl@redhat.com>

        * src/athena-connect-server-dialog.c:
	Don't show unsupported methods. (#333151)
	Patch from Christian Neumair.

2007-02-26  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file.c:
	Avoid asserting when the symbolic link hastable isn't
	uptodate (#358172)
	Store absolute uris, not relative paths in symbolic link
	hashtable.

2007-02-21  Christian Persch  <chpe@svn.gnome.org>

	* src/file-manager/fm-list-view.c: (create_and_set_up_tree_view):
	Ellipsise the filename column in list view mode, and make it expand so
	it doesn't just show "...". Bug #408155.

2007-02-20  Christian Persch  <chpe@svn.gnome.org>

	* libathena-private/athena-file-operations-progress.c:
	(set_text_unescaped_trimmed), (create_titled_label),
	(athena_file_operations_progress_init),
	(athena_file_operations_progress_new_file):
	* src/file-manager/fm-properties-window.c:
	(value_field_update_internal), (value_field_update),
	(attach_label), (attach_value_field_internal): Remove
	EllEllipsisingLabel use, and just use GtkLabel ellipsisation instead.
	Bug #409276.

2007-02-20  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
	Fix for C89 compilers. (#407150)
	Patch from Jens Granseuer

2007-02-19  Christian Persch  <chpe@svn.gnome.org>

	* configure.in:
	* cut-n-paste-code/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/fm-list-model.c: Don't build included GSequence on
	glib >= 2.13.0. Bug #407618.

2007-02-19  Alexander Larsson  <alexl@redhat.com>

        * src/athena-pathbar.c:
	Don't display homedir as desktop in pathbar when
	in home-as-desktop mode. (#368661)
	Patch from John Millikin

2007-02-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.17.91 ===

2007-02-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump to 2.17.91

	* NEWS:
	Update for release

2007-02-06  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump libgnome req (#404475)

2007-02-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        * libathena-private/athena-file.c:
        * src/file-manager/fm-directory-view.c:
	Capitilize "Link" in link to... names. (#314175)
	Patch from Frederic Peters

2007-02-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	Avoid translating nonvisible text. (#364466)

2007-02-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-thumbnails.c:
        (athena_thumbnail_load_image):
	Fix crash on broken images. (#403255)
	Patch from Lucas Mazzardo Veloso

2007-02-06  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-emblem-utils.c:
	OSX build fix. (#403255)
	Patch from dmacks@netspace.org

2007-02-05  Jesse Stockall <jesse@cleverone.org>

       * src/file-manager/fm-directory-view.c
       * src/file-manager/fm-tree-view.c
       * src/athena-places-sidebar.c
       * libathena-private/athena-file-operations.[ch]
       Prompts to empty trash when unmounting drives. Closes #138058

2007-02-05  Alexander Larsson  <alexl@redhat.com>

        * src/file-manager/fm-list-model.c:
	Avoid ever showing "empty" while loading a subdirectory (#340495)
	Based on patch from Christof Krüger

2007-02-02  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c (save_session_to_file):
	Fix memory leak and fd leak.

2007-02-02  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-desktop-icon-file.c:
	Fix crasher (#403565)
	Patch from Padraig O'Briain

2007-01-31  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c (athena_application_present_spatial_window_with_selection):
	Avoid crash if we've not set the content view of the window yet.

2007-01-31  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.c (update_icon_captions_from_gconf):
	Avoid crashing if not enough items in icon view caption pref (#357955)

	* src/file-manager/fm-icon-container.c (fm_icon_container_get_icon_text):
	Avoid spewing warnings in above case, also some performance fixes.

2007-01-25  Luca Ferretti  <elle.uca@libero.it>

	* athena-file-management-properties.desktop.in.in:
	Move File Management capplet to PersonalSettings.

=== athena 2.17.90 ===

2007-01-22  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	* configure.in:
	Bump to 2.17.90

2007-01-18  Christian Persch  <chpe@svn.gnome.org>

	* cut-n-paste-code/libegg/eggtreemultidnd.c:
	(egg_tree_multi_drag_source_get_type):
	* libathena-extension/athena-column-provider.c:
	(athena_column_provider_get_type):
	* libathena-extension/athena-column.c:
	(athena_column_get_type):
	* libathena-extension/athena-file-info.c:
	(athena_file_info_get_type):
	* libathena-extension/athena-info-provider.c:
	(athena_info_provider_get_type):
	* libathena-extension/athena-location-widget-provider.c:
	(athena_location_widget_provider_get_type):
	* libathena-extension/athena-menu-item.c:
	(athena_menu_item_get_type):
	* libathena-extension/athena-menu-provider.c:
	(athena_menu_provider_get_type):
	* libathena-extension/athena-menu.c: (athena_menu_get_type):
	* libathena-extension/athena-property-page-provider.c:
	(athena_property_page_provider_get_type):
	* libathena-extension/athena-property-page.c:
	(athena_property_page_get_type):
	* libathena-private/athena-cell-renderer-pixbuf-emblem.c:
	(athena_cell_renderer_pixbuf_emblem_get_type):
	* libathena-private/athena-entry.c: (athena_entry_get_type):
	* libathena-private/athena-file.c: (athena_file_get_type):
	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_accessible_get_type),
	(athena_icon_canvas_item_get_type):
	* libathena-private/athena-sidebar-provider.c:
	(athena_sidebar_provider_get_type):
	* libathena-private/athena-sidebar.c:
	(athena_sidebar_get_type):
	* libathena-private/athena-view.c: (athena_view_get_type):
	* libathena-private/athena-window-info.c:
	(athena_window_info_get_type):
	* src/file-manager/fm-ditem-page.c: (fm_ditem_page_get_type):
	* src/file-manager/fm-list-model.c: (fm_list_model_get_type):
	* src/file-manager/fm-tree-model.c: (fm_tree_model_get_type):
	* src/athena-navigation-action.c:
	(athena_navigation_action_get_type): No need to make GTypeInfo and
	GInterfaceInfo static. Bug #362034.

2007-01-18  Luca Ferretti  <elle.uca@libero.it>

	* src/athena-window-menus.c:
	Restore "CD/DVD Creator" label for menu item. Was removed by
	a misunderstood, see bug #385382.

2007-01-11  Mark Gordon  <mtgordon@ximian.com>

	Merged from gnome-2-16:

	* src/athena-property-browser.c (add_reset_property): Make the
	"Reset" string translatable.  Fixes #394328.  Patch committed by
	Federico Mena-Quintero <federico@novell.com>.

2007-01-11  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-directory-background.c:
	(athena_connect_background_to_file_metadata):
	Remove all pending eel preferences callbacks.

2007-01-11  Christian Neumair  <chris@gnome-de.org>

	* src/athena-navigation-window.c:
	(athena_navigation_window_key_press_event)
	* src/athena-actions.h:
	* src/athena-window.c:
	(athena_window_key_press_event)
	* configure.in:
	Add support for XF86 multimedia keys (#329920) .

2007-01-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c (read_dot_hidden_file):
	Avoid crash on NULL vfs_uri (#320020)

2007-01-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-file-operations.c:
        (athena_file_operations_new_file_from_template):
	Use default permissions when copying template to use
	umask correctly. (#327249)
	Patch from Josselin Mouette

2007-01-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (get_target_file_for_original_file):

	Handle NULL activation uris from drives

2007-01-11  Alexander Larsson  <alexl@redhat.com>

        * libathena-private/athena-ui-utilities.c:
        (athena_ui_string_get):
	Handle ui file load error better.
	Patch from Tom Parker

2006-12-31  Martin Wehner  <martin.wehner@gmail.com>

	Add svn:externals property to include libbackground from trunk.

2006-12-27  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (real_merge_menus):
	Use proper macro for translating the scripts menu item (#389467).
	Patch from Gabor Kelemen  <kelemeng@gnome.hu>

2006-12-19  Federico Mena Quintero  <federico@novell.com>

	* libathena-private/athena-debug-log.c
	(make_key_file_from_configuration): Oops, handle the case of an
	empty domains_hash.

2006-12-19  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-operations-progress.c:
	(time_remaining_callback):
	Zero-pad seconds in the remaining time display (#376291).
	Patch from Sven Herzberg  <herzi@gnome-de.org>

2006-12-19  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-image-properties-page.c: (load_finished):
	* src/athena-query-editor.c: (athena_query_editor_init),
	(setup_internal_entry):
	Avoid markup in translatable messages (#360448).
	Patch from Elijah Newren <newren@gmail.com>

2006-12-18  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-navigation-window.c:
	(athena_navigation_window_instance_init), (load_view_as_menu):
	Don't connect the changed signal handler on the view as combobox
	each time the contents of the combobox are reloaded, but only on
	instantiation. Prevents creating as many view instances as times
	the view/location was already changed when using the view as menu.

2006-12-18  Christian Neumair  <chris@gnome-de.org>

	* libathena-extension/athena-file-info.c:
	* libathena-extension/athena-file-info.h:
	* libathena-private/athena-file.c:
	Add athena_file_info_get_activation_uri().

2006-12-18  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.17.1 ===

2006-12-18  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

2006-12-18  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-trash-bar.c:
	* src/athena-trash-bar.h:

	Remove unneeded function I left in by mistake.

2006-12-18  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-trash-bar.c:
	* src/athena-trash-bar.h:
	* src/athena-window-manage-views.c:

	Add an extra widget to the trash folder with the "Empty Trash"
	button. Kudos also to Lakin Wecker who came up with a similar
	patch some months ago, though it never went in.

	* src/athena-information-panel.c:

	Remove the "Empty Trash" and "Burn" buttons from the side pane
	since we now have extra location widgets.

2006-12-18  Luca Ferretti  <elle.uca@libero.it>

	* src/file-manager/fm-directory-view.c:

	Use "document-new", "folder-new" named icon from
	Icon Naming Spec for File->Create Document and
	File->Create Folder menu entries.

	* src/athena-navigation-window-menus.c:

	Use "window-new" named icon from Icon Naming Spec for
	File->New Window menu entry in browser window.

2006-12-16  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-navigation-window.c (add_sidebar_panels): plug
	a tiny leak.

2006-12-15  Luca Ferretti  <elle.uca@libero.it>

	* athena-computer.desktop.in.in:

	Fix a typo in previous commit (folders, not folder)

2006-12-15  Luca Ferretti  <elle.uca@libero.it>

	* src/athena-actions.h:

	Add ATHENA_ACTION_HOME for Go->Home Folder

	* src/athena-navigation-window-menus.c:
	(athena_navigation_window_initialize_actions),
	(athena_navigation_window_initialize_menus):
	* src/athena-spatial-window.c:
	* src/athena-window-menus.c: (athena_window_initialize_menus):

	Define short_label for ATHENA_ACTION_HOME and
	ATHENA_ACTION_SEARCH, to use on toolbar. Also fix capitalization
	in search menu entry.

2006-12-13  Luca Ferretti  <elle.uca@libero.it>

	* athena-computer.desktop.in.in:
	* athena-file-management-properties.desktop.in.in:
	* athena-home.desktop.in.in:
	* src/athena-navigation-window-menus.c:
	* src/athena-spatial-window.c:
	* src/athena-window-menus.c:
	* src/network-scheme.desktop.in:

	Update comments and some menu entries to match suggestions on
	http://live.gnome.org/UsabilityTeam/Menu

2006-12-12  Federico Mena Quintero  <federico@novell.com>

	* libathena-private/athena-debug-log.c
	(DEFAULT_RING_BUFFER_NUM_LINES): Oops, make this 1000 by default;
	30000 was way too big for normal usage.
	(add_to_milestones): New function; adds a milestone string to a
	linked list of milestones.
	(athena_debug_logv): Call add_to_milestones() if appropriate.
	(write_string): New helper function.
	(dump_milestones): New helper function.
	(dump_configuration): Use write_string().
	(dump_ring_buffer): New helper function; moved the code from
	athena_debug_log_dump().
	(athena_debug_log_dump): Use dump_milestones() and dump_ring_buffer().
	(dump_configuration): Print the instructions to re-create the
	configuration here, instead of in athena_debug_log_dump().

2006-12-12  Christian Persch  <chpe@cvs.gnome.org>

	* src/ephy-spinner.c:
	* src/ephy-spinner.h: Update from Epiphany. Fixes #374623 and #382207.

	* src/athena-window-toolbars.c: Fix wrong spinner size. Bug #376952.

2006-12-12  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-application.c (save_session_to_file): use
	g_mkstemp instead of tempnam.

2006-12-12  Alexander Larsson  <alexl@redhat.com>

	* src/athena-location-dialog.c: (athena_location_dialog_init):
	Don't expand vbox with dialog size (#384078)
	Patch from Baptiste Mille-Mathias

2006-12-12  Alexander Larsson  <alexl@redhat.com>

	* src/athena-location-dialog.c: (athena_location_dialog_new):
	Default location dialog to $home for desktop (#383840)
	Patch from Guillaume Desmottes

2006-12-08  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-desktop-link.c:
	* libathena-private/athena-file-utilities.c:
	* libathena-private/athena-query.c:
	* src/athena-navigation-window.c:
	* src/athena-navigation-window.h:
	* src/athena-pathbar.c:
	* src/athena-places-sidebar.c:
	* src/athena-shell.c:
	* src/athena-window-manage-views.c:
	* src/athena-window.c:
	* src/file-manager/fm-tree-model.c:
	* src/file-manager/fm-tree-view.c:

	Use athena_get_home_directory_uri everywhere instead of
	open coding it and other minor cleanups.

2006-12-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-monitor.c:
	Schedule metadata removal when we get external remove events.
	Patch from Gene Z. Ragan (#45953)

2006-12-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	Disable the mask code for now...

2006-12-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-private.h:
	Draw selection rect using cairo.

	* icons/Makefile.am:
	* icons/text-selection-frame.png:
	Remove old icon used for selection rect.

	Patch from Gene Z. Ragan

2006-12-04  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Reveal selection on sort-order change.(#332667)
	Patch from Gene Z. Ragan

2006-12-04  Alexander Larsson  <alexl@redhat.com>

	* cut-n-paste-code/gsequence/gsequence.[ch]:
	Import gsequence fix for #350579

2006-12-04  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.[ch]:
	* src/file-manager/fm-icon-container.c:
	Freeze icon view updates while renaming to avoid things
	moving around on file changes. (#318373)
	Patch from Nelson Benítez

2006-12-04  Luca Ferretti  <elle.uca@libero.it>

	* icons/athena-server-connect.png
	Removed this legacy icon.

2006-12-04  Luca Ferretti  <elle.uca@libero.it>

	* configure.in:
	* icons/Makefile.am:
	* icons/appicon/*:
	Add new Athena logo from Ulisse Perusin, installed
	as named icon ("athena") in $(prefix)/share/icons/hicolor/.

	* icons/athena-launch-icon.png:
	Removed.

	* src/athena-window-menus.c:
	Use the new named icon logo in about dialog.

2006-12-04  Luca Ferretti  <elle.uca@libero.it>

	* icons/knob.png:
	Remove black outline, using Tango style.
	See bug 374722 for details.

2006-11-30  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-private.h:
	Add more themeing features for icon view icons.
	Patch from JackTheDipper

2006-11-28  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-view.c:
	Add delete menu item if configured. (#132326)
	Patch from Ferran Puig

2006-11-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-private.h:
	Handle scroll wheel while rubberbanding.
	Patch from Nelson Benítez

2006-11-28  Luca Ferretti  <elle.uca@libero.it>

	* icons/athena-desktop.png:
	* icons/athena-file-management-properties.png:
	* icons/athena-mini-logo.png
	* icons/Search.png:
	* icons/side_bar_image.png:
	Remove legacy icons from cvs.

2006-11-24  Alexander Larsson  <alexl@redhat.com>

	* src/athena-spatial-window.c:
	Ellipsice location menu button at 16 chars.
	Patch from Tom Parker

2006-11-23  Federico Mena Quintero  <federico@novell.com>

	Use the write-to-a-pipe trick from the signal handler instead of
	queueing an idle handler from there.

	* src/athena-main.c (setup_debug_log_signals): Set up a pair of
	pipes for the SIGUSR1 handler; set up a GIOChannel on them.
	(sigusr1_handler): Write a byte to our pipe instead of queueing an
	idle handler.
	(debug_log_io_cb): Replaces dump_debug_log_idle_cb().  Read from
	the pipe, and dump the debug log.

	Add a configuration file for the logging mechanism.  You create
	~/athena-debug-log.conf as a GKeyFile.

	* libathena-private/athena-debug-log.c
	(athena_debug_log_load_configuration): New function; loads the
	configuration from a key file like this:

		[debug log]
		enable domains = foo; bar; baz
		max lines = 1000

	* libathena-private/athena-debug-log.c (dump_configuration):
	New utility function.
	(athena_debug_log_dump): At the end of the log, dump the
	configuration used for the debug log so that the user can
	re-create it later.

	* libathena-private/athena-debug-log.h: New prototype for
	athena_debug_log_load_configuration().

	* src/athena-main.c (setup_debug_log): Load the debug log's
	configuration from ~/athena-debug-log.conf
	(setup_debug_log_domains): Removed.

	* src/athena-main.c (log_override_cb): If the log level of the
	message is G_LOG_LEVEL_DEBUG, don't log it as a milestone.  We'll
	use this log level for miscellaneous debugging messages from
	gnome-vfs.  Also, don't send G_LOG_LEVEL_DEBUG messages to the
	default log handler, to avoid a huge ~/.xsession-errors.
	(setup_debug_log_domains): Enable logging for
	ATHENA_DEBUG_LOG_DOMAIN_GLOG.

2006-11-23  Christian Persch  <chpe@cvs.gnome.org>

	* src/athena-search-bar.c: (athena_search_bar_init):
	Fix inconsistent label boleding. (#372550)

2006-11-23  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	A11y fix for handing renames better (#338353)

2006-11-23  Alexander Larsson  <alexl@redhat.com>

	* Commit federicos debug logging patch:

2006-10-23  Federico Mena Quintero  <federico@novell.com>

	* libathena-private/athena-debug-log.h
	(ATHENA_DEBUG_LOG_DOMAIN_GLOG): New domain for GLog messages.
	We'll spit the messages that come from GLog as milestone events.

	* src/athena-main.c (setup_debug_log): New function; set up
	everything here.
	(setup_debug_log_glog): New function.  Override the default
	handler for GLog so that its messages will also appear as
	milestone events in our own debug log.

2006-10-16  Federico Mena Quintero  <federico@novell.com>

	* src/file-manager/fm-directory-view.c (files_added_callback): Log
	when files are added to the view.
	(files_changed_callback): Log when files get changed in the view.
	(fm_directory_view_notify_selection_changed): Log when the
	selection changes.

	* src/athena-main.c (setup_debug_log_domains): Add
	ATHENA_DEBUG_LOG_DOMAIN_ASYNC to the list of enabled log domains.

	* libathena-private/athena-debug-log.h: New prototype for
	athena_debug_log_with_file_list().

	* libathena-private/athena-debug-log.c
	(athena_debug_log_with_file_list): New function; takes a GList
	of AthenaFile.

2006-10-03  Federico Mena Quintero  <federico@novell.com>

	* libathena-private/athena-debug-log.c (athena_debug_logv):
	Deal with URI lists optionally.
	(athena_debug_log_with_uri_list): New function.

	* libathena-private/athena-icon-dnd.c
	(receive_dropped_color): Log when a color is dropped.
	(receive_dropped_tile_image): Log when a tile image is dropped.

	* libathena-private/athena-icon-container.c
	(motion_notify_event): Log when a drag begins.
	(button_release_event): Log when a drag ends.

	* libathena-private/athena-file-operations.c
	(athena_file_operations_copy_move): Log move/copy/link actions.
	(athena_file_operations_new_folder): Log when a folder is created.
	(athena_file_operations_new_file_from_template): Log when a file
	is created from a template.
	(athena_file_operations_new_file): Log when a file is created.
	(athena_file_operations_delete): Log when files are deleted.
	(do_empty_trash): Log when the trash is emptied.

2006-09-22  Federico Mena Quintero  <federico@novell.com>

	* libathena-private/athena-debug-log.[ch]: New files with a
	simple logging infrastructure based on a ring buffer.

	* libathena-private/Makefile.am
	(libathena_private_la_SOURCES): Added athena-debug-log.[ch].

	* src/athena-main.c (main): Make SIGUSR1 dump the debug log to
	~/athena-debug-log.txt.

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_activate_files): Log the action of activating a
	file.
	(open_location): Likewise.
	(fm_directory_view_launch_application): Likewise, for launching an
	application.
	(action_new_launcher_callback): Likewise, for creating a launcher.
	(activate_callback): Log the various actions that can happen here.

	* src/file-manager/fm-tree-view.c (got_activation_uri_callback):
	Log the various activations/launches that can happen.

	* src/athena-places-sidebar.c (row_activated_callback): Log the
	action of the user activating something in the Places sidebar.

	* src/athena-window-manage-views.c
	(athena_window_open_location_full): Log the action of changing
	the location in a window.
	(athena_window_set_content_view): Log the action of thanging the
	view of a window.
	(end_location_change): Log when the window finishes loading.

	* src/file-manager/fm-list-view.c (row_expanded_callback): Log the
	action of expanding a row to load a subdirectory.
	(row_collapsed_callback): Likewise, for collapsing a row.

	* src/file-manager/fm-error-reporting.c (fm_rename_file): Log the
	action of renaming a file.

	* src/athena-application.c
	(athena_application_present_spatial_window_with_selection): Log
	when new or existing spatial windows get presented.
	(athena_application_create_navigation_window): Log when a
	navigation window gets created.

2006-11-23  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.17.1
	Gnome 2.16 work continues on gnome-2-16 branch

2006-11-22  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-search-engine.c:
	Look for Beagle before looking for Tracker. Since Tracker
	autostarts and Beagle doesn't this means you can have both
	installed and configured and pick which one to use.

2006-11-20  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.16.3 ===

2006-11-20  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

2006-11-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	* src/file-manager/fm-icon-view.c:
	Revert federicos patch from 2006-11-06, as it was causing problems.

2006-11-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c:
	Ref the AthenaDirectory during call_ready_callbacks_at_idle.
	Fixes #372471

2006-11-07  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.16.2 ===

2006-11-07  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory.c:
	Unschedule call_ready callbacks on directory finalize, not
	on file finalize.
	Keep monitors around until we call the call_when_ready callback
	at idle time.
	Call async_state_changed and update_metadata_monitors after
	call_when_ready callbacks have been called at idle.

	(fixes make check)

2006-11-07  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c:
	* src/athena-shell.c:
	* src/athena-main.[ch]:
	Make the session restart work again (from 2006-11-03 change)
	Make the session not restart athena on --quit

2006-11-06  Federico Mena Quintero  <federico@novell.com>

	http://bugzilla.gnome.org/show_bug.cgi?id=330298

	Fix the use of lazy positioning, and the saving of metadata for
	lazily-positioned icons.  Fixes
	https://bugzilla.novell.com/show_bug.cgi?id=155337 and
	https://bugzilla.novell.com/show_bug.cgi?id=174766.

	* src/file-manager/fm-icon-view.c (file_has_lazy_position): Only
	desktop icon files (not "real" files) have lazy positions.  Don't
	consider whether the directory is loading; this is not the right
	place to check that.
	(fm_icon_view_begin_loading): Tell the icon container that we
	just started reloading.
	(fm_icon_view_end_loading): Tell the icon container that we
	finished loading.

	* libathena-private/athena-icon-private.h
	(AthenaIconContainerDetails): New flag "is_reloading".

	* libathena-private/athena-icon-container.h: New prototype for
	athena_icon_container_set_is_reloading().

	* libathena-private/athena-icon-container.c
	(athena_icon_container_set_is_reloading): New function; sets an
	is_reloading flag in the icon container.
	(icon_set_position): Clear icon->has_lazy_position, since the icon
	will be well-positioned once this function exits.
	(finish_adding_new_icons): Do not ignore already-placed lazy
	position icons when filling the placement grid!  Save the value of
	icon->has_lazy_position before calling assign_icon_position().
	Since that function may call icon_set_position() (which will clear
	the flag), we need to keep the original value of the flag.
	(finish_adding_new_icons): Don't clear icon->has_lazy_position
	here; let icon_set_position() do it.
	(finish_adding_new_icons): Emit the icon_position_changed signal
	so that the parent knows that we moved an icon under it.  This has
	the effect of updating/preserving the position metadata for
	has_lazy_position icons.

2006-11-06  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	* athena-computer.desktop.in:
	* athena-computer.desktop.in.in:
	* athena-file-management-properties.desktop.in:
	* athena-file-management-properties.desktop.in.in:
	* athena-folder-handler.desktop.in:
	* athena-folder-handler.desktop.in.in:
	* athena-home.desktop.in:
	* athena-home.desktop.in.in:
	* athena.desktop.in:
	* athena.desktop.in.in:
	Add X-GNOME-Bugzilla-Version marking to desktop files.

2006-11-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	Cancel rubberbanding if we get a grab shadow event.
	This happens when a modal dialog (e.g. an error or auth dialog)
	appears. (Partially fixes #122688)

2006-11-06  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c (play_file):
	Don't close handle and free buffer twice on error. (#321175)

2006-11-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_new_from_relative_uri):
	Don't crash on old desktop dir and search dir uris. (#349840)

2006-11-06  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-file-management-properties.glade:
	Specify label-for and labelled-by atk relations. (#356124)

	Patch from Padraig O'Briain  <padraig.obriain@sun.com>

2006-11-03  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-metafile.c:
	Always use the in-process metafile factory. We don't need it
	oop, since athena is single process these days. This fixes
	some strange races with bonobo-activation that caused #351713

	* src/athena-application.[ch]:
	* src/athena-shell.h:
	Change the way we use bonobo-activation to get the AthenaShell
	so that we don't rely on bonobo-activation-server to spawn athena,
	as this could lead to some strange duplicate processes.
	We now directly try to register the app-wide shell object with
	bonobo-activation manually and activate it with
	Bonobo_ACTIVATION_FLAG_EXISTING_ONLY.

	* src/athena-shell.c:
	Handle all corba calls from the AthenaShell in an idle handler.
	This fixes some crashes where we reentered badly into e.g. quit
	when calling gconf.

	* src/athena-main.c:
	Since we now handle the initial open_window shell calls via an idle
	we need to delay until idle time to know if we can quit or not.

2006-11-02  Alexander Larsson  <alexl@redhat.com>

	* test/file-torture.py (main):
	Sleep shorter, for more torture

2006-11-02  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-directory-async.c:
	Call all call_when_ready callbacks from an idle handler.
	This fixes problems with reentrancy, like bug #348161

2006-11-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-model.c:
	Always emit the row-deleted signal before deleting the row
	from the model. This is according to the GtkTreeModel::row-changed
	docs and feedback from kris.
	Hopefully this will fix bug #356672

2006-10-31  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c (fm_icon_view_remove_file):
	Remove assert that keep randomly failing to fix crash (#352592)
	Replace it with some debug output that hopefully lets us
	track down the cause.

2006-10-30  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-extension/athena-menu.c: (athena_menu_get_items):
	* libathena-private/athena-metafile.c: (find_monitor_node):
	Fix C99-style variable initialization for gcc 2.95. (#348665)

	Patch from Jens Granseuer <jensgr@gmx.net>

2006-10-30  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-property-browser.c: (remove_color),
	(athena_property_browser_remove_element),
	(element_clicked_callback), (make_properties_from_xml_node):
	Remove colors by really removing them from browser.xml,
	not marking them deleted. That made it impossible to add
	another color with the same name later on.
	Also delete colors by their (unique) names and not their color
	values. That made it possible to delete built-in colors.
	Fixes #358893.

	Based on a patch from Emil Soleyman-Zomalan

2006-10-30  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-properties-window.c:
	(attach_value_field_internal), (attach_value_field),
	(attach_ellipsizing_value_field), (append_title_value_pair),
	(append_title_and_ellipsizing_value),
	(append_directory_contents_fields), (add_permissions_combo_box),
	(create_simple_permissions), (create_advanced_permissions):
	Set up proper relationships between labels and widgets in the
	properties dialog. Fixes #363116.

	Patch from Padraig O'Briain  <padraig.obriain@sun.com>

2006-10-19  Federico Mena Quintero  <federico@novell.com>

	* test/file-torture.py: New file with a little torture test.  It
	does a bunch of file operations on a directory.  Athena
	sometimes crashes when viewing that directory, so this should help
	us find bugs.

2006-10-19  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file.c:
	(athena_file_get_volume_name):
	Check for NULL path before calling
	gnome_vfs_volume_monitor_get_volume_for_path().

	* libathena-private/athena-monitor.c:
	(path_is_on_readonly_volume):
	Assert path.

2006-10-19  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(convert_file_list_to_string):
	Don't append final newline for textual URIs.
	Fixes #360441.

2006-10-19  Christian Neumair  <chris@gnome-de.org>

	* src/athena-main.c: (main):
	Shut down eel before GnomeVFS.

2006-10-19  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (fm_directory_view_destroy):
	Only deregister "ignore hidden file preferences" callback if it has
	been initialized before.

2006-10-19  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-customization-data.c:
	(athena_customization_data_new),
	(athena_customization_data_get_next_element),
	(athena_customization_make_pattern_chit):
	Handle NULL pattern chit, don't unref pattern tile in
	make_pattern_chit.

	* libathena-private/athena-file-utilities.c:
	(athena_pixmap_file):
	Bail using g_debug if pixmap couldn't be found.

	* src/athena-emblem-sidebar.c: (athena_emblem_sidebar_populate):
	Only create pixmap if path lookup succeeded.

	* src/athena-property-browser.c: (athena_property_browser_init),
	(make_drag_image), (make_color_drag_image),
	(make_properties_from_directories), (add_reset_property),
	(property_browser_category_button_new):
	Handle NULL pattern chits, don't operate on NULL pixbufs.

2006-10-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Share target list for all instances (#357573)

	* src/athena-location-bar.c: (style_set_handler):
	Don't leak layout (#352693)

	* src/athena-zoom-control.c:
	Fix O(n^2) use of list (#357589)

	All patches from paolo borelli.

2006-10-18  Alexander Larsson  <alexl@redhat.com>

	* src/Makefile.am:
	* src/ephy-spinner.[ch]:
	* src/athena-throbber.[ch]:
	Import ephy spinner and use ad throbber.
	This supports different icon sizes.

	* src/athena-window-toolbars.c:
	Change throbber size when toolbar size changes.

2006-10-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (athena_icon_container_search_scroll_event):
	Renew typeahead timeout when you scroll between typeahead hits with the
	mouse wheel. (#354042)
	Patch from Nelson Benitez

2006-10-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c (change_dummy_row_callback):
	The row might have disappeared if it was removed since the
	timeout was scheduled. Protect against this. (#336051)

2006-10-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-private.h:
	Add is_added flag to AthenaFile to make sure we always
	send an added event to directory monitors.

	* libathena-private/athena-directory-async.c:
	(dequeue_pending_idle_callback):
	Don't add the file to both added and changed list
	If the file exist but hasn't been added yet, add it.

	* libathena-private/athena-directory.c: (is_tentative):
	Don't return non-added files for get_file_list to avoid duplicating
	files if you do a list and then track adds.

	Partially fixes #336051.

2006-10-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c (get_info_callback,
	dequeue_pending_idle_callback):
	Call athena_file_mark_gone instead of directly setting is_gone, as
	this allows us to clean up the symlink hash.

	* libathena-private/athena-file.c (athena_file_mark_gone):
	Allow multiple mark_gone. Just ignore any but the first.

2006-10-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory.c
	(emit_change_signals_for_all_files):
	Ref all files when emitting change signals. This is
	an unverified possible fix for #343488, but it
	can't possibly be bad to do this, so i'm
	commiting it.

2006-10-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c:
	athena_file_get_vfs_file_info: handle NULL info
	Fix typo.

2006-10-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-program-choosing.c (athena_launch_show_file):
	Don't cause critical if slow mimetype not loaded.
	I was able to get that with a circular symlink.
	In that case a fast mimetype should be ok.

2006-10-02  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.16.1 ===

2006-10-02  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Bump to 2.16.1

2006-10-02  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window.c (search_bar_activate_callback):
	In non-indexed mode, start at current dir.

2006-09-27  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-directory.c:
	* libathena-private/athena-directory.h:
	* libathena-private/athena-directory-private.h:
	Add is_in_trash_state to AthenaDirectoryDetails.
	Also add athena_directory_is_in_trash which works
	like athena_directory_is_local.

	* libathena-private/athena-file.c:
	Proxy athena_file_is_in_trash to
	athena_directory_is_in_trash, similar to
	athena_file_is_local.

2006-09-14  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-metafile.c: Handle CORBA errors.
	Fixes #46664.

2006-09-13  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c:
	Don't use the same type name for the shortcut model filter as
	GtkFileChooser to avoid name clashes. Fixes #355242.

	Patch from Stephen Cook <siti@orcon.net.nz>

2006-09-04  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.16.0

	* NEWS:
	Update for release

2006-08-25  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Handle enter activation when using typeahead search (#334928)
	Patch from Nelson Benitez

2006-08-23  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-directory.c:
	(athena_directory_is_local):
	Cache return value from gnome_vfs_uri_is_local

	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-file-utilities.c:
	Avoid using gnome_vfs_uri_is_local.

2006-08-22  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.15.92.1 ===

2006-08-22  Alexander Larsson  <alexl@redhat.com>

	* libbackground/preferences.c:
	Fix double free

	* configure.in:
	Release a 2.15.92.1 with fix

2006-08-21  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.15.92 ===

2006-08-21  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2006-08-21  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Don't crash when quickly changing user or group.
	Patch from Christian Neumair

2006-08-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-recent.c (athena_recent_add_file):
	Fix double free.
	Patch from Rouslan Solomakhin

2006-08-15  Federico Mena Quintero  <federico@novell.com>

	* src/athena-main.c (main): Call setlocale() before we try to
	obtain any translations.  Fixes bug #342147.  Patch by Stanislav
	Brabec <sbrabec@suse.cz>.

2006-08-15  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Fix intltool req.

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.15.91 ===

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Require new eel.

2006-08-08  Vincent Untz  <vuntz@gnome.org>

	Use GTK+ to handle recent documents.

	* configure.in: require GTK+ 2.10
	* cut-n-paste-code/libegg/Makefile.am:
	* cut-n-paste-code/libegg/egg-recent-*: kill
	* libathena-private/athena-recent.[ch]: (athena_recent_get_model):
	renamed to athena_recent_get_manager()
	(athena_recent_add_uri): new, to make it easier to use
	gtk_recent_manager_add_full()
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_launch_application): use athena_recent_add_uri()
	instead of old egg code
	(activate_callback): ditto

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c (read_dot_hidden_file):
	Follow symlinks when reading .hidden files.

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-background.c:
	Do background change comparison in eel instead (#349961)
	Patch from Matthias Clasen

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	Fix down when in the rightmost column in the next to last row (#316117)
	Based on patch from Nelson Benitez

2006-08-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	Handle desktop drops from panel. (#347673)
	Patch from Christian Neumair

2006-08-04  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-directory-async.c:
	(dequeue_pending_idle_callback): Revert patch from #336051
	as it breaks the file update machinery. Fixes #348097.

2006-07-25  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-dnd.c:
	Rename athena_drag_default_drop_action_for_url to
	athena_drag_default_drop_action_for_netscape_url.
	Don't offer netscape URL drags.

	* libathena-private/athena-dnd.h: Rename
	ATHENA_ICON_DND_URL(_TYPE) to ATHENA_ICON_DND_NETSCAPE_URL(_TYPE)
	and athena_drag_default_drop_action_for_url to
	athena_drag_default_drop_action_for_netscape_url.

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_new_file_from_template):
	Filter out special URIs, handle gnome_vfs_uri_new() failure.

	* libathena-private/athena-file-utilities.c:
	(test_uri_exists), (athena_ensure_unique_file_name):
	Handle gnome_vfs_uri_new() failure by returning NULL.

	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-container.h:
	Rename HANDLE_URL signal to HANDLE_NETSCAPE_URL.

	* libathena-private/athena-icon-dnd.c:
	* libathena-private/athena-icon-dnd.h:
	* libathena-private/athena-tree-view-drag-dest.c:
	* libathena-private/athena-tree-view-drag-dest.h:
	Don't offer netscape URL drags, prefer netscape URL drops over
	"text/uri-list" drops. Also rename DND_URL symbols to DND_NETSCAPE_URL.

	* libathena-private/athena-link-desktop-file.c:
	(athena_link_desktop_file_local_create):
	Handle trash, desktop and search URIs, handle
	NULL retval of athena_ensure_unique_file_name.

	* src/athena-location-bar.c:
	* src/athena-spatial-window.c:
	* src/file-manager/fm-list-model.c:
	Don't offer/handle netscape URL drags.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view:
	Rename DND_URL symbols to DND_NETSCAPE_URL.

	Should fix #347673.

2006-07-25  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_get_selinux_context):
	Translate the selinux context from raw form when displayin.

2006-07-25  Alexander Larsson  <alexl@redhat.com>

	* cut-n-paste-code/gsequence/gsequence.[ch]:
	Import the latest EggSequence which supposedly fixes a
	bunch of bugs.

	* src/file-manager/fm-list-model.c:
	Fix to use new function names of EggSequence

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post-release version bump

=== athena 2.15.90 ===

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

	* configure.in:
	Require eel 2.15.90

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-main.c: (main):
	Unref GnomeProgram at the end. (#348429)

	Patch from Christian Persch <chpe@gnome.org>

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-file-management-properties.c:
	(athena_file_management_properties_dialog_setup):
	* src/athena-file-management-properties.glade:
	Remove the "always use text-entry location bar" checkbox from the
	preferences page.

	* src/athena-navigation-window.[ch]: (location_button_create),
	(athena_navigation_window_instance_init),
	(athena_navigation_window_destroy):
	Add a tooltip to the new location bar toggle button.

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-properties-window.c:
	(permission_combo_update): Add a translator comment for
	permission combo box labels. (#347764)

	Patch from Hendrik Richter  <hendi@gnome-de.org>

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window-private.h (AthenaNavigationWindowDetails):
	Add a location_button field.

	* src/athena-navigation-window.c
	(athena_navigation_window_instance_init): Create the
	location_button.
	(location_button_toggled_cb): New callback.  Changes the
	preference for toggling between the path bar and the location bar.
	(always_use_location_entry_changed): Toggle the button as
	appropriate.

	Add a button to the location bar to toggle betwen the path bar
	and a location entry. (#347991)

	Patch from Federico Mena Quintero  <federico@novell.com>

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-icon-factory.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-tree-view.c: (create_popup_menu):
	* src/athena-window-menus.c:
	Use trash icons from the icon naming specification for trash
	related operations. (#340321)

	Patch from Rodney Dawes  <dobey@novell.com>

2006-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (add_place), (update_places):
	Take the sidebar as parameter and refilter it after adding.

	(reorder_bookmarks): Implement reordering of bookmarks.

	(drag_data_delete_callback), (drag_data_received_callback),
	(drag_motion_callback): Handle dragging of tree rows.

	(athena_places_sidebar_init)
	(_shortcuts_model_filter_class_init),
	(_shortcuts_model_filter_init),
	(shortcuts_model_filter_row_draggable),
	(shortcuts_model_filter_drag_data_get),
	(shortcuts_model_filter_drag_source_iface_init),
	(shortcuts_model_filter_new):
	Implement GtkTreeDragSource.

	(get_selected_iter), (bookmarks_check_popup_sensitivity),
	(loading_uri_callback): Use the filter model.

	Enable reordering of bookmarks in the places sidebar via
	Drag'n'Drop. (#319022)

	Patch from Xavier Claessens <xclaesse@gmail.com>

2006-07-24  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-search-engine-beagle.c:
	(athena_search_engine_beagle_new): Check whether daemon is
	running as beagle_client_new doesn't fail when a stale socket
	file exists.

	Patch from Jürg Billeter <j@bitron.ch>

2006-07-24  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	* libathena-extension/Makefile.am:
	Add extension versioning infrastructure and add athena-menu.[ch].

	* libathena-extension/athena-menu-item.[ch]:
	Add and handle a 'menu' property and add a function
	athena_menu_item_set_submenu.

	* libathena-extension/athena-menu.[ch]:
	New files implementing a submenu item.

	* src/file-manager/fm-directory-view.c: (add_extension_menu_items),
	(reset_extension_actions_menu):
	Add extension menu items recursively.

	* libathena-extension/athena-menu-provider.h:
	Update include.

	Extend extension API to support submenus. (#314579)

	Patch from Raffaele Sandrini  <rasa@gmx.ch>

2006-07-11  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post-release version bump

=== athena 2.15.4 ===

2006-07-11  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

	* configure.in:
	Bump version to 2.15.4
	Require eel 2.15.4

2006-07-11  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-directory-async.c:
	(dequeue_pending_idle_callback): Never add a file to both
	the added_files and changed_files lists. Don't ref an existing
	file without adding it to the changed_file list. (#336051)

	Patch from Christian Neumair  <chris@gnome-de.org>

2006-07-11  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-dnd.[ch]:
	Add functions athena_drag_can_accept_files and
	athena_drag_can_accept_info.

	* libathena-private/athena-icon-dnd.c: (receive_dropped_url),
	(receive_dropped_uri_list), (receive_dropped_text),
	(drag_data_received_callback):
	Accept the entire drag context as parameter and use
	athena_icon_container_find_drop_target.

	(athena_icon_container_find_drop_target):
	(athena_icon_dnd_update_drop_target):
	Use athena_drag_can_accept_info.

	* libathena-private/athena-marshal.list:
	Add new signature.

	* libathena-private/athena-tree-view-drag-dest.c:
	Add function get_drop_target_uri_at_pos and use it in the drop
	handlers to determine the target uris for actions.
	Rename get_drop_target to get_drop_target_uri_for path.

	(athena_tree_view_drag_dest_class_init):
	Adapt to new drag handler signatures.

	(set_widget_highlight):
	Fix DND highlighting of an empty tree view.

	(drag_motion_callback):
	Ignore drags on the header.

	* libathena-private/athena-tree-view-drag-dest.[ch]:
	* libathena-private/athena-icon-container.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Add a target/parent uri parameter to the drop handler functions.

	* src/file-manager/fm-directory-view.[ch]:
	Add handling for the additional target parameter to support
	drops of URIs, URLs and text to subfolders.

	Patch from Christian Neumair  <chris@gnome-de.org>

2006-07-08  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file-utilities.c:
	* libathena-private/athena-file-utilities.h:
	Add athena_find_existing_uri_in_hierarchy.
	Remove undefined in_gnome_path helper declarations.

	* src/athena-pathbar.c:
	* src/athena-pathbar.h:
	Make athena_path_bar_clear_buttons public.

	* src/athena-window-manage-views.c: (viewed_file_changed_callback):
	If the displayed location was removed, and it has an existing parent,
	navigate window to this parent. Fixes #336724.

2006-07-06  William Jon McCann  <mccann@jhu.edu>

	* libathena-private/athena-icon-factory.c:
	(get_special_icon_for_file):
	* src/athena-window-menus.c:
	Use athena-cd-burner icon instead of gnome-dev-cdrom
	for burn:///.

2006-06-21  Christian Neumair  <chris@gnome-de.org>

	Add complete session management, remember maximization state and type
	of open windows, save history on quit.

	* libathena-private/athena-global-preferences.c
	* libathena-private/athena-global-preferences.h:
	Add ATHENA_PREFERENCES_NAVIGATION_WINDOW_MAXIMIZED setting.

	* libathena-private/athena-metadata.h:
	Add ATHENA_METADATA_KEY_WINDOW_MAXIMIZED key.

	* src/athena-application.c:
	* src/athena-application.h:
	Save session on session save request, add
	athena_application_load_session(), move
	initial navigational geometry handling to
	athena_application_create_navigation_window,
	maximize window if
	ATHENA_PREFERENCES_NAVIGATION_WINDOW_MAXIMIZED
	is set.

	* src/athena-main.c:
	Add "--load-session" parameter.

	* src/athena-shell-interface.idl:
	* src/athena-shell.c:
	Add load_session CORBA method.

	* src/athena-navigation-window.c:
	* src/athena-spatial-window.c:
	Save maximized state when appropriate.

	* src/athena-window-manage-views.c:
	Load maximized state for spatial windows,
	remove navigation window geometry handling.

	* src/athena-window.c:
	* src/athena-window-private.h:
	Add athena_add_to_history_list_no_notify.

2006-06-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-extension/athena-menu-provider.[ch]:
	Add items_updated signal

	* libathena-private/Makefile.am:
	* libathena-private/athena-signaller.[ch]:
	* src/athena-signaller.[ch]:
	* src/Makefile.am:
	Move AthenaSignaller to libathena-private.
	Add popup_menu_changed signal.

	* src/athena-application.c:
	Signal popup_menu_changed when a menu provider emits items_updated.

	* src/file-manager/fm-directory-view.c:
	* src/athena-window.c:
	Handle popup_menu_changed.

	* src/athena-emblem-sidebar.c:
	* src/athena-history-sidebar.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-navigation-window.c:
	* src/athena-property-browser.c:
	* src/athena-spatial-window.c:
	* src/athena-window-menus.c:
	Update includes.

	Patch from RUAUDEL Frédéric <ruaudel@embl.fr>

2006-06-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-column-utilities.c:
	Add selinux context column

	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.[ch]:
	Get selinux context for all files.
	Add athena_file_can_get_selinux_context and athena_file_get_selinux_context
	Add selinux_context string attribute.

	* src/file-manager/fm-properties-window.c:
	Display selinux context in permissions page.

2006-06-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-global-preferences.[ch]:
	* libathena-private/apps_athena_preferences.schemas.in:
	Add show_advanced_permissions setting
	Remove show_special_flags setting, its always on in advanced mode.

	* libathena-private/athena-file-operations.[ch]:
	Add athena_file_set_permissions_recursive

	* src/file-manager/fm-properties-window.c:
	Change permission page. Implement both simple and advanced mode.
	Add recursive permissions setting.
	HIGify some spacing.

2006-06-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post-release version bump

=== athena 2.15.2 ===

2006-06-12  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2006-05-30  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-factory.c:
	* libathena-private/athena-thumbnails.c:
	* libathena-private/athena-thumbnails.h:
	Use GdkPixbufLoader for thumbnailing.

2006-05-29  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-factory.c: (load_pixbuf_svg):
	Limit max. returned SVG icon size to requested icon size.

2006-05-24  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file-utilities.c:
	(athena_file_operations_copy_move):
	Use gnome_vfs_volume_monitor_get_volume_for_path instead of
	athena_file_get_enclosing_volume.

	* libathena-private/athena-file-utilities.c:
	* libathena-private/athena-file-utilities.h:
	Remove athena_get_enclosing_volume.

2006-05-24  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-information-panel.c:
	* src/athena-window-bookmarks.c:
	* src/file-manager/fm-properties-window.c:

	Use g_signal_connect_data instead of the outdated eel equivalent.

2006-05-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Remove unused include of eel-cell-renderer-pixbuf-list.h

2006-05-24  Paolo Borelli  <pborelli@katamail.com>

	* libathena-private/athena-file.c (athena_file_get_uri_scheme):
	use gnome_vfs_get_uri_scheme instead of eel_uri_get_scheme.

2006-05-17  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* athena-folder-handler.desktop.in: Add internationalization
	* po/POTFILES.in: Add the file.

2006-05-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-container.c (fm_icon_container_get_icon_images):
	Only pass TRUE for embedding_text if we actually read a top-left text.
	Based on patch from Rene Hausleitner (#335435)

2006-05-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	* src/athena-places-sidebar.c:
	Don't allow floppy formating if the floppy is mounted,
	since gfloppy can't handle that. (#125819)
	Patch from Xavier Claessens

2006-05-16  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post-release version bump.

=== athena 2.15.1 ===

2006-05-16  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

2006-05-16  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-icon-container.c: (icon_get_size),
	(icon_set_size), (icon_toggle_selected),
	(athena_icon_container_move_icon), (keyboard_stretching),
	(end_stretching), (athena_icon_container_update_icon),
	(assign_icon_position), (athena_icon_container_add),
	(athena_icon_container_is_stretched),
	(athena_icon_container_unstretch),
	(athena_icon_container_freeze_icon_positions):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-dnd.c: (handle_local_move):
	* libathena-private/athena-icon-private.h:
	* src/file-manager/fm-icon-view.c:
	(get_stored_icon_position_callback),
	(icon_position_changed_callback):
	Cleanup to merge the x any y icon scale factors into one variable.

	Patch from Christian Neumair <chris@gnome-de.org>

2006-05-15  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (update_places_cb),
	(volume_unmounted_callback), (drive_disconnected_callback),
	(drive_connected_callback),
	(athena_places_sidebar_set_parent_window):
	Update the places on drive-connected and drive-disconnected
	signals too. Delay the update for the volume-unmounted signal
	with an idle callback to work around gnome-vfs removing the
	volume only after we received the signal.

	Patch from Xavier Claessens <xclaesse@gmail.com>

2006-05-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window-manage-views.c:
	(got_file_info_for_view_selection_callback):
	Re-set viewed_file after a location change failed. Prevents
	crashing over an assertion in viewed_file_changed_callback
	on slow filesystems. Fixes #339965.

2006-05-08  Federico Mena Quintero  <federico@novell.com>

	* libathena-private/athena-file-operations.c
	(handle_transfer_ok): Don't special-case the first 0 bytes of the
	file in the case of reporting actual copy/move progress.  It is
	fine to update both the labels and the sizes every time.  Fixes
	http://bugzilla.gnome.org/show_bug.cgi?id=341064
	https://bugzilla.novell.com/show_bug.cgi?id=66073

2006-05-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (add_place), (update_places),
	(check_visibility), (bookmarks_check_popup_sensitivity),
	(get_selected_iter), (rename_selected_bookmark),
	(remove_selected_bookmarks), (mount_shortcut_cb),
	(unmount_shortcut_cb), (eject_shortcut_cb),
	(athena_places_sidebar_init):
	Add volume data to the list store and use it to show
	an unmount command for network volumes. (#316184)

	Patch from Xavier Claessens <xclaesse@gmail.com>

2006-05-07  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-dnd.c:
	(athena_drag_drop_action_ask),
	(athena_drag_drop_background_ask):
	* src/file-manager/fm-tree-view.c: (create_popup_menu):
	* src/athena-places-sidebar.c:
	(bookmarks_build_popup_menu):
	Use eel_gtk_menu_append_separator.

	* src/athena-places-sidebar.c:
	(bookmarks_check_popup_sensitivity):
	Use eel_gtk_widget_set_shown.

2006-05-07  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-query-editor.c: (type_combo_changed):
	Fix typo in function name: s/availible/available/ (#326053)

	* configure.in:
	Require eel 2.15.1

2006-05-04  Christian Neumair  <chris@gnome-de.org>

	* src/athena-navigation-action.c:
	(athena_navigation_action_class_init), (disconnect_proxy):
	Disconnect signal handlers registered when connecting proxies.

2006-05-03  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (volume_op_callback):
	(row_activated_callback), (bookmarks_popup_menu_detach_cb),
	(eject_for_type), (set_visibility),
	(bookmarks_check_popup_sensitivity), (get_selected_drive),
	(mount_shortcut_cb), (unmount_shortcut_cb), (eject_shortcut_cb),
	(format_shortcut_cb), (bookmarks_build_popup_menu):
	Add mount, unmount, eject and format menu items to the popup menu
	of drives in the places sidebar. (#316184)

	Based on a patch from Xavier Claessens <xclaesse@gmail.com>

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window-menus.c: (action_about_athena_callback):
	Adapt to new GtkAboutDialog behaviour and use wrap-license.
	Makes the close button work again. Fixes #336520.

	Patch from Christian Persch <chpe@gnome.org>

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-query-editor.c: (location_row_create_widgets):
	Fix typo in the query filechooser window title. (#325284)

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-query-editor.c: (athena_query_editor_add_row),
	(finish_first_line):
	Fix wording: Use "criterion" instead of "criterium". (#331682)

	Patch from Farzaneh Sarafraz <farzaneh@farsiweb.info>

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-program-choosing.c:
	(application_cannot_open_location):
	Remove bogus period from strings. (#336909)

	Patch from Javier F. Serrador <serrador@tecknolabs.com>

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-operations.c:
	(handle_transfer_overwrite):  Use the same phrasing and
	format as the GTK+ overwrite dialog.  Also, per the HIG
	convert the dialog to a confirmation alert since the user's
	command may destroy data. (#325188)

	Patch from Dennis Cranston <dennis_cranston@yahoo.com>

2006-05-01  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-image-properties-page.c: (append_tag_value_pair),
	(append_exifdata_string):
	Prefer "Date Taken" and "Date Digitized" over "Date Modified" when
	deciding which date to show from image metadata. (#331810)

	Patch from Pat Suwalski <pat@suwalski.net>

2006-04-28  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	* po/LINGUAS:
	Update handling of po/LINGUAS for new instructions.  Refer
	to http://live.gnome.org/GnomeGoals/PoLinguas

	Patch from Brian Pepple  <bdpepple@gmail.com>

2006-04-27  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(file_get_volume_and_drive),
	(action_self_mount_volume_callback),
	(action_self_unmount_volume_callback),
	(action_self_eject_volume_callback),
	(action_self_format_volume_callback),
	(file_get_volume_and_drive),
	(file_should_show_self),
	(real_update_menus_volumes):
	* src/file-manager/fm-tree-view.c:
	(create_popup_menu):
	* src/file-manager/athena-directory-view-ui.xml:
	Allow to mount/unmout/eject/format a volume when displaying its
	activation URI.

2006-04-26  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file.c:
	(athena_file_denies_access_permission),
	(athena_file_can_get_permissions),
	(athena_file_can_set_permissions):
	If no ACCESS file info field is available, pretend to have full
	access. If no PERMISSIONS field is available, pretend to have full
	permission control.

2006-04-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	Fix width of text selection in text-below-icons mode.
	(it was to wide.)

2006-04-26  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Remove popt

	* src/athena-connect-server-dialog-main.c:
	* src/athena-main.c:
	Convert from popt to goption.
	Based on patch from Philip Van Hoof

2006-04-25  Alexander Larsson  <alexl@redhat.com>

	* src/athena-main.c:
	Remove icon registration, as its no longer needed with gtk 2.9.

	* src/athena-window-menus.c:
	(athena_menus_append_bookmark_to_menu):
	Remove bogus TODO.

2006-04-25  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.15.1
	2.14 development continues on gnome-2-14 branch.

==== gnome-2-14 branched from here ===

2006-04-25  Christian Neumair  <chris@gnome-de.org>

	* configure.in:
	Require gnome-vfs 2.14.2, gnome_vfs_volume_compare fixes.

	* src/file-manager/fm-tree-view.c: (create_tree):
	Use gnome_vfs_volume_compare to sort volumes from the volume monitor.

2006-04-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-attributes.h:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c:
	* libathena-private/athena-file.h:
	Add  LARGE_TOP_LEFT_TEXT attribute and change the text size for
	the normal top-left text to 10x5.
	Add need_large argument to athena_file_peek_top_left_text and
	athena_extract_top_left_text.

	* libathena-private/athena-icon-canvas-item.[ch]
	Make details an instance-private instead of allocating separately.
	Add _set_is_visible() and only keep PangoLayouts cached for
	visible icons.

	* libathena-private/athena-icon-container.[ch]:
	* src/file-manager/fm-icon-container.c:
	Monitor large embedded text for larger icons.
	Call athena_icon_canvas_item_set_is_visible as needed.

	* libathena-private/athena-icon-factory.[ch]:
	Limit never-free recently used cache to 20 items.
	Free other unused cache items after a 100 sec.

2006-04-15  Martin Wehner  <martin.wehner@gmail.com>

	* po/LINGUAS:
	Remove newlines to fix build with CVS intltool. (#338423)

2006-04-15  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (remove_selected_bookmarks):
	Don't delete the first bookmark if pressing del key on an
	undeletable item. Fixes #338377.

2006-04-14  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-spatial-window.c: (action_add_bookmark_callback):
	Don't add location bookmark for desktop windows. Fixes #334860.

	Patch from Christian Neumair <chris@gnome-de.org>

2006-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post-release version bump.

=== athena 2.14.1 ===

2006-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

	* configure.in:
	Require eel 2.14.1

2006-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-side-pane.c: (athena_side_pane_init):
	Use smaller close icon for the sidebar.

	Patch from Yang Hong <yanghong@ccoss.com.cn>

2006-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-icon-dnd.c:
	(get_data_on_first_target_we_support):
	Determine drop target by iterating through drop container
	target list instead of drag context DND list. (#337588)

	Patch from Christian Neumair <chris@gnome-de.org>

2006-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* po/LINGUAS: New file listing all supported languages.

	* configure.in: Use po/LINGUAS instead of including all languages
	directly in this file. See the wiki for more information:
	http://live.gnome.org/GnomeGoals/PoLinguas

	Patch from Brian Pepple  <bdpepple@gmail.com>

2006-04-08  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_update),
	(athena_file_operations_progress_set_operation_string):
	Update progress dialog when setting its operation string,
	also set operation string during preflight.

2006-04-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(set_script_environment_variables),
	(unset_script_environment_variables):
	* src/athena-main.c: (main):
	* src/athena-shell.c: (corba_restart):
	Use g_(un)setenv instead of their eel_ counterparts.

2006-04-07  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (add_place), (update_places),
	(mount_volume_callback), (row_activated_callback),
	(bookmarks_popup_menu_detach_cb), (athena_places_sidebar_init):
	Adapt the same policy for showing drives and volumes in the places
	sidebar as in computer:/// and the gtk filechooser: Show unmounted
	but user-visible drives and mount them on activation. (#321320)

	Patch from Xavier Claessens <xclaesse@gmail.com>

2006-04-07  Martin Wehner  <martin.wehner@gmail.com>

	* data/patterns/.striated.png:
	* data/patterns/Makefile.am:
	Remove unused pattern file. (#337353)

2006-03-30  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_get_loading):
	* src/file-manager/fm-directory-view.h:
	Add fm_directory_view_get_loading().

	* src/file-manager/fm-icon-view.c: (file_has_lazy_position),
	(fm_icon_view_add_file), (fm_icon_view_screen_changed):
	Use fm_directory_view_get_loading() to determine whether view is
	loaded. If it is not yet loaded, don't position icons lazily.

2006-03-24  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-connect-server-dialog-main.c: (main):
	Get the command line options and pass them on to the dialog.

	* src/athena-connect-server-dialog.c: (connect_to_server),
	(athena_connect_server_dialog_init), (setup_for_type):
	Use new MethodInfo struct to construct the UI.
	(display_server_uri): New function for initialising the UI based
	on the broken down parts of the URI.
	(athena_connect_server_dialog_new): Use display_server_uri.
	(get_method_description): New helper function.
	(port_insert_text): Accept more than one digit at a time.

	Display broken down URIs in 'Connect to Server' properly. (#332848)

	Patch from Nate Nielsen <nielsen@memberwebs.com>

2006-03-22  Daniel Drake  <dsd@gentoo.org>

	* libathena-private/athena-icon-factory.c: Only consider
	the filename suffix when deciding if a file is an SVG image.
	Bug #330019.

2006-03-22  Paolo Borelli  <pborelli@katamail.com>

	* src/athena-application.c: use g_strv_length instead of a
	private copy and gnome_vfs_make_uri_from_shell_arg instead of
	the old eel_make_uri_from_shell_arg. Bug #334077.

2006-03-22  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(pattern_select_response_cb), (select_pattern):
	Add help button to the Select Pattern dialog. (#331443)

	* src/athena-connect-server-dialog.c: (response_callback),
	(athena_connect_server_dialog_init):
	Add help button to the Connect to Server dialog. (#334330)

	* src/athena-location-dialog.c: (response_callback),
	(athena_location_dialog_init):
	Add help button to the Open Location dialog (#334293)

2006-03-14  Federico Mena Quintero  <federico@novell.com>

	* src/athena-window-menus.c: (athena_window_initialize_menus):
	Don't set the visibility of the "burn CD" action here.
	(athena_window_initialize_menus_constructed): New public
	function.  Only disable ATHENA_ACTION_GO_TO_BURN_CD if we are in
	a window which has a menubar.  This prevents calling
	have_burn_uri() unnecessarily for the desktop window, as this is
	an expensive operation during login (up to 1 second!).  The way
	have_burn_uri() works is by creating a "burn:///" URI and seeing
	if it is valid, but this makes gnome-vfs load libmapping.so from
	athena-cd-burner; this takes a long time during login.

	* src/athena-window-private.h: Added prototype for
	athena_window_initialize_menus_constructed().

	* src/athena-window.h: New prototype for
	athena_window_has_menubar_and_statusbar().

	* src/athena-window.c
	(athena_window_has_menubar_and_statusbar): New function; returns
	whether the window should have a menubar and statusbar.  This
	depends on the window_type from the class structure.
	(athena_window_constructor): Call
	athena_window_initialize_menus_constructed().  We do it here so
	that its own call to athena_window_has_menubar_and_statusbar()
	will already have the right value for class->window_type.

2006-03-19  Christian Neumair  <chris@gnome-de.org>

	* src/athena-main.c: (register_icons):
	Speed up stock icon registration, as discussed on the mailing list:

	http://mail.gnome.org/archives/athena-list/2006-March/msg00036.html

	Also fixes #335158.

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_copy_move):
	Check whether enclosing volume for any of the source files is
	read-only, and set GNOME_VFS_XFER_TARGET_DEFAULT_PERMS in this case.
	Fixes #167102.

	* libathena-private/athena-file-utilities.c:
	* libathena-private/athena-file-utilities.h:
	Add athena_get_enclosing_volume.

2006-03-19  Martin Wehner  <martin.wehner@gmail.com>

	* athena-computer.desktop.in:
	* athena-folder-handler.desktop.in:
	* athena-home.desktop.in:
	* src/network-scheme.desktop.in:
	Add --no-desktop to the Exec command line options. (#326338)

	Patch from Saleem Abdulrasool

	* athena-computer.desktop.in:
	* athena-folder-handler.desktop.in:
	* athena-home.desktop.in:
	* athena.desktop.in:
	Remove obsolete X-Gnome-Bugzilla-OtherBinaries entry,
	none of the listed binaries does exist anymore.

2006-03-18  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/*.c:
	* src/file-manager/*.c:
	* src/*.c:
	Use gi18n.h instead of deprecated gnome-i18n.h header.

	* libathena-private/athena-query.c:
	(athena_query_to_readable_string):
	Mark string for translation.

	* po/POTFILES.in:
	Add athena-query.c

	Patch from Wouter Bolsterlee <uws+gnome@xs4all.nl>

2006-03-17  Vladimer Sichinava  <alinux@siena.linux.it>

	* configure.in: Added "ka" Georgian to
	ALL_LINGUAS.

2006-03-13  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post-release version bump.

=== athena 2.14.0 ===

2006-03-13  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Update version to 2.14.0

2006-03-07  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (drive_mounted_callback),
	(activation_drive_mounted_callback):
	Don't show error dialog if mount error is "".

2006-03-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	Fix text drawing in RTL mode in text beside icons.

2006-03-05  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-mime-actions.c:
	(athena_mime_actions_get_full_file_attributes):
	Don't request the mime list for activation, context menu and
	the view as menu anymore. It was once used for determining a
	specialized component for directories, but we don't support that
	anymore. Nowadays it just delays these operations and can cause
	auth dialogs when opening the popup menu.

2006-03-05  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file.c:
	(athena_file_recompute_deep_counts):
	Add file to work queue of enclosing directory when recomputing
	deep count for the properties dialog. Fixes #169342.

	Patch from Christian Neumair

2006-03-03  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-manage-views.c:
	* src/athena-window-private.h:
	Close window when it gets put in the trash.

	Patch from Christian Neumair

2006-03-03  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.[ch]:
	measure text in athena_icon_canvas_item_get_text_rectangle to avoid
	icons jumping around

	* libathena-private/athena-icon-container.c:
	remove old workaround

	Patch from Christian Neumair

2006-03-02  Stanislav Brabec  <sbrabec@suse.cz>

	* configure.in: Add "km" to ALL_LINGUAS.

2006-03-01  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-directory-async.c:
	(new_files_cancel), (athena_directory_cancel):
	Cancel get_file_info calls for new files too. Fixes a crash
	when leaving a directory with pending calls (#152977).

2006-02-28  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (activate_callback):
	Close the window after the file activation, not before.
	Fixes a crash when middle-clicking a file (#330491).

2006-02-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_should_show_directory_item_count):
	Don't show directory count for smb shares, as that can cause
	lots of network traffic and auth dialogs.

2007-02-28  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-container.c:
	(get_cmp_point_x), (get_cmp_point_y),
	(compare_icons_horizontal_first), (compare_icons_vertical_first),
	(closest_in_90_degrees), (record_arrow_key_start):
	Use better icon points for comparing the position of two items in
	"Text Beside Icon" mode. Fixes keynav issues with items that have
	different icon sizes.

2006-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-tree-view-drag-dest.c:
	(get_drop_path):
	Test for the right path in the break condition. Fixes an infinite
	loop when dragging an item over a non-folder child of an expanded
	node in the list view, deadlocking the desktop.

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.13.92 ===

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c (fm_icon_view_add_file):
	Use lazy positioning for volumes only, not all desktop file icons,
	as this can cause icons to move around, and its mainly required
	for removable volumes anyway.

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window.c:
	* src/athena-spatial-window.c:
	* src/athena-window.[ch]:
	Don't shortcut the title change when the bookmark name changes.
	Fixes #331383
	Patch from Christian Neumair.

2006-02-26  Zbigniew Chyla  <mail@zbigniew.chyla.pl>

	Get users' and groups' names via a cache to avoid calling
	getpwuid/getgrgid too often (i.e. many times during single redraw).

	* libathena-private/Makefile.am: (libathena_private_la_SOURCES):
	Added athena-users-groups-cache.[ch]
	* libathena-private/athena-users-groups-cache.[ch]: New,
	implementation of cache for getpwuid/getgrgid results.
	* libathena-private/athena-file.c:
	(get_user_name_from_id): removed
	(get_real_name): accept "name + gecos" pair instead of "struct passwd".
	(get_user_and_real_name_from_id): get user name and gecos using
	athena_users_cache_* functions instead of using getpwuid directly.
	(athena_get_user_names): adjusted to changed signature of get_real_name.
	(athena_file_get_group_name): get group name using
	athena_groups_cache_get_name instead of using getgrgid directly.
	(athena_file_get_owner_as_string): get user name using
	athena_users_cache_get_name.

2006-02-26  Zbigniew Chyla  <mail@zbigniew.chyla.pl>

	Don't add all possible columns to GtkTreeView when initializing
	FMListView, only the ones we actually show. This way we avoid getting
	unnecessary data from the model, e.g. quite heavy "owner" and "group"
	columns with the default settings.

	* src/file-manager/fm-list-view.c:
	(apply_visible_columns_foreach, apply_visible_columns,
	apply_column_order): removed
	(apply_columns_settings): new function, updates a list of columns in
	GtkTreeView given both a list of visible columns and their ordering,
	replacement for apply_visible_columns and apply_column_order.
	(create_and_set_up_tree_view): when creating details->columns hash
	table, pass g_object_unref as value_destroy_func; before adding
	columns to the hash call g_object_ref+gtk_object_sink on them, don't
	add columns to the view, the appropriate columns will be added when
	applying the configuration; in order to apply initial columns
	settings, call apply_columns_settings (instead of
	apply_visible_columns + apply_column_order).
	(set_visible_columns_from_metadata_and_preferences,
	set_column_order_from_metadata_and_preferences): removed
	(set_columns_settings_from_metadata_and_preferences): new, replacement
	for set_visible_columns_* and set_column_order_*.
	(fm_list_view_begin_loading, column_chooser_changed_callback,
	column_chooser_use_default_callback, fm_list_view_reset_to_defaults,
	default_visible_columns_changed_callback,
	default_column_order_changed_callback): use newly added
	set_columns_settings_from_metadata_and_preferences.

2006-02-26  Zbigniew Chyla  <mail@zbigniew.chyla.pl>

	Avoid heavy operations inside "motion_notify_event" handler: don't
	call gtk_tree_model_row_changed (which causes updating the whole
	view), don't create new mouse cursor, change cursor only when
	necessary.
	As a bonus we avoid leaking hand cursor in athena and X server.

	* src/file-manager/fm-list-view.c:
	(hand_cursor): new global variable for storing hand cursor used in
	single click mode
	(motion_notify_callback): don't call gtk_tree_model_row_changed on
	the model when changing rows, it's very slow and unnecessary - GTK+
	automatically invalidates parts of the view occupied by old and new
	row; don't leak the hand cursor (GdkCursor), change mouse cursor
	only when necessary (from GDK_HAND2 to default and the other way
	round)
	(leave_notify_callback): don't call gtk_tree_model_row_changed on
	the current row in the model, GTK+ automatically redraws the current
	row
	(enter_notify_callback): in case single click mode is used, update
	details->hover_path and set hand cursor if necessary
	(create_and_set_up_tree_view): connect to enter_notify_event signal
	in addition to leave_notify_event.
	(fm_list_view_click_policy_changed): unref global hand_cursor and
	set it to NULL when changing to double click mode, create new cursor
	and assign it to hand_cursor when changing to single click one.
	(fm_list_view_finalize): free details->hover_path if necessary
	(fm_list_view_init): explicitly set details->hover_path to NULL

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-manage-views.c:
	Don't close window if old file changed when we're loading
	a new one (#137027).
	Based on patch from Christian Neumair.

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	Correctly handle *_margins as pixel values, not world-coords.
	Based on patch from Christian Neumair.

2006-02-27  Federico Mena Quintero  <federico@novell.com>

	* libathena-private/athena-icon-container.c
	(finish_adding_new_icons): Do not place icons both in the
	no_position_icons and semi_position_icons lists!
	(snap_position): The final *x could be negative if (start_x + icon_width / 2)
	is less than SNAP_SIZE_X, as SNAP_NEAREST_HORIZONTAL() would
	return DESKTOP_PAD_HORIZONTAL.  Then, we would subtract icon_width / 2,
	getting a negative number.  So, we initially test for this and
	start that the first snap column.  The same reasoning applies to
	*y and the baseline.

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window.c:
	Allow saving a sidebar width of 0 (#331475)
	Patch from Christian Neumair

2006-02-27  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c (create_label_layout):
	Allow line-breaks after '-', '_', '.'
	(although not when a short number follows '.')
	Patch from Christian Neumair

2006-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (can_accept_file_as_bookmark),
	(can_accept_items_as_bookmarks), (drag_motion_callback),
	(bookmarks_drop_uris), (build_selection_list),
	(drag_data_received_callback):
	Only allow creation of bookmarks for directories. Fixes #328074.

2006-02-26  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-directory.c:
	(athena_directory_notify_files_removed):
	Plug potential leak.

2006-02-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (done_loading):
	Only use the idle reveal mechanism for the list view.

2006-02-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (reveal_selection_idle_callback),
	(done_loading):
	Call reveal_selection in an idle callback to work around a bug in
	GtkTreeView which produces buggy scroll states when the nodes have
	not yet been allocated. It would make the selection always the top
	row even when it should ignore alignment, among other oddities.

2006-02-26  Christian Neumair  <chris@gnome-de.org>

	* src/athena-application.c: (athena_application_get_n_windows):
	* src/athena-application.h:
	* src/athena-window-manage-views.c:
	(got_file_info_for_view_selection_callback):
	Also consider desktop windows when deciding whether to fallback to
	home or not. Fixes #331605.

2006-02-25  Chao-Hsiung Liao  <j_h_liau@yahoo.com.tw>

	* configure.in: Add "zh_HK" to ALL_LINGUAS.

2006-02-24  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c:
	(directory_count_start):
	Use new GNOME_VFS_FILE_INFO_NAME_ONLY flag when counting files.
	This avoids lots of stats.

	* configure.in:
	Require vfs 2.13.92 (cvs for now) for the above.

2006-02-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (bookmarks_drop_uris):
	Don't leak bookmark.

2006-02-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (bookmarks_drop_uris):
	Resolve the dropped uris to their drop target, use the same naming
	logic as the bookmark menu and use gnome-fs-directory icon when adding.
	If something more fitting is available it will be updated anyway.
	Fixes #332235.

2006-02-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (bookmarks_edited):
	Set the has_custom_name_flag before setting the name - which would
	otherwise immediately commit the bookmarks to disk without the name.
	Fixes #327744.

2006-02-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (bookmarks_popup_menu):
	(bookmarks_button_press_event_cb):
	Open the popup menu non-modal and pass the button event on to the
	tree view. Makes a right click select the item under the cursor
	before bringing up the menu. Fixes #329778.

2006-02-21  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file.c:
	(athena_file_get_size_as_string_with_real_size):
	Add a cast to fix build for platforms where GnomeVFSFileSize
	is not defined as long long (e.g. AMD64). Fixes bug #331636.

2006-02-21  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-error-reporting.[ch]:
	Add callback to fm_rename_file.

	* src/file-manager/fm-icon-view.c:
	Pass NULL as above callback

	* src/file-manager/fm-list-view.c:
	Don't activate file when renaming, delay until rename done.
	After rename, scroll to renamed file if not visibile, because it
	may have moved.

	Above based on initial patch by Nelson Benítez <gnel@cenobioracing.com>

	* src/file-manager/fm-list-model.c:
	On file change, if file was re-sorted emit rows_reordered.

	This fixes bug #326581

2006-02-19  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-mime-actions.c:
	(file_compare_by_mime_type), (file_compare_by_guessed_mime_type),
	(file_compare_by_uri_scheme),
	(athena_mime_get_default_application_for_files),
	(athena_mime_get_open_with_applications_for_files),
	(athena_mime_get_applications_for_files),
	(athena_mime_has_any_applications_for_files):
	Avoid redundant application lookups by sorting the files by mime type
	and skipping the ones which have the same mime type / parent uri
	combination as the previous one. Prevents athena from blocking for
	seconds when selecting many files of similar type.

2006-02-17  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-operations.c: (get_link_name):
	Fall back to locale encoding or force utf8 if the utf8 conversion
	of the link target filename fails. (#331379)

2006-02-15  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (append_extension_pages):
	Pass the original files, not the target files to property
	page providers. (#329426)
	(create_permissions_page):
	Make sure we can get permissions from target before showing
	permissions page.

2006-02-13  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.13.91 ===

2006-02-13  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release

	* configure.in:
	Require eel 2.13.91

2006-02-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (lay_down_icons_tblr):
	Fix layout bug on desktop (#153519)

2006-02-06  Alexander Larsson  <alexl@redhat.com>

	* athena-folder-handler.desktop.in:
	Add application/x-gnome-saved-search to the list of folder types handled

2006-01-31  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== athena 2.13.90 ===

2006-01-31  Martin Wehner  <martin.wehner@gmail.com>

	* NEWS:
	Update for release

	* configure.in:
	Bump version to 2.13.90

2006-01-31  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-file-management-properties.c:
	(athena_file_management_properties_dialog_setup):
	* src/athena-file-management-properties.glade:
	Add the option to always use the location bar to the
	preferences dialog. Closes #328659.
	Patch from Justin Fitzsimmons <jfitzsimmons@gmail.com>

2006-01-31  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-view.h:
	* libathena-private/athena-view.c: (athena_view_grab_focus):
	Add new grab_focus method.

	* src/file-manager/fm-list-view.c: (fm_list_view_grab_focus),
	(fm_list_view_iface_init):
	Implement grab_focus.

	* src/athena-window.c: (athena_window_set_content_view_widget):
	Use grab_focus to set the focus on the content view. Fixes #329087.
	Patch from Nelson Benitez <gnel@cenobioracing.com>

2006-01-30  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (compute_drop_position),
	(get_drag_data), (free_drag_data), (drag_motion_callback),
	(drag_leave_callback), (uri_list_from_selection),
	(drag_data_received_callback), (drag_drop_callback),
	(athena_places_sidebar_init), (athena_places_sidebar_finalize):
	Enable bookmarks as drop targets. Closes #43311.
	Based on a patch from Christian Neumair <chris@gnome-de.org>.

2006-01-29  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-container.c:
	(finish_adding_new_icons):
	Use same grid as positioned icons to not mess up spacing.

2006-01-28  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file.c:
	(athena_file_get_size_as_string_with_real_size),
	(athena_file_get_string_attribute):
	* src/file-manager/fm-properties-window.c: (create_basic_page):
	Show the detailed file size in addition to the formatted one
	in the properties dialog. Fixes #62713.
	Patch from Gautier Portet <kassoulet@gmail.com>

2006-01-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(confirm_delete_from_trash):
	HIGify the icon in the delete from trash dialog.
	Patch from Luca Ferretti <elle.uca@libero.it>

2006-01-26  Martin Wehner  <martin.wehner@gmail.com>

	* test/test-athena-directory-async.c: (main):
	Fix C99-style variable initialization.
	Patch from Jens Granseuer <jensgr@gmx.net>

2006-01-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(stop_cell_editing), (fm_list_view_clear), (fm_list_view_dispose):
	Stop cell editing when disposing the view. Fixes #322821.

2006-01-26  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	Use athena_get_uri_shortname_for_display to avoid
	crashing g_markup with invalid utf-8. Fixes #325586.

2006-01-22  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-properties-window.c:
	(synch_groups_combo_box), (synch_user_menu):
	Don't try to update the owner and group widgets if
	the monitored file was removed. Fixes #325702.

2006-01-21  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window.c: (athena_window_destroy):
	Unref and destroy a new content view that has been created
	but not yet been switched to. Fixes a rare crash.

2006-01-21  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-bookmark-list.c: (get_default_bookmark_name):
	Don't leak title.

2006-01-21  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-desktop-directory-file.c:
	(desktop_directory_file_monitor_add):
	Fix a typo that makes the desktop directory monitors leak.

2006-01-20  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-icon-factory.c: (scale_icon):
	Never try to scale icons down to 0px. Fixes scaling for
	images with extreme ratios.

2006-01-20  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_applications_for_file):
	Don't leak mime_type.

2006-01-18  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window-bookmarks.c: (athena_bookmarks_exiting):
	Destroy the bookmarks window on shutdown.

	* src/athena-bookmarks-window.c: (on_window_destroy_event):
	Release the bookmark stores.

2006-01-17  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-spatial-window.c:
	(athena_spatial_window_finalize):
	Don't leak last_geometry.

	* src/file-manager/fm-tree-view.c:
	(show_iter_for_file):
	Don't leak path.

2006-01-16  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_remove):
	Don't try to remove dummy rows from the reverse maps. Fixes
	critical warnings when reloading a list view with subdirectories.

2006-01-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.13.4 ===

2006-01-16  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

2006-01-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	* libathena-private/Makefile.am:
	* libathena-private/athena-search-engine-tracker.[ch]:
	* libathena-private/athena-search-engine.c:
	Add search support for the Tracker indexing engine.

2006-01-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Handle the mount/unmount error case where the mount system handled
	the error dialogs.

2006-01-16  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (add_place), (update_places),
	(get_bookmark_index), (compute_drop_position),
	(drag_motion_callback), (drag_leave_callback),
	(bookmarks_drop_uris), (drag_data_received_callback),
	(drag_drop_callback), (bookmarks_popup_menu_detach_cb),
	(bookmarks_check_popup_sensitivity),
	(bookmarks_selection_changed_cb), (rename_selected_bookmark),
	(rename_shortcut_cb), (remove_selected_bookmarks),
	(remove_shortcut_cb), (bookmarks_key_press_event_cb),
	(bookmarks_build_popup_menu), (bookmarks_update_popup_menu),
	(bookmarks_popup_menu), (bookmarks_popup_menu_cb),
	(bookmarks_button_press_event_cb), (bookmarks_edited),
	(bookmarks_editing_canceled), (athena_places_sidebar_init):
	Merge parts of the d'n'd and popup menu code from the gtk filechooser
	into the places sidebar.

2006-01-14  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-directory-background.c:
	(athena_file_background_read_desktop_settings),
	(athena_file_background_write_desktop_settings):
	Handle new background zooming mode. (#105231)

2006-01-14  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_destroy), (fm_desktop_icon_view_finalize):
	Remove the default_zoom pref callback in finalize, not destroy.
	Fixes #326063.

2006-01-14  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	Handle hostnames in the progress dialog strings more robustly.
	Fixes #325737.
	Based on a batch from Anilkumar B. <anilkumar.bacheli@wipro.com>

2006-01-12  Christian Neumair  <chris@gnome-de.org>

	* src/athena-bookmarks-window.c: (update_bookmark_from_text):
	Update current bookmark name/pixbuf on changes. Partially fixes
	#44906.

2006-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-error-reporting.c: (rename_callback),
	(cancel_rename_callback), (cancel_rename), (fm_rename_file):
	Don't call eel_timed_wait_stop when the timer triggers. (#302735)

2006-01-11  Sebastien Bacher  <seb128@debian.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	updated the default thumbnailing value (Fixes #317587)

2006-01-11  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_default_application_for_files),
	(intersect_application_lists),
	(athena_mime_get_open_with_applications_for_files),
	(athena_mime_has_any_applications_for_files):
	* libathena-private/athena-mime-actions.h:
	Add file list helpers for getting associated applications.

	* libathena-private/athena-program-choosing.c:
	* libathena-private/athena-program-choosing.h:
	(athena_launch_application):
	Allow to pass multiple files per application launch.

	* src/athena-information-panel.c:
	(command_button_callback):
	Port to new API.

	* src/file-manager/fm-directory-view.c:
	(application_launch_parameters_new),
	(application_launch_parameters_free),
	(fm_directory_view_launch_application),
	(fm_directory_view_chose_application_callback),
	(application_selected_cb),
	(open_with_launch_application_callback),
	(add_application_to_open_with_menu), (reset_open_with_menu),
	(real_update_menus), (list_to_parameters_foreach),
	(mime_application_hash),
	(fm_directory_view_make_activation_parameters),
	(activate_callback):
	Support activation of multiple files at once, correctly figure out
	their associated applications. Fixes #105653.

	* src/file-manager/fm-directory-view.c:
	(activate_callback):
	ref/unref the view before/after operating on it. Fixes #326231.

2006-01-11  Ryan Lortie  <desrt@desrt.ca>

	* src/athena-location-entry.c (try_to_expand_path): Use strlen()
	instead of g_utf8_strlen() since gtk_editable_insert_text takes
	the number of bytes (not number of characters).  Fixes #324406.

2006-01-10  Jürg Billeter  <j@bitron.ch>

	* libathena-private/athena-desktop-link.c:
	(athena_desktop_link_new):
	Don't try to free constant string. Fixes #326114.

2005-12-20  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file.c:
	(athena_file_get_custom_icon):
	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_drag_data_received),
	(make_relative_uri_from_full), (set_icon),
	(select_image_button_callback):
	Set icons for directories relative to the directory location to make
	it follow location changes.

2005-12-20  Alexander Larsson  <alexl@redhat.com>

	* src/athena-query-editor.c:
	Support filtering on arbitrary mime type.
	Uses the new eel_mime_get_availible_mime_types

	* configure.in:
	Require eel 2.13.4 for new mime list function

2005-12-20  Alexander Larsson  <alexl@redhat.com>

	* src/athena-query-editor.c: (edit_clicked),
	(athena_query_editor_grab_focus):
	Don't focus invisible widget.

2005-12-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-extension/Makefile.am:
	* libathena-extension/athena-location-widget-provider.[ch]:
	Add AthenaLocationWidgetProvider

	* src/athena-window-manage-views.c:
	Use AthenaLocationWidgetProvider

2005-12-20  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(action_save_search_as_callback):
	Some better strings, not resizeable.

	* src/athena-navigation-window.c:
	(athena_navigation_window_instance_init),
	(athena_navigation_window_destroy):
	Remove unused tooltips object

	* src/athena-query-editor.c:
	Add tooltips, fix spacing

	* src/athena-spatial-window.c:
	* src/athena-window-manage-views.c:
	Fix spacing for extra location widgets

2005-12-18  Dennis Cranston <dennis_cranston@yahoo.com>

	* src/file-manager/fm-directory-view.c
	(action_save_search_as_callback):  HIG fixes for the save
	search dialog.

2005-12-18  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-desktop-link-monitor.c:
	(volume_delete_dialog):
	* libathena-private/athena-file-operations.c:
	(handle_transfer_overwrite), (athena_file_operations_copy_move):
	* libathena-private/athena-icon-dnd.c:
	(confirm_switch_to_manual_layout):
	* libathena-private/athena-program-choosing.c:
	(application_cannot_open_location):
	* src/file-manager/fm-directory-view.c:
	(report_broken_symbolic_link):
	* src/athena-location-bar.c: (drag_data_received_callback):
	Adapt callers to eel dialog API changes. Fixes #324262.

	Patch from Christian Neumair <chris@gnome-de.org>
	and Claudio Saavedra <csaavedra@alumnos.utalca.cl>

2005-12-16  Dennis Cranston  <dennis_cranston@yahoo.com>

 	* libathena-private/athena-dnd.c:
 	(athena_drag_drop_action_ask): HIG fix.  Use title capitalization
 	for menu items.

2005-12-16  Dennis Cranston  <dennis_cranston@yahoo.com>

 	* src/athena-property-browser.c: (athena_emblem_dialog_new),
 	(add_new_pattern), (add_new_color): HIG fixes.  Use title
 	capitalization for window titles.  Fix widget spacing.

2005-12-16  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file.c: (get_time),
	(compare_by_time), (athena_file_compare_for_sort),
	(athena_file_compare_for_sort_by_attribute):
	Support comparison by accessed time. Fixes #321671.

	* libathena-private/athena-file.h:
	Add atime sort type.

	Based on a patch from bluefuture@email.it

2005-12-16  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-properties-window.c:
	(select_image_button_callback):
	Use GTK_STOCK_REVERT_TO_SAVED item for icon
	selection dialog. Closes #95115.
	Patch from Vidar Braut Haarr (vhaarr@gmail.com)

2005-12-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-extension/athena-column.c:
	* libathena-extension/athena-menu-item.c:
	* libathena-extension/athena-property-page.c:
	Chain up in finalize handler, to fix leaks.

2005-12-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (reveal_newly_added_folder):
	Correct arguments for add_file, makes rename on new folder/file work
	again.

2005-12-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.h:
	Rename network icon prefs to match others.

2005-12-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.c:
	Disable network icon on desktop by default.

	* src/athena-main.c:
	* src/athena-navigation-window-ui.xml:
	* src/athena-spatial-window-ui.xml:
	* src/athena-window-menus.c:
	Add network to go/places menu.

2005-12-15  Alexander Larsson  <alexl@redhat.com>

	* src/athena-location-dialog.c: (athena_location_dialog_init):
	Make entry 30 chars to match file selector dialog.
	Patch from Ray Strode

2005-12-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-module.c (athena_module_load):
	open modules G_MODULE_BIND_LOCAL

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.13.3 ===

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	disable update-mimedb in distcheck

	* libathena-private/Makefile.am:
	Add beagle sources to extradist

	* NEWS:
	Update for release

--- Merged the athena-search2 branch ---

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	Merge in changes from ATHENA_SEARCH2_MERGE_ANCHOR1 to
	ATHENA_SEARCH2_MERGE_ANCHOR2 (on HEAD).
	(This is ATHENA_SEARCH2_MERGE_POINT2)

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_new_from_relative_uri):
	Another case where we need to create a saved search file.

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Make it possible to build without beagle.

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-search-engine-simple.[ch]:
	Add new AthenaSearchEngineSimple backend.

	* libathena-private/athena-file-utilities.[ch]:
	Add athena_get_home_directory_uri.

	* libathena-private/athena-marshal.list:
	Add VOID:OBJECT,BOOLEAN, sort

	* libathena-private/athena-search-directory.[ch]:
	Add athena_search_directory_is_indexed.
	Make sure saved searches are never returned as search hits.

	* libathena-private/athena-search-engine-beagle.[ch]:
	Make _new fail if we can't contact beagle daemon.
	Set text on query as one string (it can have keywords in it)
	Move freeing of query data to after query is done.
	Add _is_indexed

	* libathena-private/athena-search-engine.[ch]:
	Add athena_search_engine_is_indexed
	Remove athena_search_engine_enabled
	Use beagle if availible, otherwise simple backend.

	* src/athena-navigation-window-menus.c:
	Remove search disabled code

	* src/athena-query-editor.[ch]:
	Rename activate to changed and add reload argument
	Add go/reload button for non-indexed searches
	Add mnemonic for entry
	Change saved search string to "Search Folder"

	* src/athena-navigation-window.c:
	Update for query editor changes
	For indexed search engines, default to search in homedir

	* src/athena-spatial-window.c:
	Update for query editor changes
	For indexed search engines, default to search in homedir
	Remove search disabled code

2005-12-07  Alexander Larsson  <alexl@redhat.com>

	* src/athena-query-editor.c (setup_external_entry):
	Make ugly string slightly better.

2005-12-07  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Mime API needs gnome-vfs-module. Unfortunate...

	* libathena-private/athena-query.c:
	Parse queries fully

	* libathena-private/athena-search-engine-beagle.c:
	Look at mime types and location.

	* src/athena-query-editor.c:
	Add mime type and location to query editor

2005-12-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-query.[ch]:
	Add new fields to AthenaQuery

2005-12-06  Alexander Larsson  <alexl@redhat.com>

	Merge in changes from ATHENA_2_12_1 to
	ATHENA_SEARCH2_MERGE_ANCHOR1 (on HEAD).
	(This is ATHENA_SEARCH2_MERGE_POINT1)

2005-12-06  Alexander Larsson  <alexl@redhat.com>

	* src/athena-history-sidebar.c: (update_history),
	(athena_history_sidebar_init):
	Fix leaks of bookmarks and model.

2005-12-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-search-engine-beagle.c:
	(athena_search_engine_beagle_set_query):
	Unref the right query.

2005-12-05  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.c:
	(athena_compute_title_for_uri):
	Handle NULL query in search.

	* libathena-private/athena-file-utilities.h:
	* libathena-private/athena-search-directory.h:
	Move saved search uri/mimetype define to
	athena-file-utilities.h.

	* libathena-private/athena-search-directory.c:
	Ref query in get

	* libathena-private/athena-search-engine.c:
	Remove unused stuff.

	* src/Makefile.am:
	* src/athena-query-editor.[ch]:
	Add new files implementing AthenaQueryEditor

	* src/athena-places-sidebar.c:
	Remove search from places sidebar.

	* src/athena-search-bar.[ch]:
	Only handle text queries.

	* src/athena-window.[ch]:
	* src/athena-window-private.h:
	* src/athena-navigation-window-menus.c:
	* src/athena-window-manage-views.c:
	extra location widgets support and some search mode changes

	* src/athena-navigation-window.[ch]:
	* src/athena-spatial-window.c:
	Implement new search ui using extra location widgets

	* src/file-manager/fm-directory-view.c:
	Implement save search and save search as.
	Fix free bugs in fm_directory_view_stop.

	* src/file-manager/fm-icon-view.c: (fm_icon_view_supports_uri):
	* src/file-manager/fm-list-view.c: (fm_list_view_supports_uri):
	Also handle saved search mimetypes.


2005-12-02  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-search-directory.[ch]:
	More functions to save queres.

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/athena-directory-view-ui.xml:
	Initial stubs for save search menu items.

2005-12-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory.c:
	* libathena-private/athena-search-directory.[ch]:
	* src/athena-bookmark-list.c:
	Further refactor the query loading, and remove all traces
	of the old load/save mechanism.

2005-12-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory.c:
	* libathena-private/athena-query.[ch]:
	* libathena-private/athena-search-directory.[ch]:
	Refactor query loading into AthenaQuery object.

2005-12-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Check for update-mime-database

	* data/.cvsignore:
	* data/Makefile.am:
	* data/athena.xml.in:
	Add mime database entries for saved searches.

	* libathena-private/Makefile.am:
	* libathena-private/athena-saved-search-file.[ch]:
	Special file type for saved search files to pretend that
	they are directories.

	* libathena-private/athena-directory.[ch]:
	Make athena_directory_ref return its arg.
	Create AthenaSearchDirectory for saved searches.

	* libathena-private/athena-file-dnd.c:
	Non-editable directories do not accept drops.

	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.h:
	Move athena_file_get_existing to public header.

	* libathena-private/athena-file.c:
	Create saved search files at right time

	* libathena-private/athena-marshal.list:
	Add new marshallers

	* libathena-private/athena-monitor.c:
	Remove some spew

	* libathena-private/athena-search-directory.[ch]:
	Split out search file loading to a separate function.

	* libathena-private/athena-tree-view-drag-dest.c:
	Handle several layers of cannot accept drop.

	* src/file-manager/fm-directory-view.[ch]:
	Make files be related to the directory they are in, since
	a file can be in a tree multiple times, with searches.
	Sorting us now done in base class, and inheriting classes just
	add a compare function.
	Fix file leak in new_folder_done.

	* src/file-manager/fm-icon-view.c:
	Update to new base class API.
	In scroll_to_file, don't create a AthenaFile if it doesn't exist.

	* src/file-manager/fm-list-model.[ch]:
	Rearrange data so that we can have one file in multiple dirs.
	Still problems with the same directory in multiple dirs.
	In scroll_to_file, don't create a AthenaFile if it doesn't exist.
	Fix leak in each_path_get_data_binder

	* src/file-manager/fm-list-view.c:
	Update to new APIs (base class and model).
	Fix leak in fm_list_view_get_selection_foreach_func.

--- end of athena-search2 merge ---

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(report_broken_symbolic_link):
	Don't ask to move broken symlinks to trash in trash (#132751)

	Patch from Christian Neumair

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-desktop-icon-file.c:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-file.c:
	Use GNOME_VFS_FILE_INFO_FIELDS_ACCESS to calculate
	permissions.

	Patch from Christian Neumair and Christian Kellner

	* configure.in:
	Require latest gnome-vfs for GNOME_VFS_FILE_INFO_FIELDS_IDS.

2005-12-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Use GtkComboBox, not option menu. (#322567)

	Patch by Jaap A. Haitsma

2005-12-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(extension_action_slow_mime_types_ready_callback),
	(extension_action_callback), (add_extension_action_for_files):
	Keep the original action refed till its activation callback is
	done. Prevents the callback data from being freed prematurely.
	Fixes #320230.

2005-12-09  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #322957:

	Add a "Network Servers" icon on the desktop, which takes you to network:///

	* libathena-private/athena-global-preferences.h
	(ATHENA_PREFERENCES_DESKTOP_NETWORK_VISIBLE): New preference
	name.  This determines whether we show the "Network Servers" icon.

	* libathena-private/apps_athena_preferences.schemas.in: Add a
	schema for /apps/athena/desktop/network_visible; the default is true.

	* libathena-private/athena-desktop-link.h
	(AthenaDesktopLinkType): Add a ATHENA_DESKTOP_LINK_NETWORK type.

	* libathena-private/athena-desktop-link.c
	(athena_desktop_link_new): Support ATHENA_DESKTOP_LINK_NETWORK.

	* libathena-private/athena-desktop-link-monitor.c
	(AthenaDesktopLinkMonitorDetails): Added a network_link field.
	(athena_desktop_link_monitor_delete_link): Don't delete
	ATHENA_DESKTOP_LINK_NETWORK links.
	(update_link_visibility): New helper function.
	(desktop_home_visible_changed): Use update_link_visibility(), to
	avoid duplicated code.
	(desktop_computer_visible_changed): Likewise.
	(desktop_trash_visible_changed): Likewise.
	(desktop_network_visible_changed): New function.
	(create_link_and_add_preference): New helper function.
	(athena_desktop_link_monitor_init): Use
	create_link_and_add_preference() to avoid duplicated code.  Also,
	create the network_link.
	(desktop_link_monitor_finalize): Unref the network_link.
	(remove_link_and_preference): New helper function.
	(desktop_link_monitor_finalize): Use remove_link_and_preference()
	to avoid duplicated code.  Also, free the network_link.

	* src/file-manager/fm-icon-container.c (SortCategory): Add a
	SORT_NETWORK_LINK category right before SORT_MOUNT_LINK, so that
	the "Network Servers" icon appears before mounts.
	(get_sort_category): Use SORT_NETWORK_LINK as the category for
	ATHENA_DESKTOP_LINK_NETWORK.

2005-12-09  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-emblem-utils.c:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-program-choosing.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-error-reporting.c:
	* src/file-manager/fm-properties-window.c:
	* src/file-manager/fm-tree-view.c:
	* src/athena-application.c:
	* src/athena-connect-server-dialog-main.c:
	* src/athena-connect-server-dialog.c:
	* src/athena-emblem-sidebar.c:
	* src/athena-information-panel.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-property-browser.c:
	* src/athena-window-bookmarks.c:
	* src/athena-window-manage-views.c:
	Remove title from alerts. (#323134)

	Patch from jaap@haitsma.org

	* libathena-private/athena-file-queue.c (athena_file_queue_enqueue):
	Fix warning from ignoring g_list_append return value

2005-12-09  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window.[ch]:
	Use combo box instead of option menu (#322567)

	Patch from jaap@haitsma.org

2005-12-08  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.c:
	* src/athena-file-management-properties.glade:
	Use the new combo box code (#322487)

	Patch from jaap@haitsma.org

	* configure.in:
	Require new eel.

2005-12-01  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #318140:

	* libathena-private/athena-link-desktop-file.c
	(athena_link_desktop_file_get_link_icon_from_desktop): If the
	.desktop file doesn't have an Icon property, fall back to some
	reasonable icons depending on the type of the .desktop file.

	* libathena-private/athena-icon-factory.c
	(athena_icon_factory_get_icon_for_file): Clarify what we mean by
	custom icons vs. special icons.

2005-12-01  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #317962:

	* src/athena-pathbar.c (get_dir_name): Don't special-case the
	name for $HOME; just let it be the actual display name of the
	folder on disk.

	* src/athena-places-sidebar.c (update_places): Likewise, to make
	this consistent.

2005-11-28  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (done_loading),
	(display_pending_callback),
	(schedule_idle_display_of_pending_files),
	(schedule_timeout_display_of_pending_files),
	(unschedule_display_of_pending_files), (queue_pending_files),
	(remove_changes_timeout_callback), (reset_update_interval),
	(changes_timeout_callback), (schedule_changes),
	(files_added_callback), (files_changed_callback),
	(done_loading_callback), (schedule_update_menus),
	(file_changed_callback), (finish_loading),
	(fm_directory_view_stop):
	Schedule the frequency of updates to the view in relation to the
	activity in a viewed directory instead of simply scheduling everything
	as idle. Prevents high CPU load from constant updates in busy
	directories and allows more efficient use of the cached info for
	the initial display.

2005-11-24  Dennis Cranston  <dennis_cranston@yahoo.com>

	* src/file-manager/fm-directory-view.c: (confirm_delete_directly):
	HIG fixes for the delete confirmation dialog.  Remove window
	title & convert dialog type from question to warning.

2005-11-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Allow shift-delete even if not visible in ui.

	Patch from Nelson Benítez <gnel@cenobioracing.com>

2005-11-24  Alexander Larsson  <alexl@redhat.com>

	* icons/knob.png:
	New knob icon from Luca Ferretti

2005-11-24  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.[ch]:
	Add athena_file_list_cancel_call_when_ready.

	* src/file-manager/fm-directory-view.c:
	Handle multiple files being activated together.

	Patch from Christian Neumair with some changes.

2005-11-23  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-thumbnails.c:
	(athena_thumbnail_load_framed_image):
	Don't frame thumbnails with alpha channel.

2005-11-22  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.glade:
	Use pixel offset for indenting, not spaces.
	Patch from Jaap Haitsma

2005-11-22  Emmanuele Bassi  <ebassi@cvs.gnome.org>

	* libathena-private/athena-module.c (athena_module_load): Use
	G_MODULE_BIND_LAZY when dlopening a module.

2005-11-19  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(action_location_delete_callback): Ask for confirmation when deleting
	through the location context menu. Fixes #321584.

2005-11-17  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-file-management-properties.c:
	(athena_file_management_properties_size_group_create):
	Don't leak size_group reference.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.13.2 ===

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require new eel

	* NEWS:
	Update for release

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-view.c: (create_tree):
	* src/athena-main.c: (register_icons):
	* src/athena-window-menus.c:
	Always use gnome-fs-home for home icon.

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_bounds):
	Handle emblem size correctly when zoomed.
	Patch from Christian Neumair

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* src/athena-desktop-window.c (realize):
	Fix typo (#320003)

2005-11-07  Federico Mena Quintero  <federico@ximian.com>

       Fix the volumes part of bug #45953:

       * libathena-private/athena-icon-container.c
       (finish_adding_new_icons): First, call assign_icon_position().
       Then, don't ignore the fact that the icon may have a lazy
       position; check the icon->has_lazy_position flag even after
       retrieving its stored position.  If the flag is turned on, defer
       the icon to the semi_position_icons list.

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c: (draw_frame):
	Handle the case of missing highlight frame better.
	Patch from Christian Neumair

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Nicer ui for setting custom icons (#95115)
	Patch from Christian Neumair

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.[ch]:
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-tree-view.c:
	Get the right position on new folders/files when in
	manual position mode.
	Patch from Christian Neumair

2005-11-14  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	(handle_transfer_overwrite):
	Add skip all button. (#48331)
	Patch from Guillaume Desmottes <cass@skynet.be>

2005-11-13  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-container.c:
	Use ctrl-shift-g to browse back in results. Fixes #320061.

2005-11-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-tree-view.c: (create_tree):
	Connect the compare function before root nodes are added.
	Prevents the internal sort model of GtkTree from going
	out of sync with the tree view after a root node resort.
	Fixes #158506.

2005-10-28  Matthias Clasen  <mclasen@redhat.com>

	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-icon-canvas-item.c (draw_stretch_handles:
	(hit_test_stretch_handle): Improve drawing of the outline for icon stretching,
	make the knob image themable as stock-athena-knob.

	* libathena-private/athena-icon-container.c: Implement icon stretching
	via keyboard, with <Control>+, <Control>- and <Control>0.

	* src/athena-window-manage-views.c (zoom_level_changed_callback): Make the
	ZOOM_NORMAL action insensitive when zooming is not supported, so that it
	does not eat <Control>0.

2005-10-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	Include locale.h to fix build. Patch from Nelson Benítez.

2005-10-26  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-menus.c: (action_connect_to_server_callback):
	Fix leak. Patch from Kjartan Maraas. (#319333)

2005-10-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-mime-actions.c (get_open_with_mime_applications):
	Correctly sort the mime lists.

2005-10-24  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.13.1 ===

2005-10-24  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c (athena_self_check_icon_factory):
	Fix test, icon size was removed

	* NEWS:
	Update for release

2005-10-21  Matthias Clasen  <mclasen@redhat.com>

	* src/file-manager/fm-directory-view.c: Only show
	the "Format" item if gfloppy is around.

2005-10-21  Matthias Clasen  <mclasen@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/fm-directory-view.c: Add a "Format"
	menuitem to the context menu of Floppy in Computer,
	which runs gfloppy.

2005-10-20  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-program-choosing.c:
	(athena_launch_show_file):
	* src/athena-window-manage-views.c:
	(display_view_selection_failure):
	* src/file-manager/fm-directory-view.c:
	(activate_callback),
	(activate_activation_uri_ready_callback):
	Don't bail if an authentication request was cancelled.

2005-10-20  Christian Neumair  <chris@gnome-de.org>

	* src/athena-sidebar-title.c:
	(update_more_info):
	* libathena-private/athena-file.c:
	* libathena-private/athena-file.h:
	(athena_file_should_show_type):
	Don't display file type in sidebar for computer, network and smb
	toplevel URIs. Fixes #168561.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-mime-actions.c:
	(get_open_with_mime_applications), (application_compare_by_name),
	(application_compare_by_id):
	Sort applications by name. Fixes bug #310038.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-bookmark.c:
	(bookmark_file_changed_callback):
	Don't update bookmarks when its target file is trashed. Fixes #162787.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-window-info.h:
	* src/athena-window-manage-views.c:
	(athena_window_open_location_full):
	* src/file-manager/fm-icon-view.c:
	(icon_container_activate_alternate_callback):
	* src/file-manager/fm-list-view.c:
	(activate_selected_items_alternate):
	Open a new navigational window on alternative item activation.

2005-10-19  Christian Neumair  <chris@gnome-de.org>

	* src/athena-spatial-window.c:
	(got_file_info_for_location_menu_callback):
	Use custom image for location button if available. Partially fixes
	#311394 and plugs a leak.

2005-10-19  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file):
	Scroll into view correctly when renaming (#309964)

2005-10-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am (INCLUDES):
	Remove duplicate setting of libathena_private_la_LIBADD

2005-10-19  Alexander Larsson  <alexl@redhat.com>

	* src/athena-shell-interface.idl:
	Reuse Athena::URI from the one defined in libathena-private.

	* libathena-private/Makefile.am:
	Link libathena-private statically.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(can_delete_uri_without_confirm),
	(confirm_delete_directly):
	Don't request confirmation for deletion of "burn:" URIs. Fixes
	#302607.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* src/athena-places-sidebar.c: (update_places):
	* src/athena-window-bookmarks.c: (update_bookmarks):
	Skip nonexistant bookmarks in menus/sidebar. Fixes #312507.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-metafile.c: Make metadata
	copying/moving asynchronous.

2005-10-18  Christian Neumair  <chris@gnome-de.org>

	* data/browser.xml: Don't mark strings for translation we get from
	gnome-icon-theme. Fixes #114919.

2005-10-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c: (key_press_event):
	Don't send slash to typeahead

	* src/athena-location-dialog.[ch]:
	Add athena_location_dialog_set_location.

	* src/athena-navigation-window-menus.c:
	* src/athena-navigation-window.c:
	* src/athena-spatial-window.c:
	* src/athena-window.[ch]:
	Open location dialog/entry when you press '/'.

2005-10-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Use gtktreeview typeahead. Patch by Christian Neumair.

2005-10-18  Jürg Billeter  <j@bitron.ch>

	* libathena-private/athena-icon-container.c: (destroy),
	(unrealize), (button_press_event),
	(athena_icon_container_search_position_func),
	(athena_icon_container_real_search_enable_popdown),
	(athena_icon_container_search_enable_popdown),
	(athena_icon_container_search_disable_popdown),
	(send_focus_change), (athena_icon_container_search_dialog_hide),
	(athena_icon_container_search_entry_flush_timeout),
	(athena_icon_container_search_preedit_changed),
	(athena_icon_container_search_activate),
	(athena_icon_container_search_delete_event),
	(athena_icon_container_search_button_press_event),
	(athena_icon_container_search_iter),
	(athena_icon_container_search_move),
	(athena_icon_container_search_scroll_event),
	(athena_icon_container_search_key_press_event),
	(athena_icon_container_search_init),
	(athena_icon_container_ensure_interactive_directory),
	(athena_icon_container_real_start_interactive_search),
	(athena_icon_container_start_interactive_search),
	(key_press_event), (athena_icon_container_class_init):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-private.h:
	* libathena-private/athena-marshal.list:

	Replace AthenaIconContainer typeahead implementation by a port of
	GtkTreeView's interactive search.

2005-10-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-extension/Makefile.am:
	* libathena-private/Makefile.am:
	Build fixes for cygwin.
	Patch from Yaakov S (Cygwin Port)

2005-10-17  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-bookmark.c:
	* libathena-private/athena-bookmark.h:
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-factory.c:
	* libathena-private/athena-icon-factory.h:
	* libathena-private/athena-ui-utilities.c:
	* src/athena-bookmarks-window.c:
	* src/athena-history-sidebar.c:
	* src/athena-places-sidebar.c:
	* src/athena-sidebar-title.c:
	* src/athena-spatial-window.c:
	* src/athena-window-menus.c:
	* src/file-manager/fm-directory-view.c:
	Kill ATHENA_ICON_SIZE_FOR_MENUS, make icon factory support GTK+
	stock icon size, use this size in the sidebar, and in menus.
	Fixes #167107 and others.

2005-10-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (fm_directory_view_class_init):
	Remove ctrl-backspace delete keybinding. (#310546)

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libathena-extension/athena-file-info.c:
	* libathena-extension/athena-file-info.h:
	* libathena-private/athena-file.c:
	Add new functions for extensions:
	athena_file_info_has_volume, athena_file_info_has_drive,
	athena_file_info_get_volume, athena_file_info_get_drive

	Patch from Trevor Davenport

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.13.1. Further 2.12.x work is on
	gnome-2-12 branch.

==== gnome-2-12 branched from here ===

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.12.1 ===

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.12.1

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_new),
	(athena_file_operations_progress_new_file):
	Correctly escape input strings for GMarkup. (#317736)
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c:
	(fm_list_model_sort_file_entries):
	Correctly pass iter to gtk_tree_model_rows_reordered() (#315704)
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-metafile.c:
	(athena_directory_get_file_metadata):
	On assert failure, return default metadata, not NULL.
	Partial fix of #308977.
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window.c:
	Verify arguments in public functions.
	Patch from Christian Neumair.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-private.h:
	Don't crash if file removed during start of drag. (#158196)
	Patch from Christian Neumair.

	Remove remove_context_menu_timeout, which is not needed anymore.

2005-10-03  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/athena-directory-view-ui.xml:
	Fix some spelling errors.
	Patch from Lukasz Stelmach <stlman@poczta.fm>

2005-09-30  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_update_scroll_region),
	(lay_down_icons_horizontal):
	Only wrap icons when the right margin touches the rightmost icon.
	Fixes #313025.

2005-09-30  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-view.c: (compare_rows):
	Correct sort order for dummy row.
	Possible fix for #123051

2005-09-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(activate_check_mime_types):
	Never warn if the files would be launched in the same app.
	Partially reverts checkin from 2005-08-01.

2005-09-26  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-desktop-directory.c:
	(desktop_directory_changed_callback), (desktop_finalize),
	(update_desktop_directory): Make changes to "desktop_is_home_dir"
	GConf key instant apply. Fixes #116217.

	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_get_image): Add emblems to drag icon.
	Partially fixes	#159643.

	* src/file-manager/fm-directory-view.c:
	(action_mount_volume_callback), (action_unmount_volume_callback),
	(action_eject_volume_callback), (file_should_show_foreach),
	(real_update_menus_volumes): Allow to mount/unmount/eject multiple
	volumes at once. Fixes #156169.

2005-09-20  christian neumair  <chris@gnome-de.org>

	* src/athena-connect-server-dialog.c: (connect_to_server):
	Fix leak and crasher. Fixes #314730.

	* src/file-manager/fm-directory-view.c: (connect_proxy):
	Don't poke around with null pixbuf if icon theme lookup failed.

	* libathena-private/athena-desktop-directory-file.c:
	(desktop_directory_file_get_deep_counts):
	* libathena-private/athena-file.c:
	(athena_file_get_deep_counts),
	(athena_file_get_string_attribute_with_default:):
	* libathena-private/athena-file.h:
	* libathena-private/athena-trash-file.c:
	(trash_file_get_deep_counts):
	* src/file-manager/fm-properties-window.c:
	(directory_contents_value_field_update),
	(attach_directory_contents_value_field),
	(update_visibility_of_item_count_fields),
	(update_visibility_of_item_count_fields_wrapper),
	(remember_directory_contents_widget),
	(append_directory_contents_fields), (real_destroy):
	Add force flag to athena_file_get_deep_counts, which forces
	generation even if the "show deep count" preference is turned off.
	pass TRUE in property window and FALSE everywhere else. Fixes #126068.

2005-09-19  Nate Nielsen <nielsen@memberwebs.com>

	* athena-connect-server-dialog-main.c: (main):
	* athena-connect-server-dialog.h:
	* athena-connect-server-dialog.c:
	(athena_connect_server_dialog_new):
	* athena-window-menus.c:
	(action_connect_to_server_callback):
	Autofill "Connect to server" dialog where possible.
	Fixes #314745

2005-09-19  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_copy_move),:
	Try to use the trash associated with a symlink's parent directory if
	resolution fails because of broken symlink when moving symlink to
	trash.

	* libathena-private/athena-file-operations.c:
	(athena_self_check_file_operations):
	Fix date self checks. Fixes #47364.

2005-09-19  Alexander Larsson  <alexl@redhat.com>

	* icons/Makefile.am:
	* icons/Search.png:
	* icons/athena-desktop.png:
	* icons/athena-file-management-properties.png:
	* icons/athena-mini-logo.png:
	* icons/athena-server-connect.png:
	* icons/side_bar_image.png:
	Remove unused icons (#315990)
	Patch from Jaap A. Haitsma

2005-09-19  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-metafile.c: (copy_file_metadata):
	* libathena-private/athena-thumbnails.c:
	(athena_update_thumbnail_file_copied),
	(athena_update_thumbnail_file_renamed),
	(athena_remove_thumbnail_for_file):
	* libathena-private/athena-thumbnails.h:
	Copy thumbnails when copying file metadata. Fixes #45191.

2005-09-19  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-list-view.c: (drag_begin_callback),
	(motion_notify_callback):
	Setup drag in the "drag-begin" handler.

2005-09-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.[ch]:
	* libathena-private/athena-icon-private.h:
	Add support for lazily positioned icons.

	* libathena-private/athena-icon-dnd.c: (handle_local_move):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_add_file),
	(fm_icon_view_screen_changed):
	Use lazily positioned icons for desktop icons. (#45953)

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-09-10  Erdal Ronahi  <erdal.ronahi@gmail.com>

        * confiure.in: Added "ku" (Kurdish) to ALL_LINGUAS

2005-09-08  Federico Mena Quintero  <federico@ximian.com>

	Fixes bug #171073:

	* libathena-private/athena-trash-directory.c
	(athena_trash_directory_instance_init): In addition to
	connecting to "volume_pre_unmount" on the volume monitor, also
	connect to "volume_unmounted".  This will let the trash clean up
	its merged directory even if the unmount is not initiated from
	Athena.

	* libathena-private/athena-merged-directory.c
	(merged_remove_real_directory): When a real directory is removed
	from the merged directory, emit notifications to that effect.
	This lets the trash window remove the icons that used to
	correspond to a volume that got unmounted.
	(real_directory_notify_files_removed): New utility function.

2005-09-06  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-list-view.c: (fm_list_view_init): Ensure that
	the zoom level is initialized correctly in fm_list_view_begin_loading.
	Fixes #314269.

2005-09-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c:
	(athena_directory_monitor_add_internal),
	(athena_directory_monitor_remove_internal):
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c: (finalize):
	Only use directory monitors to avoid using lots and lots of
	file monitors. This is an optimization in almost all cases, although
	it does a bit more work when viewing a file properties dialog with the
	containing folder window hidden. (#315041)

2005-09-06  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (add_extension_menu_items),
	(get_unique_files), (reset_extension_actions_menu): Always pass all
	selected files to extension, instead of passing max. 1 per selected
	MIME type. Fixes #314721.

2005-09-05  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.12.0 ===

2005-09-05  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.12.

	* NEWS:
	Update for release

2005-08-31  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	(handle_focus_in_event), (handle_focus_out_event):
	Don't redraw the whole desktop on focus in/out.

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c:
	(get_icon_from_cache):
	Revert memleak patch from 2005-08-23, since it was
	wrong and causes crashes.

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-dnd.c:
	(athena_icon_container_get_drop_action):
	Handle background color/image drops even on
	icons. (#47536)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(filtering_changed_callback):
	Fix handling of global show-hidden-file prefs change.
	(#306821)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_get_first_visible_icon):
	Handle non-sorted-by-y icon containers (manual mode).
	#157415. Patch from Christian Neumair <chris@gnome-de.org>

2005-08-25  William Jon McCann  <mccann@jhu.edu>

	* src/file-manager/fm-icon-view.c (should_preview_sound):
	Don't allow audio preview in burn://.  Workaround for
	#312275.

2005-08-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c:
	(get_special_icon_for_file),
	(athena_icon_factory_get_icon_for_file),
	(athena_icon_factory_is_icon_ready_for_file):
	Handle some more special location icons, and don't require
	attributes for special location icons. (#312095, #312134)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-26  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Better handling of script env vars:
	Expand uri for desktop directory.
	Expand uris for links on desktop
	Expand pathnames for items in trash.
	Fixes bug #148545
	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	(lay_down_icons_horizontal):
	Fix layouting in text-beside-icons mode for short names.
	(#159621)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-25  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.[ch]:
	* src/file-manager/fm-directory-view.c:
	Remove usage of GNOME_VFS_XFER_REMOVESOURCE in
	athena_file_operations_new_file_from_template, instead
	manually removing source when needed. This fixes #309592.

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== athena 2.11.92 ===

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Require eel 2.11.92.

	* NEWS:
	Update for release

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-tree-view-drag-dest.c:
	(get_drop_action), (receive_dropped_keyword),
	(drag_data_received_callback):
	Enable emblem dropping to the list view and allow text
	drags on the list background. Fixes #313408.

	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-23  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-icon-factory.c:
	(get_icon_from_cache):
	Don't ref cached_icon twice. Fixes #307288.

	Patch from Kjartan Maraas  <kmaraas@gnome.org>

2005-08-22  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file.c:
	(athena_file_is_desktop_directory), (athena_file_can_rename),
	(prepend_automatic_emblem_names):
	* libathena-private/athena-file.h:
	* src/file-manager/fm-directory-view.c:
	(desktop_or_home_dir_in_selection), (real_update_location_menu),
	(real_update_menus):
	Don't allow trashing or deleting the home or desktop folder within
	a selection or via the location button context menu. Fixes #310414.

	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-22  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-mime-actions.c:
	(filter_athena_handler), (get_open_with_mime_applications),
	(athena_mime_get_open_with_applications_for_file),
	(athena_mime_get_applications_for_file),
	(athena_mime_has_any_applications_for_file):
	Don't show athena folder handler as application option
	for folders. Fixes #310382.

	Based on a patch from Christian Neumair  <chris@gnome-de.org>

2005-08-17  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-main.c: (main):
	Revert the GDK threading patch as it causes major
	freezage. Fixes #313588.

2005-08-12  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-properties-window.c: (create_image_widget),
	(create_basic_page): Don't make icon drop target for images if
	should_show_custom_icon_buttons is FALSE. Fixes #312967.

2005-08-12  Raffaele Sandrini  <rasa@gmx.ch>

	* src/athena-main.c:
	Initialize the GDK threading system. Fixes #312894.

2005-08-12  Kjartan Maraas  <kmaraas@gnome.org>

	Lots of cleanups. Closes bug #313094 and bug #149714

	* libathena-private/athena-directory-background.c:
	(athena_file_background_write_desktop_default_settings):
	ANSIfication
	* libathena-private/athena-file.c: Mark some variables
	static.
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_get_selection): Return NULL not
	FALSE.
	* libathena-private/athena-icon-factory.c:
	(athena_icon_factory_get_thumbnail_factory): ANSIfication
	* libathena-private/athena-metafile.c: Static variables
	* libathena-private/athena-program-choosing.c:
	(slowly_and_stupidly_obtain_timestamp): Sparse fix
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_get_background_widget): FALSE vs NULL
	* src/file-manager/fm-list-view.c: (filename_cell_data_func):
	Plug a leak. Bug #313094.
	* src/file-manager/fm-tree-model.c: (fm_tree_model_iter_get_file):
	NULL vs 0.
	* src/athena-bookmark-list.c:
	(athena_bookmark_list_get_file_path),
	(athena_bookmark_list_load_file): ANSIfication
	* src/athena-bookmarks-window.c: (bookmarks_delete_bookmark):
	ANSIfication
	* src/athena-main.c: (slowly_and_stupidly_obtain_timestamp):
	NULL vs 0.
	* src/athena-self-check-functions.c: (athena_run_self_checks):
	ANSIfication

2005-08-09  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== athena 2.11.91 ===

2005-08-09  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Require eel 2.11.91.

	* NEWS:
	Update for release

2005-08-09  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file.c: (file_is_desktop),
	(athena_file_can_rename):
        Don't allow renaming of the desktop folder. Closes #125637.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-08  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-property-browser.c:
	(athena_property_browser_class_init),
	(athena_property_browser_drag_begin), (element_clicked_callback):
	Fix emblem drag icon in "Emblems & Background" dialog. (#311381)

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-08-08  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-operations.c
	(athena_file_operations_copy_move):
	Allow moving files within the burn location. Fixes #312085.

	Patch from William Jon McCann <mccann@jhu.edu>

2005-08-05  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-bookmarks-window.c: (create_bookmarks_window),
	(open_selected_bookmark): Open the appropriate kind of window when
	jumping to bookmark. Fixes #312160.

	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-08-05  Christian Neumair  <chris@gnome-de.org>

	* src/athena-property-browser.c: Adapt to eel wrap table changes.
	Fixes #308996.

2005-08-05  Christian Neumair  <chris@gnome-de.org>

	* src/athena-window.c: (athena_window_class_init):
	* src/athena-window.h:
	Add "reload" and "prompt-for-location" signals. Bind F5 to "reload"
	and Alt-d to "prompt-for-location". Fixes #305252, #312353.

2005-08-04  Sunil Mohan Adapa  <sunil@atc.tcs.co.in>

	* configure.in: Added "te" to ALL_LINGUAS.

2005-08-03  Joe Shaw  <joeshaw@novell.com>

	* libathena-private/athena-metafile.c
	(set_file_node_timestamp): Added, sets a timestamp property on a
	file node so that metadata changes can be tracked per file, rather
	than per directory.
	(set_metadata_string_in_metafile, set_metadata_list_in_metafile,
	copy_file_metadata): Set the timestamp on the node.

2005-08-03  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-list-view.c: (handle_typeahead): Be smarter
	about GtkTreeView-bound expand/collapse characters. Thanks to Wouter
	Bolsterlee <uws+gnome@xs4all.nl>. Fixes #312046.

	* src/athena-location-bar.c: (real_cancel),
	(athena_location_bar_class_init),
	(athena_location_bar_set_location)
	* src/athena-navigation-bar.c: (athena_navigation_bar_class_init):
	* src/athena-navigation-bar.h:
	* src/athena-navigation-window.c: (navigation_bar_cancel_callback),
	(navigation_bar_location_changed_callback): Hide temporary bars when
	pressing the escape key. Fixes #311652.

2005-08-03  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-sidebar-title.c: (athena_sidebar_title_init):
	Initialize best_icon_size when constructing sidebar.
	Fixes a critical librsvg warning.

	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-08-02  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-customization-data.c:
	(format_name_for_display):
	* src/athena-property-browser.c: (add_reset_property):
	Use "Reset" as reset emblem label. Fixes #311380.

2005-08-01  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (activate_check_mime_types):
	Use actual/guessed MIME type relation instead of relying on their
	default application information. Partially fixes #309862.

2005-07-28  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_new):
	Set type hint to GDK_WINDOW_TYPE_HINT_NORMAL so that progress dialog
	appears in tasklist and is minimizable. Fixes #310676.

2005-07-28  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-dnd.c:
	(athena_drag_default_drop_action_for_icons):
	Default to move action for locations on other file systems if they
	should be moved to their parent folder. Fixes #61269.

2005-07-26  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-pathbar.c: (get_display_name_for_folder):
	Use the display name of the file if the uri uses a method
	unknown to gnome-vfs (trash:). Fixes #310274.

2005-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Post release version bump.

=== athena 2.11.90 ===

2005-07-25  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Require eel 2.11.90 and bump version.

	* NEWS:
	Update for release

2005-07-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	Don't use trash icon for location button delete action.
	Fixes #310414.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-23  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-desktop-window.c: (real_get_icon_name),
	(athena_desktop_window_class_init):
	* src/athena-navigation-window.c: (real_get_icon_name),
	(athena_navigation_window_class_init):
	* src/athena-spatial-window.c: (real_get_icon_name),
	(athena_spatial_window_class_init):
	* src/athena-window.c: (athena_window_update_icon):
	* src/athena-window.h:
	Use file-manager icon for browser windows. Fixes bug #166516.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-19  Mark McLoughlin  <mark@skynet.ie>

	* src/file-manager/fm-icon-view.c:
	(play_file), (preview_audio): track the pid of the currently
	running sound process using a static variable and kill it
	before starting any new process.
	(can_play_sound): copy from athena-sound.c

	* src/athena-application.c: (finish_startup): don't call
	athena_sound_init()

	* libathena-private/athena-sound.[ch]: remove old code
	to track the currently runing sound process using a GConf
	key.

	* libathena-private/Makefile.am: remove athena-sound.[ch]

2005-07-19  Mark McLoughlin  <mark@skynet.ie>

	* libathena-private/athena-global-preferences.c:
	(athena_global_preferences_init): remove code to import
	some preferences which were deprecated in GNOME 2.2.

2005-07-15  Vincent Noel  <vnoel@cox.net>

	* src/athena-information-panel.c: (make_button_box),
	(add_command_buttons):
	* src/athena-sidebar-title.c: (sidebar_title_create_title_label),
	(sidebar_title_create_more_info_label): Ellipsize everything in
	the information side pane, and make labels selectable. Fixes
	#310386, #80429 and #43858.

2005-07-14  Elijah Newren  <newren@gmail.com>

	* configure.in: Bump required startup-notification version up to
	0.8 (should have been done back in February with the updated
	startup-notification stuff, but better late than never)

2005-07-14  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Remove underlines from all lines in single click mode.
	Add hover underline and cursor. (#105521)
	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-13  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-desktop-link-monitor.c:
	(volume_delete_dialog): Refer to the volume context menu as "popup
	menu", and not as "right-click menu". Fixes #308248.

2005-07-13  Christian Neumair  <chris@gnome-de.org>

	* src/athena-navigation-window.c: (bookmark_list_get_uri_index,
	path_bar_location_changed_callback): Try to reload visited locations
	from history before doing a full location change. Fixes #310068.

	* src/athena-sidebar-title.c: (athena_sidebar_title_init): Track
	SHOW_DIRECTORY_ITEM_COUNTS preference and update label on change.
	Fixes #92862.

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window.c:
	* src/athena-spatial-window.c:
	* src/athena-window.c:
	Pack main table with GTK_SHRINK (#16057)

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file):
	Don't scroll to end of column on rename (#309964).

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.c:
	Files with name "~" are not backups. (#170607)
	Patch from Christian Neumair <chris@gnome-de.org>

2005-07-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-dnd.c:
	Set dnd icon in drag_begin (#307943)
	patch from Matthias Clasen

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.11.4 ===

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.11.4

	* NEWS:
	Update for release

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/athena-image-properties-page.c: (load_finished):
	list width/height separately (#159851)

	Patch from Christian Neumair <chris@gnome-de.org>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/athena-spatial-window.[ch]:
	* src/athena-window-private.h:
	* src/athena-window.c:
	Show busy cursor in browser mode too. (#97887)

	Patch from Christian Neumair <chris@gnome-de.org>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	* athena.desktop.in:
	* src/file-manager/fm-tree-view.c:
	* src/athena-places-sidebar.c:
	filesystem -> file system in strings

	Sebastien Bacher <seb128@debian.org>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-dnd.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/athena-emblem-sidebar.c:
	Fix up some strings for the translators. (#309879)
	Patch from Christian Neumair <chris@gnome-de.org>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-desktop-link-monitor.c:
	Handle volumes_visible changing from true to true.

	Patch from Benjamin Berg <benjamin@sipsolutions.net>

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	don't activate selection on expand in single click mode (#309389)

	Patch from chris@gnome-de.org

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* src/athena-places-sidebar.c:
	Remove gtk_range_get_adjustment assertion warnings.

2005-07-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-global-preferences.[ch]:
	* src/athena-actions.h:
	* src/athena-navigation-window-menus.c:
	* src/athena-navigation-window-ui.xml:
	* src/athena-navigation-window.c:
	Add toggle to hide/show main toolbar.

        Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>

2005-07-10  Christian Neumair  <chris@gnome-de.org>

	* src/athena-property-browser.c: (add_color_to_browser): Don't allow
	to add a color if another equally-named one already exists. Fixes
	#44867.

	Patch from Daniel Godas <siro.san@gmail.com>.

2005-07-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-pathbar.c:
	* src/athena-places-sidebar.c: (update_places):
	Use the same icon for filesystem as the gtk file chooser.
	Fixes #309825.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-places-sidebar.c: (athena_places_sidebar_init):
	Remove extra ScrolledWindow container. Fixes #309832.

2005-07-09  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window-manage-views.c: (athena_window_reload):
	Preserve the selection when refreshing the view. Fixes #48383.

	Patch from Fabio Bonelli <fabiobonelli@libero.it>

2005-07-08  Alexander Larsson  <alexl@redhat.com>

        Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>

	* src/Makefile.am:
	* src/athena-pathbar.[ch]:
	New pathbar widget. Based on code from gtk.

	* src/athena-navigation-window.[ch]:
	* src/athena-window-manage-views.c:
	* src/athena-window-private.h:
	Use pathbar in browser window.

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.[ch]:
	Add always_use_location_entry prefs.

	* src/athena-navigation-window-menus.c:
	Whitespace fixup.

2005-07-07  Joe Shaw  <joeshaw@novell.com>

	* configure.in: Bump required gnome-vfs version up to
	2.11.1

2005-07-06  Christian Neumair  <chris@gnome-de.org>

	* src/athena-window.c: (add_view_as_menu_item):
	Connect accelerators with "View as" menu items. Fixes #139908.

	* libathena-private/athena-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	When operating on remote locations, also display hostname in copy/move
	progress dialog.

2005-07-06  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-tree-view.c: (show_iter_for_file):
	Free the tree paths.
	* src/athena-notes-viewer.c: (get_property_pages): Close
	a tiny leak. (1 byte :-)
	* src/athena-property-browser.c: (emblem_dialog_clicked),
	(make_properties_from_directories): Unref pixbufs.
	* src/athena-spatial-window.c:
	(athena_spatial_window_set_location_button): Free icon name
	Closes bug #307291 and bug #308540.

2005-07-06  Danilo Šegan  <danilo@gnome.org>

	* src/file-manager/athena-directory-view-ui.xml: Add space
	before 'action="Rename"'.

2005-07-06  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_get_selection):
	* src/file-manager/fm-directory-view.c: (delete_selected_files):
	Correctly sort files before operating on them. Fixes #308884.

	* libathena-private/athena-dnd.c: (athena_drag_init):
	* libathena-private/athena-dnd.h:
	* libathena-private/athena-icon-dnd.c:
	(get_data_on_first_target_we_support), (athena_icon_dnd_init):
	* libathena-private/athena-tree-view-drag-dest.c:
	(athena_tree_view_drag_dest_new):
	* src/athena-spatial-window.c:
	(athena_spatial_window_instance_init):
	* src/file-manager/fm-list-model.c:
	(fm_list_model_multi_drag_data_get):
	Use GTK+ helpers for text D'n'D.

	* src/athena-shell-ui.xml:
	* src/athena-window-menus.c:
	Register control-+/- keys on keypad for zooming. Fixes #309018.

	* libathena-private/athena-file-operations.c:
	(new_file_transfer_callback):
	Fix template duplicate numbering. Fixes #307252.

2005-07-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-private.h:
	Add normal_alpha style property that is used when
	frame_text is on.

	Patch from Benjamin Berg <benjamin@sipsolutions.net>

2005-07-05  Joe Shaw  <joeshaw@novell.com>

	* athena-folder-handler.desktop.in: Add x-directory/normal
	and inode/directory to the list of mime types this desktop file
	can handle.

2005-07-05  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-dnd.h:
	Change ATHENA_ICON_DND_TEXT_TYPE to UTF-8 string.

	* libathena-private/athena-file-operations.[ch]:
	* libathena-private/athena-icon-container.[ch]:
	* libathena-private/athena-icon-dnd.c:
	* libathena-private/athena-marshal.list:
	* libathena-private/athena-tree-view-drag-dest.[ch]:
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-tree-view.c:
	Enable dropping of text, which will create a new file containing the
	dropped text. Fix drop handle marshallers.

2005-07-02  Christian Kellner  <gicmo@gnome.org>

	* src/athena-location-entry.c:
	Replace eel_make_uri_from_input_with_trailing_ws with
	the gnome-vfs one.
	Fixes bug #165755.

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.11.3 ===

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	Fix test

	* NEWS:
	Update for release

	* configure.in:
	Require eel 2.11.3

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-window-info.[ch]:
	* src/athena-window.c:
	Add athena_window_info_get_bookmark_list

	* src/Makefile.am:
	* src/athena-application.c:
	* src/athena-places-sidebar.[ch]:
	Add new places sidebar.

	Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>

	* src/file-manager/fm-tree-view.c:
	Fix runtime warnings.

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	Add icon for empty file in create menu.

	Patch from Christian Neumair  <chris@gnome-de.org>

2005-07-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Better strings for browser tooltips.
	Patch from Luca Ferretti <elle.uca@libero.it>

2005-06-03  Dinoop Thomas <dinoop.thomas@wipro.com>

	* libathena-private/athena-file-operations.c:
	(parse_previous_duplicate_name): Use strchr instead of strrchr to parse the
	base name from the file name. (Fixes #306341).

2005-06-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-sidebar.[ch]:
	Add get_tab_tooltop method.

	* src/athena-navigation-window.c:
	* src/athena-side-pane.[ch]:
	Use get_tab_tooltip.

	* src/athena-emblem-sidebar.c:
	* src/athena-history-sidebar.c:
	* src/athena-information-panel.c:
	* src/athena-notes-viewer.c:
	Implement get_tab_toolkit.

	Fixes bug #100268, patch from Michael Terry <mike@mterry.name>

2005-06-23  Christian Neumair  <chris@gnome-de.org>

	* src/athena-notes-viewer.c:
	(athena_notes_viewer_set_parent_window):
	Adapt to recent athena clipboard API changes.

2005-06-23  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-clipboard.c:
	(editable_connect_callbacks), (editable_disconnect_callbacks),
	(text_buffer_update_sensitivity), (text_buffer_delete_range),
	(text_buffer_mark_set), (text_view_connect_callbacks),
	(text_view_disconnect_callbacks), (merge_in_clipboard_menu_items),
	(initialize_clipboard_component_with_callback_data),
	(athena_clipboard_real_set_up),
	(athena_clipboard_set_up_text_view):
	* libathena-private/athena-clipboard.h:
	Properly set text view paste action sensitivity on clipboard changes.
	Fixes #306127.

2005-06-23  Alexander Larsson  <alexl@redhat.com>

	* src/athena-bookmark-list.c:
	Fix handling of notification of .gtk-bookmark file changes.

	* src/Makefile.am:
	* src/athena-window-bookmarks.[ch]:
	* src/athena-application.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-navigation-window.[ch]:
	* src/athena-spatial-window-ui.xml:
	* src/athena-spatial-window.c:
	* src/athena-window-menus.c:
	* src/athena-window-private.h:
	* src/athena-window.[ch]:
	Move most bookmark stuff to athena-window-bookmarks and
	put bookmarks in spatial windows too.

2005-06-23  Alexander Larsson  <alexl@redhat.com>

        Patch from Jamie McCracken <jamiemcc@blueyonder.co.uk>

	* src/athena-bookmark-list.[ch]:
	Share bookmarks with gtk+.

	* libathena-private/athena-file-utilities.[ch]:
	* src/athena-window.c: (real_get_title):
	Move compute_default_title to athena_compute_title_for_uri.

	* libathena-private/athena-bookmark.[ch]:
	* src/athena-bookmarks-window.c:
	Add has_custom_name boolean to AthenaBookmark

	* src/Makefile.am:
	* src/athena-bookmark-parsing.[ch]:
	* src/athena-navigation-window-menus.c:
	Remove no longer needed files athena-bookmark-parsing.[ch].

2005-06-20  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-directory-view.c: (reset_open_with_menu),
	(real_update_menus_volumes): Plug a couple leaks. Closes
	bug #307267

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window-menus.c:
	* src/athena-window-menus.c:
	* src/athena-window-private.h:
	Make bookmark menu item action names unique. (#161859)

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_did_not_drag):
	Fix ctrl-unselect in single click mode (#145331)

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	Better font sizes for zooming. (#160080)

2005-06-20  Anders Carlsson  <andersca@imendio.com>

	* src/file-manager/fm-directory-view.c (process_old_files):
	Plug leak by freeing the sorted list instead.

2005-06-20  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (paste_clipboard_data):
	* src/file-manager/fm-tree-view.c: (paste_clipboard_data):
	Fix uninitialized variable warning.

2005-06-20  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-directory-async.c:
	(start_or_stop_io), (file_needs_high_priority_work_done),
	(file_needs_low_priority_work_done):
	Make mime sniffing a high priority job. Prevents activation
	from getting blocked by deep count I/O. (#145560)

2005-06-19  Anders Carlsson  <andersca@imendio.com>

	* src/athena-throbber.c (athena_throbber_finalize):
	Free throbber->details after we're done using it.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c:
	Small delay before turning Loading... into (Empty) to
	avoid flicker.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_remove):
	Fix iter stamp handling.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c: (button_press_callback):
	Allow selection of the dummy node. Otherwise things
	got all strange: You could still select it using ranges, and
	if you double clicked on it you activated the old selection.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_remove):
	On remove, add dummy node before removing file so the
	row isn't collapsed.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_get_value),
	(fm_list_model_unload_subdirectory),
	(fm_list_model_subdirectory_done_loading):
	Keep track of done_loading in parent instead of in dummy node.
	That way it doesn't get lost when the dummy node is recreated.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c (fm_list_model_add_file):
	Handle moves between open subdirectories. We handle
	this in file adding when the file already exists in
	the tree, but in another place. This is sort of a hack,
	but is required due to how the list view merges the initial
	change being sent to the original directory and the add to the
	new directory.

2005-06-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_copy_move):
	Handle duplication of files in two subdirectories at
	the same time.

2005-06-16  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy):
	Remove subdirectories when destroying the view.

2005-06-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_get_display_name_collation_key):
	Conditionally use g_utf8_collate_key_for_filename for glib >= 2.7.0

2005-06-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-tree-view-drag-dest.c:
	Slightly slower auto hover expand.

	* src/file-manager/fm-directory-view.c:
	Make add/remove_subdirectory more straightforward.
	Now remove just removes the AthenaDirectory passed in, and
	you're not allowed to add multiple times or remove non-added.

	* src/file-manager/fm-list-model.[ch]:
	Actually track the AthenaDirectories that are added to the
	FMDirectoryView so we can easily remove them when the files are
	removed. This was causing problem before where directories for
	removed files weren't removed.

	Emits the subdirectory_unloaded signal when subdirectories go away.

	Add support for unloading subdirectories.

	* src/file-manager/fm-list-view.c:
	Unload subdirectories in timeout on collapse.
	remove subdirectories when they get unloaded.

2005-06-16  Anders Carlsson  <andersca@imendio.com>

	* src/athena-navigation-window-menus.c
	(append_dynamic_bookmarks): Unref the action group here too.

2005-06-16  Anders Carlsson  <andersca@imendio.com>

	* src/athena-navigation-window-menus.c: (refresh_go_menu):
	Unref the action group after inserting it. This makes
	a AthenaFile memory leak go away.

2005-06-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c
	add fm_directory_view_get_selection_for_file_transfer and
	use it for all file transfers

	* src/file-manager/fm-list-view.c:
	Implement fm_directory_view_get_selection_for_file_transfer by
	filtering out all files there a parent is also in the selection.
	Do the same for the dnd source list.

	* src/file-manager/fm-list-model.c:
	Allow deletion of dummy node so that clearing the model
	doesn't loop forever.

2005-06-15  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (new_folder_done),
	(new_folder_data_new), (fm_directory_view_new_folder),
	(fm_directory_view_new_file):
	Don't try to setup renaming if the view was already destroyed.
	Fixes a crash when closing a window while creating files/folders.

2005-06-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-dnd.c:
	No dnd shadow on the desktop.
	Redraw less to get rid of the dnd shadow.

	Patch from Matthias Clasen (#307803)

2005-06-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-tree-view-drag-dest.c:
	Add hover expansion

	* src/file-manager/fm-directory-view.[ch]:
	Add support for adding/removing subdirectories.

	* src/file-manager/fm-list-model.[ch]:
	Add support for subdirectories making this a tree view.

	* src/file-manager/fm-list-view.c:
	Turn listview into a treeview.

	Patch from Jürg Billeter <j@bitron.ch>

2005-06-15  Alexander Larsson  <alexl@redhat.com>

	* src/athena-spatial-window.c:
	Add icons for path menu.
	Patch from Vincent Noel <vincent.noel@gmail.com>

2005-06-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_uri_list_drop):
	Check for n_uris instead of real_uri_list. Looks neater.

2005-06-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_uri_list_drop):
	Don't try to start a file operation if there are no real uris
	left after sanitizing the list. Fixes #306246.

2005-06-11  Kjartan Maraas  <kmaraas@gnome.org>

	* libathena-private/athena-emblem-utils.c:
	(athena_emblem_install_custom_emblem): Free the path.
	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_new),
	(athena_file_operations_progress_new_file): Free markup strings.
	Closes bug #307138.

2005-06-10  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_confirm_deletion): Mark two strings for translation.

2005-06-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (convert_lines_to_str_list):
	* src/file-manager/fm-tree-view.c: (convert_lines_to_str_list):
	Always initialize cut.

	* configure.in:
	Add --Wno-pointer-sign

	Fix gcc4 compilation (#303491/#307038).
	Based on patches from James M. Cape <jcape@ignore-your.tv>
	and Kjartan Maraas <kmaraas@gnome.org>

2005-06-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.11.2 ===

2005-06-08  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require new eel.

	* NEWS:
	Update for release.

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-tree-model.c: (fm_tree_model_get_value):
	Back out the "(Empty)" vs. "(No subfolders)" change. The string
	is too wide for the tree and gets even wider in some locales.

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-column-chooser.c: (add_buttons):
	Fix conflicting mnemonics in the column chooser (#167475).

	Patch from Michael Terry <mike@mterry.name>

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-tree-model.c: (fm_tree_model_get_value):
	Use "(No subfolders)" instead of misleading "(Empty)" label
	if files are not to be shown in the tree. Fixes #85141.

	Patch from Christian Neumair <chris@gnome-de.org>

2005-06-06  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-icon-container.c:
	(select_one_unselect_others):
	Reveal icon when selecting it. Fixes #121111.

	Based on a patch from Christian Neumair <chris@gnome-de.org>

2005-06-04  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-clipboard.c:
	(athena_clipboard_real_set_up):
	Don't setup clipboard twice for the same editing widget.

2005-06-04  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window-manage-views.c: (load_new_location),
	(update_for_new_location):
	Set the displayed location when the location is really
	changed, not when we set out to do it. Fixes the
	"bookmark uri mismatch" warning.

2005-06-04  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	* src/athena-shell-ui.xml:
	* src/athena-window-menus.c:
	Fix critical warnings from the new accelerators
	by adding dummy labels.

2005-06-03  Christian Neumair  <chris@gnome-de.org>

	* src/athena-shell-ui.xml: Fix "Zoom In Accel" action.

2005-06-03  Christian Neumair  <chris@gnome-de.org>

	* libathena-extension/athena-column.c:
	(athena_column_class_init):
	* libathena-extension/athena-menu-item.c:
	(athena_menu_item_class_init):
	* libathena-extension/athena-property-page.c:
	(athena_property_page_class_init):
	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_class_init):
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_class_init):
	* src/athena-window.c: (athena_window_class_init):
	Don't mark object property names/descriptions for translation. Fixes
	#135281.

2005-06-02  Sebastien Bacher  <seb128@debian.org>

	* libathena-private/athena-emblem-utils.c:
	(athena_emblem_install_custom_emblem),
	(athena_emblem_can_remove_emblem),
	(athena_emblem_can_rename_emblem),
	(athena_emblem_remove_emblem), (athena_emblem_rename_emblem):
	use "hicolor" instead of "gnome" for emblems (Closes: #164629).

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (real_action_rename):
	Always pre-select the whole name of a directory when renaming it.
	Fixes #306217.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file.c: (compare_by_emblems),
	(get_automatic_emblems_as_integer):
	* libathena-private/athena-file-private.h:
	Only take user-added emblems ("keywords") into account when sorting by
	emblems. Fixes #166376.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_scroll_event):
	Change scroll zoom modifier to control. Fixes #79352.

	* src/athena-shell-ui.xml:
	* src/athena-window-menus.c:
	Bind control-= to zoom-in. Fixes #306225.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-clipboard.c:
	* libathena-private/athena-icon-dnd.c:
	* libathena-private/athena-tree-view-drag-dest.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-ditem-page.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-model.c:
	* src/file-manager/fm-list-model.h:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/athena-emblem-sidebar.c
	* src/athena-file-management-properties.c:
	* src/athena-information-panel.c:
	* src/athena-location-bar.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-spatial-window.c:
	* src/athena-zoom-controls.c:
	Also declare GtkToggleActionEntry, GtkRadioActionEntry and
	GtkTargetEntry as well as some char and int arrays const.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-spatial-window.c:
	* src/athena-window-menus.c:
	Declare GtkActionEntry arrays const. Thanks to Paolo Borelli for
	pointing this out.

2005-06-02  Rodrigo Moya <rodrigo@novell.com>

	* libathena-extension/libathena-extension.pc.in: added
	extensiondir variable so that extensions can find out via pkg-config
	the dir to install to.

2005-06-02  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-container.h:
	(process_pending_icon_to_rename),
	(athena_icon_container_start_renaming_selected_item):
	* src/file-manager/fm-directory-view.c: (start_renaming_file),
	(real_action_rename), (action_rename_callback),
	(action_rename_select_all_callback):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c: (fm_icon_view_start_renaming_file):
	* src/file-manager/fm-list-view.c: (fm_list_view_start_renaming_file):
	* src/file-manager/athena-directory-view-ui.xml:
	Bind shift-f2 to rename whole file. Fixes #131467.

2005-05-27  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Don't display "Properties" background context menu item for Desktop.

2005-05-27  Christian Neumair  <chris@gnome-de.org>

	* src/athena-location-dialog.c: (athena_location_dialog_new):
	Only set dialog transient if a parent window was specified.
	Fixes #142814.

2005-05-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_url_drop):
	Better handling of default action for mozilla dnd drops.

	Patch from Dave Ahlswede

2005-05-27  Christian Persch  <chpe@cvs.gnome.org>

	* src/athena-navigation-action.c: (set_tooltip_callback),
	(connect_proxy), (athena_navigation_action_finalize),
	(athena_navigation_action_set_property),
	(athena_navigation_action_get_property),
	(athena_navigation_action_class_init),
	(athena_navigation_action_init):
	* src/athena-navigation-window-menus.c:
	(athena_navigation_window_initialize_actions):
	Add specific tooltips to the drop-down arrow of Back/Forward
	toolbar items. Fixes bug #86569.

2005-05-18  Dinoop Thomas  <dinoop.thomas@wipro.com>

	* src/athena-connect-server-dialog.c:
	(connect_to_server), (athena_connect_server_dialog_finalize),
	(athena_connect_server_dialog_init), (setup_for_type):
	Added a domain field to enter domain name for Windows share in
	Connect to server dialog.
	Fixes bug #304760.

2005-05-26  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-clipboard.c:
	* src/file-manager/fm-directory-view.c:
	(copy_or_cut_files), (real_update_menus):
	* src/file-manager/fm-tree-view.c:
	(copy_or_cut_files), (create_popup_menu):
	Remove qualifiers from Cut/Copy/Paste, except for "Paste Into
	Folders". Fixes #95112.

2005-05-26  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Fix empty trash accelerator. Fixes #173059.

	* libathena-private/athena-clipboard.c: (cut_callback),
	(copy_callback), (paste_callback), (editable_select_all_callback),
	(text_view_select_all_callback), (action_cut_callback),
	(action_copy_callback), (action_paste_callback),
	(action_select_all_callback), (merge_in_clipboard_menu_items),
	(selection_changed_callback), (athena_clipboard_real_set_up),
	(athena_clipboard_set_up_editable),
	(athena_clipboard_set_up_text_view):
	* libathena-private/athena-clipboard.h:
	(athena_clipboard_set_up_text_view):
	* src/athena-notes-viewer.c:
	Add athena_clipboard_set_up_text_view, setup clipboard for
	notes text view.

	* src/athena-window-menus.c: (action_about_athena_callback):
	Fix two possible memory leaks. Kudos to Brian Pepple for tracking this
	issue down and providing a patch. Fixes #305551.

2005-05-25  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_scroll_event),
	(fm_directory_view_class_init):
	Bind shift+scroll to zoom in/out. Fixes #79352.

2005-05-23  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_get_string_attribute):
	Change sort order for size, count and time.
	See bug #88585

2005-05-22  Martin Wehner  <martin.wehner@gmail.com>

	* configure.in:
	Nicer formatted PKG_CHECK_MODULES() output. (#148355)

	Patch from Tomasz Kloczko <kloczek@pld.org.pl>

2005-05-22  Martin Wehner  <martin.wehner@gmail.com>

	* components/*
	* help/*
	* icons/*/*
	* libathena/*
	* libathena-adapter/*
	* omf-install/*
	* user-guide/*
	Remove old cruft, mostly .cvsignore files.

	* autogen.sh:
	Look for libathena-private instead of libathena.

2005-05-21  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-factory.c:
	* libathena-private/athena-icon-factory.h:
	(get_smaller_icon_size), (get_larger_icon_size),
	(athena_icon_factory_get_smaller_icon_size),
	(athena_icon_factory_get_larger_icon_size):
	Make get_(larger|smaller)_icon_size public.

	* src/athena-sidebar-title.c:
	(athena_sidebar_title_size_allocate),
	(get_best_icon_size):
	Use the best-fitting folder icon for the sidebar
	instead of hardcoding ATHENA_ICON_SIZE_LARGE.
	Fixes #48190.

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.11.1 ===

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* icons/*/*:
	Remove old junk.

	* configure.in:
	Require eel 2.11.1
	Remove icons/*/Makefile

	* NEWS:
	Update for 2.11.1

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-view.[ch]:
	Add athena_view_pop_up_location_context_menu

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-location-bar.c:
	* src/athena-spatial-window.c:
	Add location context menu to location button/label.

	Patch from Christian Neumair

2005-05-17  Christian Neumair  <chris@gnome-de.org>

	* src/athena-spatial-window.c:
	(real_set_allow_up), (athena_spatial_window_class_init)
	* src/athena-window.c:
	* src/athena-window.h:
	(athena_window_allow_up), (real_set_allow_up),
	(athena_window_class_init):
	Add set_allow_up method to AthenaWindowClass,
	make "Close All Parents" in spatial windows insensitive
	if there are no parent folders.

2005-05-17  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file-operations.c:
	(handle_transfer_vfs_error):
	Offer "Skip", "Cancel", "Retry" in XFer Error prompt
	if more than one file is transferred. Otherwise, just
	offer "Cancel" and "Retry".

2005-05-17  Alexander Larsson  <alexl@redhat.com>

	* athena-folder-handler.desktop.in (Exec):
	Use --no-desktop for default folder handler

2005-05-16  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(action_self_properties_callback), (real_update_menus):
	* src/file-manager/athena-directory-view-ui.xml:
	Add "Properties" item to background context menu which displays
	the properties of the currently displayed folder.

2005-05-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-bookmark.c:
	(bookmark_file_changed_callback):
	Don't loop when a bookmarked file is removed

	* src/file-manager/fm-directory-view.c: (process_new_files):
	Don't call get_file_info for files no longer in the directory
	(was caused by the ready_to_load call).

	This fixes #165530 and likely #170761

2005-05-12  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-clipboard.c:
	(merge_in_clipboard_menu_items), (merge_out_clipboard_menu_items):
	Don't merge UI twice. Fixes #301854.

2005-05-12  Christian Neumair  <chris@gnome-de.org>

	* src/athena-location-bar.c:
	(athena_location_bar_init):
	Make "Location:" label GDK_ACTION_COPY drag source.
	Fixes #115942.

2005-05-12  David Zeuthen  <david@fubar.dk>

	* libathena-private/apps_athena_preferences.schemas.in:
	Change comment for translator note of default desktop font to
	say that Sans shouldn't never be changed. Fixes bug #138731.

2005-05-11  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file-utilities.c:
	(athena_get_vfs_method_display_name):
	* data/browser.xml:
	* src/file-manager/fm-directory-view.c:
	Add translator comments. Fixes #145304, #145305, #145307.
	Change "Show Hidden Files" tooltip to infinitive
	construction. Fixes #145306.

2005-05-11  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-directory-async.c:
	(should_look_for_dot_directory_file), (make_dot_directory_uri),
	(link_info_start), (lacks_link_info):
	Kill dotfile-related code. ".directory" supporting schemas have
	gone. Fixes #142343.

2005-05-10  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	Remove obsolete window_always_new option from schema.

	Patch from Michael Terry <mike@mterry.name>

2005-05-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Fix a string conflict between the c-format plural string and
	non-c-format strings. Fixes bug #167344.

	Patch from Changwoo Ryu <cwryu@debian.org>

2005-05-08  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-thumbnails.c:
	(thumbnail_thread_start):
	Don't try to thumbnail files which have been modified in the
	last few seconds to avoid constantly re-thumbnailing them.
	Current cool-off period is three seconds. Fixes bug #107418.

2005-05-03  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.[ch]:
	(display_pending_files), (fm_directory_view_freeze_updates),
	(fm_directory_view_unfreeze_updates), (queue_pending_files):
	Allow freeze of update processing inside a view.

	* src/file-manager/fm-list-view.c:
	(cell_renderer_editing_canceled), (cell_renderer_edited),
	(create_and_set_up_tree_view), (fm_list_view_start_renaming_file):
	Freeze and unfreeze the list view when renaming.

        Workaround for bug #87701: Updates to the list view are put on
	hold during rename to prevent losing editing focus. If too many
	changes are queued while being frozen, further changes are thrown
	away and the view is marked for reload.

2005-05-02  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-window-menus.c:
	Add Ctrl-0 keyboard shortcut to View->Normal Size as
	recommended by the HIG.

	Patch from Olav Vitters <olav@bkor.dhs.org>

2005-05-02  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-icon-container.c:
	(keyboard_space): Prevent athena from crashing on press of
	Ctrl+Space in an empty directory. Fixes bug #302018.

	Patch from Vinay M R  <vinay.mandyakoppal@wipro.com>

2005-05-02  Frederic Crozat  <fcrozat@mandriva.com>

	* libathena-private/athena-program-choosing.c:
	(athena_launch_desktop_file):
	* src/athena-application.c:
	(athena_application_present_spatial_window_with_selection),
	(athena_application_create_navigation_window):
	fix build when startup notification isn't installed.

2005-05-02  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/athena-desktop-icon-view-ui.xml:
	Remove the ui too.

2005-04-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c:
	Remove "Open New Terminal" from desktop menu.
	Patch from Luca Ferretti <elle.uca@libero.it>

	If you really need this, install the athena-open-terminal
	extension. It does this even better than the removed code.
	Also, in newer Metacity there is a a way to set a keybinding
	for "new terminal".

2005-04-19  Kjartan Maraas  <kmaraas@gnome.org>

	* src/athena-main.c: (main): Merge fix for leak
	Bug #172234.

2005-04-19  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-view-factory.h:
	* src/athena-navigation-window.c:
	* src/athena-window-manage-views.c:
	* src/athena-window-manage-views.h:
	* src/athena-window.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Improve AthenaViewInfo view factory labels marked for translation.

2005-04-19  Kjartan Maraas  <kmaraas@gnome.org>

	* libathena-private/athena-directory-async.c:
	(read_dot_hidden_file): Plug leaks here too. There
	were three actually :-)

2005-04-18  Dennis Cranston  <dennis_cranston at yahoo com>

	* src/athena-connect-server-dialog-main.c: (main)
	Set window icon.

2005-04-17  Christian Neumair  <chris@gnome-de.org>

	* src/athena-spatial-window.c:
	Add more drop targets to location button.

2005-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (rename_file):
	Remove delayed_rename timeout when registering a new one
	or destroying the view.

2005-04-11  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-view.c: (fm_list_view_remove_file):
	Free the stored selection path only when setting a new one.

2005-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(trash_or_delete_selected_files),
	(fm_directory_view_notify_selection_changed):
	Remember if the current selection was already removed
	and don't try to remove it again.

	* src/file-manager/fm-list-view.c: (fm_list_view_remove_file):
	Only set a new selection if the removal affects the current selection.

2005-04-10  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	(trash_or_delete_selected_files):
	Unset selection so the same file won't be deleted twice via a binding.

	* src/file-manager/fm-list-view.c: (fm_list_view_end_file_changes),
	(fm_list_view_remove_file), (fm_list_view_finalize),
	(fm_list_view_class_init):
	Store the new selection and set it after a batch of changes,
	not on every removal. Speeds up deleting from the list view
	by preventing a redraw for each removed file.

2005-04-05  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Use label instead of entry if not editable.
	(#149201)

	Patch from Michael Terry

2005-04-04  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-notes-viewer.c:
	Fix missing include.

2005-04-04  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file.c: (athena_file_matches_uri):
	Don't leak file_uri.

2005-04-04  Diego Gonzalez  <diego@pemas.net>

	* libathena-private/Makefile.am: remove athena-theme.[c-h]
	  from the build process.
	* libathena-private/athena-icon-factory.c:
	  (load_thumbnail_frame) remove the need to use the deprecated
	  athena themes.
	* libathena-private/athena-icon-canvas-item.c:
	  (draw_strech_handles), (it_test_stretch_handle):
	  remove the need to use the deprecated athena themes.
	* libathena-private/athena-thumbnails.c:
	* libathena-private/athena-icon-factory.c:
	  remove athena-theme.h include

	* src/athena-navigation-window.c:
	* src/athena-property-browser.c:
	* src/athena-notes-viewer.c:
	* src/athena-sidebar-title.c:
	* src/athena-window-manage-views.c:
	* src/athena-window-toolbars.c:
	* src/athena-zoom-control.c:
	  remove athena-theme.h include

	* src/athena-sidebar-title:
	 (athena_sidebar_title_select_text_color): remove use of
	 old theme stuff and adapt the shadow offset, made it equal to 1,
	 which is the default.
	 (athena_sidebar_title_theme_changed): remove, as there will be
	 no sidebar theme changes.
	 (athena_sidebar_title_init): remove the theme_changed callback, as
	 there will not be sidebar theme changes anymore.

	 * src/athena-notes-viewer.c:
	 (athena_notes_viewer_init): remove use of old theme stuff.

	* icons/Makefile.am: don't install old theme stuff.

2005-03-31  Steve Murphy  <murf@e-tools.com>

        * configure.in: Added "rw" to ALL_LINGUAS.

2005-03-31  Kjartan Maraas  <kmaraas@gnome.org>

	* libathena-private/athena-file-utilities.c:
	(athena_get_uri_shortname_for_display): Plug the leak.

2005-03-31  Martin Wehner  <martin.wehner@gmail.com>

	* icons/audio.svg:
	New svg icon from Corey Woodworth <CoreyWoodworth@gmail.com>

	* icons/audio.png:
	Remove old file.

	* icons/Makefile.am:
	Install new icon.

	* libathena-private/athena-icon-canvas-item.c:
	(real_map_pixbuf):
	Use svg instead of bitmap audio preview emblem.

	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-03-30  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-spatial-window.c: (get_dnd_icon_size),
	(location_button_drag_begin_callback), (get_data_binder),
	(location_button_drag_data_get_callback),
	(athena_spatial_window_instance_init):
	Allow drag and drop operations with location bar icon.

	Patch from Christian Neumair <chris@gnome-de.org>

2005-03-30  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_update),
	(athena_file_operations_progress_destroy),
	(athena_file_operations_progress_init),
	(time_remaining_callback), (athena_file_operations_progress_new),
	(athena_file_operations_progress_set_operation_string),
	(athena_file_operations_progress_new_file):
	* libathena-private/athena-file-operations.c:
	(progress_dialog_set_to_from_item_text):
	Change layout of the progress dialog to be more HIG compliant.

	Patch from Michiel Sikkes <michiel@eyesopened.nl>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	Add elipses to "Create Launcher" menu item. (#95113)

	Based on a patch from Christian Neumair <chris@gnome-de.org>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-desktop-link-monitor.c:
	(eject_for_type), (volume_delete_dialog),
	(athena_desktop_link_monitor_delete_link):
	Reference the proper context menu item in the volume
	delete dialog of network volumes. Fixes bug #152391.

	Patch from Dennis Cranston <dennis_cranston@yahoo.com>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c: (real_merge_menus):
	Remove hard coded script directory path from tooltip message.
	Fixes bug #161905.

	Patch from Michael Terry <mike@mterry.name>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* src/athena-connect-server-dialog.c: (connect_to_server):
	* src/athena-location-bar.c:
	(athena_location_bar_get_location),
	(athena_location_bar_update_label):
	* src/athena-location-dialog.c: (open_current_location):
	Replace eel_make_uri_from_input with the gnome-vfs equivalent.
	Closes bug #165743.

	Patch from Christian Kellner <gicmo@gnome.org>

2005-03-25  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-bookmark.c:
	(athena_bookmark_compare_with), (athena_bookmark_compare_uris),
	(bookmark_file_changed_callback):
	* libathena-private/athena-file.c:
	(athena_file_get_internal):
	* src/file-manager/fm-properties-window.c:
	(is_merged_trash_directory):
	* src/athena-application.c:
	(athena_application_present_spatial_window_with_selection):
	* src/athena-location-bar.c:
	(athena_location_bar_update_label):
	* src/athena-window-manage-views.c: (set_displayed_location),
	(check_bookmark_location_matches), (handle_go_elsewhere),
	(got_file_info_for_view_selection_callback):
	Use gnome_vfs_uris_match instead of eel_uris_match. (#155852)

	Patch from Paolo Borelli <pborelli@katamail.com>

2005-03-23  Fernando Herrera  <fherrera onirica com>

	* src/athena-connect-server-dialog-main.c: (main): call
	gnome_authentication_manager_init to use gnome-vfs auth
	callbacks.

2005-03-23  Alexander Larsson  <alexl@redhat.com>

	* src/athena-desktop-window.c:
	Remove unused code. We avoid flicker in other ways.

2005-03-22  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.11.1
	Gnome 2.10 versions are now on the gnome-2-10 branch.

2005-03-22  Alexander Larsson  <alexl@redhat.com>

	* src/athena-location-entry.c:
	Minor cleanup from Jaap Haitsma <jaap@haitsma.org>

2005-03-22  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-window-info.[ch]:
	Add athena_window_info_show_window call.

	* src/file-manager/fm-directory-view.c:
	* src/athena-window-manage-views.c:
	* src/athena-window.[ch]:
	Implement and call the new show_window call.
	This allows us to set up the EelBackground before
	showing the window, causing less flicker (#169347)

	Patch from Nickolay V. Shmyrev

2005-03-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.10.1 (for EelBackground changes)

	* libathena-private/athena-icon-dnd.c:
	* libathena-private/athena-directory-background.c:
	Use the background setting now in eel.
	Delay background setting slightly after gconf change to group
	together multiple changes. (#169347)

	Patch from Nickolay V. Shmyrev

2005-03-15  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require gtk 2.6.0

2005-03-12  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-directory-view.c:
	Re-add keybinding to "Show Hidden Files".
	Patch from Dave Ahlswede <mightyquinn@letterboxes.org>

2005-03-12  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Disable "Select Pattern" for empty folders. (#169817)
	Patch from Raj <ringuva@novell.com>

2005-03-10  Vincent Noel  <vnoel@cox.net>

	* src/athena-spatial-window.c:
	(location_button_clicked_callback),
	(athena_spatial_window_instance_init): Use GTK_ICON_SIZE_MENU
	for the location button icon instead of GTK_ICON_SIZE_BUTTON
	(#169669).

2005-03-10  Adi Attar  <aattar@cvs.gnome.org>

	* configure.in: Added "xh" to ALL_LINGUAS.

2005-03-07  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.10.0 ===

2005-03-07  Martin Wehner  <martin.wehner@gmail.com>

	* THANKS:
	Update for release

	* check-THANKS.pl:
	Extract names from ChangeLog bodies too. (#43452)
	Patch from Richard Hoelscher <rah@rahga.com>

2005-03-07  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.10.0

	* configure.in:
	Bump version to 2.10.0, require eel 2.10.0

2005-03-03  Elijah Newren  <newren@gmail.com>

	If launched without startup-notification, make an approximation to
	when the launch occurred so that focus-stealing-prevention will
	work better.

	* src/athena-main.c: (slowly_and_stupidly_obtain_timestamp): new
	function, (main): if no startup id provided, ping xserver for a
	timestamp and make a dummy startup_id with it.

	* src/athena-application.c: (end_startup_notification): don't
	set _NET_STARTUP_ID if given a fake startup_id, remove commented
	out warning that should now no longer be needed

2005-03-01  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.glade:
	Center dialog. Patch from Christian Neumair <chris@gnome-de.org>.

2005-03-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.9.92 ===

2005-03-01  Alexander Larsson  <alexl@redhat.com>

	* data/applications.desktop.in:
	* data/favorites.desktop.in:
	Remove old files.

	* docs/Makefile.am (EXTRA_DIST):
	Remove athena-context-menus.txt from makefile

	* NEWS:
	Update for release

2005-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* src/file-manager/fm-list-view.c: (create_and_set_up_tree_view):
	Make the backspace key open the parent folder in the
	list view like it does in the icon view. (#142891)
	Patch from Christian Neumair <chris@gnome-de.org>

2005-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-desktop-link.c:
	(athena_desktop_link_can_rename):
	Make Computer icon renameable. (#154122)
	Patch from Tim Savannah <opticcow@linux-militia.net>

2005-02-27  Martin Wehner  <martin.wehner@gmail.com>

	* libathena-private/athena-file-operations-progress.c:
	(time_remaining_callback):
	Don't show ETA if bytes_copied > bytes_total.
	Prevents miscalculated ETAs from being shown. (#158614)
	Based on a patch from John Spray <jcs116@york.ac.uk>

2005-02-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Make show_original work (had a typo)
	Make where use original file, not target.
	Fixes location display for desktop icons.

2005-02-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	deep count on target files, not original files.
	Fixes properties for e.g. home icon on desktop.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-23  Alexander Larsson  <alexl@redhat.com>

	* docs/athena-context-menus.txt:
	Remove old docs.

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-desktop-icon-file.c:
	* libathena-private/athena-file-operations.c:
	(athena_file_operations_delete):
	* libathena-private/athena-file.c: (athena_file_can_rename),
	(rename_guts), (athena_file_get_drop_target_uri):
	* src/file-manager/fm-desktop-icon-view.c:
	(trash_link_is_selection):
	* src/file-manager/fm-icon-container.c: (get_sort_category):
	* src/file-manager/fm-properties-window.c:
	(get_target_file_for_original_file):
	Handle athena_desktop_icon_file_get_link() returning NULL.
	Likely fixes bug #145971

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c: (should_show_mime_type):
	Remove stale comment.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c: (end_startup_notification):
	Don't give critical warnings if we have no startup_id.

	* src/athena-window.c: (athena_window_update_icon):
	Use names and not pixbufs for the window icons.
	This means the icons of the best size are used.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-22  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c: (create_window):
	* src/athena-window-private.h:
	* src/athena-window.c: (athena_window_init),
	(athena_window_finalize):
	Remove unneeded startup_id.

2005-02-22  Martin Wehner  <martin.wehner@gmail.com>

	* MAINTAINERS:
	Update my email address.

2005-02-21  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_supports_uri):
	Use EEL_DESKTOP_URI instead of "x-athena-desktop:".

	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-02-18  Paolo Borelli  <pborelli@katamail.com>

	*  libathena-private/athena-icon-container.c (popup-menu):
	fix #136578 (Menu key should pop up context menu).

2005-02-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (should_show_open_with):
	Don't show open with property page for desktop files and
	desktop special icons.

2005-02-17  Martin Wehner  <martin.wehner@epost.de>

	* src/athena-navigation-window-menus.c:
	(add_bookmark_for_current_location):
	Only add a bookmark once for a given location.
	Fixes #161862.

	Patch from egeetha@novell.com

2005-02-15  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c:
	* src/athena-shell.c:
	Fixes to the startup notification stuff.
	Patch from Elijah Newren <newren@gmail.com>

2005-02-14  Alexander Larsson  <alexl@redhat.com>

	* data/applications.desktop.in:
	* data/favorites.desktop.in:
	* src/network-scheme.desktop.in:
	* athena-computer.desktop.in:
	* athena-folder-handler.desktop.in:
	* athena-home.desktop.in:
	* athena.desktop.in:
	Enable startup notification.

	* src/athena-application.c:
	* src/athena-application.h:
	* src/athena-bookmarks-window.c:
	* src/athena-connect-server-dialog-nonmain.c:
	* src/athena-location-bar.c:
	* src/athena-main.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-shell-interface.idl:
	* src/athena-shell.c:
	* src/athena-window-manage-views.c:
	* src/athena-window-private.h:
	* src/athena-window.c:
	Handle startup notification across corba activation.
	Patch from Elijah Newren <newren@gmail.com>

2005-02-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-model.c:
	Don't do any i/o on tree roots until they are opened.
	This means you don't get any auth dialogs.
	Removed the monitor on the root file totally, as that should
	not normally change/go away anyway (and it was doing i/o).

	This changes semantics in the file a bit, we now have a dummy
	row also if node->directory != NULL and node->parent == NULL.

2005-02-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.9.91 ===

2005-02-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump eel requires

	* NEWS:
	Update for release

2005-02-09  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	* athena-folder-handler.desktop.in:
	Add new default folder handler NoDisplay desktop file

	* athena.desktop.in:
	Add %U to exec line

	* src/Athena_shell.server.in:
	Remove all the bonobo components we no longer support

	* src/file-manager/fm-directory-view.c:
	Allow open with menu on folders (#151747)

2005-02-08  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(fm_list_view_start_renaming_file):
	Set original_name to the new name as cell_renderer_edited()
	might be called multiple times if the view looses focus.
	Fixes bug #166120.

2005-02-07  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-properties-window.c: (get_original_file),
	(name_field_done_editing), (update_properties_window_title):
	Handle disappearing original_files without crashing.
	Fixes bug #151024/158904.

2005-02-07  Martin Wehner  <martin.wehner@epost.de>

	* configure.in:
	Revert libexif change as it breaks the build with new libexif.

2005-02-06  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-program-choosing.c:
	(slowly_and_stupidly_obtain_timestamp),
	(athena_launch_show_file), (athena_launch_application),
	(athena_launch_desktop_file):
	Use new gnome_desktop_item_set_launch_time() API. (#166334)

	* configure.in:
	Require gnome-desktop 2.9.91

	Patch from Elijah Newren <newren@gmail.com>

2005-02-06  Martin Wehner  <martin.wehner@epost.de>

	* configure.in:
	Make libexif dependency optional again. (#165773)

2005-02-05  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/apps_athena_preferences.schemas.in:
	Make default desktop font localizable. (#138731)

	Patch from Takao Fujiwar <takao.fujiwara@sun.com>

2005-02-05  Martin Wehner  <martin.wehner@epost.de>

	* data/Makefile.am:
	* data/static_bookmarks.xml:
	Remove unused file.

2005-02-05  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c:
	(real_update_menus): Added mnemonic for Browse Folder option.
	* src/file-manager/fm-desktop-icon-view.c:
	(real_update_menus): Added mnemonic for Empty Trash option.
	Fixes #162307.

	Patch from Dinoop Thomas <dinoop.thomas@wipro.com>

2005-02-04  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c (net_workarea_changed):
	Fix workarea detection on 64bit machines.
	Patch from Ian Wienand <ianw@gelato.unsw.edu.au>

2005-02-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(clipboard_targets_received):
	Handle destroyed windows

	* src/athena-window.c: (athena_window_destroy):
	cancel outstanding view as callbacks

	Fixes #165938

2005-01-31  Kjartan Maraas  <kmaraas@gnome.org>

	* libathena-private/athena-directory-background.c:
	(image_loading_done_callback): Free the color string.
	Closes bug #154204.

2005-01-30  Sven Herzberg  <herzi@gnome-de.org>

	reviewed by: Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-file-operations.c:
	change the strings for move/copy/link/delete from "Files Moved:" to
	"Moving file:", fixes #154839

2005-01-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c:
	Fix leak

	* Makefile.am:
	Remove unnecessary stuff

2005-01-28  Alexander Larsson  <alexl@redhat.com>

	* src/athena-actions.h:
	* src/athena-desktop-window.c:
	(athena_desktop_window_instance_init):
	Disable close action on desktop window (#160100)

2005-01-27  Martin Wehner  <martin.wehner@epost.de>

	* src/athena-main.c: (register_icons):
	Don't try to free NULL icon info.

2005-01-27  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-file.c:
	(athena_file_compare_for_sort_by_attribute):
	Don't compare NULL values from files we can't get permissions for.
	Fixes bug #153890.

2005-01-27  Chris Lahey  <clahey@ximian.com>

	* acconfig.h, configure.in, src/athena-image-properties-page.c:
	Support the API change in libexif > 0.5.12.

2005-01-27  Kjartan Maraas  <kmaraas@gnome.org>

	* src/athena-main.c: Don't leak the icon info

2005-01-27  Alexander Larsson  <alexl@redhat.com>

	* src/athena-spatial-window.c:
	Make path button more obvious. #145237
	Patch from  Michael Henson <mike@axl.net>

2005-01-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (ask_link_action):
	Set focus_on_map for dnd ask dialog to avoid it ending
	up under the browser window.
	Patch from Jorn Baayen <jbaayen@gnome.org>

2005-01-27  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	(confirm_empty_trash):
	No title on dialog.
	Patch from Dennis Cranston <dennis_cranston@yahoo.com>

2001-01-26  Ryan Lortie  <desrt@desrt.ca>
	* libathena-private/athena-file-operations.c:
	(handle_transfer_overwrite): Trivial string fix.

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (cancel_activate),
	(activate_weak_notify), (cancel_activate_callback):
	weak_unref the view if we cancel the activation.
	Might fix #145789

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.9.90 ===

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

	* MAINTAINERS:
	Add Martin, remove Darin.
	Update daves email address.

	* configure.in:
	Bump version to 2.9.90
	Require eel 2.9.90

2005-01-25  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (confirm_empty_trash):
	Fix typo.

2005-01-25  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_accessible_selection_changed_cb): Omit call
	to athena_icon_container_accessible_update_selection.
	(athena_icon_container_accessible_ref_selection):
	(athena_icon_container_accessible_get_selection):
	(athena_icon_container_accessible_remove_selection): All call
	to athena_icon_container_accessible_update_selection.

	Fixes bug #160087.

2005-01-24  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-menus.c (action_about_athena_callback):
	WE WANT THE CHEESEPUFF!!!

2005-01-24  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	(confirm_empty_trash):
	Use warning icon instead of info one.
	Use GtkMessageDialog.
	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-23  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-desktop-icon-view.c: (real_merge_menus):
	* src/file-manager/fm-directory-view.c: (real_update_menus):
	* src/file-manager/athena-directory-view-ui.xml:
	Remove "Reset Background" entry from folder context menus.

	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-01-21  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* src/athena-window-menus.c: Correct License (It said Evince).

2005-01-21  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-menus.c: (action_about_athena_callback):
	Add license to about dialog.
	Change copyright statement.

	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-20  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/apps_athena_preferences.schemas.in:
	Fix sidebar_width typo in gconf schema (#162204).

	Patch from J. Christopher Six <j.christopher.six@gmail.com>

2005-01-20  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-column-chooser.c:
	(button_new_with_mnemonic), (add_buttons):
	Add stock arrow icons to "Move Up/Down" buttons.

	Patch from Michael Gossard <michael.gossard@free.fr>

2005-01-19  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-menus.c: (action_about_athena_callback):
	Use GtkAboutDialog.

	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-19  Alexander Larsson  <alexl@redhat.com>

	* athena-home.desktop.in:
	Fix icon

	* athena.desktop.in:
	Put in menus.

	Patch from Luca Ferretti <elle.uca@libero.it>

2005-01-18  Alexander Larsson  <alexl@redhat.com>

	* src/athena-main.c: (main):
	* src/athena-window.c: (athena_window_class_init):
	Better default icon.
	Patch from Jaap Haitsma <jaap@haitsma.org>

2005-01-17  Alexander Larsson  <alexl@redhat.com>

	* src/athena-connect-server-dialog.c: (connect_to_server):
	Don't use destroyed dialog.
	Patch from Vincent Untz <vincent@vuntz.net>.

2005-01-16  Francisco Javier F. Serrador  <serrador@cvs.gnome.org>

	* src/file-manager/fm-icon-view.c: Applied patch from Tierry
	Moisan that resolves trivial bug #159128.

2005-01-14  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	* src/.cvsignore:
	* src/Makefile.am:
	* src/athena-connect-server-dialog-main.c: (dialog_destroyed),
	(show_uri), (athena_connect_server_dialog_present_uri), (main):
	* src/athena-connect-server-dialog-nonmain.c:
	(athena_connect_server_dialog_present_uri):
	* src/athena-connect-server-dialog.c: (connect_to_server),
	(response_callback), (athena_connect_server_dialog_new):
	* src/athena-connect-server-dialog.h:
	Make connect to server dialog availible as separate application.

	Patch from Vincent Untz <vincent@vuntz.net>

2005-01-14  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.[ch]:
	New function athena_ensure_unique_file_name

	* libathena-private/athena-link.[ch]:
	* libathena-private/athena-link-desktop-file.[ch]:
	Uniquify name for athena_link_local_create if requested.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_handle_url_drop):
	Uniquify desktop link name

	Patch from Jorn Baayen <jbaayen@gnome.org>

2005-01-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.[ch]:
	* libathena-private/athena-marshal.list:
	Add handle_url signal
	Fix argument list for handle_uri_list

	* libathena-private/athena-dnd.[ch]:
	Add athena_drag_default_drop_action_for_url

	* libathena-private/athena-icon-dnd.c: (receive_dropped_url),
	(athena_icon_container_get_drop_action),
	(drag_data_received_callback):
	Handle URL drops separately from URI_LIST
	Set different actions for URL drop

	* libathena-private/athena-tree-view-drag-dest.[ch]:
	(get_drop_action), (receive_dropped_uri_list),
	(receive_dropped_url), (drag_data_received_callback),
	(athena_tree_view_drag_dest_class_init):
	Add handle_url and handle_uri lists
	Set different actions for URL drop
	Fix bug that made url_list & url drops not work

	* src/file-manager/fm-directory-view.[ch]: (revert_slashes),
	(ask_link_action), (fm_directory_view_handle_url_drop),
	(fm_directory_view_handle_uri_list_drop):
	Move url and uri_list drop handling here. Make it handle
	url drops better.

	* src/file-manager/fm-icon-view.c: (icon_view_handle_url),
	(icon_view_handle_uri_list), (fm_icon_view_init):
	* src/file-manager/fm-list-view.c: (list_view_handle_url),
	(list_view_handle_uri_list), (create_and_set_up_tree_view):
	Call up to the drop code in directory view.

	The above is based on a patch from Jorn Baayen <jbaayen@gnome.org>

	* libathena-private/athena-directory.c:
	(athena_directory_schedule_metadata_copy):
	Handle source_directory being NULL. (happens on toplevel uri)

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_copy_move):
	Handle source_dir_uri being NULL. (happens on toplevel uri)

	* libathena-private/athena-link-desktop-file.c:
	(athena_link_desktop_file_local_create):
	Use right icon field

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	(volume_or_drive_unmounted_callback),
	(volume_or_drive_ejected_callback),
	(action_unmount_volume_callback), (action_eject_volume_callback),
	(real_update_menus_volumes):
	* src/file-manager/athena-directory-view-ui.xml:
	Allow eject on unmounted devices.
	Patch from Magnus Damm <magnus.damm@gmail.com>

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	Don't user GNOME_DESKTOP_ITEM_LOAD_ONLY_IF_EXISTS, it doesn't mean
	what you think, it means don't load if the app the desktop file
	references doesn't exist.

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-link-historical.c:
	* libathena-private/athena-link-historical.h:
	Remove historical link support.

	* libathena-private/athena-link-desktop-file.[ch]:
	* libathena-private/athena-link.[ch]:
	Remove historical link support and unused functions.

	* src/file-manager/fm-directory-view.h:
	Remove unused declaration.

	* src/file-manager/fm-icon-view.c:
	Fix up due to small api change for athena-link.

	* src/file-manager/fm-properties-window.c: (set_icon_callback):
	Fix icon change for desktop files that point to nonexisting binaries.

2005-01-12  Alexander Larsson  <alexl@redhat.com>

	* src/athena-main.c (register_icons):
	Remove debug spew

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file):
	Special case icons for burn: and computer:

	* src/athena-main.c: (register_icons):
	* src/athena-navigation-window-menus.c:
	* src/athena-window-menus.c:
	Fix up icons and names in go/places menu.
	Fixes #162750 and #149941

	Based on patch from dennis_cranston@yahoo.com and Jaap A. Haitsma

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window.c (real_set_title):
	Make window title "location - File Browser", not "File Browser: location".
	Fixes #149008. Patch by Gustavo Carneiro.

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.9.2 ===

2004-01-11  James Henstridge  <james@jamesh.id.au>

	* test/Makefile.am: don't define GNOMELOCALEDIR in INCLUDES.

	* src/Makefile.am: remove desktop and server files on clean.
	Don't include GNOMELOCALEDIR in INCLUDES, since it is now defined
	in config.h.

	* Makefile.am: remove desktop files on clean, and intltool files
	on distclean.

	* acconfig.h: remove, since it isn't needed anymore.

	* configure.in: remove some macro calls not needed with newer
	automakes, and use newer versions of some macros.

	* autogen.sh: require Automake >= 1.7.

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

	* configure.in:
	Require eel 2.92.

2005-01-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in (STARTUP_NOTIFICATION_PACKAGE):
	Add back mk.

2005-01-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in (STARTUP_NOTIFICATION_PACKAGE):
	Remove mk for ALL_LINGUAS since it broke the build.

2004-12-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c: (load_icon_file):
	Don't use frames for images with alpha.

	Patch from Jaap Haitsma <jaap@haitsma.org>

2004-12-15  Vijaykumar Patwari <vijaykumar.patwari@wipro.com>

	* src/athena-bookmarks-window.[ch]:
	(open_selected_bookmark): New function, choose if to open in
	parent or new window.
	(get_bookmark_athena_navigation_window_new): Get New window.
	(on_jump_button_clicked): Call open_selected_bookmark.
	(on_row_activated): Call open_selected_bookmark.
	* src/athena-navigation-window-menus.c:
	(get_or_create_bookmarks_window): Reset signals for the
	edit bookmark dialog.
	fixes bug #160224.

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require glib 2.6.0

	* libathena-private/athena-file-utilities.c:
	(athena_get_uri_shortname_for_display):
	* libathena-private/athena-file.c:
	(athena_file_get_display_name_nocopy):
	Use g_filename_display_basename() for display names

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(fm_list_view_start_renaming_file):
	* src/file-manager/fm-properties-window.c:
	(name_field_done_editing):
	Make sure we don't rename files if the name was never
	changed from the original display name.

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* src/athena-location-dialog.c: (athena_location_dialog_new):
	Fill in ctrl-l dialog correctly for desktop.

	Patch from Matthew Gatto <poobar@nycap.rr.com>

2004-12-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_update_icon):
	* libathena-private/athena-icon-factory.c: (load_icon_file):
	* libathena-private/athena-thumbnails.c:
	(athena_thumbnail_frame_image),
	(athena_thumbnail_load_framed_image):
	* libathena-private/athena-thumbnails.h:
	Better handling of icon sizes, including
	framing of large file-as-icon images.

	Patches from Jaap Haitsma <jaap@haitsma.org>

2004-12-13  Dwayne Bailey  <dwayne@translate.org.za>

	* configure.in: Added "zu" to ALL_LINGUAS.

2004-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-desktop-link-monitor.c:
	(destroy_desktop_link_monitor),
	(athena_desktop_link_monitor_get), (volume_file_name_used),
	(athena_desktop_link_monitor_make_filename_unique),
	(create_volume_link), (athena_desktop_link_monitor_init):
	* libathena-private/athena-desktop-link-monitor.h:
	* libathena-private/athena-desktop-link.c:
	(athena_desktop_link_new_from_volume):
	Make sure volume filenames are unique (#153888)

2004-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-clipboard.c (merge_out_clipboard_menu_items):
	Disconnect from right object.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(add_application_to_open_with_menu), (real_update_menus):
	Fix underscore escaping in open with menu.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-bookmark.c:
	(athena_bookmark_get_pixbuf):
	Force size for pixbufs.

	* libathena-private/athena-icon-factory.c: (load_icon_file):
	Load force-sized svgs right.
	(athena_icon_factory_get_pixbuf_from_name):
	Allow force-size loading

	* libathena-private/athena-icon-factory.h:
	Allow force-size loading in athena_icon_factory_get_pixbuf_from_name

	* libathena-private/athena-ui-utilities.c:
	(athena_action_from_menu_item),
	(athena_toolbar_action_from_menu_item):
	* src/athena-emblem-sidebar.c: (create_emblem_widget):
	* src/athena-property-browser.c: (make_drag_image),
	(make_properties_from_directories):
	* src/athena-sidebar-title.c: (update_icon):
	* src/file-manager/fm-directory-view.c:
	(add_extension_action_for_files):
	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	* src/file-manager/fm-tree-model.c:
	(tree_node_get_pixbuf_from_factory):

	Force-size load icons

	* src/athena-throbber.c: (athena_throbber_instance_init),
	(athena_throbber_finalize):
	Disconnect icon theme changed signal on finalize.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-dnd.c:
	(athena_drag_can_accept_item):
	Handle drags to desktop items.

2004-11-29  Dwayne Bailey  <dwayne@translate.org.za>

	* configure.in: Added "nso" to ALL_LINGUAS.

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	(canvas_position_to_grid_position):
	Fix positioning. Makes find_new_empty_spot tighter.
	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-11-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c: (snap_position),
	(find_empty_location):
	Fix a few typos in icon placement.
	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-11-25  Marco Pesenti Gritti  <marco@gnome.org>

	* src/file-manager/Makefile.am:

	No need to define VERSION here, it's aleady in
	config.h. Fix the build.

2004-11-25  Marco Pesenti Gritti  <marco@gnome.org>

	reviewed by: Alexander Larsson  <alexl@redhat.com>

	* configure.in:

	Bump gnome-vfs required version

	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_default_application_for_file),
	(application_equal), (get_open_with_mime_applications),
	(athena_mime_get_open_with_applications_for_file),
	(athena_mime_get_applications_for_file),
	(athena_mime_has_any_applications_for_file):
	* libathena-private/athena-mime-actions.h:
	* libathena-private/athena-program-choosing.c:
	(athena_launch_show_file), (athena_launch_application):
	* src/file-manager/fm-directory-view.c: (reset_open_with_menu),
	(activate_check_mime_types):
	* src/athena-information-panel.c: (command_button_callback),
	(add_command_buttons), (athena_information_panel_update_buttons):

	Remove all mime api deprecated calls and replace them with the
	new API. Fix bug #159435.

2004-11-24  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.9.1 ===

2004-11-24  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

2004-11-22  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-undo-signal-handlers.c:
	Fix include.

2004-11-22  Alexander Larsson  <alexl@redhat.com>
        * Merge bonobo-slay-branch

2004-11-22  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window.c: (action_view_as_callback),
	(athena_window_synch_view_as_menus):
	Don't reenter action callback when switching views.

2004-11-19  Dave Camp  <dave@novell.com>

	* src/file-manager/fm-directory-view.c: (reset_open_with_menu),
	(can_show_default_app), (real_update_menus): Fix some jumping
	menus.
	* test/Makefile.am: Don't link to libathena

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-mime-actions.c:
	removed unneeded includes

	* src/athena-application.c:
	* src/athena-desktop-window.c:
	Removed app_id property on AthenaWindow

	* src/athena-main.c: (main):
	Remove old code

	* src/athena-navigation-window.c:
	* src/athena-sidebar-title.c:
	* src/athena-window-menus.c:
	* src/file-manager/fm-ditem-page.c:
	Remove bonobo comments

	* src/athena-window.c:
	Remove app_id property
	fix last bonobo details

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/athena-directory-view-ui.xml:
	remove edit launcher action

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require new eel

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-actions.h:
	* src/athena-shell-ui.xml:
	* src/athena-spatial-window-ui.xml:
	* src/athena-spatial-window.c:
	* src/athena-window-menus.c:
	* src/athena-window.[ch]:
	Implement some accels as GtkBindings instead to avoid
	overriding widget-specific keybindings like "delete" and "backspace".

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window.c:
	* src/athena-window-private.h:
	Put location entry etc in a toolbar.

2004-11-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c: (is_desktop_file),
	(athena_file_is_athena_link):
	Don't check for "application/x-gnome-app-info", as that is already
	handled by the alias system. This also avoids stating for a
	mimetype xml file.

	* src/athena-throbber.c:
	Don't create a new icon theme for each throbber.
	Use GtkIconTheme instead of GnomeIconTheme

	* libathena-private/athena-ui-utilities.[ch]:
	New function athena_ui_string_get to cache the loaded ui files.

	* src/athena-navigation-window.c:
	Remove old bonoboui stuff

	* src/athena-navigation-window-menus.c:
	Open New window is Ctrl-N.
	Use the new athena_ui_string_get call

	* src/athena-spatial-window.c:
	* src/athena-window-menus.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Use the new athena_ui_string_get call

	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/athena-icon-view-ui.xml:
	Name separators to work around bug #158620

2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/athena-desktop-icon-view-ui.xml:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/athena-icon-view-ui.xml:
	* src/file-manager/athena-list-view-ui.xml:
	* src/athena-actions.h:
	* src/athena-navigation-window-ui.xml:
	* src/athena-shell-ui.xml:
	* src/athena-spatial-window-ui.xml:
	* src/athena-spatial-window.c:
	* src/athena-window-menus.c:
	* src/athena-window.[ch]:
	Add all extra accellerators and clean up ui files.

2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-menus.c:
	* src/athena-window-toolbars.c:
	* libathena-private/athena-ui-utilities.[ch]:
	(athena_action_from_menu_item), (athena_toolbar_action_from_menu_item):
	Move code to utility functions.

2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.[ch]:
	* src/athena-spatial-window.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-window-menus.c:
	Move some functions to athena-ui-utilities

	* libathena-private/Makefile.am:
	* libathena-private/athena-ui-utilities.[ch]:
	Various ui utility functions

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Unmerge everything on destroy

	* src/athena-shell-ui.xml:
	Remove unused stuff

2004-11-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-clipboard-monitor.c:
	Handle ownership changes from XFixes

	* libathena-private/Makefile.am:
	* libathena-private/athena-clipboard-ui.xml:
	Remove (is now inline)

	* libathena-private/athena-clipboard.[ch]:
	Convert to GtkUIManager

	* src/athena-location-bar.c:
	* src/athena-notes-viewer.c:
	Adapt to AthenaClipboard changes

	* src/athena-window-menus.c:
	Remove duplicated action

	* src/file-manager/fm-actions.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/athena-directory-view-ui.xml:
	Adapt to AthenaClipboard changes
	Fix paste into folder to not use stock accelerator

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove references to throbber

	* src/Makefile.am:
	* src/athena-throbber.[ch]:
	Moved throbber here and made it not be a bonobo object

	* src/athena-window-private.h:
	* src/athena-window-toolbars.c:
	Work with the throbber

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c:
	* src/athena-navigation-window.c:
	* src/athena-spatial-window.c:
	* src/athena-window-private.h:
	* src/athena-window.c:
	Make initial window geometry work.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/athena-image-properties-page.c: (get_property_pages):
	Only show for images.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.h:
	Don't include libathena files.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/athena-navigation-window.c:
	* src/athena-desktop-window.c:
	Remove old defines

	* src/file-manager/fm-directory-view.c:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-navigation-window-ui.xml:
	* src/athena-shell-ui.xml:
	Make the menus look like pre-bonobo-removal

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c: (real_merge_menus):
	Don't have use default background on desktop context menu.

2004-11-17  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	Remove libathena-adapter subdir

	* components/Makefile.am:
	Don't build throbber atm

	* src/athena-navigation-action.c:
	Use GtkMenuToolButton instead of AthenaArrowToolbutton

	* src/Makefile.am:
	* src/athena-arrow-toolbutton.[ch]:
	Remove.

2004-11-16  Anders Carlsson  <andersca@gnome.org>

	* libathena-private/athena-window-info.c:
	(athena_window_info_get_ui_manager):
	It's NULL now, not CORBA_OBJECT_NIL.

2004-11-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-view.h:
	remove bonoboui inclide

	* src/athena-navigation-action.[ch]:
	Add navigation GtkAction, based on epi code

	* src/athena-window-menus.c:
	* src/athena-window-toolbars.c:
	Correctly handle toolbar icons for extensions

2004-11-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Remove bonoboui dependencies

	* libathena-private/Makefile.am:
	* libathena-private/athena-bonobo-extensions.[ch]:
	* libathena-private/athena-bonobo-ui.h:
	Remove unneeded files

	* libathena-private/athena-clipboard.c:
	Comment out for now.

	* libathena-private/athena-directory-metafile-monitor.c:
	* libathena-private/athena-metafile.c:
	* src/athena-application.c:
	* src/athena-history-sidebar.c:
	* src/athena-information-panel.c:
	* src/athena-main.c: (main):
	* src/athena-notes-viewer.c:
	* src/athena-sidebar-title.c:
	* src/file-manager/fm-properties-window.c:
	Remove bonobo includes

	* libathena-private/athena-file-utilities.[ch]:
	(athena_get_ui_directory), (athena_ui_file):
	Util functions for ui files.

	* libathena-private/athena-view.[ch]:
	* libathena-private/athena-window-info.[ch]:
	Remove bonoboui methods

	* src/Makefile.am:
	Add new files, remove some old ones
	Move ui files to datadir/athena/ui

	* src/athena-actions.h:
	New file with action names

	* src/athena-arrow-toolbutton.[ch]:
	New widget for back/forward buttons.

	* src/athena-desktop-window.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-navigation-window-ui.xml:
	* src/athena-navigation-window.[ch]:
	* src/athena-shell-ui.xml:
	* src/athena-spatial-window-ui.xml:
	* src/athena-spatial-window.c:
	* src/athena-window-manage-views.[ch]:
	* src/athena-window-menus.c:
	* src/athena-window-private.h:
	* src/athena-window-toolbars.c:
	* src/athena-window.[ch]:
	Initial port to GtkUIManager

	* src/athena-profiler.[ch]:
	Remove

	* src/file-manager/Makefile.am:
	* src/file-manager/fm-actions.h:
	New file with action names

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/athena-desktop-icon-view-ui.xml:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/athena-icon-view-ui.xml:
	* src/file-manager/athena-list-view-ui.xml:
	Initial port of views to GtkUIManager

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-bonobo-extensions.[ch]:
	Remove some unused bonobo extensions.

	* libathena-private/Makefile.am:
	* src/athena-navigation-window.c:
	* src/athena-property-browser.c:
	* src/athena-spatial-window.c:
	* src/athena-window.c:
	* libathena-private/athena-drag-window.[ch]:
	Remove AthenaDragWindow (not used anyway)

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	* libathena-private/Makefile.am:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-lib-self-check-functions.h:
	* libathena-private/athena-medusa-support.[ch]:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-search-uri.[ch]:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-search-list-view.[ch]:
	* src/file-manager/athena-indexing-info.[ch]:
	* src/file-manager/athena-search-list-view-ui.xml:
	* src/athena-application.c:
	* src/athena-complex-search-bar.[ch]:
	* src/athena-navigation-window-menus.c:
	* src/athena-navigation-window-ui.xml:
	* src/athena-navigation-window.[ch]:
	* src/athena-search-bar-criterion-private.h:
	* src/athena-search-bar-criterion.[ch]:
	* src/athena-search-bar-private.h:
	* src/athena-search-bar.[ch]:
	* src/athena-shell-ui.xml:
	* src/athena-sidebar-title.c:
	* src/athena-simple-search-bar.[ch]:
	* src/athena-spatial-window.c:
	* src/athena-switchable-navigation-bar.[ch]:
	* src/athena-switchable-search-bar.[ch]:
	* src/athena-window-manage-views.c:
	* src/athena-window-menus.c:
	* src/athena-window.c:
	Remove all traces of old medusa support.

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.[ch]:
	(athena_get_relative_icon_size_for_zoom_level):
	New function.

	* libathena-private/athena-view.[ch]:
	Redo the zooming interface

	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Implement the new interface for zooming and clean up.
	Remove the "default zoom affects fonts" behaviour.

	* src/athena-navigation-window.c:
	* src/athena-zoom-control.[ch]:
	Use the new simplified zoom interfaces

2004-11-09  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c:
	(athena_async_destroying_file), (extension_info_cancel),
	(info_provider_idle_callback), (info_provider_callback):
	* libathena-private/athena-directory-private.h:
	Handle the case when the file we're getting extension info
	from goes away.

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window.c:
	(athena_navigation_window_set_up_sidebar):
	* src/athena-window-manage-views.c:
	(viewed_file_changed_callback):
	Remove some BONOBO TODOs

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove image_properties subdir

	* src/Makefile.am:
	* src/athena-application.c: (athena_application_instance_init):
	* src/athena-image-properties-page.[ch]:
	Image property page using new system

	* src/athena-notes-viewer.c:
	add static

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-sidebar-factory.c:
	* libathena-private/athena-sidebar-factory.h:
	Remove old sidebar-factory API

	* src/file-manager/fm-tree-view.c:
	* src/athena-emblem-sidebar.c:
	* src/athena-history-sidebar.c:
	* src/athena-information-panel.c:
	* src/athena-navigation-window.c:
	Convert to new provider API.

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-sidebar-provider.[ch]:
	Add new extensions-style sidebar provider interface

	* src/athena-navigation-window.c:
	Use it.

	* src/athena-notes-viewer.[ch]:
	Convert notes viewer to new iface

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* src/Makefile.am:
	* src/athena-application.c: (athena_application_instance_init):
	* src/athena-notes-sidebar.[ch]:
	* src/athena-notes-viewer.[ch]:
	Turn AthenaNotesSidebar into AthenaNotesViewer that is also a
	property page

2004-11-08  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove emblem subdir

	* libathena-private/athena-window-info.[ch]:
	* src/athena-window.c: (athena_window_set_hidden_files_mode):
	hidden_files_mode_changed signal

	* src/file-manager/Makefile.am:
	* src/file-manager/fm-tree-view.[ch]:
	* src/athena-application.c: (athena_application_instance_init):
	Make tree view work with new system.

	* src/athena-window-manage-views.c: (load_new_location),
	(location_has_really_changed):
	Only emit loading_uri after load_underway has been reported.

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* src/Makefile.am:
	* src/athena-emblem-sidebar.[ch]:
	* src/athena-application.c:
	Add emblem sidebar, based on old compontent
	now uses AthenaSignaller to detect/signal emblem changes

	* src/athena-property-browser.c:
	Catch the emblems_changed signal and refresh

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Fix crash when switching view.

	* src/athena-history-sidebar.c:
	Some cleanups

	* src/athena-navigation-window.c:
	Fix unref-null warning

	* src/Makefile.am:
	* src/athena-application.c:
	* src/athena-notes-sidebar.[ch]:
	Add notes sidebar widget, based on old component

	* components/Makefile.am (SUBDIRS):
	Remove notes

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Remove stuff that are now replaced or not needed anymore.

	* libathena-private/athena-window-info.[ch]:
	* src/athena-window.c:
	Add athena_window_info_get_history.

	* src/Makefile.am:
	* src/athena-history-sidebar.[ch]:
	* src/athena-application.c: (athena_application_instance_init):
	Add history sidebar widget, based on old component.

	* src/athena-information-panel.[ch]:
	Some fixes

2004-11-05  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-background.c:
	Fix spew

	* libathena-private/athena-sidebar-factory.h:
	* libathena-private/athena-window-info.[ch]:
	* src/athena-application.c:
	* src/athena-information-panel.[ch]:
	* src/athena-navigation-window.c:
	* src/athena-side-pane.c:
	* src/athena-window.c:
	More work on sidebars. Now the information sidebar works.

2004-11-04  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	Don't build libathena subdir

	* libathena-private/Makefile.am:
	Don't link to libathena
	Add new files (some from libathena)
	Remove not used files

	* libathena-private/apps_athena_preferences.schemas.in:
	Remove hide_built_in_bookmarks

	* libathena-private/athena-bonobo-ui.h:
	* libathena-private/athena-clipboard-ui.xml:
	* libathena-private/athena-clipboard.[ch]:
	* libathena-private/athena-idle-queue.[ch]:
	Move here from libathena

	* libathena-private/athena-desktop-link.c:
	* libathena-private/athena-global-preferences.[ch]:
	Remove WEB_NAVIGATION_ENABLED ifdef and HOME_URI/BUILT_IN_BOOKMARKS
	prefs

	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-metafile-server.idl:
	* libathena-private/athena-program-choosing.h:
	Remove not needed header inclusions

	* libathena-private/athena-sidebar-factory.[ch]:
	AthenaSidebar registration and creation

	* libathena-private/athena-sidebar.[ch]:
	New AthenaSidebar interface

	* libathena-private/athena-sidebar-functions.[ch]:
	* libathena-private/athena-undo-context.[ch]:
	* libathena-private/athena-view-identifier.[ch]:
	* libathena-private/athena-view-query.[ch]:
	Remove not needed files

	* libathena-private/athena-undo-manager.[ch]:
	* libathena-private/athena-undo-private.h:
	* libathena-private/athena-undo-transaction.[ch]:
	* libathena-private/athena-undo.[ch]:
	Convert from bonobo. Some moved from libathena.

	* libathena-private/athena-view-factory.[ch]:
	AthenaView registration and creation

	* libathena-private/athena-view.[ch]:
	New AthenaView interface

	* libathena-private/athena-window-info.[ch]:
	New AthenaWindowInfo interface

	* src/Makefile.am:
	Don't link to libathena
	Remove not used files

	* src/athena-applicable-views.[ch]:
	* src/athena-component-adapter-factory.[ch]:
	* src/athena-view-frame-corba.[ch]:
	* src/athena-view-frame-private.h:
	* src/athena-view-frame.[ch]:
	Removed. Not needed anymore.

	* src/athena-bookmarks-window.c:
	* src/athena-complex-search-bar.c:
	* src/athena-information-panel.[ch]:
	* src/athena-location-bar.c:
	* src/athena-location-dialog.c:
	* src/athena-location-entry.c:
	* src/athena-shell-interface.idl:
	* src/athena-side-pane.h:
	* src/athena-sidebar-title.c:
	* src/athena-simple-search-bar.c:
	Minor changes to build.

	* src/athena-shell.c:
	Remove WEB_NAVIGATION_ENABLED

	* src/athena-application.c:
	* src/athena-desktop-window.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-navigation-window.[ch]:
	* src/athena-spatial-window.c:
	* src/athena-window-manage-views.[ch]:
	* src/athena-window-menus.c:
	* src/athena-window-private.h:
	* src/athena-window.[ch]:
	Initial conversion to new AthenaView interface.

	* src/file-manager/Makefile.am:
	* src/file-manager/fm-bonobo-provider.[ch]:
	Removed. Not needed anymore.
	Temporary commented out fm-tree-view.[ch]

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-desktop-icon-view.h:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-icon-view.h:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-list-view.h:
	* src/file-manager/fm-properties-window.c:
	* src/file-manager/fm-tree-view.h:
	Initial conversion to new AthenaView interface.

2004-11-09  Mark McLoughlin  <mark@skynet.ie>

	* Makefile.am: install athena-file-management-properties.desktop
	in $(datadir)/applications

	* athena-file-management-properties.desktop.in:
	add OnlyShowIn=GNOME;

2004-10-29  Iain <iaingnome@gmail.com>

	* libathena-private/athena-icon-canvas-item.c
	(compute_text_rectangle): Line up the text with the middle of the icon.

	* libathena-private/athena-icon-container.c
	(lay_down_one_line): Take the max height of the row so that icons can
	be lined up.
	(lay_down_icons_horizontal): Calculate the grid_width depending on the
	max width of an icon.
	Line up icons on a vertical line set at the left of the text.

2004-10-29  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Update version to 2.9.1.
	Gnome 2.8 versions are now on the gnome-2-8 branch.

	* ChangeLog: rolled over to ChangeLog-20041029.

==== gnome-2-8 branched from here ===

# Local Variables:
# coding: utf-8
# End:
