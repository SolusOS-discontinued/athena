2000-10-18  Andy Hertzfeld  <andy@eazel.com>

	added a Services menu, per Darin's advice, as a separate bonobo
	ui component.  Right now, it's leaking the UI handler, and the
	menu uris aren't correct; will finish this tomorrow.
	
	* src/Makefile.am:
	added new files: athena-service-ui.xml and
	athena_window_install_service_menu	
	
	* src/athena-service-ui.xml:
	xml file defining service menu and toolbar button
	
	* src/athena-shell-ui.xml:
	added placeholder for services menu and toolbar button; removed
	definition of toolbar button
	
	* src/athena-window-private.h:
	added reference to install routine
		
	* src/athena-window-service-menu.c: (goto_services_summary),
	(goto_online_storage), (goto_software_catalog),
	(athena_window_install_service_menu):
	merge in the services menu and button and handle the commands
	
	* src/athena-window-toolbars.c: (set_up_toolbar_images),
	(athena_window_initialize_toolbars):
	change the service button image when the theme changes
	if EAZEL_SERVICES is defined
	
	* src/athena-window.c: (athena_window_constructed):
	call the install routine if EAZEL_SERVICES is defined

2000-10-17  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/Makefile.am:
	* components/services/install/athena-view/athena-service-instal
	l-view.c: (create_package),
	(athena_service_install_view_update_from_uri):

	Fix "id=" stuff to "rpm_id=" to match new softcat format, and use
	special pack->eazel_id field now that libeazelinstall provides it.
	
2000-10-17  Robey Pointer  <robey@eazel.com>

	* athena-installer/src/callbacks.c: (prep_retry):
	* athena-installer/src/callbacks.h:
	* athena-installer/src/installer.c: (start_over),
	(dont_start_over), (jump_to_retry_page):

	Change installer's "let's upgrade other packages" screen to be
	user-friendly and Arloified.

2000-10-17  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_content_view_one_time_happenings):
	Make the "misc" part of the User-Agent "Athena/1.0" instead of
	"Athena"
	
2000-10-17  John Sullivan  <sullivan@eazel.com>

	Fixed NULL dereference bug Eli was running into in the
	location bar.

	* libathena-extensions/athena-file-utilities.c:
	(athena_handle_trailing_slashes): added assert that
	parameter is not NULL
	(athena_make_uri_canonical): Handle NULL up front,
	to avoid dereferencing it later.

2000-10-17  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-container.c: (icon_free),
	(stop_rubberbanding), (destroy): Oops. Canvas items are not
	widgets, although they ref. count in a similar way.

2000-10-17  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(async_job_wake_up): Fix reentrancy problem.

2000-10-17  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-container.c: (icon_free),
	(stop_rubberbanding), (destroy): Fixed a bunch of FIXMEs now that
	I "get" widget ref. counting.
	(icon_set_position): Clip code rearranging.

2000-10-17  Andy Hertzfeld  <andy@eazel.com>

	* components/hardware/athena-hardware-view.c:
	(setup_overview_form):
	made long device names wrap to multiple lines.
	
2000-10-17  Darin Adler  <darin@eazel.com>

	Fix assert introduced with my last check-in.

	* libathena-extensions/athena-directory-async.c:
	(async_job_start), (async_job_end): Added a debugging feature to
	match up starts with ends.
	(directory_count_cancel), (deep_count_cancel), (mime_list_cancel),
	(top_left_cancel), (activation_uri_cancel), (file_info_cancel),
	(metafile_read_cancel), (file_list_cancel),
	(directory_count_callback), (start_monitoring_file_list),
	(directory_count_start), (deep_count_callback),
	(deep_count_start), (mime_list_callback), (mime_list_start),
	(top_left_read_done), (top_left_start), (get_info_callback),
	(file_info_start), (activation_uri_done), (activation_uri_start):
	Pass additional parameters to make debugging feature work.
	(metafile_read_mark_done), (metafile_read_done),
	(metafile_read_start): Broke out the read complete code to fix a
	case where we would end a thread that we didn't start.

2000-10-17  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3828 (switching views makes torn-off menus disappear)
	Fixed bug 3822 (Edit menu flashes when you click in location field)
	Fixed bug 3529 (menu bar flashes when view switched)

	These were all caused by our Bonobo xml files redefining labels
	for submenus, causing Bonobo to think that it needed to destroy
	the widget holding the title of the old submenu.

	* libathena/athena-clipboard-ui.xml:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/athena-icon-view-ui.xml:
	* src/file-manager/athena-search-list-view-ui.xml:
	Removed all _label="Foo"s from submenus defined in
	athena-shell-ui.xml (e.g. File, Edit, View).

	Some bug fixes and cleanup in the summary view code. I noticed a
	couple of obvious problems when I was trying to use services
	earlier, and they led me to fix up a little of this code.

	* components/services/summary/athena-view/athena-summary-view.c:
	Removed "feedback_text" field from Details struct; now it's just a
	parameter to generate_error_dialog (it was being leaked with each
	use, also).
	(generate_summary_form): Use new error_dialog_shown boolean to avoid
	showing exactly the same dialog twice; removed a bunch of duplicate 
	code by collapsing an if/else into only the part that's different;
	pass dialog text to generate_error_dialog directly
	(authn_cb_failed): Don't follow an exclamation point with a period.
	(generate_error_dialog): Set up a parent window so the dialog
	appears in a sensible place; use GNOME_STOCK_BUTTON_CANCEL instead
	of "CANCEL"; get message from parameter instead of Details field;
	change "Retry" to "Try Again" to be less nerdly.

2000-10-17  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(cancel_mime_list, set_up_request_by_file_attributes,
	lacks_mime_list, athena_directory_invalidate_counts,
	mime_list_callback, mime_list_start): Fix assorted bugs which made
	AthenaFile think the list was never complete.

	* libathena-extensions/athena-wait-until-ready.h: Include
	<libathena-extensions/athena-directory.h> and
	<libathena-extensions/athena-file.h>.

	* libathena-extensions/athena-file-attributes.h: Rename
	MIME_LIST attroibute to DIRECTORY_ITEM_MIME_TYPES.

	* libathena-extensions/athena-file.h,
	libathena-extensions/athena-file.c:
	(athena_file_get_directory_item_mime_types): Renamed from
	athena_file_get_mime_list.

	* libathena-extensions/athena-mime-actions.h,
	libathena-extensions/athena-mime-actions.c
	(athena_file_wait_for_metadata,
	athena_file_wait_for_mime_action_attributes,
	athena_mime_get_default_action_type_for_uri,
	athena_mime_get_default_action_for_uri,
	athena_mime_get_default_application_for_uri_internal,
	athena_mime_get_default_application_for_uri,
	athena_mime_is_default_application_for_uri_user_chosen,
	athena_mime_get_default_component_for_uri_internal,
	athena_mime_get_default_component_for_uri,
	athena_mime_is_default_component_for_uri_user_chosen,
	athena_mime_get_short_list_applications_for_uri,
	athena_mime_get_short_list_components_for_uri,
	athena_mime_get_short_list_methods_for_uri,
	athena_mime_get_all_applications_for_uri,
	athena_mime_has_any_applications_for_uri,
	athena_mime_get_all_components_for_uri,
	athena_mime_has_any_components_for_uri,
	athena_mime_set_default_action_type_for_uri,
	athena_mime_set_default_application_for_uri,
	athena_mime_set_default_component_for_uri,
	athena_mime_set_short_list_applications_for_uri,
	athena_mime_set_short_list_components_for_uri,
	athena_mime_add_application_to_short_list_for_uri,
	athena_mime_remove_application_from_short_list_for_uri,
	athena_mime_add_component_to_short_list_for_uri,
	athena_mime_remove_component_from_short_list_for_uri,
	athena_mime_extend_all_applications_for_uri,
	athena_mime_remove_from_all_applications_for_uri,
	mime_type_list_to_hash_table, athena_do_component_query): Use
	all the new AthenaFile APIs and stop using AthenaDirectory. No
	longer take AthenaDirectory as a parameter in addition to
	AthenaFile.

	* libathena-extensions/athena-program-chooser.c:
	(repopulate_program_list, is_application_default_for_uri,
	is_component_default_for_uri, is_component_in_short_list_for_uri,
	is_application_in_short_list_for_uri,
	program_file_pair_is_default_for_file, add_to_short_list_for_file,
	remove_from_short_list_for_file, remove_default_for_item,
	set_default_for_item): Stop passing AthenaDirectory to
	athena-mime-actions functions.
	* libathena-extensions/athena-program-choosing.c:
	(any_programs_available_for_file): Likewise.
	* src/file-manager/fm-directory-view.c (switch_location_and_view,
	files_added_callback, files_changed_callback,
	create_open_with_gtk_menu, reset_bonobo_open_with_menu,
	activate_callback):  Likewise.
	* src/athena-applicable-views.c (got_file_info_callback): Likewise.
	* src/athena-sidebar.c (athena_sidebar_update_buttons): Likewise.
	* src/athena-window-manage-views.c
	(athena_window_set_content_view): Likewise.
	* src/athena-window.c (athena_window_load_content_view_menu):
	Likewise.
	* test/test-athena-mime-actions-set.c (main): Likewise.
	* test/test-athena-mime-actions.c (main): Likewise.

2000-10-17  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_flatten_categories):

	Apply Eskil's memory patch to make the bootstrap not crash on
	success (yay!).

2000-10-17  Darin Adler  <darin@eazel.com>

	* check-FIXME.pl: Skip the macros directory.
	
	* libathena-extensions/athena-directory-async.c:
	(async_job_start), (async_job_end), (get_one_value_callback),
	(get_one_value), (async_job_wake_up): Add new calls that limit the
	number of async. jobs done at once.
	(directory_count_cancel), (deep_count_cancel), (mime_list_cancel),
	(top_left_cancel), (activation_uri_cancel), (file_info_cancel),
	(metafile_read_cancel), (metafile_read_done): End the async. job
	if it's cancelled.
	(metafile_read_try_public_metafile), (metafile_read_restart):
	Changed the old metafile_read_start function's name to
	metafile_read_restart since it's used on the second try.
	(is_anyone_waiting_for_metafile), (metafile_read_start): Move the
	logic about whether to start reading into this function to make it
	more like the other jobs. Also start the async. job.
	(file_list_cancel): Changed name for consistency and end the
	async. job.
	(directory_count_callback): End the async. job.
	(start_monitoring_file_list): Start the async job.
	(file_list_start): Moved logic about when to start loading the file
	list into this function to make it more like other jobs.
	(directory_count_start): Renamed to make it more like other jobs
	and start the async. job.
	(deep_count_callback): End the async. job.
	(deep_count_start): Start the async. job.
	(mime_list_callback): End the async. job.
	(mime_list_start): Start the async. job.
	(top_left_read_done): End the async. job.
	(top_left_start): Start the async. job.
	(get_info_callback): End the async. job.
	(file_info_start): Start the async. job.
	(activation_uri_done): End the async. job.
	(activation_uri_start): Start the async. job.
	(athena_directory_async_state_changed): Wake up directories that
	may have breathing from from all the cancellation.
	(athena_directory_cancel): Moved the cancelling code down here,
	remove a directory from the waiting list when it goes, and also
	wake up directories that may have breathing room from all the
	cancellation.
	
	* libathena-extensions/athena-directory-private.h: Remove
	request_read_metafile from the header.
	
	* libathena-extensions/athena-directory.c:
	(athena_directory_destroy): Eliminate the call to
	athena_directory_stop_monitoring_file_list since that's now
	handled by athena_directory_cancel.
	
	* libathena-extensions/athena-file-private.h: Removed the
	got_*_mime_type variables since they are the same as *_mime_type
	!= NULL.
	
	* libathena-extensions/athena-file.c: (destroy): Get rid of
	checks for NULL before calling g_free.
	(athena_file_update_info): Replace == FALSE with !. Simplified
	some tortuous logic by getting rid of checks for NULL that weren't
	needed and booleans that weren't needed.
	(get_either_mime_type): Add helper to make it easier to avoid
	confusion between default and slow MIME type.
	(athena_file_compare_by_type): Use get_either_mime_type so it
	works when default MIME type is NULL.
	(athena_file_get_type_as_string): Use get_either_mime_type so it
	works when default MIME type is NULL.
	(athena_file_get_slow_mime_type): Simplified logic. Also got rid
	of "application/nonono" which was left here by accident.
	(athena_file_get_mime_type): Simplified logic and use
	get_either_mime_type to share code.
	(athena_file_is_mime_type): Simplified logic and use
	get_either_mime_type to share code.
	
	* src/file-manager/fm-directory-view.c: Format tweaks.

	* user-guide/C/Makefile.am: Not so much echoing as we install.

2000-10-17  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3716, Bonobo paths for applications and
	viewers must be unique.

	Added unique index to bonobo path name.
	
	* src/file-manager/fm-directory-view.c:
	(add_open_with_app_bonobo_menu_item),
	(add_open_with_viewer_bonobo_menu_item),
	(add_application_to_bonobo_menu), (add_component_to_bonobo_menu),
	(reset_bonobo_open_with_menu):

2000-10-17  John Sullivan  <sullivan@eazel.com>

	Made "this application can only handle local files"
	dialog be parented on the AthenaWindow from whence
	it came.

	* libathena-extensions/athena-program-choosing.h:
	* libathena-extensions/athena-program-choosing.c:
	(athena_launch_application_parented): Removed this function
	(athena_launch_application): Made this function take a
	parent (can be NULL, but better not to be).

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_launch_application): Remove "_parented"
	
	* src/athena-sidebar.c: 
	(athena_sidebar_get_window): New helper function to get
	enclosing window.
	(command_button_callback),
	(athena_sidebar_chose_application_callback): Pass parent
	window to athena_launch_application.

2000-10-17  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-window.c: (athena_window_constructed),
	(athena_window_set_content_view_widget):
	fixed bug 3411, the sidebar resizes itself when viewing the
	summary page, by setting the "shrink" boolean to true
	when adding the content view container to the splitter.
	
2000-10-17  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3824 (Files in search list have unknown type)

	* libathena-extensions/athena-file.c:
	(athena_file_get_type_as_string): Made this check cached
	slow_mime_type as well as cached default_mime_type. I'm worried
	about this whole area -- why did we differentiate the two? I'll
	bet there are other lurking bugs around here.

2000-10-17  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3825 (Bonobo error messages viewing search results)
	Fixed bug 3826 ("Reveal in New Window" misplaced in context menu)

	* src/file-manager/fm-directory-view.c:
	(append_selection_menu_subtree): take an identifier, store
	it in menu item for later identification, just like other menu
	items. This will all change when we switch to using Bonobo for
	context menus.
	(fm_directory_view_real_create_selection_context_menu_items):
	Pass the identifier that list view code was expecting to find.
	* src/file-manager/fm-search-list-view.c:
	fixed typo in COMMAND_REVEAL_IN_NEW_WINDOW #define. Those darn
	typos are deadly with new Bonobo.

2000-10-17  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-file-operations.c:
	(get_next_duplicate_name):
	Part of fix to but 2840 - URI parsing works wrong for URIs with 
	# characters. I noticed duplicating and creating links to files 
	with funny characters like # was broken and added proper escaping
	code to fix it.

2000-10-17  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_do_transaction_all_files_check):
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_list_copy), (categorydata_copy),
	(categorydata_destroy_foreach), (categorydata_list_destroy),
	(packagedata_fill_from_rpm_header):
	* components/services/install/lib/eazel-install-types.h:

	Fix missing param in prune_packages.  Make categorydata_list_copy
	stop iterating sometime in my life.  Add matching
	categorydata_list_destroy. 
	
	* athena-installer/src/callbacks.c: (begin_install):
	* athena-installer/src/installer.c: (jump_to_error_page),
	(start_over), (dont_start_over), (create_finish_page_good),
	(get_required_name), (get_detailed_errors_foreach),
	(get_detailed_errors), (install_failed), (eazel_install_dep_check),
	(eazel_install_delete_files), (install_done), (toggle_button_lock),
	(eazel_installer_add_category), (check_system),
	(eazel_installer_do_install), (eazel_install_get_depends):
	* athena-installer/src/installer.h:
	* athena-installer/src/link.sh:

	Further attempts at recovering from a common error case (where the
	user ought to upgrade gnumeric too).  Fix up some of the text to
	match biz requirements.  Make a copy of the category list before
	doing the install-lib call, so that it doesn't munge our pristine
	list for the cases where we want to try again later.

2000-10-17  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_initialize), (ensure_uri_is_image),
	(set_album_cover), (dialog_destroy), (set_image_button_callback),
	(athena_music_view_set_album_image):
	for bug 2261, added a "set cover image" button to the music view,
	which is visible when there's no cover, which displays a file
	selector, and set the metadata when the user selects a valid image.
	This is almost complete, but it's not quite working yet.
	
	* src/athena-shell.c: (display_caveat):
	increased the font size of the caveat to 14pt, since it was
	a little too hard to read and there was plenty of space.
	
2000-10-16  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_update_menus):
	fixed occasional segfaults from fm_icon_view_update_menus
	being called from idle after they've been destroyed; fixed by
	exiting if the menus_ready boolean is clear.
	
	* components/music/athena-music-view.c:
	(athena_music_view_set_album_image), (metadata_callback),
	(athena_music_view_update_from_uri):
	fixed bug 3720, music view asks for album cover metadata incorrectly.
	Fixed by doing it correctly, using athena_file_call_when_ready.
	This also partially fixes bug 2261, but it's still too hidden, so
	I won't close it out until we have an explicit way to do it.
	
2000-10-17  Mathieu Lacage  <mathieu@eazel.com>

	fix "do nothing" part of bug 3640
	* components/tree/athena-tree-view.c: move 
	re-init of code from drag_leave to drag_begin.

2000-10-16  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_destroy):
	fixed a problem where we generated a zillion bonobo criticals
	when the view changed. The problem was that the fm-icon-view
	was trying to update the layout menus while it was being destroyed,
	after the menus were already gone.  The fix is clearing the
	"menus_ready" boolean at the start of the destroy method.
	 
2000-10-16  Eskil Heyn Olsen  <eskil@eazel.com>

	* athena.spec.in:
	Reverting change to check >= vs = issue.

2000-10-16  Eskil Heyn Olsen  <eskil@eazel.com>

	* athena.spec.in:
	Changed the dep of athena-maozilla to mozilla = M18 instead of
	mozilla-M18. I can't put in >= M18, because rpm's fucks up on
	alphachar versions.

2000-10-16  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_fetch_dependencies), (dump_one_package),
	(dump_packages_foreach), (dump_packages),
	(eazel_install_ensure_deps):
	Debug output.
	Revamping the error tree for failures' reg. circular conflicts.
	
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_list_copy), (categorydata_copy),
	(packagedata_list_copy), (eazel_install_requirement_dep_compare):
	Fixed a bug in the copy functions and the dep_compare. 
	
	* athena-installer/src/Makefile:
	Yeah...
	
	* athena-installer/src/installer.c:
	(get_detailed_errors_foreach):
	Inserting code to make the circular conflict handling nice.

2000-10-16  Ramiro Estrugo  <ramiro@eazel.com>

	* athena.spec.in:
	Fix a typo in the required version of mozilla.
	
2000-10-16  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Remove extraneous debugging printf.
	
2000-10-16  Rebecca Schulman  <rebecka@eazel.com>

	* libathena/athena-clipboard.c: (add_menu_items_callback),
	(ui_component_remove_container_and_unref),
	(finish_setting_up_editable),

	Fixed a problem with the clipboard caused by having many components
	in the same container with the same name, and fixed a potential
	leak.

2000-10-16  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3789 (Zoom In/Zoom Out/Back/Forward have lost
	their control-key equivalents)

	* src/athena-shell-ui.xml: Updated the specification
	of non-alphanumeric keyboard equivalents to the new
	required style ("*Control*equal", not "*Control*=").

2000-10-16  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(mime_list_load): Added a (conditional) line of spam for 
	when load_directory is called to get the MIME list.

2000-10-16  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/Makefile.am:
	* components/services/install/command-line/eazel-alt-install.c:
	* components/services/install/command-line/eazel-install.c:
	* components/services/install/command-line/eazel-package-query.c:
	* components/services/install/command-line/eazel-revert.c:
	* components/services/install/command-line/eazel-uninstall.c:
	Removed these old evil files.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_list_copy), (categorydata_copy),
	(packagedata_list_copy), (packagedata_copy):
	Implemented package & categorydata copy functions.
	
	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.h:
	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (determine_mandrake_version), (determine_suse_version),
	(determine_debian_version):
	Removed g_assert_not_reached calls. Also added enum for YELLOWDOG.
	
	* athena-installer/src/Makefile:
	* athena-installer/src/installer.c: (get_required_name),
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_install_dep_check), (check_system):
	Doing some funk to handle circular deps better.
	
2000-10-16  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-list.c:
	(athena_list_keyboard_navigation_key_press),
	(athena_list_get_first_selected_row),
	(athena_list_get_last_selected_row):
	* libathena-extensions/athena-list.h:

	Finished up Matt Bissiri's earlier checkin for him.
	Removed the confusingly almost-redundant
	athena_clist_get_first/last_selected_row; made
	athena_list_get_last_selected_row public to match
	get_first_selected_row. Thanks to Matt for the patch.

2000-10-16  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-global-preferences.c: Changed
	the search default to the one at Eazel as planned.

2000-10-16  Pavel Cisler  <pavel@eazel.com>

	* cut-n-paste-code/widgets/gtkclist/Makefile.am:
	* cut-n-paste-code/widgets/gtkclist/gtkclist.c:
	* cut-n-paste-code/widgets/gtkclist/gtkclist.h:

	Get rid of obsolete copy of GtkCList.

2000-10-12  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/fm-list-view.c: (fm_list_get_drag_pixmap):
	Fix 3558 - Athena crashes with a specific sequence of icon
	dragging ...
	Handle a case where the cell pixmap does not have a mask.
	
	* libathena-extensions/athena-icon-container.c:
	(motion_notify_event):
	Small renaming.
	
	* libathena-extensions/athena-list.c:
	(athena_list_dnd_initialize), (athena_list_drag_begin):
	Get rid of a drag_begin signal override that is not needed.

2000-10-16  Josh Barrow  <josh@eazel.com>

	* icons/Makefile.am:
	* icons/emblem-symbolic-link-*.png
	Removed all of the different size symbolic link icons.  They 
	were useless as the emblems are now stuck at the defautl size.

2000-10-16  Rebecca Schulman  <rebecka@eazel.com>

	Fixed bug 3745, that reverse sort order / tighter
	layout buttons weren't working after the newest bonobo
	changes

	* src/file-manager/fm-icon-view.c:
	(tighter_layout_state_changed_callback),
	(fm_icon_view_create_background_context_menu_items),
	(sort_reversed_state_changed_callback), (fm_icon_view_merge_menus):
	Changed the callbacks for the buttons to use listeners and ids 
	rather than verbs.
	* src/file-manager/athena-icon-view-ui.xml:
	Added id fields

2000-10-16  Ramiro Estrugo  <ramiro@eazel.com>

	* acconfig.h:
	* configure.in:
	Define the build timestamp only if given in the environment.
	
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_build_timestamp):
	* libathena-extensions/athena-file-utilities.h:
	New function to obtain the build timestamp.
	
	* src/athena-window-manage-views.c:
	(window_set_title_with_timestamp), (update_title):
	* src/athena-window-menus.c: (get_about_box_timestamp_string),
	(help_menu_about_athena_callback):
	Display the build timestamp in both the about box and window
	title.   This only happens if the build timestamp is set at
	compile time.
	
2000-10-16  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	Update docs for the fact that we now require Mozilla-M18.
	
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_content_view_one_time_happenings),
	(athena_mozilla_content_view_initialize),
	(athena_mozilla_content_view_destroy),
	(mozilla_load_location_callback), (mozilla_net_state_callback),
	(mozilla_dom_mouse_click_callback),
	(mozilla_translate_uri_if_needed),
	(mozilla_untranslate_uri_if_needed):
	Cleanup a bunch of pre Mozilla M18 code.  Turn of a rogue printf.
	Remove the cut-n-pasted Bonobo merging code.  We can add it back
	if we ever have something we really need to merge.
	
	* configure.in:
	Update for new Mozilla M18 requirement.  Bail of detected Mozilla
	is not M18.
	
	* athena.spec.in:
	Add mozilla-m18 dependency to the athena-mozilla package.
	
2000-10-16  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-label.c:
	(athena_label_set_line_wrap_separators):
	Fix memory leak.
	
2000-10-16  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3582 (warning on boot due to verb/button problem
        in non-Eazel-service build)

	* src/athena-window-toolbars.c:
	(athena_window_initialize_toolbars): Call set_hidden on
	the command, not the widget. We were waiting for a Bonobo
	fix to make this change, because it didn't work last time
	we tried. But now it does, so the Bonobo fix must have
	occurred.

2000-10-16  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3753 (status bar shows selected items info even
	after they are deselected)

	* src/athena-window.c: 
	(athena_window_clear_status): Reinstate workaround (and
	associated FIXME) of passing " " to clear the status. This
	had been fixed in Bonobo but was rebroken some time in the
	last few days.
	(athena_window_set_status): Call athena_window_clear_status
	when the desired status text is empty or NULL, instead of
	ignoring the request.

2000-10-16  Matt Bissiri  <bissiri@eecs.umich.edu>

	* libathena-extensions/athena-list.c:
	(athena_clist_get_first_selected_row),
	(athena_clist_get_last_selected_row):
	Now that AthenaList derives from AthenaCList instead of GtkCList,
	do not call `athena_gtk_clist_get_first_selected_row' or
	`athena_gtk_clist_get_last_selected_row'.
	Instead add implementation using AthenaCList instead of GtkCList.
	This fixes a bug where up/down/pgup/pgdown keys did not work properly
	when viewing directory as list.
	(athena_list_get_first_selected_row):
	To avoid code duplication, replace the body of this function
	with a call to `athena_clist_get_first_selected_row'.

2000-10-16  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-label.c:
	(athena_label_initialize), (athena_label_destroy),
	(render_buffer_pixbuf), (label_recompute_line_geometries),
	(athena_label_set_line_offset),
	(athena_label_get_drop_shadow_color),
	(athena_label_set_line_wrap), (athena_label_get_line_wrap),
	(athena_label_set_line_wrap_width),
	(athena_label_get_line_wrap_width),
	(athena_label_set_line_wrap_separators),
	(athena_label_get_line_wrap_separators):
	* libathena-extensions/athena-label.h:
	Add support for line wrappping.

	* src/athena-shell.c: (display_caveat):
	Change the caveat text to not use hard coded new lines and use the
	new AthenaLabel text wrapping feature instead.

	* test/.cvsignore:
	* test/Makefile.am:
	* test/test-athena-label.c: (main):
	* test/test-athena-wrapped-label.c: (delete_event),
	(create_gtk_label), (create_athena_label),
	(create_gtk_label_window), (create_athena_label_window), (main):
	Add a test for the AthenaLabel line wrapping feature.
	
2000-10-16  Gene Z. Ragan  <gzr@eazel.com>

	Fixed an error where I was escaping the wrong item
	to create a unique verb name.
	
	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_add_menu_item):
	
	* src/athena-window-menus.c: (append_bookmark_to_menu):

2000-10-15  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri):
	As Arlo suggested, moved the album cover image to the right
	of the play controls, so the play controls appear in the same position
	whether or not a cover image is present.
	
2000-10-15  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-file.h,
	libathena-extensions/athena-file.c
	(athena_file_get_file_info_result): Renamed and changed
	interface.

	* src/athena-applicable-views.c (got_file_info_callback,
	athena_navigation_info_new, athena_navigation_info_cancel,
	athena_navigation_info_free): Reorganize to use the new
	AthenaFile features.

2000-10-15  Kjartan Maraas  <kmaraas@gnome.org>

	* components/services/install/command-line/eazel-install.c:
	s/RedHat/Red Hat Linux/g
	
2000-10-15  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-throbber.c: (load_themed_image),
	(athena_throbber_load_images):
	implemented theme indirection for throbbers, so themes can
	share throbbers
	* icons/ardmore/ardmore.xml:
	made the ardmore theme use the eazel theme's throbber
	
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_update_icon):
	at Susan's suggestion, pinned emblem size to 100%, so emblems don't
	get huge when you scale up.
	
2000-10-14  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-throbber.c: (athena_throbber_initialize_class),
	(athena_throbber_initialize), (athena_throbber_theme_changed),
	(athena_throbber_size_allocate),
	(athena_throbber_size_request):
	made the throbber resize and reposition itself properly when the
	theme changes by implementing size_request and calling queue_resize
	when the theme changes.
	
2000-10-13  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-throbber.c: (bump_throbber_frame),
	(athena_throbber_load_images):
	added support for throbbers with a different number of frames
	by adding a frame count fetched from the theme data
	
	* configure.in:
	* icons/eazel/Makefile.am:
	* icons/eazel/throbber/.cvsignore:
	* icons/eazel/throbber/Makefile.am:
	* icons/eazel/throbber/*.png:
	added a eazel logo throbber to the eazel theme
	
	* icons/eazel/eazel.xml:
	* icons/default.xml:
	* icons/gnome/gnome.xml:
	added the appropriate frame count to the relevant themes.

2000-10-13  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_class_initialize), (eazel_install_install_packages):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_free_rpm_system_close_db_foreach):
	* components/services/install/lib/eazel-install-rpm-glue.h:

	Don't set up a default delete_files signal handler when not using
	corba (otherwise it overrides the real signal).  Clean up some
	destroy code in preparation for making the bootstrap installer
	able to retry.

2000-10-13  Robey Pointer  <robey@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(cancel_mime_list), (athena_directory_cancel),
	(set_up_request_by_file_attributes),
	(athena_directory_monitor_add_internal),
	(athena_async_destroying_file), (lacks_mime_list),
	(wants_mime_list), (request_is_satisfied),
	(athena_directory_invalidate_counts), (mime_list_one),
	(mime_list_callback), (mime_list_load), (mime_list_start),
	(start_or_stop_io):
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-file-attributes.h:
	* libathena-extensions/athena-file-private.h:
	* libathena-extensions/athena-file.c: (destroy),
	(athena_file_recompute_deep_counts),
	(athena_file_get_mime_list):
	* libathena-extensions/athena-file.h:

	Added mime-list support (can fetch the list of mime-types in the
	subdirs of a directory) for bug 3364.

2000-10-13  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_do_rpm_dependency_check):
	Fix for 3537
	* athena-installer/src/Makefile:
	?
	* athena.spec.in:
	Fixing athena rpm build

2000-10-13  Rebecca Schulman  <rebecka@eazel.com>

	* libathena/athena-clipboard-ui.xml:
	Fixed the names of these files to match the menu items in shell-ui
	* libathena/athena-clipboard.h:
	* libathena/athena-clipboard.c: (add_menu_items_callback),
	(container_copy_free), (ui_component_remove_container_and_unref),
	(finish_setting_up_editable),
	(finish_setting_up_editable_from_bonobo_control_callback),
	(athena_clipboard_set_up_editable_from_bonobo_control),
	(athena_clipboard_set_up_editable_from_bonobo_ui_container):
	Added the from_ui_container function for local editable widgets
	to use, and changed the function sequence around so that the two
	clipboard set up functions share an api except for the initial calling
	functions

	* src/athena-window-private.h:
	* src/athena-window.c: (athena_window_constructed),
	(athena_window_show), (athena_window_get_bonobo_ui_container),
	(athena_window_get_bonobo_ui_component):
	added the new athena-window_get_bonobo_ui_component function for local  
	editables to use, and changed the construction order so that menu items
	would get merged correctly (set up the main window menus before setting
	up the location bar)

	* src/athena-complex-search-bar.c:
	(athena_complex_search_bar_new):
	* src/athena-complex-search-bar.h:
	* src/athena-location-bar.c: (athena_location_bar_get_window),
	(athena_location_bar_initialize), (athena_location_bar_new),
	(athena_location_bar_set_location):
	* src/athena-location-bar.h:
	* src/athena-simple-search-bar.c:
	(athena_simple_search_bar_initialize),
	(athena_simple_search_bar_destroy),
	(athena_simple_search_bar_new):
	* src/athena-simple-search-bar.h:
	* src/athena-switchable-navigation-bar.c:
	(athena_switchable_navigation_bar_initialize),
	(athena_switchable_navigation_bar_destroy),
	(athena_switchable_navigation_bar_new):
	* src/athena-switchable-navigation-bar.h:
	* src/athena-switchable-search-bar.c:
	(athena_switchable_search_bar_initialize),
	(athena_switchable_search_bar_destroy),
	(athena_switchable_search_bar_new):
	* src/athena-switchable-search-bar.h:
	Changed the location bar and switchable 
	search bar to take windows in the constructor funciton.
	These are used to get the local ui component when
	setting up the clipboard
	

2000-10-13  Eskil Heyn Olsen  <eskil@eazel.com>

	* athena.spec.in:
	Updated deps to 
	bonobo >= 0.21
	oaf >= 0.5.1
	gdk-pixbuf >= 0.9.0
	as those are the versions we're building against.

2000-10-13  Gene Z. Ragan  <gzr@eazel.com>

	Work in progress on creating unique ideas for menu items
	added to the bookmarks menu.
	
	* libathena-extensions/athena-bonobo-extensions.c:
	* libathena-extensions/athena-bonobo-extensions.h:
	(athena_bonobo_add_menu_item),
	(athena_bonobo_get_menu_item_verb_name):

	* src/file-manager/fm-directory-view.c:
	(add_open_with_app_bonobo_menu_item),
	(add_open_with_viewer_bonobo_menu_item):
	
	* src/athena-window-menus.c: (append_bookmark_to_menu),
	(create_menu_item_from_node), (append_dynamic_bookmarks),
	(refresh_go_menu):

2000-10-13  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3592 (rename text widget persists after dragging icon)

	* libathena-extensions/athena-icon-container.c:
	(motion_notify_event): added end_renaming_mode call
	when a drag begins.

2000-10-13  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_get_type_as_string):
	fixed bug 3711, sidebar says home directory is a "program", by
	explicitly checking athena_file_is_directory if the mime-type
	is NULL and returning "folder" in that case.
	
	* src/athena-window-toolbars.c:
	(athena_window_initialize_toolbars):
	added some padding around the throbber to better position it in
	the toolbar.
	
2000-10-13  John Sullivan  <sullivan@eazel.com>

	* src/athena-applicable-views.c:
	(get_athena_navigation_result_from_gnome_vfs_result):
	added GNOME_VFS_ERROR_INTERNAL to the known list of
	errors that we can't say anything useful about, since
	this is firing in some cases when Mozilla fails.

2000-10-13  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c: Changed the
	SILENT_WINDOW_OPEN_LIMIT from 10 to 5 after feedback that
	opening 9 windows accidentally was dragging someone's
	machine into the muck.

2000-10-13  John Sullivan  <sullivan@eazel.com>

	Added some conditionalized debugging spam to help
	investigate bug 3389 (performance problem with
	load_directory getting called so often)

	* libathena-extensions/athena-directory-async.c:
	(start_monitoring_file_list), (start_getting_directory_counts),
	(deep_count_load): Add #ifdeffed-out spam whenever 
	gnome_vfs_async_load_directory is called.

2000-10-13  Andy Hertzfeld  <andy@eazel.com>

	* data/emblems/Makefile.am:
	* data/emblems/confidential.gif: removed
	* data/emblems/cool.png:
	* data/emblems/secret.png:
	added new emblems from Susan, and deleted confidential
	
	* icons/Makefile.am:
	* icons/emblem-confidential.gif: removed
	* icons/emblem-cool.svg:
	* icons/emblem-distinguished.svg:
	* icons/emblem-new.svg:
	* icons/emblem-noread.svg:
	* icons/emblem-nowrite.svg:
	* icons/emblem-secret.svg:
	added and updated emblems from Susan, and deleted the
	confidential emblem (replace by "secret").
	
2000-10-12  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-list.c: (draw_row):
	Fix 3607 and 3639. Both bugs were caused by the same lame
	typo.
	
2000-10-13  Mathieu Lacage  <mathieu@eazel.com>

	* docs/state-machines.txt: new design for the state 
	machine taking into account the new async states.
	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_set_icon), (oaf_activation_callback),
	(athena_bonobo_activate_from_id),
	(athena_bonobo_activate_stop), 
	(athena_bonobo_activate_free):
	add async activation call.
	* libathena-extensions/athena-bonobo-extensions.h:
	add prototypes.
	* src/athena-view-frame.c:
	(athena_view_frame_initialize_class), (view_frame_activating),
	(view_frame_not_activated), (view_frame_activated),
	(view_frame_stop_activation), (view_frame_wait),
	(view_frame_underway), (view_frame_wait_is_over),
	(view_frame_loaded), (view_frame_failed),
	(athena_view_frame_set_to_component), (activation_callback),
	(athena_view_frame_load_client_async),
	(athena_view_frame_load_client),
	(athena_view_frame_stop_activation),
	(athena_view_frame_load_location):
	implement new state machine. add comments to explain by which stimulus
	the state-chaging functions are triggered.
	* src/athena-view-frame.h:
	add prototype for new async activation function of ViewFrames.

2000-10-12  Andy Hertzfeld  <andy@eazel.com>

	* src/Makefile.am:
	* src/athena-toolbar.c:
	* src/athena-toolbar.h:
	removed the athena-toolbar class, since it was obsoleted by the
	recent bonobo ui handler changes.
	
	* src/athena-window-toolbars.c:
	removed unused reference to athena-toolbar.h
	
2000-10-12  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/toc-elements.c:
        * components/help/converters/gnome-db2html2/sect-preparse.c:
        * components/help/converters/gnome-db2html2/sect-elements.c:
        * components/help/converters/gnome-db2html2/gdb3html.h:
        Apply (modified) patch submitted by John Fleck (jfleck@inkstain.net)
        for APPENDIX tag support

        * components/help/converters/gnome-db2html2/sect-elements.c:
        * components/help/converters/gnome-db2html2/toc-elements.c:
        (sect_sect_start_element): Add in 'break;' at the appropriate sections
        (oops - somebody forgot to include them).
        Moved a misplaced 'break;' (which could have screwed up sect4/sect5
        tags)

2000-10-12  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/athena-directory-view-ui.xml:
	"New Folder" was sadly lacking a tip.

2000-10-12  Darin Adler  <darin@eazel.com>

	Fixed bug 3578 (Mozilla component lacks tool bar button)

	* components/mozilla/athena-mozilla-ui.xml:
	Turn on the XML for the tool bar.

	* src/athena-window-manage-views.c:
	(athena_window_set_content_view): Took out dead code.

2000-10-12  J Shane Culpepper  <pepper@eazel.com>

	* athena.spec.in:

	Fixind spec file for tinderbox build breakage.

2000-10-12  Mike Fleming  <mfleming@eazel.com>

	Back and forth: Darin and Maciej convince me to keep libammonite-gtk
	and eazel-proxy-util in ammonite

	* components/mozilla/Makefile.am:
	* components/mozilla/athena-mozilla-content-view.c:
	* components/services/trilobite/Makefile.am:
	* components/services/trilobite/eazel-proxy-util/.cvsignore:
	* components/services/trilobite/eazel-proxy-util/Makefile.am:
	* components/services/trilobite/eazel-proxy-util/ammonite-methods.c
	onf.sub:
	* components/services/trilobite/eazel-proxy-util/eazel-proxy-util.c
	:
	* components/services/trilobite/libammonite-gtk/.cvsignore:
	* components/services/trilobite/libammonite-gtk/Makefile.am:
	* components/services/trilobite/libammonite-gtk/ammonite-login-dial
	og.c:
	* components/services/trilobite/libammonite-gtk/ammonite-login-dial
	og.h:
	* components/services/trilobite/libammonite-gtk/libammonite-gtk.c:
	* components/services/trilobite/libammonite-gtk/libammonite-gtk.h:
	* configure.in:
	* athena.spec.in:

2000-10-12  J Shane Culpepper  <pepper@eazel.com>

	* components/services/login/athena-view/athena-change-password-
	view.c: (generate_change_password_form), (entry_changed_cb),
	(authn_succeeded), (authn_failed), (start_change_password),
	(change_password_button_cb), (maintenance_button_cb),
	(athena_change_password_view_initialize_class),
	(athena_change_password_view_initialize),
	(athena_change_password_view_destroy),
	(athena_change_password_view_get_athena_view),
	(athena_change_password_view_load_uri),
	(change_password_load_location_callback):
	* components/services/login/athena-view/athena-change-password-
	view.h:
	* components/services/login/athena-view/athena-change-password-
	view.oafinfo:

	Adding missing files.  Sorry about that.

2000-10-12  J Shane Culpepper  <pepper@eazel.com>

	* components/services/login/athena-view/.cvsignore:
	* components/services/login/athena-view/Makefile.am:
	* components/services/login/athena-view/main.c:
	(change_password_object_destroyed), (change_password_make_object),
	(main):
	* components/services/login/athena-view/athena-login-view.c:
	* components/services/login/athena-view/athena-login-view.h:
	* components/services/login/athena-view/athena-login-view.oafin
	fo:
	Fix for Bug # 3065. Renamed login view to change password view.

2000-10-12  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3717 (Unchecking "show built-in bookmarks" doesn't
	make them go away)

	* src/athena-window-menus.c: 
	tweaked the names of a couple of #defines
	(refresh_bookmarks_menu): Added parameter check.
	(athena_window_remove_bookmarks_menu_items): Remove the
	built-in bookmarks as well as the dynamic ones.
	(athena_window_remove_go_menu_items), (append_dynamic_bookmarks),
	(refresh_go_menu): Updated for #define name change.

2000-10-12  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-directory-background.c: Change
	"file" back to "directory" because it was actually part of the
	theme file format, not an internally used string as I first
	thought.
	
2000-10-12  Mike Fleming  <mfleming@eazel.com>

	* components/services/trilobite/eazel-proxy-util/Makefile.am:
	* components/services/trilobite/libammonite-gtk/ammonite-login-dial
	og.c:
	Fix build break

2000-10-12  Michael Engber  <engber@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_initialize), (athena_music_view_load_uri),
	(music_view_background_appearance_changed_callback):
	Music views now update the color of their label text when
	the background changes. (bug 3571)
	* libathena-extensions/athena-gdk-extensions.h:
	Added some color constants with opaque alpha values,
	removed leading underscores from macro variable names.

2000-10-12  Mike Fleming  <mfleming@eazel.com>

	Move libammonite-gtk and eazel-proxy-util from ammonite to 
	athena/components/services/trilobite.  libammonite-gtk will
	soon be dependant on libathena-extensions

	* components/mozilla/Makefile.am:
	* components/mozilla/athena-mozilla-content-view.c:
	* components/services/trilobite/Makefile.am:
	* components/services/trilobite/eazel-proxy-util/.cvsignore:
	* components/services/trilobite/eazel-proxy-util/Makefile.am:
	* components/services/trilobite/eazel-proxy-util/ammonite-methods.c
	onf.sub:
	* components/services/trilobite/eazel-proxy-util/eazel-proxy-util.c
	:
	* components/services/trilobite/libammonite-gtk/.cvsignore:
	* components/services/trilobite/libammonite-gtk/Makefile.am:
	* components/services/trilobite/libammonite-gtk/ammonite-login-dial
	og.c:
	* components/services/trilobite/libammonite-gtk/ammonite-login-dial
	og.h:
	* components/services/trilobite/libammonite-gtk/libammonite-gtk.c:
	* components/services/trilobite/libammonite-gtk/libammonite-gtk.h:
	* configure.in:
	* athena.spec.in:

2000-10-12  Darin Adler  <darin@eazel.com>

	* src/athena-window-manage-views.c: (stop_loading),
	(stop_loading_cover), (athena_window_stop_loading): Add calls to
	tell views to stop loading. Fixes bug 2939 (AthenaView stop call
	never made when stop button pressed).

2000-10-12  Darin Adler  <darin@eazel.com>

 	Fixed two bugs that got in Pavel's and my way as we were testing
	our bug fixes.
	
	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_removed): Fix bug where it won't
	update the directory count if there is no AthenaFile object
	already existing for the file.
	(athena_directory_notify_files_moved): Mark any overwritten file
	as "gone" instead of just having two non-gone AthenaFile objects
	with the same URI.
	
	* src/file-manager/fm-desktop-icon-view.h:
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_destroy), (fm_desktop_icon_view_initialize),
	(mount_unmount_removable): Got rid of code that acted like the
	volume monitor belonged to it. The main problem was destroying it,
	which is wrong in any case (at most you'd unref it, but even that
	is illegal since athena_volume_monitor_get doesn't return a
	ref).
	
2000-10-12  Darin Adler  <darin@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri): Add a FIXME.
	
	* libathena-extensions/athena-directory-async.c:
	(is_tentative), (get_non_tentative_file_list),
	(athena_directory_monitor_add_internal), (ready_callback_call):
	Change callbacks so they won't redundantly report files that
	haven't really been discovered to exist.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy): Fixed AthenaFile leak by adding an
	unref of "directory_as_file".
	(file_list_from_uri_list), (selection_changed_callback),
	(display_pending_files): Simplified some selection-related code.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_real_merge_menus): Use DATADIR instead of
	ATHENA_DATADIR, since that's where the UI XML files are. Not
	sure why this wasn't checked in last time.
	* src/athena-window.c: (athena_window_constructed): Use
	DATADIR instead of ATHENA_DATADIR, since that's where the UI XML
	files are. Not sure why this wasn't checked in last time.
	
	* src/athena-main.c: (main): Add more domains to the list of the
	ones that are fatal. Maybe we can somehow use --g-fatal-warnings
	instead some day, but that makes the warnings core dump, and we
	like to be able to continue.
	
	* src/athena-window-manage-views.c:
	(athena_window_begin_location_change): Removed the misguided
	event loop from here. It could only cause problems and contained
	no motivating comment explaining why it's a good idea.

2000-10-12  J Shane Culpepper  <pepper@eazel.com>

	* components/services/login/athena-view/athena-login-view.oafinfo:
	Fixing oafinfo to point to eazel-pw:

2000-10-12  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3718 ("Open With" submenu enabled when it shouldn't be)

	* src/file-manager/fm-directory-view.c:
	(selection_contains_one_item_in_menu_callback),
	(selection_not_empty_in_menu_callback): Improved error messages.
	(open_with_other_program): Used selection_contains_one_item_
	in_menu_callback to avoid crash if menu state doesn't match
	expectations.
	(reset_bonobo_open_with_menu): Sensitize the "Open With" submenu
	appropriately.

2000-10-12  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-directory-metafile.h,
	libathena-extensions/athena-directory-metafile.c
	(athena_directory_get_metadata, athena_directory_set_metadata,
	athena_directory_get_metadata_list,
	athena_directory_set_metadata_list,
	athena_directory_get_boolean_metadata,
	athena_directory_set_boolean_metadata,
	athena_directory_get_integer_metadata,
	athena_directory_set_integer__metadata): Bye bye to directory
	metadata.
	(set_metadata_string_in_metafile): don't worry about the directory
	metadata case any more.
	(athena_directory_get_boolean_file_metadata,
	athena_directory_set_boolean_file_metadata,
	athena_directory_get_integer_file_metadata,
	athena_directory_set_integer_file_metadata): Helper functions
	for implementing AthenaFile metadata convenience wrappers.

	* libathena-extensions/athena-file.h,
	libathena-extensions/athena-file.c:
	(athena_file_get_boolean_metadata,
	athena_file_get_integer_metadata,
	athena_file_set_boolean_metadata,
	athena_file_set_integer_metadata): Convenience wrappers for
	boolean or integer file metadata.
	
	* libathena-extensions/athena-directory.h,
	libathena-extensions/athena-directory.c
	(athena_directory_initialize_class,
	athena_directory_emit_metadata_changed): removed
	"metadata_changed" signal.
	(got_metadata_callback): Don't assert the file list is NULL.
	(athena_self_check_directory): Use file metadata API.

	* libathena-extensions/athena-metadata.h: No more
	per-directory metadata, it's all per file now.

	* libathena-extensions/athena-directory-background.h,
	libathena-extensions/athena-directory-background.c
	(athena_file_background_set_desktop,
	athena_file_background_is_desktop,
	athena_file_background_peek_theme_source,
	athena_file_background_get_default_settings,
	athena_file_background_read_desktop_settings,
	athena_file_background_write_desktop_settings,
	athena_file_background_write_desktop_default_settings,
	call_settings_changed, athena_file_background_event_filter,
	desktop_background_destroyed_callback,
	athena_file_background_receive_root_window_changes,
	athena_file_update_root_window, athena_file_background_is_set,
	background_changed_callback, saved_settings_changed_callback,
	athena_file_background_theme_changed, background_reset_callback,
	background_destroyed_callback,
	athena_connect_background_to_file_metadata,
	athena_connect_desktop_background_to_file_metadata,
	athena_connect_background_to_file_metadata_by_uri): Work off of
	file metadata, not directory metadata, and thus take a
	AthenaFile not a AthenaDirectory.

	* libathena-extensions/athena-mime-actions.c:
	(athena_file_wait_for_metadata,
	athena_mime_get_default_action_type_for_uri,
	athena_mime_get_default_application_for_uri_internal,
	athena_mime_get_default_component_for_uri_internal,
	athena_mime_get_short_list_applications_for_uri,
	athena_mime_get_short_list_components_for_uri,
	athena_mime_get_all_applications_for_uri,
	athena_mime_get_all_components_for_uri,
	athena_mime_set_default_action_type_for_uri,
	athena_mime_set_default_application_for_uri,
	athena_mime_set_default_component_for_uri,
	athena_mime_set_short_list_applications_for_uri,
	athena_mime_set_short_list_components_for_uri,
	athena_mime_extend_all_applications_for_uri,
	athena_mime_remove_from_all_applications_for_uri,
	get_explicit_content_view_iids_from_metafile): Use file metadata,
	not directory metadata.

	* src/file-manager/fm-directory-view.h,
	src/file-manager/fm-directory-view.c
	(fm_directory_view_get_directory_as_file): Function to access the
	AthenaFile we now keep around that represents the directory
	itself.
	(fm_directory_view_initialize_class, files_have_any_custom_images,
	compute_menu_item_info, fm_directory_view_activate_file,
	fm_directory_view_load_uri, metadata_ready_callback,
	disconnect_model_handlers, fm_directory_view_real_is_read_only,
	showing_trash_directory): Use file metadata, not directory
	metadata, and use the new `directory_as_file' field where
	appropriate.
	(finish_loading_uri): Monitor more files attributes (the ones
	needed to get an icon, plus ones we might actually display in a
	directory view.
	
	* src/file-manager/fm-desktop-icon-view.c
	(fm_desktop_icon_view_create_background_context_menu_items): Use
	file metadata not directory metadata.

	* src/file-manager/fm-icon-view.h,
	src/file-manager/fm-icon-view.c: (set_sort_criterion,
	tighter_layout_callback, fm_icon_view_get_directory_sort_by,
	fm_icon_view_real_get_directory_sort_by,
	fm_icon_view_set_directory_sort_by,
	fm_icon_view_real_set_directory_sort_by,
	fm_icon_view_get_directory_sort_reversed,
	fm_icon_view_real_get_directory_sort_reversed,
	fm_icon_view_set_directory_sort_reversed,
	fm_icon_view_real_set_directory_sort_reversed,
	fm_icon_view_get_directory_auto_layout,
	fm_icon_view_real_get_directory_auto_layout,
	fm_icon_view_set_directory_auto_layout,
	fm_icon_view_real_set_directory_auto_layout,
	fm_icon_view_get_directory_tighter_layout,
	fm_icon_view_real_get_directory_tighter_layout,
	fm_icon_view_set_directory_tighter_layout,
	fm_icon_view_real_set_directory_tighter_layout, set_sort_reversed,
	fm_icon_view_begin_loading, fm_icon_view_set_zoom_level,
	sort_direction_callback, layout_changed_callback,
	icon_container_preview_callback, icon_position_changed_callback):
	Use file metadata not directory metadata.

	* src/file-manager/fm-list-view.c: (fm_list_view_begin_loading,
	fm_list_view_set_zoom_level, fm_list_view_sort_items): Use file
	metadata not directory metadata.

	* src/file-manager/fm-search-list-view.c (real_adding_file): Tweak
	the code that monitors file attributes.

	* components/music/athena-music-view.c
	(athena_music_view_update_from_uri): Use the new
	athena_file_background API.

2000-10-12  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_scroll):
	* libathena-extensions/athena-icon-dnd.c:
	(athena_icon_container_position_shadow),
	(auto_scroll_timeout_callback), (handle_local_move):
	* libathena-extensions/athena-icon-private.h:
	Fix a bug where the drag&drop selection shadow would sometimes
	run away from the dragged icons. This is kind-of related to 3406
	that I fixed earlier today. The problem happened when
	an autoscroll didn't actually happen because the adjustment
	values got clamped but the adjustment delta did get applied to
	the initial cached drag start location.
	Made athena_icon_container_scroll return a boolean determining
	if a scroll actually happened.

2000-10-12  Robey Pointer  <robey@eazel.com>

	* athena-installer/src/callbacks.c: (begin_install),
	(prep_finish), (prep_lock):
	* athena-installer/src/callbacks.h:
	* athena-installer/src/installer.c: (start_over),
	(dont_start_over), (jump_to_retry_page), (while),
	(get_detailed_errors_foreach), (eazel_installer_do_install):
	* athena-installer/src/installer.h:

	First swing at making the bootstrap installer able to recover from
	file conflict errors by attempting to download upgraded versions
	of what we'd break.

2000-10-12  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-shell-ui.xml:
	set the "pack-end" property on the throbber.  This, combined
	with a bunch of bonobo changes, fixes bug 3390, the throbber
	is not properly positioned in the toolbar.
	
2000-10-11  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_removed,
	athena_directory_notify_files_moved): Use
	`athena_file_get_existing', not `athena_file_get', to check if
	a file is already known. `athena_file_get' would have created
	new AthenaFiles and AthenaDirectories only to do redundant
	notification later in the function. Also, the old code was a bit
	silly because `athena_file_get' only returns NULL for a NULL
	URI.

	Work towards bug 3362, eliminate directory metadata.
	
	* libathena-extensions/athena-file-attributes.h: Added
	ATHENA_FILE_ATTRIBUTE_METADATA attribute.

	* libathena-extensions/athena-directory-async.c
	(set_up_request_by_file_attributes):

	* libathena-extensions/athena-wait-until-ready.h,
	libathena-extensions/athena-file.h,
	libathena-extensions/athena-directory.h,
	libathena-extensions/athena-directory.c,
	libathena-extensions/athena-file.c
	(athena_directory_call_when_ready,
	athena_directory_wait_until_ready,
	athena_directory_file_monitor_add,
	athena_self_check_directory, athena_file_monitor_add,
	athena_file_call_when_ready, athena_file_wait_until_ready):
	Remove monitor_metadata or wait_for_metadata attribtues from these
	calls; the new way to do it is to monitor or wait for the METADATA
	file attribute.
	
	* libathena-extensions/athena-directory-private.h
	libathena-extensions/athena-directory-async.c:
	(athena_directory_monitor_add_internal,
	athena_directory_call_when_ready_internal,
	athena_directory_check_if_ready_internal): Eliminate
	monitor_metadata, wait_for_metadata, etc arguments.

	* libathena-extensions/athena-merged-directory.c:
	(merged_callback_connect_directory), (merged_call_when_ready),
	(merged_file_monitor_add), (monitor_add_directory):

	* libathena-extensions/athena-vfs-directory.c:
	(vfs_call_when_ready), (vfs_file_monitor_add):

	* libathena-extensions/athena-directory-background.c
	(athena_connect_background_to_directory_metadata): Monitor
	metadata the new approved way.

	* libathena-extensions/athena-mime-actions.c
	(athena_directory_wait_for_metadata,
	athena_mime_get_default_component_for_uri_internal,
	athena_mime_get_short_list_components_for_uri,
	athena_mime_get_all_components_for_uri,
	get_mime_type_from_file): Wait for metadata the new approved way.

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_activate_file, fm_directory_view_load_uri,
	finish_loading_uri, metadata_ready_callback):
	Monitor/call_when_ready using the new API.

	* src/file-manager/fm-properties-window.c:
	(create_properties_window, fm_properties_window_present):
	Monitor/call_when_ready using the new API.

	* src/file-manager/fm-search-list-view.c (real_adding_file):
	Monitor/call_when_ready using the new API.

	* src/file-manager/athena-trash-monitor.c
	(athena_trash_monitor_initialize): Monitor/call_when_ready using
	the new API.

	* src/athena-applicable-views.c (athena_navigation_info_new):
	Monitor/call_when_ready using the new API.

	* components/notes/athena-notes.c (notes_load_metainfo):
	Monitor/call_when_ready using the new API.

	* components/tree/athena-tree-model.c:
	(athena_tree_model_monitor_add,
	athena_tree_model_monitor_node): Monitor/call_when_ready using the new API.

	* src/athena-sidebar-title.c, src/athena-sidebar-title.h
	(athena_sidebar_title_set_uri): Monitor/call_when_ready using
	the new API, and use file metadata instead of directory metadata.

	* src/athena-sidebar.c (athena_sidebar_destroy,
	athena_sidebar_add_panel_items,
	athena_sidebar_background_is_default, receive_dropped_uri_list,
	receive_dropped_color, receive_dropped_keyword,
	(background_settings_changed_callback,
	background_appearance_changed_callback, background_reset_callback,
	open_with_callback, athena_sidebar_update_buttons,
	athena_sidebar_update_appearance, athena_sidebar_set_uri):
	Monitor/call_when_ready using the new API, and use file metadata
	instead of directory metadata. Keep around a AthenaFile
	representing the current sidebar location, simplifying bunches of
	code and hopefully eliminating potential redundant I/O.

	* src/athena-window-manage-views.c
	(viewed_file_changed_callback, position_and_show_window_callback,
	athena_window_end_location_change_callback):
	Monitor/call_when_ready using the new API, and use file metadata
	instead of directory metadata. Keep around a AthenaFile
	representing the current sidebar location, simplifying bunches of
	code and hopefully eliminating potential redundant I/O.

	* src/athena-window.c (athena_window_save_geometry): Use file
	metadata instead of directory metadata.

2000-10-11  Robey Pointer  <robey@eazel.com>

	* athena-installer/src/installer.c:
	(get_detailed_errors_foreach), (get_detailed_errors),
	(eazel_installer_do_install):
	* athena-installer/src/installer.h:
	* athena-installer/src/link.sh:

	Increase the assumed max download to 75MB so the progressbar
	doesn't overflow (yes, some people are downloading over 50MB!).
	Add preliminary support for recoverable install errors (we notice
	it but don't do anything yet).  Add "push" command to linker.

2000-10-11  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/sample/Makefile.am:
	I couldn't rpm build without these fixes.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (create_package), (main):
	Added the --id flag.

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_download_packages),
	(eazel_install_start_transaction),
	(eazel_install_check_existing_packages),
	(eazel_install_ensure_deps):
	Fixed 3700, 3537, 3413.
	
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (eazel_install_fetch_package):
	Fixed 3413
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_add_to_rpm_set),
	Fixed a nastyness reg. source packages.
	(eazel_install_do_rpm_dependency_check):
	debug output (as if we don't have enough)
	
	* components/services/install/lib/eazel-install-types.c:
	Skeleton for a package_copy function
	
	* components/services/install/athena-view/Makefile.am:
	* components/services/install/athena-view/athena-service-instal
	l-view.c: (athena_service_install_view_initialize),
	(create_package), (athena_service_install_installing):
	* components/services/install/athena-view/athena-service-instal
	l-view.h:
	* components/services/install/athena-view/athena-service-instal
	l.c: (xathena_service_install_download_failed),
	(xathena_service_install_failed_helper),
	(xathena_service_install_failed),
	(xathena_service_install_dependency_check),
	(xathena_service_install_done),
	(xathena_service_install_view_install_package_callback),
	(xathena_service_install_view_uninstall_package_callback):
	Removed the athena-service-install usage. Need to completely
	remove it.
	Worked on 3431
	
	* athena-installer/src/Makefile:
	* athena-installer/src/callbacks.c: (begin_install):
	* athena-installer/src/installer.c: (create_window),
	(check_system), (eazel_installer_do_install),
	(eazel_installer_initialize):
	* athena-installer/src/main.c:
	Check for eazel-hacking presence.

2000-10-11  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-icon-dnd.c: (get_container_uri),
	(receive_dropped_uri_list),
	(handle_local_move), (handle_nonlocal_move),
	(athena_icon_container_receive_dropped_icons),
	(athena_icon_dnd_end_drag):
	Fix 3406 - Dropped icon doesn't go where you dropped it.
	There was a lot of confused code that calculated the drop location.

	* libathena-extensions/athena-icon-dnd.c: (auto_scroll_timeout_callback):
	Peformance improvement: only cause an auto-scroll update if the auto-scroll
	delta is non-zero.

	* libathena-extensions/athena-drag.c:
	(athena_drag_autoscroll_calculate_delta):
	Fix some white space.
	
2000-10-11  Rebecca Schulman  <rebecka@eazel.com>

	First part of the bug fix for 3514.
	We still need to add a local clipboard interface,
	and set up the clipboard to work with the location bar.

	* components/notes/athena-notes.c: (make_notes_view):
	Use the new clipboard api call
	* libathena/athena-clipboard-ui.xml:
	* libathena/Makefile.am:
	Define DATADIR so we can install the new bonobo ui
	xml file for the clipboard
	* libathena/athena-clipboard.c: (cut_callback),
	(copy_callback), (paste_callback), (clear_callback),
	(add_menu_items_callback), (remove_menu_items_callback),
	(ui_component_remove_container_and_unref),
	(finish_setting_up_editable_from_bonobo_control),
	(athena_clipboard_set_up_editable_from_bonobo_control):
	Gutted the bonobo code from the old functions and added
	new code where appropriate that should approximate the functionality
	we had before the ui handler change
	
	* src/athena-shell-ui.xml:
	Declare the cut copy and paste menu items insensitive by default.
	Maintain cmd/widget separation by creating separate commands for them.
	
	* src/athena-window-menus.c: (athena_window_initialize_menus):
	Remove unused cut, copy and paste callbacks
	Removed ui verbs relating to these that we don't need.

2000-10-11  Darin Adler  <darin@eazel.com>

	* HACKING: Fixed typo.
	
	* src/Makefile.am: Add DATADIR.
	* src/file-manager/Makefile.am: Add DATADIR.
	
	* src/athena-shell-ui.xml: Fix some upper-cased accelerators. Not
	sure if they caused any real problem.
	
	* src/athena-window-menus.c: (bookmark_holder_free_cover): Added
	cover to avoid function type cast.
	(append_bookmark_to_menu): Use cover.
	(append_dynamic_bookmarks): Removed some commented out code

2000-10-11  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	fixed bug 3627, when an .xpm file is used as an emblem, it
	shows up as a generic icon.  Fixed by adding .xpm to the list
	of image suffixes supported by the icon factory.
	
2000-10-11  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3671 (Crash after closing & opening window)

	A signal handler disconnect got lost in the Bonobo conversion.
	It was causing a function to be called on a window after the
	window was destroyed.

	* src/athena-window-menus.c: 
	Add changed_handler_id field to BookmarkHolder.
	(bookmark_holder_new): Connect signal handler, and set
	changed_handler_id
	(bookmark_holder_free): Use changed_handler_id to
	disconnect signal handler
	(append_bookmark_to_menu): Remove old signal connection code.
	(athena_window_update_find_menu_item): Deleted unused-function
	warning avoidance trick now that all functions are used again.

2000-10-11  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-shell-ui.xml:
	fixed bug 3638 (the bug that won "bug night"), weird extra button
	between stop and services, by removing spurious text from the
	xml file that somehow eluded the parser's error checking.
	
2000-10-11  Darin Adler  <darin@eazel.com>

	* src/athena-shell-ui.xml: Remove the Undo command.
	
	* libathena-extensions/athena-entry.c:
	(athena_entry_key_press): Clean up code structure in here a bit.
	I expected to find code to handle Control-Z here, but I didn't
	find it.

2000-10-11  Michael Engber  <engber@eazel.com>

	Tuck id of desktop window in root so other apps can detect when
	Athena owns the desktop.
	* libathena-extensions/athena-background.c:
	(athena_background_ensure_image_scaled):
	* libathena-extensions/athena-gdk-pixbuf-extensions.c:
	(athena_gdk_scale_to_fit_factor),
	(athena_gdk_pixbuf_scale_to_fit),
	(athena_gdk_pixbuf_scale_down_to_fit):
	* libathena-extensions/athena-gdk-pixbuf-extensions.h:
	* src/athena-desktop-window.c:
	(athena_desktop_window_realized), (athena_desktop_window_new),
	(destroy):

2000-10-11  Darin Adler  <darin@eazel.com>

	Added a hash table to make access of files by name fast.
	
	* libathena-extensions/athena-directory-async.c:
	(dequeue_pending_idle_callback): Call the new
	athena_directory_remove_file function to do the removing instead
	of doing it here. Call the new athena_directory_add_file
	function to do the adding instead of doing it here.
	* libathena-extensions/athena-directory-private.h: Added hash
	table.
	* libathena-extensions/athena-directory.c:
	(athena_directory_initialize): Create hash table.
	(athena_directory_destroy): Destroy hash table.
	(add_to_hash_table), (extract_from_hash_table),
	(athena_directory_add_file), (athena_directory_remove_file):
	New functions to add and remove files that put things into hash
	table as well.
	(athena_directory_begin_file_name_change),
	(athena_directory_end_file_name_change): Functions to deal with
	cases where the name changes so the hash table entry can be moved.
	(athena_directory_find_file): Use the hash table instead of
	searching the list.
	(athena_directory_notify_files_moved): Use
	athena_directory_remove_file and athena_directory_add_file
	instead of modifying the file list directly.
	* libathena-extensions/athena-file.c:
	(athena_file_get_internal): Use athena_directory_add_file
	instead of adding to the file list directly.
	(destroy): Use athena_directory_remove_file instead of removing
	from the file list directly.
	(rename_update_info_and_metafile), (athena_file_update_info),
	(athena_file_update_name): Use the new file name change calls to
	let the directory know it needs to move the hash table entry.
	(athena_file_mark_gone): Use athena_directory_remove_file
	instead of removing from the file list directly.
	* libathena-extensions/athena-vfs-directory.c: Update for name
	change of file list field.
	
	* src/athena-window.c: (athena_window_clear_status): Take
	advantage of Bonobo fix. We now use NULL to tell the status bar to
	erase our status message.

2000-10-11  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-window-toolbars.c: (set_up_throbber_frame_type):
	temporarily disabled shadow on the throbber frame, since it was
	being mangled by the bonobo toolbar; I'll reinstate it when the
	toolbar can support it.
	
	* src/athena-property-browser.c:
	(make_properties_from_directories):
	removed debugging message that was accidently checked in

2000-10-11  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (preferences_button_cb),
	(register_button_cb):

	Fixing a few minor gconf calls to use url table.

2000-10-11  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3603 ("Select All Files" initially insensitive)

	* src/file-manager/fm-directory-view.c: (done_loading):
	Schedule a menu update when the directory contents are
	finished loading.

2000-10-11  J Shane Culpepper  <pepper@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(wipe_redirect_table), (add_redirect), (trilobite_redirect_lookup):

	Fixing bug #3686, summary-view crashes on gconf error.  Fixed the
	gconf wiping function to work with newest version of gconf.

2000-10-11  Darin Adler  <darin@eazel.com>

	* src/athena-window.c: (athena_window_destroy): Don't remove
	the menu items for the bookmarks and go menu, since we are
	removing the entire UI component, which will remove them
	automatically. The old code removed them after first destroying
	the UI component, which definitely did not work.

2000-10-11  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_get_label): Fixed storage leak.
	(athena_bonobo_get_hidden): Fixed bug where an item without a
	hidden property would say it was hidden, but the default is to not
	be hidden. Also fixed a storage leak.
	(athena_bonobo_add_menu_item), (athena_bonobo_add_submenu):
	Added code to encode the label. This is due to the hack added to
	bonobo so we can handle 8-bit characters in labels without
	updgrading to gnome-xml 2.
	(athena_bonobo_set_icon): Removed the code to get the old value
	of the icon before setting the new value.
	Also improved return_if_fail checks a bit. If we're going to have
	them, they should check the type, not just != NULL.
	
	* libathena-extensions/athena-bonobo-extensions.h: Fixed the
	formatting and removed the old code in ifdef UIH.
	
	* po/XMLFILES.in: Added a bunch of XML files that will one-day
	need localization.
	
	* src/file-manager/fm-icon-view.c: (update_layout_menus): Set up
	the toggle state using the command rather than the menu item.
	* src/athena-shell-ui.xml: First cut at making the location
	bar expand. Needs feature in Bonobo too, which I will now add.

	* components/services/install/command-line/Makefile.am: Added a
	bunch of unused files to this makefile to quiet down the
	check-headers-in-Makefile.pl script. This is the one directory
	where we had dead C code that's not mentioned in the makefile.
	
2000-10-11  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-bonobo-extensions.c:
	* libathena-extensions/athena-bonobo-extensions.h:
	(athena_bonobo_set_tip):
	New function to set the "tip" property of a bonobo
	UI component.
		
	* src/athena-window-menus.c: (append_bookmark_to_menu):
	Call new function above to set tip of bookmark menu items.
	
2000-10-11  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_label_text), (athena_icon_canvas_item_draw),
	(draw_label_text_aa), (compute_text_rectangle):
	at Arlo's request, added 2 pixels worth of space between the
	bottom of an icon and it's label.
	
	* libathena-extensions/athena-icon-container.c:
	(key_press_event):
	fixed bug where escaping from an icon stretch wasn't calling
	relayout after restoring the icon size; now it is.
	
2000-10-11  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: OK moved the eog dependency back
	down to 0.3 as that exists in an installable format
	even though this does not garruntee that it can be
	used with athena

2000-10-10  Robin * Slomkowski  <rslomkow@eazel.com>

	* data/Makefile.am: added placeholder files
	* data/athena-extras.placeholder: a mostly empty file so rpm will produce a package
	* data/athena-suggested.placeholder: a mostly empty file so rpm will produce a package
	* athena.spec.in: moved login-view to trilbite component, also added placeholder files

2000-10-10  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-shell-ui.xml:
	the about box menu command got broken by recent UI handler
	changes; this fixes it.
	
2000-10-10  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-sidebar.c: (receive_dropped_keyword),
	(athena_sidebar_drag_data_received):
	fixed bug where the eraser didn't work on the sidebar, and in the
	process fixed bug 2509, sidebar should share emblem code, by
	doing with work with athena_drag_file_receive_dropped_keyword.
	
2000-10-10  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: left a stray :

2000-10-10  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: did nasty crazy stuff to seperate out
	into mozilla component, trilobite component, extras, and suggested
	This makes use more than ever required to be dilligent in updating 
	libraries and binaries in the specfile.

2000-10-10  Pavel Cisler <pavel@eazel.com>

	* src/athena-profiler.c: (dump_dialog_new), (dump_dialog_show),
	(athena_profiler_bonobo_ui_report_callback):
	Make Ramiro's cool profile dumping UI not wrap.
	Reset the profile output when using the Reset menu item.
	
2000-10-10  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: added more updated depenencies
	so installer will work better

2000-10-10  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_open_uri_callback), (is_uri_partial),
	(make_full_uri_from_partial), (mozilla_dom_mouse_click_callback),
	(mozilla_translate_uri_if_needed),
	(mozilla_untranslate_uri_if_needed),
	(eazel_services_scheme_translate),
	(eazel_services_scheme_untranslate):

	Added "unconvert" for the eazel-services: scheme hack
	Added partial URI support for gnome-vfs uri schemes (so help: works, at
	least in theory)

2000-10-10  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: OK added requirement of gnome-vfs 0.3.1

2000-10-10  Mathieu Lacage  <mathieu@eazel.com>

	fix small buggy with fix from ramiro: make sure mozilla
	loads local fiels through its own file library, not gnome-vfs.
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_is_uri_handled_by_mozilla):

	autoconf magic for the documentation
	* configure.in:
	* Makefile.am: 
	* user-guide/C/Makefile.am:
	* user-guide/Makefile.am:

	actual html/jpg/css documentation.
	* user-guide/C/html/*:

2000-10-10  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: added ammonite dependecy
	this will eventually move into the services component

2000-10-10  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: the new all encompassing specfile
	to get us through services testing.

2000-10-10  Darin Adler  <darin@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_translate_uri_if_needed): Fix ifdef so that
	--disable-eazel-services builds will work.

2000-10-10  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/Back.png:
	* icons/arlo/Forward.png:
	* icons/arlo/Up.png:
	* icons/arlo/Refresh.png:
	* icons/arlo/Home.png:
	* icons/arlo/Search.png:
	* icons/arlo/SearchWeb.png:
	* icons/arlo/Stop.png:
	Added some icons to my toolbar.  I'm not sure I'm done with
	these yet, so feel free to give me feedback.

2000-10-10  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3577 (Menu item initially titled "Edit Settings" instead
	of "Edit <user level> Settings"
	
	* src/athena-window-menus.c: (athena_window_initialize_menus):
	Call update_user_level_menu_items after installing; it had been
	doing most of the guts of update_user_level_menu_items in-line,
	but not this part.

2000-10-10  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-bonobo-extensions.h:
	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_get_label): New function, does the obvious.
	(athena_bonobo_get_hidden): Check for "0" for FALSE rather
	than "1" for TRUE, since anything non-"0" is more TRUE than
	it is FALSE.

	* src/athena-about.c: (athena_about_draw_info):
	Fixed build-breakage where MAX_AUTHOR_COUNT wasn't #defined,
	by replacing it with "-1" for g_strsplit.
	
	* src/athena-window-menus.c:
	(remove_underline_accelerator_from_menu_title),
	(athena_window_disable_keyboard_navigation_for_menus):
	Modernized this code to try to fix bug 2327, but it seems
	there is some new Bonobo bug in the way.
	
	(update_user_level_menu_items): Removed obsolete comment.

2000-10-10  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_get_hidden), (athena_bonobo_get_label),
	(athena_bonobo_add_menu_item), (athena_bonobo_add_submenu):
	* libathena-extensions/athena-bonobo-extensions.h:
	* src/athena-window-menus.c:
	(remove_underline_accelerator_from_menu_title),
	(athena_window_disable_keyboard_navigation_for_menus),
	(update_user_level_menu_items):

2000-10-10  Darin Adler  <darin@eazel.com>

	* README: Changed gnome-print to work at HEAD.
	
	* src/file-manager/fm-icon-view.c: (handle_radio_item): Common
	function shared by context menu and Bonobo menu.
	(context_menu_layout_radio_item_callback): Use common function.
	(append_one_context_menu_layout_item): Change from "verb" to "id".
	(update_layout_menus): Set up proper radio button based on ids.
	(switch_to_manual_layout): Renamed and changed from a callback to
	a normal function.
	(handle_ui_event): Signal handler to get Bonobo radio menu
	choices.
	(fm_icon_view_merge_menus): Connect UI event handler and remove
	old code for radio menu items.
	* src/file-manager/athena-icon-view-ui.xml: Add ids to the radio
	menu items.
	
	* src/athena-about.c: (athena_about_destroy),
	(athena_about_initialize), (athena_about_repaint),
	(draw_aa_string), (randomize_authors), (draw_author_list),
	(athena_about_draw_info), (athena_about_update_authors),
	(athena_about_close), (update_authors_if_necessary): Improve
	randomizing algorithm, get rid of fixed maximum number of authors.
	
	* src/athena-window.c: Cosmetic changes.

2000-10-10  Gene Z. Ragan  <gzr@eazel.com>

	Work on making bookmarks and history work with new bonobo
	UI code.
	
	* libathena-extensions/athena-bonobo-extensions.c:
	* libathena-extensions/athena-bonobo-extensions.h:
	(athena_bonobo_add_menu_item), (athena_bonobo_add_submenu),
	(athena_bonobo_add_menu_separator),
	(athena_bonobo_get_menu_item_verb_name):
	New utility functions to make menu manipulation easier.
		
	* src/athena-window-menus.c: (activate_bookmark_in_menu_item),
	(append_bookmark_to_menu), (append_separator),
	(create_menu_item_from_node), (append_static_bookmarks),
	(refresh_bookmarks_menu), (athena_window_initialize_menus),
	(athena_window_remove_bookmarks_menu_items),
	(athena_window_remove_go_menu_items), (append_dynamic_bookmarks),
	(refresh_go_menu):
	Modified functions and removed code in an effort to make bookmarks
	and history be happy once more.

2000-10-10  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/Makefile.am:
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_content_view_one_time_happenings),
	(athena_mozilla_content_view_destroy),
	(mozilla_load_location_callback),
	(mozilla_translate_uri_if_needed),
	(eazel_services_scheme_translate),
	(eazel_services_prompt_login_cb):

	Add code for the Mozilla "eazel-services:" scheme translation

2000-10-10  Rebecca Schulman  <rebecka@eazel.com>

	* src/file-manager/fm-icon-view.c: (update_layout_menus):
	used the command path instead of widget path, fixing
	the error in my last bugfix about the lack of 
	command widget separation
	* src/athena-complex-search-bar.c:
	(attach_criterion_to_search_bar):
	Fixed some calls to hbox_new which were 0, FALSE instead
	of FALSE, 0
	
2000-10-10  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_file_conflict_check):
	Some really important debug output...

2000-10-10  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_check_for_file_conflicts),
	(eazel_install_check_if_depends_on),
	(eazel_install_prune_packages_helper),
	(eazel_install_prune_packages),
	Removed debug spam.
	(eazel_install_do_file_conflict_check):
	3858 wasn't fixed yet, should be now.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(get_search_url_for_package):
	Commented out all occurences of the &flag= use, pending fix of bug
	3481 and 3482.
	
	* athena-installer/src/Makefile:
	Yes.

2000-10-10  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-any-width-bin.c:
	* libathena-extensions/athena-any-width-bin.h: Removed
	these files. This class was used only for our old status
	bar, and would just slowly bit-rot if we left it here.
	* libathena-extensions/Makefile.am: Removed those files.
	* src/athena-window.c: Removed #include for deleted file.

2000-10-10  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(rubberband_timeout_callback),(cancel_stretching),
	(key_press_event), (athena_icon_container_show_stretch_handles):
	fixed bug 3241, escape key should cancel stretching, by remember
	original icon size and restoring it when the escape key is stretched.
	Also, fixed bug where the selection box was behind the icons it
	was selecting by raising it to the top.
	
	* libathena-extensions/athena-icon-private.h:
	added field to store the initial stretch value
	
	* src/athena-sidebar-title.c: (add_emblem):
	fixed bug 2295, sidebar emblems should be anti-aliased.
	
2000-10-10  John Sullivan  <sullivan@eazel.com>

	* src/athena-window.c: 
	(install_status_bar): removed this old code now that we
	have the status bar working correctly again.
	(athena_window_set_content_view_widget): Added FIXME
	with bug number to #ifdeffed notice-leaking-Bonobo-UI code.

2000-10-10  John Sullivan  <sullivan@eazel.com>

	* src/athena-window.c: (athena_window_clear_status):
	Fixed bug where the clear-status timeout wasn't working.
	Pass " " instead of "" to bonobo_ui_component_set_status
	to work around Bonobo bug.

2000-10-10  Pavel Cisler  <pavel@eazel.com>

	* src/athena-window.c: (navigation_bar_mode_changed_callback):
	Fix an uninitialized variable warning.

2000-10-10  Rebecca Schulman  <rebecka@eazel.com>

	Fixed bug 3530, to make reverse sort and
	tighter layout show state

	* src/file-manager/fm-icon-view.c: (update_layout_menus),
	Added toggle function to update bonobo state when the
	tighter layout and reverse sort menu items are selected
	* src/file-manager/athena-icon-view-ui.xml:
	Added a type=toggle parameter to the layout and reverse
	sort order menu items

2000-10-10  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3587 ("Close All Windows" doesn't work)
	Fixed bug 3556 (Find button and Find menu item states aren't
	synchronized)

	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_set_accelerator),
	(athena_bonobo_set_description), (athena_bonobo_set_label),
	(athena_bonobo_set_sensitive),
	(athena_bonobo_set_hidden),
	(athena_bonobo_get_hidden), (athena_bonobo_set_icon):
	Changed g_asserts to g_return_if_fails when checking parameters.
	(athena_bonobo_set_toggle_state): New cover function for setting
	a boolean state on a Bonobo item.

	* libathena-extensions/athena-bonobo-extensions.h:
	Prototype for athena_bonobo_set_toggle_state.
	
	* src/athena-shell-ui.xml: Use different verb for Find button
	than for Find menu item to work around bug 3590.
	
	* src/athena-window-private.h: Add updating_bonobo_state boolean
	to work around design flaw where there's no way to set menu item or 
	toggle button state without activating its callback.
	
	* src/athena-window-menus.c:
	Removed #defines for unused MENU_PATHs
	(file_menu_toggle_find_mode_callback): Bail out if updating_bonobo_state.
	(athena_window_initialize_menus): Fix verb name for Close All Windows;
	add new verb for Find toggle button.
	(athena_window_update_find_menu_item): Use #define for path; remove
	now-used unused-function from hack.
	* src/athena-window.c: (navigation_bar_mode_changed_callback):
	Set Find toggle button state, inside updating_bonobo_state = TRUE block.

2000-10-10  Darin Adler  <darin@eazel.com>

	Fixed bug 3535 (Bonobo-merged items aren't being removed when view
	changes).

	* src/file-manager/fm-icon-view.c: (fm_icon_view_destroy):
	* src/file-manager/fm-search-list-view.c: (real_destroy):
	* src/athena-window.c: (athena_window_destroy):
	Added code to unset the container when getting rid of a
	BonoboUIComponent. The container holds a reference, so just
	unref'ing the component is not good enough.

	* idl/.cvsignore:
	* idl/GNOME_Desktop_FileOperationService.idl:
	* idl/Makefile.am:
	* idl/gnome-desktop.idl:
	Removed the unused idl files in this directory. I removed them
	from the build already a few days ago.
	
2000-10-10  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/athena-rpm-view-install.c:
	(get_detailed_errors_foreach):
	Renamed would_be_lost to circular_dependency
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (tree_helper), (create_package):
	Renamed would_be_lost to circular_dependency.
	Added support to install rpm's by asking for a provide.
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	Renamed would_be_lost to circular_dependency.

	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_from_packagedata),
	(packagedata_from_corba_packagedatastruct):
	Renamed would_be_lost to circular_dependency.

	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_transaction_all_files_check),
	(eazel_install_start_transaction),
	(eazel_install_check_if_depends_on),
	(eazel_install_prune_packages_helper),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies),
	(eazel_install_do_file_conflict_check),
	(eazel_install_ensure_deps), (eazel_uninstall_upward_traverse):
	Fixed bug 3374, 3491 and 3585.
	Uses the packagedata_add_pack_to_X calls now.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(get_search_url_for_package):
	s/flags/flag/
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	Only set the rpm debug flag if --debug
	(eazel_install_do_rpm_dependency_check):
	use packagedata_add_pack_to_X calls.

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_status_enum_to_str), (packagedata_status_str_to_enum),
	Renamed would_be_lost to circular_dependency.
	(packagedata_add_pack_to), (packagedata_add_pack_to_breaks),
	(packagedata_add_pack_to_soft_depends),
	(packagedata_add_pack_to_hard_depends),
	(packagedata_add_pack_to_modifies),
	Use these calls to add packages to the packagedata struct lists.
	They do some funky checking.
	(eazel_install_package_version_compare),
	(eazel_install_package_other_version_compare):
	Modfied some compare functions.

	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (osd_parse_dependency):
	Use packagedata_add_pack_to_X calls.
	
	* athena-installer/src/installer.c:
	(get_detailed_errors_foreach), (check_system):
	Renamed would_be_lost to circular_dependency.

2000-10-10  John Sullivan  <sullivan@eazel.com>

	* src/athena-shell-ui.xml: Somehow missed converting a
	bunch of _descr to _tip yesterday. Maybe a merge clobber
	thing. Anyway, this seems to make the status bar work
	in all cases now.

2000-10-10  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-window-menus.c: (athena_window_initialize_menus):
	Add a top level "Profiler" menu bar to control the profiler.  This
	is just a first try.  Some things, like the Start/Stop state of
	the profiler can be better represented by a toggle button.

	Also, protect the eazel services hacks with EAZEL_SERVICES #ifdefs.
	
2000-10-10  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena/athena-bonobo-ui.h:
	Add a path declaration for the Profiler menu.
	* src/athena-profiler.c: (dump_dialog_new):
	Make the buttons insensitive for now.
	
	* src/athena-shell-ui.xml:
	Add a top level "Profiler" menu bar to control the profiler.  This
	is just a first try.  Some things, like the Start/Stop state of
	the profiler can be better represented by a toggle button.
	
2000-10-10  John Sullivan  <sullivan@eazel.com>

	* components/services/install/lib/Makefile.am:
	Added missing include of eazel-install-logic.h that
	was breaking the RPM build and thus Tinderbox.

2000-10-10  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3516 (Sidebar & Content Loser merged items don't appear)
	Fixed bug 3517 (Mozilla merged items don't appear)

	There's a crashing bug involving merged tool bar buttons 
	(bug 3574), so I didn't put the tool bar button back in Mozilla,
	but the merged menu item is once again wired up. Actually I
	checked this in the other day but thought it wasn't working
	correctly, though it is.

	* components/loser/content/athena-content-loser-ui.xml:
	Filled in contents.
	* components/loser/content/athena-content-loser.c:
	(bonobo_loser_callback), (loser_merge_bonobo_items_callback):
	* components/loser/sidebar/athena-sidebar-loser.c:
	(bonobo_loser_callback), (loser_merge_bonobo_items_callback):
	Converted to new Bonobo API and tweaked some behavior.

2000-10-10  John Sullivan  <sullivan@eazel.com>

	* src/athena-shell-ui.xml: Added placeholder for
	built-in bookmarks.

2000-10-10  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-profiler.c:
	(athena_profiler_bonobo_ui_reset_callback),
	(athena_profiler_bonobo_ui_start_callback),
	(athena_profiler_bonobo_ui_stop_callback),
	(athena_profiler_bonobo_ui_report_callback):
	* src/athena-profiler.h:
	Make it compile with the new bonobo ui handler stuff.
	
2000-10-10  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-property-browser.c:
	(make_properties_from_directories):
	Fix uninitialized variable.

2000-10-10  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_load_location_callback), (bonobo_mozilla_callback),
	(string_list_get_index_of_string),
	(mozilla_is_uri_handled_by_athena),
	(mozilla_is_uri_handled_by_mozilla),
	(mozilla_translate_uri_if_needed),
	(mozilla_untranslate_uri_if_needed):
	Work in progrss for bug 527.  Add a 'mechanism' to allow
	eazel-services uris to be translated into localhost: so that the
	ammonite proxy can serve them.
	
2000-10-10  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_content_view_set_proxy_preferences),
	(athena_mozilla_content_view_load_uri),
	(mozilla_load_location_callback),
	(mozilla_uris_differ_only_by_fragment_identifier),
	(mozilla_dom_mouse_click_callback), (is_string_in_string_list),
	(mozilla_is_uri_handled_by_athena),
	(mozilla_is_uri_handled_by_mozilla):
	Cleanup the way special protocols are handled.  Cleanup debug
	spewage.
	
2000-10-10  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(handle_gconf_error), (mozilla_content_view_set_proxy_preferences),
	(mozilla_content_view_one_time_happenings),
	(athena_mozilla_content_view_initialize):
	Factor out the one time happenings (preferences mostly) into their
	own function for clarity.  Make sure gconf errors are handled.

2000-10-10  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/Makefile.am:
	* components/mozilla/eazel-protocol-handler/.cvsignore:
	* components/mozilla/eazel-protocol-handler/Makefile.am:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-channel.cpp:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-channel.h:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-handler.cpp:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-handler.h:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-module.cpp:
	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize):
	* configure.in:
	Remove the eazel protocol handler monstrosity.  We have a better
	way to do this using M18 and using the DOM to peek into the document.
	
2000-10-10  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-file-operations.c:
	(get_next_duplicate_name):
	Fix to do proper unescaping. This was breaking the duplicate name
	generating algorithm.

2000-10-10  Josh Barrow  <josh@eazel.com>

	* src/athena-shell-ui.xml:
	Fix bug where Athena window was ordered, menubar, location
	bar, toolbar, content, instead of menubar, toolbar, location
	bar, content.  

2000-10-10  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-bonobo-extensions.c:
	* libathena-extensions/athena-bonobo-extensions.h:
	(athena_bonobo_add_menu_item):
	Changed prototype to take only label as argument. Name
	is now derived form the label.

	* src/file-manager/fm-directory-view.c:
	(add_open_with_app_bonobo_menu_item),
	(add_open_with_viewer_bonobo_menu_item):
	Call modified athena_bonobo_add_menu_item.
	
2000-10-09  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-property-browser.c:
	(make_properties_from_directories),
	(make_properties_from_xml_node):
	tightened the layout of color properties, making them similar to
	backgrounds; also, positioned the eraser emblem last and apart
	from the others to make it more distinct.
	
2000-10-10  Josh Barrow  <josh@eazel.com>

	* src/athena-shell-ui.xml:
	* src/athena-window-menus.c: (switch_to_user_level),
	(athena_window_initialize_menus), (update_user_level_menu_items):
	The BONOBO_WORKAROUND is no longer needed.

2000-10-09  Josh Barrow  <josh@eazel.com>

	* athena-installer/src/.cvsignore:
	Add eazel-installer and eazel-installer.sh to make cvs be quiet
	again.

2000-10-09  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri):

	The -Wall -Werror was accidentally turned off for this library, so
	a few more bugs were fixed.
	
	* athena-installer/src/Makefile.am:
	* athena-installer/src/installer.c: (create_window),
	(get_detailed_errors_foreach), (install_done), (check_system):
	* athena-installer/src/link.sh:
	* athena-installer/src/main.c: (main):
	* athena-installer/src/prescript:

	Change the "Athena Installer" to "Eazel Installer" in all
	filenames and user-visible text.  Build "release" version that
	doesn't give evil --test warnings.  Re-assert some stuff I thought
	I checked in last week (like the --build option).

2000-10-09  John Sullivan  <sullivan@eazel.com>

	Bunches o' Bonobo conversion & cleanup. Most of this is
	about the new "command/widget separation" in Bonobo.
	Essentially, changes to sensitivity, state, and hiddenness
	should be made to the command (verb), whereas other changes
	should be made to the widget.

	This should fix the "cmd/widget" warnings at launch, and
	make the tool bar buttons desensitize appropriately again.

	* components/loser/sidebar/athena-sidebar-loser-ui.xml:
	* components/mozilla/athena-mozilla-ui.xml:
	* components/sample/athena-sample-content-view-ui.xml:
	* src/athena-shell-ui.xml:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/athena-icon-view-ui.xml:
	* src/file-manager/athena-search-list-view-ui.xml:
	Filled in the names of all verbs; we don't want to use
	the default if-verb-name-is-blank-use-item-name feature because
	it causes vast confusion; also, change _descr to _tip everywhere
	(updated name from Bonobo); also explicitly defined <cmd>s for
	the items that have pre-set insensitivity, or that share
	tips between tool bar buttons and menu items.

	* libathena/athena-bonobo-ui.h: Add #defines for command paths
	as well as menu paths.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_create_background_context_menu_items):
	Use command paths instead of menu paths.
	
	* src/file-manager/fm-directory-view.h: Publicize command paths,
	not menu paths (for use in context menu index-finding. Some day
	we will convert the context menus to use Bonobo and then this
	will get cleaned up further.)
	
	* src/file-manager/fm-directory-view.c:
	Moved menu path #defines inside here.
	(append_gtk_menu_item), (update_one_menu_item): 
	Take both a menu path and a verb path; use the verb path 
	for sensitivity.
	(fm_directory_view_insert_context_menu_item): Updated comment.
	(fm_directory_view_real_create_background_context_menu_items),
	(create_open_with_gtk_menu),
	(fm_directory_view_real_create_selection_context_menu_items),
	(reset_bonobo_trash_delete_menu),
	(fm_directory_view_real_update_menus):
	Pass verb paths as well as menu paths.
	(fm_directory_view_get_context_menu_index): Changed variable
	names for clarity.
	
	* src/file-manager/fm-icon-view.c:
	New #defines for command paths.
	(update_one_menu_item): Take both a menu path and a verb path; use
	the verb path for sensitivity.
	(fm_icon_view_create_selection_context_menu_items),
	(fm_icon_view_create_background_context_menu_items),
	(fm_icon_view_update_menus), (update_layout_menus): 
	Pass both a menu path and a verb path.

	* src/file-manager/fm-search-list-view.c:
	#define for COMMAND_REVEAL_IN_NEW_WINDOW
	(real_create_selection_context_menu_items): Use verb path not
	menu path for context menu positioning.
	(update_reveal_item): Use verb path not menu path for sensitivity.

	* src/athena-window-private.h: #defines for command paths.
	* src/athena-window-manage-views.c: (load_content_view):
	* src/athena-window.c: (athena_window_allow_back),
	(athena_window_allow_forward), (athena_window_allow_up),
	(athena_window_allow_stop),
	(athena_window_zoom_level_changed_callback): Use verb paths
	instead of menu paths for changing sensitivity.

2000-10-09  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3513, No applications or viewers appear in "Open With" menu
	in menu bar
	
	* libathena-extensions/athena-bonobo-extensions.c:
	* libathena-extensions/athena-bonobo-extensions.h:
	(athena_bonobo_add_menu_item),
	(athena_bonobo_remove_menu_items):
	New functions to add a menu items and remove multiple menu items from
	a submenu.

	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	(bonobo_launch_application_callback),
	(bonobo_open_location_with_viewer_callback),
	(add_open_with_app_bonobo_menu_item),
	(add_open_with_viewer_bonobo_menu_item),
	(add_application_to_bonobo_menu), (add_component_to_bonobo_menu),
	(reset_bonobo_open_with_menu),
	(fm_directory_view_real_update_menus):
	Call new athena bonobo functions to add applications and viewers
	to Open With... menu.  Also add verbs in addition to creating
	the menu items.

2000-10-09  Josh Barrow  <josh@eazel.com>

	* icons/Makefile.am:
	* icons/emblem-symbolic-link-24.png:
	* icons/emblem-symbolic-link-72.png:
	* icons/emblem-symbolic-link-92.png:
	* icons/emblem-symbolic-link-192.png:
	Added different size symbolic link icons.

2000-10-09  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-shell-ui.xml:
	added a "min_width" attribute to the toolbar buttons, so they are
	positioned better.  You need to get the latest Bonobo to see the
	effects of this.
		
	* icons/gnome/gnome.xml:
	made clicking on the throbber in the gnome theme go to www.gnome.org
	
	* libathena-extensions/athena-icon-factory.c: (set_theme):
	changed the name of the theme property for default icon redirection
	from "icons" to "icon-images" to disambiguate it from icon view
	theme properies.
	
2000-10-09  Darin Adler  <darin@eazel.com>

	* components/tree/athena-tree-view.c:
	(athena_tree_view_uri_to_name): Unescape the names of files for
	display in the tree view.  Fixes bug 2892 (tree displays files
	with escaped characters).
	
	* libathena-extensions/athena-directory-async.c:
	(dequeue_pending_idle_callback): Fixed the structure here to make
	it more clear that it's handling ref. counts correctly.
	
	* libathena-extensions/athena-directory.h:
	* libathena-extensions/athena-file.h:
	Wrote better comments to explain the convenience cover functions.
	
	* src/athena-window-menus.c: Got rid of some UIH stuff.
	
	* src/athena-window-toolbars.c: (set_up_button),
	(athena_window_initialize_toolbars),
	(athena_window_toolbar_remove_theme_callback):
	Changed commented-out code back to ifdef UIH.
	
	* src/athena-window.c: (athena_window_clear_status),
	(athena_window_set_status): Change to use the new Bonobo call
	for setting status.
	(navigation_bar_mode_changed_callback): Changed commented-out code
	back to ifdef UIH.
	(athena_window_constructed): Removed some status-bar-related
	code.

2000-10-09  Mathieu Lacage  <mathieu@eazel.com>

	Fix bugs 3498, 3523 and the athena part of 3497
	3497 bug fix is disabled because there is a bug in bonobo.
	bug you can try it if you set BONOBO_WORKAROUND to 1.
	
	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_set_accelerator),
	(athena_bonobo_set_description), (athena_bonobo_set_label),
	(athena_bonobo_set_sensitive), (athena_bonobo_set_hidden),
	(athena_bonobo_get_hidden), (athena_bonobo_set_icon):
	add g_asserts. add (athena_bonobo_set_icon)
	* libathena-extensions/athena-bonobo-extensions.h:
	add (athena_bonobo_set_icon) prototype
	
	* src/Makefile.am: beautification.
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_initialize_class): a space...
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_real_merge_menus): a space too...
	* src/athena-shell-ui.xml: mainly a few spaces.
	* src/athena-window-manage-views.c: (load_content_view):
	use bonobo_ui_component_freeze/thaw
	* src/athena-window-menus.c: 
	(athena_window_update_show_hide_menu_items),
	(get_user_level_icon_name), (switch_to_user_level),
	(add_user_level_menu_item), (athena_window_initialize_menus),
	(athena_window_update_find_menu_item),
	(update_user_level_menu_items), 
	(convert_user_level_to_path):
	use bonobo_ui_component_freeze/thaw and add the corect calls to
	athena_bonobo_set_icon
	* src/athena-window.c: (athena_window_constructed),
	(show_dock_item): add calls to athena_bonobo_set_hidden to remove
	the toolbars for the desktop case.

2000-10-09  Rebecca Schulman  <rebecka@eazel.com>
	Fixed bugzilla bug 3359, to create athena
	file api call to get the error code for
	when a get file info call failed

	* libathena-extensions/athena-directory-async.c:
	(get_info_callback):
	Record the error received in the file structure
	* libathena-extensions/athena-file-private.h:
	store the error in a field in AthenaFile
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-file.c:
	(athena_file_get_info_failed):
	Add new API call

2000-10-09  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_added),
	(athena_directory_notify_files_removed),
	(athena_directory_notify_files_moved):
	Get rid of some FIXMEs that were wrong.
	Clean up the way AthenaFile objects were ref'd
	in athena_directory_notify_files_moved.

2000-10-09  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/emblem-nowrite.png:
	Added the first of many system level emblems for my
	Athena theme.

2000-10-09  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/Makefile.am:
	* components/services/install/lib/eazel-install-logic.c:
	(eazel_install_flatten_categories),
	(eazel_install_pre_install_packages), (eazel_install_set_settings),
	(install_packages), (eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_install_packages), (uninstall_all_packages),
	(uninstall_packages), (ei_get_packages_with_mod_flag),
	(ei_check_uninst_vs_downgrade), (hest), (revert_transaction),
	(eazel_install_do_transaction_fill_hash),
	(eazel_install_get_total_size_of_packages),
	(eazel_install_do_transaction_add_to_transaction),
	(eazel_install_start_transaction_make_argument_list),
	(eazel_install_do_transaction_save_report_helper),
	(eazel_install_do_transaction_save_report),
	(eazel_install_monitor_process_pipe),
	(eazel_install_display_arguments),
	(eazel_install_monitor_subcommand_pipe),
	(eazel_install_do_transaction_all_files_check),
	(eazel_install_do_transaction_md5_check),
	(eazel_install_start_transaction),
	(eazel_install_prune_packages_helper),
	(eazel_install_prune_packages),
	(eazel_install_prepare_package_system),
	(eazel_install_free_package_system),
	(eazel_install_add_to_extras_foreach),
	(eazel_install_check_existing_packages),
	(eazel_install_check_if_related_package),
	(eazel_install_fetch_dependencies), (dump_one_package),
	(dump_packages), (print_package_list),
	(eazel_install_do_file_conflict_check),
	(eazel_install_do_dependency_check), (eazel_install_ensure_deps),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install), (eazel_uninstall_globber):
	* components/services/install/lib/eazel-install-logic.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages):
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-protocols.c:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-query.c:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_rpm_set_settings),
	(eazel_install_monitor_rpm_propcess_pipe),
	(eazel_install_free_rpm_system_close_db_foreach),
	(eazel_install_free_rpm_system):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-types.c:
	(eazel_install_package_provides_basename_compare),
	(eazel_install_package_provides_compare),
	(eazel_install_package_name_compare),
	(eazel_install_package_compare),
	(eazel_install_requirement_dep_compare),
	(eazel_install_package_version_compare):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/makefile.staticlib.in:
	Moved code around. 
	Moved the general dep check stuff into eazel-install-logic.c, and
	kept the rpmspecific in rpm-glue.c. Except for eg. the uninstall
	stuff and some other parts which are still rpm specific (in
	-logic.c and -types.c).
	
	* athena-installer/src/installer.c:
	(get_detailed_errors_foreach):
	Added the WOULD_BE_LOST to the error display thingy.
	
2000-10-09  John Sullivan  <sullivan@eazel.com>

	Various bonobo-related cleanups

	* components/loser/sidebar/athena-sidebar-loser-ui.xml:
	* components/loser/sidebar/athena-sidebar-loser.c:
	(bonobo_loser_callback), (loser_merge_bonobo_items_callback):
	* components/mozilla/athena-mozilla-content-view.c:
	(bonobo_mozilla_callback), (mozilla_merge_bonobo_items_callback):
	* components/mozilla/athena-mozilla-ui.xml:
	* components/sample/athena-sample-content-view-ui.xml:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_real_merge_menus):
	Modernized Bonobo use in these three components. There is a
	crashing bug when leaving a component that installs a tool bar
	button, so I did not install a tool bar button into Mozilla yet.
	Also, some of the callbacks don't work, so I haven't marked the 
	relevant bugs FIXED yet. I wanted to check in what I had so far;
	I'll get back to this a little later today.
	
	* src/athena-shell-ui.xml:
	Removed "Menu_" from pixnames, to match new bonobo API; replaced
	<menuitem/> and <toolitem/> with <separator/>; added a placeholder
	into which components should install extra toolbar buttons; defined
	the services button here again (in this placeholder) -- it's before
	the throbber again.
	
	* src/athena-window-menus.c: (athena_window_initialize_menus):
	Added clarifying white space.
	
	* src/athena-window-toolbars.c: 
	removed toolbar_services_callback, which is handled elsewhere.
	(set_up_button): Made this take button path instead of just name,
	so it can work with buttons in placeholders (like the Services button).
	(set_up_toolbar_images): Pass whole paths instead of just names.
	(athena_window_initialize_toolbars): Set hidden attribute on
	Services button as appropriate, rather than creating it here from raw
	XML in the opposite case.

2000-10-08  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 3549, services button disappeared due to UI handler
	change, by adding it on the fly if EAZEL_SERVICES is set.  Currently,
	it comes after the throbber, but that will be fixed when the
	throbber is positioned properly again.
	
	* src/athena-window-menus.c: (stop_button_callback),
	(services_button_callback), (athena_window_initialize_menus):
	added bonobo verb for services and it's handler.  Also, added one
	for the stop button, which was inadvertently lost during the
	translation.
	
	* src/athena-window-toolbars.c: (set_up_toolbar_images),
	(athena_window_initialize_toolbars):
	if EAZEL_SERVICES is set, add the services button and handle it's
	image.
	
	* icons/Makefile.am:
	* icons/Services.png:
	added Services image to default theme.
	
2000-10-08  Josh Barrow  <josh@eazel.com>

	* src/athena-shell-ui.xml:
	Change the "Ski" user level to "User Level", per Arlo suggestion 
	in bug 3497.

2000-10-08  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/athena-rpm-view-install.c:
	(get_detailed_errors_foreach),
	(athena_rpm_view_dependency_check):
	Updated for the extra package status field.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line), (tree_helper), (dep_check):
	Code to set the ssl_rename flag.
	Better output for dep_check (uses provides).
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	Added the ssl_rename field and the WOULD_BE_LOST package status.
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_string_sequence_to_glist),
	(g_list_to_corba_string_sequence),
	(corba_packagedatastruct_from_packagedata),
	(packagedata_from_corba_packagedatastruct):
	Fixed 3460, transfers package->provides now.
	
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install__set_silent), (impl_Eazel_Install__get_silent),
	(impl_Eazel_Install__set_test_mode),
	(impl_Eazel_Install__get_test_mode),
	(impl_Eazel_Install__set_force), (impl_Eazel_Install__get_force),
	(impl_Eazel_Install__set_update), (impl_Eazel_Install__get_update),
	(impl_Eazel_Install__set_downgrade),
	(impl_Eazel_Install__get_downgrade),
	(impl_Eazel_Install__get_tmp_dir),
	(impl_Eazel_Install__set_ssl_rename),
	(impl_Eazel_Install__get_ssl_rename),
	(impl_Eazel_Install__set_server), (impl_Eazel_Install__get_server),
	(impl_Eazel_Install__get_server_port),
	(impl_Eazel_Install__set_log_file),
	(impl_Eazel_Install__get_log_file),
	(impl_Eazel_Install__set_package_list),
	(impl_Eazel_Install__get_package_list), (eazel_install_get_epv):
	Fixed indentation and cut'n'paste typeerror. Plus added the
	ssl_rename field.
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_emit_dependency_check_default):
	Removed the hack since 3460 is fixed.
	
	* components/services/install/lib/eazel-install-private.h:
	Added the ssl_rename field.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_fetch_remote_file), 
	Do the ssl_renaming. If ssl_rename is set, the hostname in the
	source uri is replaced with "localhost". This allows you to use
	ssh tunneling to use development services from home.
	(eazel_install_fetch_package),
	Fixed bug 2584. Checks version and name of downloaded
	package. Uses rpmvercmp.
	(get_search_url_for_package):
	s/flag/flags/
	
	* components/services/install/lib/eazel-install-public.h:
	ssl_rename functions.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_do_transaction_all_files_check),
	(eazel_install_start_transaction),
	Partially fixed 3460. I need to fail packages that do not pass.
	(eazel_install_requirement_dep_compare),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies),
	Fixed the weird case eli & robey came across, were the faulty
	athena dependencies caused gconf 0.8 to be installed over 0.9
	which is still needed.
	Now the package which is installed gets the WOULD_BE_LOST status
	and install_failed emittet.
	(eazel_install_do_file_conflict_check),
	Removed comments.
	(eazel_install_ensure_deps), 
	Added more comments and fixed the removal of failedpackages after
	do_dependency_check.
	
	(eazel_uninstall_upward_traverse):
	Fixed an uninstall bug I came acrosss.
	
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_status_enum_to_str),
	(packagedata_status_str_to_enum):
	Handles the WOULD_BE_LOST enum.
	
	* components/services/install/lib/eazel-install-types.h:
	The WOULD_BE_LOST enum
	
	* athena-installer/src/Makefile:
	* athena-installer/src/installer.c: (eazel_install_progress),
	(eazel_download_progress), (get_detailed_errors_foreach),
	(eazel_installer_add_category):
	Fixed output.

2000-10-08  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	:

	Fixing debug code I added to force error dialog. whoops.

2000-10-08  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (authn_cb_failed), (goto_update_cb),
	(error_dialog_retry_cb), (error_dialog_cancel_cb),
	(generate_error_dialog):

	Added dialog to catch errors like unable to connect and login failed.
	Doesn't look great yet but Arlo is going to give me some ideas to
	make it look a bit better.

2000-10-07  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-theme.c:
	(athena_theme_get_image_path_from_theme),
	(athena_theme_get_image_path):
	re-organized the code to add the ability to request image
	paths from specific themes, as well as the current one.
	* libathena-extensions/athena-theme.h:
	added athena_theme_get_image_path_from_theme.

	* src/athena-sidebar-tabs.c:
	(athena_sidebar_tabs_load_theme_data):
	used the above to implement sidebar tab redirection, so a theme
	can use the sidebar tabs from another theme, so sidebar tab images
	don't have to be present in every theme.
		
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_destroy), (check_local_theme), (set_theme),
	(get_icon_file_path):
	implemented icon theme default redirection, so a theme can specify
	another theme to get its icons from when they're not present locally;
	this is needed by both Arlo and Susan's themes.
	
	* src/athena-throbber.c,h: (athena_throbber_initialize_class),
	(athena_throbber_button_press_event):
	made clicking on the throbber take you to a URL specified by
	the current theme.  Did this by adding a location_change signal. This
	fixes bug 3433.
	
	* src/athena-window.c: (athena_window_constructed):
	hooked up athena-window to the throbber's location_change signal to
	change the location when the signal is emitted.
	
	* icons/default.xml:
	added default URI for throbber, pointing to www.eazel.com
	* icons/vector/vector.xml:
	added sidebar tab redirection to the Arlo theme for testing

2000-10-07  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/main.c: (main):
	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/mozilla-events.h:
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_uris_differ_only_by_fragment_identifier),
	(mozilla_progress_callback), (mozilla_dom_mouse_click_callback):

	Support POST-based form submissions in embedded mozilla
	(bugzilla.eazel.com 3484).  With this change, navigations involving
	POST's aren't forwarded to Athena, they are handled inside Mozilla
	directly.  This means that the URI won't change and the navigation won't
	be logged in the history buffer, but its better than nothing.

	Note that this fix only works when using Mozilla M18.

	Note that there seem to be some general bumps with web-browsing with
	both M17 and M18 right now.

2000-10-07  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_list_unref):
	Ooops, need to use athena_g_list_save_for_each in the
	list unref call.

2000-10-07  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-directory-async.c:
	(dequeue_pending_idle_callback):
	Add a FIXME to some unclear or wrong code.
	
	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_added),
	(athena_directory_notify_files_removed),
	(athena_directory_notify_files_moved):
	Fix 3050 - Memory trashing during drag&drop.
	Files removed from monitored directories did get an
	unref but they didn't get a ref when added to new
	monitored directories.s
	Add FIXMEs to some unclear, wrong or missing code.
	
	* libathena-extensions/athena-file.c:
	(athena_file_new_from_name), (athena_file_new_from_info),
	(athena_file_ref), (athena_file_unref):
	Add debugging code to help find ref-counting bugs with
	AthenaFile. Sadly this is not the full ref/unref balance
	debugger I had originally in mind as it seems to be way harder 
	to match up refs/unrefs than I thought.

	* libathena-extensions/athena-file.c:
	(athena_file_list_ref), (athena_file_list_unref),
	(athena_file_list_free), (athena_file_list_copy):
	Make these files call athena_file_ref/athena_file_unref
	instead of gtk_object_ref/gtk_object_unref. We should either
	stick to using athena_file_ref/unref or get rid of them. 
	Using both pairs of calls is a mess.
	
2000-10-07  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-shell-ui.xml:
	made the "find" button be a toggle button like it's supposed to be.
	
2000-10-07  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-window-toolbars.c: (set_up_button),
	(set_up_toolbar_images), (set_up_throbber_frame_type):
	made themed toolbar buttons work properly with new UI handler;
	you must get a new Bonobo for it to work.  Also, made the
	"Search Web" button get the right image, and other clean-ups.
	
	* src/athena-shell-ui.xml:
	made toolbar button separators work properly.  Also, removed
	"Service" button from xml file since it can't be conditionally
	added from there.
	
2000-10-06  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3517 (Sample component's merged items don't appear)
	
	* components/sample/athena-sample-content-view-ui.xml:
	Filled in.
	* components/sample/athena-sample-content-view.c:
	(bonobo_sample_callback), (sample_merge_bonobo_items_callback):
	Updated for new API, removed #ifdefs.

	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_merge_bonobo_items_callback): Removed unnecessary cast.
	
2000-10-06  Andy Hertzfeld  <andy@eazel.com>

	tried to put the right themable icons for the toolbar, but only
	succeeded at getting the stock icons.  Also, made the throbber
	show up, but it's not properly positioned yet.
	
	* src/athena-shell-ui.xml:
	added stock icons and control for throbber
	
	* src/athena-window-toolbars.c: (set_up_button),
	(set_up_toolbar_images), (set_up_throbber_frame_type),
	(allocate_throbber), (athena_window_initialize_toolbars):
	revamped for the new bonobo, and tell the ui handler about the
	themed icons (temporarily disabled for now)
	
	* src/athena-window.c: (navigation_bar_mode_changed_callback),
	(athena_window_constructed):
	initialize the toolbar
	
	* src/athena-window.h:
	removed the button fields, since they're now referenced through
	bonobo
	
2000-10-06  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3512 (Some separators not appearing in the
	right place)

	* src/athena-shell-ui.xml: Reworked the separators and
	"delimit" properties of placeholders. All values other
	than 'delimit="top"' have been deprecated in Bonobo to
	try to gain some performance, so I only used that.
	
	* src/athena-window-private.h: Updated Zoom menu paths
	that changed because I put in a new placeholder.
	* src/athena-window.c:
	(athena_window_zoom_level_changed_callback):
	This code wasn't updating the sensitivity of "Zoom Normal"
	at all. Now it's always sensitive for any zoom-supporting
	view. (There's a separate bug about how it should only be
	sensitive when not at the "Normal" setting, which I ignored
	for now).

2000-10-06  John Sullivan  <sullivan@eazel.com>

	Oops, one more change from previous checkin (breaks build
	without it)

	* src/athena-window-manage-views.c:
	Added missing include for athena-bonobo-extensions.h
	
2000-10-06  Mathieu Lacage  <mathieu@eazel.com>

	Fix bug 3125. new bonbo ui handler.
	
	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_set_hidden), (athena_bonobo_get_hidden):
	add new functions.
	* libathena-extensions/athena-bonobo-extensions.h:
	add prototypes.
	* src/athena-window-menus.c:
	(athena_window_update_show_hide_menu_items):
	switch to new bonobo code to hide/show toolbars. change menu 
	paths too.
	* src/athena-window-private.h: change menu paths.
	* src/athena-window.c: (show_dock_item), (hide_dock_item),
	(dock_item_showing), (athena_window_hide_location_bar),
	(athena_window_show_location_bar),
	(athena_window_location_bar_showing),
	(athena_window_hide_tool_bar), (athena_window_show_tool_bar),
	(athena_window_tool_bar_showing),
	(athena_window_hide_status_bar),
	(athena_window_show_status_bar),
	(athena_window_status_bar_showing):
	switch to new bonobo code for toolbar hiding/showing

2000-10-06  John Sullivan  <sullivan@eazel.com>

	Finished bug 3496 (labels in menu items never change)
	Finished bug 3495 (menu item sensitivity never changes)

	I think I have fixed all outstanding code that was setting
	the sensitivity and label text of menu items, except for
	cut/copy/paste (which is commented out) and undo, which
	has its own bug report. If you run across any others, 
	please write up new bugs.

	* src/file-manager/fm-directory-view.c: 
	(insert_bonobo_menu_item),
	(insert_bonobo_menu_subtree): Removed unnecessary (and
	#ifdeffed-out) calls to bonobo_ui_handler_set_sensitivity.
	(fm_directory_view_real_merge_menus): Removed unnecessary
	call to fm_directory_view_update_menus.
	* src/file-manager/fm-icon-view.c: 
	Updated menu path #defines that I needed to use later.
	(update_layout_menus): Move set_sensitive calls out of #ifdef,
	and modernize them.
	(insert_bonobo_menu_item) removed unnecessary (and
	#ifdeffed-out) call to bonobo_ui_handler_set_sensitivity
	(fm_icon_view_merge_menus): Took out code that's been
	modernized elsewhere; 
	(update_one_menu_item),	(fm_icon_view_update_menus): 
	removed #ifdefs, and modernized.
	* src/file-manager/fm-search-list-view.c: 
	(update_reveal_item): New helper function
	(real_merge_menus): #ifdefs removed
	(real_update_menus): Now calls helper function, #ifdefs removed
	
	* src/file-manager/athena-search-list-view-ui.xml: Couldn't
	resist improving a menu title
	
	* src/athena-window-manage-views.c: (load_content_view):
	modernize code setting initial zoom menu items sensitivity.
	
	* src/athena-window-menus.c: (append_bookmark_to_menu),
	(create_menu_item_from_node),
	(athena_window_initialize_bookmarks_menu): Added more 
	parameter checking because I saw an unreproducible
	parameter-failure crash a few levels deep.

2000-10-06  Rebecca Schulman  <rebecka@eazel.com>
	
	* libathena-extensions/athena-directory-async.c:
	* libathena-extensions/athena-directory-private.h:
	(set_up_request_by_file_attributes),
	(update_file_info_in_list_if_needed),
	(dequeue_pending_idle_callback),
	(athena_directory_call_when_ready_internal),
	(athena_directory_get_info_for_new_files),
	(lacks_slow_mime_type), (wants_slow_mime_type),
	(request_is_satisfied), (start_monitoring_file_list),
	(get_info_callback), (start_getting_file_info):
	Added separate ability to get file info with a 
	slow mime type in addition to the regular info.
	This call uses the same call chain, to get file info
	as the default, except it calls the async_get_file_info
	call with arguments to specify the mime type as slow.
	Since the file info structure itself doesn't 
	keep track of what kind of mime type is returned,
	we keep track of this in the athena directory
	structure itself.

	* libathena-extensions/athena-file-private.h:
	Changed the file object to keep track of both
	kinds of mime types, and use the default one,
	unless specifically requested otherwise.
	* libathena-extensions/athena-file.c:
	* libathena-extensions/athena-file.h:
	(athena_file_new_from_info), (destroy),
	(athena_file_update_info), 
	(athena_file_compare_by_type),
	(athena_file_get_string_attribute),
	(athena_file_get_type_as_string),
	(athena_file_get_slow_mime_type), (athena_file_get_mime_type),
	(athena_file_is_mime_type):
	Add and extra argument to update_info,
	to describe how the mime type was received.
	Altered the mime type call, and added a get_slow_mime_type
	call.  Free and update the new mime type fields where
	appropriate.
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_start_renaming_selected_item):
	Added a comment about where we'll need to
	add code to fix bug 690
	* libathena-extensions/athena-mime-actions.c:
	(get_mime_type_from_file):
	Updated the mime type call here to request the 
	slow mime type.

2000-10-06  John Sullivan  <sullivan@eazel.com>

	Work on bug 3496 (labels in menu items never change)
	Work on bug 3495 (menu item sensitivity never changes)
	Fixed bug 3503 ("Delete from Trash" never appears)

	* libathena-extensions/athena-bonobo-extensions.h:
	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_set_accelerator),
	(athena_bonobo_set_description): More new wrappers for
	xml shenanigans.

	* libathena/athena-bonobo-ui.h:
	* src/file-manager/fm-directory-view.h:
	Updated #defines for menu paths to match new syntax (start
	with "/menu", include placeholder names)
	
	* src/file-manager/fm-directory-view.c: 
	Store the BonoboUIComponent in FMDirectoryViewDetails.
	(fm_directory_view_real_create_selection_context_menu_items),
	(reset_bonobo_trash_delete_menu),
	(compute_menu_item_info): merge "Move to Trash" and
	"Delete from Trash" into single item.
	(update_one_menu_item): Use new-style Bonobo calls.
	(fm_directory_view_real_merge_menus): Remove old #ifddeffed code.
	(fm_directory_view_real_update_menus): #ifdef guts back
	in, and remove UIHandler references.
	* src/file-manager/athena-directory-view-ui.xml: Fixed typo
	in "Open in New Window" label.
	* src/athena-window-menus.c:
	(athena_window_update_find_menu_item): Removed stray debugging
	comment.

2000-10-06  Mike Fleming  <mfleming@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_merge_bonobo_items_callback):

	Embedded Mozilla works again.  (Minor case of passing the wrong class)

2000-10-06  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form):

	Fixing title bar.  It was not getting displayed anymore.

2000-10-06  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-sound.c:
	(kill_sound_if_necessary), (athena_sound_can_play_sound):
	fixed bug 3493, sound previews don't stop playing, by amending
	the logic in can_play_sound to return TRUE if a sound is
	already playing.
	* src/file-manager/fm-icon-view.c: (preview_sound):
	removed some code that was commented out
	
2000-10-06  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(use_proxy_changed):
	Fixed an additonal issue dealing with proxy settings. A boolean
	was getting reset improperly.
	
2000-10-06  John Sullivan  <sullivan@eazel.com>

	Fixed typo in built-in bookmark ("freshmean.net")

	* data/static_bookmarks.xml:

2000-10-06  John Sullivan  <sullivan@eazel.com>

	Work on bug 3496 (labels in menu bar items never change)
	Finished bug 3505 (tool bar & location bar don't extend across window)

	* libathena-extensions/athena-bonobo-extensions.h:
	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_set_label): New cover for bonobo xml
	shenanigans to change the displayed label of an item
	(menu item, toolbar item, whatever).
	
	* src/athena-shell-ui.xml: Set behavior attributes on
	tool bar and location bar so they fill the width of the
	window and so the location bar can't be made vertical.
	(Requires bonobo update to see this work.)
	
	* src/athena-window-menus.c: 
	(append_separator): New not-yet-implemented function called
	by other not-yet-working-again code.
	(athena_window_initialize_menus): Took out a bunch of the
	old #ifdeffed code now that the replacement code works.
	
	(athena_window_update_find_menu_item): Toggle the label
	of the Find menu item.
	
	* src/athena-window.c: (athena_window_constructed):
	Removed some #ifdeffed code.

2000-10-06  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form):

	Fixed major ui problem with background colors on scrolled window
	viewports.  Summary view looks alot better now.

2000-10-06  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3489, HTTP proxy field gets set, ignore "Use" checkbox
	Fixed bug 3490, HTTP proxy should default to 8080
	
	* libathena-extensions/athena-global-preferences.c:
	(proxy_changed), (use_proxy_changed), (register_proxy_preferences):
	Use better logic to set/unset variables.
	Add a default proxy port of 8080

2000-10-06  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):
	Set some instance variables to NULL

2000-10-06  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form):

	Fixing gtk_widget_show crap.  Removed double frees.

2000-10-06  Ramiro Estrugo  <ramiro@eazel.com>

	* athena.spec.in:
	Fix the freetype2 requires version.
	
2000-10-06  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	Update for the FreeType2 changes.

	* athena.spec.in:
	Update for the FreeType2 changes.  Add requires dependency on
	freetype2.

2000-10-06  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	Add FreeType2 information.
	
	* configure.in:
	Add support for using freetype2 installed in the system from devel
	rpms.
	
	* cut-n-paste-code/Makefile.am:
	* cut-n-paste-code/freetype/Makefile.am:
	* cut-n-paste-code/freetype/README:
	* cut-n-paste-code/freetype/autohint.h:
	* cut-n-paste-code/freetype/cff.c:
	* cut-n-paste-code/freetype/cidafm.c:
	* cut-n-paste-code/freetype/cidafm.h:
	* cut-n-paste-code/freetype/cidgload.c:
	* cut-n-paste-code/freetype/cidgload.h:
	* cut-n-paste-code/freetype/cidload.c:
	* cut-n-paste-code/freetype/cidload.h:
	* cut-n-paste-code/freetype/cidobjs.c:
	* cut-n-paste-code/freetype/cidobjs.h:
	* cut-n-paste-code/freetype/cidparse.c:
	* cut-n-paste-code/freetype/cidparse.h:
	* cut-n-paste-code/freetype/cidriver.c:
	* cut-n-paste-code/freetype/cidriver.h:
	* cut-n-paste-code/freetype/cidtokens.h:
	* cut-n-paste-code/freetype/freetype.h:
	* cut-n-paste-code/freetype/ftbase.c:
	* cut-n-paste-code/freetype/ftbbox.h:
	* cut-n-paste-code/freetype/ftcalc.c:
	* cut-n-paste-code/freetype/ftcalc.h:
	* cut-n-paste-code/freetype/ftconfig.h:
	* cut-n-paste-code/freetype/ftdebug.c:
	* cut-n-paste-code/freetype/ftdebug.h:
	* cut-n-paste-code/freetype/ftdriver.h:
	* cut-n-paste-code/freetype/fterrors.h:
	* cut-n-paste-code/freetype/ftextend.c:
	* cut-n-paste-code/freetype/ftextend.h:
	* cut-n-paste-code/freetype/ftglyph.c:
	* cut-n-paste-code/freetype/ftglyph.h:
	* cut-n-paste-code/freetype/ftgrays.c:
	* cut-n-paste-code/freetype/ftgrays.h:
	* cut-n-paste-code/freetype/ftimage.h:
	* cut-n-paste-code/freetype/ftinit.c:
	* cut-n-paste-code/freetype/ftlist.c:
	* cut-n-paste-code/freetype/ftlist.h:
	* cut-n-paste-code/freetype/ftmemory.h:
	* cut-n-paste-code/freetype/ftmm.c:
	* cut-n-paste-code/freetype/ftmm.h:
	* cut-n-paste-code/freetype/ftmodule-list.h:
	* cut-n-paste-code/freetype/ftmodule.h:
	* cut-n-paste-code/freetype/ftobjs.c:
	* cut-n-paste-code/freetype/ftobjs.h:
	* cut-n-paste-code/freetype/ftoption.h:
	* cut-n-paste-code/freetype/ftoutln.c:
	* cut-n-paste-code/freetype/ftoutln.h:
	* cut-n-paste-code/freetype/ftraster.c:
	* cut-n-paste-code/freetype/ftraster.h:
	* cut-n-paste-code/freetype/ftrend1.c:
	* cut-n-paste-code/freetype/ftrend1.h:
	* cut-n-paste-code/freetype/ftrender.h:
	* cut-n-paste-code/freetype/ftsmooth.c:
	* cut-n-paste-code/freetype/ftsmooth.h:
	* cut-n-paste-code/freetype/ftstream.c:
	* cut-n-paste-code/freetype/ftstream.h:
	* cut-n-paste-code/freetype/ftsystem.c:
	* cut-n-paste-code/freetype/ftsystem.h:
	* cut-n-paste-code/freetype/fttypes.h:
	* cut-n-paste-code/freetype/license.txt:
	* cut-n-paste-code/freetype/psmodule.c:
	* cut-n-paste-code/freetype/psmodule.h:
	* cut-n-paste-code/freetype/psnames.h:
	* cut-n-paste-code/freetype/pstables.h:
	* cut-n-paste-code/freetype/raster1.c:
	* cut-n-paste-code/freetype/sfdriver.c:
	* cut-n-paste-code/freetype/sfdriver.h:
	* cut-n-paste-code/freetype/sfnt.c:
	* cut-n-paste-code/freetype/sfnt.h:
	* cut-n-paste-code/freetype/sfobjs.c:
	* cut-n-paste-code/freetype/sfobjs.h:
	* cut-n-paste-code/freetype/smooth.c:
	* cut-n-paste-code/freetype/t1afm.c:
	* cut-n-paste-code/freetype/t1afm.h:
	* cut-n-paste-code/freetype/t1driver.c:
	* cut-n-paste-code/freetype/t1driver.h:
	* cut-n-paste-code/freetype/t1errors.h:
	* cut-n-paste-code/freetype/t1gload.c:
	* cut-n-paste-code/freetype/t1gload.h:
	* cut-n-paste-code/freetype/t1hinter.c:
	* cut-n-paste-code/freetype/t1hinter.h:
	* cut-n-paste-code/freetype/t1load.c:
	* cut-n-paste-code/freetype/t1load.h:
	* cut-n-paste-code/freetype/t1objs.c:
	* cut-n-paste-code/freetype/t1objs.h:
	* cut-n-paste-code/freetype/t1parse.c:
	* cut-n-paste-code/freetype/t1parse.h:
	* cut-n-paste-code/freetype/t1tables.h:
	* cut-n-paste-code/freetype/t1tokens.c:
	* cut-n-paste-code/freetype/t1tokens.h:
	* cut-n-paste-code/freetype/t1types.h:
	* cut-n-paste-code/freetype/t2driver.c:
	* cut-n-paste-code/freetype/t2driver.h:
	* cut-n-paste-code/freetype/t2errors.h:
	* cut-n-paste-code/freetype/t2gload.c:
	* cut-n-paste-code/freetype/t2gload.h:
	* cut-n-paste-code/freetype/t2load.c:
	* cut-n-paste-code/freetype/t2load.h:
	* cut-n-paste-code/freetype/t2objs.c:
	* cut-n-paste-code/freetype/t2objs.h:
	* cut-n-paste-code/freetype/t2parse.c:
	* cut-n-paste-code/freetype/t2parse.h:
	* cut-n-paste-code/freetype/t2tokens.h:
	* cut-n-paste-code/freetype/t2types.h:
	* cut-n-paste-code/freetype/truetype.c:
	* cut-n-paste-code/freetype/ttcmap.c:
	* cut-n-paste-code/freetype/ttcmap.h:
	* cut-n-paste-code/freetype/ttdriver.c:
	* cut-n-paste-code/freetype/ttdriver.h:
	* cut-n-paste-code/freetype/tterrors.h:
	* cut-n-paste-code/freetype/ttgload.c:
	* cut-n-paste-code/freetype/ttgload.h:
	* cut-n-paste-code/freetype/ttinterp.c:
	* cut-n-paste-code/freetype/ttinterp.h:
	* cut-n-paste-code/freetype/ttload.c:
	* cut-n-paste-code/freetype/ttload.h:
	* cut-n-paste-code/freetype/ttnameid.h:
	* cut-n-paste-code/freetype/ttobjs.c:
	* cut-n-paste-code/freetype/ttobjs.h:
	* cut-n-paste-code/freetype/ttpload.c:
	* cut-n-paste-code/freetype/ttpload.h:
	* cut-n-paste-code/freetype/ttpost.c:
	* cut-n-paste-code/freetype/ttpost.h:
	* cut-n-paste-code/freetype/ttsbit.c:
	* cut-n-paste-code/freetype/ttsbit.h:
	* cut-n-paste-code/freetype/tttables.h:
	* cut-n-paste-code/freetype/tttags.h:
	* cut-n-paste-code/freetype/tttypes.h:
	* cut-n-paste-code/freetype/type1.c:
	* cut-n-paste-code/freetype/type1cid.c:
	* cut-n-paste-code/freetype/type1z.c:
	* cut-n-paste-code/freetype/winfnt.c:
	* cut-n-paste-code/freetype/winfnt.h:
	* cut-n-paste-code/freetype/z1afm.c:
	* cut-n-paste-code/freetype/z1afm.h:
	* cut-n-paste-code/freetype/z1driver.c:
	* cut-n-paste-code/freetype/z1driver.h:
	* cut-n-paste-code/freetype/z1gload.c:
	* cut-n-paste-code/freetype/z1gload.h:
	* cut-n-paste-code/freetype/z1load.c:
	* cut-n-paste-code/freetype/z1load.h:
	* cut-n-paste-code/freetype/z1objs.c:
	* cut-n-paste-code/freetype/z1objs.h:
	* cut-n-paste-code/freetype/z1parse.c:
	* cut-n-paste-code/freetype/z1parse.h:
	* cut-n-paste-code/freetype/z1tokens.h:
	Removed the cut-n-pasted FreeType2 we had in our build.
	
	* libathena-extensions/Makefile.am:
	* librsvg/Makefile.am:
	* athena.spec.in:
	Update for FreeType2 changes.
	
2000-10-05  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row):

	Fixed gtk_widget_destroy problem, removed lots of debugging code,
	and fixed most of the memory leaks.

2000-10-06  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2212, Not able to drag icons from the panel.
	
	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-icon-container.h:
	(button_release_event), (athena_icon_container_initialize_class):
	Add a new signal to create symbolic links
	
	* libathena-extensions/athena-icon-dnd.c:
	(drag_data_received_callback), (receive_dropped_uri_list),
	(athena_icon_container_get_drop_action), (drag_motion_callback):
	Handle URI drags.
		
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_initialize), (create_link_callback),
	(icon_view_create_athena_links):
	Callbacks to handle the create_athena_links signal.  Create
	links from the data passed in the list using gnome-vfs async
	callback.
	
	* libathena-extensions/athena-program-choosing.c:
	(athena_launch_application_from_command):
	Quoted the command string in addition to the parameter.

2000-10-05  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row),
	(entry_changed_cb), (authn_cb_failed), (login_button_cb),
	(who_is_logged_in), (logged_in_callback), (logged_out_callback):

	Fixed memory handling issues; Removed gtk_widget_show()'s

2000-10-05  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line):
	* components/services/install/lib/eazel-install-metadata.c:
	(init_default_transfer_configuration):
	* components/services/install/lib/eazel-install-object.c:
	(create_temporary_directory), (eazel_install_alter_mode_on_temp),
	(eazel_install_delete_downloads), (eazel_install_install_packages),
	(eazel_install_revert_transaction_from_xmlstring):
	Fixed the tmpdir schema (fixes bug 2927).
	
	* components/services/install/lib/eazel-install-protocols.c:
	(get_search_url_for_package):
	Added flag=8 for version find. This opens bug 3482.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Made a better comparision to avoid dupes in the result list.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_package_compare),
	The better comparision for eazel-install-query.
	(install_new_packages), 
	Removed obsolete tmpdir creation.
	(eazel_install_check_existing_packages):
	g_assert when rpmdb appears to be screwed, this opens bug 3511.
	
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_open_uri):
	Formatting.
	
2000-10-06  Mathieu Lacage  <mathieu@eazel.com>

	* components/adapter/Makefile.am: add VFS_CFLAGS.

2000-10-05  Mike Fleming  <mfleming@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (authn_cb_succeeded),
	(authn_cb_failed), (logout_button_cb), (am_i_logged_in):
	Small fixes to summary view

2000-10-05  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(add_to_url):
	* athena-installer/src/installer.c: (eazel_installer_initialize):

	Fix off-by-2x bug in allocating quoted URL segments.

2000-10-05  Darin Adler  <darin@eazel.com>

	* README: Change required versions.

	* libathena-extensions/athena-bonobo-extensions.h:
	* libathena-extensions/athena-bonobo-extensions.c:
	(athena_bonobo_set_sensitive):
	Added new function that works with the new UI framework.

	* libathena-extensions/athena-druid-page-eazel.h:
	* libathena-extensions/athena-druid.h:

	* src/athena-shell-ui.xml: Make Select All insensitive.
	
	* src/athena-window.c: (athena_window_constructed):
	Get rid of some more of the old status bar code.
	(athena_window_allow_back), (athena_window_allow_forward),
	(athena_window_allow_up), (athena_window_allow_reload),
	(athena_window_allow_stop),
	(athena_window_zoom_level_changed_callback): Set shell
	menu item sensitivity with the new API.

	* src/athena-window.h: Remove status_bar_context_id.
	
2000-10-05  Andy Hertzfeld  <andy@eazel.com>
	
	* libathena-extensions/athena-customization-data.c:
	(athena_customization_data_get_next_element_for_display):
	made it use athena_image instead of gtk_pixmap so nice
	anti-aliased emblems can be displayed
	
	* src/athena-property-browser.c: (make_drag_image),
	(element_clicked_callback), (make_properties_from_xml_node):
	made it deal with athena_image instead of pixwidgets
	
	* data/emblems/Makefile.am:
	* icons/Makefile.am:
	* icons/emblem-OK.svg:
	* icons/emblem-distinguished.svg:
	* icons/emblem-draft.svg:
	* icons/emblem-favorite.svg:
	* icons/emblem-generic.svg:
	* icons/emblem-important.svg:
	* icons/emblem-new.svg:
	* icons/emblem-noread.svg:
	* icons/emblem-nowrite.svg:
	* icons/emblem-ohno.svg:
	* icons/emblem-personal.svg:
	* icons/emblem-shared.svg:
	* icons/emblem-special.svg:
	* icons/emblem-urgent.svg:
	new or update emblems from Susan

	* libathena-extensions/athena-image.h:
	removed spurious comment

2000-10-05  Mike Fleming  <mfleming@eazel.com>

	* athena-clean.sh:
	Added athena-summary-view to athena-clean.sh

2000-10-05  Darin Adler  <darin@eazel.com>

	Cut over to HEAD of Bonobo. This check-in includes all the changes
	needed to compile and run, but there are many things wrong
	visually that may take a while to get fixed.
	
	* src/athena-window-menus.c: (file_menu_new_window_callback),
	(file_menu_close_window_callback),
	(file_menu_close_all_windows_callback),
	(file_menu_toggle_find_mode_callback),
	(file_menu_web_search_callback), (edit_menu_undo_callback),
	(edit_menu_cut_callback), (edit_menu_copy_callback),
	(edit_menu_paste_callback), (edit_menu_clear_callback),
	(go_menu_back_callback), (go_menu_forward_callback),
	(go_menu_up_callback), (go_menu_home_callback),
	(go_menu_forget_history_callback), (view_menu_reload_callback),
	(view_menu_show_hide_sidebar_callback),
	(view_menu_show_hide_tool_bar_callback),
	(view_menu_show_hide_location_bar_callback),
	(view_menu_show_hide_status_bar_callback),
	(athena_window_update_show_hide_menu_items),
	(view_menu_zoom_in_callback), (view_menu_zoom_out_callback),
	(view_menu_zoom_normal_callback),
	(bookmarks_menu_add_bookmark_callback),
	(bookmarks_menu_edit_bookmarks_callback),
	(user_level_customize_callback), (customize_callback),
	(change_appearance_callback), (help_menu_about_athena_callback),
	(help_menu_athena_feedback_callback), (switch_to_user_level),
	(user_level_menu_item_callback), (append_placeholder),
	(append_separator), (append_bookmark_to_menu),
	(create_menu_item_from_node), (remove_bookmarks_after),
	(remove_underline_accelerator_from_menu_title),
	(new_top_level_menu), (add_user_level_menu_item),
	(athena_window_initialize_menus),
	(athena_window_update_find_menu_item),
	(update_user_level_menu_items), (convert_verb_to_user_level),
	(convert_user_level_to_verb), (update_preferences_dialog_title):
	* src/athena-window.c: (athena_window_clear_status),
	(athena_window_set_status), (install_status_bar),
	(athena_window_constructed), (athena_window_set_arg),
	(athena_window_get_arg), (athena_window_destroy),
	(athena_window_allow_back), (athena_window_allow_forward),
	(athena_window_allow_up), (athena_window_allow_reload),
	(athena_window_zoom_level_changed_callback),
	(athena_window_set_content_view_widget), (show_dock_item),
	(hide_dock_item), (dock_item_showing),
	(athena_window_hide_tool_bar), (athena_window_show_tool_bar),
	(athena_window_tool_bar_showing),
	(athena_window_hide_status_bar),
	(athena_window_show_status_bar),
	(athena_window_status_bar_showing):
	Convert to new API. Some is disabled with #ifdef UIH.
	
	* Makefile.am:
	* configure.in:
	Turned off build of the idl directory, build components after src.
	
	* components/adapter/main.c:
	* components/notes/athena-notes.c:
	* components/sample/main.c:
	* libathena-extensions/athena-font-picker.c:
	* libathena-extensions/athena-global-preferences.c:
	* libathena-extensions/athena-password-dialog.c:
	* libathena-extensions/athena-preferences-item.c:
	* libathena/athena-undo-transaction.c:
	* libathena/athena-undo.c:
	* src/athena-application.c:
	* src/athena-history-frame.c:
	* src/athena-link-set-window.c:
	* src/athena-main.c:
	* src/athena-shell.c:
	* src/athena-sidebar.c:
	* src/athena-view-frame-corba.c:
	* src/athena-zoomable-frame-corba.c:
	* test/test-athena-font-picker.c:
	* test/test-athena-image.c: (create_font_picker_frame):
	* test/test-athena-label.c: (create_font_picker_frame):
	* test/test-athena-preferences.c:
	* test/test-athena-widgets.c: (radio_group_load_it_up):
	Fixed includes.
	
	* test/test-athena-image.c: (create_font_picker_frame):
	* test/test-athena-label.c: (create_font_picker_frame):
	* test/test-athena-widgets.c: (radio_group_load_it_up):
	Turned off localization of some strings in tests.

	* components/adapter/athena-adapter-control-embed-strategy.c:
	(athena_adapter_control_embed_strategy_new):
	* components/adapter/athena-adapter-control-embed-strategy.h:
	* components/adapter/athena-adapter-embed-strategy.c:
	(athena_adapter_embed_strategy_get):
	* components/adapter/athena-adapter-embed-strategy.h:
	* components/adapter/athena-adapter-embeddable-embed-strategy.c:
	(athena_adapter_embeddable_embed_strategy_new):
	* components/adapter/athena-adapter-embeddable-embed-strategy.h:
	Embedding code now deals with Bonobo_UIContainer, not
	Bonobo_UIHandler.
	
	* components/adapter/athena-adapter.c: (athena_adapter_new):
	This code not only had to be changed to deal with the
	Bonobo_UIContainer instead of Bonobo_UIHandler, but it also needed
	to deal with the containing item (was remote_ui_handler), not the
	local component.

	* components/adapter/athena-adapter-embeddable-embed-strategy.c:
	(athena_adapter_embeddable_embed_strategy_new):
	* components/adapter/athena-adapter.c:
	BonoboContainer was renamed BonoboItemContainer.
	
	* components/history/athena-history-view.c:
	Remove unused BonoboUIHandler * field.
	
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/sample/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Added the necessary defines and build rules to install ui.xml
	files and locate them from the C code.
	
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/athena-icon-view-ui.xml:
	* src/file-manager/athena-search-list-view-ui.xml:
	* src/athena-shell-ui.xml:
	Added definitions of user interface.
	
	* components/loser/content/athena-content-loser-ui.xml:
	* components/loser/sidebar/athena-sidebar-loser-ui.xml:
	* components/mozilla/athena-mozilla-ui.xml:
	* components/sample/athena-sample-content-view-ui.xml:
	Added empty placeholders for user interface.
	
	* components/loser/content/athena-content-loser.c:
	(loser_merge_bonobo_items_callback):
	* components/loser/sidebar/athena-sidebar-loser.c:
	(loser_merge_bonobo_items_callback):
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_merge_bonobo_items_callback):
	* components/sample/athena-sample-content-view.c:
	(sample_merge_bonobo_items_callback):
	Use athena_view_set_up_ui to get the user interface from a
	ui.xml file. Put #ifdef UIH around old code to make the items work
	that still needs to be visited.
	
	* libathena-extensions/athena-bonobo-extensions.c:
	* libathena-extensions/athena-bonobo-extensions.h:
	* libathena-extensions/athena-undo-manager.c:
	* libathena-extensions/athena-undo-manager.h:
	* libathena/athena-clipboard.c: (add_menu_items_callback),
	(remove_menu_items_callback),
	(athena_clipboard_set_up_editable_from_bonobo_control):
	* libathena/athena-clipboard.h:
	Wrapped code in ifdef UIH to disable it until it can be converted
	to the new Bonobo.
	
	* libathena-extensions/athena-caption-table.h:
	* libathena-extensions/athena-caption.h:
	* libathena-extensions/athena-font-picker.h:
	* libathena-extensions/athena-preferences-group.h:
	* libathena-extensions/athena-preferences-item.h:
	* libathena-extensions/athena-radio-button-group.h:
	* src/athena-about.h:
	Got rid of any cases where headers include the omnibus header
	<gnome.h>. These made the conversion process harder, which is why
	we fixed them.
	
	* libathena/libathena.h:
	Got rid of cases where headers include the omnibus header
	<bonobo.h>.
	
	* libathena/athena-view.h:
	* libathena/athena-view.c: (athena_view_set_up_ui):
	Added a helper function to make it easy for Athena components to
	load their UI and get it attached to the Athena:View object.
	
	* athena.spec.in: Install the athena-*-ui.xml files too.
	
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(bonobo_menu_select_all_callback),
	(bonobo_menu_empty_trash_callback),
	(bonobo_control_activate_callback): Convert to new API.
	(fm_directory_view_get_bonobo_ui_container): Name and purpose
	changed slightly for new API.
	(fm_directory_view_real_merge_menus): Merge with new API.
	(fm_directory_view_real_update_menus): Disabled this code for now.
	
	* src/file-manager/fm-icon-view.c: (fm_icon_view_destroy): Destroy
	icon view's own component at destroy time.
	(context_menu_layout_radio_item_callback),
	(append_one_context_menu_layout_item),
	(fm_icon_view_create_background_context_menu_items),
	(update_layout_menus): Convert to new API, disable some with
	#ifdef UIH.
	(get_sort_criterion_by_verb),
	(set_sort_criterion_by_verb), (sort_callback): Convert to new API.
	(fm_icon_view_merge_menus): Merge with new API, creating our own
	UI component separate from the directory view's.
	(fm_icon_view_update_menus): Disable with #ifdef UIH.
	
	* src/file-manager/fm-search-list-view.h:
	* src/file-manager/fm-search-list-view.c:
	(fm_search_list_view_initialize_class),
	(fm_search_list_view_initialize), (real_destroy),
	(indexing_info_callback), (real_merge_menus), (real_update_menus):
	Add code necessary to use a separate UI component, and disabled
	the actual menu set-up code with #ifdef UIH. This required adding
	a details struct.
	
	* src/athena-desktop-window.c: (realize): Turned off the code
	that hides the desktop elements.
	
	* src/athena-window-private.h:
	* src/athena-view-frame.h:
	* src/athena-view-frame.c: (athena_view_frame_destroy),
	(athena_view_frame_new), (athena_view_frame_load_client):
	* src/athena-window-manage-views.c: (load_content_view),
	(athena_window_set_sidebar_panels):
	Change to use Bonobo_UIContainer instead of Bonobo_UIHandler.
	
	* src/athena-window-toolbars.c: (remember_buttons),
	(athena_window_initialize_toolbars): Leave this code around and
	change it enough to compile and run, even though it's creating a
	second, invisible toolbar.
	
	* src/athena-window.h: Change to be a BonoboWin subclass instead
	of a GnomeApp subclass.
	
2000-10-05  Ramiro Estrugo  <ramiro@eazel.com>

	* athena.spec.in:
	Remove About.html which is no longer in the tree.
	
2000-10-05  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-list.c:
	(athena_list_clear_from_row):
	Fix one more rectangle arithmetic overflow bug that was causing
	a list view update glitch. Hope this is the last of bug 2036.

2000-10-05  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-profiler.c: (scrolled_text_new),
	(window_delete_event), (window_print_button_callback),
	(window_save_button_callback), (dump_dialog_new),
	(dump_dialog_show), (athena_profiler_bonobo_ui_report_callback):
	Make the profile report show up in a scrolling text window.
	
2000-10-05  Ramiro Estrugo  <ramiro@eazel.com>

	* src/Makefile.am:
	Build profiler hooks if ENABLE_PROFILER is enabled.
	
	* src/athena-profiler.c: (widget_find_ancestor_window),
	(ui_handler_find_ancestor_window), (widget_set_busy_cursor),
	(widget_clear_busy_cursor),
	(athena_profiler_bonobo_ui_report_callback):
	Add support for saving dump to a file.
	
2000-10-05  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header):
	Fix uninitialized variable.

2000-10-05  Ramiro Estrugo  <ramiro@eazel.com>

	* athena.spec.in:
	Add the athena-image-view component.
	
2000-10-05  Andy Hertzfeld  <set EMAIL_ADDRESS environment variable>

	* data/top/.athena-metafile.xml:
	* data/top/About.html:
	* data/top/Makefile.am:
	fixed bug 3412, about.html in novice home directory misaligned
	with audience, by deleting it
	
	* src/athena-property-browser.c: (make_property_tile):
	improved property browser item layout by making the labels
	line up in the table.
	
2000-10-04  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-profiler.c:
	(athena_profiler_bonobo_ui_reset_callback),
	(athena_profiler_bonobo_ui_start_callback),
	(athena_profiler_bonobo_ui_stop_callback),
	(athena_profiler_bonobo_ui_report_callback):
	* src/athena-profiler.h:
	New files.  Hooks for having profiling menu support in athena.
	Not wired up yet. 

2000-10-04  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(get_icon_space_width):
	fixed problem Arlo found where tighter layout mode causes the
	selection boxes of adjacent icons to overlap, by giving a little
	extra space in tighter layout mode.
	
	* libathena-extensions/athena-thumbnails.c:
	(athena_get_thumbnail_uri), (check_for_thumbnails):
	`made thumbnails update in raster order, instead of reverse order
	like it was doing, by using glist_append instead of glist_prepend;
	also, made it use the real "broken image" icon.
	
	* icons/Makefile.am:
	* icons/i-broken-image.png:
	added image from Susan to use as "thumbnailing failed" image
	
2000-10-04  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	(init_default_transfer_configuration):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_arg), (eazel_install_class_initialize),
	(eazel_install_new_with_config):
	* components/services/install/lib/eazel-install-protocols.c:
	(get_search_url_for_package):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-types.h:
	* components/services/trilobite/doc/gconf.txt:
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_open_uri), (trilobite_fetch_uri):

	Add "eazel-auth" config to gconf settings that makes the install
	XML fetching use eazel-services: URI type instead of http:
	(defaults to on).  This is required for security reasons, once
	eazel-services: uses SSL.
	
2000-10-04  Robey Pointer  <robey@eazel.com>

	* athena-installer/src/installer.c: (eazel_install_dep_check):
	* athena-installer/src/main.c:

	Install lib doesn't always hint us with package names now, so dig
	it out when showing dependency labels.  Fix up wording of --local
	option for Eli.

2000-10-04  Maciej Stachowiak  <mjs@eazel.com>

	* athena.spec.in: Add athena-adpater

2000-10-04  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Fix a dumb typo in the comments.
	
2000-10-04  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Fixed profiler path.
	
2000-10-04  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (logged_in_callback),
	(logged_out_callback), (athena_summary_view_initialize),
	(athena_summary_view_load_uri):

	Fixed the redraw failure when logging in.  Fixed the background
	color problem but scrolled window containers still don't pickup
	the AthenaBackground color.  I have no idea why this doesn't
	work.  Removed the "Loading Services" form since it was not
	very useful and caused lots of problems.

2000-10-04  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Dont build the mozilla component for profiled builds cause the c++
	compiler used for mozilla rpms is not binary compatible with the
	one used for profiling.

2000-10-04  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Fix a typo and stop spewing profile cflags since there isnt any.
	
2000-10-04  Ramiro Estrugo  <ramiro@eazel.com>

	* acconfig.h:
	* configure.in:
	Add profiling support via --enable-profiler.
	
2000-10-04  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/install/server/Makefile.am:
	* components/services/time/service/Makefile.am:
	* components/services/trilobite/sample/service/Makefile.am:
	Dont hardcode LDFLAGS in these makefiles, otherwise LDFLAGS cant
	be globally set at configure time.
	
2000-10-04  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-drag.h:
	Bug 2943.
	Set the auto-scroll delay to 750 ms per Arlo's recommendation.

	* libathena-extensions/athena-list.c: (rectangle_intersect),
	(athena_list_clear_from_row):
	Finish up 2036 - rectangular sections of list view sometimes 
	get erased. Fix up all the other list view drawing glitches that
	were showing up when invalidating the list view with other windows,
	resizing columns, etc.
	gdk_rectangle_intersect is ultra-lame and returns undefined rectangles
	when doing an intersection of two disjoint rectangles, instead of returning
	an empty rectangle with zero width/height.
	For now replaced places that relied on this behavior to be correct with a 
	call to rectangle_intersect that handles the result properly.

2000-10-04  Michael Engber  <engber@eazel.com>

	Changed the background code so that updates occuring
	during image loading are handled by drawing with the
	old settings. This prevents visual glitches/flash (bug 739)
	* libathena-extensions/athena-background.c:
	(athena_background_remove_current_image),
	(athena_background_destroy),
	(athena_background_set_image_placement),
	(reset_cached_color_info),
	(athena_background_ensure_gradient_buffered),
	(athena_background_image_totally_obscures),
	(athena_background_ensure_image_scaled),
	(athena_background_pre_draw), (athena_background_set_color),
	(athena_background_load_image_callback),
	(athena_background_is_image_load_in_progress),
	(athena_background_cancel_loading_image),
	(athena_background_start_loading_image),
	(athena_background_set_image_uri_no_emit),
	(athena_background_set_image_uri_helper),
	(athena_background_set_image_uri),
	(set_image_and_color_image_loading_done_callback),
	(athena_background_set_image_uri_and_color),
	(athena_background_receive_dropped_background_image),
	(athena_background_is_loaded), (athena_background_real_reset),
	(athena_background_is_too_complex_for_gtk_style),
	(athena_background_receive_dropped_color):

2000-10-04  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (tree_helper):
	Just print the rpmname and not the file anme
	* components/services/install/lib/eazel-install-md5.c:
	(md5_get_digest_from_file):
	Handle filename==null
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_emit_dependency_check_default):
	Hack that should be removed when 3460 is fixed
	
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package):
	Indention...
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_query):
	Variable init
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_pre_install_packages),
	(eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_monitor_subcommand_pipe),
	(eazel_install_do_transaction_md5_check),
	(eazel_install_prepare_package_system),
	(eazel_install_free_package_system),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_dependencies),
	(eazel_install_do_rpm_dependency_check),
	(eazel_install_do_file_conflict_check),
	(eazel_install_do_dependency_check), (eazel_install_ensure_deps),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install):
	Variable init, removed some old fixme comments.
	Fixed 3373. Slightly better packagesystem modularity now.
	
	* components/services/install/lib/eazel-install-rpm-signature.c:
	(trilobite_check_rpm_signature):
	variable init.
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new), (packagedata_fill_from_rpm_header),
	(packagedata_fill_from_file), (packagedata_destroy),
	Fixed 3458.
	Fixed 3465.
	(packagedata_modstatus_enum_to_str),
	(packagedata_modstatus_str_to_enum):
	Var initializing.
	
	* athena-installer/src/Makefile:
	Yeah..
	
2000-10-04  Andy Hertzfeld  <andy@eazel.com>

	* icons/i-music.png:
	better version of the non-anti-aliased music icon from Susan
	inadvertently left out of my previous check-in
	
2000-10-04  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c:
	(icon_container_preview_callback):
	fixed bug 3463, get sound diagnostics when mousing over non-sound
	files, by only testing for sound if we're over a sound file

	* src/athena-window-toolbars.c: (set_up_throbber_frame_type),
	(allocate_throbber), (theme_changed_callback),
	(athena_window_initialize_toolbars),
	(athena_window_toolbar_remove_theme_callback):
	made the shadow type of the throbber frame be specified by the
	theme.
		
	* icons/ardmore/ardmore.xml:
	* icons/default.xml:
	* icons/eazel/eazel.xml:
	* icons/vector/vector.xml:
	changed the shadow types in some themes
	
2000-10-03  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_file), (eazel_install_fetch_package),
	(add_to_url), (get_url_for_package):

	Erase file if it didn't download correctly (was leaving around
	0-length files).  Quote weird characters in values when composing
	an URL.
	
	* athena-installer/src/callbacks.c: (druid_delete):
	* athena-installer/src/callbacks.h:
	* athena-installer/src/installer.c: (get_pixmap_x_y),
	(create_pixmap), (create_what_to_do_page), (jump_to_error_page),
	(create_window), (eazel_install_progress),
	(eazel_download_progress), (get_detailed_errors_foreach),
	(download_failed), (eazel_install_preflight),
	(eazel_install_dep_check), (eazel_install_delete_files),
	(install_done), (check_if_next_okay), (toggle_button_toggled),
	(check_system), (eazel_installer_do_install),
	(eazel_installer_finalize), (eazel_install_get_depends),
	(eazel_installer_initialize):
	* athena-installer/src/installer.h:
	* athena-installer/src/main.c:

	Catch (X) click on window and exit cleanly.  Combine the two -d
	options into one and consolidate the debug output.  Change default
	server to services.eazel.com.  Resize druid to the size of the
	background XPM and disallow resizes.  Remove the /tmp dir on
	failure.  Use only printable chars in /tmp dir name.  Remove the
	ability to do nonsensical browsing in the druid (backwards from
	page one, etc).
	
	* athena-installer/src/error-symbol.xpm:

	Needed XPM for the error page.
	
	* athena-installer/src/prescript:

	Remove weird Danish text and replace with terse English text.

2000-10-03  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-directory-aa.png:
	* icons/arlo/i-directory.png:
	* icons/arlo/i-directory-72.png:
	Added a couple of non-AA folder icons.


2000-10-03  Mathieu Lacage  <mathieu@eazel.com>

	* src/file-manager/fm-list-view.c: (fm_list_handle_dragged_items):
	initalize ret_val for optimized builds...

2000-10-03  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(get_icon_space_width):
	changed how layout works in the non-tighter-layout case by
	removing the powers of two padding and instead going with
	a fixed minimum size.
	
2000-10-03  Darin Adler  <darin@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri): Fixed window title.

2000-10-03  Maciej Stachowiak  <mjs@eazel.com>

	* check-THANKS.pl,
	components/adapter/athena-adapter-progressive-load-strategy.c,
	components/adapter/athena-adapter-stream-load-strategy.c,
	src/athena-view-frame.c: Filed bugs for some FIXMEs

2000-10-03  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-gdk-pixbuf-extensions.c:
	(athena_gdk_pixbuf_average_value):
	fixed bug where there was an overflow computing the average
	pixel value for large enough tiles; it manifested by choosing the
	wrong color text over certain backgrounds like clouds; fixed by 
	using uints for the accumulators instead of ints.
	
2000-10-03  Mathieu Lacage  <mathieu@eazel.com>

	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_marshal_BOOL__INT_POINTER_INT_INT_UINT): add function.
	* libathena-extensions/athena-gtk-extensions.h: add prototype.
	
	* libathena-extensions/athena-list.c: 
	(athena_list_initialize_class),
	(athena_list_prelight_if_necessary), (athena_list_drag_motion),
	(athena_list_drag_drop), (athena_list_drag_data_received):
	* libathena-extensions/athena-list.h:
	add the handle-dragged-items signal to handle prelighting when you 
	drag.
	
	* src/file-manager/fm-list-view.c: (fm_list_handle_dragged_items),
	(set_up_list): hook to the handle-dragged-items signal.

2000-10-03  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3155 (need feedback item in Help menu)

	Bud & co. decided this should be there all the time.

	* src/athena-window-menus.c:
	(help_menu_athena_feedback_callback),
	(athena_window_initialize_menus): Added menu item
	that opens a feedback web page.

2000-10-03  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3379 (crash leaving web page)
	
	* libathena-extensions/athena-directory-async.c:
	(directory_load_done): When directory load returns an
	error, clear unconfirmed bit on all files in that directory
	so they won't be marked gone later.

	Fixed bug 3421 (web page with blank HTML title causes blank
	title in Athena)

	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_title_changed_callback): Don't call athena_view_set_title
	if the HTML title is NULL or "".

2000-10-03  Pavel Cisler  <pavel@eazel.com>

	Work on 2036 - drawing glitches in ListView.

	* configure.in:
	* cut-n-paste-code/widgets/Makefile.am:
	* cut-n-paste-code/widgets/athenaclist/.cvsignore:
	* cut-n-paste-code/widgets/athenaclist/Makefile.am:
	* cut-n-paste-code/widgets/athenaclist/athenaclist.c:
	* cut-n-paste-code/widgets/athenaclist/athenaclist.h:
	(COLUMN_FROM_XPIXEL), (LIST_WIDTH), (athena_clist_get_type),
	(athena_clist_class_init), (athena_clist_set_arg),
	(athena_clist_get_arg), (athena_clist_init),
	(athena_clist_construct), (athena_clist_new),
	(athena_clist_new_with_titles), (athena_clist_set_hadjustment),
	(athena_clist_get_hadjustment), (athena_clist_set_vadjustment),
	(athena_clist_get_vadjustment),
	(athena_clist_set_scroll_adjustments),
	(athena_clist_set_shadow_type),
	(athena_clist_set_selection_mode), (athena_clist_freeze),
	(athena_clist_thaw), (athena_clist_column_titles_show),
	(athena_clist_column_titles_hide),
	(athena_clist_column_title_active),
	(athena_clist_column_title_passive),
	(athena_clist_column_titles_active),
	(athena_clist_column_titles_passive),
	(athena_clist_set_column_title),
	(athena_clist_get_column_title),
	(athena_clist_set_column_widget),
	(athena_clist_get_column_widget),
	(athena_clist_set_column_justification),
	(athena_clist_set_column_visibility),
	(athena_clist_set_column_resizeable),
	(athena_clist_set_column_auto_resize),
	(athena_clist_columns_autosize),
	(athena_clist_optimal_column_width):

	Had to create a copy of GtkCList to work around problems where the drawing
	code was getting called directly behind our derived classes back. Rebecka 
	already set GtkCList up in the cut-n-paste directory. Move it to the Athena 
	namespace so that it doesn't collide with the original.
	Add more methods to allow completely overriding all drawing by a 
	derived class.
	Add not reached asserts in original GtkCList drawing code that was 
	messing us up.
	
	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-list-column-title.c:
	(get_column_label_at), (get_column_frame_at),
	(athena_list_column_title_paint), (in_column_rect),
	(in_resize_rect):
	* libathena-extensions/athena-list.c:
	(athena_list_initialize_class), (activate_row),
	(athena_list_is_row_selected), (row_set_selected),
	(select_row_unselect_others), (athena_list_unselect_all),
	(athena_list_select_all), (athena_list_button_press),
	(athena_list_button_release),
	(athena_list_clear_keyboard_focus),
	(athena_list_set_keyboard_focus),
	(athena_list_keyboard_move_to), (athena_list_select_row),
	(keyboard_row_reveal_timeout_callback), (athena_list_reveal_row),
	(athena_clist_get_first_selected_row),
	(athena_clist_get_last_selected_row),
	(athena_list_keyboard_navigation_key_press),
	(athena_list_activate_selected_items), (athena_list_realize),
	(list_requisition_width), (athena_list_size_request),
	(new_column_width), (size_allocate_columns),
	(size_allocate_title_buttons), (athena_list_draw_focus),
	(get_cell_style), (get_cell_horizontal_start_position),
	(last_column_index), (get_cell_rectangle), (draw_cell), (draw_row),
	(athena_list_clear_from_row), (draw_rows), (draw_all),
	(athena_list_draw), (athena_list_expose),
	(athena_list_resize_column), (athena_list_mark_cell_as_link),
	(athena_list_set_cell_contents), (athena_list_set_pixbuf_list),
	(athena_list_track_new_column_width), (athena_list_motion),
	(athena_list_column_resize_track_start),
	(athena_list_column_resize_track),
	(athena_list_column_resize_track_end),
	(athena_list_real_scroll), (athena_list_clear),
	(athena_list_new_with_titles), (athena_list_row_at),
	(athena_list_get_selection), (athena_list_set_selection),
	(athena_list_each_selected_row),
	(athena_list_get_first_selected_row), (insert_row):
	* libathena-extensions/athena-list.h:
	* src/file-manager/fm-list-view.c: (column_clicked_callback),
	(fm_list_view_compare_rows), (compare_rows_by_name),
	(match_row_name), (context_click_selection_callback),
	(context_click_background_callback), (make_sorted_row_array),
	(select_row_common), (select_previous_next_common),
	(fm_list_athena_file_at), (row_get_data_binder),
	(fm_list_get_drag_pixmap), (create_list), (set_up_list),
	(add_to_list), (fm_list_view_clear),
	(fm_list_view_begin_adding_files), (fm_list_view_add_file),
	(remove_from_list), (fm_list_view_file_changed),
	(fm_list_view_done_adding_files), (real_is_empty),
	(fm_list_view_set_zoom_level), (fm_list_view_reset_row_height),
	(fm_list_view_select_all), (fm_list_view_sort_items),
	(install_row_images), (update_icons):
	
	Updated to match new renamings.

	* libathena-extensions/athena-list.h:
	* libathena-extensions/athena-list.c:
	(draw_rows), (draw_all):

	Make these a method, call them as such instead of calling them directly.
	Switch to the new ATHENA_CALL_VIRTUAL macro.

2000-10-03  Michael Engber  <engber@eazel.com>

	Sped up background drawing for the tiled non-aa case.
	* libathena-extensions/athena-background.c:
	(update_drawable_with_pixbuf), (draw_pixbuf_tiled),
	(athena_background_draw), (draw_pixbuf_tiled_aa):

2000-10-03  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3422 (Forward menu crashes after choosing from
	Back menu (and vice-versa))

	* src/athena-window-manage-views.c: 
	(handle_go_back), (handle_go_forward): Don't free the
	link whose data you're about to move to another list.
	This got broken in a recent leak-fixing pass.

2000-10-03  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3420: "Show Sidebar" can leave sidebar at zero width

	* libathena-extensions/athena-horizontal-splitter.h:
	New public functions athena_horizontal_splitter_expand,
	..._collapse, and ..._toggle_position.
	
	* libathena-extensions/athena-horizontal-splitter.c:
	(athena_horizontal_splitter_expand): Broken out of
	toggle_position, just does the expanding part (or nothing
	if already expanded).
	(athena_horizontal_splitter_collapse): Broken out of
	toggle_position, just does the collapsing part (or nothing
	if already collapsed).
	(athena_horizontal_splitter_toggle_position): renamed
	from toggle_splitter_position; now calls the broken-out
	functions.
	(athena_horizontal_splitter_button_release): Updated for
	name change.
	
	* src/athena-window.c: (athena_window_show_sidebar):
	Call athena_horizontal_splitter_expand when showing sidebar.

2000-10-03  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	Retired.

	* components/mozilla/README:
	Added Mozilla component information.
	
2000-10-03  Ramiro Estrugo  <ramiro@eazel.com>

	* athena.spec.in:
	Make sure the throbber graphics make it into the rpm.
	
2000-10-03  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize):
	* components/services/install/lib/eazel-install-metadata.c:
	(check_gconf_init), (get_conf_string), (get_conf_int),
	(get_conf_boolean):
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new):
	* components/services/athena-dependent-shared/Makefile.am:
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(check_gconf_init), (wipe_redirect_table), (add_redirect),
	(trilobite_redirect_lookup), (trilobite_get_services_address):
	* configure.in:
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_get_sidebar_panel_view_identifiers),
	(register_proxy_preferences):
	* libathena-extensions/athena-preferences-private.h:
	* libathena-extensions/athena-preferences.c:
	(preferences_hash_node_add_by_user_level_callbacks),
	(preferences_hash_node_add_callback),
	(preferences_make_make_gconf_key),
	(preferences_gconf_by_user_level_callback),
	(preferences_gconf_callback), (preferences_initialize_if_needed),
	(athena_preferences_set_boolean),
	(athena_preferences_get_boolean),
	(athena_preferences_set_string_list),
	(athena_preferences_get_string_list),
	(athena_preferences_set_enum), (athena_preferences_get_enum),
	(athena_preferences_set), (athena_preferences_get),
	(athena_preferences_handle_error):
	* libathena-extensions/athena-user-level-manager.c:
	(user_level_manager_new), (user_level_set_default_if_needed),
	(gconf_user_level_changed_callback),
	(athena_user_level_manager_set_user_level),
	(user_level_manager_get_user_level_as_string),
	(athena_user_level_manager_set_default_value_if_needed),
	(athena_user_level_manager_compare_preference_between_user_levels
	):
	Update for GConf HEAD (0.9)
	
2000-10-03  Andy Hertzfeld  <andy@eazel.com>

	* components/music/mpg123_handler.c: (get_play_status),
	(song_finished), (start_playing_file), (stop_playing_file):
	made the music view use athena_sound for process management
	
	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri):
	get the album cover to display from the CUSTOM_ICON metadata,
	ehich is preferred; otherwise, draft one if there's exactly
	one image in the directory.  The metadata part isn't working yet.
	
2000-10-03  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages):
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_local_xml_package_list):
	* components/services/install/lib/eazel-install-xml-package-list.h:

	Text for the "finished" screen of the bootstrap installer can now
	be changed in the XML file.

	* athena-installer/src/callbacks.c: (begin_install):
	* athena-installer/src/installer.c: (gtk_label_new_with_font),
	(create_install_page), (create_pixmap_widget),
	(jump_to_error_page), (create_finish_page_good), (create_window),
	(eazel_install_progress), (eazel_download_progress),
	(get_detailed_errors_foreach), (get_detailed_errors),
	(download_failed), (eazel_install_preflight),
	(eazel_install_dep_check), (install_done), (check_if_next_okay),
	(toggle_button_toggled), (eazel_installer_add_category),
	(check_system), (eazel_installer_do_install),
	(eazel_installer_finalize), (eazel_install_get_depends),
	(eazel_installer_initialize):
	* athena-installer/src/installer.h:
	* athena-installer/src/link.sh:
	* athena-installer/src/main.c: (esd_open_sound),
	(esd_sample_getid), (esd_sample_play), (esd_sample_cache),
	(esd_sample_free), (esd_confirm_sample_cache), (esd_close),
	(afOpenFile), (afGetFrameCount), (afGetChannels), (afGetRate),
	(afGetSampleFormat), (afReadFrames), (afCloseFile):

	Remove last bits of unArloified screens in the bootstrap
	installer, including the error page.  Clean up download progress
	bars (and presumably the install ones too, though they haven't
	been tested yet) to follow the screenshots.  Tried to minimize
	flickering in the progress bars though that may be a lost cause.
	Stub out previous esd/esound requirements.
	
2000-10-02  Andy Hertzfeld  <andy@eazel.com>

	implemented sound process management using gconf to store the
	process ID of the currently playing sound, and switched sound
	previewing and part of the music view to use it.  This also fixed a
	process leaking bug, as each time a sound preview terminated, it
	was leaving a zombie process behind.

	* libathena-extensions/Makefile.am:
	added athena-sound to the Makefile
	* libathena-extensions/athena-sound.c,h:
	(kill_sound_if_necessary), (athena_sound_initialize),
	(athena_sound_kill_sound), (athena_sound_register_sound),
	(athena_sound_can_play_sound):
	set of routines to keep track of the current sound process
	* libathena-extensions/athena-global-preferences.h:
	added ATHENA_PREFERENCE_CURRENT_SOUND_STATE
			
	* components/music/athena-music-view.c:
	(athena_music_view_initialize):
	use athena_sound_can_play_sound instead of private routine
	
	* src/file-manager/fm-icon-view.c: (play_file), (preview_sound),
	(icon_container_preview_callback):
	use athena_sound for sound previewing
	
	* src/athena-application.c: (athena_application_startup):
	initialize athena_sound
	
2000-10-02  Darin Adler  <darin@eazel.com>

	Saw the Tinderbox broken, so I just had to fix it. Also, I
	couldn't compile, and check-THANKS.pl failed.

	* libathena-extensions/athena-string.c:
	(athena_istr_compare): Change back athena_istr_compare to its
	old meaning.
	* libathena-extensions/athena-glib-extensions.c:
	(compare_strings_case_breaks_ties),
	(athena_g_str_list_sort_case_insensitive): Make the case
	insensitive sort use athena_strcmp_case_breaks_ties.

	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package_by_id):
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_query):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (eazel_install_prepare_package_system),
	(eazel_install_free_package_system),
	(eazel_install_add_to_rpm_set), (eazel_install_fetch_dependencies):
	* components/services/install/lib/eazel-install-rpm-signature.c:
	(trilobite_check_rpm_signature):
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_status_str_to_enum),
	(packagedata_modstatus_enum_to_str),
	(packagedata_modstatus_str_to_enum):
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(generate_xml_package_list):
	Fixed a bunch of uninitialized variable warnings. At least one was
	probably a real bug, so Eskil needs to review these changes.

	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_update_from_uri): This didn't compile with the
	Red Hat 6.1 version of the rpm library. So I fixed it. I hope I
	did it right. Eskil needs to review this change.
	
	* THANKS: Victor's name needed another space between it and the
	email address.
	* check-THANKS.pl: Missing comma, also the misspelling of Josh's
	email address was not mapped to his new email address.

2000-10-02  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bug 3223.

	* components/adapter/athena-adapter-file-load-strategy.c:
	(athena_adapter_file_load_strategy_new),
	(athena_adapter_file_load_strategy_load_location):
	* components/adapter/athena-adapter-file-load-strategy.h:
	* components/adapter/athena-adapter-load-strategy.c:
	(athena_adapter_load_strategy_initialize_class),
	(athena_adapter_load_strategy_get),
	(athena_adapter_load_strategy_stop_loading),
	(athena_adapter_load_strategy_report_load_underway),
	(athena_adapter_load_strategy_report_load_progress),
	(athena_adapter_load_strategy_report_load_complete),
	(athena_adapter_load_strategy_report_load_failed):
	* components/adapter/athena-adapter-load-strategy.h:
	* components/adapter/athena-adapter-progressive-load-strategy.c:
	(athena_adapter_progressive_load_strategy_destroy),
	(athena_adapter_progressive_load_strategy_new), (stop_loading),
	(athena_adapter_progressive_load_strategy_load_location),
	(athena_adapter_progressive_load_strategy_stop_loading):
	* components/adapter/athena-adapter-progressive-load-strategy.h:
	* components/adapter/athena-adapter-stream-load-strategy.c:
	(athena_adapter_stream_load_strategy_new),
	(athena_adapter_stream_load_strategy_load_location):
	* components/adapter/athena-adapter-stream-load-strategy.h:
	* components/adapter/athena-adapter.c:
	(athena_adapter_destroy), (athena_adapter_new),
	(athena_adapter_load_underway_callback),
	(athena_adapter_load_progress_callback),
	(athena_adapter_load_complete_callback),
	(athena_adapter_load_failed_callback): Changed the load
	strategies to no longer depend on the view; instead, they emit
	appropriate signals at different stages of progress, which the
	AthenaAdapter object hooks into (connecting with
	_connect_object_while_alive). Also, the progressive load strategy
	now checks for cancellation around various CORBA calls, so it
	should actually respect the stop button.
	
	* AUTHORS, THANKS, check-THANKS.pl: Updated Josh Barrow's email
	address.

2000-10-02  Ramiro Estrugo  <ramiro@eazel.com>

	* test/test-athena-label.c: (delete_event), (main):
	Make the test program exit when its window is closed, so it can be
	profiled properly.
	
2000-10-02  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_update_from_uri):

	Fixed the loading of files provided by the rpm.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (tree_helper), (md5_check_failed):
	Clarified the debug output.
	
	* components/services/install/lib/Makefile.am:
	Removed the evil CFLAGS assignment that remove -Werror
	
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_md5_check_failed), (impl_uninstall_failed),
	(eazel_install_callback_unref):
	Fixed some warnings.
	
	* components/services/install/lib/eazel-install-private.h:
	Moved the funky glist_step into -private.h
	Removed some rpm vars.
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize),
	Removed some of the rpm variables in the private part.
	(eazel_install_emit_preflight_check_default),
	(eazel_install_emit_delete_files_default), (string_list_copy):
	Fixing warnings
	
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_fetch_remote_file), (eazel_install_fetch_package),
	(get_url_for_package):
	Fixing warnings. And made fetch_package be more generel, as
	opposed to having three different fetchers. So I've removed
	_which_provides and I need to remove _by_id.
	
	* components/services/install/lib/eazel-install-protocols.h:
	Removed fetch_which_provides.
	
	* components/services/install/lib/eazel-install-public.h:
	Moved the funky glist_step into -private.h
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_pre_install_packages), (install_new_packages),
	(eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_do_install_packages), (hest),
	(eazel_install_add_to_rpm_set),
	(eazel_install_requirement_dep_compare),
	(eazel_install_package_version_compare),
	(eazel_install_check_if_related_package),
	(eazel_install_fetch_rpm_dependencies),
	(eazel_install_fetch_dependencies),
	(eazel_install_do_rpm_dependency_check),
	(eazel_install_do_dependency_check), (eazel_install_ensure_deps),
	(eazel_uninstall_upward_traverse):
	Fixed most of bug 3373, completely revamped the dep checking. Now
	theres a packagesystem dependent depchecker and a seperate filedep
	check afterwards. The packagesystem dependent returns a list of
	package pairs <a,b>, where a requires b. fetch_dependencies then
	traverses that list, downloads and makes the nessecary checks. The
	makes fetch_dependencies package independent, and also fixes bug
	1698.
	Also various debug message fixing etc.
	
	* components/services/install/lib/eazel-install-rpm-signature.c:
	(read_rpm_signature), (trilobite_check_rpm_signature):
	Warning fixing.
	
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new), (packagedata_fill_from_rpm_header),
	(packagedata_fill_from_file), (packagedata_destroy),
	(packagerequirement_new):
	Added three new fields, eazel_id for the SoftCat id (as opposed to
	using the name field, the conflicts_checked boolean to prevent
	doing file conflict checking more then once and a boolean flag for
	tagging a package as being a source package.
	Also fixed 3344, the file list is now read correctly.
 	Created	the PacakgeRequirement structure, used for bug 3373.
	Fixed warnings.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (parse_category), (osd_parse_implementation),
	(osd_parse_softpkg):
	Fixed the uses of xml_get_value since I changed the semantics to
	be a "const char*" function.
	
	* components/services/install/server/main.c: (main):
	Print a string when terminating.
	
	* components/services/summary/lib/eazel-summary-shared.c:
	(parse_a_service), (parse_a_update_news_item):
	Fixed the uses of xml_get_value since I changed the semantics to
	be a "const char*" function.
	
	* components/services/trilobite/libtrilobite/helixcode-utils.h:
	* components/services/trilobite/libtrilobite/helixcode-utils.c:
	Changed xml_get_value to return const char* (bug 2448).
	
2000-10-02  Darin Adler  <darin@eazel.com>

	More work on whittling the state machine down to size.
	
	* README: libunicode, libglade, and eog are no longer required.
	
	* components/history/athena-history-view.c:
	(history_title_changed):
	* libathena/athena-view-component.idl:
	* libathena/athena-view.c: (impl_Athena_View_title_changed),
	(athena_view_initialize_class):
	* libathena/athena-view.h:
	* src/athena-view-frame.c: (athena_view_frame_title_changed):
	* src/athena-view-frame.h:
	Added title parameter for the title_changed function.
	
	* src/athena-view-frame.c:
	(athena_view_frame_report_load_complete): Got rid of extra
	emission of report_load_complete, which is handled by
	view_frame_loaded now.

	* libathena-extensions/athena-background.c:
	(athena_background_initialize_class):
	* libathena-extensions/athena-entry.c:
	(athena_entry_initialize_class):
	* libathena-extensions/athena-icon-text-item.c:
	(iti_class_init):
	* libathena-extensions/athena-list.c:
	(athena_list_initialize_class):
	* src/athena-bookmark-list.c:
	(athena_bookmark_list_initialize_class):
	* src/athena-navigation-bar.c:
	(athena_navigation_bar_initialize_class):
	* src/athena-search-bar-criterion.c:
	(athena_search_bar_criterion_initialize_class):
	* src/athena-sidebar.c: (athena_sidebar_initialize_class):
	* src/athena-switchable-navigation-bar.c:
	(athena_switchable_navigation_bar_initialize_class):
	Use GTK_RUN_LAST instead of GTK_RUN_FIRST.
	
	* libathena-extensions/athena-directory-background.c:
	* libathena-extensions/athena-link-set.c:
	* libathena-extensions/athena-link.c:
	* src/file-manager/fm-icon-text-window.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/athena-complex-search-bar.c:
	* src/athena-link-set-window.c:
	* src/athena-simple-search-bar.c:
	* src/athena-switchable-search-bar.c:
	Add includes needed now that the #include <gnome.h> was removed
	from athena-global-preferences.h.
	
	* libathena-extensions/athena-string.h:
	* libathena-extensions/athena-string.c:
	(athena_strcmp_case_breaks_ties): Added function, like
	g_strcasecmp, but falls back on strcmp for strings that match
	case-insensitive-wise.
	(athena_istr_compare): Use athena_strcmp_case_breaks_ties
	instead of athena_strcasecmp.
	
	* libathena-extensions/athena-file.c:
	(athena_file_compare_by_name): Use
	athena_strcmp_case_breaks_ties instead of g_strcasecmp.
	(athena_file_compare_by_directory_name): Use
	athena_strcmp_case_breaks_ties instead of g_strcasecmp.
	(get_automatic_emblems_as_integer): Convert automatic emblems to
	integer form for simple sorting.
	(prepend_automatic_emblem_names): Separate out the code that puts
	on automatic emblem names, and make it put them first, before any
	keyword-based emblems.
	(athena_file_compare_by_emblems): Compare the automatic emblems
	first, using the integer form.
	(athena_file_compare_by_type): Use
	athena_strcmp_case_breaks_ties instead of athena_strcmp.
	(athena_file_compare_for_sort): Use
	athena_strcmp_case_breaks_ties instead of g_strcasecmp.
	(athena_file_compare_name): Use athena_strcmp_case_breaks_ties
	instead of g_strcasecmp.
	(athena_file_is_mime_type): Use athena_strcasecmp instead of
	athena_strcmp.
	(athena_file_get_emblem_names): Use
	prepend_automatic_emblem_names.
	(sort_keyword_list_and_remove_duplicates): Sort with
	athena_strcmp_case_breaks_ties instead of
	compare_emblem_names. Automatic emblem names are now dealt with
	elsewhere.
	
	* libathena-extensions/athena-icon-container.c:
	(compare_icons_by_name): Use athena_strcmp_case_breaks_ties
	instead of athena_strcasecmp.
	
	* libathena-extensions/athena-glib-extensions.c:
	(athena_g_str_list_sort): Use athena_str_compare.
	(athena_g_str_list_sort_case_insensitive): Use
	athena_istr_compare.
	
	* components/services/vault/command-line/main.c: (main):
	* test/test-athena-mime-actions-set.c: (str_to_action_type):
	Use g_strcasecmp, not strcasecmp, for portability.
	
	* libathena-extensions/athena-global-preferences.h:
	* libathena-extensions/athena-global-preferences.c:
	Removed _get_disabled_sidebar_panel_view_identifiers since the
	logic now removes any not in the enabled list instead.
	
	* libathena-extensions/athena-view-identifier.h:
	* libathena-extensions/athena-view-identifier.c:
	(athena_view_identifier_list_copy): New function.
	(athena_view_identifier_compare): Now sorts properly instead of
	returning 1 for any two identifiers that are !=.
	
	* athena-clean.sh: Removed unadorned gconfd now that it's
	ancient history and because it makes the script seem to fail all
	the time.
	
	* src/athena-window-manage-views.h:
	* src/athena-window-manage-views.c:
	(compute_title): Renamed to a shorter name since it's a local function.
	(update_title): Renamed to a shorter name since it's a local
	function and made it do nothing if the title is already correct.
	(athena_window_update_internals): Simplified code by using the
	new cached title.
	(athena_window_has_really_changed): Removed sidebar panel logic
	that is no longer needed.
	(athena_window_free_load_info): Remove some unused fields.
	(athena_window_open_location): Removed unused parameter.
	(athena_window_open_location_in_new_window): Removed unused
	parameter.
	(load_content_view): Renamed to shorter name since it's a local
	function.
	(handle_view_failure), (cancel_location_change),
	(load_view_for_new_location), (set_view_location_and_selection):
	Broke out big pieces of code used by the state machine. Soon we
	won't have a state machine at all, but we'll still need functions
	like these.
	(athena_window_update_state): Removed a lot of the code and
	broke the remaining bits into the above functions.
	(athena_window_set_state_info): Removed sidebar management code
	and some now-unused state variables.
	(athena_window_stop_loading): Moved this function in here and
	renamed it so the whole state machine is in one place.
	(athena_window_set_content_view): Moved this function in here
	and renamed it so the whole state machine is in one place.
	(compare_view_identifier_with_iid),
	(athena_window_set_sidebar_panels): Wrote new code to set up the
	sidebar panels based on a list of view identifiers, based on the
	code that was used before when preferences change. Moved here so
	the whole state machine is in one place.
	
	* src/athena-window-toolbars.c: (toolbar_stop_callback): Call
	the new function athena_window_stop_loading.
	
	* src/athena-window-private.h:
	* src/athena-window.h:
	* src/athena-window.c: (athena_window_initialize_class):
	Removed the "content_view" argument.
	(athena_window_goto_uri): Removed the view frame parameter from
	the open_location call.
	(athena_window_constructed): Set up sidebars based on
	preferences when the window is created.
	(athena_window_set_arg): Removed the "content_view" argument.
	(athena_window_get_arg): Removed the "content_view" argument.
	(view_menu_switch_views_callback): Call the new function
	athena_window_set_content_view.
	(chose_component_callback), Call the new function
	athena_window_set_content_view.
	(athena_window_open_location_callback): Removed the view frame
	parameter from the open_location call.
	(athena_window_open_location_in_new_window_callback): Removed
	the view frame parameter from the open_location_in_new_window
	call.
	(athena_window_connect_view): Don't connect to
	report_load_progress any more. The view frame now handles this for
	us.
	(athena_window_set_content_view_widget): Renamed this to avoid
	confusion with the new athena_window_set_content_view which is
	used to change content views, given a new view identifier.
	(update_sidebar_panels_from_preferences): Renamed and changed to
	use the new athena_window_set_sidebar_panels call.

2000-10-02  Andy Hertzfeld  <andy@eazel.com>

	made some throbber changes for Arlo
	
	* src/athena-throbber.c: (bump_throbber_frame),
	(athena_throbber_start):
	reset the throbber frame each time it's restarted
	* src/athena-window-toolbars.c: (allocate_throbber):
	put the throbber into a gtk frame
	
2000-10-02  Michael Engber  <engber@eazel.com>

	More background drawing speedups - this time mainly for
	the non-aa case.
	* libathena-extensions/athena-background-canvas-group.c:
	(athena_background_canvas_group_initialize_class),
	(athena_background_canvas_group_update),
	(athena_background_canvas_group_draw),
	(athena_background_canvas_group_render):
	* libathena-extensions/athena-background.c:
	(canvas_gradient_helper_v), (canvas_gradient_helper_h),
	(fill_canvas_from_gradient_buffer), (drawable_gradient_helper_v),
	(drawable_gradient_helper_h), (fill_drawable_from_gradient_buffer),
	(draw_pixbuf_tiled), (canvas_buf_from_pixbuf),
	(ensure_image_scaled), (athena_background_pre_draw),
	(athena_background_draw), (athena_background_draw_to_drawable),
	(draw_pixbuf_tiled_aa), (athena_background_draw_aa),
	(athena_background_draw_to_canvas),
	(athena_background_draw_flat_box):
	* libathena-extensions/athena-background.h:
	* libathena-extensions/athena-buffered-widget.c:
	(create_background_pixbuf_from_ancestor):
	* libathena-extensions/athena-directory-background.c:
	(image_loading_done_callback), (saved_settings_changed_callback):
	* libathena-extensions/athena-gdk-extensions.c:
	(athena_rgb16_to_rgb), (athena_rgb8_to_rgb),
	(athena_gdk_color_to_rgb):
	* libathena-extensions/athena-gdk-extensions.h:
	* libathena-extensions/athena-gdk-pixbuf-extensions.c:
	* libathena-extensions/athena-gdk-pixbuf-extensions.h:
	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_canvas_draw_pixbuf_helper),
	(athena_gnome_canvas_draw_pixbuf_helper_alpha),
	(athena_gnome_canvas_draw_pixbuf):
	* libathena-extensions/athena-gnome-extensions.h:

2000-10-02  Arlo Rose  <arlo@eazel.com>

	* icons/throbber/Makefile.am:
	* src/athena-throbber.c: (athena_throbber_start):
	Doubled the frame rate of the throbber.

	* icons/throbber/rest.png:
	* icons/throbber/001.png:
	* icons/throbber/002.png:
	* icons/throbber/003.png:
	* icons/throbber/004.png:
	* icons/throbber/005.png:
	* icons/throbber/006.png:
	* icons/throbber/007.png:
	* icons/throbber/008.png:
	* icons/throbber/009.png:
	* icons/throbber/010.png:
	* icons/throbber/011.png:
	* icons/throbber/012.png:
	* icons/throbber/013.png:
	* icons/throbber/014.png:
	* icons/throbber/015.png:
	* icons/throbber/016.png:
	* icons/throbber/017.png:
	* icons/throbber/018.png:
	* icons/throbber/019.png:
	* icons/throbber/020.png:
	* icons/throbber/021.png:
	* icons/throbber/022.png:
	* icons/throbber/023.png:
	* icons/throbber/024.png:
	* icons/throbber/025.png:
	* icons/throbber/026.png:
	* icons/throbber/027.png:
	* icons/throbber/028.png:
	Changed "rest", and states 1 - 10 and added states 11 - 28.

2000-10-02  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_stretch_handles), (draw_stretch_handles_aa):
	fixed bug 3283, bits of icons protrude outside the
	stretch box, by making drawing the box at the actual bounds
	instead of insetting three pixels like we were doing.
	
2000-10-02  John Sullivan  <sullivan@eazel.com>

	Fixed the worst part of bug 2068 (dragging icon causes
	immediate update of scroll area). Some related bugs
	remain, which I'll write up separately

	* libathena-extensions/athena-gnome-extensions.h:
	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_canvas_set_scroll_region_include_visible_area):
	New function, sets scroll region to given parameters,
	also forcing visible area to be included.
	
	* libathena-extensions/athena-icon-container.c:
	(update_scroll_region): New function, extracted from
	athena_icon_container_update_scroll_region, now takes
	boolean for whether to include the visible area.
	(athena_icon_container_update_scroll_region): Now calls
	update_scroll_region.
	(athena_icon_container_update_scroll_region_include_visible_area):
	New function, calls update_scroll_region.
	(size_allocate): Do no work if allocation hasn't changed. This
	didn't help with bug 2068 but is a worthwhile optimization.
	
	* libathena-extensions/athena-icon-private.h:
	Prototype for athena_icon_container_update_scroll_region_
	include_visible_area

	* libathena-extensions/athena-icon-dnd.c: (handle_local_move):
	call ..._include_visible_area when updating scroll region after
	drag & drop, instead of just ..._update_scroll_region, so no
	origin-shifting occurs.

2000-10-02  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (ftp_fetch_remote_file),
	(gnome_vfs_fetch_remote_file), (local_fetch_remote_file),
	(eazel_install_fetch_file):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (eazel_install_download_packages),
	(eazel_install_pre_install_packages), (uninstall_all_packages),
	(uninstall_packages), (eazel_install_do_transaction_save_report),
	(eazel_install_start_transaction),
	(eazel_install_prune_packages_helper),
	(eazel_install_free_rpm_system_close_db_foreach),
	(eazel_install_prepare_rpm_system),
	(eazel_install_prepare_package_system),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_rpm_dependencies),
	(eazel_install_ensure_deps):

	Convert a bunch of g_message calls to trilobite_debug.
	
2000-10-02  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri):
	fixed bug 1280, music view needs alert when it can't iterate
	directory
	
	* src/athena-property-browser.c:
	(athena_property_browser_initialize),
	(athena_property_browser_remove_element), (add_new_color),
	(add_new_button_callback),
	(athena_property_browser_update_contents),
	(athena_property_browser_set_category):
	fixed bug 3217, better separation of text in property browser so
	it can be translated (ie, "remove a emblem" isn't good); fixed by
	making an enum for the current category and using it to case out
	for separate messages where appropriate.
	
2000-10-02  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-directory-view.c: (activate_callback):
	fixed the PR2 part of bug 2390, "command:" URI-activating security
	hole, by disallowing commands from remote locations. Downgrading
	the rest of the bug to usable, when we will implement Frank's other
	recommendations.
		
	* components/music/athena-music-view.c: (add_play_controls):
	tweaked the error message when we can't open the sound driver to
	better reflect reality.
	
2000-10-02  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-icon-dnd.c:
	(confirm_switch_to_manual_layout): Made the
	"switch to manual layout" dialog be a
	athena_yes_no_dialog instead of the uglier
	athena_simple_dialog.

2000-10-02  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(keyboard_icon_reveal_timeout_callback):
	* libathena-extensions/athena-list.c:
	(keyboard_row_reveal_timeout_callback): Turned a
	pair of FIXMEs into comments explaining why there's
	no need to fix.

2000-10-02  John Sullivan  <sullivan@eazel.com>

	* src/athena-applicable-views.c:
	(get_athena_navigation_result_from_gnome_vfs_result):
	* src/athena-applicable-views.h:
	* src/athena-window-manage-views.c:
	(athena_window_end_location_change_callback):
	Added ATHENA_NAVIGATION_RESULT_ACCESS_DENIED and gave it
	a unique error message.

2000-10-01  Andy Hertzfeld  <andy@eazel.com>

	changed the sound ability test to use esd_audio_open instead of
	opening the sound driver directly. We still need to test this
	on systems with no sound hardware.
	
	* components/music/athena-music-view.c: (can_play_sounds):
	* src/file-manager/fm-icon-view.c:
	(icon_container_preview_callback):

2000-10-01  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_stretch_handles_aa), (draw_dashed_rectangle_aa),
	(draw_focus_rect), (draw_or_measure_label_text_aa):
	fishished bug 3239, stretchable icon needs bounding box
	in aa-mode, by adapting the routine that was used to draw
	the focus rectangle.
	
2000-09-30  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-file-operations.c:
	(handle_xfer_vfs_error):
	Fix a case where "NULL" would be displayed for a file name in file
	copy error alert.

	* libathena-extensions/athena-file-operations.c:
	(handle_xfer_vfs_error):
	Rework the "destination not writable" alert to not offer 
	to try to continue. Add special alert for out of space on destination.
	Clean up some.
	
	* libathena-extensions/athena-file-operations.c: (handle_xfer_duplicate):
	Part 2 of fix to 1314 - Move to Trash faild if name conflict in trash.
	Handle move to Trash duplicates the same way as copy duplicates.
	
	* libathena-extensions/athena-file-operations.c: 
	(athena_file_operations_copy_move):
	Make in-place copy properly create a duplicate.
	Clean up.
	
	* src/athena-theme-selector.c: (theme_select_row_callback):
	Replace a gnome_vfs_xfer call with a gnome_vfs_xfer_delete_list. The
	sync version of gnome_vfs_xfer does not support deleting like the async
	one does.

2000-09-29  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-regular.xml:
	* icons/arlo/i-regular.png:
	* icons/arlo/i-regular-aa.png:
	* icons/arlo/i-regular-72-aa.png:
	Added some more of the document icons, and deleted an old
	one that was named wrong.

2000-09-29  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_stretch_handles), (draw_stretch_handles_aa),
	(draw_dashed_rectangle_aa), (draw_focus_rect),
	(hit_test_stretch_handle):
	fixed a series of bugs involving the stretch handles (3084, 3281,
	others); I'm not quite finished yet with 3239
	
	* src/athena-property-browser.c:
	(athena_property_browser_initialize):
	changed the name of the window for Arlo
	
	* src/athena-window-menus.c: (athena_window_initialize_menus):
	changed the "customize" command to "customization" for Arlo.
	
2000-09-29  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(cache_icon_unref): Fix case where the fallback icon is getting
	unref'd so that it properly removes the icon (need to NULL the
	prev and next for later reinsertion).

2000-09-29  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3352 (New Folder is not selected for renaming)
	Fixed bug 913 (Any changes to a file while renaming results
	in ending the name edit)

	* libathena-extensions/athena-icon-container.c:
	(get_icon_being_renamed): New convenience function; gets the
	icon being renamed (or NULL) and does some sanity checking.
	(key_press_event): Added a FIXME about direct use of athena_file.
	(athena_icon_container_update_icon): Don't end renaming mode
	on every update; end renaming mode only if the editable text
	of the icon being renamed changed.
	(end_renaming_mode): Use get_icon_being_renamed.

2000-09-29  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-factory.c: (cache_icon_ref),
	(cache_icon_unref): Add special cases to handle fallback icon.
	(destroy_fallback_icon): Use unref to free the fallback icon.
	(load_icon_for_scaling): Handle the fallback icon more like other
	icons.
	* libathena-extensions/athena-scalable-font.c:
	(athena_text_layout_new): Simplify the logic a bit by using
	g_strndup.

2000-09-29  Mathieu Lacage  <mathieu@eazel.com>

	Fix bug 3074: local html files not displayed by mozilla.
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_vfs_read_callback), (mozilla_vfs_callback),
	(athena_mozilla_content_view_load_uri): add a 
	report_load_underway call where necessary.

2000-09-29  J Shane Culpepper  <pepper@eazel.com>

	* components/help/converters/gnome-info2html2/html.c:
	* components/music/mpg123_handler.h:
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_open_uri), (trilobite_debug):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	:
	* components/tree/athena-tree-model.c:
	* libathena-extensions/athena-ctree.c:
	* libathena-extensions/athena-debug.c:
	* libathena-extensions/athena-directory-background.h:
	* libathena-extensions/athena-horizontal-splitter.c:
	* libathena-extensions/athena-self-checks.c:
	* libathena-extensions/athena-user-level-manager.c:
	* src/athena-main.h:

	Checking lots of little fixes to make the new RedHat 7.0 compiler
	work.  Mostly newlines and including string.h and/or stdlib.h.
	Serveral functions like strcmp are not inlined anymore.
	the mozilla component and rpm related code still doesn't build but
	all dependencies work now too.

2000-09-29  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-global-preferences.c:
	(proxy_changed), (register_proxy_preferences),
	(global_preferences_register): Fix the NULL-passing problem that
	was killing the Tinderbox.

2000-09-29  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3322 (context menus don't work in FTP site
	whose address wasn't typed with a trailing slash)

	* libathena-extensions/athena-directory.c:
	(athena_directory_make_uri_canonical): New function, calls
	athena_make_uri_canonical and then strips off the trailing
	slash if any.
	(athena_directory_get_internal): Call this new slightly
	stricter function instead of athena_make_uri_canonical, to
	guarantee that we'll never get two AthenaDirectory objects
	for uris that match other than the trailing slash.
	(athena_self_check_directory): Add test cases for new function.
	
	* libathena-extensions/athena-file-utilities.c:
	(athena_make_uri_canonical): Removed #if 0 code whose
	equivalent is now in the AthenaDirectory version,
	replaced with comment.

2000-09-29  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c:
	(athena_music_view_update_from_uri):
	fixed bug 2107, music view fails when encountering a broken image file,
	by testing for a NULL result from gdk_pixbuf_new_from_file and
	handling it accordingly.
	
2000-09-29  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file-private.h:
	Removed unused "self_owned" field.
	
	* libathena/athena-view-component.idl:
	* libathena/athena-view.h:
	* libathena/athena-view.c:
	(athena_view_open_location_in_new_window):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_switch_location):
	* src/file-manager/fm-search-list-view.c:
	(reveal_selected_items_callback):
	* src/athena-view-frame-corba.c:
	(impl_Athena_ViewFrame_open_location),
	(impl_Athena_ViewFrame_open_location_in_new_window),
	(impl_Athena_ViewFrame_report_selection_change):
	* src/athena-view-frame-private.h:
	* src/athena-view-frame.h:
	* src/athena-view-frame.c:
	(athena_view_frame_initialize_class),
	(athena_view_frame_open_location_in_new_window):
	Removed report_location_change and
	open_in_new_window_and_select. The open_location_in_new_window
	call now always does a selection operation.
	
	* src/athena-window-manage-views.h:
	* src/athena-window-manage-views.c: (update_view),
	(athena_window_load_sidebar_panel), (open_location),
	(athena_window_open_location),
	(athena_window_open_location_in_new_window),
	(athena_window_load_content_view),
	(athena_window_update_state),
	(athena_window_begin_location_change):
	* src/athena-window-private.h:
	* src/athena-window.h:
	* src/athena-window.c: (athena_window_switch_views),
	(athena_window_back_or_forward),
	(athena_window_open_location_in_new_window_callback),
	(athena_window_connect_view), (athena_window_reload):
	Made some simplifications that are possible because we don't
	have the old report_location_change to support.

2000-09-29  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-thumbnails.c:
	(check_for_thumbnails):
	finished fixing bug 3342, thumbnailing never gives up on bad images,
	by generating a unique "cant thumbnail" icon when thumbnailing fails.
	Right now it's using the generic image icon; I still need a better
	one from Susan.
	
2000-09-29  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2602, Integrate gnome-vfs http proxy setting into Mozilla
	component.
	
	* components/mozilla/Makefile.am:
	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize):
	Check for proxy settings and init mozilla to use them.
	
	Fixed bug 2692, Need to let user specify a proxy for Mozilla
	component.
	
	* libathena-extensions/athena-global-preferences.c:
	(use_proxy_changed), (proxy_changed),
	(global_preferences_register):

	When the Athena preferences mechanism supports system wide settings,
	we should revisit this code and remove the gconf system prefs retrieval
	code.

2000-09-29  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-thumbnails.c:
	(check_for_thumbnails):
	partially fixed bug 3342, thumbnailing never gives up on bad images.
	If thumbnailing failed, it would obsessively try over and over since
	it was calling athena_file_changed even if it failed.  Fixed by
	calling athena_file_changed only when it succeeds. It still will
	try once each time you enter the containing directory, and it has
	the wrong icon, both of which I'll fix soon.
	
2000-09-29  Rebecca Schulman  <rebecka@eazel.com>

	* libathena/athena-clipboard.c: (add_menu_items_callback),
	(athena_clipboard_set_up_editable_from_bonobo_control):
	* src/athena-window.c: (athena_window_constructed):
	Removed non-working clipboard code

2000-09-29  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3327 (intermittent tree view crash)

	* libathena-extensions/athena-file.c:
	(athena_file_get_internal): Changed file_name_escaped
	to file_name in athena_str_is_empty call. 
	file_name_escaped had already been freed at this point
	(Doh!). Darin and I believe this to be the cause of
	3327 (and testers agree). Also freed file_name later, 
	which had been leaking.

	* components/tree/athena-tree-model.c:
	(athena_tree_model_get_node): Removed extra debugging
	spam from here now that bug is fixed. We can bring it
	back later if necessary.
	

2000-09-29  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Add a --disable-mozilla-component autoconf flag so the component
	can be forced disabled even if mozilla development libraries are
	detected.
	
2000-09-29  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	* configure.in:
	* HACKING:
	* tools/.cvsignore:
	* tools/Makefile.am:
	* tools/README:
	* tools/leak-checker/.cvsignore:
	* tools/leak-checker/Makefile.am:
	* tools/leak-checker/athena-leak-checker-stubs.h:
	* tools/leak-checker/athena-leak-checker.c:
	* tools/leak-checker/athena-leak-checker.h:
	* tools/leak-checker/athena-leak-hash-table.c:
	* tools/leak-checker/athena-leak-hash-table.h:
	* tools/leak-checker/athena-leak-symbol-lookup.c:
	* tools/leak-checker/athena-leak-symbol-lookup.h:
	* tools/profiler/Makefile:
	* tools/profiler/funcsummary.C:
	* tools/profiler/funcsummary.h:
	* tools/profiler/machine-profile.S:
	* tools/profiler/machine-profile.h:
	* tools/profiler/machine-profileP.h:
	* tools/profiler/athena-leak-symbol-lookup.C:
	* tools/profiler/athena-leak-symbol-lookup.h:
	* tools/profiler/profile.C:
	* tools/profiler/profile.h:
	* tools/profiler/profileP.h:
	* tools/profiler/profiledata.C:
	* tools/profiler/profiledata.h:
	* tools/profiler/symbol-table.h:
	* tools/profiler/test.cpp:
	* tools/profiler/totaltime.C:
	* tools/profiler/totaltime.h:
	Moved the leak-checker and profiler tools to their own gnome cvs
	module.
	
2000-09-29  Robey Pointer  <robey@eazel.com>

	* athena-installer/src/bootstrap-background.xpm:

	Add nice new Arlo background to the bootstrap installer.

2000-09-29  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Switch the order of assignment of warnings to CFLAGS so that they
	can be overridden by the user at configure time.
	
2000-09-29  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c:
	(icon_container_preview_callback):
	finished off bug 3271, by disabling sound previewing if we can't
	open the sound device.
	
2000-09-29  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c: (play_current_file),
	(add_play_controls):
	fixed bug 3271, music view doesn't check if sound hardware is
	present, by seeing if we can successfully open the sound device.
	Still need to fix sound previewing similarily
	
2000-09-28  Andy Hertzfeld  <andy@eazel.com>

	* icons/chit_frame.png:
	I accidentally checked in a flawed property frame earlier; this
	is the right one.
	
	* components/music/athena-music-view.c: (can_play_sounds),
	(athena_music_view_initialize), (athena_music_view_destroy),
	(music_view_set_selected_song_title):
	added test for whether sound output is present, plus other clean-ups

2000-09-28  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/athena-tree-model.c:
	(athena_tree_model_get_node, dump_one_file_node): Further
	increased the debugging output.

2000-09-28  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-regular.xml:
        * icons/arlo/i-regular-96-aa.png:
        * icons/arlo/i-regular-192-aa.png:
	Added a few regular file icons in the uber-large sizes.
	Not sure if these are final yet.

2000-09-28  Josh Barrow  <josh@eazel.com>

	* docs/smoketests.html:
	Changed my e-mail address

2000-09-28  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/athena-tree-model.c
	(athena_tree_model_get_node, dump_one_file_node): Enhance
	debugging output to include hex addresses of files when we hit the
	mysterious intermittent failure.

2000-09-28  John Sullivan  <sullivan@eazel.com>

	Fixed part of bug 3322 (context menus don't work correctly
	in icon view when using FTP). Now there is no degenerate menu
	displayed, but the real menu still doesn't appear due to the
	remaining selection bug.

	Also did some more work to make some sidebar view failures 
	less deadly to Athena.

	* src/file-manager/fm-directory-view.c:
	(create_selection_context_menu): Complain and return NULL if
	no files are selected.
	(fm_directory_view_pop_up_selection_context_menu):
	Don't put up a menu at all if create_selection_context_menu
	returned NULL.

	* src/athena-window-private.h: 
	Added field details->dead_view_name.
	* src/athena-view-frame.c: (athena_view_frame_get_label):
	return-if-fail if view frame has already been destroyed but
	not finalized (so details is NULL). It used to segfault. I
	also changed the one caller I knew about that sometimes called
	this function in this situation.
	
	* src/athena-window-manage-views.c:
	(athena_window_set_state_info): in VIEW_ERROR case, store the
	name of the (first) failing view frame here, where it can still
	be reliably read.
	(athena_window_update_state): Removed redundant and misleading
	window->error_views != NULL check; changed if/else logic to
	not check whether new_content_view is also content_view, since 
	when this check failed the code would assume that new_content_view
	was a sidebar panel (I don't know of anyone ever running into
	this case though); free and NULL out dead_view_name after
	processing first error_view.
	(report_sidebar_panel_failure_to_user): Use previously-stored
	dead_view_name rather than trusting the view frame to still
	have useful information in this case, since it doesn't in
	the many cases where it self-destructed when running into
	a problem.
	(athena_window_end_location_change_callback): Tweaked an
	error message.
	
	* src/athena-window.c: (athena_window_destroy):
	free details->dead_view_name.

2000-09-28  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-properties-window.c:
	(get_property_names_from_uri):
	fixed bug 3332, erase emblem was mistakenly included in
	properties window.
	
	* src/athena-property-browser.c: (make_color_drag_image),
	(element_clicked_callback), (make_properties_from_xml_node):
	made the colors in the property browser consistent with the
	image backgrounds
	
	* icons/backgrounds.png:
	* icons/colors.png:
	* icons/emblems.png:
	* icons/chit_frame.png:
	tweaked images from Susan for the property browser
	
	* icons/i-music-aa.png:
	Susan fixed Eli's time signature bug in the music icon
	
2000-09-28  Mathieu Lacage  <mathieu@eazel.com>

	Fix bug 2688. back and forward buttons do not work 
	with mozilla.
	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_load_uri),
	(mozilla_location_changed_callback), 
	(mozilla_open_uri_callback): add a flag to remember
	when athena calls the component and another to remember 
	when the user clicks on a button.

2000-09-28  Darin Adler  <darin@eazel.com>

	Fixed renaming bug with names with unusual characters and problems
	caused by the clipboard code, and started work on metadata copying
	and removing implementation and cleanup.

	* libathena-extensions/athena-file-operations.c:
	(athena_file_operations_new_folder): Use
	gnome_vfs_uri_append_file_name instead of
	gnome_vfs_uri_append_path, since we are appending a file name, not
	a path in URI format.
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_main_directory): Use
	gnome_vfs_uri_append_file_name instead of
	gnome_vfs_uri_append_path, since we are appending a file name, not
	a path in URI format.
	* libathena-extensions/athena-file.c:
	(rename_update_info_and_metafile): Use metadata call by new name.
	(athena_file_rename): Use gnome_vfs_uri_append_file_name instead
	of gnome_vfs_uri_append_path, since we are appending a file name,
	not a path in URI format. This should fix the renaming problems we
	were seeing.
	
	* libathena/athena-clipboard.h:
	* libathena/athena-clipboard.c:
	(set_paste_sensitive_if_clipboard_contains_data),
	(set_clipboard_menu_items_sensitive),
	(set_clipboard_menu_items_insensitive): Removed unused window
	parameter.
	(menu_activated_callback): Changed this function to find the
	window using gtk_widget_toplevel instead of from a global. This
	works in all the cases where the old code would have worked, and
	doesn't have the problem with multiple windows.
	(menu_deactivated_callback): Removed unused window parameter.
	(athena_clipboard_set_up_editable_from_bonobo_control): Added
	check for NULL menubar. This shows a design problem too, but at
	least it 
	(athena_clipboard_set_up_host_ui_handler): Got rid of global.
	* src/athena-window.c: (athena_window_constructed): Use
	clipboard call by new name.
	
	* libathena-extensions/athena-directory.c:
	(athena_directory_schedule_metadata_copy),
	(athena_directory_schedule_metadata_move),
	(athena_directory_schedule_metadata_remove),
	(athena_directory_schedule_position_setting): Tighten up these
	routines a bit and have them do as much work as possible through
	functions in athena-directory-metafile.[ch]. This is preparation
	for doing full implementation of the actual metadata copying.
	
	* libathena-extensions/athena-directory-metafile.h:
	* libathena-extensions/athena-directory-metafile.c:
	(athena_directory_rename_file_metadata),
	(copy_file_metadata_for_key),
	(athena_directory_copy_file_metadata),
	(athena_directory_remove_file_metadata): New functions to doteh
	metadata copying, and a new name for an old function.  Now I have
	to actually make them work better.
	
	* athena.spec.in: Do a "make check" instead of a "make" when
	building RPMs.

2000-09-28  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-md5.c:
	* components/services/install/lib/eazel-install-metadata.c:
	(done_with_gconf):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_delete_downloads), (eazel_install_install_packages),
	(eazel_install_emit_preflight_check),
	(eazel_install_emit_delete_files), (string_list_copy):
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package), (get_url_for_package),
	(get_search_url_for_package), (flatten_tree_func),
	(eazel_install_fetch_definitive_package_info),
	(eazel_install_fetch_definitive_category_info):
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_flatten_categories), (install_new_packages),
	(eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_pre_install_packages),
	(eazel_install_do_install_packages), (revert_transaction),
	(eazel_install_do_transaction_save_report_helper),
	(eazel_install_do_transaction_save_report),
	(eazel_install_monitor_subcommand_pipe),
	(eazel_install_start_transaction), (eazel_install_free_rpm_system),
	(eazel_install_add_to_rpm_set), (dump_one_package),
	(dump_packages), (print_package_list), (eazel_install_ensure_deps),
	(eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse):
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_destroy_foreach), (packagedata_new),
	(packagedata_fill_from_rpm_header), (packagedata_destroy),
	(packagedata_modstatus_enum_to_str):
	* components/services/install/lib/eazel-install-types.h:

	Make libeazelinstall compile with -Wall -Werror.  Separate the
	concept of a package's remote url from its local filename (was
	causing bugs).  Some initial attempts to do a one-pass
	download/install phase (not finished, put off till post-PR2).  Add
	dependencies to category lists.

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_package), (parse_category), (parse_shared),
	(parse_memory_xml_package_list), (parse_memory_transaction_file),
	(parse_local_xml_package_list), (osd_parse_dependency),
	(osd_parse_implementation), (osd_parse_shared),
	(parse_osd_xml_from_memory):
	* components/services/install/lib/eazel-install-xml-package-list.h:

	Wrap package-list.xml and package-list-depends.xml into a single
	file and add support for dependency lists and splash text for the
	bootstrap installer.
	
	* athena-installer/src/callbacks.c: (begin_install),
	(prep_finish):
	* athena-installer/src/installer.c: (create_pixmap),
	(gtk_label_new_with_font), (add_padding_to_box), (set_white_stuff),
	(create_what_to_do_page), (create_install_page),
	(create_finish_page_good), (create_finish_page_evil),
	(create_window), (eazel_install_progress),
	(eazel_download_progress), (get_detailed_errors), (install_failed),
	(download_failed), (eazel_install_preflight),
	(eazel_install_dep_check), (check_if_next_okay),
	(toggle_button_toggled), (eazel_installer_add_category),
	(create_info_druid_page), (check_system),
	(eazel_install_get_depends), (eazel_installer_initialize):
	* athena-installer/src/link.sh:
	* athena-installer/src/main.c: (main), (oaf_init), (bonobo_init):
	* athena-installer/src/proxy.c:
	* athena-installer/src/support.c:

	Remove warnings from the bootstrap installer.  Arlo-ify the
	bootstrap installer (over 50% done).
	
2000-09-28  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-icon-container.c:
	(match_best_name), (compare_icons_by_name),
	(athena_icon_container_start_renaming_selected_item):
	Fixed a segfault I ran into by accidentally typing
	into a Athena window before it was fully displayed.
	Some icon-container code was assuming that 
	athena_icon_canvas_item_get_editable_text never
	returned NULL, but right after the directory is loaded
	this assumption is valid. Fixed all similar offenders.

2000-09-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_update_news_entry_row):

	Setup all buttons on the page to be one size.  Current max size per
	button is about a 22 character label.

2000-09-28  Rebecca Schulman  <rebecka@eazel.com>
        Fixed bug 3231, which crashed athena when file dialogs
	were closed without choosing an option.  Added a parameter
	to athena_simple_dialog to allow the close button to be ignored
	
	* libathena-extensions/athena-file-operations.c:
	(handle_xfer_vfs_error), (handle_xfer_overwrite),
	(athena_file_operations_copy_move),
	(athena_file_operations_move_to_trash):
	* libathena-extensions/athena-icon-dnd.c:
	(confirm_switch_to_manual_layout):
	* src/athena-location-bar.c: (drag_data_received_callback):
	Switched dialogs which really should receive a response from
	the user to use dialog boxes which ignore the close box

	* libathena-extensions/athena-stock-dialogs.c:
	* libathena-extensions/athena-stock-dialogs.h:
	(delete_event_callback), (athena_simple_dialog):
	Made the dialog ignore delete events.

2000-09-28  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: Fixing url locations

2000-09-28  Pablo Saratxaga <pablo@mandrakesoft.com>

	* configure.in,po/ca.po: Added Catalan language file

2000-09-28  John Sullivan  <sullivan@eazel.com>

	* src/athena-view-frame.c: (check_if_view_is_gone):
	Removed an unnecessary line that was setting a field
	of a struct that was just set to NULL. This crashed for
	terral (IRC name).

2000-09-28  Josh Barrow  <linuxfan@ionet.net>

	* docs/smoketests.html:
	A few minor changes to reflect the current behavior of Athena.

2000-09-28  Darin Adler  <darin@eazel.com>

	* src/athena-theme-selector.c: (populate_list_with_themes):
	Fix uninitialized variable.

2000-09-28  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-undo-context.c:
	(athena_undo_context_new): Bonobo objects own themselves, so we
	should not do a ref/sink on them.
	* libathena-extensions/athena-undo-manager.c:
	(athena_undo_manager_new): Bonobo objects own themselves, so we
	should not do a ref/sink on them.
	* src/athena-application.c: (athena_application_initialize):
	Move global preferences initialization to main with other
	initialize calls.
	(athena_application_new): Bonobo objects own themselves, so we
	should not do a ref/sink on them.
	(athena_application_destroy): Unref the undo manager to fix a
	leak.
	* src/athena-main.c: (main): Move global preferences
	initialization to main with other initialize calls.
	
	* athena.spec.in: Added "-k" to build commands so we get more
	information about what failed when failing to build via
	RPM. Failures are still failures, we just see more of what's
	failing.
	
	* components/help/converters/gnome-db2html2/sect-elements.c:
	(sect_entry_end_element):
	* components/help/converters/gnome-db2html2/toc-elements.c:
	(toc_title_start_element):
	* components/image-viewer/athena-image-view.c:
	(init_server_factory):
	* components/rpmview/athena-rpm-view-install.c:
	(athena_rpm_view_install_package_callback),
	(athena_rpm_view_uninstall_package_callback):
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (main):
	* components/services/install/command-line/eazel-alt-install.c:
	(main):
	* components/services/install/command-line/eazel-install.c:
	(generate_new_package_list), (fetch_remote_package_list), (main):
	* components/services/install/command-line/eazel-package-query.c:
	(main):
	* components/services/install/command-line/eazel-revert.c: (main):
	* components/services/install/command-line/eazel-uninstall.c:
	(main):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_fetch_remote_package_list):
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_file), (eazel_install_fetch_package):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(install_new_packages), (eazel_install_download_packages),
	(uninstall_packages), (eazel_install_start_transaction),
	(eazel_install_add_to_rpm_set),
	(eazel_install_check_if_related_package):
	* components/services/install/athena-view/athena-service-instal
	l-view.c: (athena_service_install_preflight_check):
	* components/services/install/athena-view/athena-service-instal
	l.c: (athena_service_install_view_install_package_callback),
	(athena_service_install_view_uninstall_package_callback):
	* components/services/install/server/main.c: (main):
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_startup_form), (generate_summary_form),
	(generate_service_entry_row):
	* components/services/time/command-line/main.c: (main):
	* components/services/time/service/main.c: (main):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_init):
	* components/services/trilobite/libtrilobite/trilobite-root-client.
	c: (trilobite_root_client_initialize):
	* components/services/trilobite/libtrilobite/trilobite-service-pass
	wordquery.c: (trilobite_passwordquery_initialize):
	* components/services/trilobite/libtrilobite/trilobite-service.c:
	(trilobite_service_initialize):
	* components/services/trilobite/sample/command-line/main.c: (main):
	* components/services/trilobite/sample/service/main.c: (main):
	* components/shell/shell.c:
	* components/tree/athena-tree-model.c:
	(athena_tree_model_monitor_add),
	(athena_tree_model_root_node_file_monitor):
	* components/tree/athena-tree-view.c:
	* libathena-extensions/athena-directory-async.c:
	(get_filter_options_for_directory_count):
	* libathena-extensions/athena-file-utilities.c:
	(athena_uri_is_local_scheme), (athena_handle_trailing_slashes):
	* libathena-extensions/athena-icon-dnd.c:
	(drag_data_received_callback):
	* libathena-extensions/athena-icon-text-item.c: (iti_event):
	* libathena-extensions/athena-list.c:
	(athena_list_ensure_drag_data), (athena_list_get_drop_action),
	(athena_list_drag_data_received):
	* libathena-extensions/athena-scalable-font.c:
	(initialize_global_stuff_if_needed):
	* libathena-extensions/athena-undo-signal-handlers.c:
	(editable_register_edit_undo):
	* src/file-manager/fm-icon-view.c:
	(context_menu_layout_radio_item_callback):
	* src/file-manager/athena-indexing-info.c:
	(update_progress_display):
	* src/athena-switchable-search-bar.c:
	(athena_switchable_search_bar_set_mode):
	Got rid of all uses of == TRUE and != TRUE, since they are dangerous.
	Got rid of all uses of == FALSE and != FALSE, since they lead to use
	of == TRUE and != TRUE.

2000-09-28  John Sullivan  <sullivan@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (who_is_logged_in): Fixed (valid) unininitialized variable
	warning that Pretender ran into.

2000-09-27  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/athena-tree-view.c
	(athena_tree_view_initialize): Set the tree widget to
	GTK_SELECTION_SINGLE instead of GTK_SELECTION_BROWSE, fixing bug
	3235.

2000-09-28  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file):
	mostly fixed bug 3158, unacceptable memory usage when thumbnailing,
	by implementing an upper bound on the file size, above which it
	won't try to thumbnail - it's currently set to 1 megabyte, but it
	needs to be tweaked. We still need to give the "too big to thumbnail"
	files a distinctive icon.

2000-09-27  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-theme-selector.c: (add_theme_to_icons),
	(exit_remove_mode), (theme_select_row_callback),
	(populate_list_with_themes):
	finished bug 3303, can't remove user-added themes, by finishing the
	theme removal implementation.
	
2000-09-27  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (am_i_logged_in), (who_is_logged_in):
	fixed who_is_logged_in to return correct username.

2000-09-27  Ramiro Estrugo  <ramiro@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (am_i_logged_in):
	Fixed uninitialized variable.
	
2000-09-27  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(who_is_logged_in):

	Fixing the button enabled / disabled problem in services table.
	Fixing the trashed username when login succeeds.

2000-09-27  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/Makefile.am:
	* icons/arlo/i-directory-192-aa.png:
	* icons/arlo/i-directory-96-aa.png:
	* icons/arlo/i-directory-72-aa.png:
	Added a few more sizes to my folder icons.
	Document icons coming soon!

2000-09-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1010 (delay between when an item gets selected
	and revealed).

	The delay was there for two reasons, one of which was a mistaken
	accident of history. Reduced the delay from 300ms to 10ms in icon
	view, and to 0ms in list view. Couldn't reduce the icon view delay
	to 0ms due to problems with the scroll/redraw being unable to keep
	up with holding the arrow key down. The current settings seem to
	work well in both views, though it would be worthwhile to verify
	this on a maximally-slow target machine.

	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-list.c:

2000-09-27  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-theme-selector.c:
	(athena_theme_selector_initialize), (add_theme_to_icons),
	(add_new_theme_button_callback), (remove_button_callback),
	(set_help_label), (exit_remove_mode), (theme_select_row_callback),
	(populate_list_with_themes):
	
	implemented removing user-installed themes, plus some other clean-ups.
	This isn't quite finished yet.
	
2000-09-27  Ramiro Estrugo  <ramiro@eazel.com>

	* athena.spec.in:
	Remove extraneous space after the \ continuation character
	because the rpm demons barf otherwise.
	
2000-09-27  Rebecca Schulman  <rebecka@eazel.com>
	Fixed bug 2522, to display an index progress dialog,
	corresponding to Arlo's screenshots.

	* src/file-manager/athena-indexing-info.c:
	(get_text_for_progress_label), (update_progress_display),
	(update_file_index_callback), (get_file_index_time),
	(show_index_progress_bar), (athena_indexing_info_show_dialog):

2000-09-27  J Shane Culpepper  <pepper@eazel.com>

	* components/mozilla/athena-mozilla-content-view.c:

	Adding custom uris to be parsed by mozilla.

2000-09-27  John Sullivan  <sullivan@eazel.com>

	Debugging code to try to catch the evil 
	athena_tree_view_find_parent_node bug.

	* components/tree/athena-tree-model.h:
	* components/tree/athena-tree-model.c: 
	(dump_one_file_node),
	(athena_tree_model_dump_files): New debugging functions
	that display what files are known to the tree view.
	* components/tree/athena-tree-view.c:
	(athena_tree_view_find_parent_node): Added a bunch of
	debugging output in the intermittent case where this
	function can't find a node.

2000-09-27  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-file-attributes.h: Rename
	ATHENA_FILE_ATTRIBUTE_FAST_MIME_TYPE to
	ATHENA_FILE_ATTRIBUTE_MIME_TYPE; add
	ATHENA_FILE_ATTRIBUTE_SLOW_MIME_TYPE, for now just a synonym for
	ATHENA_FILE_ATTRIBUTE_MIME_TYPE.
	* libathena-extensions/athena-directory-async.c:
	(set_up_request_by_file_attributes): Handle the new file
	attributes.
	* libathena-extensions/athena-directory.h: move
	athena_directory_wait_until_ready call to
	athena-wait-until-ready.h

	* libathena-extensions/athena-directory.c:
	(athena_self_check_directory): Include
	athena-wait-until-ready.h, use new attributes.

	* libathena-extensions/athena-wait-until-ready.h: New header
	for the deprecated wait_until_ready calls.

	* libathena-extensions/athena-file.c:
	(athena_file_wait_until_ready): file equivalent of
	athena_directory_wait_until_ready; temporary to help me
	refactor.
	(file_wait_until_ready_callback): helper function.

	* libathena-extensions/Makefile.am: Add
	athena-wait-until-ready.h

	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_required_file_attributes): Use new
	attribute for mime type.

	* libathena-extensions/athena-mime-actions.h,
	libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_default_action_type_for_uri),
	(athena_mime_get_default_action_for_uri),
	(athena_mime_get_default_application_for_uri_internal),
	(athena_mime_get_default_application_for_uri),
	(athena_mime_is_default_application_for_uri_user_chosen),
	(athena_mime_get_default_component_for_uri_internal),
	(athena_mime_get_default_component_for_uri),
	(athena_mime_is_default_component_for_uri_user_chosen),
	(athena_mime_get_short_list_applications_for_uri),
	(athena_mime_get_short_list_components_for_uri),
	(athena_mime_get_short_list_methods_for_uri),
	(athena_mime_get_all_applications_for_uri),
	(athena_mime_has_any_applications_for_uri),
	(athena_mime_get_all_components_for_uri),
	(athena_mime_has_any_components_for_uri),
	(athena_mime_set_default_action_type_for_uri),
	(athena_mime_set_default_application_for_uri),
	(athena_mime_set_default_component_for_uri),
	(athena_mime_set_short_list_applications_for_uri),
	(athena_mime_set_short_list_components_for_uri),
	(athena_mime_add_application_to_short_list_for_uri),
	(athena_mime_remove_application_from_short_list_for_uri),
	(athena_mime_add_component_to_short_list_for_uri),
	(athena_mime_remove_component_from_short_list_for_uri),
	(athena_mime_extend_all_applications_for_uri),
	(athena_mime_remove_from_all_applications_for_uri): All these
	functions now take a AthenaDirectory and a AthenaFile, rather
	than a URI.
	
	(gnome_vfs_mime_application_has_id),
	(gnome_vfs_mime_id_matches_application),
	(gnome_vfs_mime_application_has_id_not_in_list),
	(string_not_in_list), (extract_prefix_add_suffix),
	(make_oaf_query_with_known_mime_type),
	(make_oaf_query_with_uri_scheme_only), (free_key),
	(server_matches_content_requirements),
	(athena_do_component_query), (str_list_difference),
	(strv_concat): Reformatted.

	(get_mime_type_from_file): Changed from get_mime_type_from_uri;
	uses athena_file_wait_until_ready instead of synchronous I/O.
	
	* libathena-extensions/athena-program-chooser.c:
	(repopulate_program_list), (is_application_default_for_uri),
	(is_component_default_for_uri),
	(is_component_in_short_list_for_uri),
	(is_application_in_short_list_for_uri),
	(program_file_pair_is_default_for_file),
	(add_to_short_list_for_file), (remove_from_short_list_for_file),
	(remove_default_for_item), (set_default_for_item):
	* libathena-extensions/athena-program-choosing.c:
	(any_programs_available_for_file):
	* libathena-extensions/athena-wait-until-ready.h:
	* src/file-manager/fm-directory-view.c: (switch_location_and_view),
	(create_open_with_gtk_menu), (reset_bonobo_open_with_menu),
	(activate_callback):
	* src/athena-applicable-views.c: (got_file_info_callback),
	(athena_navigation_info_new), (athena_navigation_info_free):
	* src/athena-applicable-views.h:
	* src/athena-sidebar.c: (athena_sidebar_update_buttons):
	* src/athena-theme-selector.c: (add_theme_to_icons):
	* src/athena-window.c: (athena_window_switch_views),
	(athena_window_load_content_view_menu):
	* test/test-athena-mime-actions-set.c: (main):
	* test/test-athena-mime-actions.c: (main): Deal with above API changes.

2000-09-27  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/Makefile.am:
	Dont install the test programs.

	* athena.spec.in:
	Make sure the fallback font is part of the package.
	Dont include the rsvg test programs.
	
2000-09-27  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/Makefile.am:
	* configure.in:
	Add support for using a debuggable version of the beast.
	
2000-09-27  Rebecca Schulman  <rebecka@eazel.com>

	Fixed bug 1275, that sidebar panels don't have defaults 
	per user level.

	* libathena-extensions/athena-global-preferences.c:
	(get_default_sidebar_iids_for_user_level),
	(sidebar_panel_iid_is_in_default_list),
	(global_preferences_register_sidebar_panels),
	(global_preferences_is_sidebar_panel_enabled):
	Added default sets (hard coded, as before) for each
	user level, and used them to get the defaults, instead of
	 the single set for all levels
	
	* libathena/athena-clipboard.c:
	(set_paste_sensitive_if_clipboard_contains_data):
	simplified check whether paste should be available.
	
	* src/athena-window-menus.c: (athena_window_initialize_menus):
	Fixed a typo in the clipboard menu text.
	

2000-09-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3294 ("Find them" button remains insensitive when search
	type is changed to non-text one)

	* src/athena-complex-search-bar.c:
	(search_bar_criterion_type_changed_callback):
	Added a missing "update_dynamic_button_states". This used to
	work, so I think it probably got accidentally deleted somewhere
	along the way.

2000-09-26  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text_aa):
	tweaked the selection highlighting to Arlo's taste.
	
2000-09-26  Darin Adler  <darin@eazel.com>

	* src/athena-window-manage-views.c:
	(athena_window_update_title): Added a missing g_free.

2000-09-26  Arlo Rose  <arlo@eazel.com>

	* data/browser.xml:
	Fixed dumb typo.

2000-09-26  Darin Adler  <darin@eazel.com>

	Fix more storage leaks.	
	
	* components/tree/athena-tree-node.c: (athena_tree_node_new):
	Get rid of extra allocation of node->details that caused a storage
	leak.
	* components/tree/athena-tree-view.c:
	(athena_tree_view_insert_model_node): Add a g_free.
	(free_uri_to_node_map_entry), (free_uri_to_hack_node_map_entry),
	(athena_tree_view_destroy): Free the keys of the hash table.
	(tree_expand_callback), (tree_collapse_callback),
	(tree_select_row_callback): Added missing g_free.
	(athena_tree_view_item_at): Removed an excess g_strdup.
	* libathena-extensions/athena-preference.c:
	(preference_initialize_if_needed): Destroy the global preference
	table on exit.
	(preference_hash_node_free_func): Free the hash key as well as
	the node value.
	(preference_register): Use strdup on keys as then are entered
	into the hash table.
	(preference_hash_node_lookup_with_registration): Remove the strdup
	in here since preference_register now handles it.
	(destroy_global_preference_table): Renamed and simplified the
	existing unused function.
	* libathena-extensions/athena-volume-monitor.c:
	(athena_volume_monitor_destroy), (free_volume): Free the volume
	itself, not just the fields within it.
	* src/athena-complex-search-bar.c:
	(athena_complex_search_bar_get_location): Added a missing
	g_free.
	* src/athena-sidebar-tabs.c: (tab_item_destroy_cover),
	(athena_sidebar_tabs_destroy): Free the tab items too, not just
	the list they are stored in.
	* src/athena-switchable-search-bar.c:
	(search_bar_preference_changed_callback): Added a missing g_free.
	
	* libathena-extensions/athena-theme.c: (free_default_theme),
	(athena_theme_get_theme_data): Add code to free the default
	theme on program exit to make leak detection easier.
	* src/athena-main.c: (main): Clean up the memory used by the XML
	parser on exit to make leak detection easier.
	
	* libathena/Makefile.am:
	* libathena/athena-bonobo-workarounds.c:
	* libathena/athena-bonobo-workarounds.h:
	Added version of bonobo_object_get_epv that shares a single global
	instance instead of allocating a new one each time it's called.
	
	* components/adapter/athena-adapter-factory-server.c:
	(impl_Athena_ComponentAdapterFactory__create):
	* libathena-extensions/bonobo-stream-vfs.c:
	(bonobo_stream_vfs_class_init):
	* libathena-extensions/athena-undo-context.c:
	(impl_Athena_Undo_Context__create):
	* libathena-extensions/athena-undo-manager.c:
	(athena_undo_manager_initialize_class):
	* libathena/athena-undo-transaction.c:
	(impl_Athena_Undo_Transaction__create):
	* libathena/athena-view.c: (impl_Athena_View__create):
	* src/athena-history-frame.c:
	(impl_Athena_HistoryFrame__create):
	* src/athena-shell.c: (athena_shell_get_vepv):
	* src/athena-view-frame-corba.c:
	(impl_Athena_ViewFrame__create):
	* src/athena-zoomable-frame-corba.c:
	(impl_Athena_ZoomableFrame__create):
	Use the new cover for bonobo_object_get_epv to avoid
	making lots of copies of it.
	
	* src/athena-window-menus.c: (get_user_level_image): Formatting
	tweak.
	
	* tools/leak-checker/athena-leak-checker.c: Added more "known to
	allocate and not free on exit" functions.

2000-09-26  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3244 (already-computed folder counts don't update
	when filtering preferences change)

	* libathena-extensions/athena-directory.c:
	(invalidate_one_count): hash table foreach function that
	invalidates the count of a AthenaDirectory.
	(filtering_changed_callback): preference callback function
	that calls invalidate_one_count on all extant directories.
	(add_filtering_callbacks): add preference callbacks for each
	file-filtering preference.
	(remove_filtering_callbacks): remove those preference callbacks.
	(athena_directory_get_internal): When directories hash table
	is created, call add_filtering_callbacks and schedule
	remove_filtering_callbacks for exit time.

2000-09-26  Arlo Rose  <arlo@eazel.com>

	* data/browser.xml:
	Added new colors, and names to match. These are less jarring, and
	make for good backgrounds.
	Fixes Bug 3204.

2000-09-26  John Sullivan  <sullivan@eazel.com>

	Fixed bug 437 (Deleting files doesn't affect count in sidebar)
	Fixed bug 2001 (adding/removing files doesn't update directory counts)

	* libathena-extensions/athena-directory-async.c:
	(get_corresponding_file): Removed from here, replaced by
	athena_directory_get_existing_corresponding_file, now
	in athena-directory.c
	(athena_directory_invalidate_counts): New function, split out
	from athena_directory_force_reload.
	(athena_directory_force_reload): Now calls _invalidate_counts.
	
	* libathena-extensions/athena-directory-private.h:
	Added prototypes for athena_directory_get_existing_corresponding_file
	and athena_directory_invalidate_counts.
	
	* libathena-extensions/athena-directory.h:
	Added prototype for athena_directory_get_corresponding_file.

	* libathena-extensions/athena-directory.c:
	(athena_directory_get_corresponding_file): New public function, 
	returns	AthenaFile object for this AthenaDirectory (whether or
	not one already existed).
	(athena_directory_get_existing_corresponding_file): Moved and
	renamed private function, returns AthenaFile object for this
	AthenaDirectory but only if one already exists.
	(invalidate_count_and_unref): New helper hash table foreach function,
	invalidates count & unrefs a AthenaDirectory.
	(collect_parent_directories): New helper function, adds directory
	to hash table & refs if not already present.
	(athena_directory_notify_files_added),
	(athena_directory_notify_files_removed),
	(athena_directory_notify_files_moved): Use these two new functions
	to invalidate directory counts when files added/removed.
	
	* libathena-extensions/athena-file.c:
	(athena_file_get_internal): Initialize a variable to NULL
	to make compiler happy.


	Reimplemented "select all should be insensitive when there
	are no files to select" a better way after Darin hinted.

	* src/file-manager/fm-directory-view.h: Added is_empty function
	pointer and prototype for fm_directory_view_is_empty.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class): made is_empty a MUST_OVERRIDE
	function.
	(get_directory_as_file): Simplified implementation by calling new
	athena_directory_get_corresponding_file.
	(no_items_showing): Removed this function.
	(compute_menu_item_info): Use fm_directory_view_is_empty instead of
	no_items_showing.
	(fm_directory_view_is_empty): New function, calls virtual function.

	(fm_directory_view_real_create_background_context_menu_items): Fixed
	bug where "New Folder" item in context menu was sensitive when it
	shouldn't have been.

	* src/file-manager/fm-list-view.c: (fm_list_view_initialize_class),
	(real_is_empty): Overrode is_empty function pointer to check whether
	row count of list is 0.

	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_is_empty): New function, checks whether
	list of icons is NULL.

	* src/file-manager/fm-icon-view.c: (fm_icon_view_is_empty),
	(fm_icon_view_initialize_class): Overrode is_empty function pointer
	to ask icon container.

2000-09-26  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_startup_form), (generate_summary_form):
	* athena-installer/src/Makefile:

	Adding scroll bar capabilities to various sections and cleaning up
	the box packing so that things look slightly better than with frames.

2000-09-26  Michael Engber  <engber@eazel.com>

	Yet another pass at optimizing background drawing.
	* libathena-extensions/athena-background.c:
	(athena_background_get_image_placement),
	(ensure_gradient_buffered), (fill_canvas_from_gradient_buffer),
	(canvas_buf_from_pixmap), (ensure_image_scaled),
	(athena_background_draw), (athena_background_draw_aa):
	* libathena-extensions/athena-gdk-pixbuf-extensions.c:
	(athena_gdk_pixbuf_scale_to_fit_factor),
	(athena_gdk_pixbuf_is_scaled_to_fit),
	(athena_gdk_pixbuf_scale_to_fit),
	(athena_gdk_pixbuf_scale_down_to_fit):
	* libathena-extensions/athena-gdk-pixbuf-extensions.h:

2000-09-26  Rebecca Schulman  <rebecka@eazel.com>

	Fixed bugs 691, 689, and 733.  Hopeully this also
	fixes 690, but I can't test it, because rename in
	place is confused on my system

	* components/notes/athena-notes.c: (make_notes_view):
	Change clipboard initialization to new signature
	* libathena/athena-clipboard.c:
	* libathena/athena-clipboard.h:
	(set_paste_sensitive_if_clipboard_contains_data),
	(add_menu_items_callback), (remove_menu_items_callback),
	(set_clipboard_menu_items_sensitive),
	(set_clipboard_menu_items_insensitive), (menu_activated_callback),
	(menu_deactivated_callback),
	(athena_clipboard_set_up_editable_from_bonobo_control),
	(athena_clipboard_setup_local):
	Add calls to sensitize and desensitize.  Change signatures
	around to get the data necessary to find out whether cut
	and paste should be active or not
	* src/athena-location-bar.c: (athena_location_bar_initialize):
	* src/athena-window-menus.c: (athena_window_initialize_menus):
	Change clipboard menu signatures to fit above changes
	* src/athena-window.c: (athena_window_constructed):
	add clipoard initialization, after the local ui handler is created


2000-09-26  Darin Adler  <darin@eazel.com>

	Got leaks in "athena --check" down to 0.
	
	Fixed bug 2488 (path name for link set determined incorrectly) by
	using only paths for link sets, never URIs.

	* tools/leak-checker/athena-leak-checker.c: Added more "known to
	leak" symbols.
	
	* libathena-extensions/athena-link-set.c: (create_new_link),
	(athena_link_set_is_installed), (athena_link_set_remove):
	Changed functions to always expect paths, so they can now use
	athena_make_path instead of link_set_path_name.
	* src/athena-sidebar.c: (metadata_button_callback): Changed to
	turn the URI into a path before calling the link-set functions.

	* libathena-extensions/athena-directory.c:
	(athena_directory_notify_files_moved): Use
	athena_file_list_free instead of
	athena_g_list_free_deep_custom.
	* libathena-extensions/athena-string-list.c:
	(athena_string_list_clear): Use athena_g_list_free_deep
	instead of athena_g_list_free_deep_custom.
	* libathena-extensions/athena-view-identifier.c:
	(athena_view_identifier_free_callback),
	(athena_view_identifier_list_free): Fixed call to
	athena_g_list_free_deep_custom so it doesn't need a function
	pointer type cast any more.
	
2000-09-26  Josh Barrow  <linuxfan@ionet.net>

	* src/athena-theme-selector.c: (add_theme_to_icons),
	(add_new_theme_button_callback):
	Changed "directory" to "folder" in two cases.

2000-09-26  Mathieu Lacage  <mathieu@eazel.com>

	try to debug some mozilla-related pbs.
	* src/athena-view-frame-corba.c:
	(impl_Athena_ViewFrame_open_location),
	(impl_Athena_ViewFrame_open_location_in_new_window),
	(impl_Athena_ViewFrame_open_in_new_window_and_select),
	(impl_Athena_ViewFrame_report_location_change),
	(impl_Athena_ViewFrame_report_selection_change),
	(impl_Athena_ViewFrame_report_status),
	(impl_Athena_ViewFrame_report_load_underway),
	(impl_Athena_ViewFrame_report_load_progress),
	(impl_Athena_ViewFrame_report_load_complete),
	(impl_Athena_ViewFrame_report_load_failed),
	(impl_Athena_ViewFrame_set_title):
	add debugging output.
	* src/athena-view-frame.c: (athena_view_frame_destroy_client),
	(athena_view_frame_destroy), (athena_view_frame_load_client):
	NULL freed' fields.
	* src/athena-window.c: (athena_window_real_set_content_view):
	idem.

2000-09-26  John Sullivan  <sullivan@eazel.com>

	Fixed bug 382 (Deleting file viewed in other window leaves
	other window in bad state)

	Also ran into some tree view problems that I did not fix
	but made less deadly so I could continue.

	* components/tree/athena-tree-view.c:
	(athena_tree_view_model_done_loading_callback),
	(reload_node_for_uri):
	Added g_return_if_fails checking the model and node parameters, 
	so it won't segfault with a NULL node. I did not attempt to
	debug why the nodes were NULL.
	
	* src/athena-window-private.h: Added viewed_file field to
	details struct.

	* src/athena-window-manage-views.c:
	(viewed_file_changed_callback): New function, closes window if
	viewed_file is gone.
	(athena_window_update_internals): Set viewed_file to
	AthenaFile for this location (after unreffing old one), and 
	connect to its "changed" signal	with viewed_file_changed_callback.
	(athena_window_end_location_change_callback): Truncate the 
	"for display" version of the URI in error messages.
	
	* src/athena-window.c: (athena_window_destroy):
	unref viewed_file.

2000-09-26  Victor Lecha  <victor@eazel.com>

	make it compile.
	* components/services/summary/athena-view/Makefile.am: 
	make it include correct libtrilobite path.
	* components/services/summary/athena-view/athena-summary-view.c:
	small tweak.

2000-09-26  Gene Z. Ragan  <gzr@eazel.com>

	Work in progress on allowing the user to set a HTTP proxy.
	
	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize):
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog), (global_preferences_register):
	* libathena-extensions/athena-global-preferences.h:

2000-09-26  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-file-utilities.c:
	(pthread_athena_read_file_callback_idle_binder),
	(pthread_athena_read_file_callback_common),
	(pthread_athena_read_file_synchronous_callback),
	(pthread_athena_read_file_asynchronous_callback),
	(pthread_athena_read_file_thread_entry),
	(pthread_athena_read_file_async),
	(pthread_athena_read_file_async_cancel),
	(athena_read_file_async), (athena_read_file_cancel):
	Experimental replacement for the athena_read_file_async
	as a potential speed improvement. Need to do some more profiling
	to see if we are getting any gain.

2000-09-25  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-thumbnails.c:
	(athena_get_thumbnail_uri), (check_for_thumbnails),
	(make_thumbnails):
	fixed big 2932, athena doesn't finish making
	thumbnails if there is a problematic image, by changing the logic
	of how it determines when a thumbnail is made.  Now it simply checks
	if the thumbnail task has terminated, instead of checking for
	the created thumbnail, so failures shouldn't faze it anymore.  Also
	fixed some other associated bugs.
	
2000-09-25  John Sullivan  <sullivan@eazel.com>

	Band-aid for bug 2752 (intermittent failure trying to
	use Help Contents)

	* src/athena-view-frame.c:
	(athena_view_frame_load_client): Upped a hardcoded
	timeout from 2 seconds to 10 seconds; also added an
	assert that might help us fix the underlying problem
	later.

2000-09-25  Darin Adler  <darin@eazel.com>

	Fixed bug bug 3264 (Tree view shows no branches for directories,
	...HACK... nodes visible), bug 3290 (changing directory or
	refreshing causes Gdk to assert), bug 2420 (Need to free original
	key when removing model node), and other assorted problems.

	* components/tree/athena-tree-view.c: (insert_hack_node),
	(remove_hack_node), (athena_tree_view_insert_model_node):
	Fix problem where the hash table key was neither g_strdup'd on the
	way in, nor g_free'd on the way out. This caused all the problems
	with bad nesting in the tree view.
	
	* athena-installer/src/installer.c: (create_pixmap):
	* src/file-manager/fm-list-view.c: (install_row_images):
	* src/athena-theme-selector.c: (add_theme):
	Added more checks for NULL before calling gdk_bitmap_unref.
	
	* src/file-manager/fm-directory-view.c: (no_items_showing):
	Fixed a AthenaDirectory ref. count leak.
	
	* libathena-extensions/athena-font-factory.c:
	(unref_global_font_factory), (athena_get_current_font_factory):
	Unref the font factory on exit.
	(athena_font_factory_initialize_class), (font_hash_node_free),
	(free_one_hash_node), (destroy): Added code to actually destroy
	the font factory.
	(unref_fixed_font), (athena_font_factory_get_fallback_font):
	Unref the fixed font on exit.
	* libathena-extensions/athena-volume-monitor.c:
	(unref_global_volume_monitor), (athena_volume_monitor_get):
	Unref the volume monitor on exit.
	* src/athena-signaller.c: (unref_global_signaller),
	(athena_signaller_get_current): Unref the signaller on exit.
	
	* src/athena-component-adapter-factory.c:
	(athena_component_adapter_factory_initialize): Replaced some
	strange FIXMEs with a simpler one.
	(athena_component_adapter_factory_destroy): Fix a CORBA object
	reference leak.
	(athena_component_adapter_factory_get): Did a ref/sink.

	* components/adapter/athena-adapter-control-embed-strategy.c:
	(athena_adapter_control_embed_strategy_new):
	* components/adapter/athena-adapter-embeddable-embed-strategy.c:
	(athena_adapter_embeddable_embed_strategy_new):
	* components/adapter/athena-adapter-file-load-strategy.c:
	(athena_adapter_file_load_strategy_new):
	* components/adapter/athena-adapter-progressive-load-strategy.c:
	(athena_adapter_progressive_load_strategy_new):
	* components/adapter/athena-adapter-stream-load-strategy.c:
	(athena_adapter_stream_load_strategy_new):
	* components/adapter/athena-adapter.c: (athena_adapter_new):
	* components/rpmview/athena-rpm-verify-window.c:
	(athena_rpm_verify_window_new):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_new), (eazel_install_new_with_config):
	* components/services/time/service/trilobite-eazel-time-service.c:
	(trilobite_eazel_time_service_new):
	* components/services/trilobite/libtrilobite/trilobite-service-pass
	wordquery.c: (trilobite_passwordquery_new):
	* components/services/trilobite/libtrilobite/trilobite-service.c:
	(trilobite_service_new):
	* components/tree/athena-tree-expansion-state.c:
	(athena_tree_expansion_state_new):
	* components/tree/athena-tree-model.c: (athena_tree_model_new):
	* components/tree/athena-tree-node.c: (athena_tree_node_new):
	* cut-n-paste-code/widgets/e-paned/e-hpaned.c: (e_hpaned_new):
	* cut-n-paste-code/widgets/e-paned/e-vpaned.c: (e_vpaned_new):
	* libathena-extensions/bonobo-stream-vfs.c:
	(bonobo_stream_create):
	* libathena-extensions/athena-any-width-bin.c:
	(athena_any_width_bin_new):
	* libathena-extensions/athena-background.c:
	(athena_background_new):
	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_new_with_icon):
	* libathena-extensions/athena-caption-table.c:
	(athena_caption_table_new):
	* libathena-extensions/athena-caption.c:
	(athena_caption_new):
	* libathena-extensions/athena-directory.c:
	(athena_directory_new):
	* libathena-extensions/athena-druid-page-eazel.c:
	(athena_druid_page_eazel_new),
	(athena_druid_page_eazel_new_with_vals):
	* libathena-extensions/athena-druid.c: (athena_druid_new):
	* libathena-extensions/athena-entry.c: (athena_entry_new):
	* libathena-extensions/athena-file-operations-progress.c:
	(athena_file_operations_progress_new):
	* libathena-extensions/athena-file.c:
	(athena_file_new_from_name), (athena_file_new_from_info):
	* libathena-extensions/athena-font-picker.c:
	(athena_font_picker_new):
	* libathena-extensions/athena-horizontal-splitter.c:
	(athena_horizontal_splitter_new):
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_new):
	* libathena-extensions/athena-icon-factory.c:
	(get_icon_factory):
	* libathena-extensions/athena-image.c: (athena_image_new):
	* libathena-extensions/athena-keep-last-vertical-box.c:
	(athena_keep_last_vertical_box_new):
	* libathena-extensions/athena-label.c: (athena_label_new):
	* libathena-extensions/athena-list-column-title.c:
	(athena_list_column_title_new):
	* libathena-extensions/athena-list.c:
	(athena_list_new_with_titles):
	* libathena-extensions/athena-password-dialog.c:
	(athena_password_dialog_new):
	* libathena-extensions/athena-preference.c:
	(athena_preference_new_from_type):
	* libathena-extensions/athena-preferences-box.c:
	(athena_preferences_box_new):
	* libathena-extensions/athena-preferences-dialog.c:
	(athena_preferences_dialog_new):
	* libathena-extensions/athena-preferences-group.c:
	(athena_preferences_group_new):
	* libathena-extensions/athena-preferences-item.c:
	(athena_preferences_item_new):
	* libathena-extensions/athena-preferences-pane.c:
	(athena_preferences_pane_new):
	* libathena-extensions/athena-radio-button-group.c:
	(athena_radio_button_group_new):
	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_new):
	* libathena-extensions/athena-string-picker.c:
	(athena_string_picker_new):
	* libathena-extensions/athena-text-caption.c:
	(athena_text_caption_new):
	* libathena-extensions/athena-undo-context.c:
	(athena_undo_context_new):
	* libathena-extensions/athena-undo-manager.c:
	(athena_undo_manager_new):
	* libathena-extensions/athena-user-level-manager.c:
	(user_level_manager_new):
	* libathena/athena-undo-transaction.c:
	(athena_undo_transaction_new):
	* libathena/athena-view.c:
	(athena_view_new_from_bonobo_control):
	* src/file-manager/athena-trash-monitor.c:
	(athena_trash_monitor_get):
	* src/athena-desktop-window.c: (athena_desktop_window_new):
	* src/athena-property-browser.c: (athena_property_browser_new):
	* src/athena-shell.c: (athena_shell_new):
	* src/athena-sidebar-tabs.c: (athena_sidebar_tabs_new):
	* src/athena-sidebar-title.c: (athena_sidebar_title_new):
	* src/athena-sidebar.c: (athena_sidebar_create_context_menu),
	(athena_sidebar_new):
	* src/athena-theme-selector.c: (athena_theme_selector_new):
	* src/athena-throbber.c: (athena_throbber_new):
	* src/athena-view-frame.c: (athena_view_frame_new):
	* src/athena-zoom-control.c: (athena_zoom_control_new):
	* src/athena-about.c: (athena_about_new):
	* src/athena-application.c: (athena_application_new),
	(athena_application_create_window):
	* src/athena-bookmark-list.c: (athena_bookmark_list_new):
	After Tim Janik explained that gtk_type_new is a low-level call to
	be avoided, changed most uses of gtk_type_new to gtk_object_new or
	gtk_widget_new. Also, after Owen and Havoc explained that you
	can't just ignore the floating bit, added ref/sink calls to the
	functions used to create objects where we don't use the floating
	scheme.
	
	* src/athena-zoom-control.c:
	(athena_zoom_control_button_press_event): Take advantage of the
	fact that the new menu is floating and don't bother with ref'ing.

	* libathena-extensions/athena-ctree.c:
	(athena_ctree_new_with_titles):
	Added a cast.
	
	* components/adapter/main.c: (adapter_factory_make_object):
	* components/hardware/main.c: (hardware_view_make_object):
	* components/services/install/lib/eazel-install-corba-callback.c:
	(eazel_install_callback_get_type), (eazel_install_callback_new):
	* libathena-extensions/athena-theme.c:
	(athena_theme_get_theme), (athena_theme_set_theme),
	(athena_theme_get_theme_data):
	Whitespace tweaks.
	
2000-09-25  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text_aa):
	tweaked the new, semi-transparent selection highlighting
	a bit by lightening the info text color and enlarging
	the selection area a little.
	
2000-09-25  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_focus_rect):
	Fixed code so that alpha is set properly.
	
2000-09-25  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_get_internal):
	(get_athena_navigation_result_from_gnome_vfs_result):
	Fixed problem I ran into while debugging something else.
	When gnome_vfs_uri_extract_short_name returned NULL from
	a URI like "http://foo:", this routine got into trouble.
	Rearranged code to check for the no-short-name case
	earlier and fall back to the mystery-uri handling.

	* src/athena-applicable-views.c:
	Changed a g_message to a g_warning so people will tell
	me about problems even more often.

2000-09-25  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-theme-selector.c: (make_theme_description):
	fixed bug where the theme descriptions were not showing up in
	the theme selector; the problem was that the xml routines couldn't
	handle a uri, so fixed by calling gnome_vfs_get_local_path_from_uri.
	
2000-09-25  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/lib/eazel-summary-shared.c:
	(parse_summary_xml_file):
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_startup_form), (generate_summary_form),
	(athena_summary_view_initialize),
	(summary_load_location_callback):
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(check_gconf_init):

	Fixing the background color errors that prevent testing.  I have not
	figured out how to set the parent form default color without causing
	major instability.  Also added the fetch of the url location tables
	from services.

2000-09-25  Andy Hertzfeld  <andy@eazel.com>

	finished the work for user-added themes, teaching the icon
	factory and other machinery to look in ~/.athena/themes to
	find theme
	
	* libathena-extensions/athena-icon-factory.c: (set_theme),
	(make_full_icon_path), (get_themed_icon_file_path):
	added a "local_theme" instance variable, determined it's state
	during set_theme and used it to make full paths.
	
	* libathena-extensions/athena-theme.c: (load_theme_document),
	(athena_theme_get_theme_data),
	(athena_pixmap_file_may_be_local),
	(athena_theme_get_image_path), (athena_theme_make_selector):
	made various routines look at the local theme store when necessary
	
2000-09-25  John Sullivan  <sullivan@eazel.com>

	Some work on the "sidebar panel has failed" situation.

	* src/athena-window-manage-views.c:
	(athena_window_update_state): Don't report sidebar panel
	failure when the view that failed was the content view.
	Doh! It had been putting up two dialogs, one for the content
	view and one for some mysterious unknown sidebar panel.
	(athena_window_set_state_info): Added a g_warning when
	the state is set to VIEW_ERROR. This will stop in the debugger
	to make it easier to tell what's generating the error (but
	without the debugger will just spew one line of spam).
	
	(athena_window_end_location_change_callback): Check if
	window is visible before trying to set the initial
	position. This prevents a return_if_fail complaint in some
	cases in the window-position-saving code when using 
	use-new-window mode.

	Fixed bug 3262 (Zoom control context menu should use
	radio buttons, not checkboxes)

	* src/athena-zoom-control.c: 
	Added marking_menu_items boolean to details struct.
	(create_zoom_menu_item): Now takes a radio button item
	as a parameter (from which to get the group) and returns
	the new radio button item (to use for the next time) and
	sets marking_menu_items to TRUE while creating menu items.
	Oh yeah, also creates a radio item instead of a check item.
	(zoom_menu_callback): Now bails out early if marking_menu_items.
	(create_zoom_menu): Passes the result of each create_zoom_menu_item
	into the next call, to get all the radio items in the same group.


2000-09-25  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-theme.c: (load_theme_document),
	(athena_theme_get_theme_data): Fix double-free problem that was
	causing a crash on quit if you changed themes.

2000-09-25  Rebecca Schulman  <rebecka@eazel.com>

	* src/file-manager/athena-indexing-info.c:
	(make_label_helvetica_bold), (make_label_helvetica_medium),
	(get_file_index_time), (show_reindex_request_information),
	(show_index_progress_bar), (athena_indexing_info_show_dialog):
	Created the index progress dialog, to show how much has been
	indexed, and updated the dialog about when the index was last
	updated to conform to screenshot.

2000-09-25  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text_aa):
	Forgot to remove FIXME.  It is now gone.

2000-09-25  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2877, Keyboard selection feedback broken in
	iocn view for smooth fonts.
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_focus_rect):
	New function to draw dashed selection rect.  Dash size
	can be changed by modifying dash variable.
	
	(draw_or_measure_label_text_aa):
	Call new draw_focus_rect when item focus is set.

2000-09-25  John Sullivan  <sullivan@eazel.com>

	* src/athena-window-manage-views.c:
	(position_and_show_window_callback): Needed a NULL check
	for saved geometry.

2000-09-25  John Sullivan  <sullivan@eazel.com>

	* components/tree/athena-tree-view.c:
	(athena_tree_view_insert_model_node),
	(athena_tree_view_update_model_node): Check for NULL
	before calling gdk_bitmap_unref (mask); it was hitting
	a return_if_fail NULL check a zillion times on startup
	in the tree view.

2000-09-25  Pavel Cisler  <pavel@eazel.com>

	* src/athena-component-adapter-factory.c:
	(athena_component_adapter_factory_initialize),
	(athena_component_adapter_factory_destroy),
	(athena_component_adapter_factory_get):
	Fix some NULL-dereferencing crashers that I was hitting.

	* tools/profiler/funcsummary.C:
	Special case root arcs with zero function times.

2000-09-25  Andy Hertzfeld  <andy@eazel.com>

	work toward completing user added themes; it's almost done
	now except for making the icon factory aware of user-added themes
	
	* src/athena-theme-selector.c: (uri_get_basename),
	(add_theme_to_icons), (make_theme_description), (add_theme),
	(populate_list_with_themes_from_directory),
	(populate_list_with_themes):
	made the theme selector install themes properly, and made it
	reflect themes that were installed in the user space
	
	* libathena-extensions/athena-theme.c:
	(athena_theme_make_selector):
	made it look in both theme spaces to retrieve an icons.

2000-09-24  Andy Hertzfeld  <andy@eazel.com>
	
	* src/athena-throbber.c: (get_throbber_dimensions),
	(load_themed_image), (athena_throbber_load_images),
	(athena_throbber_button_press_event),
	(athena_throbber_set_small_mode):
	implemented a small mode for the throbber to fix bug 3188.  Also,
	cleaned up some other throbber problems.
	* src/athena-throbber.h:
	added athena_throbber_set_small_mode, as part of fixing 3188
	* src/athena-window-toolbars.c: (allocate_throbber):
	set the small mode when necessary
	
	* libathena-extensions/athena-file-utilities.c:
	(athena_make_directory_and_parents), (athena_copy_uri_simple):
	* libathena-extensions/athena-file-utilities.h:
	added a "athena_copy_uri_simple" cover to gnome_vfs_xfer_uri to
	make it easy to replace 'cp' system calls.
	
	* src/athena-property-browser.c:
	(athena_property_browser_initialize),
	(athena_property_browser_destroy), (make_drag_image),
	(make_color_drag_image), (remove_background), (remove_emblem),
	(add_background_to_browser), (emblem_dialog_clicked),
	(make_property_tile), (make_properties_from_directories),
	(make_properties_from_xml_node):
	changed the way colors are presented by the property browser to
	use names instead of color values and to be more consistent with
	backgrounds.  Also, cleaned up the error handling and replaced
        'system' calls that had quoting problems with vfs calls, fixing bugs
	1249 and 2539

2000-09-24  Josh Barrow  <linuxfan@ionet.net>

	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_open_terminal):
	Make the terminals besides GNOME-terminal login as well.
	Also did some more cleaning up after myself.

2000-09-24  Maciej Stachowiak  <mjs@eazel.com>

	* check-THANKS.pl: New script to make sure we're giving credit
	appropriately - should be run before releases to make sure.
	
	* THANKS: Removed those who have been promoted to AUTHORS.
	
	* ChangeLog-20000625, ChangeLog-20000831: Made a few minor edits
	to avoid confusing check-THANKS.pl

2000-09-23  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-toolbar.c: (athena_toolbar_initialize_class),
	(athena_toolbar_size_allocate), (athena_toolbar_size_request):
	fixed bug 3186 and assorted other problems involving the throbber
	messing up toolbar resizing, by implementing
	athena_toolbar_size_request. Now it sizes correctly when you
	pull it out of the window.
	
2000-09-23  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-window-toolbars.c: (set_up_button):
	fixed bug where toolbar icon theme indirection was broken,
	so now the new ardmore theme uses the blue toolbar icons like
	Susan intended.
	
2000-09-23  Josh Barrow  <linuxfan@ionet.net>

	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_open_terminal):
	Make the fix prettier.

2000-09-23  Josh Barrow  <linuxfan@ionet.net>

	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_open_terminal):
	Changed terminal_path_with_flags to terminal_path.  I had 
	changed one instance trying to get this to work, then forgot
	to change it back.

2000-09-23  Josh Barrow  <linuxfan@ionet.net>

	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_open_terminal):
	Make GNOME-terminal start with the right flags.  This fixes
	bug 2226.

2000-09-23  Andy Hertzfeld  <andy@eazel.com>

	optimized the new selection highlighting by fetching the
	highlight frame once for the icon canvas instead of for each
	selected item

	* libathena-extensions/athena-icon-private.h:
	added field for highlight frame
	
	* libathena-extensions/athena-icon-container.c: (destroy),
	(athena_icon_container_initialize):
	load and destroy the highlight frame as necessary
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_label_text_aa):
	use the highlight frame from the canvas
	
2000-09-22  Maciej Stachowiak  <mjs@eazel.com>

	Register all the below components per display. I didn't make
	athena per-display yet (to avoid dealing with the locking
	issues, etc). I also did not change the services components that
	appear to be non-gui to operate per-display.

	I believe this fixes bugs 3033 and 2237.

	* components/adapter/main.c: (main):
	* components/hardware/main.c: (main):
	* components/help/hyperbola-main.c: (main):
	* components/history/athena-history-view.c: (main):
	* components/html/ntl-web-browser.c: (main):
	* components/image-viewer/athena-image-view.c:
	(init_bonobo_image_generic_factory):
	* components/loser/content/main.c: (main):
	* components/loser/sidebar/main.c: (main):
	* components/mozilla/main.c: (main):
	* components/music/main.c: (main):
	* components/notes/athena-notes.c: (main):
	* components/rpmview/main.c: (main):
	* components/sample/main.c: (main):
	* components/services/install/athena-view/main.c: (main):
	* components/services/inventory/athena-view/main.c: (main):
	* components/services/login/athena-view/main.c: (main):
	* components/services/summary/athena-view/main.c: (main):
	* components/services/time/athena-view/main.c: (main):
	* components/services/trilobite/sample/service/main.c: (main):
	* components/shell/shell.c: (shell_factory_init):
	* components/tree/main.c: (main):
	* components/websearch/ntl-web-search.c: (main): Register each of 
	these per-display.

2000-09-22  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-gdk-extensions.c:
	(athena_gradient_parse_one_color_spec):
	fixed glitch in Michael's gradient parsing logic that was
	mishandling three-point gradients and making Arlo's sidebar
	draw wrong.
	
2000-09-22  Andy Hertzfeld  <andy@eazel.com>

	implemented Arlo's new design for icon selection highlighting.
	It's still not finished; it needs to be optimized and refined in
	various ways.
	
	* icons/Makefile.am:
	* icons/text-selection-frame.png
	added semi-transparent text selection frame image
	
	* libathena-extensions/athena-graphic-effects.c,h:
	(athena_stretch_frame_image), (athena_embed_image_in_frame):
	exposed the stretch frame image routine
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text_aa), (draw_label_text_aa):
	implemented the new, transparent highlighting.
	
2000-09-22  Darin Adler  <darin@eazel.com>

	Storage leak fixes. Today I concentrated on leaks that happen
	when you change views from Icon to List View and back.

	* components/tree/athena-tree-view.c:
	(athena_tree_view_insert_model_node): Unref a pixmap and bitmap,
	free a string.
	(athena_tree_view_update_model_node): Unref a pixmap and bitmap,
	free a string.
	(notify_node_seen): Free a string.
	(athena_tree_view_uri_to_name): Removed extra g_strdup.
	* libathena-extensions/athena-glib-extensions.c:
	(free_hash_tables_at_exit): Free a list.
	* libathena-extensions/athena-list.c: (draw_cell): Skip the
	excess work of re-getting the pixmap and bitmap, not using them,
	and leaking them.
	* libathena-extensions/athena-preferences.c:
	(preferences_hash_node_remove_callback): Free a list.
	* src/file-manager/fm-directory-view.c: (queue_pending_files):
	Free a list.
	* src/file-manager/fm-icon-view.c: (get_icon_text_callback):
	Free a string in all code paths (was freed in some before).
	* src/file-manager/fm-list-view.c: (add_to_list): Free the column
	text in a way that works even though some columns have NULL.
	(install_row_images): Unref a pixmap and bitmap.
	
	* libathena-extensions/athena-scalable-font.c:
	(destroy_global_rsvg_ft_context),
	(initialize_global_stuff_if_needed): Free the rsvg_ft font cache
	at exit.
	* libathena-extensions/athena-theme.c: (free_last_theme),
	(athena_theme_get_theme_data): Free the cached theme XML
	document at exit.
	
	* components/help/converters/gnome-db2html2/gdb3html.c:
	(remove_head), (start_element), (end_element), (cdata_block):
	* components/tree/athena-tree-model.c:
	(athena_tree_model_for_each_postorder),
	(athena_tree_model_monitor_add):
	* libathena-extensions/athena-directory-async.c:
	(remove_monitor_link), (dequeue_pending_idle_callback),
	(remove_callback_link_keep_data), (remove_callback_link):
	* libathena-extensions/athena-drag.c:
	(athena_drag_file_receive_dropped_keyword):
	* libathena-extensions/athena-file-changes-queue.c:
	(athena_file_changes_queue_get_change):
	* libathena-extensions/athena-thumbnails.c:
	(check_for_thumbnails):
	* src/file-manager/fm-properties-window.c:
	(property_button_toggled):
	* src/athena-window-manage-views.c: (handle_go_back),
	(handle_go_forward):
	* src/athena-window.c: (athena_add_to_history_list):
	Fixed a bunch of callers of g_list_remove_link to also free the
	removed link. This seems to be an error-prone API from glib.
	About half of the callers had it wrong.
	
	* src/athena-bookmark-list.c:
	(athena_bookmark_list_delete_item_at),
	(athena_bookmark_list_delete_items_with_uri):
	* src/athena-sidebar.c: (receive_dropped_keyword):
	Changed to use g_list_free_1 for clarity.
	
	* src/athena-location-bar.c: Coding style tweaks.
	
	* src/athena-main.c: (main): Run the self-checks a second time
	if they succeed the first time. More thorough check this way (make
	sure the test works even after it's been run once), and better to
	notice one-time vs. per-test leaks.
	
	* tools/leak-checker/athena-leak-checker.c: (g_slist_alloc),
	(g_slist_free), (g_slist_free_1), (g_mem_chunk_new),
	(g_mem_chunk_destroy), (g_mem_chunk_alloc), (g_mem_chunk_alloc0),
	(g_mem_chunk_free), (g_mem_chunk_clean), (g_mem_chunk_reset),
	(g_mem_chunk_print): Made the GSList and GMemChunk code dumb down
	when using the leak checker.

	* tools/leak-checker/athena-leak-checker.c: Added more symbols
	of "known to leak" functions so we can see the real leakers.

2000-09-22  Michael Engber  <engber@eazel.com>

	horizontal & vertical desktop gradient settings were
	being written out bassackwards: bug 3247.
	* libathena-extensions/athena-directory-background.c:
	(athena_directory_background_write_desktop_settings):

2000-09-22  Michael Engber  <engber@eazel.com>

	Sped up gradient drawing. Also changed the n-point
	gradient syntax to use a '%' to indicate percentage
	instead of a '|'.
	* icons/arlo/arlo.xml:
	* libathena-extensions/athena-background.c:
	(athena_background_destroy), (reset_cached_color_info),
	(ensure_gradient_buffered), (gradient_helper_v),
	(gradient_helper_h), (fill_canvas_from_gradient_buffer),
	(athena_background_draw), (draw_pixbuf_tiled_aa),
	(athena_background_draw_aa),
	(athena_background_set_color_no_emit):
	* libathena-extensions/athena-gdk-extensions.c:
	(athena_gradient_parse_one_color_spec),
	(athena_gradient_get_start_color_spec),
	(athena_gradient_get_end_color_spec):
	* libathena-extensions/athena-gdk-extensions.h:
	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_canvas_fill_rgb):
	* libathena-extensions/athena-gnome-extensions.h:

2000-09-22  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_delete_downloads):
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_file), (real_arch_name),
	(get_search_url_for_package):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_start_transaction),
	(eazel_install_package_provides_compare),
	(eazel_install_package_modifies_provides_compare):

	Hack the installer lib to munge "i?86" => "i386" so as not to
	confuse the RPM queries.  (This can be removed later: the java
	team says they will do this munging themselves.)  Don't add
	duplicate entries to the downloaded_files GList.
	
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_destroy_foreach):
	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_category):
	* athena-installer/src/installer.c: (category_compare_func),
	(toggle_button_toggled), (eazel_install_get_depends),
	(eazel_installer_initialize):
	* athena-installer/src/installer.h:
	
	Add "depends" GList to CategoryData, so that the info about
	buttons in the bootstrap installer can be pulled out of the
	package-list.xml and not require a bogus 2nd XML file.  Add that
	extra parsing to the install lib XML parser and make it more
	robust.  Convert bootstrap installer to use the info in its new
	place and junk the redundant XML parser.

2000-09-22  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-location-bar.c: (athena_location_bar_initialize),
	(athena_location_bar_update_label):
	at Arlo's request, right justified the location bar label, now
	that it switches between "location" and "go to".
	
2000-09-22  J Shane Culpepper  <pepper@eazel.com>

	* src/athena-first-time-druid.c: (druid_finished):

	Fixing urls for the first time druid so that they do
	not point to the eazel: redirect nonsense.

2000-09-22  Andy Hertzfeld  <andy@eazel.com>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_destroy),
	(fm_icon_view_begin_loading):
	fixed bug 1038, sound file being previewed doesn't stop playing
	when the view switches, by explicitly terminating the sound process
	when the icon view is destroyed or a new directory is loaded.
	
2000-09-22  J Shane Culpepper  <pepper@eazel.com>

	* components/services/login/athena-view/athena-login-view.oafin
	fo:
	point eazel-pw to the change password dialog.  Will finish the full
	renaming a little later but needed to go ahead and use the correct uri.

2000-09-22  John Sullivan  <sullivan@eazel.com>

	Fixed bug 168 (Save and restore window position/size per
	directory)

	Note that this is only done when in "use separate windows
	for everything" mode. My brain broke trying to figure out
	how it could be used coherently in single-window mode.

	* libathena-extensions/athena-gtk-extensions.h:
	* libathena-extensions/athena-gtk-extensions.c:
	(sanity_check_window_geometry): New helper function, takes
	four coordinates and munges them if necessary to keep the
	window at least partially on screen and not ridiculously
	huge.
	(athena_gtk_window_set_initial_geometry): New function,
	sets the position/location of a window before it is shown
	after calling sanity_check_window_geometry on 
	top/left/width/height parameters.
	(athena_gtk_window_set_initial_geometry_from_string):
	New function, calls _set_initial_geometry after parsing
	geometry-as-string parameter and adjusting it for
	minimum-width and minimum-height parameters.
	
	* libathena-extensions/athena-metadata.h:
	#define new per-directory key for window geometry
	
	* src/athena-application.c:
	(athena_window_delete_event_callback): New function,
	calls athena_window_close.
	(athena_application_create_window): Hook up this new
	callback as signal handler for window's delete_event;
	this causes closing the window from the close box go
	through the same athena_window_close path that closing
	the window from the menu did.
	
	* src/athena-bookmarks-window.c:
	(athena_bookmarks_window_restore_geometry):
	Now calls athena_gtk_window_set_geometry_from_string,
	which was extracted from here.
	
	* src/athena-window-manage-views.c:
	(position_and_show_window_callback): New function, reads
	geometry string for this location from metadata & applies
	it (if in use-new-window mode), then shows window.
	(athena_window_end_location_change_callback):
	Use athena_directory_call_when_ready to show the window
	only after the metadata has been read, so it doesn't appear
	in one position and then bounce elsewhere.
	
	* src/athena-window-menus.c: (file_menu_new_window_callback):
	Removed gtk_widget_show from here. It wasn't necessary since
	the window is shown later after the URI is determined to be good,
	and doing it here prevented the window positioning code from
	working correctly.
	
	* src/athena-window-private.h: Moved some window geometry
	#defines in here.
	
	* src/athena-window.c: 
	(athena_window_save_geometry): New private function, reads
	the window geometry and stores it in the directory's metadata.
	(athena_window_close): Calls athena_window_save_geometry
	if we're in use-new-windows mode.

2000-09-22  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: added --enable-more-warnings

2000-09-22  Pavel Cisler  <pavel@eazel.com>

	* tools/profiler/symbol-table.h:
	Tweak the profiler output adding a code address.

2000-09-22  Andy Hertzfeld  <andy@eazel.com>

	in response to user testing, made the location bar label switch to
	"Go to:" during input when the text doesn't match the uri.
	
	* src/athena-location-bar.h:
	added "last_location" field
	* src/athena-location-bar.c: (editable_key_press_callback),
	(destroy), (athena_location_bar_initialize),
	(athena_location_bar_set_location),
	(athena_location_bar_update_label):
	maintained last_location field; when anything changes, set the label
	to "location" if the contents match last_location and "goto"
	otherwise.
	
2000-09-21  Pavel Cisler  <pavel@eazel.com>

	* tools/profiler/athena-leak-symbol-lookup.C:
	Enable bfd symbol lookup.

2000-09-21  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2598 ("Select All Files" should be insensitive in
	views that have 0 files)

	* src/file-manager/fm-directory-view.c: 
	(no_items_showing): New function, checks directory item
	count. I can trust this now that the directory item count
	filters the same way the directory view does, thanks to
	rebecka's recent change.
	(compute_menu_item_info): Use no_items_showing to set the
	sensitivity of "Select All Files".

2000-09-21  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3236 (Window titles are indistinguishable in taskbar)

	Removed "Athena: " from the main Athena window and all
	the dialogs. Took this opportunity to standardize on book title
	capitalization for all dialog titles. Also softened the caveat
	text just a bit.

	* components/music/athena-music-view.c: (play_current_file):
	* components/rpmview/athena-rpm-view-install.c:
	(athena_rpm_view_install_done):
	* libathena-extensions/athena-file-operations.c:
	(handle_xfer_vfs_error), (handle_xfer_overwrite),
	(athena_file_operations_copy_move),
	(athena_file_operations_move_to_trash), (confirm_empty_trash):
	* libathena-extensions/athena-program-chooser.c:
	(athena_program_chooser_new),
	(athena_program_chooser_show_no_choices_message):
	* libathena-extensions/athena-stock-dialogs.c:
	(athena_info_dialog), (athena_warning_dialog),
	(athena_error_dialog), (athena_error_dialog_with_details),
	(athena_yes_no_dialog):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_confirm_multiple_windows),
	(fm_directory_view_confirm_deletion), (confirm_delete_from_trash),
	(report_broken_symbolic_link):
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file), (fm_report_error_setting_group),
	(fm_report_error_setting_owner),
	(fm_report_error_setting_permissions):
	* src/file-manager/fm-icon-text-window.c:
	(create_icon_text_window):
	* src/file-manager/fm-properties-window.c:
	(update_properties_window_title):
	* src/athena-application.c:
	(athena_application_check_user_directories):
	* src/athena-bookmarks-window.c: (create_bookmarks_window):
	* src/athena-first-time-druid.c:
	(athena_first_time_druid_show):
	* src/athena-property-browser.c: (emblem_image_file_changed),
	(add_background_to_browser):
	* src/athena-shell.c: (display_caveat):
	* src/athena-sidebar.c: (receive_dropped_uri_list):
	* src/athena-window-manage-views.c:
	(athena_window_update_title), (handle_unreadable_location),
	(report_content_view_failure_to_user),
	(report_sidebar_panel_failure_to_user),
	(athena_window_end_location_change_callback):
	* src/athena-window-menus.c: (forget_history_if_confirmed),
	(user_level_customize_callback), (show_bogus_bookmark_window):

2000-09-21  Pavel Cisler  <pavel@eazel.com>

	* tools/profiler/funcsummary.C:
	* tools/profiler/funcsummary.h:
	* tools/profiler/profile.C:
	* tools/profiler/profiledata.C:
	* tools/profiler/test.cpp:

	Profiler tweaks.
	Add volatile to make things thread safe.

2000-09-21  Darin Adler  <darin@eazel.com>

	Fixes to leaks and the leak checker.
	
	* libathena-extensions/athena-preference.c:
	(athena_self_check_preference): Unref an object that was
	leaking.
	* libathena-extensions/athena-string-list.c:
	(athena_self_check_string_list): Unref an object that was
	leaking.
	* libathena-extensions/athena-user-level-manager.c:
	(user_level_manager_destroy): Allow destroying.
	(unref_user_level_manager): Unref the user level manager.
	(user_level_manager_ensure_global_manager): Unref the user level
	manager at exit time.
	* src/athena-main.c: (main): Free the context even in the
	self-check case.
	* tools/leak-checker/athena-leak-checker.c:
	(athena_leak_record_malloc), (athena_leak_record_realloc),
	(athena_leak_record_free) : Don't gather stats on the blocks as
	the leaks are recorded. Instead build them at print time.
	(total_one_leak): Compute totals for printing.
	(create_bad_names_hash_table): Make a hash table to use to check
	if a name is one of the "allowed to leak" functions.
	(is_stack_crawl_good): Reject stack crawls from things that are
	allowed to leak. "good" here means "worth keeping".
	(print_one_leak): Don't print any "?" if there's only a single
	leak, since all levels of the stack crawl are valid then.
	(athena_leak_print_leaks): Filter out expected leaks.
	(g_list_alloc), (g_list_free), (g_list_free_1), (g_node_new),
	(g_nodes_free), (g_node_destroy): Versions of these functions that
	use malloc/free instead of mem. chunks so we can accurately gauge
	leaks of these data types.
	* tools/leak-checker/athena-leak-hash-table.h:
	* tools/leak-checker/athena-leak-hash-table.c:
	(athena_leak_hash_table_filter): Function for use by new
	filtering code.
	* tools/leak-checker/athena-leak-symbol-lookup.h:
	* tools/leak-checker/athena-leak-symbol-lookup.c:
	(athena_leak_get_function_name): Function for use by new
	filtering code.

2000-09-21  Arlo Rose  <arlo@eazel.com>

	* data/browser.xml:
	Added names to our colors, but will replace the colors later.

2000-09-21  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/gnome/Makefile.am:
	* icons/gnome/i-music.png:
	* icons/i-music.png:
	* icons/i-music-aa.png:
	* icons/i-spreadsheet.png:
	* icons/i-spreadsheet-aa.png:
	added Susan's new icons for spreadsheets and music, but moved the
	classic gnome ones into the gnome theme.
	
2000-09-21  Mathieu Lacage  <mathieu@eazel.com>

	* libathena-extensions/athena-bookmark.c:
	(bookmark_file_changed_callback): replace strcmp by
	athena_uri_matchs: this took me a lot of time to find 
	out.
	* libathena-extensions/athena-directory.c:
	(athena_directory_get_internal): remove is_canonical_uri
	* libathena-extensions/athena-file-utilities.c:
	(athena_uri_is_local_scheme), (athena_handle_trailing_slashes),
	(athena_make_uri_canonical), (athena_uri_is_canonical_uri),
	(athena_self_check_file_utilities): make athena know the difference
	between foo and foo/ so that we do not cache too aggressively.
	* libathena-extensions/athena-file-utilities.h: add prototype for
	athena_uri_is_canonical.

2000-09-21  Rebecca Schulman  <rebecka@eazel.com>
	Cut and pasted the gtkclist widget into
	athena.  Fixed bugzilla.eazel.com 481,
	to reflect user file filtering preferences
	in directory counts, and in the process,
	fixed bug 480.

	* configure.in:
	* cut-n-paste-code/widgets/.cvsignore:
	* cut-n-paste-code/widgets/Makefile.am:
	* cut-n-paste-code/widgets/gtkclist/.cvsignore:
	* cut-n-paste-code/widgets/gtkclist/Makefile.am:
	* cut-n-paste-code/widgets/gtkclist/gtkclist.c:
	* cut-n-paste-code/widgets/gtkclist/gtkclist.h:
	(COLUMN_FROM_XPIXEL), (LIST_WIDTH), (gtk_clist_get_type),
	(gtk_clist_class_init), (gtk_clist_set_arg), (gtk_clist_get_arg),
	(gtk_clist_init), (gtk_clist_construct), (gtk_clist_new),
	(gtk_clist_new_with_titles), (gtk_clist_set_hadjustment),
	(gtk_clist_get_hadjustment), (gtk_clist_set_vadjustment),
	(gtk_clist_get_vadjustment), (gtk_clist_set_scroll_adjustments),
	(gtk_clist_set_shadow_type), (gtk_clist_set_selection_mode),
	(gtk_clist_freeze), (gtk_clist_thaw),
	(gtk_clist_column_titles_show), (gtk_clist_column_titles_hide),
	(gtk_clist_column_title_active), (gtk_clist_column_title_passive),
	(gtk_clist_column_titles_active),
	(gtk_clist_column_titles_passive), (gtk_clist_set_column_title),
	(gtk_clist_get_column_title), (gtk_clist_set_column_widget),
	(gtk_clist_get_column_widget),
	(gtk_clist_set_column_justification),
	(gtk_clist_set_column_visibility),
	(gtk_clist_set_column_resizeable),
	(gtk_clist_set_column_auto_resize), (gtk_clist_columns_autosize),
	(gtk_clist_optimal_column_width):
	* src/file-manager/Makefile.am:
	Add include of the cut-n-paste-code directory,
	so we can access the clist.
	* libathena-extensions/Makefile.am:
	include the new static gtkclist library
	* libathena-extensions/athena-list.h:
	include the cut and pasted widget instead
	of the gtk one.
	
	* libathena-extensions/athena-directory-async.c:
	(get_filter_options_for_directory_count),
	(start_getting_directory_counts):
	Add command to get filtering options for gnome-vfs 
	based on user preferences.  This works niftily
	when preferences change thanks to the callbacks
	in fm_directory_view



2000-09-21  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2090, Sidebar panel shrinks when back from text
	or image view to directory view.
		
	* src/athena-sidebar.c: (make_button_box),
	(athena_sidebar_update_buttons):
	Fixed logic where button centering was being shown
	at the wrong time, messing up spacing of sidebar panels.
	
	* components/image-viewer/athena-image-view.c: (redraw_view),
	(configure_size), (view_factory_common):
	Fixed cases where image data might be NULL.

2000-09-21  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	* athena-installer/src/Makefile.am:
	* athena-installer/src/installer.c: (eazel_install_get_depends),
	(eazel_installer_initialize):
	* athena-installer/src/link.sh:
	* athena-installer/src/prescript:
	* athena-installer/src/proxy.c:
	* athena-installer/src/proxy.h:
	
	Add proxy autodetect from the athena first-time druid, and
	support for the install lib to use proxies.  Clean up some of the
	temp dir stuff for security reasons.
	
2000-09-21  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_stretch_handles_aa):
	
	fixed bugs 3084, 3119, 3134, icon stretch handles are not drawn
	in the right place or hit-tested properly, by removing some
	bogus offsets.
		
	fixed bugs 764 and 2626, icon stretching is way too slow, by only
	doing the relayout and update position when the stretching is
	finished, instead of doing it every time the mouse moves during
	the stretch.  Also, made it relayout if necessary after stretching
	is finished, like it was intending to do.
	
	* libathena-extensions/athena-icon-container.c:
	(icon_set_size), (athena_icon_container_move_icon),
	(continue_stretching), (end_stretching), (motion_notify_event),
	(athena_icon_container_unstretch):
	passed an "update_position" parameter through the various levels
	to control if it should issue the icon_position_changed signal and
	attempt the relayout
	
	* libathena-extensions/athena-icon-dnd.c: (handle_local_move):
	passed TRUE for the new update_position parameter to the move_icon call.
	* libathena-extensions/athena-icon-private.h:
	added an update position parameter to the move_icon call.
	
2000-09-21  Josh Barrow  <linuxfan@ionet.net>

	* icons/gnome/gnome.xml:
	Changed Gnome to GNOME.  GNOME is an acronym.

2000-09-21  Michael Engber  <engber@eazel.com>

	Move athena_gnome_canvas_draw_pixmap to athena-gnome-extensions 
	* libathena-extensions/athena-background.c:
	(draw_pixbuf_centered_aa), (draw_pixbuf_tiled_aa):
	* libathena-extensions/athena-gnome-extensions.c:
	(athena_gnome_canvas_draw_pixmap_helper),
	(athena_gnome_canvas_draw_pixmap_helper_alpha),
	(athena_gnome_canvas_draw_pixmap),
	(athena_gnome_canvas_fill_rgb):
	* libathena-extensions/athena-gnome-extensions.h:

2000-09-21  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-gdk-pixbuf-extensions.c:
	(athena_gdk_pixbuf_load):
	Handle GNOME_VFS_ERROR_EOF properly, now that we get this result
	instead of just relying on getting 0 bytes read.

2000-09-21  Darin Adler  <darin@eazel.com>

	* components/tree/athena-tree-model.c: (report_node_changed):
	Add ref/unref to fix problem with renaming.
	
	* src/check-athena: Add "--g-fatal-warnings" so tests fail if
	there are warning messages.

2000-09-21  Josh Barrow  <linuxfan@ionet.net>

	* icons/theme_preview.png:
	Goofed up the last icon and put the document icon to
	far to the right.  This made it where the icon was 
	being cut off when viewed.

2000-09-21  Josh Barrow  <linuxfan@ionet.net>

	* icons/theme_preview.png:
	Updated theme preview icon to better reflect what the
	actual theme looks like.

2000-09-21  Josh Barrow  <linuxfan@ionet.net>

	* components/music/mpg123_handler.c:
	Removed include of gdk_imlib.h

2000-09-21  Pavel Cisler  <pavel@eazel.com>

	* tools/profiler/Makefile:
	* tools/profiler/funcsummary.C:
	* tools/profiler/funcsummary.h:
	* tools/profiler/machine-profile.S:
	* tools/profiler/machine-profile.h:
	* tools/profiler/machine-profileP.h:
	* tools/profiler/athena-leak-symbol-lookup.C:
	* tools/profiler/athena-leak-symbol-lookup.h:
	* tools/profiler/profile.C:
	* tools/profiler/profile.h:
	* tools/profiler/profileP.h:
	* tools/profiler/profiledata.C:
	* tools/profiler/profiledata.h:
	* tools/profiler/symbol-table.h:
	* tools/profiler/test.cpp:
	* tools/profiler/totaltime.C:
	* tools/profiler/totaltime.h:
	
	First pass at a profiler that handles threading and shared libraries.
	Adapted from Corel's cprof.
	It works on my machine but there are still a quite a few hardcoded 
	things.

2000-09-20  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-file-operations.c:
	(parse_previous_duplicate_name), (make_next_duplicate_name):
	Fix a duplicate name generator bug that caused make check to fail.
	Remove some string pasting that would make localization impossible.
	Add better comments to duplicate name string fragments to make it clearer
	to localizers.

2000-09-21  Andy Hertzfeld  <andy@eazel.com>

	* data/browser.xml:
	fixed bug 3169, emblems should come last in property browser,
	by changing the order in the xml definition file.
	
2000-09-20  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-gdk-pixbuf-extensions.c:
	(file_read_callback):
	
	fixed problem where background images were not being displayed. 
	Maciej recently fixed gnome-vfs to return EOF errors when appropriate;
	unfortunately, that broke athena_gdk_pixbuf_load_async, which was
	reading until it got an EOF but not returning the pixbuf if it got
	an error of any kind.  Fixed by checking for EOF and allowing it; a
	better fix might be to read the file size and only read the
	proper amount, which we might consider doing later.
	
2000-09-20  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-core-distrib
	ution.c: (determine_turbolinux_version):

	Add code to detect turbolinux version.
	
	* components/rpmview/athena-rpm-view-install.c:
	(athena_rpm_view_install_package_callback):
	* components/services/install/lib/eazel-install-protocols.c:
	(get_url_for_package), (get_search_url_for_package):

	Don't set an RPM server in the RPM view.  Detect no-server in the
	install lib and don't try to connect.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(uninstall_all_packages), (eazel_install_start_transaction):
	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (trilobite_root_helper_destroy), (trilobite_root_helper_start),
	(trilobite_root_helper_get_exit_code):
	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	h:

	Fix result code of uninstall.  Try to check rpm child exitcode
	(though this won't work under userhelper, thanks userhelper).
	
2000-09-20  Maciej Stachowiak  <mjs@eazel.com>

	The following two AthenaDirectory fixes fix bugzilla.eazel.com
	bug 2894:
	
	* libathena-extensions/athena-directory-async.c
	(request_is_satisfied): Check for
	directory_loaded_set_notification as well as directory_loaded.

	(athena_directory_stop_monitoring_file_list): When we dump the
	file list, we also need to indicate that the directory is no
	longer loaded.

2000-09-20  Darin Adler  <darin@eazel.com>

	* src/Makefile.am:
	* src/athena-view-frame-athena-view.c:
	* src/athena-view-frame-private.h:
	* src/athena-view-frame.h:
	* src/athena-view-frame.c: (athena_view_frame_destroy_client),
	(athena_view_frame_load_client),
	(athena_view_frame_load_location),
	(athena_view_frame_stop_loading),
	(athena_view_frame_selection_changed),
	(athena_view_frame_title_changed):
	Removed some of the remains of the component_class machinery.
	AthenaViewFrame now is the frame for a AthenaView only.
	
	* src/file-manager/athena-indexing-info.c:
	(athena_indexing_info_show_dialog): Fixed a misplaced statement
	that results in bad code and an uninitialized variable warning.
	
	* tools/leak-checker/athena-leak-symbol-lookup.c:
	(athena_leak_find_symbol_in_map): Fixed handling of symbols for
	libraries where the bfd library doesn't find the information.

2000-09-20  Andy Hertzfeld  <andy@eazel.com>

	* icons/i-bookmark.png:
	* icons/i-bookmark-20.png:
	* icons/i-bookmark-missing.png:
	* icons/i-bookmark-missing-20.png:
	* icons/eazel/SearchWeb.png:
	
	updated icons from Susan
	
2000-09-20  Andy Hertzfeld  <andy@eazel.com>

	* icons/i-bookmark-20.png:
	* icons/i-bookmark-missing.png:
	fixed bug 1471, need real icons for bookmark and missing bookmark,
	by adding these new ones from Susan.
	
	* configure.in:
	* icons/Makefile.am:
	* icons/ardmore/.cvsignore:
	* icons/ardmore/Makefile.am:
	* icons/ardmore/ardmore.xml:
	* icons/ardmore/blueridge.png 
	* icons/ardmore/bluewall.png
	* icons/ardmore/i-directory-12.png 
	* icons/ardmore/i-directory-24.png 
	* icons/ardmore/i-directory-36.png 
	* icons/ardmore/i-directory-72.png 
	* icons/ardmore/i-directory-96.png 
	* icons/ardmore/i-directory-accept-12.png 
	* icons/ardmore/i-directory-accept-24.png 
	* icons/ardmore/i-directory-accept-36.png 
	* icons/ardmore/i-directory-accept-72.png 
	* icons/ardmore/i-directory-accept-96.png 
	* icons/ardmore/i-directory-accept.png 
	* icons/ardmore/i-directory.png
	* icons/ardmore/number_strip.png 
	
	added a new theme from Susan with realistic folders
	
2000-09-20  Rebecca Schulman  <rebecka@eazel.com>

	* src/athena-window-manage-views.c:
	(athena_window_end_location_change_callback):
	Added new "advice" for bug 1874, to provide advice.
	I am not sure what sort of advice we should be
	giving, so I welcome recommendations on this matter.

2000-09-20  Darin Adler  <darin@eazel.com>

	First step fixing storage leaks: Fixed some ref. count leaks of
	AthenaFile, AthenaDirectory, and AthenaScalableIcon.
	
	* components/tree/athena-tree-model.c: (remove_all_nodes):
	Unref the root node when we are done with it.
	(report_root_node_if_possible): Use report_node_changed for
	new nodes as well.
	(report_node_changed): Since a new node and a changed node are
	really the same, just use this instead of using a different call
	for added vs. changed.
	(athena_tree_model_directory_files_changed_callback): Ref
	the node when it's being added to the hash table. Get rid of
	the misguided code that would ref "because remove will unref"
	and instead use a more normal model.
	(athena_tree_model_directory_files_added_callback): Fix a
	storage leak in the case where we generate a warning. Changed it
	from a printf to a g_warning. Use report_node_changed for new
	nodes as well. Unref the node after adding it to use a more normal
	ref model; handles cases where it's already in there properly, for
	one thing.
	* components/tree/athena-tree-node.c:
	(athena_tree_node_set_parent): Changed an assert to a
	return_if_fail.
	
	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_update_icon): Change the code to take the fact
	that athena_icon_factory_get_icon_for_file yields a new ref into
	account to plug a AthenaScalableIcon leak.
	
	* src/athena-bookmark-parsing.c:
	(athena_bookmark_new_from_node): Unref the icon after creating a
	new bookmark. If the bookmark needs to keep it, it will ref it.
	
	* src/file-manager/fm-icon-view.c: (get_icon_images_callback):
	Extra space in here.

2000-09-20  Darin Adler  <darin@eazel.com>

	* components/adapter/Makefile.am:
	* cut-n-paste-code/freetype/Makefile.am: Make the tinderbox a bit
	happier by mentioning some files that were missing from these
	makefiles.

2000-09-20  Darin Adler  <darin@eazel.com>

	* cut-n-paste-code/freetype/ftdebug.h: Fixed compiling with newer
	gcc. Freetype was trying to use token pasting to attach the name
	of a function (FTMessage) onto the parameters to that
	function. There's no need to attempt this, and it's incorrect. I
	removed the token pasting attempt. Perhaps Raph should get this
	rolled back into the main freetype soruces.
	
	* libathena-extensions/bonobo-stream-vfs.c: Cleaned up the code
	a bit to match Athena coding style and remove some redundant
	stuff.
	
	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_update_icon): Fixed a place where we unref the
	old value before ref'ing the new one. It's not really a bug, but
	it's a good habit to ref the new value first. Ran into this when
	I started looking for AthenaScalableIcon leaks.

2000-09-20  John Sullivan  <sullivan@eazel.com>

	* src/athena-complex-search-bar.c: (fewer_options_callback):
	Reinstated a less vile form of the queue_resize hack that had
	been here now that Rebecca and I discovered that without it the
	toolbar doesn't shrink correctly when the window is very wide.

2000-09-20  Rebecca Schulman  <rebecka@eazel.com>

	* po/POTFILES.in:
	Fixed a build problem that was caused by a removed
	file not being removed from here.
	* src/file-manager/athena-indexing-info.c:
	(athena_indexing_info_show_dialog):
	Add place-holder index progress indicator in the indexing
	info menu.  This will go when Arlo give

2000-09-20  John Sullivan  <sullivan@eazel.com>

	* src/athena-location-bar.c: (real_activate),
	(athena_location_bar_initialize_class): Wired
	up the location bar such that when it is swapped in
	its text field gets keyboard focus, just like the
	search fields.

2000-09-20  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form):

	Fixed several annoying gtk bugs while drawing boxes in the tables.

2000-09-20  Maciej Stachowiak  <mjs@eazel.com>

	Finally fixed bug 1994; in the process I think I also ended up
	fixing 2576, 2577, 2578, 2579 and 2580.

	* components/adapter/athena-adapter-embed-strategy.h,
	components/adapter/athena-adapter-embed-strategy.c: Abstract
	interface for embedding various kinds of Bonobo components.
	* components/adapter/athena-adapter-embed-strategy-private.h:
	Header inclusing a `protected' call to emit a signal.
	* components/adapter/athena-adapter-control-embed-strategy.h,
	components/adapter/athena-adapter-control-embed-strategy.c:
	Concrete subclass for embedding a Control.
	* components/adapter/athena-adapter-embeddable-embed-strategy.h,
	components/adapter/athena-adapter-embeddable-embed-strategy.c:
	Concrete subclass for embedding an Embeddable.
	* components/adapter/Makefile.am: Add new files.

	* components/adapter/athena-adapter-progressive-load-strategy.c
	(athena_adapter_progressive_load_strategy_load_location): Fixed
	incorrect GnomeVFSFIleInfo handling and removed a printf.

	* components/adapter/athena-adapter-stream-load-strategy.c:
	(athena_adapter_stream_load_strategy_load_location,
	athena_adapter_stream_load_strategy_stop_loading): Removed print
	statements.

	* components/adapter/athena-adapter.c:
	(athena_adapter_destroy): Free stuff.

	(athena_adapter_new): Use the new embed strategy stuff.
	
	(athena_adapter_open_location_callback): callback for signal
	handler attached to embed strategy.

	* src/athena-view-frame-bonobo-control.c,
	src/athena-view-frame-bonobo-embeddable.c: Removed.
	* src/athena-view-frame-private.h, src/Makefile.am: Remove
	mentions of the two preceding files.

	* src/athena-view-frame.c (athena_view_frame_load_client): Use
	the adapter to host non-athena-native components.

	* athena-clean.sh: Added image view.

2000-09-20  Michael Engber  <engber@eazel.com>

	Refactor/clean-up background blitting code
	* libathena-extensions/athena-background.c:
	(athena_copy_pixbuf_to_canvasbuf_helper),
	(athena_copy_pixbuf_to_canvasbuf_helper_alpha),
	(athena_copy_pixbuf_to_canvasbuf), (draw_pixbuf_centered_aa),
	(draw_pixbuf_tiled_aa):

2000-09-20  Darin Adler  <darin@eazel.com>

	* src/athena-location-bar.c: (drag_data_received_callback),
	(drag_data_get_callback): Fixed bug that happens when you drag the
	"Location:" part of the location bar. I still think the feature is
	of questionable value, but it was easy to fix it to keep it
	working. The bug resulted from making assumptions about the widget
	hierarchy.

2000-09-20  Darin Adler  <darin@eazel.com>

	Fixed bug that was preventing Show Properties from working.

	* libathena-extensions/athena-icon-factory.c: (cache_icon_new):
	Allow NULL for details to mean default details; keeps the fallback
	icon code simpler.
	(set_theme): A little more simplification.
	(load_icon_for_scaling): Fix the fallback icon to create the cache
	icon with cache_icon_new instead of rolling its own.

2000-09-20  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/bonobo-stream-vfs.c (vfs_read): Handle
	GNOME_VFS_ERROR_EOF correctly.

2000-09-20  Darin Adler  <darin@eazel.com>

	* components/help/help-method.c: (shell_quote),
	(help_uri_to_string): Moved the shell quote function in here
	instead of trying to share the one in libathena-extensions. This
	fixes bug 3163 (Athena crashes any time a help item in the
	sidebar pane is double-clicked).

2000-09-20  Maciej Stachowiak  <mjs@eazel.com>

	* components/adapter/athena-adapter-file-load-strategy.c
	(athena_adapter_file_load_strategy_destroy): Another
	uninitialized variable.
	* components/adapter/athena-adapter-stream-load-strategy.c
	(athena_adapter_stream_load_strategy_destroy): Another
	uninitialized variable. Thanks to Will LaShell for pointing these
	out.

2000-09-20  Maciej Stachowiak  <mjs@eazel.com>

	* components/adapter/athena-adapter-progressive-load-strategy.c
	(athena_adapter_progressive_load_strategy_destroy): Fix
	unuinitialized variable use (thanks to Will LaShell).

2000-09-20  Maciej Stachowiak  <mjs@eazel.com>

	More work towards fixing bug 1994; in the process I think I might
	also end up fixing 2576, 2577, 2578 and 2579 (might also end up
	fixing 2580 later).
	
	* components/adapter/Makefile.am:

	* components/adapter/athena-adapter-load-strategy.h,
	components/adapter/athena-adapter-load-strategy.c: Abstract
	class that gives the interface for loading up a component that
	presents some particular interface.

	* components/adapter/athena-adapter-file-load-strategy.h,
	components/adapter/athena-adapter-file-load-strategy.c:
	Concrete subclass for loading a component that has the
	Bonobo::PersistFile interface.

	* components/adapter/athena-adapter-progressive-load-strategy.h,
	components/adapter/athena-adapter-progressive-load-strategy.c:
	Concrete subclass for loading a component that has the
	Bonobo::ProgressiveDataSink interface.

	* components/adapter/athena-adapter-stream-load-strategy.c,
	components/adapter/athena-adapter-stream-load-strategy.h:
	Concrete subclass for loading a component that has the
	Bonobo::PersistStream interface.

	* components/adapter/athena-adapter.h,
	components/adapter/athena-adapter.c:
	(athena_adapter_destroy, athena_adapter_new,
	athena_adapter_load_location_callback,
	athena_adapter_stop_loading_callback): Use load strategies.

	* libathena-extensions/bonobo-stream-vfs.c (vfs_read): Minor
	formatting correction.

2000-09-20  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c: (play_current_file):
	fixed bug 2374, music view crashes when attempting to play non-local
	files, by checking for non-local files and putting up a dialog instead.
	
	* src/athena-property-browser.c: (ensure_uri_is_image),
	(emblem_image_file_changed), (add_background_to_browser):
	fixed bug 3173, adding an svg background fails, by checking for it
	and not permitting it. Also made a few clean-ups.  We still need to
	be more robust when non-images get places in ~/.athena/backgrounds,
	which I'll work on soon.
	
2000-09-19  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-extensions/athena-icon-factory.c (set_theme):
	Fixed an uninitialized variable use and cleaned up some nearby
	logic while I was at it.

	* src/athena-main.c (main): Removed a gratuitous puts call.

2000-09-19  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_emit_delete_files_default):

	Since the default delete_files signal is the last called in the
	bootstrap installer (which kinda sucks), it should always return
	TRUE.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_download_packages),
	(eazel_install_start_transaction_make_rpm_argument_list):

	Don't always assume we're downgrading.  Make sure "--oldpackage"
	flag is passed to RPM when we are.
	
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_setenv):
	* libathena-extensions/athena-glib-extensions.c:
	(athena_setenv):

	Fix "=" bug in setenv.
	
	* athena-installer/src/installer.c: (eazel_installer_do_install),
	(eazel_installer_initialize):
	* athena-installer/src/main.c:
	* athena-installer/src/prescript:

	Set default CGI path for remote services (in the bootstrap
	installer) and make a command-line option for setting it.  Remove
	outdated /var stuff from the prescript.
	
2000-09-19  Mathieu Lacage  <mathieu@eazel.com>

	* src/file-manager/fm-list-view.c: (fm_list_receive_dropped_icons):
	doh, forgot to commit. This fixes a uninitialized variable.

2000-09-19  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c: (set_theme):
	fixed recently introduced bug where it would only use icons
	from the default theme.  Fixed by flipping the sense of a
	comparison in set_theme.
	
2000-09-19  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1860 (Switching to complex search bar leaves
	navigation bar too tall forever)

	I never did fully figure out what was wrong, but I found
	a workaround, and added a FIXME (bug 3171) about the fact 
	that the need for the workaround isn't well-understood.

	* src/athena-switchable-navigation-bar.c:
	(athena_switchable_navigation_bar_set_mode):
	* src/athena-switchable-search-bar.c:
	(athena_switchable_search_bar_set_mode):
	Added gtk_widget_queue_resize calls on the GNOME_DOCK
	ancestor of the navigation bar and search bar when the
	contents are swapped.

2000-09-19  Andy Hertzfeld  <andy@eazel.com>

	added a new theme for the classic GNOME icons, and changed the
	default document icons to the ones from the eazel theme that can
	display embedded text.  This is a step on the way toward finishing
	the default theme.  I think Darin's recent check-in broke the
	icon factory so it only displays icons from the default theme; I'll
	try to fix that soon.
	
	* configure.in:
	added new gnome theme folder
	* icons/Makefile.am:
	added the document icons from the eazel theme to the default theme
	* icons/eazel/Makefile.am:
	removed the document icons from the eazel theme since it now
	inherits theme from the default theme
	* icons/eazel/i-regular.xml:
	removed the document xml file from the eazel theme 
	* icons/i-regular.xml:
	added the document xml file to the default theme
	
	* icons/gnome/.cvsignore:
	* icons/gnome/Makefile.am:
	* icons/gnome/gnome.xml:
	added new gnome theme for the classic gnome look, for people who
	prefer it.
	
2000-09-19  Darin Adler  <darin@eazel.com>

	Fixed bug 3157 (Going to a bogus URI crashes athena).
	
	* libathena-extensions/athena-directory-async.c:
	(athena_directory_async_state_changed): Add a ref/unref to keep
	the directory around even if call_when_ready results in the last
	ref to the directory going away.

2000-09-19  Darin Adler  <darin@eazel.com>

	Fixed bug 640 (icon cache never frees images (awaiting GdkPixbuf
	fix)). Also took care of bug 3146 (zillions of 'main_loops !=
	NULL' assertion failures when quitting) and bug 3138 (Some code in
	the icon factory is cut and pasted from elsewhere). And a few
	unrelated things that came up while I was busy working on these.

	* configure.in: Applied patch from Dan Winship to fix handling of
	CFLAGS and LDFLAGS. Fixes some missing quoting and other mistakes.
	
	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-icon-factory-private.h:
	* libathena-extensions/athena-thumbnails.c:
	* libathena-extensions/athena-thumbnails.h:
	Broke out the thumbnailing code into its own source file for
	clarity.
	
	* libathena-extensions/athena-directory.c:
	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file-utilities.c:
	(athena_make_directory_and_parents):
	Moved athena_make_directory_and_parents into a place where the
	thumbnail code can share it instead of requiring its own copy.
	
	* libathena-extensions/athena-global-preferences.h:
	* libathena-extensions/athena-global-preferences.c:
	(destroy_global_prefs_dialog), (global_preferences_get_dialog),
	(athena_global_preferences_dialog_update),
	(athena_global_preferences_initialize):
	* libathena-extensions/athena-preferences.h:
	* libathena-extensions/athena-preferences.c:
	(preferences_initialize_if_needed), (preferences_shutdown):
	* src/athena-application.c: (athena_application_destroy):
	Changed code so that it cleans up with g_atexit instead of with an
	explicit shutdown call. This makes it sequence correctly with
	other atexit code.
	
	* libathena-extensions/athena-icon-canvas-item.h:
	* libathena-extensions/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_destroy),
	(athena_icon_canvas_item_set_attach_points),
	(emblem_layout_next):
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_update_icon):
	Added a Athena prefix to the EmblemAttachPoints typedef, since
	it's public.
	
	* libathena-extensions/athena-icon-factory.h:
	* libathena-extensions/athena-icon-factory.c:
	Changed the icon factory structure so that it will actually free
	pixbufs when done with them. Made some other small fixes to the
	icon factory in passing, including removing some redundant code
	and fixing the logic for getting custom icons and deleting the
	icon factory and g_atexit time.
	
	* src/file-manager/fm-icon-view.c: (play_file), (preview_sound):
	Restructured the logic for playing sound previews a little to get
	rid of compiler warnings and close some loopholes in the old code.
	
	* src/athena-main.c: (is_event_loop_needed),
	(quit_if_in_main_loop), (athena_gtk_main_quit_all),
	(event_loop_unregister), (athena_main_event_loop_register),
	(athena_main_is_event_loop_mainstay),
	(athena_main_event_loop_quit), (main): Fixed the main loop
	quitting logic so that it is a bit simpler and works with the
	gnome-vfs code that runs event handling after the last main loop
	is gone.

2000-09-19  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2519 (fix hideous queue_size_request hack)
	
	* src/athena-complex-search-bar.c: (fewer_options_callback):
	It turns out that this most vile of lines was totally
	unnecessary, so I deleted it.

2000-09-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (authn_cb_succeeded), (login_button_cb), (logout_button_cb),
	(logged_in_callback), (logged_out_callback):

	Removed the evil gtk_main_iteration crap so that the logged in state
	is much more reliable.  Hooked up the logout button to do the right thing.

2000-09-19  Michael Engber  <engber@eazel.com>

	First cut at speeding up background drawing. Images now scaled
	with interpolation and image drawing is faster.
	* libathena-extensions/athena-background.c:
	(ensure_image_scaled), (athena_background_image_fully_obscures),
	(athena_background_draw), (athena_art_rgb),
	(athena_art_rgb_rgba), (athena_draw_pixbuf_to_canvasbuf),
	(draw_pixbuf_centered_aa), (draw_pixbuf_tiled_aa),
	(athena_background_draw_aa), (load_image_callback):

2000-09-19  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_startup_form), (generate_summary_form),
	(authn_cb_succeeded), (authn_cb_failed), (am_i_logged_in),
	(preferences_button_cb):

	Fixed view so that it queries ammonite for its current login state
	and the login table is not drawn in a user is already logged in.

2000-09-19  Darin Adler  <darin@eazel.com>

	* components/image-viewer/io-png.c: (image_save): Use volatile to
	fix setjmp/longjmp vulnerability that was indicated by a GCC
	warning. For some reason this showed up only with new versions of
	lbpng.

2000-09-19  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1244 (Athena window size is hardwired)
	Fixed bug 2870 (Windows are too tall for 1024x480 screen of
	Vaio C1XD picturebook)
	Fixed bug 3025 (Can't shrink window smaller than large initial size)

	* src/athena-window.c: 
	Added #defines for window minimum and default width & height.

	(get_max_forced_height), (get_max_forced_width): New helper
	functions, broken out of athena_window_size_request, that
	return the maximum dimensions a window should be programatically
	forced to. They return 90% of the screen width/height.
	
	(set_initial_window_geometry): New function, broken out of
	athena_window_constructed. Uses #defines and 
	get_max_forced_width/height to determine initial and minimum
	window sizes. Set policy so that user can stretch window smaller,
	but only down to sensible minimum size.
	(athena_window_constructed): call set_initial_window_geometry.
	(athena_window_size_request): call get_max_forced_width/height.

2000-09-19  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-lib-self-check-functions.h:
	fixed build problem where someone apparently deleted athena-queue
	without deleting its self check function.  Fixed by deleting the check.
	
	* components/music/mpg123_handler.c: (start_playing_file):
	fixed bug 2262, athena doesn't play variable bit rate mp3s properly, by
	adding the "-y" parameter to the mpg123 invocation, as suggested to me
	by Jamie Manley in email.  This might also have fixed bug 2227, but I
	don't have vbr files to test with.
	
	* src/file-manager/fm-icon-view.c: (play_file):
	added the "-y" parameter to mpg123 invocations to play variable bit
	rate files better.  Also, fixed bug 2529 by checking for non-local
	files and not trying to play them.
	
2000-09-19  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3019, renaming special icons should be
	impossible or harmless.

	You can't rename any AthenaLinks now.  This makes
	sense given the way we use them.
	
	* libathena-extensions/athena-file.c:
	(athena_file_can_rename):
	Add a check to see if file is AthenaLink.
	
	* src/file-manager/fm-icon-view.c: 
	(special_link_in_selection):
	Check and see if selection contains link files.
	
	(fm_icon_view_create_selection_context_menu_items):
	Call above funcion and disable rename if it returns TRUE.
	
2000-09-18  Maciej Stachowiak  <mjs@eazel.com>

	Fix bugzilla.eazelc.om 674 2052
	
	* components/loser/content/athena-content-loser.oafinfo,
	components/loser/sidebar/athena-sidebar-loser.oafinfo,
	components/sample/athena-sample-content-view.oafinfo: Set
	test_only attribute to TRUE.

	* src/athena-main.c (main): Enable test components if
	ATHENA_ENABLE_TEST_COMPONENTS evnironment variable is set.

2000-09-19  Yukihiro Nakai <nakai@gnome.gr.jp>

	* athena.desktop: Add Japanese entry

2000-09-18  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (authn_cb_succeeded), (login_button_cb):

	Added a gtk_main_iteration to block for the corba callback so that
	login will wait until it gets a return value.  The summary view
	actually works now but is still pretty unreliable and throws lots
	of warnings.

2000-09-18  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/lib/eazel-summary-shared.c:
	(parse_a_service), (parse_a_eazel_news_item),
	(parse_a_update_news_item):
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_startup_form), (authn_cb_succeeded), (authn_cb_failed),
	(login_button_cb), (athena_summary_view_load_uri):

	Removing some debugging code and checking state fixes for a logged in
	user.

2000-09-18  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: cleanup.
	* libathena-extensions/Makefile.am: remove athena-queue.c/h
	from build process.

2000-09-18  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	(init_default_transfer_configuration):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_set_arg), (eazel_install_class_initialize),
	(eazel_install_new_with_config):
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (eazel_install_fetch_file),
	(eazel_install_fetch_package), (get_url_for_package),
	(get_search_url_for_package):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-types.h:
	* components/services/trilobite/doc/gconf.txt:
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_setenv):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	:

	Un-hardcoded the CGI path (for the RPM database server) and made
	it a gconf setting.  Use trilobite_setenv to set the user agent
	string.
	
2000-09-18  John Sullivan  <sullivan@eazel.com>

	Fixed bug 558 (Rubber-band selection of files in icon
	view gradually degrades)

	Now the menu-updating code does not run while rubberband
	selecting (but does run immediately thereafter).

	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-container.c:
	(start_rubberbanding), (stop_rubberbanding),
	(athena_icon_container_initialize_class): New signals
	"band_select_started" and "band_select_ended" emitted
	just when you'd expect.
	
	* src/file-manager/fm-directory-view.h:
	Prototypes for new functions (intended to be called only
	by subclasses) fm_directory_view_start_batching_selection_changes
	and fm_directory_view_stop_batching_selection_changes.
	
	* src/file-manager/fm-directory-view.c:
	Added details fields: guint batching_selection_level,
	gboolean selection_changed_while_batched, gboolean
	menu_states_untrustworthy
	(selection_contains_one_item_in_menu_callback),
	(selection_not_empty_in_menu_callback): New helper functions
	that report if the selection matches expectations and complain
	via g_warning if they don't match and we trust the menu state.
	(open_callback), (trash_callback), (duplicate_callback), 
	(create_link_callback),	(open_properties_window_callback):
	Use these new helper functions to verify that the menu state
	matches expectations but not crash if it doesn't.
	
	(schedule_update_menus): Change timeout back to idle now that
	it isn't affecting the band-select case; mark menu states as
	untrustworthy.
	(fm_directory_view_update_menus): mark menu states as
	trustworthy.

	(fm_directory_view_notify_selection_changed): If we're batching
	selection changes, remember that the selection changed; otherwise,
	do the work that you only do when not batching (update menus).
	
	(fm_directory_view_start_batching_selection_changes): Increment
	the batching level counter.
	(fm_directory_view_stop_batching_selection_changes): Decrement
	the batching level counter. If it reaches zero, and the selection
	changed while batched, call notify_selection_changed.
	
	* src/file-manager/fm-icon-view.c: 
	(band_select_started_callback): start batching selection changes.
	(band_select_ended_callback): stop batching selection changes.
	(create_icon_container): connect to band_select_started and
	band_select_ended signals of icon container.

2000-09-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3018, should not be able to remove special icons
	from desktop.
	
	* libathena-extensions/athena-file-operations.c:
	(is_special_link):
	New function that checks if link is volume, home or trash.

	(athena_file_operations_copy_move):
	Call is_special_link() and prune special items from
	operation list.

2000-09-18  Arlo Rose  <arlo@eazel.com>

	* icons/throbber/008.png:
	Fixed a glitch in the image.

2000-09-18  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_osd_xml_from_memory):

	Fix bugs 2862 & 2975 by fixing an off-by-one in the memory
	allocation and trimming whitespace from before and after the XML
	file (which makes libxml puke).
	
2000-09-18  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/lib/eazel-summary-shared.c:
	(services_data_new), (parse_a_service), (parse_summary_xml_file):
	* components/services/summary/lib/eazel-summary-shared.h:
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_startup_form), (generate_summary_form),
	(authn_cb_succeeded), (login_button_cb), (register_button_cb):

	Pointing summary view to the real servers.  Lots of little state fixes
	to help generate real content.

2000-09-18  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2243 (trash window name should be "Trash"
	with a capital T, localized)

	* libathena-extensions/athena-directory-private.h:
	Added prototype for athena_directory_get_
	name_for_self_as_new_file
	* libathena-extensions/athena-directory.h,
	* libathena-extensions/athena-directory.c:
	(athena_directory_initialize_class),
	(athena_directory_get_name_for_self_as_new_file),
	(real_get_name_for_self_as_new_file): wired up new
	overridable function pointer "get_name_for_self_as_new_file"
	that's used to get the name from directories that aren't
	vfs directories. Default implementation returns the scheme.
	
	* libathena-extensions/athena-file.c:
	(athena_file_get_internal): Use athena_directory_
	get_name_for_self_as_new_file instead of hardwiring
	scheme-getting logic here.
	* libathena-extensions/athena-trash-directory.c:
	(trash_get_name_for_self_as_new_file),
	(athena_trash_directory_initialize_class):
	Override get_name_for_self_as_new_file to return _("Trash").

	* src/athena-window-manage-views.c: 
	(compute_default_title): Use AthenaFile to get the
	default window title. Formerly it was using some similar
	but slightly different logic to what athena_file uses
	to get a name to display.

	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	* AUTHORS: Gave credit where credit was due.

2000-09-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3017, should not be able to copy desktop items

	Check for special desktop link types when specifying
	drag and drop actions.

	Disable Duplicate menu item.
	
	* libathena-extensions/athena-icon-dnd.c:
	(selection_includes_special_link),
	(athena_icon_container_receive_dropped_icons):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_link_type_in_selection), (special_link_in_selection),
	(fm_directory_view_real_create_selection_context_menu_items):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_create_selection_context_menu_items):

2000-09-18  Josh Barrow  <linuxfan@ionet.net>

	* README:
	* configure.in:
	* athena.spec.in:
	Remove instances of libwww, as it's no longer required.

2000-09-18  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 3029, Metafile shows up on desktop when
	"show invisible files" is on.

	Special files are now never shown on the desktop.
		
	* src/file-manager/fm-directory-view.c: 
	(queue_pending_files):
	Reset hidden file flags to false for the desktop case.
	
	(filtering_changed_callback):
	Reset hidden file flags to false for the desktop case
	and don't reload contents.

2000-09-18  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2213 (Shouldn't be able to drop files into
	search results view)

	* libathena-extensions/athena-list.h:
	Added prototypes for athena_list_rejects_dropped_icons
	and athena_list_set_rejects_dropped_icons.
	* libathena-extensions/athena-list.c:
	New rejects_dropped_icons field in details.
	(athena_list_rejects_dropped_icons): new function,
	read from field.
	(athena_list_set_rejects_dropped_icons): new function,
	sets field.
	(athena_list_find_icon_list_drop_target): check field
	for early out. Also, renamed from find_drop_target for
	clarity.
	(athena_list_get_drop_action): Update for name change.

	* src/file-manager/fm-directory-view.h: New overridable
	function pointer accepts_dragged_files and function
	fm_directory_view_accepts_dragged_files.
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class),
	(fm_directory_view_accepts_dragged_files),
	(fm_directory_view_real_accepts_dragged_files): Wire up
	fm_directory_view_accepts_dragged_files as a virtual
	function with default implementation that always returns
	TRUE.

	* src/file-manager/fm-list-view.c: (set_up_list):
	Call athena_list_set_rejects_dropped_icons with (opposite
	of) result of fm_directory_view_accepts_dragged_files.
	
	* src/file-manager/fm-search-list-view.c:
	(fm_search_list_view_initialize_class),
	(real_supports_creating_files), (real_accepts_dragged_files):
	Wire up override of accepts_dragged_files that returns FALSE.

2000-09-18  Pavel Cisler  <pavel@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (update_menus_idle_callback),
	(update_one_menu_item), (schedule_update_menus):
	Partial fix to bug 558- draging to select files gradually degrades.
	Turns out to be a bonobo bug. For now tweaked the way the menu updating
	code gets called to make it get called less to make the bug less visible.
	
2000-09-18  Mathieu Lacage  <mathieu@eazel.com>

	* libathena-extensions/athena-search-uri.c:
	(athena_self_check_search_uri): fix bug 2378.
	This was waaaay tougher than I expected: the translation 
	strings were actually good. The code did an evil cast between 
	2 slightly different structures which ended in strange 
	behaviour. Added a test for this. Thanks a lot Rebecca.

2000-09-18  Josh Barrow  <linuxfan@ionet.net>

	* README:
	Remove instances of gtkhtml as it isn't required any longer.

2000-09-17  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_open_uri):
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_redirect_parse_xml):

	Clean up whitespace on XML files for the pathetic libxml library,
	so it won't puke.  Add the hacky gnome-vfs env variable to set the
	user-agent string for fetching the XML file.

2000-09-17  Mathieu Lacage  <mathieu@eazel.com>

	* src/file-manager/fm-list-view.c: (fm_list_receive_dropped_icons):
	make it check if a target is begin copied into itself before doing 
	the actual file operation. ie: bug 3085
	* test/Makefile.am: add brand new test I used in my quest for bug
	1963
	* test/test-athena-background.c: (main): the actual test :)
	run and you will see beautiful background.

2000-09-17  Maciej Stachowiak  <mjs@eazel.com>

	More work towards bug 1994. I'm not yet checking in the code to
	actually use the adapter yet, but it sort of works on my system.
	
	* athena-clean.sh: Added athena-adapter

	* components/adapter/main.c (main): Do the stop in debugger
	trick. Also, initialize gnome-vfs (and threads). Duh!
	
	* components/adapter/athena-adapter-factory-server.c
	(impl_Athena_ComponentAdapterFactory_create_adapter):
	CORBA_Object_duplicate the object reference we return, because
	CORBA's just cool like that.
	
	* components/adapter/athena-adapter.c
	(athena_adapter_new): Show me the widgets, Lebowski. That's
	right, a few missing gtk_widget_show calls were the only bugs in
	this hairy mess of CORBA/Bonobo code (well, other than the obvious
	resource leaks).
	
	* components/adapter/athena-adapter.oafinfo: Updated to match
	reality.

	* libathena-extensions/athena-icon-factory.c
	(vfs_file_exists, athena_make_directory_and_parents,
	make_thumbnail_path, athena_icon_factory_get_thumbnail_uri,
	check_for_thumbnails): Put FIXMEs for a bunch of synchronous I/O
	that is making it a pain in the ass to test 1994.

	* src/athena-component-adapter-factory.c:
	Fill in the right IID.
	(athena_component_adapter_factory_initialize): Allocate the details.
	(athena_component_adapter_factory_create_adapter): Return the
	actual adapted view, not CORBA_OOBJECT_BIL (hello?).

	* src/athena-main.c (main): Add "ORBit" log domain to ones that
	stop in the debugger.
	
2000-09-17  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 2319, "Find" and "Web Search" shouldn't have the same icon.  Fixed by
	adding a search web icon in the default and eazel themes, and changing the
	toolbar code to properly fetch them using the theme routines.
	
	* icons/Makefile.am:
	* icons/SearchWeb.png:
	added web search icon done by Susan in the standard style
	
	* icons/eazel/Makefile.am:
	* icons/eazel/SearchWeb.png:
	added web search icon done by Susan in the eazel theme style
	
	* libathena-extensions/athena-theme.c:
	(athena_theme_get_image_path):
	made athena_theme_get_image_path optinally supply a ".png" suffix if the
	passed in target doesn't have one.
	* src/athena-window-toolbars.c: (set_up_button),
	(set_up_toolbar_images):
	use theme-based image fetching when setting up the toolbar images
	
2000-09-17  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: remove auto-collapsing
	claenup the code. make it more readable (hopefully although
	I am less than hopeful).

2000-09-16  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2450, We don't detect zip drives, etc.

	I added all filesystem types listed in man fstab and
	others that I found by reading various linux articles.
	There may be even more!  We can test these for now.
	
	* libathena-extensions/athena-volume-monitor.c:
	(athena_volume_monitor_volume_is_removable),
	(mount_volume_generic_set_state), (mount_volume_set_state),
	(mount_volume_activate_generic), (mount_volume_activate),
	(mount_volume_udf_add), (mount_volume_vfat_add),
	(mount_volume_msdos_add), (mount_volume_iso9660_add),
	(mount_volume_affs_add), (mount_volume_fat_add),
	(mount_volume_hpfs_add), (mount_volume_minix_add),
	(mount_volume_nfs_add), (mount_volume_proc_add),
	(mount_volume_smb_add), (mount_volume_unsdos_add),
	(mount_volume_xenix_add), (mount_volume_xiafs_add),
	(mnttab_add_mount_volume), (mntent_add_mount_volume):
	* libathena-extensions/athena-volume-monitor.h:

2000-09-16  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_name_for_regular_file):
	fixed problem that yakk told me about, where all the webdav files
	were getting the "www" icon; fixed by explicitly checking for the
	mime-type.
	
2000-09-16  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/toc-elements.c:
        * components/help/converters/gnome-db2html2/sect-preparse.c:
        * components/help/converters/gnome-db2html2/sect-elements.c:
        * components/help/converters/gnome-db2html2/gdb3html.h:
        Apply patch submitted by John Fleck (jfleck@inkstain.net) for preface
        tag support

        * components/help/converters/gnome-db2html2/sect-elements.c:
        * components/help/converters/gnome-db2html2/toc-elements.c:
        (toc_title_start_element),
        (toc_title_end_element),
        (toc_title_characters),
        (sect_title_characters),
        (sect_title_start_element),
        (sect_title_end_element): Make these functions ignore the <important>
        tag. Fixes bug #2907

        * components/help/converters/gnome-db2html2/toc-elements.c:
        * components/help/converters/gnome-db2html2/gdb3html.c:
        * components/help/converters/gnome-db2html2/sect-elements.c:
        Change 'help:' URI's to 'gnome-help:' URIs (for better compliance to
        the RFC)

2000-09-16  Maciej Stachowiak  <mjs@eazel.com>

	More work towards 1994:

	* components/adapter/athena-adapter-factory-server.h,
	components/adapter/athena-adapter-factory-server.c:
	(athena_adapter_factory_server_initialize,
	athena_adapter_factory_server_destroy): minor cleanups
	(impl_Athena_ComponentAdapterFactory_create_adapter): Actually
	create some objects.
	(adapter_object_destroyed): Watch for object destruction, for
	factory lifecycle management purposes.

	* components/adapter/athena-adapter.h,
	components/adapter/athena-adapter.c: Initial implementation of
	class that does the actual adapting. For now, it only handles
	Embeddables that take input via PersistStream. Later I will apply
	the Strategy pattern to virtualize visual embedding (Control
	vs. Embeddable) and loading (PersistStream vs. PersistFile
	vs. ProgressiveDataSink) (and fix some missing bits in the
	embedding virtualization).

	* components/adapter/Makefile.am: Build the new files.
	
2000-09-16  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/eazel-protocol-handler/eazel-protocol-module.cpp:
	* components/mozilla/mozilla-components.cpp:
	* components/mozilla/mozilla-preferences.cpp:
	Ok dumbass, you need to make this thing work with the old stuff too.
	
2000-09-16  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/eazel-protocol-handler/eazel-protocol-module.cpp:
	* components/mozilla/mozilla-components.cpp:
	* components/mozilla/mozilla-preferences.cpp:
	Update for latest round of mozilla M18 changes.  Also removed an
	extra module registration entry I "accidentally" left in before.
	
2000-09-15  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-file-utilities.c:
	(athena_make_uri_from_input):
	fixed bug 2204, ~ shortcut for home directory doesn't work
	in location bar, by expanding '~' and '~user' in make_uri_from_input
	* src/athena-location-bar.c: (try_to_expand_path):
	made the expand code handle '~' properly
	
2000-09-15  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_redirect_parse_xml), (trilobite_redirect_fetch_table):
	* components/services/trilobite/libtrilobite/trilobite-redirect.h:

	Make redirection XML parser in line with what services will
	provide.  Add extra API hook for Shane to cover the case where
	you've already downloaded the XML file and just want it to be
	parsed.
	
2000-09-15  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_download_packages),
	(eazel_install_do_install_packages):

	Fix bug in RPM glue that would case a failed download to get
	glossed over instead of aborting right then.  (Very annoying to
	download 500M of stuff and then find out that one of the first
	downloads silently failed.)
	
	* athena-installer/src/installer.c: (eazel_install_progress),
	(eazel_download_progress), (get_detailed_errors_foreach),
	(get_detailed_errors), (install_failed), (download_failed),
	(eazel_install_preflight), (eazel_install_dep_check),
	(check_system), (eazel_installer_do_install),
	(eazel_installer_finalize):
	* athena-installer/src/installer.h:

	Clean up installer: Fix a few crashes and make error-reporting
	more robust.  Add annoying calls to gtk_main_iteration() to make
	it update the screen.

2000-09-15  Arlo Rose  <arlo@eazel.com>

	* icons/eazel/Up.png:
	Fixed to not spew the whit epoint warning on startup.


2000-09-15  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2194, no scrollbars in image view
	Fixed bug 2215, image viewer needs to erase background
	when loading image.

	I fixed these bugs by writing a new image component.  Is this bad?
	I don't know.  What is bad is the current state of the EOG bonobo
	component.  I don't think it is worth our time to fix it right now.
	This component will also support the zoomable interface when
	Maciej finishes the work there. It is doubtful the EOG bonobo
	component would have a Athena specific dependency.
	
	* components/Makefile.am:
	* components/image-viewer/.cvsignore:
	* components/image-viewer/Makefile.am:
	* components/image-viewer/io-png.c: (png_write_data_fn),
	(png_flush_fn), (image_save):
	* components/image-viewer/io-png.h:
	* components/image-viewer/athena-image-view.c:
	(release_pixbuf_cb), (release_pixbuf), (bod_destroy_cb),
	(get_pixbuf), (render_pixbuf), (redraw_view), (configure_size),
	(resize_all_cb), (view_update), (save_image_to_stream),
	(load_image_from_stream), (destroy_view),
	(zoomable_zoom_in_callback), (zoomable_zoom_out_callback),
	(zoomable_set_zoom_level_callback),
	(zoomable_zoom_to_fit_callback), (drawing_area_exposed),
	(view_size_allocate_cb), (scrolled_view_size_allocate_cb),
	(view_factory_common), (scaled_view_factory),
	(scrollable_view_factory), (bonobo_object_factory),
	(init_bonobo_image_generic_factory), (init_server_factory), (main):
	* components/image-viewer/athena-image-view.oafinfo:
	* configure.in:

	New files and functions.

2000-09-15  Mathieu Lacage  <mathieu@eazel.com>

	fix bug 2874
	* components/tree/athena-tree-view.c: remove color/background/emblem 
	dnd from the tree view.
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_marshal_NONE__INT_POINTER_INT_INT_UINT): add function
	* libathena-extensions/athena-gtk-extensions.h: add prototype.
	* libathena-extensions/athena-list.c:
	(athena_list_initialize_class), (athena_list_get_drop_action),
	(athena_list_receive_dropped_icons),
	(athena_list_receive_dropped_keyword),
	(athena_list_drag_data_received): add support for keywords by
	changing the handle_dropped_icons event to handle_dropped_items
	* libathena-extensions/athena-list.h: change signal prototype.
	* src/file-manager/fm-list-view.c: (fm_list_receive_dropped_icons),
	(fm_list_receive_dropped_keyword), (fm_list_handle_dropped_items),
	(set_up_list): make it use the right signal and suppport both icon and 
	keyword drops.

2000-09-15  Arlo Rose  <arlo@eazel.com>

	* icons/knob.png:
	Put in a different knob.

2000-09-15  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1563 (Optionally hide ~-suffix files created by emacs)
	Fixed bug 2274 (Implement Empty Trash confirmation preference)

	* libathena-extensions/athena-global-preferences.h:
	define ATHENA_PREFERENCES_CONFIRM_TRASH and 
	ATHENA_PREFERENCES_SHOW_BACKUP_FILES.
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_create_dialog): Put these two new preferences
	on the Directory Views page; rename it Folder Views.
	(global_preferences_register): Register default values for new
	preferences.
	* libathena-extensions/athena-preferences-dialog.c:
	Increase initial height of window to account for new preferences.
	There's an open bug about reorganizing the whole window for later.

	* libathena-extensions/athena-file-operations.c:
	(confirm_empty_trash): Don't confirm if preference says not to.
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize), (fm_directory_view_destroy):
	Add & remove callbacks to monitor these two new preferences. 
	(queue_pending_files): Take SHOW_BACKUP_FILES preference into
	account.
	(file_name_from_uri): New helper routine to save a little code
	duplication.
	(fm_directory_view_confirm_deletion): Use yes_no dialog instead
	of simple dialog to match other usage; improve dialog title.
	(confirm_delete_from_trash): New function, confirms deleting
	items from trash unless preference says not to bother.
	(fm_directory_view_trash_or_delete_files): Call 
	confirm_delete_from_trash before deleting items from trash.
	(compute_menu_item_info): Do or don't add ellipses to "Empty Trash"
	and "Delete From Trash" depending on preference setting.
	(schedule_update_menus_callback): New function, simple wrapper for
	schedule_update_menus (called when CONFIRM_TRASH preference changes).
	(filtering_changed_callback): Renamed and slightly generalized from
	show_hidden_files_changed_callback, called when either the
	SHOW_HIDDEN_FILES or SHOW_BACKUP_FILES preference changes.

2000-09-15  Eli Goldberg  <eli@eazel.com>

	* docs/smoketests.html: Added a few steps to include breakages last week.

2000-09-15  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: removed dependencie on eog because
	athena doesn't actually depend on it, but this will
	make the install not install eog onto someones system.

2000-09-15  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/athena-view/athena-service-instal
	l-view.c:
	* components/services/login/athena-view/athena-login-view.c:
	* components/services/summary/lib/eazel-summary-shared.c:
	(services_data_new), (update_news_data_new), (parse_a_service),
	(parse_a_update_news_item):
	* components/services/summary/lib/eazel-summary-shared.h:
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_startup_form), (generate_summary_form),
	(generate_service_entry_row), (generate_update_news_entry_row),
	(goto_service_cb), (goto_update_cb):

	Fixed Bug # 2630, 3054, and most of 2632 and 3051.  You probably
	will get a blank summary view now since the xml file lives on my
	local apache.  I will point it to the server generated one on
	Monday.

2000-09-15  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2362 (Selecting "Add Bookmark" while loading a web
	page can crash)

	* src/athena-window-menus.c:
	(athena_window_add_bookmark_for_current_location): Removed
	incorrect assert comparing window->location and 
	window->current_location_bookmark. These can be out of synch
	here due to the evils of the state machine, but this function
	will be OK. Also, removed logic preventing adding multiple
	bookmarks for the same location, since it (A) doesn't match the
	behavior of other browsers; (B) might be annoying if you want
	to add several identical bookmarks and then hand-tweak them in
	the Edit Bookmarks window; (C) might be confusing if you don't
	notice the existing bookmark in the menu; and (D) won't make 
	sense when we fully support hierarchical bookmarks.

	* src/athena-window-manage-views.c:
	(check_last_bookmark_location_matches_window):
	Updated the comments on this debugging function, and changed
	its behavior from g_warning to g_error since the only known
	reasons for it complaining have recently been fixed.

2000-09-15  Darin Adler  <darin@eazel.com>

	Robin helped me fix up the spec. file. Take that, Tinderbox!
	
	* athena.spec.in: Removed athena-tree-view, top/*.xml, and
	icons/vector/*.png from the spec file.

2000-09-15  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-first-time-druid.c:
	(athena_first_time_druid_show):
	fixed bug 2782, druid_welcome.png needs to be redone for each locale,
	by removing the image and using our nice, shadowed aa text instead.
	
	* icons/Makefile.am:
	removed icons/druid_welcome.png image, since it's no longer used

2000-09-15  Darin Adler  <darin@eazel.com>

	Another try at fixing the Tinderbox.

	* po/POTFILES.in: Removed files that are not in Makefile.am,
	since they won't be in the tarball/RPM.
	
	* check-POTFILES.pl: Added a new script to check for files that
	are mentioned in POTFILES.in, but not in the Makefile.am files.
	* check-headers-in-Makefile.pl: Fixed to use SUBDIRS instead of
	looking for all Makefile.am files.
	
	* components/adapter/.cvsignore: Listed generated files.

2000-09-15  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1779 ("Customize Hacker Settings" doesn't match
	user level name)
	Fixed bug 2806 (User level names need to be localizable)
	Fixed bug 2838 (Settings message badly suited for translation)

	* libathena-extensions/athena-user-level-manager.h:
	* libathena-extensions/athena-user-level-manager.c:
	(user_level_manager_new), (user_level_manager_destroy),
	(user_level_set_default_if_needed),
	(athena_user_level_manager_set_user_level),
	(athena_user_level_manager_get_user_level),
	(athena_user_level_manager_get_user_level_name_for_display),
	(athena_user_level_manager_make_gconf_key),
	(user_level_manager_get_user_level_as_string): Split array of
	user level names & list that's made from it into two; one for
	gconf setting strings and one for user display. The user display
	one is marked for translation. Made "get_user_level_string"
	private since it had no callers and it's used only for the gconf
	manipulation (and it would have a confusing name if public).
	Changed _get_user_level_names to _get_user_level_name_for_display
	and made it return a single name rather than the whole set;
	that's how callers were using it anyway.
	
	* src/athena-first-time-druid.c:
	(make_hbox_user_level_radio_button), (set_up_user_level_page):
	Reworked to get user level names from user level manager rather
	than hardwiring them here.
	
	* src/athena-window-menus.c: (user_level_customize_callback),
	(add_user_level_menu_item), (athena_window_initialize_menus),
	(get_customize_user_level_string): Reworked to get user level
	names from user level manager rather than hardwiring them here.
	Also added some comments and tweaked the wording of the
	"Edit Beginner Settings" dialog at the suggestion of a localizer.

2000-09-15  John Sullivan  <sullivan@eazel.com>

	* libathena-extensions/athena-file-operations.c:
	(handle_xfer_vfs_error), (handle_xfer_overwrite),
	(athena_file_operations_copy_move),
	(athena_file_operations_move_to_trash): Tweaked a bunch
	of error message and dialog title wording.

2000-09-15  Maciej Stachowiak  <mjs@eazel.com>

	Some work towards 1994.
	
	* libathena-adapter/athena-adapter-factory.idl: Changed
	`object' argument to `component'.
	* configure.in: Generate Makefile for components/adapter
	directory.
	* components/Makefile.am: Add adapter subdir to build.

	* components/adapter/Makefile.am, components/adapter/main.c,
	components/adapter/athena-adapter-factory-server.c,
	components/adapter/athena-adapter-factory-server.h,
	components/adapter/athena-adapter.oafinfo: Skeleton for the
	adapter component.
	
2000-09-14  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-file-operations.c:
	(extract_string_until), (parse_previous_duplicate_name),
	(test_next_duplicate_name), (athena_self_check_file_operations):
	Make duplicate name generator tests localizable.
	Add tests for "foo (10000000000000000th copy)".
	Add more comments, tweak some names.

2000-09-14  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/lib/eazel-summary-shared.c:
	(services_data_new), (update_news_data_new), (parse_a_service),
	(parse_a_eazel_news_item), (parse_a_update_news_item),
	(parse_summary_xml_file):
	* components/services/summary/lib/eazel-summary-shared.h:
	* components/services/summary/athena-view/Makefile.am:
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_startup_form):

	xml parser now works right and downloads the file into memory. spews
	lots of debugging code right now but very close to being done.

2000-09-14  Mathieu Lacage  <mathieu@eazel.com>

	* libathena-extensions/athena-file.c: add necessary header to
	make athena compile with new gnome-vfs

2000-09-14  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package_by_id), (get_url_for_package),
	(get_search_url_for_package):
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_download_packages):
	* components/services/install/athena-view/athena-service-instal
	l-view.c: (athena_service_install_view_update_from_uri):

	Add support for package names of the type "id=NNN" where the id
	will refer to a specific RPM on the remote server.  Services wants
	this for the case when the user has clicked on a specific package.
	
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri):

	Fix bug in ghttp code that forgot to add a trailing null.
	
2000-09-14  Darin Adler  <darin@eazel.com>

	Fixed bug 3079 (Cannot copy or link files or folders with current
	build). This was just an || where there should be a &&.

	Also took another crack at making the tinderbox succeed.
	
	* libathena-extensions/athena-icon-dnd.c:
	(selection_includes_trash): Change || to &&. Oops.
	
	* athena.spec.in: Removed unused directories.
	* po/POTFILES.in: Removed unused files.

	* libathena-extensions/athena-drag.c:
	(athena_drag_drop_action_ask): Formatting tweak.

2000-09-14  Andy Hertzfeld  <andy@eazel.com>

	changed the default click policy from single click to double click as
	a result of our first wave of user testing
	
	* libathena-extensions/athena-global-preferences.c:
	(global_preferences_register):
	* libathena-extensions/athena-icon-canvas-item.c:
	(in_single_click_mode):
	* libathena-extensions/athena-icon-container.c:
	(button_press_event):
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_update_click_mode):
	* src/file-manager/fm-list-view.c:
	(fm_list_view_update_click_mode):

2000-09-14  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file-operations.c:
	(handle_xfer_vfs_error), (handle_xfer_overwrite),
	(athena_file_operations_copy_move),
	(athena_file_operations_move_to_trash): Fix wording and make it
	a little easier to translate some of these dialogs.  John said he
	will make a pass to make them even better, but I got rid of some
	of the egregious problems and added Athena: to all the titles.
	* libathena/athena-undo-transaction.c:
	(athena_undo_transaction_add_to_undo_manager): Tiny format
	tweak.
	* src/file-manager/fm-directory-view.c: Improved comment for
	localizers.

2000-09-14  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2373 (Select All Files scrolls to bottom)
	Fixed bug 2624 (clicking to select a partly-obscured icon
	auto-scrolls, but shouldn't)
	Fixed bug 2612 (Part of icon view drawn in black when
	right-clicking on icon causes scroll)

	The key was separating reveal_selection from set_selection,
	and only calling reveal_selection when switching/loading
	views.

	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_reveal_selection): New function, calls
	virtual function
	(fm_directory_view_initialize_class): initialize reveal_selection
	function to NULL, since it would be OK if a subclass did nothing.
	(display_pending_files): reveal selection after setting it in
	this case.
	* src/file-manager/fm-icon-view.c: 
	(fm_icon_view_reveal_selection): New function, extracted from 
	set_selection.
	(fm_icon_view_set_selection): Took out the reveal code.
	(fm_icon_view_initialize_class): Wire up reveal_selection.
	* src/file-manager/fm-list-view.c: 
	(fm_list_view_reveal_selection): New function, extracted from
	set_selection.
	(fm_list_view_set_selection): Took out the reveal code.
	(fm_list_view_initialize_class): Wire up reveal_selection.

2000-09-14  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: fix bug 2937.
	Tree view now autocollapses when you drag. Not a small 
	task...

2000-09-14  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_service_entry_row), (generate_eazel_news_entry_row),
	(generate_update_news_entry_row),
	(athena_summary_view_initialize):

	Fixing the background color on the startup form.

2000-09-14  Michael Engber  <engber@eazel.com>

	Cleaned up fixme's (bugs 2549, 2550, 2548) while
	working on a related background drawing bug.
	* libathena-extensions/athena-background-canvas-group.c:
	(athena_background_canvas_group_render):
	* libathena-extensions/athena-background.c:
	(athena_background_draw), (athena_background_draw_aa):

2000-09-14  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/doc/gconf.txt:
	* components/services/trilobite/libtrilobite/trilobite-redirect.c:
	(trilobite_redirect_fetch_table), (trilobite_redirect_lookup),
	(trilobite_get_services_address):
	* components/services/trilobite/libtrilobite/trilobite-redirect.h:

	Add documentation on gconf settings and add services-host setting
	so we can later change the default servier:port for Eazel
	services.  Fix API for downloading the redirection table.

2000-09-14  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-scalable-font.c:
	(athena_text_layout_new):
	Remove a brain fart of mine that was causing a serious memory leak
	everytime the icon layout was computed.

2000-09-14  Gene Z. Ragan  <gzr@eazel.com>

	Fixed a crashing bug in the preligting code.
	
	* libathena-extensions/athena-ctree.c: (athena_ctree_event):
	Check for 0 when getting selected row.
	
2000-09-14  John Sullivan  <sullivan@eazel.com>

	Fixed unreported bug where the built-in bookmarks never
	displayed the first time after visiting any directory, 
	and reversed sense of the preference to avoid problems
	with defaults not working for global preferences.

	* libathena-extensions/athena-global-preferences.h:
	Changed preference from ATHENA_PREFERENCES_SHOW_BUILT_IN_BOOKMARKS
	to ATHENA_PREFERENCES_HIDE_BUILT_IN_BOOKMARKS
	* src/athena-bookmarks-window.c: (create_bookmarks_window),
	(synch_built_in_bookmarks_preference_and_checkbox): Updated
	for reversed preference.
	* src/athena-window-private.h:
	* src/athena-window-menus.c: (append_bookmark_to_menu),
	(refresh_bookmarks_menu),
	(athena_window_initialize_bookmarks_menu),
	(athena_window_remove_bookmarks_menu_callback),
	(refresh_bookmarks_menu_idle_callback),
	(schedule_refresh_bookmarks_menu): Updated for reversed
	preference. Also, deleted refresh_dynamic_bookmarks, which
	was broken (removed but didn't replace built-in bookmarks),
	and renamed *dynamic_bookmarks* -> *bookmarks_menu* to parallel
	names for go_menu calls.

2000-09-14  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1984, Crash when closing a window after undo operation
	Fixed bug 2151, Segfault in undo manager during quit

	* libathena/athena-undo-transaction.c:
	(remove_transaction_from_atom_targets)
	New function that removes transaction list from target
	object and frees contents.
	
	(athena_undo_transaction_destroy),
	(athena_undo_transaction_undo):
	Call new function in these places.
	
2000-09-14  Darin Adler  <darin@eazel.com>

	Another cut at getting the tinderbox to be happy.
	
	* configure.in: Remove websearch directory.
	* athena.spec.in: Remove ntl-web-browser, ntl-web-search, and
	websearch directory pattern.
	* components/services/trilobite/sample/athena-view/Makefile.am:
	Fix typo (SUBDIR instead of SUBDIRS).
	
	* src/file-manager/fm-directory-view.c: (schedule_update_menus):
	Only schedule an update if the menus are already merged.
	Also made cosmetic changes.

2000-09-14  Josh Barrow  <linuxfan@ionet.net>

	* icons/Makefile.am:
	Oops!  Forgot to remove the Makefile.am reference to the
	tab files.

2000-09-14  Josh Barrow <linuxfan@ionet..net>

	* icons/tableft.png:
	* icons/tabright.png:

	Removed both of these files.  These files were from back
	in the day when Athena used those horrid white tabs.

2000-09-14  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3043 (clicking on broken symbolic link tries
	to execute it).

	Now clicking on it brings up a dialog telling the user
	about the missing target file and asking whether they
	want to throw the link away. Also, I changed the type
	string for link files to be "link to <whatever>" instead
	of just "<whatever>", and "link (broken)" for broken ones.

	* libathena-extensions/athena-file-attributes.h:
	define ATHENA_FILE_ATTRIBUTE_FILE_TYPE for callers
	interested in GnomeVFS's concept of file type.
	* libathena-extensions/athena-directory-async.c:
	(set_up_request_by_file_attributes): Get file_info if
	ATHENA_FILE_ATTRIBUTE_FILE_TYPE is requested.
	* libathena-extensions/athena-file.h,
	* libathena-extensions/athena-file.c:
	(type_as_string_considering_link): New function,
	converts target-type to link-type string if necessary.
	(athena_file_get_type_as_string): Deploy
	type_as_string_considering_link at each return location.
	(athena_file_is_broken_symbolic_link): New public function.
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_name_for_file): Added comment.
	* src/file-manager/fm-directory-view.c: 
	(fm_directory_view_trash_or_delete_files): Renamed from
	..._selection since it is passed the list of files.
	(trash_callback): Updated for name change.
	(report_broken_symbolic_link): New function, puts up dialog.
	(activate_callback): Calls report_broken_symbolic_link if
	appropriate.
	(fm_directory_view_activate_file): include 
	ATHENA_FILE_ATTRIBUTE_FILE_TYPE in list to pass to call_when_ready.

2000-09-14  Darin Adler  <darin@eazel.com>

	Some fixes to "make dist" to make the tinderbox happy.

	* components/rpmview/Makefile.am:
	* components/tree/Makefile.am:
	* libathena-extensions/Makefile.am:
	* src/Makefile.am:
	Added missing .h files.
	
	* src/file-manager/.cvsignore:
	Ignore some ancient generated files.
	
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_label_make_bold): Formatting tweak.
	(athena_gtk_widget_set_foreground_color): Don't set the base
	color when you set the foreground. The base is more like the
	background color.
	* libathena-extensions/athena-volume-monitor.c:
	(mnttab_add_mount_volume): Formatting tweak.

2000-09-14  Darin Adler  <darin@eazel.com>

	To get started on a bug, I dismantled part of the state machine,
	which we can replace with something much simpler. Just doing this
	change seems to have fixed the bug I was going to tackle.

	Fixes bug 2170 (hitting the "up" button a lot of times in a row
	causes crash).

	* libathena-extensions/athena-file-utilities.c:
	(athena_self_check_file_utilities): Quick tweak to these tests.
	We need more thorough tests of athena_make_uri_from_input.
	
	* libathena-extensions/athena-search-bar-criterion-private.h:
	Removed this long-obsolete file. There's another copy in the src
	directory that's the "real" one.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy): Fixed a problem I was seeing
	switching out of the list view by emptying the "pending" lists so
	doing the stop as part of destroy will not add items to the view
	before destroying it.
	
	* src/athena-window-manage-views.c:
	(athena_window_free_load_info): Got rid of "action_tag",
	"made_changes", and "state".
	(athena_window_update_state): Turned "made_changes" into a local
	variable. Got rid of code setting "state" since nothing looked at
	it. Got rid of code that sets up an idle.
	(athena_window_set_state_info): Eliminated "do_sync" and made
	the function always keep running update_state until it's done
	instead of using an idle.
	(athena_window_end_location_change_callback): Got rid of FIXME
	since I now understand why gtk_object_destroy is OK for windows.
	
	* src/athena-window.h: Eliminated "action_tag", "made_changes",
	and "state".
	
	* src/athena-window.c: (athena_window_destroy): No need to
	deal with "action_tag" any more.
	(window_update_sidebar_panels_from_preferences): Remove excess
	unref that's not needed now that we have more careful handling of
	sidebar references.

2000-09-14  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3072 (crash right-clicking in icon view background)

	* src/file-manager/fm-icon-view.c: (compute_menu_item_info):
	Fixed mistake in assert. *return_name != NULL should have
	been return_name != NULL. This caused an intermittent assertion
	failure (reproducible for some people).

2000-09-14  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3071 (zoom control right-click menu doesn't work)

	The recent change from doubles to floats broke this, because
	some function pointers had been cast to gpointer so that the
	compiler didn't notice that they were casting CORBA_float to 
	CORBA_double.

	* libathena/athena-zoomable.c:
	(impl_Athena_Zoomable__get_zoom_level),
	(impl_Athena_Zoomable__set_zoom_level),
	(impl_Athena_Zoomable__get_min_zoom_level),
	(impl_Athena_Zoomable__get_max_zoom_level),
	(impl_Athena_Zoomable__get_is_continuous),
	(impl_Athena_Zoomable__get_preferred_zoom_level_list),
	(impl_Athena_Zoomable_zoom_in),
	(impl_Athena_Zoomable_zoom_out),
	(impl_Athena_Zoomable_zoom_to_fit),
	(impl_Athena_Zoomable__destroy):
	Removed (gpointer) function casts by passing parameters
	of the required type and casting them inside each function.
	Then changed CORBA_double to CORBA_float wherever it was
	used.
	
	* src/athena-zoom-control.c: (create_zoom_menu_item):
	Changed menu items in zoom control popup to use the
	"always show toggle" style like all of our other
	toggleable menu items.

2000-09-14  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-file-operations.c:
	(extract_string_until), (parse_previous_duplicate_name),
	(make_next_duplicate_name), (get_duplicate_name),
	(get_next_duplicate_name), (handle_xfer_duplicate),
	Add new smart duplicate name generator.
	Fixes bugzilla 2592, 2363, 2701.

	* libathena-extensions/athena-file-operations.c:
	(athena_self_check_file_operations),
	(test_next_duplicate_name):
	* libathena-extensions/athena-lib-self-check-functions.h:
	Add a test rig for the new code.

2000-09-14 Seth Nickell  <seth@eazel.com>
	
	* libathena-extensions/athena-volume-monitor.c:
	(mnttab_add_mount_volume):
	Fixed minor compile problem on Solaris dealing with
	mount table structure names.

2000-09-14  J Shane Culpepper  <pepper@eazel.com>

	* components/services/Makefile.am:
	* components/services/inventory/athena-view/athena-inventory-vi
	ew.c: (generate_inventory_form), (make_http_post_request),
	(go_to_uri):
	* components/services/startup/.cvsignore:
	* components/services/startup/Makefile.am:
	* components/services/startup/command-line/.cvsignore:
	* components/services/startup/command-line/Makefile.am:
	* components/services/startup/athena-view/.cvsignore:
	* components/services/startup/athena-view/Makefile.am:
	* components/services/startup/athena-view/main.c:
	* components/services/startup/athena-view/athena-service-startu
	p-view.c:
	* components/services/startup/athena-view/athena-service-startu
	p-view.h:
	* components/services/startup/athena-view/athena-service-startu
	p-view.oafinfo:
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_startup_form), (generate_startup_form_logo),
	(generate_summary_form), (athena_summary_view_load_uri):
	* components/services/summary/athena-view/athena-summary-view.o
	afinfo:
	* configure.in:

	Merging startup and summary into a single view. Deleted the original
	startup view.  Removed inventory view from daily builds since it is
	going to be moved out of the athena module.
	Removed some invalid FIXMEs from inventory since it will be completely
	rewritten.

2000-09-13  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_update_news_entry_row):

	More ui tweaks before the big startup / summary merge.

2000-09-13  Robey Pointer  <robey@eazel.com>

	* components/rpmview/athena-rpm-view-install.c:
	(athena_rpm_view_download_progress_signal),
	(athena_rpm_view_install_progress_signal),
	(athena_rpm_view_download_failed), (get_detailed_errors_foreach),
	(get_detailed_errors), (athena_rpm_view_install_failed),
	(athena_rpm_view_uninstall_failed), (preflight_check),
	(athena_rpm_view_install_package_callback),
	(athena_rpm_view_uninstall_package_callback):
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_update_from_uri):
	* components/services/install/athena-view/athena-service-instal
	l-view.c: (dig_up_errors):

	Fix annoying fprintf's to debug messages.  Fix error message
	assembly on failed install/uninstall.  Catch new signals from the
	install library.  Turn on the verify button after an install.
	Sync up install error messages between RPM view and the install
	service a little bit.
	
2000-09-14  Josh Barrow  <linuxfan@ionet.net>

	* configure.in:
	Remove the check for gtkhtml, as it isn't build any more.

2000-09-13  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_uninstall_failed):
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_monitor_rpm_propcess_pipe):

	Fix copy-and-paste error where the uninstall_failed callback was
	actually triggering the install_failed signal.  Make sure a failed
	uninstall or revert actually return a fail condition.  Clean up
	possible warning debug messages (read from rpm pipe).
	
Wed Sep 13 22:06:55 2000  George Lebl <jirka@5z.com>

	* libathena-extensions/athena-druid.c
	  (athena_druid_size_request):  After some investigation found that
	  fixme (#2553) was complete bollocks, so I removed it.

	* libathena-extensions/athena-file.c (athena_file_get_uri):
	  Apparently my current alpha compiler (egcs 1.1.2) is now more
	  sensitive to uninitialized vars.  This one is harmless, since there
	  was a g_assert_not_reached for the case where it's uninited.

	* libathena-extensions/athena-scalable-font.c (invert_glyph),
	  librsvg/test-ft-gtk.c (invert_glyph):
	  YAIKES! casting to to (int) to get artithmetic.  Changed to (long)
	  but that's still Wrong(tm)

	* src/file-manager/fm-desktop-icon-view.c (get_sort_category):
	  remove the "char *link_type", as it wasn't ever used, it was
	  only freed thus causing havoc

2000-09-13  Josh Barrow  <linuxfan@ionet.net>

	* icons/Makefile.am:
	* icons/theme_preview.png:

	Added a theme_preview.png for the default theme.  Thanks
	to Kenneth Christiansen <kenneth@gnu.org> for this.  

2000-09-13  Rebecca Schulman  <rebecka@eazel.com>
	Fixed bug 2977, to remove anti-aliased text from the
	emblem menu

	* libathena-extensions/athena-customization-data.c:
	(athena_customization_data_new),
	(athena_customization_data_get_next_element_for_display):
	* libathena-extensions/athena-customization-data.h:
	Added additional value to customization data to return the
	correct label type depending on whether or not antialiased
	text and truncation were appropriate
	* src/athena-complex-search-bar.c:
	(load_find_them_pixmap_widget):
	indenting fix
	* src/athena-property-browser.c:
	(make_properties_from_directories):
	add parameter to customization data call
	
	* src/athena-search-bar-criterion.c: (get_emblem_location_for),
	(make_emblem_value_menu):
	Removed a bug that double freed an emblem value menu name

2000-09-13  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-theme.c:
	(athena_theme_make_selector):
	fixed bug 2962, default theme doesn't use custom preview icon, by
	special-casing the default theme, which doesn't have it's own
	directory.
	
2000-09-13  Gene Z. Ragan  <gzr@eazel.com>

	Fixed a glitch with prelighting and mousedown.
		
	* libathena-extensions/athena-ctree.c: (athena_ctree_event),
	(athena_ctree_button_press), (athena_ctree_draw_expander),
	(row_new):

	* components/tree/athena-tree-view.c:
	Set the state of the in_hotspot flag on 
	button press and release.

2000-09-13  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-program-choosing.c:
	(athena_launch_application_from_command):
	Add one last missing change for my previous bug fix.

2000-09-13  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1595, Tree view collapsing triangle does not
	track mouse.

	* libathena-extensions/athena-ctree.c: (athena_ctree_event),
	(athena_ctree_draw_expander):

2000-09-13  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3039 (Clicking in edited file name exits rename mode)

	* libathena-extensions/athena-icon-container.c:
	(button_press_event): Moved the grab_focus call until after
	the inherited call, and only do it if not in renaming mode.

2000-09-13  Darin Adler  <darin@eazel.com>

	Fixed bug 1462 (File names containing spaces don't launch right)
	and bug 2404 (Help uri needs to be escaped properly) by adding a
	function to quote for strings for shell. I chose a name an an
	implementation that matches the function that will be added to
	glib 2.0 for this purpose.

	* libathena-extensions/athena-glib-extensions.h:
	* libathena-extensions/athena-glib-extensions.c:
	(athena_shell_quote), (athena_self_check_glib_extensions):
	Add a shell_quote function and tests for it.

	* components/help/help-method.c: (help_uri_to_string): Call the
	new athena_shell_quote function.
	* libathena-extensions/athena-program-choosing.h:
	* libathena-extensions/athena-program-choosing.c:
	(athena_launch_application_parented): Use a URI by default, and
	a path only for applications that can't use URIs.
	(athena_launch_application_from_command): Quote the parameter
	for the shell with the new athena_shell_quote function.

2000-09-13  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (generate_service_entry_row):

	Quick snapshot of what I have done so that I can pick changes that
	fixed athena breakage.

2000-09-13  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-sidebar-tabs.c: (draw_tab_piece_aa):
	fixed bug 2983, sidebar tabs don't handle missing images well, by
	checking for a null pixbuf in draw_tab_piece_aa.
	
2000-09-13  Darin Adler  <darin@eazel.com>

	Fixed uninitialized variable problems found by compiling with -O
	on. Thanks to Michael Meeks for pointing these out.
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text_aa): Added some otherwise-gratuitous
	code that will make the uninitialized-variable warning quiet down.
	* libathena-extensions/athena-volume-monitor.c:
	(athena_volume_monitor_mount_unmount_removable): Added some
	otherwise-gratuitous code that will make the
	uninitialized-variable warning quiet down.
	* src/file-manager/fm-icon-view.c: (insert_one_context_menu_item):
	Initialize a variable even in the "not reached" case.
	* src/athena-switchable-search-bar.c: (real_activate): Moved the
	default "not reached" case so that when asserts are off we don't
	have an uninitialized variable bug.

2000-09-13  Darin Adler  <darin@eazel.com>

	Fixed the ref. count problem that was causing crash on startup
	with sidebar panels on. Sorry, I was a bit careless with my
	earlier check-in.

	* src/athena-window.c: (athena_window_add_sidebar_panel),
	(athena_window_remove_sidebar_panel): Keep a reference to a sidebar
	panel as long as it's in the sidebar panel list.
	(window_update_sidebar_panels_from_preferences): Got rid of an extra
	ref in this code that's no longer needed.

	* src/athena-window-manage-views.c:
	(athena_window_has_really_changed): Turned sidebars back on.
	(report_sidebar_panel_failure_to_user): Added _() around some strings
	that require translation.
	(athena_window_update_state): Used athena_gtk_object_list_free to
	save some code.

	* libathena-extensions/athena-file.c:
	(get_id_from_digit_string): Made this function simpler by using
	a local variable instead of g_new.
	
	* libathena-extensions/athena-glib-extensions.h:
	* libathena-extensions/athena-glib-extensions.c:
	(athena_setenv), (athena_unsetenv): Renamed to get rid of the
	gratuitous g prefix. Also fixed some comments to be more accurate.
	Added a prototype for a shell escape function -- haven't written
	the function yet, but I will shortly.
	
	* src/athena-first-time-druid.c:
	(next_proxy_configuration_page_callback), (set_http_proxy),
	(attempt_http_proxy_autoconfigure): Take out some g_message calls
	and use the athena_setenv call by its new name.
	* src/athena-main.c: (main): Use athena_unsetenv by the new name.
	* src/athena-shell.c: (corba_restart): Use athena_setenv by
	the new name.
	
2000-09-13  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-zoom-control.c: (draw_number):
	fixed bug 2181, number in zoom control is left justified at first.
	Fixed by using the widget->allocation.width in the centering
	calculation, instead of the passed-in box width.
	
2000-09-13  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-window-manage-views.c:
	(athena_window_has_really_changed):
	Temporarily disabled sidebar panels so that Athena doesn't crash
	on startup. Darin or Maciej will need to do a real fix.

2000-09-13  Gene Z. Ragan  <gzr@eazel.com>

	More work on tree view UI issues.
	
	* libathena-extensions/athena-ctree.c:
	(athena_ctree_class_init), (athena_ctree_init),
	(athena_ctree_event), (athena_ctree_draw_expander),
	(athena_ctree_draw_node):
	* libathena-extensions/athena-ctree.h:

2000-09-13  Michael Engber  <engber@eazel.com>

	Added a fixme + misc cleanup while investigating
	bugs 3022 and 3038
	* libathena-extensions/athena-background.c:
	(athena_background_set_image_uri_no_emit),
	(athena_background_set_image_uri),
	(athena_background_receive_dropped_background_image):
	* libathena-extensions/athena-directory-background.c:
	(athena_directory_background_read_desktop_settings),
	(athena_directory_background_event_filter):

2000-09-13  Darin Adler  <darin@eazel.com>

	Fixed bug 2916 "Shouldn't be able to create new items in trash."

	* libathena-extensions/athena-file.c:
	(athena_file_is_in_trash): Made this return TRUE for the trash
	itself.

2000-09-13  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_get_string_attribute_with_default),
	(athena_file_get_top_left_text): Unmark strings that are
	unlikely candidates for localization at the request of one of the
	translators (menthos).
	
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text), (draw_or_measure_label_text_aa):
	Move line break characters into a separate string constant, in
	part to make the comment about why it's localizable appear in the
	pot file.
	
	* src/file-manager/fm-properties-window.c:
	(directory_contents_value_field_update): Unmark strings that are
	unlikely candidates for localization at the request of one of the
	translators (menthos).

2000-09-13  J Shane Culpepper  <pepper@eazel.com>

	* components/services/athena-dependent-shared/icons/Makefile.am:
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (generate_service_entry_row),
	(generate_eazel_news_entry_row), (generate_update_news_entry_row),
	(maintenance_button_cb):

	More work on the summary view xml voodoo.  Still a few more problems
	but getting close to complete.

2000-09-13  Darin Adler  <darin@eazel.com>

	Fixed bugs in Athena link management, some other minor problems
	I encountered along the way, and did the first cut at a state
	machine for AthenaViewFrame based on Maciej's design that can
	mostly replace the super-complicated one for AthenaWindow.

	* README: We no longer can use the ORBit that comes with HC1.2
	with cvs HEAD, since warnings have been fixed in the code
	generated by the newer ORBit, so fix that line in the README.
	
	* libathena-extensions/athena-directory.c:
	(athena_directory_new): Use the new athena_uri_is_trash
	function to avoid hard-coding incorrect checks for "trash:".
	(athena_directory_copy_move_metadata_key): Make simple fix for
	empty metadata. This code gets replaced soon anyway.
	* libathena-extensions/athena-drag.c:
	(athena_drag_can_accept_item): Simplify code to get rid of
	illegal sync. I/O. It's OK to assume all AthenaLink objects
	point to directories for now, and if we make a change to do
	something fancier later, we have to do it with async.
	(athena_drag_default_drop_action_for_icons): Use the new
	athena_uri_is_trash function to avoid hard-coding incorrect
	checks for "trash:".
	* libathena-extensions/athena-drag.h: Fixed a typo.
	* libathena-extensions/athena-file-operations.c:
	(get_link_name): Fix unintialized variable warning in a simple
	way that avoids adding too much code.
	(get_duplicate_name): Fix unintialized variable warning in a
	simple way that avoids adding too much code.
	(athena_file_operations_copy_move): Use the new
	athena_uri_is_trash function to avoid hard-coding incorrect
	checks for "trash:".

	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file-utilities.c:
	(athena_uri_is_trash): Add new function to avoid hard-coding
	incorrect checks for "trash:".
	(athena_make_uri_canonical), Use athena_uri_is_trash.

	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-container.c:
	Remove athena_icon_container_trash_link_is_in_selection for 3
	reasons. It doesn't belong in AthenaIconContainer, the use of it
	in drag code was incorrectly looking at the destination
	directory's selection, and it used sync. I/O.
	
	* libathena-extensions/athena-icon-dnd.c:
	(selection_includes_trash),
	(athena_icon_container_receive_dropped_icons):
	Changed code to actually check selection -- the old code would
	check the selection in the target window. Unfortunately this still
	uses sync. I/O, but that's now covered by bug 3020.
	
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file): Change to use new
	"local" API for links to make it clear that it uses sync. I/O and
	only works on local files.
	
	* libathena-extensions/athena-link.h:
	* libathena-extensions/athena-link.c: (get_tag),
	(get_link_type): Added functions to handle tags internally as part
	of getting rid of tag string values from the API.
	(athena_link_local_create): Changed name to local to emphasize this
	takes a path not a URI and uses sync. I/O.
	(local_set_root_property): Share code among the set
	functions. Before there were a lot of copies of the same
	code. Also made sure that it does no rewrite of the file if called
	to set a property to the same value it already has.
	(athena_link_local_set_icon),
	(athena_link_local_set_link_uri),
	(athena_link_local_set_type): Changed name to local to emphasize
	these take a path not a URI and use sync. I/O.  Reimplement by
	calling local_set_root_property.
	(athena_link_local_get_additional_text): Change name to local
	and make it take a path instead of a URI to make it clear it uses
	sync.  I/O and doesn't work on remote URIs.
	(athena_link_local_get_image_uri): Change name to local and make
	it take a path instead of a URI to make it clear it uses sync.
	I/O and doesn't work on remote URIs.
	(athena_link_local_get_link_uri): Change name to local and make
	it take a path instead of a URI to make it clear it uses sync.
	I/O and doesn't work on remote URIs.
	(athena_link_local_get_link_type): Change return value to be the
	AthenaLinkType enum instead of the type tag string to make the
	interface cleaner. Also changed name to local to make it clear
	that it takes a path instead of a URI and uses sync. I/O.
	(athena_link_local_is_volume_link),
	(athena_link_local_is_home_link),
	(athena_link_local_is_trash_link): Changed all three of these to
	take advantage of the new simpler get_link_type, and changed name
	to local to make it clear that they take a path instead of a URI
	and use sync. I/O.
	
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link):
	Use call by new "local" name.
	(trash_link_is_selection): Call new "local" function, which now
	requires a path rather than a URI.
	(fm_desktop_icon_view_trash_state_changed_callback): Use call by
	new "local" name.
	(volume_unmounted_callback): Fix bug where the unmounted callback
	was using a path as a URI without converting.
	(find_and_update_home_link): Use call by new "local" name.
	(place_home_directory): Use call by new "local" name.
	(find_and_rename_trash_link): Use call by new "local" name.
	(create_or_rename_trash): Use call by new "local" name.
	(remove_old_mount_links): Use call by new "local" name.
	(get_sort_category): Use new get_link_type call and a case
	statement instead of the old one and a list of string compares.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_trash_link_in_selection): Wrote a new version of
	this function. This is similar to what was in
	AthenaIconContainer, but the one in there didn't belong there,
	and didn't really work for other callers. Also, the one in there
	didn't work at all for the list view case. This new function works
	for either icon or list view. It still has the limitation that it
	won't recognize a trash link if it's not local.
	
	* src/file-manager/fm-icon-view.c:
	(get_icon_drop_target_uri_callback): Fix to use new local calls, but
	still does sync. I/O. Bug 3020 reported about that.
	(get_icon_text_callback): Changed to use new local calls. Still a
	problem that it works only locally and uses sync. I/O. Bug 2531 was
	already reported about that.
	
	* src/file-manager/fm-properties-window.c:
	(get_and_ref_file_to_display): Changed to use new local calls and the
	simpler link type interface.
	
	* src/athena-view-frame-private.h: Moved some private
	declarations here since they are for objects used in one file and
	declared in another.
	
	* src/athena-view-frame.h:
	* src/athena-view-frame.c: (athena_view_frame_destroy_client):
	Destroy the "check if view is gone" timeout here; makes more sense
	than the way it was managed before.
	(athena_view_frame_destroy): Don't destroy the timeout here any
	more. Also, label was moved into details.
	(athena_view_frame_handle_client_gone): Renamed from
	handle_client_destroy_2.
	(view_frame_wait), (view_frame_underway),
	(view_frame_wait_is_over), (view_frame_loaded),
	(view_frame_failed): Added functions to implement view frame state
	machine transitions.
	(check_if_view_is_gone): Moved code to check if view is gone here;
	it's now activated automatically without requiring an explicit
	call to turn it on, since all callers were turning it on at
	load_client time.
	(athena_view_frame_load_client): Add state management. Moved the
	code to turn on the object check timeout here.
	(athena_view_frame_load_location): Add state management.
	(athena_view_frame_open_location): Add state management.
	(athena_view_frame_open_location_in_new_window): Add state management.
	(athena_view_frame_open_in_new_window_and_select): Add state management.
	(athena_view_frame_report_location_change): Add state management.
	(athena_view_frame_report_selection_change): Add state management.
	(athena_view_frame_report_status): Add state management.
	(athena_view_frame_report_load_underway): Add state management.
	(athena_view_frame_report_load_progress): Add state management.
	(athena_view_frame_report_load_complete): Add state management.
	(athena_view_frame_report_load_failed): Add state management.
	(athena_view_frame_set_title): Add state management.
	(athena_view_frame_zoom_level_changed): Add state management.,
	(athena_view_frame_get_label), (athena_view_frame_set_label):
	Moved label into details structure.
	
	* src/athena-window-manage-views.c:
	(athena_window_load_sidebar_panel): Fixed code structure a bit
	(fixes bug 2463) and got rid of call to old
	athena_view_frame_set_active_errors function, which is no longer
	needed.
	(athena_window_load_content_view): Got rid of call to old
	athena_view_frame_set_active_errors function, which is no longer
	needed.
	* src/athena-window.c:
	(window_update_sidebar_panels_from_preferences): Got rid of call
	to old athena_view_frame_set_active_errors function, which is no
	longer needed.

2000-09-13  Pavel Cisler <pavel@eazel.com>

	* libathena-extensions/athena-file-operations.c:
	(icon_position_iterator_new):
	Remove an extra unescape call that worked around an escaping
	bug in the copy engine. This bug is now fixed in Gnome VFS
	and the workaround is not needed any more.

2000-09-12  Robey Pointer  <robey@eazel.com>

	* components/rpmview/athena-rpm-view-install.c:
	(athena_rpm_view_finished_working),
	(athena_rpm_view_install_done), (athena_service_need_password),
	(athena_service_try_again),
	(athena_rpm_view_install_package_callback),
	(athena_rpm_view_uninstall_package_callback):
	* components/rpmview/athena-rpm-view-private.h:
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_destroy), (athena_rpm_view_update_from_uri):

	Move private fields to a shared header.  Make the password query
	dialog work just like the installer's (ability to abort, stop
	trying after 3 times, etc).  Grey out install/uninstall buttons
	while working.  Clean up resources to avoid coredumps or getting
	into a screwy state.

2000-09-12  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(load_thumbnail_frame), (athena_icon_factory_make_thumbnails):
	fixed bug 2567, thumbnail frame size hardwired, by fetching the
	frame offsets from the theme.
	* icons/default.xml:
	added thumbnail frame offsets for default frame to default theme

2000-09-12  John Sullivan  <sullivan@eazel.com>

	Fixed part of bug 1537 (double-clicking in single-click
	mode and open-in-new-window mode opens 2 windows).

	Modes suck. Anyway, this was two separate bugs, one in
	list view and one in icon view. I fixed the list view
	one. The icon view one is more complicated, because
	there was already code to handle this case but it doesn't 
	work right, and it isn't obvious how to fix it.
	
	* libathena-extensions/athena-list.c:
	(athena_list_button_press): Ignore 2nd click of
	double-click if in single-click mode.

2000-09-12  Michael Engber  <engber@eazel.com>

	Dragging a image onto a background not clears the
	background color setting. Bug 1899.
	* libathena-extensions/athena-background.c:
	(athena_background_set_image_uri),
	(athena_background_receive_dropped_background_image):
	* libathena-extensions/athena-directory-background.c:
	(saved_settings_changed_callback):

2000-09-12  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2020 (really long URIs make "can't go there"
	dialogs insanely wide)

	* src/athena-window-manage-views.c:
	(athena_window_end_location_change_callback): Use
	magic Ramiro truncating technology to display 
	middle-truncated URI if it's more than a certain number
	of characters wide.

2000-09-13  Ali Abdin  <aliabdin@aucegypt.edu>

	Fixed a few typos. Add in preliminary support for QUESTION/ANWSER tags
	First stab at getting book/chapter support in (Bug #2325) - It works
	as I want it to, but we may encounter bugs.

	This check-in is largely based on a patch by jfleck@inkstain.net (but
	I heavily modified it)

	* components/help/converters/gnome-db2html2/gdb3html.[ch]:
	Add question/answer/chapter tags to the list.
	(sect1_start_element): Renamed to 'sect1id_stack_add'
	New 'DocType' datatype (added to Context struct)
	(book_start_element): New function
	(article_start_element): Set the doctype. Fix to Eazel style.
		
	* components/help/converters/gnome-db2html2/sect-elements.[ch]:
	Fix a typo to make the computeroutput tag really work.
	Plug in the QUESTION/ANSWER/CHAPTER tags

	(sect_table_without_border_start_element): I thought I fixed this bug
	(forgot a '<')

	(sect_question_start_element): New function
	(sect_answer_start_element): ditto

	(sect_sect_start_element),
	(sect_sect_end_element),
	(sect_para_start_element),
	(sect_para_end_element),
	(sect_title_start_element),
	(sect_title_end_element),
	(sect_title_characters): Support for CHAPTER tag

	* components/help/converters/gnome-db2html2/toc-elements.c:
	There were a few typos here. Extended the table down all the way to
	CHAPTERS
	(toc_sect_end_element),
	(toc_title_start_element),
	(toc_title_end_element),
	(toc_title_characters),
	(toc_sect_start_element): Add support for chapter tag.

	* components/help/converters/gnome-db2html2/sect-preparse.c:
	Extend the table down all the way to CHAPTERS.

	(sect_preparse_sect_start_element): Add in support for chapter tags.
	Also update for function rename.
	(sect_preparse_title_characters): ditto

	(sect_preparse_set_doctype): Set the document type depending on the
	tag name

2000-09-12  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-location-bar.c: (accumulate_name),
	(try_to_expand_path):
	fixed bug where it couldn't expand uris containing blanks or other
	escaped characters, by calling gnome_vfs_unescape_string on the
	basename before using it for comparison.
	
2000-09-13  Mathieu Lacage  <mathieu@eazel.com>

	* src/file-manager/Makefile.am: fix build for strange prefix.
	add a MEDUSA_CFLAGS.

2000-09-12  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1649 (keyboard focus stays in location bar when
	you click in icon or list view)

	* libathena-extensions/athena-icon-container.c:
	(button_press_event): grab the focus
	
	* libathena-extensions/athena-list.c:
	(athena_list_button_press): grab the focus

2000-09-12  Gene Z. Ragan  <gzr@eazel.com>

	More work on bug 1595
	
	* libathena-extensions/athena-ctree.c:
	* libathena-extensions/athena-ctree.h:
	(athena_ctree_draw_expander),
	(tree_draw_node), (row_new), (athena_ctree_insert_node):
	More code to handle click and hold cases.
	
	(athena_ctree_draw_node)
	Created a public function to cause a tree node to be redrawn

	* components/tree/athena-tree-view.c:
	Replace gtk_widget_queue_redraw () with new 
	athena_ctree_draw_node ()

	Fixed logic so a mouse click and drag on expander and then
	out of the twisty hot spot properly resets expander to
	unclicked state.	
	
2000-09-12  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1305 (Selecting file with really long name makes
	window wider)

	* libathena-extensions/athena-any-width-bin.h:
	* libathena-extensions/athena-any-width-bin.c:
	(athena_any_width_bin_initialize_class),
	(athena_any_width_bin_initialize), (athena_any_width_bin_new),
	(athena_any_width_bin_size_request): New files, implementing
	new bin class that ignores its children's clamorous pleas for
	width but generously distributes any width it obtains to them.
	* libathena-extensions/Makefile.am: Add new files to build.
	
	* src/athena-window.c: 
	(install_status_bar): New function, installs status bar into
	a athena_any_width_bin. Now the status bar won't cause the
	window to resize no matter how long the text is.
	(athena_window_constructed): Call install_status_bar instead
	of gnome_app_set_statusbar.

2000-09-12  Mathieu Lacage  <mathieu@eazel.com>

	* src/athena-sidebar.c: (athena_sidebar_press_event):
	fix bug 2685. the fix is a 3 liner. evil gtk.

2000-09-12  Pavel Cisler <pavel@eazel.com>

	* src/athena-throbber.c: (athena_throbber_destroy),
	(athena_throbber_remove_update_callback),
	(athena_throbber_stop):
	Fix a bug in the throbber that I ran into -- the timeout callback was
	being called after the throbber got destroyed.

2000-09-12  John Sullivan  <sullivan@eazel.com>

	Fixed bug 884 (Long URI in Go menu doesn't get cut off)
	Fixed bug 2667 (Really long bookmark titles stretch bookmarks menu)

	* libathena-extensions/athena-gtk-extensions.h:
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_truncate_text_for_menu_item): New function,
	uses athena_str_middle_truncate to create a string
	that isn't ridiculously long.

	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_menu_item_new): Use new function to
	keep the menu items in the Back/Forward context menus
	from getting too wide.
	* src/athena-window-menus.c: (append_bookmark_to_menu):
	Use new function to keep the menu items in the Go and
	Bookmarks menus from getting too wide.

2000-09-12  Gene Z. Ragan  <gzr@eazel.com>

	Work in progress on making the expander UI in the tree view
	more responsive to the user.

	* libathena-extensions/Makefile.am:
	Added two new files to the build,
	athena-ctree.c
	athena-ctree.h

	I may subclass as I learn more about what needs to be 
	modified to add the functionality we need.
	
	* components/tree/athena-tree-view.c: (insert_hack_node),
	* components/tree/athena-tree-view.h:
	(remove_hack_node), (freeze_if_have_hack_node),
	(athena_tree_view_insert_model_node):
	Experimenting with the right way to add new feature.
	
	* libathena-extensions/athena-ctree.c: 
	* libathena-extensions/athena-ctree.h:
	(COLUMN_FROM_XPIXEL),
	(athena_ctree_get_type), (athena_ctree_class_init),
	(athena_ctree_set_arg), (athena_ctree_get_arg),
	(athena_ctree_init), (ctree_attach_styles),
	(ctree_detach_styles), (athena_ctree_realize),
	(athena_ctree_unrealize), (athena_ctree_button_press),
	(draw_drag_highlight), (draw_cell_pixmap), (get_cell_style),
	(athena_ctree_draw_expander), (athena_ctree_draw_lines),
	(draw_row), (tree_draw_node), (athena_ctree_last_visible),
	(athena_ctree_link), (athena_ctree_unlink), (real_row_move),
	(real_tree_move), (change_focus_row_expansion), (real_tree_expand),
	(real_tree_collapse), (column_auto_resize), (auto_resize_columns),
	(cell_size_request), (set_cell_contents), (set_node_info),
	(tree_delete), (tree_delete_row), (tree_update_level),
	(tree_select), (tree_unselect), (tree_expand), (tree_collapse),
	(tree_collapse_to_depth), (tree_toggle_expansion), (row_new),
	(row_delete), (real_select_row), (real_unselect_row),
	(real_tree_select), (real_tree_unselect), (select_row_recursive),
	(real_select_all), (real_unselect_all), (ctree_is_hot_spot),
	(athena_ctree_construct), (athena_ctree_new_with_titles),
	(athena_ctree_new), (real_insert_row),
	(athena_ctree_insert_node), (athena_ctree_insert_gnode),
	(athena_ctree_export_to_gnode), (real_remove_row),
	(athena_ctree_remove_node), (real_clear),
	(athena_ctree_post_recursive),
	(athena_ctree_post_recursive_to_depth),
	(athena_ctree_pre_recursive),
	(athena_ctree_pre_recursive_to_depth),
	(athena_ctree_is_viewable), (athena_ctree_last),
	(athena_ctree_find_node_ptr), (athena_ctree_node_nth),
	(athena_ctree_find), (athena_ctree_is_ancestor),
	(athena_ctree_find_by_row_data),
	(athena_ctree_find_all_by_row_data),
	(athena_ctree_find_by_row_data_custom),
	(athena_ctree_find_all_by_row_data_custom),
	(athena_ctree_is_hot_spot), (athena_ctree_move),
	(athena_ctree_expand), (athena_ctree_expand_recursive),
	(athena_ctree_expand_to_depth), (athena_ctree_collapse),
	(athena_ctree_collapse_recursive),
	(athena_ctree_collapse_to_depth),
	(athena_ctree_toggle_expansion),
	(athena_ctree_toggle_expansion_recursive),
	(athena_ctree_select), (athena_ctree_unselect),
	(athena_ctree_select_recursive),
	(athena_ctree_unselect_recursive),
	(athena_ctree_real_select_recursive),
	(athena_ctree_node_set_text), (athena_ctree_node_set_pixmap),
	(athena_ctree_node_set_pixtext), (athena_ctree_set_node_info),
	(athena_ctree_node_set_shift), (remove_grab),
	(athena_ctree_node_set_selectable),
	(athena_ctree_node_get_selectable),
	(athena_ctree_node_get_cell_type),
	(athena_ctree_node_get_text), (athena_ctree_node_get_pixmap),
	(athena_ctree_node_get_pixtext), (athena_ctree_get_node_info),
	(athena_ctree_node_set_cell_style),
	(athena_ctree_node_get_cell_style),
	(athena_ctree_node_set_row_style),
	(athena_ctree_node_get_row_style),
	(athena_ctree_node_set_foreground),
	(athena_ctree_node_set_background),
	(athena_ctree_node_set_row_data),
	(athena_ctree_node_set_row_data_full),
	(athena_ctree_node_get_row_data), (athena_ctree_node_moveto),
	(athena_ctree_node_is_visible), (athena_ctree_set_indent),
	(athena_ctree_set_spacing), (athena_ctree_set_show_stub),
	(athena_ctree_set_line_style), (tree_sort),
	(athena_ctree_sort_recursive), (real_sort_list),
	(athena_ctree_sort_node), (fake_unselect_all), (selection_find),
	(resync_selection), (real_undo_selection),
	(athena_ctree_set_drag_compare_func), (check_drag),
	(drag_dest_info_destroy), (drag_dest_cell),
	(athena_ctree_drag_begin), (athena_ctree_drag_motion),
	(athena_ctree_drag_data_received):
	New source files

2000-09-12  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2992, Should not be able to context drag
	Trash to link or duplicate
	
	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-icon-container.h:
	(athena_icon_container_trash_link_is_in_selection):
	Renamed function and pass in AthenaIconContainer
	that selection is retrieved from.
	
	* libathena-extensions/athena-icon-dnd.c:
	(athena_icon_container_receive_dropped_icons):
	Check and see if any special cases are in the
	selection.  For now, this is only the Trash link.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_trash_link_in_selection):
	Changed function internal to call
	athena_icon_container_trash_link_is_in_selection

2000-09-12  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2668 (Switching to Search mode should move the
	focus to the search text field).

	* src/athena-navigation-bar.h: Added signal and public
	function for athena_navigation_bar_activate.
	* src/athena-navigation-bar.c:
	(athena_navigation_bar_initialize_class): Wire up
	activate signal; default function is NULL.
	(athena_navigation_bar_activate): New function, emits
	signal.

	* src/athena-switchable-navigation-bar.h:
	* src/athena-switchable-navigation-bar.c:
	Defined a AthenaSwitchableNavigationBarDetails struct,
	and moved implementation details into it. Set the types
	of the fields in this struct to reflect actual needs,
	instead of using GtkWidget and casting up to other
	classes.
	(athena_switchable_navigation_bar_initialize): Create
	details struct.
	(athena_switchable_navigation_bar_destroy): New function,
	free details struct.
	(athena_switchable_navigation_bar_initialize_class):
	Wire up destroy handler.
	(athena_switchable_navigation_bar_set_mode): Call
	athena_navigation_bar_activate on switched-to bar.
	(athena_switchable_navigation_bar_get_mode),
	(athena_switchable_navigation_bar_get_location),
	(athena_switchable_navigation_bar_set_location): Updated
	to use bar->details.

	* src/athena-switchable-search-bar.c:
	(athena_switchable_search_bar_initialize_class):
	Wire up activate signal to real_activate.
	(real_activate): Call athena_navigation_bar_activate
	on the current search bar.

	* src/athena-simple-search-bar.c:
	(athena_simple_search_bar_initialize_class): Wire up
	activate signal to real_activate.
	(real_activate): Set focus to text field.

	* src/athena-complex-search-bar.c:
	(athena_complex_search_bar_initialize_class): Wire up
	activate signal to real_activate.
	(get_first_text_field): New helper function to find the
	first text field in a search criterion (or NULL).
	(real_activate): Set focus to first text field.

2000-09-11  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-directory-notify.h:
	* libathena-extensions/athena-directory.c:
	* libathena-extensions/athena-file-changes-queue.c:
	* libathena-extensions/athena-file-changes-queue.h:
	* libathena-extensions/athena-file-operations.c:
	(icon_position_iterator_new), (icon_position_iterator_free),
	(create_xfer_dialog), (handle_xfer_vfs_error), 
	(apply_one_position), (sync_xfer_callback),
	(athena_file_operations_copy_move),
	(athena_file_changes_queue_schedule_position_setting),
	(position_setting_list_free),
	(athena_directory_set_icon_position),
	(athena_directory_schedule_metadata_copy),
	(athena_directory_schedule_metadata_move),
	(athena_file_changes_consume_changes),
	(athena_directory_schedule_position_setting):

	Work in progress on saving drop locations during a copy/move operation.
	Add a new AthenaFileChangesQueue element type to handle scheduling
	of the position saving operation. Hook it up to a call that saves the
	icon position into the metadata.
	Add icon position handling to the synchronous copy engine callback.
	
	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-dnd.c:
	(handle_nonlocal_move):
	Pass relative icon positions (FIXME 626).
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_move_copy_items):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c: (icon_view_move_copy_items):
	Add drop location to relative icon positions to get correct icon drop
	placement.

	* libathena-extensions/athena-file-operations.c:
	(get_link_name), (get_duplicate_name), (handle_xfer_duplicate):
	Rework a bit, fix a leak (FIXME 2556).
	
	* libathena-extensions/athena-file-operations.c:
	(athena_file_operations_copy_move),
	Fix a leak.

	* libathena-extensions/athena-file-operations.c:
	(create_xfer_dialog):
	Fix a bug in dialog result handling code.

	* libathena-extensions/athena-drag.h:
	Some minor tweaks

2000-09-12  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-zoom-control.c: (draw_number):
	fixed bug 2979, numbers in zoom control need to prelight, too.
	
2000-09-12  Andy Hertzfeld  <andy@eazel.com>

	* components/music/athena-music-view.c: (determine_attribute):
	fixed bug 2160, don't display album title and artist for mixed
	directories in music view.
	
2000-09-11  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-text-item.c:
	(fetch_themed_color), (iti_paint_text):
	fixed bug 2568, hardwired colors in icon_text_item, by fetching
	them from the theme
	* libathena-extensions/athena-theme.c:
	(athena_theme_get_theme_data):
	made the theme machinery look in the default theme when it can't find
	a property in the current theme
	* icons/default.xml:
	defined default icon text colors

2000-09-11  Robey Pointer  <robey@eazel.com>

	* components/services/install/athena-view/athena-service-instal
	l-view.c: (dig_up_errors), (athena_service_install_failed):

	Show a detailed error message when an install fails for some
	non-trivial reason.

2000-09-11  Robey Pointer  <robey@eazel.com>

	* components/services/install/athena-view/athena-service-instal
	l-view.c: (athena_service_install_view_initialize),
	(reply_callback), (athena_service_install_preflight_check),
	(athena_service_install_download_failed),
	(athena_service_install_done), (athena_service_install_failed),
	(athena_service_install_delete_files),
	(athena_service_install_view_update_from_uri),
	(athena_service_install_view_load_uri),
	(service_install_load_location_callback),
	(service_install_stop_loading_callback):
	* components/services/install/athena-view/athena-service-instal
	l-view.h:

	Add dialog to ask for confirmation during preflight check (give
	the user one last chance to back out after downloading, before
	installing).  Add dialog to ask whether finished RPM files should
	be deleted.
	
2000-09-11  Seth Nickell  <seth@eazel.com>

	* helper-utilities/authenticate/athena-authenticate-pam.c:
	(pam_conversion_func), (athena_authenticate_authenticate):

	Fix function prototype problem with PAM on Linux.
	
	* libathena/athena-view-component.idl:
	Commented FIXMEs better.
	
2000-09-11  Eskil Heyn Olsen  <eskil@eazel.com>

	* athena-installer/src/installer.c: (install_failed):
	Fixme comment.

2000-09-11  Seth Nickell  <seth@eazel.com>

	* configure.in:
	Add checks to fix things on Solaris regarding mounting,
	environment variables, and fonts.

	Added tests for compiler warning flags that are not supported 
	with all versions of GCC.
	
	* helper-utilities/authenticate/athena-authenticate-pam.c:
	(pam_conversion_func):
	Remove "const" from system call for compatibility with Solaris.
	
	* libathena-extensions/athena-file.c:
	(get_id_from_digit_string):
	uid_t != int, so change functions converting from string to
	uid_t to deal with greater bit uids properly.

	* libathena-extensions/athena-glib-extensions.h:
	* libathena-extensions/athena-glib-extensions.c:
	(athena_g_setenv), (athena_g_unsetenv):
	Add system gnostic functions for setting and removing variables
	from the environment.
	
	* libathena-extensions/athena-scalable-font.c:
	(initialize_global_stuff_if_needed):
	Temporary fix to deal with the absence of "RedHat-style" font
	paths on Solaris and Debian whilst font paths are still
	hard-coded.
	
	* libathena-extensions/athena-volume-monitor.c:
	(athena_volume_monitor_get_volume_name),
	(athena_volume_monitor_volume_is_mounted),
	(mount_volumes_update_is_mounted), (mnttab_add_mount_volume),
	(mntent_add_mount_volume), (find_volumes):

	Rewrite sections to use the appropriate Solaris mounting 
	functions if Linux-style mount/umount/mount-table manipulation
	functions are not available.
	
	* libathena/athena-view-component.idl:
	* src/athena-view-frame-corba.c:
	* src/athena-zoomable-frame-corba.c:
	(impl_Athena_ZoomableFrame_report_zoom_level_changed):

	Change doubles to floats to work around an ORBit problem on
	Solaris wherein doubles are not correctly aligned.

	* src/file-manager/fm-desktop-icon-view.c:

	remove gratuitous linux specific header inclusion
	
	* src/athena-first-time-druid.c: (set_http_proxy):
	* src/athena-main.c: (main):
	* src/athena-shell.c: (corba_restart):
	(impl_Athena_ViewFrame_report_load_progress):

	Changed "setenv" and "unsetenv" calls to use athena_g_setenv
	and athena_g_unsetenv.
	
	* src/athena-window-manage-views.c:
	(report_sidebar_panel_failure_to_user):

	Add better error message to sidebar failures where it can't
	figure out which sidebar failed. Done in order to fix null
	string being passed to dialogue function which segfaulted
	Athena on Solaris.
	
2000-09-11  Robey Pointer  <robey@eazel.com>

	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (discard_line), (eazel_helper_start), (eazel_helper_password):

	Fix up the root-helper to work with usermode 1.28 and 1.35 (which
	send new status messages and change the protocol a lot).

2000-09-11  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	(done_with_gconf), (check_gconf_init), (get_conf_string),
	(get_conf_int), (get_conf_boolean):
	#ifdef magic to make the SLIM version always use the default, and
	spare the bootstrap installer of having to link with gconf.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(get_url_for_package):
	Uses malloc for the putenv value.
	Fixed a evil g_free.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Commented out a g_message, 
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	Don't conflict with same package or if the file is a directory.
	(eazel_install_monitor_rpm_propcess_pipe),
	Don't print that "panic ensues" thingy...
	(eazel_install_fetch_rpm_dependencies):
	Do check_existence before check_for_file_conflicts.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(parse_osd_xml_from_memory):
	commented out a xmlFreeDoc, as it was coredumping on me.
	
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri):
	* athena-installer/src/HACKING:
	* athena-installer/src/Makefile:
	* athena-installer/src/installer.c:
	(get_detailed_errors_foreach), (get_detailed_errors),
	(install_failed), (eazel_install_preflight):
	* athena-installer/src/link.sh:
	Stuff...

2000-09-11  Michael Engber  <engber@eazel.com>

	Backout change made to fix bug 1899 - it caused problems
	for the desktop.
	* libathena-extensions/athena-background.c:
	(athena_background_set_image_uri_no_emit):

2000-09-11  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-entry.c:
	(athena_entry_initialize), (athena_entry_key_press):
	fixed bug 2829, location bar should treat TAB like right arrow
	when there's a selection, by adding a mode to our entry class to do so.
	* libathena-extensions/athena-entry.h:
	defined a "special tab handling mode"
	* src/athena-location-bar.c: (athena_location_bar_initialize):
	set the special tab handling mode for the location bar's entry
	
	* src/athena-first-time-druid.c: (initiate_file_download):
	fixed bug 1826, change "initial update" download to real uri, now using
	one specified by Susan Space.
	
2000-09-11  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(measure_label_text), (draw_label_text_aa):
	Remove the SMOOTH_FONTS define and code from before aa fonts.
	
2000-09-11  Rebecca Schulman  <rebecka@eazel.com>

	* icons/Makefile.am:
	* icons/i-search-72.png:
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_name_for_directory),
	(athena_icon_factory_get_icon_name_for_file):
	Added search icon to the sidebar for search results

2000-09-11  Mathieu Lacage  <mathieu@eazel.com>

	Fix athena part of bug 2906. There are still issues
	but they are located in gnome-vfs uri handling code.
	* libathena-extensions/athena-file-operations.c:
	(append_basename) : rename from append_basename_unescaped 
	since it takes escaped uris into account now.
	(athena_file_operations_copy_move),
	(athena_file_operations_new_folder),
	(athena_file_operations_move_to_trash),
	(athena_file_operations_delete): use gnome_vfs_uri_new 
	to create new uris from escaped strings.

2000-09-11  John Sullivan  <sullivan@eazel.com>

	Some cleanups of directory view menu code to share more between
	the context menus and menu-bar menus. These had gotten into a
	really ugly mess; hopefully this will make them a little more
	straightforward to deal with.

	* src/file-manager/fm-directory-view.c: 
	(bonobo_menu_open_callback),
	(bonobo_menu_open_in_new_window_callback),
	(bonobo_menu_other_program_callback),
	(bonobo_menu_move_to_trash_callback),
	(bonobo_menu_duplicate_callback),
	(bonobo_menu_new_folder_callback),
	(bonobo_menu_open_properties_window_callback):
	Removed these callbacks, in favor of the use-one-callback-
	for-both-gtk-and-bonobo-menus style.
	(open_callback),
	(open_in_new_window_callback), 
	(other_application_callback), (other_viewer_callback),
	(trash_callback),
	(duplicate_callback), (create_link_callback),
	(new_folder_callback), (open_properties_window_callback):
	Changed these callbacks to work with either gtk or
	bonobo menus.
	(open_with_other_program): New helper function called
	from other_application_callback and other_viewer_callback.
	(check_selection_not_empty): New debugging helper function.
	(append_gtk_menu_item): Renamed append_gtk_menu_item_with_view,
	now it always passes the view as the callback data, and doesn't
	store it with gtk_object_set_data anymore.
	(fm_directory_view_real_create_background_context_menu_items),
	(create_open_with_gtk_menu),
	(fm_directory_view_real_create_selection_context_menu_items),
	(reset_bonobo_trash_delete_menu), (reset_bonobo_open_with_menu),
	(fm_directory_view_real_merge_menus): Updated for API changes.

2000-09-11  J Shane Culpepper  <pepper@eazel.com>

	* components/services/install/athena-view/athena-service-instal
	l-view.c:
	pointing to services.eazel.com instead of ham.eazel.com
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (goto_service_cb), (goto_update_cb):
	Working on the different state views determined by the anonymous and
	logged in usermodes.

2000-09-11  Andy Hertzfeld  <andy@eazel.com>

	* components/hardware/athena-hardware-view.c:
	(get_RAM_description), (setup_form_title), (add_element_to_table),
	(setup_overview_form), (setup_CPU_form), (setup_RAM_form),
	(setup_IDE_form):
	made the hardware view use a table for 2D layout instead of a
	horizontal box, since the IDE drives were making it too wide.  Also,
	removed an obsolete fixme.
	
2000-09-11  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 818, clicking on .doc and .pdf crashes Athena

	This was a bug where the action would be to open the document
	in an application but the application returned would be NULL
	due to some inconsistancy in the mime database.  We now check
	for this case and default to the componet view if this 
	situation arises.
	
	* src/file-manager/fm-directory-view.c: (activate_callback):

2000-09-11  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2938 (Shouldn't open a zillion Properties windows
	without asking first). I generalized this bug to include
	other multiple-window situations.

	* src/file-manager/fm-directory-view.h,
	* src/file-manager/fm-directory-view.c: 
	(get_containing_window): Just moved this function earlier in
	the file.
	(fm_directory_view_confirm_multiple_windows): New public function,
	asks user whether they really want to open some large number
	of windows. The cutoff point is determined by a constant,
	currently set to 10.
	(bonobo_menu_open_in_new_window_callback),
	(bonobo_menu_open_properties_window_callback),
	(open_in_new_window_callback), (open_properties_window_callback),
	(fm_directory_view_activate_files): Confirm before opening
	lots o' windows.
	* src/file-manager/fm-search-list-view.c:
	(reveal_selected_items_callback): Confirm before opening lots o'
	windows.

2000-09-11  Michael Engber  <engber@eazel.com>

	* src/athena-main.c: (athena_main_event_loop_unregister):
	* src/athena-shell.c: (corba_quit), (corba_restart):
	bug 2942 the quit code now kills all the event loops, not
	just the top one.

2000-09-11  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-dnd.c:
	(athena_icon_dnd_begin_drag):
	fixed big 914, icons are sometimes semi-transparent when dragged, by
	removing the stippled mask code.  Someday we'll get this back as
	X Windows improves
	
2000-09-11  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2317 (Right-click on sidebar uses menu items in
	a confusing way)

	* src/athena-sidebar.c: (athena_sidebar_add_panel_items):
	The bug was confusion over the gtk_check_menu_item API. It had
	been calling set_show_toggle when it meant set_active.

	* src/file-manager/fm-list-view.c: Updated a comment.

2000-09-11  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-first-time-druid.c: (set_up_user_level_page),
	(set_up_update_page):
	fixed bug 2911, "no" option for Athena Update doesn't fit, by
	shortening the message.  Also, cleaned up other layout problems.
	
2000-09-11  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2308 ("Where" column should be after "Name" column)
	Fixed bug 1931 (Search list columns need better widths)

	* src/file-manager/fm-search-list-view.c: 
	(real_get_column_specification): Switched order of Where/Name
	columns, tweaked column widths.
	(real_get_link_column): Changed link column number to match
	ordering change.

2000-09-11  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2447, Check permissions when mounting floppy
	The check permissions call is not needed.

	Fixed bug 2453, Error ignored when mounting/unmounting
	We now check for the error.

	Fixed bug 2449, Directory path creation does not handle
	paths containing ".."
	
	* libathena-extensions/athena-volume-monitor.c:
	(mount_volume_floppy_add), (mount_volume_add_aliases),
	(athena_volume_monitor_mount_unmount_removable):

2000-09-10  Maciej Stachowiak  <mjs@eazel.com>

	* configure.in: Add AM_PATH_GTK check

	* libathena/Makefile.am: include GTK_CFLAGS in INCLUDES

	* libathena/athena-view.c (view_frame_call_begin): Fix yet
	another screwup.

2000-09-11  Mathieu Lacage  <mathieu@eazel.com>

	* libathena/athena-view.c: (view_frame_call_begin),
	(view_frame_call_end): fix 2 typos introduced my last 
	maciej commit breaking the build.

2000-09-10  Maciej Stachowiak  <mjs@eazel.com>

	* libathena/athena-view.c (view_frame_call_begin,
	view_frame_call_end): Handle a QI failure properly, fixing
	bugzilla.eazel.com 2545.

2000-09-10  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize):
	Free the private parts of EazelInstall. (bug 2717)

2000-09-10  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 1266, application and component lists should
	be sorted somehow.

	GnomeVFS sorts these list alphabetically now.
	
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_get_short_list_applications_for_uri),
	(athena_mime_get_all_applications_for_uri):
	Lists are returned sorted alphabetically.

2000-09-10  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/hardware/athena-hardware-view.c:
	(setup_overview_form):
	Fixed bug 2823
	
	* components/rpmview/athena-rpm-view-install.c:
	(get_detailed_errors_foreach):
	Updated for the extra packagedata status enum
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (tree_helper_helper), (tree_helper), (install_failed),
	(uninstall_failed), (eazel_preflight_check_signal), (dep_check),
	(main):
	Nicer output.
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastruct_from_packagedata),
	(packagedata_from_corba_packagedatastruct):
	Added a PACKAGE_FILE_CONFLICT status enum to PackageData

	* components/services/install/lib/eazel-install-protocols.c:
	(get_url_for_package), (get_search_url_for_package):
	Changed >= to = for version, 
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_download_packages),
	(eazel_install_check_for_file_conflicts),
	(eazel_install_pre_install_packages), (revert_transaction),
	(eazel_install_monitor_rpm_propcess_pipe),
	(eazel_install_do_transaction_md5_check),
	(eazel_install_package_version_compare),
	(eazel_install_package_provides_basename_compare),
	(eazel_install_package_provides_compare),
	(eazel_install_package_modifies_provides_compare),
	(eazel_install_check_existing_packages),
	(eazel_install_check_if_related_package),
	(eazel_install_fetch_rpm_dependencies), (print_package_list),
	(eazel_install_ensure_deps):
	Mucho work, closed bug 2956, 2958, 1514 and 2596. Basically it
	now handles the case where a installing eg. gnome-print which has
	libgnomeprint.so.7 breaks gnumeric because it requires
	libgnomeprint.so.6. It also now checks for file conflicts before
	beginning the install. This is the one case that rpmDepCheck
	doesn't check.
	
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_fill_from_rpm_header),
	Read the provides list with full filenames. Should hopefully also
	work on rpm-3.0.x | x < 4.
	(packagedata_status_enum_to_str),
	(packagedata_status_str_to_enum):
	Handle FILE_CONFLICT tag
	
	* components/services/install/lib/eazel-install-types.h:
	Added the FILE_CONFLICT. If installed package A which has a file
	foo which conflicts with B (already installed, and also has file
	foo), file B will go into A->breaks with status =
	PACKAGE_FILE_CONFLICT.

2000-09-09  Josh Barrow  <linuxfan@ionet.net>

	* components/music/athena-music-view.c:
	(music_view_set_selected_song_title), (reset_playtime),
	(play_status_display), (slider_moved_callback),
	(add_play_controls):
	Made the time to go and the total time in the Music View 
	use the anti aliased fonts.

2000-09-09  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-sidebar-tabs.c: (athena_sidebar_tabs_expose):
	fixed bug 2910, sidebar tabs crash in arlo theme when sidebar is
	closed, by making them not try to draw when the sidebar is closed
	
2000-09-09  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: port to new
	shared function.
	* libathena-extensions/athena-icon-dnd.c: port to
	new shared function.
	* libathena-extensions/athena-drag.c:
	(athena_drag_autoscroll_calculate_delta),
	(athena_drag_file_receive_dropped_keyword): add a new 
	fucntion to be shared.
	* libathena-extensions/athena-drag.h: add prototype
	* libathena-extensions/athena-list.c:
	(athena_list_get_drop_action),
	(athena_list_receive_dropped_icons),
	(athena_list_receive_dropped_keyword),
	(athena_list_drag_data_received):
	use the above function and add support to the list view 
	for many new drop types. Need to fix bug 2485 properly
	to get 2874 fully implemented.

2000-09-09  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: fix bug 2417.
	cursor is now updated.
	* libathena-extensions/athena-list.c:
	(athena_list_drag_begin), (athena_list_drag_end),
	(athena_list_drag_leave), (athena_list_get_drop_action),
	(athena_list_drag_motion), (athena_list_drag_drop),
	(athena_list_drag_data_received): remove debugging output.

2000-09-09  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-about.c: (athena_about_destroy),
	(athena_about_initialize), (randomize_authors),
	(draw_author_list), (athena_about_draw_info),
	(athena_about_update_authors), (athena_about_close),
	(update_authors_if_necessary):
	made the about box "scalable" by picking and ordering the
	authors randomly, shuffling the list peroidically.
	* src/athena-about.h:
	added athena_about_update_authors
	
	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	made it call athena_about_update_authors if the about dialog
	already exists
	
	* libathena-extensions/athena-graphic-effects.c:
	just moved a comment to it's proper place

2000-09-09  Ali Abdin  <aliabdin@aucegypt.edu>

        Should fix bug #2229. Also make HTML output more 'valid'

        * components/help/converters/gnome-db2html2/gdb3html.h:
        Add legalnotice tag, and prototype of print_footer (since it is no
        longer static)

        * components/help/converters/gnome-db2html2/sect-elements.[ch]:
        (sect_inlinegraphic_start_element): Forgot to initialize a
        variable.

        (sect_legalnotice_start_element),
        (sect_legalnotice_characters),
        (sect_legalnotice_end_element): New functions for special handling of
        the legalnotice tag.

        (sect_para_end_element),
        (sect_para_start_element): Modified to also work in the legalnotice
        tag

        (sect_article_end_element): Commented out an area of code that creates
        erroneous HTML tags (now that the 'footer' prints them out).

        (sect_title_characters): Somebody forgot to 'open' the <HEAD>

        * components/help/converters/gnome-db2html2/toc-elements.c:
        (toc_artheader_end_element): Make 'Copyright' link to the legalnotice.

        * components/help/help-method.conf:
        Add 'gnome-help:' at mjs' suggestion (do we need to remove 'help:'
        now?)

2000-09-08  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 773, Context menu items wrong when used on Trash item

	Removed items that are improper when the Trash icon 
	is in the selection.
	
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	(fm_directory_view_real_create_selection_context_menu_items):
	Do a check for Trash in selection.  Disable Duplicate and
	Make Link	
		
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_create_selection_context_menu_items):
	Do a check for Trash in selection.  Disable Rename

2000-09-08  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/idl/trilobite-eazel-install.idl:
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (eazel_preflight_check_signal):
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_preflight_check), (eazel_install_callback_class_initialize):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-private.h:
	* components/services/install/lib/eazel-install-object.c:
	(xml_from_packagedata_list), (eazel_install_class_initialize),
	(eazel_install_emit_preflight_check),
	(eazel_install_emit_preflight_check_default):
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_get_total_size_of_packages),
	(eazel_install_start_transaction):
	Implemented bug #2858. The preflight signal now gets the toplevel
	packages to install and can return true/false.
	Amazing how much I had to change to alter one corba signal...

	* components/services/docs/installer-security-issues
	About the security issues of libeazelinstall (this is an email
	that gives a rundown of how the installer handles downloaded,
	filepermissions etc).
	
	* components/services/install/lib/eazel-install-metadata.c:
	(get_conf_int):
	Fixed a bug where it returned the wrong variable (odd that -Werror
	didn't stop it)
	
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new), (categorydata_destroy_foreach),
	(packagedata_new), (packagedata_destroy), 
	(packagedata_remove_soft_dep),
	uses trilobite_debug now
	(packagedata_fill_from_rpm_header),
	Read the provides from the header. They're not used yet, but
	they'll be used for handling bug 2583 (and part of 1514).
	
	* components/services/install/lib/eazel-install-types.h:
	Added a glist to packagedata, contains the basenames of the files
	the package provides.
	
2000-09-08  Rebecca Schulman  <rebecka@eazel.com>

	* libathena-extensions/athena-search-uri.c:
	(athena_self_check_search_uri):
	Fixed make check for my earlier changes
	* src/athena-search-bar-criterion.c: (get_emblem_location_for):
	fixed the emblem criteria uris so they now are recognized by
	medusa

2000-09-08  Rebecca Schulman  <rebecka@eazel.com>

	Fixed bugzilla.eazel.com bugs 1937, 2014, and 2633,
	to disallow repeat criteria in the search bar,
	limit number of criteria on the bar, 
	and to disallow searching  for the emblem
	"erase" which doesn't really exist.

	* libathena-extensions/athena-search-uri.c: (parse_uri):
	a few more text brush ups
	* src/athena-complex-search-bar.c:
	* src/athena-complex-search-bar.h:
	(search_bar_criterion_type_changed_callback),
	(update_criteria_choices),
	(athena_complex_search_bar_initialize), (more_options_callback),
	(fewer_options_callback), (update_options_buttons_state),
	(athena_complex_search_bar_get_search_criteria):
	Add a callback to update when a criteria is added removed or
	changed, to update what criteria are sensitive in the menus
	Added an accessor function to get the list of search criteria
	so the search criterion class can use it to figure out
	what to leave sensitive in the available criteria menu.
	Add code to desensitize the "more options" button when
	all criteria are displayed.

	* src/athena-search-bar-criterion-private.h:
	* src/athena-search-bar-criterion.c:
	(athena_search_bar_criterion_initialize_class),
	(athena_search_bar_criterion_destroy),
	(athena_search_bar_criterion_new),
	(athena_search_bar_criterion_initialize),
	(athena_search_bar_criterion_new_from_values),
	(athena_search_bar_criterion_next_new),
	(athena_search_bar_criterion_new_with_type),
	(athena_search_bar_criterion_first_new),
	(athena_search_bar_criterion_get_location),
	(get_next_default_search_criterion_type),
	(athena_search_bar_criterion_update_valid_criteria_choices),
	(make_emblem_value_menu), (criterion_type_changed_callback),
	(emblems_changed_callback), (criterion_is_of_type),
	(criterion_type_already_is_displayed), (get_next_criterion_type):
	* src/athena-search-bar-criterion.h:
	convert this to a gtk class so that it can emit signals
	(criterion_type_changed) and let the bar know.
	Add code to handle figuring out when criteria has changed,
	and what criteria are still available.  Add special code
	to get rid of the erase emblem.  Also, since it is now a 
	gtk class, add more type checking where appropriate.

2000-09-08  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-file.c:
	(athena_file_forget_activation_uri):
	Add call to athena_directory_async_state_changed.
	
	* libathena-extensions/athena-link.c:
	(athena_link_set_link_uri):
	Removed private athena_directory_async_state_changed call.
	
	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	Added middle inital to my name.
	
2000-09-08  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: fix many bugs.
	The tree view now receives drops as colors, backgrounds,
	and emblems. I am supposed to remove emblems per Arlo
	request but will do so later after having moved the code 
	to the list view.
	* libathena-extensions/athena-drag.h: add a shared 
	declaration

2000-09-08  Arlo Rose  <arlo@eazel.com>

	* icons/i-web-72.png:
	Added yet another placeholder image for web view.
	This is not final, but looks better than the previous
	placeholder Andy added.

2000-09-08  Robin * Slomkowski  <rslomkow@eazel.com>

	* README: updated to note we use LIBXML_1_BRANCH

2000-09-08  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	(init_default_install_configuration),
	(init_default_transfer_configuration):

	Removed "uninstall" and "package-list-storage-path" settings, and
	clarified update/downgrade to "allow-update", "allow-downgrade" in
	the gconf tree.

2000-09-08  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-link.c:
	(athena_link_set_link_uri):
	Added a call to athena_directory_async_state_changed ()
	as part of my last bug fix to update the AthenaFile
	that its activation URI has changed.

2000-09-08  J Shane Culpepper  <pepper@eazel.com>

	* components/services/login/athena-view/athena-login-view.c:
	(generate_login_form):
	* components/services/athena-dependent-shared/shared-service-widg
	ets.c: (show_feedback):
	* components/services/startup/athena-view/athena-service-startu
	p-view.c: (generate_startup_form):
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form):

	Converting to athena label to use aa text.

2000-09-08  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2120 (Shouldn't be able to create new files in
	search view) and most of bug 2916 (Shouldn't be able to
	create new files in Trash). Also fixed the more general
	but unreported bug: Shouldn't be able to create new
	files in read-only directories.

	* src/file-manager/fm-directory-view.h,
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_is_read_only): New function, overridable via
	function pointer, that reports whether the contents of a 
	directory view are entirely read-only. 		
	(fm_directory_view_real_is_read_only): Default implementation of
	is_read_only, checks the permissions of the model AthenaDirectory.
	(fm_directory_view_supports_creating_files): New function,
	overridable via function pointer, that reports whether a
	directory supports creating new files inside it
	(fm_directory_view_real_supports_creating_files): Default
	implementation of supports_creating_files, returns TRUE unless
	is_read_only is true or the displayed directory is in the trash.
	The remaining part of bug 2916 is that the AthenaFile for 
	"trash:" doesn't think it's in the trash.
	(fm_directory_view_initialize_class): Wire up default function
	pointers.
	(compute_menu_item_info): Make sensitivity of "Move to Trash"
	depend on is_read_only; make sensitivity of "New Folder",
	"Duplicate", and "Create Link" depend on supports_creating_files.
	(fm_directory_view_real_update_menus): Add "New Folder" to the
	set of dynamic ones.
	(get_directory_as_file): New helper function to get a AthenaFile
	object for the displayed directory.
	(showing_trash_directory): New helper function to check whether
	the displayed directory is trash.
	
	* src/file-manager/fm-icon-view.c:
	(get_stored_icon_position_callback): Removed call to
	fm_directory_view_get_model whose result was not used.
	(tighter_layout_callback): Removed an unnecessary cast.
	
	* src/file-manager/fm-search-list-view.c:
	(real_supports_creating_files): Overridden to return FALSE.
	(fm_search_list_view_initialize_class): Wire up overridden
	function pointer.

2000-09-08  Josh Barrow  <linuxfan@ionet.net>

	* components/hardware/athena-hardware-view.c: (setup_form_title),
	(setup_overview_form), (setup_CPU_form), (setup_RAM_form),
	(setup_IDE_form): 
	Change all text to aa text using athena_label and its friends.

2000-09-08  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-dnd.c:
	(drag_data_received_callback):
	fixed bug 2919, erase emblem doesn't work anymore.  In fact, all the
	emblems were broken by Mathieu's drag and drop changes; fixed by
	replacing the GtkSelectionItem with the data it points to.
	
2000-09-08  Ali Abdin  <aliabdin@aucegypt.edu>

        Should fix bug #2749, #2754, and #2755

        * components/help/converters/gnome-db2html2/gdb3html.h:
        Add in ENVAR, COMPUTEROUTPUT, and INLINEGRAPHIC tags.

        * components/help/converters/gnome-db2html2/sect-elements.[ch]:
        Add in the above tags to the sect_elements struct.
        (sect_inlinegraphic_start_element): New function to handle inline
        graphics.
        (sect_graphic_start_element): If format was NULL the g_strcasecmp
        would output warning messages screwing up the HTML, changed the code
        around a bit to handle this. Also made this function to be more
        compliant with Eazel style guidelines

2000-09-08  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2816, Home icon doesn't link to changed home directory.

	The fix required a new private function that invalidates a AthenaFiles
	activation URI and forces it to be reloaded.
	
	* libathena-extensions/athena-directory-notify.h:
	Added athena_file_changed () and athena_file_forget_activation_uri ()
	
	* libathena-extensions/athena-file.c: 
	(athena_file_changed),	
	(athena_file_forget_activation_uri):
	New function that invalidates the activation URI and frees it and
	sets got_activation_uri to FALSE so that it is reloaded.
	
	* libathena-extensions/athena-file.h:
	Removed athena_file_changed ()
	
	* libathena-extensions/athena-icon-factory.c:
	* libathena-extensions/athena-directory-async.c:
	Added include to athena-directory-notify.h
	
	* libathena-extensions/athena-link.c:
	(athena_link_set_link_uri):
	Added call to athena_file_forget_activation_uri ()
	
	* src/file-manager/fm-desktop-icon-view.c: 
	(event_callback):
	Removed debugging code.

2000-09-08  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: fixes one more ccrash.
	athena_model_node_get_file does not return a refed AthenaFile
	for you. So, must not unref it.

2000-09-08  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: fix bug 2918.

2000-09-08  Maciej Stachowiak  <mjs@eazel.com>

	* src/athena-window-menus.c (help_menu_about_athena_callback):
	Added Ali Abdin and Ian McKellar.

	* AUTHORS: Updated to match about box (it would be nice if we
	could keep this name list in just one place).

	* THANKS: New file; I credited everyone who has contributed and
	who is not in AUTHORS, as far as I could tell from the various
	ChangeLogs.

2000-09-08  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text), (draw_or_measure_label_text_aa),
	(athena_icon_canvas_item_get_max_text_width):
	fixed bug 2060, implement Arlo's text layout scheme, which is now 135 pixel
	instead of 80 in the standard layout mode; it's still 80 in the tighter
	layout mode.
	 
2000-09-07  Rebecca Schulman  <rebecka@eazel.com>

	* components/tree/athena-tree-view.c:
	Fixed a "gtk_entry_list_unref" that should
	have been a "gtk_target_list_unref"
	
2000-09-07  Mathieu Lacage  <mathieu@eazel.com>

	Moves the tree view to the new standard way of dnd.
	This now makes it consistant with the rest of the icon
	and list view.
	Fixes a number of bugs in the process: 2897, 2905, 2353
	
	* components/tree/athena-tree-view.c: it just changes 
	a lot of things and cleans the code. Dnd should be now fully 
	functional for file drag and drops. Please, test and report
	bugs.

2000-09-07  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/athena-tree-model.c
	(athena_tree_model_directory_files_changed_callback): Look up
	the node based on the AthenaFile, not the uri, since the URI may
	have changed, if we are getting a "change" signal.
	
2000-09-07  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line), (md5_check_failed), (main):
	Fixed the setting of server/port/tempdir now that libeazelinstall
	uses gconf.
	Uses the md5_check_failed signal/
	
	* components/services/install/idl/trilobite-eazel-install.idl:
	Added the md5_check_failed signal.
	
	* components/services/install/lib/eazel-install-corba-callback.h:
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_md5_check_failed), (eazel_install_callback_get_epv),
	(eazel_install_callback_finalize),
	(eazel_install_callback_class_initialize):
	Added the md5_check_failed signal.
	
	* components/services/install/lib/eazel-install-corba-types.h:
	* components/services/install/lib/eazel-install-corba-types.c:
	(corba_packagedatastructlist_from_packagedata_list),
	(corba_packagedatastruct_from_packagedata),
	(packagedata_from_corba_packagedatastruct):
	Changed corba_packagedatastruct_from_packagedata to return a
	pointer instead of a struct. Hope it doesn't introduce any funky
	leaks in corba_packagedatastructlist_from_packagedata_list.
	
	* components/services/install/lib/eazel-install-md5.h:
	* components/services/install/lib/eazel-install-md5.c:
	(md5_get_string_from_md5_digest):
	Added a method to convert a md5 digest to a human-readable string.
	
	* components/services/install/lib/eazel-install-metadata.c:
	Added authors and includeds trilobite-core-utils (for
	trilobite_debug)
	
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/lib/eazel-install-object.c:
	(create_temporary_directory),
	Open tmpdir in 0700 instead of 0755.
	(eazel_install_alter_mode_on_temp),
	(eazel_install_delete_downloads), 
	(eazel_install_install_packages),
	(eazel_install_emit_install_progress_default),
	(eazel_install_class_initialize), 
	Changed all 'g_.* ("D: ' to trilobite_debug
	(eazel_install_emit_md5_check_failed),
	(eazel_install_emit_md5_check_failed_default),
	Added the md5_check_failed signal
	(eazel_install_emit_dependency_check_default),
	Modified because of the change in eazel-install-corba-types.
	(eazel_install_emit_done):
	Output cleaning.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_xfer_callback), (gnome_vfs_fetch_remote_file),
	(eazel_install_fetch_file), (eazel_install_fetch_package),
	(get_url_for_package):
	Changed all 'g_.* ("D: ' to trilobite_debug
	Output cleaning.
	Always add downloaded file to downloaded_files, thus always doing
	md5 check on them.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Output cleaning.

	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_download_packages),
	(eazel_install_pre_install_packages), (hest),
	(eazel_install_monitor_rpm_propcess_pipe),
	(eazel_install_monitor_subcommand_pipe),
	(eazel_install_do_transaction_md5_check),
	(eazel_install_free_rpm_system_close_db_foreach),
	(eazel_install_free_rpm_system),
	(eazel_install_prepare_rpm_system),
	(eazel_install_fetch_rpm_dependencies), (print_package_list),
	(eazel_install_ensure_deps), (eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install), (eazel_uninstall_globber):
	Changed all 'g_.* ("D: ' to trilobite_debug
	Output cleaning.

	* components/services/install/lib/eazel-install-xml-package-list.c:
	(generate_xml_package_list), (osd_parse_implementation),
	(osd_parse_softpkg), (osd_parse_shared),
	(parse_osd_xml_from_memory):
	Changed all 'g_.* ("D: ' to trilobite_debug
	Output cleaning.

	* components/services/trilobite/libtrilobite/trilobite-root-client.
	c: (trilobite_root_client_unref),
	(trilobite_root_client_initialize):
	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (trilobite_root_helper_destroy),
	(trilobite_root_helper_initialize):
	Removed some debug output.
	
2000-09-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	(get_conf_string), (get_conf_int), (get_conf_boolean):

	Work around fatal API flaw in gconf, so we can detect whether
	ints/bools are set before we substitute default values.

2000-09-07  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-icon-dnd.c:
	(receive_dropped_tile_image):
	fixed bug 2896, tiled backgrounds don't work in the icon view.
	athena_background_receive_dropped_background_image was passing the
	GtkSelectionData object, instead of the data it points to.  Mathieu
	caused this when he reworked the drag and drop stuff recently.
	
	
2000-09-07  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2218 (Duplicate items appear in history list)

	Also changed a few places to compare uris with the new
	athena_uris_match instead of strcmp.

	* libathena-extensions/athena-bookmark.h,
	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_compare_with): Use athena_uris_match.
	(athena_bookmark_compare_uris): New function, compares
	bookmarks' uris with athena_uris_match; ignores names.
	
	* src/athena-window-manage-views.c:
	(athena_window_set_displayed_location), (handle_go_elsewhere),
	(open_location): Use athena_uris_match.
	
	* src/athena-window.c: (athena_add_to_history_list):
	Use athena_bookmark_compare_uris instead of _compare_with.
	This was the source of the bug. Due to asynchronicity introduced
	sometime after this code was written, when the bookmark for the 
	current location was created it did not	yet know what name to use, 
	and so it did not match any of the old History items that had the 
	correct name. But for the History list we only want one entry per 
	uri anyway, so it needn't have been comparing the names in the 
	first place.

2000-09-07  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-sidebar.c: (athena_sidebar_initialize):
	fixed bug 1246 by adding event initializing code
	* src/athena-window.c: (athena_window_constructed):
	removed the sidebar event initializing code from the window class.
	
	* src/athena-zoom-control.c:
	(athena_zoom_control_initialize_class),
	(athena_zoom_control_initialize), (draw_pixbuf_with_prelight),
	(draw_zoom_control_image),
	(athena_zoom_control_set_prelight_mode),
	(athena_zoom_control_leave_notify),
	(athena_zoom_control_motion_notify):
	fixed bug 838, zoom control doesn't prelight, by receiving motion
	events and prelighting appropriately.
	
2000-09-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug causing icon view not to display trash:
	URI.
	
	* libathena-extensions/athena-mime-actions.c:
	(is_known_mime_type):
	New function to return if mime type is recognized.
	Return FALSE if mim tye if NULL or of type
	application/octet-stream.
	
	(athena_mime_get_default_component_for_uri_internal),
	(athena_do_component_query):
	Call is_known_mime_type () instead of old != NULL check.
	
2000-09-07  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	(done_with_gconf), (check_gconf_init), (get_conf_string),
	(get_conf_int), (get_conf_boolean), (get_urltype_from_string),
	(init_default_install_configuration),
	(init_default_transfer_configuration), (transferoptions_destroy),
	(installoptions_destroy):
	* components/services/install/lib/eazel-install-metadata.h:
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_new_with_config):
	* components/services/install/lib/eazel-install-public.h:
	* components/services/install/server/main.c:
	(eazel_install_service_factory):
	
	Rip out all the old XML-based configuration code, and replace it
	with gconf-based code.

	* components/services/trilobite/libtrilobite/trilobite-redirect.c:

	Put redirection table into the same subtree as other trilobite
	stuff.  (This may change soon anyway.)

2000-09-08  Daniel Egger  <egger@suse.de>

	* components/help/converters/gnome-db2html2/gdb3html.c:
	Reverted patch from 2000-09-06 on popular demand because
	it doesn't match the Eazel styleguide.

2000-09-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2134, items cannot be dragged from desktop or windows
	onto Trash icon.
	
	* libathena-extensions/athena-drag.c:
	(athena_drag_default_drop_action_for_icons):
	Check and see if target is trash: URI. If it is,
	use find_directory to locate the actual trash directory
	URI.
	
	* libathena-extensions/athena-file-operations.c:
	(athena_file_operations_copy_move):
	Check and see if target is trash: URI. If it is,
	use find_directory to locate the actual trash directory
	URI for the volume of the source file.
	
2000-09-07  Michael Engber  <engber@eazel.com>
	
	Added Robin to the about box.
	* src/athena-window-menus.c: (help_menu_about_athena_callback):

2000-09-07  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2875 (update set of built-in bookmarks)

	* data/static_bookmarks.xml:

	Fixed bug 2872 (Complaint about bookmark location mismatch 
	when visiting new folder)

	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file-utilities.c:
	(athena_uris_match): New function, compares two uris
	after canonicalizing each.
	
	* src/athena-window-manage-views.c:
	(check_last_bookmark_location_matches_window):
	Use athena_uris_match to compare bookmark's uri with
	window's uri.

2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	Turn on smooth fonts in the icon view.  This is controlled by the
	SMOOTH_GRAPHICS preference.  I tried to cause a minimum amount of
	disruption to the icon-canvas-item beast.  For this reason, there
	are some serious preformance problems.  I plan to attack those
	next.

	In case of emergency, i left a life boat in there.  Just comment
	out the SMOOTH_FONTS define in the top of the file.  I expect to
	yank this out in the next day or so.

	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text), Teach it about the smooth fonts
	case.  (measure_label_text),  Same here.
	(draw_label_text), Here too.  (draw_or_measure_label_text_aa), New
	function to do the drawing or measuring using AthenaScalableFont
	instead of GdkFont.
	(draw_label_text_aa): New function that draws the smooth text into
	a pixbuf so what we can continue to use the old rendering
	machinery.  This is the reason for at least on of the performance
	problems.  We should be able to render directly into the canvas
	item's buffer.  
	
2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_initialize_class),
	(draw_or_measure_label_text):
	Simplify the highlight color initialization.
	
	* libathena-extensions/athena-scalable-font.c:
	(athena_text_layout_paint):
	Restore rendering in the passed in color.  Add a mini hack to make
	sure the color is opaque.
	
2000-09-07  John Sullivan  <sullivan@eazel.com>

	Better job of what I did in my last checkin. I caught one case
	before, but there are two other cases I skipped. Now they're
	all equally de-fatal.

	* src/athena-window-manage-views.c:
	(check_last_bookmark_location_matches_window), (handle_go_back),
	(handle_go_forward), (handle_go_elsewhere):

2000-09-07  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2445,  Some volume monitor code applies only to desktop case.
	Fixed bug 2452,  find_volumes confused about which volumes to include.
	Fixed bug 2451,  Incorrect test for removability of ISO9660 volumes.
	
	* libathena-extensions/athena-volume-monitor.c: 
	* libathena-extensions/athena-volume-monitor.h:
	(floppy_sort):
	Changed function to use AthenaVolumes as opposed to paths
	
	(athena_volume_monitor_volume_is_removable):
	New function to check and see if volume is removable.
	
	(athena_volume_monitor_get_removable_volumes):
	New function to return a list of removable AthenaVolumes
	
	(athena_volume_monitor_get_volume_name):
	New function to return a human readable name of volume
	
	(athena_volume_monitor_volume_is_mounted),
	(mount_volume_floppy_set_state), (mount_volume_mount),
	(find_volumes), (athena_volume_monitor_mount_unmount_removable):
	Clean up and bug fix work.
	
	
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link),
	(fm_desktop_icon_view_create_background_context_menu_items),
	(volume_unmounted_callback):
	Use new functions in AthenaVolumeMonitor.

2000-09-07  John Sullivan  <sullivan@eazel.com>

	* src/athena-window-manage-views.c: (handle_go_elsewhere):

	De-fatalized bug 2872 (Common crash when navigating, complaint
	about last_location_bookmark not matching window->location).

	Changed an assert (fatal) to a message (annoying) to prevent
	this now very common bug from being fatal. I'll fix the real
	problem soon.

2000-09-07  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: add support for AthenaDragInfo.
	* libathena-extensions/athena-drag.c: add new scroll calculation fucntion.
	(athena_drag_autoscroll_calculate_delta):
	* libathena-extensions/athena-drag.h: add decalrtion of scroll function
	plus bits and pieces of constants used everywhere.
	* libathena-extensions/athena-icon-dnd.c:
	(auto_scroll_timeout_callback): move this to the shared version of the scroll
	* libathena-extensions/athena-list.c: implement auto scrolling.
	(athena_list_drag_leave), (athena_list_real_scroll),
	(auto_scroll_timeout_callback), (athena_list_start_auto_scroll),
	(athena_list_stop_auto_scroll), (athena_list_drag_motion):

2000-09-07  Eli Goldberg  <eli@eazel.com>

	* docs/smoketests.html:
	Updated to show test files in /h/public/QE/smoketests

2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-label.c:
	(athena_label_initialize):
	Make the default font size something more reasonable.
	
2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_set_smooth_font_size):
	The new font was not getting assigned.
	
2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-icon-container.c: (destroy),
	(athena_icon_container_initialize),
	(athena_icon_container_update_icon),
	(athena_icon_container_set_label_font_for_zoom_level),
	(athena_icon_container_set_smooth_label_font):
	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-private.h:
	Add support for smooth fonts.  We simply manage one font and an
	array of sizes.  The management of the smooth font parallels that
	of regular non smooth Gdk fonts, except we have just one.  Instead
	of an array of fonts, we have an array of font sizes.  We use
	these to update the canvas icon items.
	
2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-scalable-font.h:
	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_draw_text), (athena_text_layout_paint),
	(athena_gdk_pixbuf_new_from_text):
	Add function to create a GdkPixbuf from a string.  Also fixed a
	debuggin typo from before.

	* test/test-athena-font.c: (create_named_background),
	(rgba_run_alpha), (pixbuf_draw_rectangle),
	(pixbuf_draw_rectangle_around), (main):
	Add text to GdkPixbuf to GdkPixbuf compositing test.  Also add a
	bunch of hacks to make the tests more useful.
	
2000-09-07  Mathieu Lacage  <mathieu@eazel.com>

	First work toward bug 2353, fixes bug 2570, 1289
	
	* components/tree/athena-tree-view.c: fix a dnd bug in
	gtk_drag_dest_set.
	* libathena-extensions/athena-drag.c: (athena_drag_init):
	initialize the new field drop_occured to FALSE.
	* libathena-extensions/athena-drag.h: new field drop_occured.
	* libathena-extensions/athena-icon-dnd.c: use the new field
	and make it behave slightly more sanely by doing actual actions
	in data_received instead of drag_drop. This is the only way to avoid
	race conditions. (drag_data_received_callback), (drag_motion_callback),
	(drag_drop_callback)
	* libathena-extensions/athena-list.c:
	(athena_list_initialize_class), (athena_list_dnd_initialize),
	(athena_list_initialize), (athena_list_drag_start),
	(athena_list_ensure_drag_data), (athena_list_drag_begin),
	(athena_list_drag_end), (athena_list_drag_leave),
	(athena_list_find_drop_target), (athena_list_get_drop_action),
	(athena_list_drag_motion), (athena_list_drag_drop),
	(athena_list_drag_data_received):
	add support for the drop_occured field, fix the same bug as in tree view
	and make it behave slightly more sanely as in icon view.
	The tree view now needs some work to catch up with all those changes.
	* src/file-manager/fm-list-view.c: (fm_list_handle_dropped_icons):
	space.

2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-scalable-font.c:
	(athena_text_layout_free), (athena_text_layout_new),
	(athena_text_layout_paint):
	* libathena-extensions/athena-scalable-font.h:
	Add support for drawing underlined text.  I also added a FIXME for
	the issue of hard coding the underline baseline rather than
	fetching the information from the rendred string.
	
	* test/test-athena-font.c: (main):
	Add underlined text test.
	
2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_measure_text), (invert_glyph),
	(athena_scalable_font_draw_text),
	(athena_scalable_font_draw_text_lines_with_dimensions),
	(athena_scalable_font_draw_text_lines),
	(athena_text_layout_paint):
	* libathena-extensions/athena-scalable-font.h:
	Add support for drawing inverted text.  Also cleanup the rendering
	function a bit.  
	
	* libathena-extensions/athena-icon-factory.c: (embed_text):
	* libathena-extensions/athena-label.c: (render_buffer_pixbuf):
	* src/athena-about.c: (draw_aa_string):
	* src/athena-sidebar-tabs.c: (draw_one_tab_plain),
	(draw_one_tab_themed):
	Update all these for the new inverted scalable font api.
	
	* test/test-athena-font.c: (main):
	Add a inverted text test.
	
2000-09-07  Eskil Heyn Olsen  <eskil@eazel.com>

	* athena-installer/src/Makefile:
	Just to clear things up : this file is in cvs since it's 
	not created by configure.in (yet)

	* athena-installer/src/Makefile.am:
	* athena-installer/src/link.sh:
	makefile/link stroking to make it work after the changes
	to trilobite-core-utils.

	* libathena-adapter/Makefile.am
	Removed libathena.la to fix build

2000-09-07  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/athena-tree-model.c (report_node_added):
	ifdef'd out a g_warning that happens a lot more often than I
	expected.

2000-09-07  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-adapter/Makefile.am: Link against libathena.

	* src/athena-component-adapter-factory.h,
	src/athena-component-adapter-factory.c: Fist cut at the easy to
	use wrapper interface for the soon to come adapter component (part
	of the work for bugzilla.eazel.com 1994). I made this a singleton
	object with the object actually exposed, but maybe I should hide
	the object details completely and just expose the actually useful
	function (which will instantiate the singleton when/if
	appropriate).

	* src/Makefile.am: Add to the build. Link against libathena-adapter.

2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-scalable-font.c:
	(text_layout_free_row), (athena_text_layout_free),
	(athena_text_layout_new), (athena_text_layout_paint):
	* libathena-extensions/athena-scalable-font.h:
	Add text layout functions copied from
	libgnomeui/gnome-icon-text.[ch] and modified to work with
	AthenaScalalbleFont and GdkPixbuf instead of GdkFont and
	GdkDrawable.

	* test/test-athena-font.c: (main):
	Add text layout test.
	
2000-09-07  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-icon-factory.c: (embed_text):
	Make the empty line height 1/2 of the font size to cram more stuff
	into the embedded text.
	
	* libathena-extensions/athena-label.c:
	(athena_label_size_request), (render_buffer_pixbuf),
	(label_get_empty_line_height),
	(label_get_total_text_and_line_offset_height),
	(label_recompute_line_geometries):
	Update for scalable font changes.
	
	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_measure_text_lines),
	(athena_scalable_font_draw_text_lines_with_dimensions),
	(athena_scalable_font_draw_text_lines):
	* libathena-extensions/athena-scalable-font.h:
	Add empty_line_height argument to text line measuring and drawing
	functions.  Use this in both measure and drawing computations.
		
	* test/test-athena-font.c: (gdk_pixbuf_draw_rectangle),
	(draw_rectangle_around), (main):
	Update for scalable font changes.  Also draw a box around area
	that is being clipped (or measured) to determine whether things
	work precisely.

2000-09-07  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/command-line/eazel-alt-install-corba.
	c: (install_failed), (main):
	Default to services.eazel.com instead of ham.eazel.com
	Nicer print for install failed in the case the package is already
	installed.
	Free the category & package date structures.
	
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_install_failed), (impl_uninstall_failed):
	Free some category & package date structures (leak fixing project)
	
	* components/services/install/lib/eazel-install-corba-types.c:
	(categorydata_list_from_corba_categorystructlist):
	Fixed a g_new(categorydata) to categorydata_new
	
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install_install_packages),
	(impl_Eazel_Install_simple_query):
	Inserted some newlines (exiting eh ?)
	
	* components/services/install/lib/eazel-install-md5.h:
	* components/services/install/lib/eazel-install-md5.c:
	(md5_get_digest_from_md5_string):
	Added a call that converts a md5 string into a 16 byte digest
	string.
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize):
	Some newlines!!
	
	* components/services/install/lib/eazel-install-protocols.h:
	* components/services/install/lib/eazel-install-protocols.c:
	(http_fetch_remote_file), (eazel_install_fetch_package),
	(eazel_install_fetch_package_which_provides),
	(get_url_for_package):
	Added comments to what get_url_for_package and
	get_search_url_for_package does.
	Removed excess code from http_fetch_remote_file (creation of temp
	dir).
	Changed get_url_for_package to take a packagedata object as last
	argument. This is used for setting the serverside md5. Also uses
	trilobite_fetch_uri now.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query):
	Inserted newlines (okay, I do that a lot, it makes the code
	readable...)
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_flatten_categories),
	Changed to initally copy the category->packages. That way I don't
	end up having a list in the category where the first element is
	NULL (leak).
	(eazel_install_download_packages),
	(eazel_install_pre_install_packages),
	Nuke the modifies list after called check_existing. No reason to
	send those to the client, since the status flags is updated to
	show that the package is already installed.
	(eazel_install_do_transaction_md5_check),
	Finished the md5 checking (thus my required milestone bugs are
	done now, woohoo)
	(eazel_install_prune_packages),
	Commented out the block that destroys packagedata objects.
	(eazel_install_check_existing_packages),
	Set the stats to "already installed".
	(eazel_install_fetch_rpm_dependencies),
	(eazel_uninstall_check_for_install):
	Removed silly g_messages in danish that I used for debugging.
	
	* components/services/install/lib/eazel-install-types.h:
	Removed some weird old structure defines.
	
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_new), (categorydata_destroy_foreach),
	(packagedata_destroy):
	Added some more messages in the category/packagedata alloc/dealloc
	debugging.
	
	* components/services/install/lib/eazel-install-xml-package-list.c:
	(generate_xml_package_list), (osd_parse_implementation),
	(osd_parse_softpkg), (osd_parse_shared),
	(parse_osd_xml_from_memory):
	Added D: to some stdout stuff.
	Decodes the MD5 tag
	Had to add a hack to compensate for lack of useragent in gnome-vfs
	http (bug 2862)
	
	* components/services/trilobite/libtrilobite/trilobite-core-utils.h
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_fetch_uri), (trilobite_fetch_uri_to_file),
	(trilobite_fetch_uri), (trilobite_fetch_uri_to_file):
	Wrote "slim" versions that use libghttp, for the bootstrap
	installer.
	
	* athena-installer/src/.cvsignore:
	Ignore the prezip binary
	* athena-installer/src/Makefile:
	* athena-installer/src/link.sh:
	Makefile cosmetics
	
	* athena-installer/src/rpmsearch.cgi:
	The makeshift rpmsearch cgi script.

	* libathena-adapter/.cvsignore
	stuff to ignore stuff.
	
2000-09-06  Daniel Egger  <egger@suse.de>

	* components/help/converters/gnome-db2html2/gdb3html.c: 
	A small beatification.

2000-09-06  Raph Levien  <raph@acm.org>

	* librsvg/test-ft-gtk.c: Added "-a" option for attaching AFM
	files, used to confirm that bugzilla.eazel.com 2141 affects
	TrueType and not Type1 fonts. Also added const to filename
	argument.

	* librsvg/rsvg.c (rsvg_start_svg): Patch for bugzilla.eazel.com
	2239. If width and height are not specified in the SVG file,
	defaults are used. Previously, the creation of the pixbuf was
	failing, causing downstream code to segfault on the NULL.

2000-09-07  Andy Hertzfeld  <andy@eazel.com>

	* libathena-extensions/athena-background.c:
	(athena_background_draw_aa),
	(athena_background_set_color_no_emit),
	(athena_background_set_image_uri_no_emit):
	
	fixed bug 1899, background customization lost when theme changes,
	by clearing the color when the an image is set.  Also, fixed
	bug where color customization wasn't working for the arlo theme,
	by removing the solid color case in background_draw_aa.
	
2000-09-06  Maciej Stachowiak  <mjs@eazel.com>

	* src/athena-application.c, src/athena-shell.c: Fixed FIXME
	bugzilla.eazel.com 2535 (had to be fixed once I made the idl file
	properly includable).

2000-09-06  Maciej Stachowiak  <mjs@eazel.com>

	* libathena/Makefile.am: Fix makefile problem

2000-09-06  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2011, Numeric keypad enter key doesn't work
	right in Search field.

	Fixed bug 2012, Undo doesn't work in search 
	text-entry fields.

	I switched the GtkEntry items to be AthenaEntry items
	and wired up the undo signal handlers.
	
	* src/athena-complex-search-bar.c:
	* src/athena-search-bar-criterion-private.h:
	* src/athena-search-bar-criterion.c:
	(athena_search_bar_criterion_destroy),
	(athena_search_bar_criterion_new_from_values):
	* src/athena-search-bar-criterion.h:
	* src/athena-simple-search-bar.c:
	(athena_simple_search_bar_initialize),
	(athena_simple_search_bar_destroy),
	(athena_simple_search_bar_set_location),
	(athena_simple_search_bar_get_location):

2000-09-06  John Sullivan  <sullivan@eazel.com>

	I almost fixed bug 2598 ("Select All Files" enabled when the
	directory is empty), only to realize at the last moment that
	there is no current API to tell whether a directory view is
	displaying any files or not (just as there is no API to tell
	the count of displayed files, which is part of the problem
	with bug 480).

	While fixing this, I changed the directory view menu-updating 
	mechanism so that the real work gets done in an idle handler 
	instead of immediately, to prevent/fix performance problems 
	caused by multiple menu	updates happening in succession. So I'm
	checking in this performance change but not yet addressing
	bug 2598 itself.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy): remove menu-updating idle handler.
	(update_menus_idle_callback): New function, calls
	fm_directory_view_update_menus and resets idle handler id.
	(schedule_update_menus): New function, adds idle handler that
	calls update_menus_idle_callback.
	(remove_custom_icons_callback), 
	(fm_directory_view_notify_selection_changed),
	(fm_directory_view_load_uri),
	(fm_directory_view_trash_state_changed_callback),
	(fm_directory_view_real_merge_menus): schedule menu update instead
	of doing it immediately.
	(compute_menu_item_info): Add FIXME with bug 2598 here.
	(fm_directory_view_real_update_menus): Update Select All item.

000-09-06  Maciej Stachowiak  <mjs@eazel.com>

	* libathena-adapter/athena-adapter-factory.idl: New IDL
	interface for the special adapter component that will be used to
	wrap ordinary Bonobo components to look like Athena::Views as
	part of the solution to bugzilla.eazel.com #1994.
	* libathena-adapter/Makefile.am: Build a library containing the
	stubs and sekeletons.

	* libathena/athena-view-component.idl: Some changes so this
	IDL file can be included in others safely.
	* libathena/Makefile.am: Made necessary build adjustments for
	the above.

	* configure.in, Makefile.am: add libathena-adapter directory to
	build.
	
2000-09-06  Robin * Slomkowski  <rslomkow@eazel.com>

	* README: added requirment of BEFORE_NEW_UI_HANDLER_1
	tag for bonobo, gtkhtml, eog, xpdf

2000-09-06  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-sidebar-tabs.c: (get_tab_width):
	fixed bug 2505, scale in sidebar tabs shouldn't be hardwired.
	This was made irrelevant when we changed it to use scalable fonts
	instead of the old scaling hack, so I'm just removing the fixme.
	
2000-09-06  Raph Levien  <raph@acm.org>

	* librsvg/test-ft-gtk.c (test_ft_quit): Invoke rsvg_ft_ctx_done()
	to facilitate testing of cleanup and for checking for mem leaks.

	* librsvg/rsvg-ft.c: Actually evict glyphs when glyph cache
	becomes full. Fixed some mem leaks in rsvg_ft_ctx_done - it
	wasn't freeing everything in the context.

2000-09-06  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2816, Home icon doesn't link to changed home directory.

	Now the link is updated both at dekstop launch and whenever
	the user changed the preference in the Navigation pane of
	the preferences dialog.
	
	* src/file-manager/fm-desktop-icon-view.c: (home_uri_changed),
	(fm_desktop_icon_view_initialize), (find_and_update_home_link),
	(place_home_directory), (find_and_rename_trash_link),
	(remove_old_mount_links):

2000-09-06  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-sidebar-title.c: (update_font):
	fixed bug 2499, font leak in sidebar title.
	
	* icons/vector/Makefile.am:
	* icons/vector/vector.xml:
	fixed bug 2206, vector icon zoom control draws wrong, by removing
	the custom zoom control for the vector theme, which was
	experimental and not intended to stay around.

2000-09-06  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-md5.c:
	(_byte_reverse), (md5_update), (md5_final), (md5_get_digest),
	(md5_get_digest_from_file), (main):
	* components/services/install/lib/eazel-install-md5.h:

	Fix evil gint/gchar types in MD5 to use native types according to
	the style guide.
	
2000-09-06  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1794 (New directory view background context menu design)

	Any complaints or revisions of the context menus in directory
	views should be written up as new bugs.

	* libathena-extensions/athena-gtk-extensions.h,
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_menu_insert_separator): New function, slight
	generalization of _append_separator that takes a position.
	(athena_gtk_menu_append_separator): Now calls _insert_separator.
	
	* src/file-manager/fm-icon-view.h: Added supports_auto_layout 
	function pointer for subclasses to optionally override.
	
	* src/file-manager/fm-icon-view.c: 
	renamed details->updating_bonobo_marked_menu_item to
	updating_toggle_menu_item since I realized that it's not
	a Bonobo-specific problem.
	(tighter_layout_callback): updated for API changes.
	(fm_icon_view_using_auto_layout),
	(fm_icon_view_using_tighter_layout): New convenience function
	to share a little code.
	(compute_menu_item_info): Changed toggle_item boolean parameter
	to menu_item_type that returns an enum for normal, check,
	radio, and subtree items; moved some layout-related items in
	here so the context menu can avoid duplicating code.
	(context_menu_layout_radio_item_callback),
	(append_one_context_menu_layout_item): New functions, used by
	layout items in context menu. 
	(insert_one_context_menu_item): Now handles the various menu item 
	types returned by compute_menu_item_info, and returns the new item.
	(append_one_context_menu_item): Now returns the new item.
	(fm_icon_view_create_background_context_menu_items): Add the
	layout items to the context menu per bug 1794.
	(fm_icon_view_supports_auto_layout): New function, calls
	virtual function.
	(real_supports_auto_layout): Returns TRUE.
	(fm_icon_view_initialize_class): Wire up supports_auto_layout.
	(update_layout_menus): Now skips some work if supports_auto_layout
	is false; also updates reversed_order item in a way that works
	even the reversed_order field was changed elsewise.
	(fm_icon_view_get_directory_sort_by),
	(fm_icon_view_set_directory_sort_by),
	(fm_icon_view_get_directory_sort_reversed),
	(fm_icon_view_set_directory_sort_reversed),
	(fm_icon_view_get_directory_auto_layout),
	(fm_icon_view_set_directory_auto_layout): Bail out early if
	supports_auto_layout is false.
	(fm_icon_view_begin_loading): Refactor a little.
	(insert_bonobo_menu_item): Handle the different menu item types
	returned by compute_menu_item_info.
	(set_sort_criterion_by_path): New function, extracted from
	sort_callback so it could be used elsewhere.
	(sort_callback): Now calls set_sort_criterion_by_path.
	(sort_direction_callback): Changed signature so it can be used
	for both Bonobo and Gtk menus; changed implementation not to
	rely on Bonobo menu state.
	(manual_layout_callback): Changed signature so it can be used
	for both Bonobo and Gtk menus
	(layout_changed_callback),  (icon_position_changed_callback): 
	Use new convenience functions.
	(fm_icon_view_merge_menus): Use insert_bonobo_menu_item for
	more items to avoid duplicating code with context menus.
	(update_one_menu_item): Updated for compute_menu_item_info API change.

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_get_directory_sort_by),
	(fm_desktop_icon_view_set_directory_sort_by),
	(fm_desktop_icon_view_get_directory_sort_reversed),
	(fm_desktop_icon_view_set_directory_sort_reversed),
	(fm_desktop_icon_view_get_directory_sort_auto_layout),
	(fm_desktop_icon_view_set_directory_sort_auto_layout): Removed
	these overridden function pointers, obviated by new
	supports_auto_layout.
	(fm_desktop_icon_view_initialize_class): removed function
	pointer wiring for the above set; added function pointer
	wiring for supports_auto_layout.
	(real_supports_auto_layout): New function, returns FALSE.

2000-09-06  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-search-uri.c: Got rid of a FIXME
	for a bug that was already fixed.
	* libathena-extensions/athena-volume-monitor.c: (eject_cdrom):
	Got rid of a FIXME for a bug that was already fixed.

2000-09-06  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-location-bar.c: (try_to_expand_path):
	fixed bug 2828, append a slash when auto-completing
	directory names.
	
2000-09-06  Eli Goldberg  <eli@eazel.com>

	Checked in Athena Smoke Tests to doc tree.

	* docs/smoketests.html

2000-09-06  Darin Adler  <darin@eazel.com>

	Fixed bug 1960 (athena_strdup_strftime relies on glibc strftime
	behavior) and bug 2820 (date/time formatting uses non-standard
	glibc extension).

	* libathena-extensions/athena-glib-extensions.h:
	* libathena-extensions/athena-glib-extensions.c:
	(athena_strdup_strftime): Rewrote athena_strdup_strftime so
	that it provides the features we need, but no longer requires the
	GNU glibc version of strftime.
	(athena_g_string_append_len): Added a half-assed version of the
	GLib 2.0 function g_string_append_len, since I needed it for
	athena_strdup_strftime.
	(test_strftime), (athena_self_check_glib_extensions): Added
	light self-checks for the athena_strdup_strftime function to
	confirm that my rewrite didn't break it.

	* libathena-extensions/athena-file.c:
	(athena_file_get_date_as_string): Refined the comments for
	localizers to make it clear that the GNU "%-" and "%_" extensions
	are allowed, but other GNU extensions are not.

	* components/services/trilobite/libtrilobite/.cvsignore:
	Ignore some generated files that weren't in the list.
	
2000-09-06  Arlo Rose  <arlo@eazel.com>

	* icons/arlo/left-bumper-active-prelight.png:
	Lopped off a pixel.

2000-09-06  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: implement autoscroll
	by stealing code from athena-icon-dnd.c fixes task 2418
	* libathena-extensions/athena-icon-container.c:
	(athena_icon_container_scroll), (reveal_icon),
	(athena_icon_container_update_scroll_region): do not access
	the GtkLayout internal structures but use the gtk accessors.
	ie: gtk_layout_get_[vh]adjustment

2000-09-06  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2644, Enter and Return should invoke file renaming.
	
	* libathena-extensions/athena-icon-container.c:
	(key_press_event):

2000-09-06  Darin Adler  <darin@eazel.com>

	Added checks in Athena to guarantee we will notice leaks
	of UI handlers in the future.

	The check will fire unless you get new Bonobo, since I just fixed
	a UI handler leak bug in Bonobo.

	* src/athena-window.c: (athena_window_real_set_content_view):
	Added code to check for a still-merged Open menu item in the file
	menu. This will catch leaks of UI handlers fairly quickly, instead
	of the traditional way we discover them, after long debugging
	sessions.

	* components/history/athena-history-view.c:
	(history_view_frame_call_end):
	* libathena-extensions/athena-undo-manager.c:
	(release_transaction), (athena_undo_manager_undo):
	* libathena/athena-clipboard.c: (add_menu_items_callback):
	* libathena/athena-undo.c: (undo_manager_unref_cover),
	(athena_undo_attach_undo_manager):
	* libathena/athena-view.c: (view_frame_call_end):
	* src/file-manager/fm-directory-view.c:
	(bonobo_control_activate_callback):
	* src/athena-application.c: (athena_application_startup):
	* src/athena-view-frame-bonobo-embeddable.c:
	(bonobo_subdoc_load_location):
	* src/athena-view-frame-athena-view.c:
	(athena_view_try_load_client):
	* src/athena-view-frame.c: (athena_view_frame_destroy_client),
	(athena_view_frame_load_client):
	Use bonobo_object_dup_ref and bonobo_object_release_unref to
	simplify some code.
	
	* components/loser/content/athena-content-loser.c:
	(loser_merge_bonobo_items_callback):
	* components/loser/sidebar/athena-sidebar-loser.c:
	(loser_merge_bonobo_items_callback):
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_merge_bonobo_items_callback):
	* components/sample/athena-sample-content-view.c:
	(sample_merge_bonobo_items_callback):
	Add missing unref to avoid leaking a UI handler.
	
	* components/services/time/athena-view/trilobite-eazel-time-view.c:
	Remove a bunch of code inside #if 0, which had out of date copies
	of the sample code. I decided this was better than trying to fix
	it.
	
2000-09-06  John Sullivan  <sullivan@eazel.com>

	Fixed bug 2377 (Menu separators in search date criterion
	look wrong and are selectable)

	* src/athena-search-bar-criterion.c:
	(get_date_modified_location_for): Replaced "--" with
	"" when defining menu item text.
	(athena_search_bar_criterion_new_from_values): When
	constructing option menu items, treat empty string specially
	by not translating it and making an insensitive separator.

2000-09-06  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-metadata.c:
	(create_default_metadata), (create_default_configuration_metafile),
	(xml_doc_sanity_checks):
	Removed \n's for g_print/warnings/messages
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_finalize), 
	Changed to call parents finalize
	(eazel_install_alter_mode_on_temp),
	(eazel_install_lock_tmp_dir), (eazel_install_unlock_tmp_dir),
	Calls to chmod all the downloaded files and the tmpdir.
	(eazel_install_delete_downloads),
	(eazel_install_install_packages):
	Moved the deletion of downloads to a seperate call, so revert can
	also reap it's benefits.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_xfer_callback), (eazel_install_fetch_file),
	Fixed download progress emission to only emit with amount==0 once
	for gnome-vfs downloads.
	Also checks for existence of package prior to download. This
	should be safe once md5 checking is done, and prevents
	fetch_dependencies from fetching the same file over and over
	(which maybe should be solver in another way).
	(eazel_install_fetch_package),
	Moved the md5 checking code into eazel_install_start_transaction.
	(eazel_install_fetch_package_which_provides),
	Fixed evil bug I found now that i modified rpmsearch.cgi to
	support ?provides= searches.
	(get_url_for_package):
	Fixed a packagedata_destroy_foreach call.
	
	* components/services/install/lib/eazel-install-public.h:
	Prototypes for the calls to chmod unchmod tmpdir + downloads.
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_flatten_categories), 
	Reversed the order of list concatenation.
	(install_new_packages),
	Creates tmpdir, needed for reverttransaction.
	(eazel_install_download_packages),
	Removed the EAZEL_INSTALL_DOWNLOADS status flag, check the
	downloaded_files list in private instead.
	(eazel_install_monitor_rpm_propcess_pipe),
	Moved a comment reg. parsing rpm --percent here.
	(eazel_install_monitor_subcommand_pipe),
	(eazel_install_do_transaction_md5_check),	
	(eazel_install_start_transaction),
	Moved the md5 checking to be near the installtion routine.
	(eazel_install_check_existing_packages),
	Modified some strings to be more i18n friendly
	(eazel_install_fetch_rpm_dependencies),
	Do a check so the some packages isn't added several times.
	(eazel_install_ensure_deps):
	list append rather then prepend. Seems rpm isn't as nonchalant
	about the order of rpm's as we were led to believe.
	
	* components/services/install/lib/eazel-install-rpm-glue.h:
	Removed the EAZEL_INSTALL_DOWNLOADS status flag, check the
	downloaded_files list in private instead.

	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_new), (packagedata_destroy):
	Made the md5 a pointer rather then char[16];
	
	* components/services/install/lib/makefile.staticlib.in:
	* components/services/trilobite/libtrilobite/makefile.staticlib.in:
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c:
	I needed some cpp loving to keep the gnome-vfs stuff out of
	athena-installer.
	
	* components/services/trilobite/sample/service/sample-service-impl.
	c: (sample_service_finalize), (sample_service_unref),
	(sample_service_class_initialize):
	* components/services/trilobite/sample/command-line/main.c: (main):
	* components/services/trilobite/sample/lib/sample-service-public.h:
	* components/services/trilobite/sample/service/main.c:
	(trilobite_service_factory_destroy):
	Fixed the destroy mechanism's of sample-service (bug 967)
	
	* configure.in:
	Added the mystic libtrilobite/makefile/staticlib.in
	
	* athena-installer/src/Makefile:
	* athena-installer/src/callbacks.c: (begin_install),
	(prep_install), (prep_finish):
	* athena-installer/src/callbacks.h:
	* athena-installer/src/installer.c: (create_finish_page_good),
	(create_finish_page_evil), (create_window),
	(eazel_installer_initialize):
	* athena-installer/src/link.sh:
	More installer loving. Now it enables/disables the next/back
	buttons in a more sane manner, plus handles lack of
	package-list.xml better.

2000-09-05  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_install_packages):
	* components/services/trilobite/libtrilobite/trilobite-core-utils.c
	: (trilobite_init):
	* components/services/trilobite/libtrilobite/trilobite-root-helper.
	c: (trilobite_root_helper_start):

	Fix bug 2684 that would cause an occasional crash if running as
	root (freeing a password that had never been collected).

2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_initialize_class),
	(athena_icon_canvas_item_initialize),
	(athena_icon_canvas_item_destroy),
	(athena_icon_canvas_item_set_arg),
	(athena_icon_canvas_item_get_arg), (icon_canvas_item_is_smooth),
	(athena_icon_canvas_item_get_max_text_width),
	(athena_icon_canvas_item_set_smooth_font),
	(athena_icon_canvas_item_set_smooth_font_size):
	* libathena-extensions/athena-icon-canvas-item.h:
	Add arguments and setter functions to set the font and font size
	in smooth mode.  Also added a function to determine whether we are
	in smooth mode or not.
	
2000-09-05  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-directory-notify.h:
	* libathena-extensions/athena-directory.c:
	(athena_direcotry_copy_move_metadata_key),
	(athena_directory_move_metadata),
	(athena_directory_copy_metadata),
	(athena_directory_schedule_metadata_copy),
	(athena_directory_schedule_metadata_move),
	(athena_directory_schedule_metadata_remove):
	* libathena-extensions/athena-file-changes-queue.c:
	(athena_file_changes_queue_schedule_metadata_remove),
	(athena_file_changes_consume_changes):
	* libathena-extensions/athena-file-changes-queue.h:
	* libathena-extensions/athena-file-operations.c:
	(sync_xfer_callback):
	Add hooks for metadata removal.

2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-lib-self-check-functions.h:
	Add hook for scalable fonts test which im going to add soon.

	* libathena-extensions/athena-scalable-font.h:
	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_text_width), New convenience function to
	measure just the text width.
	(athena_self_check_scalable_font): Add hook for scalable fonts
	test which im going to add soon.

2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_draw_text),
	(athena_scalable_font_draw_text_lines_with_dimensions),
	(athena_scalable_font_draw_text_lines),
	(initialize_global_stuff_if_needed):
	Add support for rendering text on pixbufs without alpha channels.
	
	* libathena-extensions/athena-icon-factory.c: (embed_text):
	No longer need to create a pixbuf with alpha channel duplicate.
	
	* test/test-athena-font.c: (main):
	Paint the pixbuf white before drawing stuff to it.		
	
2000-09-05  Andy Hertzfeld  <andy@eazel.com>

	* icons/arlo/sidebar_tab_pieces/Makefile.am:
	* icons/arlo/sidebar_tab_pieces/fill-active-prelight.png:
	* icons/arlo/sidebar_tab_pieces/left-bumper-active-prelight.png:
	* icons/arlo/sidebar_tab_pieces/right-top-active-prelight.png:
	added new tab pieces for active prelight state
	
	* src/athena-sidebar-tabs.c:
	(athena_sidebar_tabs_load_tab_pieces), (draw_one_tab_themed),
	(athena_sidebar_tabs_expose):
	fixed bug 2504, active tabs don't prelight, by adding, loading
	and drawing the appropriate tab pieces.  Also, moved the text
	down one pixel at Arlo's request.
	
2000-09-05  Arlo Rose  <arlo@eazel.com>
	
	* icons/arlo/sidebar_tab_pieces/left-bumper.png        
	* icons/arlo/sidebar_tab_pieces/left-bumper-active.png
        * icons/arlo/sidebar_tab_pieces/left-bumper-prelight.png
	Took off left side pixel in order to get rid of the double
	black line that was there.

2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* test/Makefile.am:
	* test/font-test.sh:
	Add a dumb script to make it easy to run the font test.
	
	* test/test-athena-font.c: (main):
	Make the clipping test better; clip both vertically and
	horizontally.

2000-09-05  John Sullivan  <sullivan@eazel.com>

	Much context-menu-related cleanup and some bug fixes.

	2734: comment fm_directory_view_add_context_menu_item

	* libathena-extensions/athena-gtk-extensions.h,
	* libathena-extensions/athena-gtk-extensions.c:
	(athena_gtk_menu_append_separator): New convenience function
	for appending a separator to a GtkMenu.
	(athena_gtk_menu_set_item_visibility): New convenience function
	for hiding/showing a menu item in a GtkMenu.
	
	* src/file-manager/fm-directory-view.h:
	Removed overridable function pointers for 
	create_background_context_menu_zoom_items and
	create_background_context_menu_background_items; I made sure the
	API supports what these were used for in a more general way.
	Added overridable function pointer for supports_zooming. Now the
	base class handles disabling/removing things for subclasses that
	don't support zooming.
	Changed fm_directory_view_add_context_menu_item to
	_insert_context_menu_item and gave it a position parameter.
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize_class): removed function pointer
	assignment for deleted calls; added function pointer assignment
	for new supports_zooming call.
	(select_all_callback): Removed this function because I removed
	the item from the context menu (as per bug 1794).
	(fm_directory_view_bump_zoom_level),
	(fm_directory_view_zoom_to_level),
	(fm_directory_view_set_zoom_level),
	(fm_directory_view_restore_default_zoom_level),
	(fm_directory_view_can_zoom_in), (fm_directory_view_can_zoom_out):
	Bail out without calling overridable function pointer for these
	calls if supports_zooming is FALSE.
	(finish_inserting_menu_item): New function, generalization of
	finish_appending_menu_item that takes a position.
	(finish_appending_menu_item): Now calls finish_inserting_menu_item.
	Also, renamed this from finish_adding_menu_item.
	(compute_menu_item_info): Removed ellipsis from "Show Properties"
	and added comment explaining why it needs no ellipsis.
	(append_gtk_menu_item_with_view),
	(append_selection_menu_subtree): Update for adding -> appending rename.
	(fm_directory_view_insert_context_menu_item): Generalization of
	_append_context_menu_item that takes a position parameter.
	(fm_directory_view_append_context_menu_item): Renamed from
	_add_context_menu_item, and now calls _insert_context_menu_item.
	(real_create_background_context_menu_zoom_items),
	(real_create_background_context_menu_background_items):
	Removed these functions. These menu items are no longer treated as
	special cases.
	(fm_directory_view_real_create_background_context_menu_items):
	Now inserts zooming items only if supports_zooming is TRUE;
	resurrected the accidentally-obliterated "Reset Background" item.
	(add_separator): Removed this function in favor of 
	athena_gtk_menu_append_separator.
	(add_application_to_gtk_menu), (add_component_to_gtk_menu),
	(create_open_with_gtk_menu),
	Update for API renames.
	(fm_directory_view_real_create_selection_context_menu_items):
	Use athena_gtk_menu_append_separator.
	(fm_directory_view_supports_zooming): New function, calls 
	virtual function.
	(fm_directory_view_real_supports_zooming): New function,
	returns TRUE.

	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_create_background_context_menu_items):
	Remove "Icon Captions..." item per bug 1794

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_create_background_context_menu_zoom_items),
	(fm_desktop_icon_view_create_background_context_menu_background_items),
	(bump_zoom_level), (zoom_to_level), (restore_default_zoom_level),
	(can_zoom_in), (can_zoom_out): Removed these functions due to
	reworking the responsibilities of super- and subclass.
	(real_supports_zooming): New function, returns FALSE.	
	(fm_desktop_icon_view_initialize_class): Remove overrides of various
	functions; add override for supports_zooming.
	(new_folder_menu_item_callback): Removed this now that it inherits
	New Folder from parent.
	(fm_desktop_icon_view_create_background_context_menu_items):
	Cleaned this up to start with inherited and make modifications
	as necessary rather than reimplementing the whole thing.

2000-09-05  Robey Pointer  <robey@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package):
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_download_packages):
	* components/services/install/athena-view/athena-service-instal
	l-view.c: (athena_service_install_downloading):
	* components/services/install/server/main.c:
	(trilobite_service_factory_destroy), (main):

	Fix small bug in eazel-install (don't set the downloaded flag if
	the rpm didn't get downloaded); correct FIXME comment; clean up
	install main to have the right log domain and remove unused code.

2000-09-05  Michael Engber  <engber@eazel.com>
	
	We now update the gnome_config settings that store the list
	of background images that populate the background capplet's
	popup menu. bug 2343.

	* libathena-extensions/athena-directory-background.c:
	(athena_directory_background_write_desktop_settings):

2000-09-05  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c: implement task bugzilla.eazel.com
	2416

2000-09-05  Andy Hertzfeld  <andy@eazel.com>

	fixed bug 2610, can't delete duplicate colors from property browser.
	Also, made property browser use anti-aliased item labels
		
	* src/athena-property-browser.c: (remove_color),
	(add_new_button_callback), (remove_button_callback),
	(element_clicked_callback), (make_properties_from_directories):
	fixed bug by checking for delete property when finding item to delete;
	also, set up athena_buffered_widget properities for labels
	* src/athena-search-bar-criterion.c: (make_emblem_value_menu):
	made it use athena_label routines to access returned label text	
	* libathena-extensions/athena-customization-data.h:
	changed type of label returned from GtkLabel to GtkWidget
	* libathena-extensions/athena-customization-data.c:
	(athena_customization_data_get_next_element_for_display):
	return a athena_label instead of a gtk_label
	
2000-09-05  Mathieu Lacage  <mathieu@eazel.com>

	* components/tree/athena-tree-view.c:
	(athena_tree_view_insert_model_node): add some dnd UI nicety.
	GtkCTreeNode now hold a pointer to their AthenaTreeNode instead 
	of their char *uri.
	
	* libathena-extensions/athena-search-uri.c:
	(athena_self_check_search_uri): fix tests after rebecka 
	second break of them :)

2000-09-05  Darin Adler  <darin@eazel.com>

	* check-FIXME.pl: Removed some special-case file names
	that aren't needed any more.
	
	* libathena-extensions/athena-file-operations.c:
	(get_link_name): Added comments to help localizers.
	* libathena-extensions/athena-file.c:
	(athena_file_get_date_as_string): Added comments to help
	localizers. Deals with bug 2720 (Please add a comment to help
	localizers do date translations)
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text): Added a comment to help localizers.
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_display_selection_info): Unmarked one string
	that doesn't make sense to translate and adding a comment to
	another to explain why it is marked for translation.
	(add_separator): Changed add_open_with_gtk_menu_item into this
	function, which deals with bug 2735 (add_open_with_gtk_menu_item
	only called to create separator?).
	(create_open_with_gtk_menu): Call the new add_separator function.
	* src/athena-zoom-control.c: (create_zoom_menu_item): Added a
	comment to help localizers.
	
	* libathena-extensions/athena-link.c: (make_local_path): Fixed
	logic here that was doing strange things with URIs.  This deals
	with bugs 2492 (Incorrect unescaping when dealing with link
	files), 2493 (Mysterious and probably incorrect "+7" when escaping
	URI for link file), and 2737 (link code must make path into URI).
	
	* libathena-extensions/athena-search-bar-criterion.c:
	* libathena-extensions/athena-search-bar-criterion.h:
	* po/POTFILES.in:
	Removed these duplicate files. Rebecca moved them to src, but she
	didn't remove the old ones. I didn't have to remove them from the
	makefile, since they were already removed, but I had to remove
	them from the list of files to translate.
	
	* src/athena-search-bar-criterion.h:
	* libathena-extensions/athena-search-uri.h:
	Moved some of the stuff from athena-search-bar-criterion.h to
	here, since it's really about search URIs, not specific to the
	search bar. Over time we will move more.
	
	* src/athena-search-bar-criterion.c: Added include of the
	athena-search-uri.h header now that stuff was moved there.
	
	* src/file-manager/fm-search-list-view.c:
	Fixed includes to get the athena-search-bar-criterion.h from its
	new location. This is not a real solution to the problem that was
	exposed by moving the search bar code. The bug 2815 covers this.
	* src/athena-complex-search-bar.c: Fix search bar so it gets
	the real location of the header. It was including the old one.
	* src/athena-simple-search-bar.c: Fix search bar so it gets
	the real location of the header. It was including the old one.

	* src/athena-main.c: (main): Some small cleanups including some
	additional parameter checking and returning a failure code to
	the invoking shell in the case where the parameters are not
	consistent.
	
2000-09-05  Pavel Cisler  <pavel@eazel.com>

	* configure.in:
	Remove the -Wuninitialized to unbreak the build.
	(It should be part of -Wall so it's probably not needed anyhow).

2000-09-05  Pavel Cisler  <pavel@eazel.com>

	* components/help/converters/gnome-db2html2/gdb3html.c:
	(xml_parse_document):
	* components/help/hyperbola-nav-index.c: (end_element):
	* components/services/summary/athena-view/athena-summary-view.c
	: (logout_button_cb):
	* components/services/time/service/trilobite-eazel-time-service.c:
	(trilobite_eazel_time_service_do_http_request):
	* components/tree/athena-tree-view.c:
	* configure.in:
	* libathena-extensions/bonobo-stream-vfs.c:
	(bonobo_stream_vfs_open):
	* libathena-extensions/athena-background.c:
	(athena_background_draw), (athena_background_draw_aa):
	* libathena-extensions/athena-customization-data.c:
	(athena_customization_data_new):
	* libathena-extensions/athena-directory-background.c:
	(athena_directory_background_write_desktop_settings):
	* libathena-extensions/athena-file-operations.c:
	(athena_file_operations_move_to_trash), (do_empty_trash):
	* libathena-extensions/athena-file.c: (athena_file_dump):
	* libathena-extensions/athena-icon-canvas-item.c:
	(draw_or_measure_label_text), (emblem_layout_next):
	* libathena-extensions/athena-icon-factory.c:
	(get_image_from_cache):
	* libathena-extensions/athena-icon-text-item.c:
	(iti_paint_text):
	* libathena-extensions/athena-list.c: (draw_cell), (draw_row):
	* libathena-extensions/athena-mime-actions.c:
	(athena_mime_add_application_to_short_list_for_uri):
	* libathena-extensions/athena-program-chooser.c:
	(program_file_pair_get_short_status_text),
	(program_file_pair_get_long_status_text):
	* libathena-extensions/athena-program-choosing.c:
	(athena_choose_component_for_file),
	(athena_choose_application_for_file):
	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_draw_text_lines_with_dimensions):
	* libathena-extensions/athena-theme.c:
	(athena_theme_make_selector):
	* librsvg/rsvg-ft.c: (rsvg_ft_get_glyph):
	* librsvg/test-ft-gtk.c: (set_text):
	* librsvg/test-ft.c: (save_pixbuf_to_file_internal),
	(save_pixbuf_to_file):
	* librsvg/test-rsvg.c: (save_pixbuf_to_file_internal),
	(save_pixbuf_to_file):
	* src/file-manager/fm-directory-view.c: (display_pending_files),
	(compute_menu_item_info):
	* src/file-manager/fm-icon-view.c: (compute_menu_item_info):
	* src/file-manager/fm-list-view.c: (get_column_from_attribute):
	* src/athena-application.c: (athena_application_startup):
	* src/athena-search-bar-criterion.c:
	(athena_search_bar_criterion_next_new),
	(athena_search_bar_criterion_get_location),
	(get_date_modified_location_for):
	* src/athena-sidebar-tabs.c: (draw_one_tab_themed),
	(draw_or_layout_all_tabs):
	* src/athena-toolbar.c: (athena_toolbar_size_allocate):
	* src/athena-window-manage-views.c:
	(athena_window_get_current_location_title):
	* test/test-athena-label.c: (justification_changed_callback):

	Fix all the warnings -Wuninitialized found.
	Quite a number of them were actual bugs.
	Turn on -Wuninitialized in configure.in now that ORBit generates 
	warning-free code.
	
2000-09-05  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1247 ("Edit Novice Settings" menu item
	needs to be handled better)

	Now this menu item is enabled, and choosing it explains
	that you can't edited the Novice settings but offers
	to switch to Intermediate and let you edit those
	settings.

	* libathena-extensions/athena-user-level-manager.c,
	* libathena-extensions/athena-user-level-manager.h:
	Made the #defines for the user level ints public, so
	code elsewhere could use them rather than hardwiring
	a bunch of 0s, 1s, and 2s.

	* libathena-extensions/athena-caption-table.h:
	* libathena-extensions/athena-caption.h:
	* libathena-extensions/athena-font-picker.h:
	* libathena-extensions/athena-global-preferences.h:
	* libathena-extensions/athena-password-dialog.h:
	* libathena-extensions/athena-preference.h:
	* libathena-extensions/athena-preferences-box.h:
	* libathena-extensions/athena-preferences-dialog.h:
	* libathena-extensions/athena-preferences-group.h:
	* libathena-extensions/athena-preferences-item.h:
	* libathena-extensions/athena-preferences-pane.h:
	* libathena-extensions/athena-preferences-private.h:
	* libathena-extensions/athena-preferences.h:
	* libathena-extensions/athena-radio-button-group.h:
	* libathena-extensions/athena-string-picker.h:
	* libathena-extensions/athena-text-caption.h:
	Changed the closing BEGIN_GNOME_DECLS in these header files
	to END_GNOME_DECLS.
	
	* src/athena-window-menus.c:
	(get_user_level_string_for_display): New function, extracted
	from get_customize_user_level_string. Returns the user level
	string to be put into user messages or menu item names.
	(get_customize_user_level_string): Now calls 
	get_user_level_string_for_display
	(switch_and_show_intermediate_settings_callback): New function,
	switches to intermediate level and displays the user level
	settings dialog.
	(user_level_customize_callback): If the current user level is
	ATHENA_USER_LEVEL_NOVICE, puts up a dialog telling the user
	that the Novice settings can't be changed, and asking them if
	they want to switch to Intermediate and edit those settings.
	(get_user_level_image), (user_level_changed_callback),
	(athena_window_initialize_menus), 
	(convert_menu_path_to_user_level),
	(convert_user_level_to_menu_path): 
	Use #defines for user levels instead of hardwiring integers.
	(switch_to_user_level): New function, extracted from
	user_level_menu_item_callback. Switches to a specified user
	level and updates menu items & title image appropriately.
	(user_level_menu_item_callback): Now calls switch_to_user_level.
	(update_user_level_menu_items): Don't desensitize the Edit 
	Settings item at Novice user level anymore.

2000-09-05  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-shell.c: (display_caveat):
	Now that Ramiro fixed the problems in AthenaLabel,
	made the caveat dialog use anti-aliased text

2000-09-05  Gene Z. Ragan  <gzr@eazel.com>

	* libathena-extensions/athena-link.c:
	(athena_link_get_image_uri):
	Added a check for a NULL image tag returned
	by am XML property retrieval.

2000-09-05  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-directory.c:
	(athena_direcotry_copy_move_metadata_key),
	(athena_directory_copy_metadata_key),
	(athena_directory_move_metadata_key),
	(athena_directory_move_metadata),
	(athena_directory_copy_metadata),
	(athena_directory_schedule_metadata_copy),
	(athena_directory_schedule_metadata_move):
	Work on metadata copying.
	For now hardcode the metadata keys that get copied.
	Metadata move does not remove old metadata in source location yet.

2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-icon-factory.c: (embed_text):
	Fix a bug I just introduced drawing embedded text in the non
	smooth case.  We need to make sure the pixbuf we feed to the text
	rendering code has an alpha channel.
	
2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	More work on task 1588.

	* libathena-extensions/athena-icon-factory.c: (embed_text):
	Use AthenaScalableFont to render embedded text.
	
2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_draw_text_lines):
	Add a FIXME for a performance issue.
	
2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-label.c: (render_buffer_pixbuf):
	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_draw_text_lines_with_dimensions),
	(athena_scalable_font_draw_text_lines):
	* libathena-extensions/athena-scalable-font.h:
	Simpify the text line drawing function to not reuqire passing in
	the number of lines or their dimensions.  Compute these when
	needed.  An alternate function that accepts the dimensions is
	available as well.

	* test/test-athena-font.c: (main):
	Draw both text lines and single line clipped text to test more
	stuff.
	
2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	Complete task 1733 - need mozilla component support for grokking
	eazel: uris.

	* components/mozilla/athena-mozilla-content-view.c:
	(athena_mozilla_content_view_initialize),
	(athena_mozilla_content_view_destroy), (bonobo_mozilla_callback),
	(mozilla_net_state_callback), (mozilla_open_uri_callback),
	(mozilla_dom_mouse_click_callback):
	For mozilla M17, add support for registering the eazel protocol
	handler.  For mozilla M18, add support for peeking dom events -
	this is the preffered way to deal with these special uris, however
	we cant turn this on until mozilla M18 is released.

2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/eazel-protocol-handler/eazel-protocol-channel.cpp:
	Damn, some of this code only builds with mozilla M18.  Updating
	for that.
	
2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	More work on task 1733.

	* components/mozilla/eazel-protocol-handler/.cvsignore:
	* components/mozilla/eazel-protocol-handler/Makefile.am:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-channel.cpp:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-channel.h:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-handler.cpp:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-handler.h:
	* components/mozilla/eazel-protocol-handler/eazel-protocol-module.cpp:
	New files.  A mozilla XPCOM component to grok eazel: protocol uris.
	
	* components/mozilla/Makefile.am:
	Build the eazel-protocol-handler
	
	* configure.in:
	Build the eazel-protocol-handler

2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* components/tree/.cvsignore:
	Ignore generated files.
	
2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	More work on task 1588.

	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_draw_text),
	(athena_scalable_font_measure_text_lines),
	(athena_scalable_font_draw_text_lines):
	* libathena-extensions/athena-scalable-font.h:
	Change text rendering api to take in x,y coordinates along with a
	clip_area.  

	Remove some #if 0 code i left in before.

	Also change the text lines rendering api to optionally do its own
	line measuring - for the convenience of the caller.
	
	* libathena-extensions/athena-label.c: (render_buffer_pixbuf):
	Update for text rendering changes.
	Fix the justification bug.
	Fix the multiple newlines bug.
	
	* src/athena-about.c: (draw_aa_string):
	Update for text rendering changes.
	
	* src/athena-sidebar-tabs.c: (draw_one_tab_plain),
	(draw_one_tab_themed):
	Update for text rendering changes.

	* test/test-athena-font.c: (main):
	Update for text rendering changes.
	Also add multiple new lines test and clipping test.
	
	* test/test-athena-label.c: (main):
	Update for text rendering changes.

2000-09-05  Ramiro Estrugo  <ramiro@eazel.com>

	* librsvg/rsvg-ft.c: (rsvg_ft_render_string):
	Add a band aid fix for the unknown character problem when trying
	to index glyphs from a font face.  I filed a bug for this issue:
	2775.
	
2000-09-04  Maciej Stachowiak  <mjs@eazel.com>

	* src/athena-window-manage-views.c
	(athena_window_update_view): Fix bug 2462 by causing a NULL
	selection to be interpreted as no selection, rather than an empty
	selection.

2000-09-05  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-theme-selector.c:
	(athena_theme_selector_initialize), (add_theme_to_icons),
	(dialog_destroy), (add_new_theme_button_callback):
	implement the "add new theme" command by invoking a file dialog;
	this still isn't finished yet.
	
2000-09-04  Ramiro Estrugo  <ramiro@eazel.com>

	Work on task 1588.

	* configure.in:
	* data/Makefile.am:
	* data/fonts/.cvsignore:
	* data/fonts/Makefile.am:
	* data/fonts/urw/.cvsignore:
	* data/fonts/urw/Makefile.am:
	* data/fonts/urw/README:
	* data/fonts/urw/fonts.dir:
	Add a fallback font in case no Type1 fonts are found in the
	system.  This font was plucked from the ghostscript-fonts-5.10a
	package. See data/fonts/urw/README for more info.
	
2000-09-04  Andy Hertzfeld  <andy@eazel.com>

	* icons/Makefile.am:
	* icons/i-web-72.png:
	added a new icon for generic http documents, which is just a
	placeholder.
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_name_for_regular_file):
	made it use a distinct icon for generic documents if the protocol
	associated with the file is "http", so the sidebar can have a decent
	icon when displaying websites.  The current icon is just a placeholder.
	
2000-09-04  Ramiro Estrugo  <ramiro@eazel.com>

	Work on task 1733.

	* configure.in:
	Add macros for only xpcom and nspr libs (for components)
	Add check for mozilla M18 - evil in its purest form.
	
2000-09-04  Ramiro Estrugo  <ramiro@eazel.com>

	Work on task 1733.

	* components/mozilla/mozilla-components.cpp:
	Quiet down the debug noise.

	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/mozilla-events.h:
	A new wrapper for grokking mozilla dom events.

	* components/mozilla/Makefile.am:
	Build the events code.
	
2000-09-04  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-buffered-widget.c:
	(create_background_pixbuf_from_ancestor):
	Remove an assertion that is not needed.
	
2000-09-04  Ramiro Estrugo  <ramiro@eazel.com>

	Work on task 1588.
	
	* libathena-extensions/athena-scalable-font.c:
	(athena_scalable_font_measure_text),
	(athena_scalable_font_draw_text),
	(athena_scalable_font_measure_text_lines),
	(athena_scalable_font_draw_text_lines),
	(athena_scalable_font_measure_text_lines),
	(athena_scalable_font_draw_text_lines),
	(athena_scalable_font_largest_fitting_font_size):
	* libathena-extensions/athena-scalable-font.h:
	Change api to accept a string with embedded new lines instead of
	an array of strings.  This simplifies many things.
	
	* libathena-extensions/athena-label.c:
	(athena_label_initialize), (athena_label_destroy),
	(render_buffer_pixbuf), (label_recompute_line_geometries):
	Update for AthenaScalalbleFont api changes.  No longer need to
	tokenize the text string.  we can feed the string to the rendering
	api as is.
	
	* librsvg/rsvg-ft.c: (rsvg_ft_render_string):
	* librsvg/rsvg-ft.h:
	Change the string to glyph rendering api to accept the string
	length rather than computing it.  This makes it possible to feed
	it arbitrary lengths.
	
	* librsvg/rsvg.c: (rsvg_text_handler_characters):
	* librsvg/test-ft-gtk.c: (draw_line):
	* librsvg/test-ft.c: (main):
	Update for api changes.
	
	* src/athena-about.c: (draw_aa_string):
	* src/athena-sidebar-tabs.c: (draw_one_tab_plain),
	(draw_one_tab_themed), (get_tab_width):
	* test/test-athena-font.c: (main):
	Update test to use text lines drawing api.
	
	* test/test-athena-label.c:
	(alpha_background_color_value_changed_callback), (main):
	Update test for 2 new lines in a row.

2000-09-04  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-string-list.c:
	(athena_self_check_string_list):
	Make the tokens test a little better.

2000-09-04  Maciej Stachowiak  <mjs@eazel.com>

	* configure.in: Set shared library tree view as default,
	completing task 1647.

2000-09-04  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/athena-tree-model.c:
	(athena_tree_model_initialize), (athena_tree_model_destroy),
	(athena_tree_model_for_each_postorder),
	(athena_tree_model_monitor_remove),
	(athena_tree_model_get_node), (report_node_added),
	(report_node_changed), (report_node_removed_internal),
	(athena_tree_model_directory_files_changed_callback):
	* components/tree/athena-tree-node-private.h:
	* components/tree/athena-tree-node.c:
	(athena_tree_node_destroy), (athena_tree_node_new),
	(athena_tree_node_get_uri):
	* components/tree/athena-tree-node.h:
	* components/tree/athena-tree-view.c:
	(athena_tree_view_insert_model_node):

	Architecture changes to properly handle the case where a
	AthenaFile object changes name or location. In brief, the tree
	model keeps a hash keyed on AthenaFiles instead of on uris, and
	tries to remember the URI of a node to detect when the URI
	changes. When the URI changes, it gives a remove notification
	followed by an add notification.
	
2000-09-03  Andy Hertzfeld  <andy@eazel.com>

	made the arlo sidebar tabs use the official anti-aliased text machinery,
	instead of the scaling hack it was using.  Also, made the non-themed
	tabs use anti-aliased text.
	
	* src/athena-sidebar-tabs.c:
	(athena_sidebar_tabs_load_theme_data),
	(athena_sidebar_tabs_destroy), (make_colored_pixbuf),
	(draw_one_tab_plain), (draw_one_tab_themed), (get_tab_width):
	use AthenaScalableFont to render and measure the labels, for both
	types of tabs
	
Sun Sep 03 19:09:49 2000  George Lebl <jirka@5z.com>

	* src/athena-first-time-druid.c (athena_first_time_druid_show):
	  mark druid_welcome.png for translation (it contains english text)
	  and put in a comment explaining why which should appear in the
	  .po file.

2000-09-03  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/athena-tree-model.c
	(athena_tree_model_for_each_postorder): Some optional debugging
	statements.
	(athena_tree_model_monitor_remove): Also unmonitor any nodes
	that might be monitored by this client.

	* components/tree/athena-tree-view.c
	(athena_tree_view_destroy): Stop monitoring the model

2000-09-03  Ali Abdin  <aliabdin@aucegypt.edu>

        I now consider navigation links to be 'done' (Fixes bug #2201)

        * components/help/converters/gnome-db2html2/gdb3html.c:
        (parse_file): Renamed a variable. Updated the call to sect_footer.
        Cleaned up in a couple misc. spots
        (sect_footer): Renamed the variables to be more descriptive. Modified
        calls to print_footer (function changed + we now pass the full URI).
        Fixed memory leaks by actually freeing the variables.
        (print_footer): Change the function arguments to make it a 'sane'
        function. Also - just print what we recieve.

        * components/help/converters/gnome-db2html2/toc-elements.c:
        (toc_title_start_element),
        (toc_title_end_element):
        Disable the links to sect2/sect3/sect4/sect5 tags as they already get
        'included' with the sect1 tags.

        Ideally we should create anchor tags in the sect1 'pages' and use that
        instead, but this will not work due to mozilla issues

2000-09-03  Maciej Stachowiak  <mjs@eazel.com>

	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_package):
	* components/services/login/athena-view/athena-login-view.c:
	(athena_login_view_initialize):
	* components/services/summary/athena-view/athena-summary-view.c
	: (authn_cb_succeeded), (authn_cb_failed), (login_button_cb),
	(athena_summary_view_initialize):
	* components/tree/libmain.c: (tree_shlib_object_destroyed):
	* components/tree/athena-tree-view.c:
	* libathena-extensions/athena-link.c: (make_local_path):
	* libathena-extensions/athena-search-bar-criterion.c:
	(make_emblem_value_menu):
	* src/file-manager/fm-directory-view.c:
	(add_open_with_gtk_menu_item):
	* src/athena-search-bar-criterion.c: (make_emblem_value_menu),
	(emblems_changed_callback):

	Added bug numbers for FIXMEs
	
2000-09-03  Pavel Cisler  <pavel@eazel.com>

	* libathena-extensions/athena-directory-notify.h:
	* libathena-extensions/athena-directory.c:
	(athena_directory_schedule_metadata_copy),
	(athena_directory_schedule_metadata_move):
	* libathena-extensions/athena-file-changes-queue.c:
	(athena_file_changes_queue_schedule_metadata_copy),
	(athena_file_changes_queue_schedule_metadata_move),
	(athena_file_changes_consume_changes):
	* libathena-extensions/athena-file-changes-queue.h:
	* libathena-extensions/athena-file-operations.c:
	(progress_dialog_set_files_remaining_text),
	(handle_xfer_vfs_error), (handle_xfer_duplicate),
	(sync_xfer_callback):
	Work on task bugzilla task 330.
	Add notification hooks for metadata copying to AthenaFileChangesQueue.
	Using the new top_level_item, call the hooks from the copy engine 
	synchronous callback. 

2000-09-03  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/athena-tree-view.c: (insert_hack_node,
	remove_hack_node, freeze_if_have_hack_node): Remove gratuitous
	debugging messages.

2000-09-03  Andy Hertzfeld  <andy@eazel.com>

	* components/rpmview/athena-rpm-verify-window.h:
	added "continue" signal
	* components/rpmview/athena-rpm-verify-window.c:
	(athena_rpm_verify_window_initialize_class),
	(continue_button_callback), (cancel_button_callback),
	(athena_rpm_verify_window_initialize),
	(athena_rpm_verify_window_set_error_mode):
	implemented verify error presentation, by adding a continue and cancel button,
	with a method to show them, and a signal to resume verification after errors
	
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_verify_files),
	(athena_rpm_view_verify_package_callback),
	(rpm_view_continue_verify):
	connect to the "continue" signal and resume verification; remember where we
	left off in an instance variable.  We still need more descriptive messages.
	
2000-09-02  Andy Hertzfeld  <andy@eazel.com>

	* components/rpmview/Makefile.am:
	* components/rpmview/athena-rpm-verify-window.c,h:
	(athena_rpm_verify_window_initialize_class),
	(athena_rpm_verify_window_destroy),
	(athena_rpm_verify_window_initialize),
	(athena_rpm_verify_window_new),
	(athena_rpm_verify_window_set_message):
	added verify window class to give feedback during the verify operation
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_destroy), (athena_rpm_view_update_from_uri),
	(athena_rpm_view_verify_package_callback):
	made the verify command work, but it's still needs to handle verification errors
	made the file list work correctly with rpmlib version >= 3.0
	
	* src/athena-about.c: (athena_about_draw_info):
	at Arlo's request, made the comment text in the about window have a white shadow
	
2000-09-02  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/hardware/athena-hardware-view.c:
	(get_RAM_description), (get_IDE_description),
	(setup_overview_form), (setup_IDE_form),
	(athena_hardware_view_load_uri):
	Added Shane Butlers <sbutle@deakin.edu.au> patch for showing IDE
	devices in the hardware overview. Also fixed the size display
	problem (unsigned long overflow).
	
Sat Sep 02 02:56:48 2000  George Lebl <jirka@5z.com>

	* libathena-extensions/athena-icon-canvas-item.c (map_pixbuf),
	  libathena-extensions/athena-theme.c (load_theme_document):
	  Deal with the fact that athena_pixmap_file can return a NULL
	  if the file doesn't exist.

	* src/athena-first-time-druid.c (create_named_pixbuf),
	  (make_hbox_user_level_radio_button):
	  Deal with athena_pixmnap_file_returning NULL.  Also do
	  not assert out when no icon can be loaded.  Things need to
	  work/fail gracefully if icons are not installer properly instead of
	  just asserting.
	  (set_page_sidebar) (athena_first_time_druid_show):
	  Use the create_named_pixbuf function for loading the pixbufs

	* src/athena-shell.c (display_caveat):  Again deal with
	  non-existant image.  If it doesn't exist don't even create the
	  frame for the image.

2000-09-01  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/services/install/lib/eazel-install-types.h:
	* components/services/install/lib/eazel-install-rpm-glue.h:
	* components/services/install/lib/eazel-install-types.c:
	(categorydata_destroy_foreach), (packagedata_new),
	(packagedata_destroy), (packagedata_remove_soft_dep):
	The packagedata_destroy_foreach has been removed,
	packagedata_destroy now takes a boolean that controls the deep
	destroy.
	
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_destroy), (athena_rpm_view_update_from_uri):
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (main):
	Use the categorydata_new call
	
	* components/services/install/lib/eazel-install-corba-callback.c:
	(impl_dep_check), (impl_install_progress),
	(impl_uninstall_progress):
	Fixed to use the changed packagedata_destroy
	
	* components/services/install/lib/eazel-install-corba.c:
	(impl_Eazel_Install_simple_query):
	Call the correct query call
	
	* components/services/install/lib/eazel-install-private.h:
	Added a glist to hold downloaded packages
	
	* components/services/install/lib/eazel-install-object.c:
	(eazel_install_initialize), (eazel_install_install_packages),
	(eazel_install_uninstall_packages),
	(eazel_install_revert_transaction_from_xmlstring),
	(eazel_install_query_package_system),
	(eazel_install_emit_install_progress_default):
	Modified the deletion, so it now deletes all downloaded files (and
	only downloaded files). Also this file is now responsible for
	calling prepare_package_system.
	
	* components/services/install/lib/eazel-install-protocols.c:
	(eazel_install_fetch_file):
	Added downloaded packages to the glist in eazel_install.
	
	* components/services/install/lib/eazel-install-query.c:
	(eazel_install_simple_rpm_query), (eazel_install_simple_query):
	Removed the prepare/free_package_system calls
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_flatten_categories),
	(eazel_install_download_packages),
	(eazel_install_pre_install_packages),
	(eazel_install_do_install_packages), (uninstall_all_packages),
	(ei_get_packages_with_mod_flag), (ei_check_uninst_vs_downgrade),
	(revert_transaction), (eazel_install_do_transaction_fill_hash),
	(eazel_install_do_transaction_get_total_size),
	(eazel_install_start_transaction_make_argument_list),
	(eazel_install_do_transaction_save_report_helper),
	(eazel_install_display_arguments),
	(eazel_install_start_transaction),
	(eazel_install_prune_packages_helper),
	(eazel_install_prune_packages), (eazel_install_load_rpm_headers),
	(eazel_install_free_rpm_system),
	(eazel_install_prepare_rpm_system), (eazel_install_add_to_rpm_set),
	(eazel_install_add_to_extras_foreach),
	(eazel_install_check_existing_packages),
	(eazel_install_fetch_rpm_dependencies), (print_package_list),
	(eazel_install_ensure_deps), (eazel_uninstall_upward_traverse),
	(eazel_uninstall_downward_traverse),
	(eazel_uninstall_check_for_install), (eazel_uninstall_globber):
	changed all the iterations to use g_list_next.
	Changed the packagedata_destroy calls
	Fixed the reversion
	Modified the prepare package system scheme
	
	* components/services/install/athena-view/athena-service-instal
	l-view.c: (athena_install_parse_uri),
	(athena_service_install_view_update_from_uri):
	Changed the packagedata_destroy calls.
	Used categorydata_new instead of g_new
	
	* components/services/install/athena-view/athena-service-instal
	l.c: (athena_service_install_view_install_package_callback),
	(athena_service_install_view_uninstall_package_callback):
	Used categorydata_new instead of g_new

	* athena-installer/src/druid-sidebar.xpm:
	Nicer ui
	
	* athena-installer/src/installer.c: (check_system):
	Comment to the danish dialog box...

2000-09-01  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form), (maintenance_button_cb),
	(community_button_cb), (register_button_cb):

	Adding missing buttons to the summary view.

2000-09-01  Robey Pointer  <robey@eazel.com>

	* components/services/login/athena-view/Makefile.am:
	* components/services/login/athena-view/athena-login-view.c:
	(generate_login_form), (entry_changed_cb), (authn_succeeded),
	(authn_failed), (start_login), (login_button_cb),
	(athena_login_view_initialize), (athena_login_view_destroy):

	Fix the "login view" so that it's really the change-password
	view.  Another bug (2710) has been filed on cleaning this up and
	possibly renaming it.

2000-09-01  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory-async.c:
	(athena_directory_is_anyone_monitoring_file_list):
	Made this function public because it's needed to get the
	assert right.
	(start_or_stop_io): Use it by the new public name.
	* libathena-extensions/athena-vfs-directory.c:
	(vfs_is_not_empty): Use the new function to get the assert
	right, which fixes bug 2706 (crash at startup with
	bookmark for nonexistent trash file).
	
	* libathena-extensions/athena-trash-directory.c:
	(remove_trash_volume): Fix a AthenaDirectory leak.

	* libathena-extensions/athena-glib-extensions.c:
	(print_key_string), (free_hash_tables_at_exit):
	Print keys before complaining about hash table so you
	see them first if you have things set to drop into
	the debugger on warnings.

2000-09-01  John Sullivan  <sullivan@eazel.com>

	Changed all athena dialog calls to take a window title
	(or NULL to get "Athena: Error" and the like). Updated 
	all callers to pass a window title.

	* libathena-extensions/athena-stock-dialogs.h,
	* libathena-extensions/athena-stock-dialogs.c:
	(show_message_box), (show_ok_box), (athena_info_dialog),
	(athena_warning_dialog), (athena_error_dialog),
	(athena_error_dialog_with_details), (athena_yes_no_dialog):
	Updated all public & private dialog-creating calls to take
	a dialog_title parameter.

	* components/rpmview/athena-rpm-view-install.c:
	(athena_rpm_view_install_done):
	* libathena-extensions/athena-file-operations.c:
	(confirm_empty_trash):
	* libathena-extensions/athena-program-chooser.c:
	(athena_program_chooser_show_no_choices_message):
	* libathena-extensions/athena-program-choosing.c:
	(athena_launch_application_parented):
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_renaming_file), (fm_report_error_setting_group),
	(fm_report_error_setting_owner),
	(fm_report_error_setting_permissions):
	* src/athena-application.c:
	(athena_application_check_user_directories),
	(athena_application_startup):
	* src/athena-first-time-druid.c:
	(athena_first_time_druid_show):
	* src/athena-property-browser.c: (emblem_image_file_changed),
	(add_background_to_browser):
	* src/athena-sidebar.c: (receive_dropped_uri_list):
	* src/athena-window-manage-views.c: (handle_unreadable_location),
	(report_content_view_failure_to_user),
	(report_sidebar_panel_failure_to_user),
	(athena_window_end_location_change_callback):
	* src/athena-window-menus.c: (forget_history_if_confirmed),
	(show_bogus_bookmark_window): Made up dialog titles for all
	title-less dialogs. A few were already setting titles after
	the fact, so I removed the now-extraneous set_title calls.

2000-09-01  J Shane Culpepper  <pepper@eazel.com>

	* components/services/athena-dependent-shared/shared-service-widg
	ets.c: (create_summary_service_title_top_widget),
	(create_summary_service_title_bottom_widget),
	(create_services_header_widget),
	(create_summary_service_large_grey_header_widget),
	(create_summary_service_small_grey_header_widget):
	* components/services/athena-dependent-shared/shared-service-widg
	ets.h:
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form):

	Finishing Bug #2631.  Arlo titles to all sections of the summary view.

2000-09-01  Michael Engber  <engber@eazel.com>
	
	Removed our quitting logic from athena-application
	(where it was tied to athena-window closing) and added
	a more general mechanism in main.c - by which you can
	register any gtk object to keep the main event loop
	alive while the object is around. This, in turn, fixed 
	a problem with the first-time-druid not causing athena
	to quit when it was cancel via the close box (bug 2211)
	and also a problem with athena quitting before you had
	a chance to see an error dialog (bug 1871). Also, added
	athena_main_event_loop_quit as the preferred way to
	cause athena to quit (as opposed to gtk_main_quit)

	* src/athena-application.c: (athena_application_startup),
	(athena_application_close_desktop),
	(athena_application_destroyed_window):
	* src/athena-application.h:
	* src/athena-first-time-druid.c: (druid_finished),
	(athena_first_time_druid_show):
	* src/athena-main.c: (athena_main_is_event_loop_needed),
	(athena_main_event_loop_unregister),
	(athena_main_event_loop_register),
	(athena_main_is_event_loop_mainstay),
	(athena_main_event_loop_quit), (main):
	* src/athena-main.h:
	* src/athena-shell.c: (corba_quit), (corba_restart):
	* src/athena-window-manage-views.c:
	(athena_window_end_location_change_callback):
	* src/athena-window.c: (athena_window_initialize):

2000-09-01  J Shane Culpepper  <pepper@eazel.com>

	* components/services/athena-dependent-shared/icons/Makefile.am:
	* components/services/athena-dependent-shared/shared-service-widg
	ets.c: (create_summary_service_title_top_widget),
	(create_summary_service_title_bottom_widget):
	* components/services/athena-dependent-shared/shared-service-widg
	ets.h:
	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form):

	First part of the arlo titles for the summary view.

2000-09-01  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-glib-extensions.c:
	(print_key_string), (free_hash_tables_at_exit),
	(athena_g_hash_table_new_free_at_exit): Added code to print out
	the keys for the hash table at exit time if it's a hash table with
	string keys. I can tell the keys are strings because the hash
	function is g_str_hash.
	
	* src/file-manager/athena-trash-monitor.c:
	(athena_trash_monitor_initialize): Used connect_while_alive
	instead of connect to get rid of some nasty problems with
	lingering signal handlers.

2000-09-01  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/libmain.c (tree_shlib_object_destroyed): Don't
	call oaf_plugin_unuse for now, it kills stuff.

	* components/tree/athena-tree-model.c:
	(athena_tree_model_destroy,
	athena_tree_model_for_each_postorder): Bug fixes to avoid crashing.
	
	* components/tree/athena-tree-view.c: (insert_hack_node,
	remove_hack_node, freeze_if_have_hack_node): Assorted fixes to
	avoid crashing or locking up when in-process.

	* configure.in: Fix configure text for in-proc tree view.

2000-09-01  John Sullivan  <sullivan@eazel.com>

	Fixed bug 1476 (Using bogus local bookmark should update
	its icon). The specific bug led me to changing some of
	the internals of AthenaBookmark in a way that has nice
	UI consequences. Now if you use Athena to move a bookmarked
	file, the bookmark will continue to find the moved file, and
	if you delete a file, the bookmark's icon will change to the
	"missing location" icon.

	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_disconnect_file),
	(athena_bookmark_connect_file): New helper functions that
	handle wiring or unwiring the connection between a bookmark
	and its AthenaFile.
	(athena_bookmark_destroy): Use athena_bookmark_disconnect_file.
	(athena_bookmark_new_with_icon): Use athena_bookmark_connect_file.
	(bookmark_file_changed_callback): Notice changes in the file's URI
	and update the bookmark to use the new URI; notice when the file
	is gone and disconnect/reconnect to file.

	Miscellaneous tweaks:
	
	* src/file-manager/fm-search-list-view.c:
	(compute_reveal_item_name_and_sensitivity): At the suggestion of
	a localizer (menthos), added explanatory comments before the use
	of "Reveal in New Window" and "Reveal in <n> New Windows". It turns
	out that a comment just before a translatable text string will
	appear in the .pot files that localizers use.
	* src/athena-first-time-druid.c: (set_up_user_level_page):
	Fixed two misspellings of "technical" and one missing period. Thanks
	to menthos for pointing these out.
	* src/athena-window-menus.c: 
	(show_bogus_bookmark_window): Use athena_format_uri_for_display
	for bookmark uris shown in user messages. Simplify the message you
	get if you choose a known-bogus URI from the Go menu.

2000-09-01  Gene Z. Ragan  <gzr@eazel.com>

	Fixed bug 2491, remove GtkHtml web browser from build.
	
	* components/Makefile.am:
	Removed the http component
	
2000-09-01  Ali Abdin  <aliabdin@aucegypt.edu>

        * components/help/converters/gnome-db2html2/sect-elements.c:
        Ooops - Make the QUOTE tag actually print the characters out

2000-09-01  Maciej Stachowiak  <mjs@eazel.com>

	* components/tree/athena-tree-model.c:
	(athena_tree_model_destroy, athena_tree_model_unref_callback,
	athena_tree_model_for_each_postorder, remove_all_nodes,
	report_node_removed_internal, report_node_removed): Clean up all
	the nodes when destroying the model.
	
	* components/tree/athena-tree-view.c: Unref the model when
	destroying the view.

	* components/tree/athena-tree-node-private.h,
	components/tree/athena-tree-node.c:
	(athena_tree_node_remove_from_parent): Renamed from
	`athena_tree_remove_from_parent'

2000-09-01  Pavel Cisler  <pavel@eazel.com>

	Fix bugzilla 2186 - Move/Copy/Make-Link for times from multiple directories
	fails. Still needs more testing.
	Reworked file operations to match new gnome_vfs_xfer... APIs that now take
	lists of URIs for copy source and destination.

	* components/services/install/lib/eazel-install-protocols.c:
	(gnome_vfs_fetch_remote_file):
	Update to use new API. 
	
	* libathena-extensions/athena-file-operations.c:
	(check_target_directory_is_or_in_trash),
	(new_uri_from_escaped_string), (append_basename_unescaped),
	(athena_file_operations_copy_move),
	(athena_file_operations_new_folder),
	(athena_file_operations_move_to_trash),
	(athena_file_operations_delete), (do_empty_trash):
	Reworked to use new APIs.
	Eliminated FIXME 1107.
	Updated find_directory calls to use proper "create if needed" flags.
	
	* libathena-extensions/athena-file-utilities.c:
	(athena_get_user_main_directory):
	* libathena-extensions/athena-file.c: (athena_file_rename):
	Updated to use new APIs.

2000-09-01  Eskil Heyn Olsen  <eskil@eazel.com>

	* components/rpmview/athena-rpm-view-install.c:
	(athena_rpm_view_download_progress_signal),
	(athena_rpm_view_install_progress_signal),
	(athena_rpm_view_download_failed), 
	Emits load_underway signals, although they do not seem to start
	the spinner.
	(get_detailed_errors_foreach),
	(get_detailed_errors), 
	(athena_rpm_view_install_failed),
	Generates contents for the dialog box showed when the operation
	failed.
	(athena_rpm_view_dependency_check),
	(athena_rpm_view_install_done), 
	If failed, show a box to the user
	(athena_service_need_password),
	(athena_service_try_again), 
	(set_root_client), 
	Added Robeys password dialog stuff
	(delete_files),
	emits a FALSE when asked to delete files.	
	(athena_rpm_view_install_package_callback),
	(athena_rpm_view_uninstall_package_callback):
	Still defaults to testmachine.eazel.com (bad, but landa.eazel.com
	seems to be down). Sets up the password query thing.
	
	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_initialize), 
	(athena_rpm_view_destroy),
	(check_installed):
	Fixed the athena_label problem by ifdeffing it to use gtk_label
	for the strings that will most likely contain \n\n
	
	* components/rpmview/athena-rpm-view.h:
	Added some calls to get div fields from details.
	
	* components/services/install/command-line/eazel-alt-install-corba.
	c: (set_parameters_from_command_line):
	Fixed the --root handling of dirs.
	
	* components/services/install/lib/eazel-install-protocols.c:
	Now set to use the old CGI stuff while landa doesn't serve me my
	rpm's..
	
	* components/services/install/lib/eazel-install-rpm-glue.c:
	(eazel_install_prune_packages_helper),
	Added some debug output
	(eazel_install_package_name_compare):
	Removed some debug output
	
	* components/services/install/lib/eazel-install-types.c:
	(packagedata_destroy_foreach), (packagedata_destroy),
	free the pack structure itself
	(packagedata_remove_soft_dep):
	paranoia check
	
	* components/services/trilobite/libtrilobite/trilobite-root-client-
	public.h:
	Changed the include to use "'s instead of <'s. 
	
	* athena-installer/src/Makefile:
	* athena-installer/src/installer.c: (create_pixmap),
	(create_what_to_do_page), (create_install_page),
	(create_finish_page_good), (create_finish_page_evil),
	(create_window), (create_info_druid_page):
	Better image loading for the static installer.

2000-09-01  J Shane Culpepper  <pepper@eazel.com>

	* components/services/athena-dependent-shared/icons/Makefile.am:
	Forgot to update the Makefile.am for the new icons.

2000-09-01  J Shane Culpepper  <pepper@eazel.com>

	* components/services/summary/athena-view/athena-summary-view.c
	: (generate_summary_form):

	Minor ui fixes to prepare adding the arlo title widgets.  Adding
	several images as well.

2000-09-01  Andy Hertzfeld  <andy@eazel.com>

	* components/rpmview/athena-rpm-view.c:
	(athena_rpm_view_initialize), (check_installed),
	(athena_rpm_view_update_from_uri):
	removed anti-aliased text from rpm_view, since it was causing
	too many problems; displayed icon contained in package header, or
	a generic package icon if there isn't one; gather and display
	package install time correctly.
	
2000-08-31  Maciej Stachowiak  <mjs@eazel.com>

	* ChangeLog: rolled over to ChangeLog-20000831.

