2004-10-29  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c: (fm_list_view_reveal_selection),
	(fm_list_view_start_renaming_file):
	Don't scroll to top if file already visible when renaming and
	revealing selection on alt-up.

	Patch from Jimmy Do.

2004-10-28  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.8.2 ===

2004-10-28  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for release.

	* configure.in:
	Require eel 2.8.2

2004-10-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.c:
	(athena_get_uri_shortname_for_display):
	* libathena-private/athena-file-utilities.h:
	* libathena-private/athena-file.c: (athena_file_rename),
	(athena_file_get_display_name_nocopy):
	* src/athena-location-entry.c: (try_to_expand_path):
	Use eel_get_filename_charset to handle the new filename
	charset env vars.

2004-10-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-global-preferences.c:
	* src/athena-window-manage-views.c:
	Fix warning due to NULL default string.

2004-10-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-global-preferences.[ch]:
	Add saved geometry pref
	
	* src/athena-navigation-window.c:
	(athena_navigation_window_save_geometry), (real_window_close),
	(athena_navigation_window_class_init):
	Save geometry on window close
	
	* src/athena-window-manage-views.c:
	(another_navigation_window_already_showing),
	(load_directory_metadata_callback):
	load geometry on open

2004-10-26  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-model.[ch]:
	Handle volumes for root nodes
	
	* src/file-manager/fm-tree-view.c:
	Add eject on volume toplevel roots.
	
	* src/athena-application.c:
	Don't close nav windows when unmounting, just go to home.

	Patch from Colin Leroy <colin@colino.net>

2004-10-25  Alexander Larsson  <alexl@redhat.com>

	* libathena/athena-scroll-positionable.h:
	Add missing G_END_DECLS.
	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-10-22  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_get_image), (draw_frame),
	(draw_or_measure_label_text), (measure_label_text),
	(draw_label_text), (draw_mask), (athena_icon_canvas_item_draw):
	Make the athena_icon_canvas_item_get_image return an image containing
	icon + text. The image "start" changed to being from the item position to
	from the item boundary.
	
	* libathena-private/athena-icon-dnd.c:
	(athena_icon_dnd_begin_drag):
	Calculate icon offset from the boundary instead of icon position.

2004-10-22  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (rename_file):
	Add ugly hack to make renames work on newly created files
	in the list view. Don't look, you might go blind.

2004-10-22  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (icon_set_position):
	Fix moving of unpositioned icons, the canvas items start at
	<0, 0>, not <-1,-1>

2004-10-21  Alexander Larsson  <alexl@redhat.com>

	* src/athena-spatial-window.c:
	(location_menu_item_activated_callback),
	(location_button_clicked_callback):
	Select parent item when going up via parent menu.
	
	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-10-21  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-dnd.[ch]:
	(auto_scroll_timeout_callback), (drag_leave_callback),
	(drag_highlight_expose), (dnd_highlight_queue_redraw),
	(start_dnd_highlight), (stop_dnd_highlight),
	(drag_motion_callback):
	Display frame when we're accepting a DnD drop.

2004-10-18  Dave Camp  <dave@novell.com>

	* src/file-manager/fm-directory-view.c:
	(selection_changed_callback):
	* src/athena-application.c:
	(athena_application_present_spatial_window),
	(athena_application_present_spatial_window_with_selection):
	* src/athena-application.h:
	* src/athena-window-manage-views.c: (open_location),
	(load_directory_metadata_callback):
	* src/athena-window.c: (athena_window_go_to_with_selection):
	* src/athena-window.h:  Show the directory as a selection in
	spatial mode when Alt+Up is selected.  

	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-10-18  Marco Pesenti Gritti  <marco@gnome.org>

	reviewed by: Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window-ui.xml:
	* src/athena-window-toolbars.c:
	(athena_navigation_window_initialize_toolbars):

	Work around pack-ends no more working in libbonoboui
	by putting an expanded event box before the
	throbber

2004-10-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-program-choosing.c (athena_launch_show_file):
	Slightly better error when there is no handler for a file type.
	Not ideal, needs fixing when we're not string frozen anymore.

2004-10-14  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: (load_directory),
	(finish_loading):
	We need to set "loading" as soon as we get the load_directory
	call, otherwise we don't correctly handle the selection being
	set.
	
	* src/file-manager/fm-icon-view.c: (fm_icon_view_begin_loading),
	(fm_icon_view_end_loading):
	No need for this to touch loading.

	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-10-13  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window-ui.xml:
	* src/athena-navigation-window.c:
	(file_menu_new_window_callback), (real_merge_menus):
	Add Open New Window menu item in browser
	Patch from Michael Henson <mike@axl.net>
	
2004-10-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c:
	(read_dot_hidden_file):
	Only read .hidden files if they are regular files.
	
	* src/file-manager/fm-tree-view.c:
	Delay activation when keyboard navigating the tree.

	Patches from Danny Milosavljevic <danny.milo@gmx.net>

2004-10-12  Anders Carlsson  <andersca@gnome.org>

	* src/athena-file-management-properties.glade:
	Set the dialog's "visible" property to FALSE, we show it 
	ourselves.
	
2004-10-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-link-desktop-file.[ch]:
	Make athena_link_desktop_file_local_create take both
	display name and file name.
	* libathena-private/athena-link.[ch]:
	Make athena_link_local_create take both
	display name and file name.
	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	Create desktop file ending in ".desktop".

2004-10-12  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (activate_check_mime_types):
	On mime mismatch, don't use the default app for "open".

2004-10-11  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.8.1 ===

2004-10-11  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.8.1

2004-10-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.[ch]:
	* libathena-private/athena-file.[ch]:
	* libathena-private/athena-icon-factory.c:
	Use home icon for homedir.
	Patch from Anders Carlsson  <andersca@gnome.org>

2004-10-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file):
	Set up clipboard when renaming.	

2004-10-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory.[ch]:
	Make athena_directory_get_file_list virtual
	* libathena-private/athena-desktop-directory.c:
	* libathena-private/athena-merged-directory.c:
	Override virtual to return all files. Fixes bug #149096.
	Patch from Jimmy Do <crispyleaves@gmail.com>

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_init_show_hidden_files):
	Don't set up hidden files prefs if ignoring them	

	* src/file-manager/fm-icon-view.c (should_show_file_on_screen):
	Check if file should be visible.
	
2004-10-11  Anders Carlsson  <andersca@gnome.org>

	* libathena-private/athena-metadata.h:
	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_default_application_for_file),
	(athena_mime_get_open_with_applications_for_file),
	(athena_mime_get_applications_for_file),
	(gnome_vfs_mime_application_has_id):
	* libathena-private/athena-view-query.c:
	(athena_view_query_get_default_component_for_file_internal),
	(athena_view_query_get_components_for_file),
	(make_bonobo_activation_query_with_known_mime_type),
	(make_bonobo_activation_query_with_uri_scheme_only),
	(server_matches_content_requirements),
	(athena_do_component_query),
	(athena_view_query_get_popup_components_for_file),
	(athena_view_query_get_property_components_for_file):
	Remove a couple of unused keys from athena-metadata.h
	
2004-10-08  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (extension_action_slow_mime_types_ready_callback):
	Correct strcmp typo. (#142530)
	Patch from Simon Hart
	
2004-10-08  Anders Carlsson  <andersca@gnome.org>

	* src/file-manager/fm-directory-view.c:
	(convert_file_list_to_string), (get_clipboard_callback),
	(clear_clipboard_callback), (convert_file_list_to_uri_list),
	(copy_or_cut_files), (fm_directory_view_class_init):
	Add support for pasting the clipboard contents as a string.

2004-10-06  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c:
	(process_new_files):
	* src/file-manager/fm-list-view.c:
	(fm_list_view_sort_files), (fm_list_view_class_init):
	* src/file-manager/fm-list-model.[ch]:
	(fm_list_model_sort_files):
	Implement sort_files for list view and sort old changed files.

2004-10-06  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c: (split_off_first_n),
	(display_pending_files), (display_pending_idle_callback):
	Process unlimited files at once instead of 300 each time.

2004-10-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c (draw_or_measure_label_text):
	Readjust padding from last change.

2004-10-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (start_rubberbanding):
	Use guint, not uint (#150359)
	Patch from Gustavo Carneiro.

2004-10-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c (directory_load_one):
	Don't crash if info->name == NULL. (Not valid, but happened with
	smb backend.)

2004-10-05  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-list-view.c (fm_list_view_set_selection):
	Notify about selection change only once per call.

2004-10-04  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Don't need to detect libjpeg anymore.

2004-10-04  Alexander Larsson  <alexl@redhat.com>

	* configure.in (EXIF_LIBS): 
	* libathena-private/athena-file.c:
	(athena_file_compare_for_sort):
	Make sort-by-emblem not crash.

2004-10-04  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-shell-ui.xml:
	* src/athena-spatial-window-ui.xml:
	Allow keynav on desktop by adding accel entries (#135399).	

2004-10-01  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_notify_selection_changed):
	Only sniff ahead attributes needed for activation
	when selecting a single file.

2004-10-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c (fm_list_model_sort):
	Fix reordering on resort (#144803)
	Patch from Jimmy Do <crispyleaves@gmail.com>

2004-10-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-dnd.c (athena_drag_default_drop_action_for_icons):
	Allow move to non-same-fs. (#120052)

2004-10-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	Correct centering of text when icon is selected (#154088)
	Patch from Vincent Noel <vincent.noel@gmail.com>

2004-10-01  Alexander Larsson  <alexl@redhat.com>

	* src/athena-connect-server-dialog.c (connect_to_server):
	Escape created uris.
	Patch from Michael Henson <mike@axl.net>
	
2004-09-25  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (paste_clipboard_data):
	Clear clipboard after cut. Fixes #134420.
	Patch from Glenn Pierce.

2004-09-20  Kjartan Maraas  <kmaraas@gnome.org>

	* libathena-private/athena-file.c:
	(athena_file_get_volume_free_space): Plug a possible
	leak if vfs_uri is NULL. Closes bug #152985.

2004-09-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory.c (athena_directory_schedule_position_set):
	Don't reference screen when removing.

2004-09-17  Kjartan Maraas  <kmaraas@gnome.org>

	* src/file-manager/fm-directory-view.c: (get_activation_action),
	(real_update_menus_volumes), (fm_directory_view_activate_files):
	Plug a couple of leaks. Closes bug #152769.

2004-09-17  Alexander Larsson  <alexl@redhat.com>

	* cut-n-paste-code/libegg/egg-recent-model.c:
	(egg_recent_model_monitor):
	Update to latest egg-recent.

2004-09-13  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump.

=== athena 2.8.0 ===

2004-09-13  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.8.0

	* configure.in:
	Bump version to 2.8.0
	Require eel 2.8.0

2004-09-11  Abel Cheung  <maddog@linuxhall.org>

	* configure.in: Added "ta" to ALL_LINGUAS.

2004-09-06  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c: (fm_list_view_clear):
	Don't call gtk_cell_editable_editing_done when model is NULL.
	Patch by Martin Wehner (#151493)

2004-09-03  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-metafile.c (remove_file_metadata):
	Destroy the changes hash table in the right way (#48299)

=== athena 2.7.92 ===

2004-08-30  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.7.92

	* configure.in:
	Require new eel

2004-08-27  Narayana Pattipati  <narayana.pattipati@wipro.com>

	* libathena-private/athena-file.c
	(compare_directories_by_count), (compare_files_by_size):
	Fix athena crash when sort is done by Size in computer view.
	Fixes bugzilla bug#151228

2004-08-30  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	(create_transfer_dialog):
	* src/athena-desktop-window.c:
	(athena_desktop_window_instance_init):
	Don't make progress dialogs transient for the desktop. 

2004-08-27  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_get_group_names_including):
	Faster way to get list of groups.
	Patch from Dave Lehman (dlehman@redhat.com)

2004-08-27  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-mime-actions.c (athena_mime_get_default_application_for_file_internal): 
	Make this handle uri scheme limits.
	
2004-08-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(can_use_component_for_file), (reset_bonobo_open_with_menu):
	Don't show the open with menus for folders, athena links or
	when there are multiple items selected.

2004-08-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c (mime_db_changed_callback):
	Invalidate more files when the mime db changes.

2004-08-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c:
	Make athena_file_is_mime_type handle inherited types too.
	Make athena_file_contains_text work again.

2004-08-17  Dennis Cranston <dennis_cranston at yahoo com>
 
	* src/athena-connect-server-dialog.c:
	HIGify widget padding.
	
2004-08-23  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c: (get_description):
	Avoid multiple x-directory/normal warnings
	
	* libathena-private/athena-program-chooser.[ch]:
	cvs remove old code
	
	* libathena-private/athena-global-preferences.[ch]:
	* libathena-private/athena-view-query.c:
	* src/athena-applicable-views.c: 
	* src/athena-main.c:
	Make default component for folders just use the gconf setting instead
	of the short list (which is essentially random).
	Remove component picking for non-folders.
	Remove unused code.

2004-08-19  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (fm_directory_view_finalize):
	Move eel_preferences_remove_callback() calls into finalize()
	to prevent them from being called twice on shutdown.

2004-08-19  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-file-operations-progress.c (time_remaining_callback):
	Don't crash over a division by zero when the transfer rate approaches zero.
	Fixes bug #148791.

2004-08-19  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-list-view.c (fm_list_view_clear):
	Stop cell editing mode when changing directories.
	Fixes bug #143830.

2004-08-17  Mark McLoughlin  <mark@skynet.ie>

	* cut-n-paste-code/libegg/egg-recent-item.c: sync with latest
	libegg.

2004-08-17  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (fm_directory_view_launch_application):
	Don't add recent files for non-gnome-vfs uris (such as x-athena-desktop://)

2004-08-16  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "bs" to ALL_LINGUAS.

2004-08-16  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Add nb to ALL_LINGUAS.

2004-08-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump (to 2.7.92)

=== athena 2.7.4 ===

2004-08-16  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.7.4 (to sync with eel)

	* NEWS:
	Update

2004-08-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_is_mime_type):
	Compare types using gnome_vfs_mime_type_is_equal to catch aliases.
	Fixes bug #147811

2004-08-16  Alexander Larsson  <alexl@redhat.com>

	* src/athena-property-browser.c:
	(athena_property_browser_init), (athena_property_browser_new),
	(athena_emblem_dialog_new),
	(athena_color_selection_dialog_new), (make_category_link),
	(athena_property_browser_update_contents):

	Fix property browser spacing.
	Fixes bug #144249.
	Patch from Jorn Baayen.
	
2004-08-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-extension/athena-extension-types.h:
	Remove extra comma in enum. Fixes bug #142351
	Patch from Christian Neumair.
	
	* libathena-private/apps_athena_preferences.schemas.in:
	Add computer_icon_name schema entry. Fixes bug #144728.
	Patch from Christian Neumair.
	
	Remove add_to_session schema entry. 
	
	* src/athena-application.c: (update_session), (init_session):
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	Remove add_to_session preference. Fixes bug #91543
	Patch from Havoc Pennington
	
	* athena.desktop.in:
	Rename file browser entry. Fixes bug #131272.
	Patch from Michael Terry.
	
	* src/file-manager/fm-directory-view.c:
	(warn_mismatched_mime_types):
	Don't show (null) for mimetypes with no description.
	Fixes bug #141509.
	Patch from Christian Neumair.
	
	* src/file-manager/fm-properties-window.c:
	(create_properties_window):
	Allow properties dialog to be resized.
	Fixed bug #147918
	Patch from Christian Neumair.
	
	* src/athena-window-menus.c:
	(help_menu_athena_manual_callback):
	Fix help link. Fixes bug #143927
	Patch from Kaushal Kumar

2004-08-16  Alexander Larsson  <alexl@redhat.com>

	* src/athena-connect-server-dialog.c:
	(athena_connect_server_dialog_finalize), (connect_to_server),
	(response_callback), (setup_for_type), (combo_changed_callback),
	(port_insert_text), (athena_connect_server_dialog_init),
	(athena_connect_server_dialog_new):
	Make the connect to server dialog a bit nicer.

2004-08-12  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu):
	* src/file-manager/athena-directory-view-ui.xml:
	Revert my last commit, as discussed on athena-list.

2004-08-12  Thomas Cataldo  <thomas.cataldo@aliacom.fr>

	Some memory leak fixes	
	
	* libathena-private/athena-icon-factory.c:
	(athena_icon_factory_instance_init), (create_normal_cache_icon):
	* libathena-private/athena-module.c: (load_module_dir):

2004-08-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations-progress.c:
	(time_remaining_callback):
	Fix time reporting. Patch by baris@teamforce.name.tr (Baris Cicek)

2004-08-12  Alexander Larsson  <alexl@redhat.com>

	* src/athena-location-dialog.c (athena_location_dialog_new):
	Close dialog if parent is destroyed.
	Patch from Victor I. <lamer0@lamer0.com>
	
2004-08-11  Alexander Larsson  <alexl@redhat.com>

	* cut-n-paste-code/libegg/egg-recent-item.c: (egg_recent_item_new),
	(make_valid_utf8), (egg_recent_item_get_short_name),
	(egg_recent_item_set_private), (egg_recent_item_get_private):
	* cut-n-paste-code/libegg/egg-recent-item.h:
	* cut-n-paste-code/libegg/egg-recent-model.c:
	(egg_recent_model_open_file), (egg_recent_model_lock_file),
	(egg_recent_model_unlock_file):
	Update to latest libegg code.
	
2004-07-29  Bastien Nocera  <hadess@hadess.net>

	* libathena-private/athena-file-utilities.c:
	(athena_get_vfs_method_display_name):
	* src/athena-navigation-window-ui.xml:
	* src/athena-shell-ui.xml:
	* src/athena-spatial-window-ui.xml: change the name "CD Creator" to
	"CD/DVD Creator" following changes in athena-cd-burner

2004-07-24  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/fm-directory-view.c:
	* src/file-manager/athena-directory-view-ui.xml: Use different label
	for OtherApplication command, depending on whether we show the
	submenu.

2004-07-23  Dafydd Harries  <daf@muse.19inch.net>

	* src/athena-main.c: Apply patch submitted for #117572 to make
	  strings slightly easier to translate.

2004-07-22  Dave Camp  <dave@novell.com>

	* configure.in: Post-release verson bump

=== athena 2.7.2 ===

2004-07-22  Dave Camp  <dave@novell.com>

	* configure.in: Updated eel requirement
	* NEWS: 2.7.2

2004-07-21  Dave Camp  <dave@novell.com>

	* Merged the athena-new-mime branch.

2004-07-21  Dave Camp  <dave@novell.com>

	* src/file-manager/fm-properties-window.c: (should_show_open_with),
	(create_open_with_page), (create_properties_window): Show
	the Open With tab in the properties window.

2004-07-19  Dave Camp  <dave@novell.com>

	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_default_application_for_file_internal):
	* src/file-manager/fm-directory-view.c: (application_selected_cb),
	(choose_program), (file_is_launchable): Use the new eel
	open with dialog.

Mon Jul 19 12:52:04 2004  Jonathan Blandford  <jrb@gnome.org>

	* src/file-manager/fm-directory-view.c
	(get_default_executable_text_file_action): default to ASK

2004-07-12  Dave Camp  <dave@novell.com>

	* libathena-private/athena-mime-actions.c:
	(athena_mime_actions_get_open_with_file_attributes),
	(athena_mime_actions_check_if_open_with_attributes_ready),
	(athena_mime_get_default_application_for_file_internal),
	(get_open_with_mime_applications),
	(athena_mime_get_open_with_applications_for_file):
	* libathena-private/athena-program-choosing.c:
	(athena_launch_show_file):
	* src/file-manager/fm-directory-view.c:
	(add_application_to_bonobo_menu),
	(get_default_executable_text_file_action),
	(get_executable_text_file_action), (can_use_component_for_file),
	(get_activation_action), (reset_bonobo_open_with_menu),
	(real_update_menus), (fm_directory_view_notify_selection_changed),
	(activate_callback):
	* src/file-manager/athena-directory-view-ui.xml:

	MIME overhaul, part 2.

	Show the application that will be executed in the Open menu
	item.  If there are < 4 applications, show them in the main
	context menu, otherwise show them in the Open With menu.

2004-07-09  Dave Camp  <dave@novell.com>


	* test/Makefile.am (noinst_PROGRAMS): 
	* libathena-private/Makefile.am:
	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_applications_for_file),
	(application_supports_uri_scheme_strcmp_style),
	(athena_mime_has_any_applications_for_file),
	(athena_mime_set_default_application_for_file),
	(gnome_vfs_mime_application_has_id),
	(gnome_vfs_mime_id_matches_application),
	(gnome_vfs_mime_application_has_id_not_in_list):
	* libathena-private/athena-mime-actions.h:
	* libathena-private/athena-program-choosing.c:
	(application_cannot_open_location), (athena_launch_show_file),
	(athena_launch_application):
	* libathena-private/athena-program-choosing.h:
	* libathena-private/athena-view-query.c: (is_known_mime_type),
	(athena_view_query_check_if_minimum_attributes_ready),
	(athena_view_query_check_if_full_attributes_ready),
	(athena_view_query_get_popup_file_attributes),
	(athena_view_query_check_if_popup_attributes_ready),
	(athena_view_query_get_default_component_sort_conditions),
	(athena_view_query_get_default_component_for_file_internal),
	(athena_view_query_get_default_component_for_file),
	(athena_view_query_get_fallback_component_for_file),
	(athena_view_query_get_components_for_file_extended),
	(athena_view_query_get_components_for_file),
	(athena_view_query_has_any_components_for_file_extended),
	(athena_view_query_has_any_components_for_file),
	(mime_get_components_for_uri_scheme),
	(athena_view_query_has_any_components_for_uri_scheme),
	(athena_view_query_set_default_component_for_file),
	(extract_prefix_add_suffix), (mime_type_get_supertype),
	(get_explicit_content_view_iids_from_metafile),
	(make_bonobo_activation_query_for_explicit_content_view_iids),
	(make_bonobo_activation_query_with_known_mime_type),
	(make_bonobo_activation_query_with_uri_scheme_only),
	(mime_type_list_to_hash_table), (free_key),
	(mime_type_hash_table_destroy), (server_has_content_requirements),
	(server_matches_content_requirements),
	(athena_do_component_query), (strv_length), (strv_concat),
	(athena_view_query_get_popup_components_for_file),
	(athena_view_query_get_property_components_for_file),
	(has_server_info_in_list), (server_info_list_intersection),
	(athena_view_query_get_property_components_for_files),
	(athena_view_query_get_popup_components_for_files):
	* libathena-private/athena-view-query.h:
	* src/file-manager/fm-directory-view.c: (choose_program),
	(open_with_other_program), (other_application_callback),
	(can_use_component_for_file), (activate_callback):
	* src/athena-applicable-views.c: (got_file_info_callback):
	* src/athena-information-panel.c: (open_with_callback),
	(athena_information_panel_update_buttons):
	* src/athena-navigation-window.c: (load_view_as_menu):
	* src/athena-shell-ui.xml:
	* src/athena-window-manage-views.c:
	(athena_window_set_content_view):
	* src/athena-window-menus.c:
	(athena_window_initialize_menus_part_1):
	* src/athena-window.c: (refresh_stored_viewers),
	(athena_window_set_viewed_file):  MIME overhaul, part 1.
	Separated gnome-vfs application mime mapping from view querying,
	put them in different files.

	Got rid of the short list/all application distinction.

	Got rid of "View As...", all appropriate views are shown.

	Only ever show folders in athena - everything else should be
	opened in an app.

2004-07-16  Alexander Larsson  <alexl@redhat.com>

	* data/Makefile.am:
	* data/preferences.desktop.in:
	* data/serverconfig.desktop.in:
	* data/serverconfig.directory.in:
	* data/starthere-link.desktop.in:
	* data/starthere.desktop.in:
	* data/starthere.directory.in:
	* data/sysconfig.desktop.in:
	* data/sysconfig.directory.in:
	* src/athena-application.c: (athena_application_startup),
	(desktop_changed_callback):
	* src/athena-window-menus.c:
	(athena_window_initialize_menus_part_1):

	Kill start-here.

2004-07-15  Jürg Billeter  <j@bitron.ch>
 
 	* libathena-private/apps_athena_preferences.schemas.in:
 	* libathena-private/athena-directory.c: (add_preferences_callbacks):
 	* libathena-private/athena-file.c: (date_format_changed_callback),
 	(athena_file_fit_date_as_string):
 	* libathena-private/athena-global-preferences.c:
 	* libathena-private/athena-global-preferences.h:
 	* src/athena-file-management-properties.c: (create_date_format_menu),
 	(athena_file_management_properties_dialog_setup):
 	* src/athena-file-management-properties.glade:
 	Add preference to choose date format. Set default date format to '%c',
 	'the preferred representation for the current locale'.
 
2004-07-09  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (activate_check_mime_types):
	Check for more NULL cases.

2004-07-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (handle_transfer_overwrite):
	Better warnings on folder merge overwrite.

2004-07-07  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(connect_to_server_response_callback), (entry_activate_callback),
	(connect_to_server_link_callback), (real_merge_menus),
	(real_update_menus_volumes):
	* src/file-manager/athena-directory-view-ui.xml:
	Allow right-click connect to server on server links.

2004-07-07  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-ditem-page.c:
	Fix up some issues that made this not work.

2004-07-02  Bastien Nocera  <hadess@hadess.net>

	* src/file-manager/fm-directory-view.c:
	(activate_check_mime_types): Don't warn about mime-type mismatches
	if the handler is the same for both mime-types (Closes: #145086)

2004-06-24  Narayana Pattipati  <narayana.pattipati@wipro.com>

	* src/athena-window-manage-views.c (determined_initial_view_callback):
	Make sure host name is present before trying to show it in the
	error message. Fixes bugzilla bug#144906.

2004-06-25  Sebastien Bacher  <seb128@debian.org>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_update_icon):
	Removed debugging output for thumbnails of small images. 
	(Closes: #141078).

2004-06-24  Alexander Larsson  <alexl@redhat.com>

	Patch from Elijah Newren
	
	* libathena-private/athena-program-choosing.c:
	(slowly_and_stupidly_obtain_timestamp),
	(athena_launch_show_file), (athena_launch_application):
	Pass some event time to startup notify.
	This is the wrong approach, and should be replaced eventually.

2004-06-21  Alexander Larsson  <alexl@redhat.com>

        Based on patch by Jamie McCracken <jamiemcc@blueyonder.co.uk>
	
	* libathena-private/athena-metadata.h:
	Add show hidden files metadata name
	
	* libathena/athena-view-component.idl:
	* libathena/athena-view.[ch]:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-tree-view.c:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-spatial-window.[ch]:
	* src/athena-view-frame-corba.c: 
	* src/athena-view-frame.[ch]:
	* src/athena-window-manage-views.c:
	* src/athena-window-private.h:
	* src/athena-window.[ch]:
	Add per-window show hidden files setting, saved per folder
	in spatial mode.

2004-06-21  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.c (athena_get_vfs_method_display_name):
	Handle dns-sd name

2004-06-17  Bastien Nocera  <hadess@hadess.net>

	reviewed by: Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(can_delete_uri_without_confirm), (trash_or_delete_files_common):
	do not ask for deletion confirmation when the files are in the burn:
	scheme (Closes: #114340)

2004-06-14  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_init):
	Prevent a resizing of the progress bar when the remaining
	time is inserted after the timeout.

2004-06-09  Dave Camp  <dave@novell.com>

	* libathena-private/athena-file-operations.c:
	(get_next_duplicate_name): Try to convert from the locale
	if G_BROKEN_FILENAMES isn't set and the filename isn't valid
	utf8.

2004-06-08  Dave Camp  <dave@novell.com>

	* src/file-manager/fm-list-view.c (fm_list_view_dispose): NULL
	the ui component after unreffing it.

2004-06-08  Dave Camp  <dave@novell.com>

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_destroy), (fm_desktop_icon_view_finalize),
	(fm_desktop_icon_view_class_init):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (fm_directory_view_finalize):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_destroy),
	(fm_icon_view_finalize), (fm_icon_view_class_init):
	* src/file-manager/fm-list-model.c: (fm_list_model_dispose),
	(fm_list_model_finalize), (fm_list_model_class_init):
	* src/file-manager/fm-list-view.c: (fm_list_view_dispose),
	(fm_list_view_finalize): Fixed up dispose/destroy/finalize
	usage in src/file-manager.

2004-06-07  Anders Carlsson  <andersca@gnome.org>

	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_destroy),
	(time_remaining_callback),
	(athena_file_operations_progress_new_file),
	(athena_file_operations_progress_update_sizes):
	Show estimated time remaining in the progress dialog.
	
	* src/athena-spatial-window.c:
	(location_button_clicked_callback):
	Select the current folder menu item.
	
2004-06-02  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c:
	(disconnect_model_handlers):
	Remove directory monitor after cancelling the callbacks.
	Fixes a rare crash during list view destruction (#143561).

2004-06-01  Dave Camp  <dave@novell.com>

	* src/athena-file-management-properties.c:
	(athena_file_management_properties_dialog_setup):
	* src/athena-file-management-properties.glade: Add an 
	"always open in browser windows" option to the prefs dialog.
	Please stop yelling at me.
	
2004-06-01  Dave Camp  <dave@novell.com>

	* src/athena-window-manage-views.c: (open_location): If
	always_use_browser is set and the window is a spatial window,
	create a new browser window.

2004-06-01  Alexander Larsson  <alexl@redhat.com>

	* libathena/athena-view-component.idl:
	* src/athena-desktop-window.c:
	(athena_desktop_window_class_init):
	Make desktop of type DESKTOP

	* src/file-manager/fm-directory-view.c: (activate_callback):
	On shift-double-click on a non-folder, close the window after.

	Above patch from Nickolay V. Shmyrev <nshmyrev@yandex.ru>
	
	* src/athena-spatial-window-ui.xml:
	Use Ctrl-q to close all windows.
	
2004-06-01  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.7.1 ===

2004-06-01  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update for 2.7.1

2004-05-29  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "tk" to ALL_LINGUAS.

2004-05-27  Alexander Larsson  <alexl@redhat.com>

	Patch from Jamie <jamiemcc@blueyonder.co.uk>
	
	* src/athena-application.c:
	(athena_application_close_all_spatial_windows):
	* src/athena-application.h:
	* src/athena-spatial-window-ui.xml:
	* src/athena-spatial-window.c:
	(file_menu_close_all_windows_callback), (real_merge_menus):
	Add close all spatial window menu entry.
	
2004-05-24  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_update_bounds):
	Tell compute_text_rectangle() to assume canvas coordinates.
	Fixes #117356.

2004-05-22  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c (activate_callback):
	Set working directory of launched processes to current view
	directory. Fixes #110407.

2004-05-22  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-icon-container.c (motion_notify_event):
	Convert initial drag position to canvas coordinates. Fixes #142491.

2004-05-18  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-desktop-icon-file.c (update_info_from_link):
	Provide group write permissions by default. Prevents read-only
	emblem from being shown when user is in root group (#141390).

2004-05-14  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-desktop-link-monitor.c:
	(create_volume_link), (desktop_volumes_visible_changed),
	(athena_desktop_link_monitor_init),
	(desktop_link_monitor_finalize):
	* libathena-private/athena-global-preferences.h:
	Allow setting to not show volumes on desktop.

	Patch by Davyd Madeley <davyd@zdlcomputing.com>

2004-05-14  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.7.1 on HEAD.

2004-05-14  Grahame Bowland  <grahame@angrygoats.net>

	* src/athena-window.c (compute_default_title):
	Display server name in window title for remote URIs.

2004-05-13  Alexander Winston  <alexander.winston@comcast.net>

	* src/athena-file-management-properties.glade: Changed the
	British English spelling, behaviour, to the American English
	spelling, behavior.

2004-05-13  James Willcox  <jwillcox@gnome.org>

	* src/file-manager/Makefile.am:
	* src/file-manager/fm-bonobo-provider.c: Fix my email
	* src/file-manager/fm-bonobo-provider.h: ditto
	* src/file-manager/fm-ditem-page.c: New
	* src/file-manager/fm-ditem-page.h: New
	* src/file-manager/fm-properties-window.c: (set_icon_callback):
	* src/athena-application.c: (finish_startup):

	Add desktop item editing support

2004-05-13  Dave Camp  <dave@novell.com>

	* configure.in: Post-release version update.

=== athena 2.6.2 ===

2004-05-13  Dave Camp  <dave@novell.com>

	* NEWS: Updated for 2.6.2.

2004-05-13  Alexander Winston  <alexander.winston@comcast.net>

	* libathena-private/athena-file-operations.c: Removed an
	extraneous trailing space. Fixes #133937.

2004-05-13  Marco Pesenti Gritti  <marco@gnome.org>

	* src/athena-side-pane.c: (athena_side_pane_size_allocate),
	(athena_side_pane_class_init), (athena_side_pane_init):

	Do not overlap close icon and text label when the sidepane
	is very small. (Fixes #107205)

2004-05-07  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-properties-window.c (properties_window_update),
	(update_files_callback):
	Move window destruction into update_files_callback (Fixes #141440).

2004-05-07  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-icon-container.c (button_press_event):
	Unselect currently selected items on middle or right click on
	background. Fixes #130087.

2004-05-05  Alexander Larsson  <alexl@cgf.boston.redhat.com>

	* libathena-private/athena-icon-dnd.h: 
	* libathena-private/athena-icon-dnd.c (athena_icon_dnd_begin_drag): 
	* libathena-private/athena-icon-container.c (motion_notify_event): 
	Use the inital click position to anchor the icon dnd.

2004-04-30  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c: (setup_label_gcs):
	If there is no background set, use the theme's fg color for the
	label.  Patch from Chris Macksey <c_macksey@hotmail.com>
	
2004-04-28  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-thumbnails.c:
	(thumbnail_thread_starter_cb): Check 
	_POSIX_THREAD_ATTR_STACKSIZE before using 
	pthread_attr_setstacksize.  Patch from Julio Merino
	<jmmv@hispabsd.org>

2004-04-28  Kaushal Kumar  <kaushal.kumar@wipro.com>

	* src/athena-file-management-properties.c:
	(athena_file_management_properties_dialog_response_cb):
	Added help link id for List Columns tab and corrected the same for
	Behavior tab.

2004-04-27  Dave Camp  <dave@ximian.com>

	* athena.desktop.in:
	* src/network-scheme.desktop.in: Add OnlyShowIn=GNOME and
	use 'false' instead of '0' for Terminal=.  Patch from
	Grzegorz Golawski <grzegol@pld.org.pl>

2004-04-26  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-container.c (keyboard_arrow_key):
	Allow right and down arrow move selected icon when all icons are 
	selected Fixes bug #140827.

2004-04-22  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-icon-factory.c (cache_icon_unref):
	Don't leak display_name.

2004-04-20  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-container.c 
	(athena_icon_container_get_n_children): Count rename widget if
	it exists.
	(athena_icon_container_accessible_ref_child): Return rename widget
	as last child, if it exists.

	Fixes bug #140233.
	
2004-04-19  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Post release version bump

=== athena 2.6.1 ===

2004-04-19  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	Update for 2.6.1

2004-04-16  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-list-view.c (key_press_callback):
	Make Shift+Enter and Shift+Space close window behind in
	the list view (closes #139324).

2004-04-16  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-tree-model.c (fm_tree_model_remove_root_uri):
	Disconnect changed handler on root node removal. Prevents a crash
	related to removable media in the treeview (#128219).

2004-04-14  Martin Wehner  <martin.wehner@epost.de>

	* src/athena-spatial-window.c (location_menu_item_activated_callback):
	* src/athena-window-manage-views.[ch] (athena_window_open_location):
	* src/athena-window.c (athena_window_go_to):
        Make shift/middle click close window behind (#137663).

2004-04-14  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c (initialize_kde_trash_hack):
	Fix up kde trash hack to look in global config also.

2004-04-14  Soeren Sandmann Pedersen  <ssp@localhost.localdomain>

	* src/file-manager/fm-list-model.c (fm_list_model_get_value):
	Don't unref the icon when it is NULL

2004-04-12  Dave Camp  <dave@ximian.com>

	* components/emblem/Makefile.am: Added bonobo server file
	stuff to CLEANFILES.  Patch from Steve Chaplin
	<stevech1097@yahoo.com.au>

2004-04-12  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-dnd.c:
	(selection_is_image_file): Allow SVG files when dealing with 
	backgrounds.  Patch from Benjamin Keil.

2004-04-09  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-directory-background.c:
	(athena_connect_desktop_background_to_file_metadata),
	(background_changed_callback),
	(athena_connect_background_to_file_metadata):
	* libathena-private/athena-directory-background.h:
	* libathena-private/athena-dnd.c:
	(athena_drag_drop_background_ask):
	* libathena-private/athena-dnd.h:
	* libathena-private/athena-icon-dnd.c:
	(get_background_drag_action):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_begin_loading):
	By default set the background per-directory in spatial mode.
	* src/file-manager/fm-list-view.c: (fm_list_view_begin_loading):
	Take out background metadata stuff, we don't use an eelbackground
	here.

2004-04-09  Dave Camp  <dave@ximian.com>

	* src/athena-window-manage-views.c: (new_window_show_callback),
	(open_location): Use athena_window_close() to close the
	window, fixes #139072

2004-04-09  James Willcox  <jwillcox@gnome.org>

	* src/athena-spatial-window-ui.xml:  Add a *Shift*BackSpace keybinding
	for the UpCloseParent verb.  Fixes 139375.

2004-04-09  Guntupalli Karunakar  <karunakar@freedomink.org>

        * configure.in: Added "gu" (Gujarati) to ALL_LINGUAS.

2004-04-08  James Willcox  <jwillcox@gnome.org>

	* src/athena-navigation-window.c:
	(athena_navigation_window_show):
	* src/athena-spatial-window.c: (athena_spatial_window_show):
	* src/athena-window.c: (athena_window_show):

        Always show the status bar if the window is a spatial one.
	Fixes 138967.

2004-04-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-program-choosing.c:
	(athena_launch_show_file):
	Better error messages when launching fails.
	The error messages are re-used from other places due
	to the string freeze, so they aren't optimal.

2004-04-07  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-manage-views.c:
	(position_and_show_window_callback):
	* src/athena-window-private.h:
	* src/athena-window.c: (set_initial_window_geometry):
	Make min height/width smaller for spatial windows.

2004-04-07  Xan Lopez  <xan@gnome.org>

	* src/athena-bookmarks-window.c: (create_bookmarks_window),
	(bookmarks_delete_bookmark), (on_remove_button_clicked),
	(on_key_pressed), (repopulate):

        Allow delete key to remove bookmarks, fixes #136452

2004-04-07  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c (volume_or_drive_unmounted_callback):
        Interchange Eject & Unmount error dialog titles (#139260).

2004-04-04  Christian Neumair  <chris@gnome-de.org>

	* src/file-manager/athena-icon-view-ui.xml: Remove separator between
	manual and automatic layout menu items (fixes #110197).

2004-04-01  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c: (keyboard_space),
	(key_press_event): Make Shift+Enter and Shift+Space close window 
	behind.

2004-04-01  Dave Camp  <dave@ximian.com>

	* src/athena-window.c: (athena_window_set_viewed_file):
	Monitor ATHENA_FILE_ATTRIBUTE_SLOW_MIME_TYPE.
	
2004-04-01  Dave Camp  <dave@ximian.com>

	* src/athena-spatial-window.c:
	(athena_spatial_window_set_location_button),
	(athena_spatial_window_instance_init): Add an down arrow to the
	location button in an attempt to make it look more like a 
	pulldown menu.

2004-04-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c (load_icon_file):
	Fix thumbnail scaling typo.

2004-03-31  Dave Camp  <dave@ximian.com>

	* src/athena-location-dialog.c: (athena_location_dialog_new):
	Fill in the dialog with requesting window's location.

2004-03-31  Alexander Larsson  <alexl@redhat.com>

        Based on patch from Soeren Sandmann:
	
	* libathena-private/athena-file.c: (get_description):
	Only warn once per mimetype with no description.
	
	* libathena-private/athena-icon-factory.[ch]:
	Add force_size option to force the nominal size.
	
	* src/file-manager/fm-list-model.c:
	* src/file-manager/fm-tree-model.c:
	Use force_size to avoid constantly scaling things.

2004-03-31  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "af" to ALL_LINGUAS.

2004-03-30  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-directory-view.c: (activate_weak_notify),
	(stop_activate), (activate_callback),
	(activation_drive_mounted_callback),
	(activate_activation_uri_ready_callback),
	(fm_directory_view_activate_file): Cancel an activation if the
	window/view goes away.

2004-03-30  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-directory-view.c: (activate_callback),
	(activate_activation_uri_ready_callback): Fix a couple
	of file/memory leaks.

2004-03-30  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	Ref window during permission callout (#123691)
	Collect file changes and apply after timeout, makes
	e.g. permission changes for many items faster.

2004-03-30  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c: (match_best_name),
	(select_matching_name), (handle_typeahead), (key_press_event):
	* src/file-manager/fm-list-view.c: (select_matching_name),
	(handle_typeahead), (key_press_callback):
	Fix non-ascii typeahead.

2004-03-30  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-view.c (create_tree):
	Use correct icon for filesystem.

2004-03-29  Dave Camp  <dave@ximian.com>

	* src/athena-application.c:
	(athena_application_present_spatial_window):
	* src/athena-application.h:
	* src/athena-shell.c: (open_window),
	(restore_one_window_callback):
	* src/athena-window-manage-views.c: (open_location): When 
	opening a spatial window for the first time, place it over the 
	parent window.

2004-03-26  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (get_target_file_for_original_file):
	Fix unref of volume/drive that we didn't ref.

2004-03-25  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require libgnomeui 2.6.0

2004-03-22  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Bump version to 2.6.1 post releast

=== athena 2.6.0 ===

2004-03-22  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Update to 2.6.0

=== athena 2.5.91 ===

2004-03-15  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Update to 2.5.91

2004-03-10  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c (fm_list_model_get_value):
	Visiting and accept modifiers were reversed.

2004-03-09  Alexander Larsson  <alexl@redhat.com>

	* components/image_properties/athena-image-properties-view.c:
	* libathena-private/athena-file-attributes.h:
	* src/athena-information-panel.c:
	No commas at end of enum. Fixes builds for non-C99/gcc compilers.

2004-03-08  Danilo Šegan  <dsegan@gmx.net>

	* configure.in: Added "sr@ije" to ALL_LINGUAS.

2004-03-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c (lacks_slow_mime_type):
	Don't keep getting slow_mime_type if get_info failed

=== athena 2.5.90 ===

2004-03-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Update to 2.5.90

2004-03-08  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (fm_directory_view_activate_file):
	Increase canel open timeout delay to 5 seconds.

2004-03-08  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.c (athena_file_management_properties_dialog_set_icons):
	Better icon for file manager properties.
	
2004-03-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-bonobo-extensions.c:
	(bonobo_activation_activation_callback), (activation_timed_out),
	(athena_bonobo_activate_from_id),
	(athena_bonobo_activate_cancel):
	Timeout activation after 5 seconds.
	
	* src/athena-spatial-window.c:
	(athena_spatial_window_save_geometry):
	Don't save geometry for windows that are not viewing a file.
	
	* libathena-private/athena-file.c: (update_info_internal):
	Set new guessed_mime_type on rename, so that renames to match
	mime type works.

2004-03-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (handle_icon_button_press):
	Handle shift-clicking on initial icon selection for range-selection.
	Patch from Tony Tsui, bug #136377

2004-03-07  Gustavo Giráldez  <gustavo.giraldez@gmx.net>

	* src/athena-window-manage-views.c
	(determined_initial_view_callback): Set pending_file_for_position
	before setting up the position_and_show_window_callback callback
	for the file, to handle the case when the file gets ready before
	the callback setup returns (bug #136430).

2004-03-05  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c (volume_unmounted_callback):
	Call this on pre_unmount too, and find windows on the device
	better.

2004-03-05  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c:
	(athena_icon_factory_instance_init):
	Add image/bmp
	
	* athena-file-management-properties.desktop.in:
	Nicer icon

2004-03-05  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-mime-actions.[ch]:
	Add athena_mime_get_default_fallback_component_for_file which
	ignores the metadata specified component.
	
	* src/athena-applicable-views.[ch]:
	Add fallback argument to athena_determine_initial_view.
	
	* src/athena-window-private.h:
	* src/athena-window-manage-views.c:
	If the view fails to load, fall back to the non-metadata one.
	If that fails also, make sure to destroy the window if this
	was a new (non-visible) window.

2004-03-04  Dave Camp  <dave@ximian.com>

	* libathena-extension/athena-file-info.c:
	(athena_file_info_invalidate_extension_info):
	* libathena-extension/athena-file-info.h:
	* libathena-private/athena-file.c:
	(athena_file_invalidate_extension_info),
	(athena_file_info_iface_init): New function.

2004-03-04  Alexander Larsson  <alexl@redhat.com>

	* src/athena-navigation-window-ui.xml:
	Add cd creator to navigation window as well as spatial.
	Fixes bug #134913.

2004-03-03  Guntupalli Karunakar  <karunakar@freedomink.org>

	* configure.in: Added "pa" for Punjabi in ALL_LINGUAS.

2004-03-02  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_extract_top_left_text):
	Correctly handle cut-off utf8 text.

2004-03-02  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (file_list_all_are_folders):
	Fix browse context menu for AthenaDesktopIconFiles.

2004-03-01  Alexander Larsson  <alexl@redhat.com>

	* src/athena-sidebar-title.c:
	Don't hardcode font sizes. Fixes bug #123478

2004-02-27  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_get_value):
	* src/file-manager/fm-list-model.h: Remove the 
	FM_LIST_MODEL_NAME_COLUMN enum, the name column is handled 
	with the dynamic columns.
	* src/file-manager/fm-list-view.c: (select_matching_name),
	(create_and_set_up_tree_view): Use the dynamic name column
	in the typeahead buffer.

	Fixes #133750.

2004-02-27  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-properties-window.c (append_extension_pages): 
	Set is-extension-page on the page widget, not the extension object.

=== athena 2.5.8 ===

2004-02-24  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump to 2.5.8

2004-02-24  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	(warn_mismatched_mime_types_response_cb),
	(warn_mismatched_mime_types), (activate_check_mime_types),
	(activate_callback):
	Show dialog on mime type mismatch

Tue Feb 24 01:20:56 2004  Jonathan Blandford  <jrb@gnome.org>

	* src/athena-location-dialog.c (athena_location_dialog_init):
	set the mnemonic widget for the "Location:" label.

2004-02-23  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-column-chooser.c: (add_buttons):
	Mark strings for translation.  Patch from Luca Ferretti 
	<elle.uca@libero.it>

2004-02-23  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.h:
	* libathena-private/athena-file.c: (finalize),
	(update_info_internal), (athena_file_get_guessed_mime_type):
	Save the guessed mime type when the sniffed mime type is read.
	
	(file_list_file_ready_callback):
	(athena_file_list_call_when_ready): New function.

	* libathena-private/athena-bonobo-extensions.c:
	(athena_bonobo_get_extension_item_command_xml),
	(athena_bonobo_add_extension_item_command): 
	* libathena-private/athena-bonobo-extensions.h:
	* libathena-private/athena-mime-actions.c:
	(get_open_with_mime_applications),
	(athena_mime_get_open_with_applications_for_file),
	(athena_mime_actions_get_popup_file_attributes),
	(athena_mime_actions_check_if_popup_attributes_ready),
	(athena_mime_get_popup_components_for_file):
	* libathena-private/athena-mime-actions.h:
	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu), (get_all_extension_menu_items),
	(extension_action_callback_data_free),
	(extension_action_slow_mime_types_ready_callback),
	(extension_action_callback), (add_extension_command_for_files),
	(add_extension_menu_items),
	(activate_activation_uri_ready_callback): Don't invoke 
	extension menu items that don't apply to the sniffed mime
	type.

2004-02-22  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "en_CA" to ALL_LINGUAS.

2004-02-21  Narayana Pattipati  <narayana.pattipati@wipro.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file):
	Scroll to the particular column in listview while renaming. Fix
	bugzilla bug# 132785

2004-02-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	* src/athena-shell.c: (open_window):
	* src/athena-window-manage-views.c: (open_location):
	Add always_use_browser preference.

2004-02-19  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (file_list_all_are_folders):
	Get the "Browse Folder" context menu item on some more icons.

2004-02-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (real_update_paste_menu): 
	Remove unneeded line.
	
2004-02-18  Alexander Larsson  <alexl@redhat.com>

	* src/Makefile.am:
	* src/athena-server-connect.c:
	* src/athena-server-connect.desktop.in:
	* src/athena-server-connect.glade:
	Remove athena-server-connect. This is not needed anymore.

2004-02-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am: 
	* libathena-private/filesystem-attributes.xml: 

2004-02-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.[ch]:
	(athena_have_broken_filenames),
	(athena_get_uri_shortname_for_display):
	New functions
	
	* libathena-private/athena-file.c:
	Use the public athena_have_broken_filenames instead of private copy
	Make display names for toplevel uris better.
	
	* src/athena-location-entry.c: (try_to_expand_path):
	Use the public athena_have_broken_filenames instead of private copy
	
	* src/athena-spatial-window.c:
	(location_button_clicked_callback),
	(athena_spatial_window_set_location_button):
	Use athena_get_uri_shortname_for_display()
	
	* src/athena-window.c: (compute_default_title):
	Special casing toplevel stuff not needed, since this is
	handled by the display name change.
	
2004-02-12  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_merge_menus):
	* src/file-manager/athena-icon-view-ui.xml: Only create the
	Stretch Icon and Unstretch Icon popup items in the desktop view
	(rather than always creating them and hiding them on non-desktop
	views).

2004-02-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (confirm_empty_trash)
	Make trash dialog transient to window group.

2004-02-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_extract_top_left_text):
	Better handling of utf8 text.
	(athena_file_rename):
	Fix bug in previous rename checkin

2004-02-11  Alexander Larsson  <alexl@redhat.com>

	* cut-n-paste-code/libegg/Makefile.am:
	* cut-n-paste-code/libegg/egg-screen-exec.c:
	* cut-n-paste-code/libegg/egg-screen-exec.h:
	* cut-n-paste-code/libegg/egg-screen-help.c:
	* cut-n-paste-code/libegg/egg-screen-help.h:
	* cut-n-paste-code/libegg/egg-screen-url.c:
	* cut-n-paste-code/libegg/egg-screen-url.h:
	* libathena-private/athena-program-chooser.c: (help_cb):
	* libathena-private/athena-program-choosing.c:
	(my_gdk_spawn_make_environment_for_screen),
	(athena_launch_show_file), (athena_launch_action),
	(athena_launch_application), (athena_launch_desktop_file):
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-properties-window.c: (help_button_callback):
	* src/athena-bookmarks-window.c:
	(athena_bookmarks_window_response_callback):
	* src/athena-navigation-window-menus.c:
	* src/athena-property-browser.c: (help_button_callback):
	* src/athena-window-menus.c:
	(help_menu_athena_manual_callback):
	replace egg_screen with new gdk/libgnomeui functions.

2004-02-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-view-identifier.c (get_lang_list):
	Pass LC_MESSAGES. Fixes #48358.
	Patch from Nuno Ferreira.

2004-02-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c (compute_text_rectangle): 
	Fix bounds for text, #125558
	Patch from  Martin Wehner
	
2004-02-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c:
	Correctly rename desktop files when G_BROKEN_FILENAMES is set

2004-02-11  Alexander Larsson  <alexl@redhat.com>
	
	* src/athena-application.c (athena_application_get_existing_spatial_window):
	Check that window_location != NULL. Probaby fixes #131048

=== athena 2.5.7 ===

2004-02-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c (load_thumbnail_frame):
	Handle missing theme icon

2004-02-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c (change_background_callback):
	Change the background capplet binary name back.

	* NEWS: 
	* configure.in:
	Update 

2004-02-11  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c (rename_file_callback):
	Fix a potential leak in my last commit.

2004-02-10  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-desktop-link.c (athena_desktop_link_new):
	Load saved trash name on startup.

2004-02-10  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (athena_icon_container_start_renaming_selected_item):
	Select text in right order.

2004-02-10  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-tree-view.c (copy_or_cut_files): 
	* src/file-manager/fm-directory-view.c:
	Tell the clipboard monitor of changes.
	Update paste menus on clipboard changes.

	* libathena-private/Makefile.am: 
	* libathena-private/athena-clipboard-monitor.[ch]
	New files.

2004-02-10  Balamurali Viswanathan  <balamurali.viswanathan@wipro.com>

	* src/file-manager/fm-icon-view.c (play_file): Use the AUDIODEV env,
	to play sound files if it is set.  Fixes bug #88836

2004-02-10  Jason Leach  <leach@wam.umd.edu>

	* libathena-private/Makefile.am (install-data-local): Don't
	install a schema if the user configures with
	--disable-schemas-install
	(#106220, Julio Merino)

2004-02-09  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "mi" to ALL_LINGUAS.

2004-02-08  Jason Leach  <leach@wam.umd.edu>

	* libathena-private/athena-directory-async.c
	(filter_search_uri): Replace deprecated call to g_basename with
	g_path_get_basename.

2004-02-08  Jason Leach  <leach@wam.umd.edu>

	* src/athena-application.c: As noted in
	bonobo-generic-factory.h, BONOBO_GENERIC_FACTORY_TYPE is
	deprecated, use BONOBO_TYPE_GENERIC_FACTORY instead.

2004-02-07  Shaun McCance  <shaunm@gnome.org>

	* libathena-private/athena-program-chooser.c:
	* src/athena-bookmarks-window.c:
	* src/athena-file-management-properties.c:
	* src/athena-property-browser.c:
	* src/athena-window-menus.c:
	* src/file-manager/fm-properties-window.c:
	- s/wgosathena/user-guide/ per recent user-guide change.

2004-02-07  Robert Sedak  <robert.sedak@sk.htnet.hr>
 
         * configure.in: Added "hr" (Croatian) to ALL_LINGUAS.

2004-02-06  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-directory-view.c (rename_file_callback):
	Don't crash when trying to rename empty selection. Fixes bug #131861.

2004-02-06  Dennis Cranston <dennis_cranston@yahoo.com>

	* src/athena-connect-server-dialog.c: 	
	(athena_connect_server_dialog_init): Use sentence
	capitalization for textfiled labels as per HIG.

	* src/file-manager/fm-list-view.c:
	(create_and_set_up_tree_view): Rename column title from 
	"File name" to "Name".  This is the phrase used in the visible
	columns dialog, file-roller, and gnome-search-tool.

2004-02-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am (EXTRA_DIST):
	Dist schemas.in files, and clean .schemas files.
	
2004-02-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am (EXTRA_DIST):
	Don't dist .scemans files. Fixes #133284.

2004-02-06  Alexander Larsson  <alexl@redhat.com>

	* cut-n-paste-code/libegg/egg-recent-model.c (egg_recent_model_lock_file):
	Update to latest to fix locking issue.

2004-02-06  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c
	Fix ogg mimetypes.
	Patch from Alan Swanson <swanson@ukfsn.org>

2004-02-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (end_renaming_mode):
	When rename done, set focus on container and scroll to item

2004-02-06  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c (change_background_callback):
	Use new background capplet binary name

2004-02-06  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-container.c: 
	(keyboard_move_to):
	(handle_icon_button_press): Use select_one_unselect_others to
	select an icon. Fixes bug #126339.

2004-02-05  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-file-operations.c (confirm_empty_trash):
	Set role of AtkObject to ATK_ROLE_ALERT. Fixes bug #132857.

2004-02-05  Martin Wehner  <martin.wehner@epost.de>

	* src/file-manager/fm-bonobo-provider.c (can_handle_multiple_files):
	Don't crash on nonexisting can_handle_multiple_files property.

2004-02-02  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c (create_normal_cache_icon):
	Handle nonexisting full pathnames.

=== athena 2.5.6 ===

2004-01-30  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump to 2.5.6

2004-01-28  David Bordoley  <bordoley@msu.edu>

	* src/athena-shell-ui.xml:
	* src/file-manager/athena-directory-view-ui.xml:
	s/close window/close, fix the tooltip, and use
	the hig keybinding for properties.	

2004-01-28 Siviah Nallagatla <snallagatla@novell.com>
                                                                                                                             
        * src/file-manager/fm-directory-view.c :
        (fm_direcotry_view_init) : add  callbacks for listening to show hidden
        and backup files setting change. Fixes #131984

2004-01-27  Christophe Fergeau  <teuf@gnome.org>

	* libathena-private/athena-icon-container.c: compare 
	  a11y_item_action_idle_handler with 0, not NULL, fixes compilation

2004-01-27  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-container.c: Implement AtkAction
	called "menu" for AthenaIconContainerAccessible. Fixes bug #132156.

2004-01-27  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-canvas-item.c: Implement
	AtkAction in an idle handler to avoid causing the AT to hang if the
	action does not return until completed, e.g. displays a dialog.
	Use queue and idle handler defined in AthenaIconContainer.

	* libathena-private/athena-icon-container.c (finalize): Free
	accessibility action queue and remove idle handler.

	* libathena-private/athena-icon-private.h: Add 
	a11y_item_action_idle_handler and a11y_item_action_queue to
	AthenaIconContainerDetails.
	
	Fixes bug #132153.

2004-01-27  Jason Leach  <leach@wam.umd.edu>

	* cut-n-paste-code/libegg/egg-recent-item.c:
	* cut-n-paste-code/libegg/egg-recent-item.h:
	* cut-n-paste-code/libegg/egg-recent-model.c:
	* cut-n-paste-code/libegg/eggtreemultidnd.c:
	Sync these files with their latest copies from libegg so as to
	include any bugfixes since 2003-04-16, the previous sync.
	(#121455, Laurent Vivier)

2004-01-24  Srinivasa Ragavan  <sragavan@novell.com>

	* libathena-private/athena-program-choser.c:
	  (athena_program_chooser_show_no_choices_message):
	  Do not use object ('dialog') after destruction

	  (athena_program_chooser_show_invalid_message):
          Do not use object ('dialog') after destruction

2004-01-22  Christian Neumair  <chris@gnome-de.org>

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_copy_move):
	Distinguish between copying and moving files to trash dialog-wise
	(#46784).

	* src/file-manager/fm-directory-view.c:
	(report_broken_symbolic_link):
	Fix typo (#129815).

2004-01-21  Rached Ben Mustapha  <rached@benmur.net>

	* src/athena-application.c:
	(athena_application_present_spatial_window):
	Do not ref an already existing spatial window when presenting it,
	as it prevents it from being finalized when closed.

2004-01-22  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	Return NULL for new uri on failure.

	* src/file-manager/fm-directory-view.c: (new_folder_done):
	Handle failure
	(real_update_menus):
	Desensitive template menu if we can't create files.

2004-01-21  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c (athena_icon_factory_get_icon_for_file):
	Don't allow small svgs as themselves.

2004-01-20  Alexander Larsson  <alexl@redhat.com>

	* src/athena-connect-server-dialog.c:
	(athena_connect_server_dialog_init):
	Nicer labels
	
	* src/athena-shell-ui.xml:
	ellipsis on backgrounds and emblems

2004-01-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-program-chooser.c:
	(athena_program_chooser_instance_init):
	Choose -> OK
	* libathena-private/athena-program-choosing.c:
	(dialog_response), (choose_application_callback):
	Make open with other app dialog non-modal.
	
	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu), (real_merge_menus),
	(can_use_component_for_file):
	* src/file-manager/athena-directory-view-ui.xml:
	Remove open with views from menu

2004-01-19  Alexander Larsson  <alexl@redhat.com>

	* docs/Makefile.am (EXTRA_DIST):
	Add athena-context-menus.txt.

2004-01-18  Jason Leach  <leach@wam.umd.edu>

	* libathena-private/Makefile.am (install-data-local): builddir
	!= srcdir fix.

2004-01-18  Fernando Herrera  <fherrera@onirica.com>

	* athena-file-management-properties.desktop.in: add 
	X-GNOME-Bugzilla-* stuff.

2004-01-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (queue_pending_files):
	Prepend instead of append. This is faster.
	Patch from Soeren Sandmann <sandmann@daimi.au.dk>

2004-01-15  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-menus.c (help_menu_athena_manual_callback):
	Open toplevel help with F1 on desktop.
	Patch from balamurali.viswanathan@wipro.com (bug #126882)

2004-01-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.c (athena_unique_temporary_file_name):
	Use mkstemp, as its safer. From bug #130091.

2004-01-14  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-global-preferences.c: Don't set
	up enums for icon captions or list view sort order, there is
	no fixed set of possible values now.

2004-01-14  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-file-attributes.h:
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c:
	* libathena-private/athena-file.h:
	Add slow_mime_type file attribute.
	Allow call_when_ready to take a NULL callback, and
	allow these monitors to be duplicated. (Used for
	fire-and-forget attribute reading)
	
	* libathena-private/athena-mime-actions.c:
	(athena_mime_actions_get_minimum_file_attributes):
	Add slow mime type here
	
	* src/file-manager/fm-directory-view.c:
	Get slow mime type on selection
	
	* src/file-manager/fm-properties-window.c:
	Get slow mime type for properties dialog.
	Don't use the same pointer twice for the
	same monitor.

2004-01-13  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/Makefile.am (ui_DATA):
	Add athena-list-view-ui.xml

2004-01-13  Danilo Šegan  <dsegan@gmx.net>
 
	* src/athena-location-bar.c (drag_data_received_callback): 

	* src/file-manager/fm-search-list-view.c
	(compute_reveal_item_name_and_sensitivity): 

	* src/file-manager/fm-properties-window.c
	(directory_contents_value_field_update): 

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_confirm_multiple_windows): 
	(confirm_delete_directly)
	(fm_directory_view_display_selection_info)
	(confirm_delete_from_trash, copy_or_cut_files)
	(real_update_menus): 

	* libathena-private/athena-file.c
	(format_item_count_for_display): 

	* components/image_properties/athena-image-properties-view.c
	(load_finished): 

	Use ngettext (fixes bug #106702), based on the patch by 
	Christian Neumair <chris@gnome-de.org>.

=== athena 2.5.5 ===

2004-01-12  Dave Camp  <dave@ximian.com>

	* Makefile.am: Removed OrigTree.pm
	* libathena-extension/Makefile.am: 
	Include athena-extensions-i18n.h
	* src/athena-spatial-window.c:
	* src/athena-window.c: Removed broken #includes.
	* NEWS:
	* configure.in: 2.5.5

2004-01-13  Danilo Šegan  <dsegan@gmx.net>

	* src/file-manager/athena-list-view-ui.xml: Fix "volder" typo.

2004-01-12  Alexander Larsson <alexl@redhat.com>

	* libathena-extension/athena-file-info.h:
	Inherit from GTypeInterface.

2004-01-11  James Willcox  <jwillcox@gnome.org>

	* libathena-private/athena-column-utilities.c:
	(column_compare):

	Fix a silly typo.

2004-01-11  Dave Camp  <dave@ximian.com>

	* Merged from athena-extensions-branch.

2004-01-11  Dave Camp  <dave@ximian.com>

	* libathena-extension/athena-column.c:
	* libathena-extension/athena-column.h:
	* libathena-extension/athena-menu-item.c:
	* libathena-extension/athena-menu-item.h:
	* libathena-extension/athena-property-page.c:
	* libathena-extension/athena-property-page.h:
	* libathena-private/athena-bonobo-extensions.c:
	(get_extension_menu_item_xml),
	(athena_bonobo_add_extension_item_command),
	(get_extension_toolbar_item_xml):
	* libathena-private/athena-column-chooser.c: (populate_tree),
	(get_column_iter):
	* libathena-private/athena-column-utilities.c:
	(column_compare):
	* src/file-manager/fm-list-model.c: (fm_list_model_get_value),
	(fm_list_model_get_sort_column_id_from_attribute),
	(fm_list_model_get_attribute_from_sort_column_id),
	(fm_list_model_get_column_number):
	* src/file-manager/fm-list-view.c: (apply_column_order):
	* src/file-manager/fm-properties-window.c:
	(append_extension_pages):
	* src/athena-file-management-properties.c:
	(create_icon_caption_menu): Removed the piles of accessors,
	use gobject properties instead.

2004-01-10  Dave Camp  <dave@ximian.com>

	* libathena-extension/Makefile.am:
	* libathena-extension/athena-column-provider.c:
	(athena_column_provider_base_init),
	(athena_column_provider_get_type),
	(athena_column_provider_get_columns):
	* libathena-extension/athena-column-provider.h:
	* libathena-extension/athena-column.c: (athena_column_new),
	(athena_column_get_name), (athena_column_get_attribute),
	(athena_column_set_attribute), (athena_column_get_label),
	(athena_column_set_label), (athena_column_get_description),
	(athena_column_set_description), (athena_column_get_property),
	(athena_column_set_property), (athena_column_finalize),
	(athena_column_instance_init), (athena_column_class_init),
	(athena_column_get_type):
	* libathena-extension/athena-column.h:
	* libathena-extension/athena-file-info.c:
	(athena_file_info_get_string_attribute),
	(athena_file_info_add_string_attribute):
	* libathena-extension/athena-file-info.h:
	* libathena-private/Makefile.am:
	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-column-chooser.c:
	(athena_column_chooser_class_init), (update_buttons),
	(list_changed), (visible_toggled_callback),
	(selection_changed_callback), (row_deleted_callback),
	(add_tree_view), (set_selection_visible),
	(move_up_clicked_callback), (move_down_clicked_callback),
	(show_clicked_callback), (hide_clicked_callback),
	(use_default_clicked_callback), (add_buttons), (populate_tree),
	(athena_column_chooser_init), (athena_column_chooser_destroy),
	(athena_column_chooser_finalize), (set_visible_columns),
	(get_column_names), (get_column_iter), (set_column_order),
	(athena_column_chooser_set_settings),
	(athena_column_chooser_get_settings),
	(athena_column_chooser_new):
	* libathena-private/athena-column-chooser.h:
	* libathena-private/athena-column-utilities.c:
	(get_builtin_columns), (get_extension_columns),
	(athena_get_all_columns), (athena_column_list_copy),
	(athena_column_list_free), (column_compare),
	(athena_sort_columns):
	* libathena-private/athena-column-utilities.h:
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c:
	(athena_file_instance_init), (finalize),
	(athena_file_compare_for_sort_internal),
	(athena_file_compare_for_sort),
	(athena_file_compare_for_sort_by_attribute),
	(athena_file_get_string_attribute),
	(athena_file_invalidate_extension_info_internal),
	(athena_file_add_string_attribute),
	(athena_file_info_providers_done),
	(athena_file_info_iface_init):
	* libathena-private/athena-file.h:
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	* libathena-private/athena-metadata.h:
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-list-model.c: (fm_list_model_get_n_columns),
	(fm_list_model_get_column_type), (fm_list_model_get_value),
	(fm_list_model_compare_func), (fm_list_model_get_sort_column_id),
	(fm_list_model_set_sort_column_id),
	(fm_list_model_get_sort_column_id_from_attribute),
	(fm_list_model_get_attribute_from_sort_column_id),
	(fm_list_model_add_column), (fm_list_model_get_column_number),
	(fm_list_model_finalize), (fm_list_model_init):
	* src/file-manager/fm-list-model.h:
	* src/file-manager/fm-list-view.c: (sort_column_changed_callback),
	(apply_visible_columns_foreach), (apply_visible_columns),
	(apply_column_order), (create_and_set_up_tree_view),
	(get_visible_columns),
	(set_visible_columns_from_metadata_and_preferences),
	(get_column_order),
	(set_column_order_from_metadata_and_preferences),
	(set_sort_order_from_metadata_and_preferences),
	(fm_list_view_begin_loading), (column_editor_response_callback),
	(column_chooser_changed_callback),
	(column_chooser_set_from_settings),
	(column_chooser_use_default_callback), (create_column_editor),
	(visible_columns_callback), (fm_list_view_merge_menus),
	(fm_list_view_update_menus), (fm_list_view_reset_to_defaults),
	(fm_list_view_scale_font_size),
	(default_visible_columns_changed_callback),
	(default_column_order_changed_callback), (fm_list_view_dispose),
	(fm_list_view_finalize), (fm_list_view_class_init),
	(fm_list_view_instance_init):
	* src/athena-file-management-properties-main.c: (main):
	* src/athena-file-management-properties.c:
	(columns_changed_callback), (create_icon_caption_menu),
	(icon_captions_changed_callback), (update_caption_option_menu),
	(update_icon_captions_from_gconf),
	(athena_file_management_properties_dialog_setup_icon_caption_page
	), (set_columns_from_gconf), (use_default_callback),
	(athena_file_management_properties_dialog_setup_list_column_page)
	, (athena_file_management_properties_dialog_setup):
	* src/athena-file-management-properties.glade:

	Added the ability to export column descriptions from extensions,
	added column editing to the list view.

2003-12-10  Dave Camp  <dave@ximian.com>

	* libathena-extension/athena-file-info.c:
	(athena_file_info_get_uri_scheme):
	* libathena-extension/athena-file-info.h:
	* libathena-private/athena-file.c:
	(athena_file_info_iface_init): Added a
	athena_file_info_get_uri_scheme convenience function.
	* libathena-extension/athena-menu-item.h:
	* libathena-extension/athena-menu-item.c:
	(athena_menu_item_get_property),
	(athena_menu_item_set_property), 
	(athena_menu_item_class_init): Added a priority text property.
	* libathena-extension/athena-menu-provider.h:
	* libathena-extension/athena-menu-provider.c:
	(athena_menu_provider_get_file_items): Pass in the GtkWindow,
	so that callbacks can parent dialogs appropriately.
	(athena_menu_provider_get_background_items),
	(athena_menu_provider_get_toolbar_items): New functions.
	* libathena-private/athena-bonobo-extensions.h:
	* libathena-private/athena-bonobo-extensions.c:
	(get_extension_menu_item_xml), (extension_action_callback),
	(athena_bonobo_add_extension_item_command),
	(athena_bonobo_add_extension_item),
	(get_extension_toolbar_item_xml),
	(athena_bonobo_add_extension_toolbar_item): Move the extension
	menu/toolbar stuff here.
	* src/file-manager/fm-bonobo-provider.c:
	(fm_bonobo_provider_get_file_items): Updated for new API.
	* src/file-manager/fm-directory-view.c: (add_extension_menu_items),
	(get_all_extension_menu_items), (reset_extension_actions_menu): Use
	new athena-bonobo-extensions helpers.
	* src/athena-shell-ui.xml:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-navigation-window-ui.xml: Move stuff around.
	* src/athena-window.c: (ui_idle_handler), (real_merge_menus_2),
	(athena_window_constructed), (athena_window_class_init):
	* src/athena-window.h: 
	* src/athena-navigation-window.c: (real_merge_menus_2),
	(athena_navigation_window_class_init): Move part two of the
	menu merging to a virtual function.
	* src/athena-window-manage-views.c: (update_for_new_location):
	* src/athena-window-menus.c:
	(athena_window_initialize_menus_part_1), (get_extension_menus),
	(athena_window_load_extension_menus): Load background menu items
	from the extensions.
	* src/athena-window-private.h:
	* src/athena-window-toolbars.c: (get_extension_toolbar_items),
	(athena_navigation_window_load_extension_toolbar_items):
	Load toolbar items from the extensions

2003-11-28  Dave Camp  <dave@ximian.com>

	* libathena-extension/Makefile.am:
	* libathena-extension/athena-extension-i18n.h: New file.
	* libathena-extension/athena-info-provider.h:
	* libathena-extension/athena-file-info.h:
	* libathena-extension/athena-file-info.c:
	(athena_file_info_list_copy), (athena_file_info_list_free): New
	functions.
	* libathena-extension/athena-menu-item.c:
	* libathena-extension/athena-menu-item.h:
	* libathena-extension/athena-menu-provider.c:
	* libathena-extension/athena-menu-provider.h: New files, 
	allow extensions to provide context menu items.	
	* libathena-extension/athena-property-page-provider.c:
	* libathena-extension/athena-property-page-provider.h:
	* libathena-extension/athena-property-page.c:
	* libathena-extension/athena-property-page.h: New files,
	allow extensions to provider property pages.
	* libathena-private/athena-module.h:
	* libathena-private/athena-module.c: (add_module_objects),
	(athena_module_load_file),
	(athena_module_get_extensions_for_type),
	(athena_module_extension_list_free), (athena_module_add_type):
	New functions.
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-bonobo-provider.c:
	(bonobo_mime_action_data_new), (bonobo_mime_action_data_free),
	(bonobo_mime_action_activate_callback),
	(bonobo_mime_action_callback),
	(bonobo_mime_action_menu_data_destroy_callback),
	(no_locale_at_end), (get_bonobo_menu_verb_names),
	(can_handle_multiple_files), (get_menu_items_for_server),
	(fm_bonobo_provider_get_file_items),
	(fm_bonobo_provider_menu_provider_iface_init),
	(bonobo_page_error_message), (get_uri_list),
	(bonobo_page_activate_callback), (fm_bonobo_provider_get_pages),
	(fm_bonobo_provider_property_page_provider_iface_init),
	(fm_bonobo_provider_instance_init),
	(fm_bonobo_provider_class_init), (fm_bonobo_provider_get_type):
	* src/file-manager/fm-bonobo-provider.h:  Moved the bonobo context
	menu and property pages here.  Export them through the extension
	interface.
	* src/file-manager/fm-directory-view.c:
	(extension_action_callback), (add_extension_menu_items),
	(get_all_extension_menu_items), (reset_extension_actions_menu),
	(real_update_menus): Get context menu items from extensions.
	* src/file-manager/fm-properties-window.c: (clear_extension_pages),
	(refresh_extension_pages), (properties_window_update),
	(append_extension_pages), (create_properties_window): Get property
	pages from extensions.
	* src/athena-application.c: (finish_startup):  Add the 
	bonobo provider to the extension manager.

2003-11-20  Dave Camp  <dave@ximian.com>

	* Makefile.am:
	* configure.in:
	* libathena-extension/Makefile.am:
	* libathena-extension/libathena-extension.pc.in:
	* libathena-extension/athena-extension-types.c:
	* libathena-extension/athena-extension-types.h:
	* libathena-extension/athena-file-info.c:
	* libathena-extension/athena-file-info.h:
	* libathena-extension/athena-info-provider.c:
	* libathena-extension/athena-info-provider.h:
	New library for athena extensions.

	* libathena-private/athena-marshal.list:
	* libathena-private/Makefile.am:
	* libathena-private/athena-directory-async.c:
	(athena_directory_set_up_request), (lacks_extension_info),
	(wants_extension_info), (extension_info_cancel),
	(extension_info_stop), (finish_info_provider),
	(info_provider_idle_callback), (info_provider_callback),
	(extension_info_start), (start_or_stop_io),
	(athena_directory_cancel), (cancel_loading_attributes),
	(file_needs_extension_work_done), (file_needs_work_done),
	(athena_directory_remove_file_from_work_queue),
	(move_file_to_low_priority_queue), (move_file_to_extension_queue):
	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-directory.c:
	(athena_directory_init), (athena_directory_finalize),
	(athena_directory_notify_files_changed):
	Add a third queue for extension info, that runs after the high
	and low priority queues.
	
	* libathena-private/athena-file-attributes.h:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c:
	(athena_file_invalidate_extension_info_internal),
	(athena_file_invalidate_attributes_internal): 

	* libathena-private/athena-file.c:  
	(athena_file_get_type), (athena_file_instance_init), 
	(athena_file_get_keywords), (athena_file_get_type),
	(athena_file_class_init), (athena_file_get_vfs_file_info),
	(athena_file_add_emblem), (athena_file_info_providers_done),
	(athena_file_info_iface_init):  Implement the AthenaFileInfo
	interface for extensions to use.
	
	* libathena-private/athena-module.c: (athena_module_load),
	* libathena-private/athena-module.h:
	Module loading code.
	
	* src/file-manager/fm-directory-view.c: (finish_loading): 
	Request extension info.
	
	* src/athena-application.c: (finish_startup): Initialize the
	module interface.

2004-01-11  Alexander Larsson <alexl@redhat.com>
	
	* libathena-private/athena-file.c (athena_file_get_activation_uri): 
	Don't expand symlinks when following them.

2004-01-10  James Willcox  <jwillcox@gnome.org>

	* src/athena-spatial-window.c: (athena_spatial_window_realize),
	(real_set_throbber_active), (athena_spatial_window_class_init):
	* src/athena-spatial-window.h:

	Add some snot to new windows when they are opened in spatial mode.
	Basically tries to compensate for the lack of throbber.

2004-01-10  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-container.c:
	(handle_typeahead): Moved the typeahead duration to a
	public header.
	* src/file-manager/fm-list-view.c: (select_matching_name),
	(fm_list_view_flush_typeselect_state), (handle_typeahead),
	(key_press_callback), (fm_list_view_finalize),
	(fm_list_view_instance_init): Implement icon-view-style 
	typeahead for the list view.  Patch from 
	Jürg Billeter <j@bitron.ch>

2004-01-10  Sebastien Bacher  <seb128@debian.org>

	* src/athena-spatial-window-ui.xml: typo fix (Closes: #128318).

2004-01-09  Alexander Larsson  <alexl@redhat.com>

        Patch from Jürg Billeter <j@bitron.ch>
	
	* libathena-private/Makefile.am:
	* libathena-private/athena-cell-renderer-pixbuf-emblem.[ch]:
	pixbuf CellRenderer that handles emblems too
	
	* src/file-manager/fm-list-model.[ch]:
	* src/file-manager/fm-list-view.c:
	Add support for emblems to list
	
	* src/file-manager/fm-tree-model.[ch]
	* src/file-manager/fm-tree-view.c:
	Add support for emblems to tree

2004-01-09  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c: (athena_file_can_rename),
	(athena_file_is_athena_link):
	* libathena-private/athena-link.c:
	(get_link_style_for_mime_type):
	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	application/x-desktop is the new desktop file mime type

2004-01-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-utilities.[ch]:
	(athena_get_vfs_method_display_name): New funciton
	
	* src/athena-window.c:
	Use athena_get_vfs_method_display_name to set
	the title
	
	* libathena-private/athena-icon-container.c:
	Remove tab icon navigation. Makes normal keynav work.
	
	* src/athena-shell-ui.xml:
	* src/athena-spatial-window.[ch]:
	* src/athena-window-manage-views.c:
	Add location button menu to spatial windows.
	
2004-01-06  Dave Camp  <dave@ximian.com>

	* configure.in: Remove components/tree/Makefile from
	AC_OUTPUT.

2004-01-06  Alexander Larsson <alexl@redhat.com>

	Patch from: Juerg Billeter <j@bitron.ch>

	* components/Makefile.am:
	* components/tree/
	Remove tree component (moved to file-manager)
	
	* src/Athena_shell.server.in:
	* src/file-manager/Makefile.am:
	Move tree view here

	* src/athena-application.c:
	Tree view activation

	* src/file-manager/fm-properties-window.[ch]:
	* src/file-manager/fm-directory-view.c:
	Make properties window take GtkWidget instead of DirectoryView.
	
	* src/file-manager/fm-tree-model.[ch]: 
	* src/file-manager/fm-tree-view.[ch]:
	Move tree view here, first cut at popup menus

2004-01-06  Alexander Larsson <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (button_press_callback): 
	Pop up folder menu on right click in background
	Patch from chris@gnome-de.org

2004-01-06  Alexander Larsson <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	Turn on home icon on desktop by default
	
	* libathena-private/athena-icon-dnd.c:
	* src/athena-property-browser.c:
	Handle new svg mime type
	
	* src/athena-navigation-window-ui.xml:
	* src/athena-spatial-window-ui.xml:
	Don't use computer icon for templates

2004-01-06  Alexander Larsson <alexl@redhat.com>

	* src/file-manager/fm-directory-view.[ch]: 
	Add get_item_count virtual method.
	Add item count and free space to status bar

	* src/file-manager/fm-icon-view.c (fm_icon_view_get_item_count): 
	* src/file-manager/fm-list-view.c (fm_list_view_get_item_count): 
	Implement get_iem_count

	* src/file-manager/fm-list-model.[ch] (fm_list_model_get_length): 
	Add new function.

2004-01-06  Alexander Larsson <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas.in: 
	Make desktop font Sans 10 by default. This is the same as
	the normal UI font default, and fits more stuff on the desktop. 

2004-01-06  Alexander Larsson <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	Don't translate duplication tests to avoid wasting
	translator time. My guess is that nobody was running 
	make check in different locales anyway.
	
2004-01-06  Alexander Larsson <alexl@redhat.com>

	* test/test.h: 
	Remove eel-string-picker.h

2004-01-05  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-icon-container.c:
	(icon_destroy): Nullify stretch_icon when the icon being
	pointed to is removed. Fixes bug #128713.

Sun Jan  4 14:39:49 2004  Soeren Sandmann  <sandmann@daimi.au.dk>

	* cut-n-paste-code/gsequence/gsequence.c
	(g_sequence_ptr_is_begin): Compare to ptr instead of NULL, since
	g_sequence_node_prev() never returns NULL. (pointed out by
	Jeffrey Yasskin).

2004-01-04  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-file-operations-progress.[ch]:
	Use GnomeVFSFileSize instead of gulong to store file sizes.
	Prevents an overflow with transfers > 4GB. Fixes bug #96734.
	
2004-01-03  Anders Carlsson  <andersca@gnome.org>

	* src/athena-location-bar.c: (athena_location_bar_init):
	* src/athena-location-entry.c:
	Don't use EelInputEventBox, we can use GtkEventBox now instead.
	
2004-01-03  Anders Carlsson  <andersca@gnome.org>

	* components/adapter/athena-adapter.c: (athena_adapter_new):
	* src/athena-navigation-bar.c:
	* src/athena-navigation-bar.h:
	* src/athena-navigation-window.c:
	* src/athena-spatial-window.c:
	(athena_spatial_window_instance_init):
	* src/athena-view-frame.c:
	* src/athena-view-frame.h:
	* src/athena-window.c:
	Remove use of EelGenerousBin, we can use a GtkBox with only one
	child for that instead.
	
	* test/Makefile.am:
	Don't use Eel stuff that no-one else uses.
	
2004-01-02  Dennis Cranston <dennis_cranston at yahoo com>
 
 	* src/athena-connect-server-dialog.c:
 	(athena_connect_server_dialog_init)
 	* src/athena-location-dialog.c:
 	(athena_location_dialog_init)
 	HIG fixes (add a missing mnemonic and correct the widget
 	padding) for the "Open Location" and "Connect to Server" 
 	dialogs.
 	
2003-01-02  Diego Gonzalez Gonzalez  <diego@pemas.net>

	* configure.in:
	* component/text/Makefile.am: files in services directory are
	  not used so they should not be installed.

2004-01-02  Dave Camp  <dave@ximian.com>

	* components/image_properties/athena-image-properties-view.c 
	(append_exifdata_string): Fixed a typo in the Focal Length field.  
	Patch from Stephane Wirtel <stephane.wirtel@belgacom.net>	

2004-01-02  Martin Wehner  <martin.wehner@epost.de>

	* libathena-private/athena-file-operations.c:
	Ensure the source isn't deleted as partial copy
	in a duplicate operation. Fixes bug #128095. 

=== athena 2.5.4 ===

2003-12-29  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am (EXTRA_DIST):
	Add OrigTree.pm

	* NEWS: 
	* configure.in:
	Update to 2.5.4

2003-12-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-emblem-utils.c:
	* libathena-private/athena-icon-factory.[ch]:
	* src/athena-main.c:
	* src/athena-server-connect.c:
	* src/athena-window-manage-views.c:
	Use GtkIconTheme instead of GnomeIconTheme

2003-12-18  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require gtk/glib 2.3.0

	* libathena-private/athena-directory.c:
	Use gobject private data for details
	
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.[ch]:
	Use gobject private data for details
	Add has_open_window flag and setter/getter
	
	* libathena-private/athena-icon-container.[ch]:
	* src/file-manager/fm-icon-container.c:
	Support visiting modifier for icons with open windows
	
	* src/file-manager/fm-directory-view.c:
	Don't use filename extension in templates name
	
	* src/file-manager/fm-list-model.c:
	Support accept and visiting icon modifiers
	
	* src/file-manager/fm-list-view.c:
	Always set the drag_view on the model so that the accept
	modifier works
	
	* src/athena-window.c: (athena_window_set_viewed_file):
	Set has_open_window on file

2003-12-17  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window.h: 
	* src/athena-window.c (athena_window_close):
	Virtualize close_window

	* src/athena-spatial-window.c (real_window_close):
	Save geometry and scroll position on window close, not
	on delete event. Also, since the timeout geometry save
	isn't really needed anymore, up that to one second.

2003-12-16  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c (play_file):
	Check for new ogg mime-type.
	Patch from Mattias Eriksson <mattias.eriksson@simovits.com>

2003-12-15  Dennis Cranston <dennis_cranston at yahoo com>

	* src/file-manager/fm-directory-view.c:  Do not add trash and
	directory uris to the recent documents list. Fixes bug #125571.
	
2003-12-13  Alex Duggan  <aldug@astrolinux.com>

	* src/athena-window.c (compute_default_title): 
	canonicalize URI and add titles for burn:/// and themes:/// 

2003-12-12  Vincent Untz  <vincent@vuntz.net>

	* libathena-private/athena-desktop-link-monitor.c:
	Add missing #include <gtk/gtkmessagedialog.h>

2003-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-trash-directory.c:
	Don't show the stupid looking for trash dialog.
	We shouldn't be looking for trash for long these days.
	Patch from William Lachance <wlach@nit.ca>
	
2003-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.[ch]:
	New function athena_file_operations_new_file.
	
	* libathena-private/athena-file-utilities.[ch]:
	New template directory functions
	
	* src/athena-navigation-window-ui.xml:
	* src/athena-spatial-window-ui.xml:
	* src/athena-window-menus.c:
	Add Templates in location menu
	
	* src/file-manager/fm-directory-view.[ch]:
	* src/file-manager/athena-directory-view-ui.xml:
	Implement the templates menu.
	Fix issue that affected create new folder too,
	sometimes the file has already been added before
	we get the done callback.

2003-12-12  Christian Neumair  <chris@gnome-de.org>

	* components/Makefile.am
	* components/hardware/*:
	* configure.in:
	Removed obsolete hardware view.

2003-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	Range selection
	Clear last double click icon if you click on background
	Don't swallow alt-up
	Ignore tripple clicks
	Shift-double-click is open-close-parent (of the clicked icon only)
	
	* libathena-private/athena-icon-private.h:
	Add range_selection_base_icon to icon container
	
	* src/file-manager/fm-directory-view.c:
	handle shift-alt-down
	
	* src/file-manager/fm-list-model.c:
	Implement fm_list_model_file_for_path
	
	* src/file-manager/fm-list-view.c:
	Sync behaviour with icon view.
	Allow shift-doubleclick
	
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-spatial-window-ui.xml:
	* src/athena-spatial-window.c:
	Add alt-shift-up keybinding
	
	* src/athena-window-manage-views.c:
	* src/athena-window-manage-views.h:
	* src/athena-window-menus.c: (go_menu_up_callback):
	* src/athena-window.c: (athena_window_go_up):
	* src/athena-window.h:
	Support for alt-shift-up
	

2003-12-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-dnd.c
	(athena_drag_default_drop_action_for_icons):
	Handle defaults for desktop drops like
	normal directories.

	* libathena-private/athena-desktop-link-monitor.c (athena_desktop_link_monitor_delete_link):
	Don't allow deletion of standard desktop links.

	* src/file-manager/fm-directory-view.c (fm_directory_view_confirm_deletion):
	Don't need to confirm for desktop icons.

2003-12-11  Alexander Larsson  <alexl@redhat.com>

	* components/emblem/athena-emblem-view.c:
	* components/music/athena-music-view.c:
	* components/news/athena-news.c:
	* libathena-private/athena-desktop-link-monitor.c:
	* libathena-private/athena-emblem-utils.c:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-icon-dnd.c:
	* libathena-private/athena-program-chooser.c:
	* libathena-private/athena-program-choosing.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-error-reporting.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/file-manager/fm-search-list-view.c:
	* src/file-manager/athena-indexing-info.c:
	* src/athena-application.c:
	* src/athena-connect-server-dialog.c:
	* src/athena-information-panel.c:
	* src/athena-location-bar.c:
	* src/athena-navigation-window-menus.c:
	* src/athena-navigation-window.c:
	* src/athena-property-browser.c:
	* src/athena-window-manage-views.c:
	* src/athena-window.c:
	Update error dialogs to be HIGy, and use the new
	eel message dialog api.
	Based on patch from dennis_cranston@yahoo.com

2003-12-10  Federico Mena Quintero  <federico@ximian.com>

	* src/athena-connect-server-dialog.c (response_callback): Use
	GTK_RESPONSE_CANCEL, not a homegrown RESPONSE_CANCEL.  This way we
	can close the dialog by pressing Escape.
	(athena_connect_server_dialog_init): Likewise.

	* src/athena-location-dialog.c (response_callback): Likewise.
	(athena_location_dialog_init): Likewise.

2003-12-10  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	s/directory/folder/
	Patch by mpusalkar@novell.com

2003-12-08  Padraig O'Briain  <padraig.obriain@sun.com>

	* src/file-manager/fm-list-view.c (create_and-set_up_tree_view); Set
	accessible name. Fixes bug #128525.

=== athena 2.5.3 ===

2003-12-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	2.5.3

2003-12-04  Sivaiah Nallagatla  <snallagatla@novell.com>
 
        * src/file-manager/fm-list-view.c(fm_list_view_remove_file): Place  the focus on next item
        when an item is deleted from list view.
 
2003-12-03  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-container.c
	(fm_icon_container_get_icon_description):
	Fix const missing build failure.

2003-12-03  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_accessible_action_set_description): Return
	TRUE when function succeeds.
	(athena_icon_canvas_item_accessible_get_name): If name has been set 
	using atk_object_set_name return that.
	(athena_icon_canvas_item_accessible_finalize): Free image description
	or description if exists.
	(athena_icon_canvas_item_accessible_get_image_description): Return
	icon description, if it exists.
	(athena_icon_canvas_item_accessible_set_image-description):
	Implement this function.

	* libathena-private/nautrilus-icon-container.[ch]:
	(athena_icon_container_get_icon_description): New function.

	* src/file-manager/fm-icon-container.c:
	(fm_icon_container_get_icon_description): New function to implement
	AthenaIconContainerClass's get_icon_description.

	This fixes part of bug #126183.

2003-12-01  David Bordoley  <bordoley@msu.edu>

	* src/athena-application.c: (athena_application_close_parent_windows):
	* src/athena-application.h:
	* src/athena-spatial-window-ui.xml:
	* src/athena-spatial-window.c: (file_menu_close_parent_windows_callback),
	(real_merge_menus):
	Change "close all parents" to be "close parent folders"
	and change the behavior to match the label.

2003-12-01 Sivaiah Nallagatla <snallagatla@novell.com>
	
	* src/athena-navigation-window.c (real_get_default_size) (athena_navigation_window_class_init)
	* src/athena-spatial-window.c	(real_get_default_size) (athena_spatial_window_class_init)
	* src/athena-window-private.h
	* src/athena-window.c (set_initial_window_geometry)
	* src/athena-window.h : make default size of navigation window bigger and different from that 
	of spatial window. #127604 in b.g.o
 
2003-11-26  Sebastien Bacher  <seb128@debian.org>

	* libathena-private/apps_athena_preferences.schemas.in: Fix 
	other typos. (Closes: #115744).

2003-11-26  Kjartan Maraas  <kmaraas@gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in: Fix
	typos. Closes bug #121589.

2003-11-26  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/file-manager/fm-properties-window.c:
	(create_permissions_page):
	Remove unused variable (broke build).

2003-11-26  Padraig O'Briain  <padraig.obriain@sun.com>

	* src/file-manager/fm-properties-window.c:
	(Add_permissions_checkbox): Add ATK relations between checkbox and 
	label. Fixes bug #127810.

=== athena 2.5.2 ===

2003-11-24  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	2.5.2

2003-11-24  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (athena_icon_container_accessible_initialize):
	Don't crash on startup if a11y is disabled.

2003-11-21  Padraig O'Briain  <padraig.obriain@sun.com>

	* src/file-manager/fm-icon-container.c 
	(fm_icon_container_instance_init): Add accessible name. 
	Fixes bug #127485.

2003-11-20  Dave Camp  <dave@ximian.com>

	* src/athena-navigation-window.c (real_set_content_view_widget):
	Forgot this bit of Srini's patch.

2003-11-20  Dave Camp  <dave@ximian.com>

	* src/athena-window-manage-views.c: (handle_view_failure): 
	Disconnect the view.  Patch from Srinivasa 
	Ragavan <sragavan@novell.com>.
	
2003-11-20  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c: (button_press_callback): Grab
	focus if clicking on a selected row.  Patch from Sivaiah 
	Nallagatla <snallagatla@novell.com>

2003-11-19  James Willcox  <jwillcox@gnome.org>

	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_accessible_initialize):

	Remove a unused variable, fixes the build

2003-11-19  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-canvas-item.c: Add implementation 
	of AtkAction for AthenaIconCanvasItemAccessible.. Fixes bug #126272.

2003-11-19  Padraig O'Briain  <padraig.obriain@sun.com>

	* src/athena-connect-server-dialog.c: Add mnemonics to labels and
	add calls to gtk_label_set_mnemonic_widget. Fixes bug #126803.

2003-11-19  Padraig O'Briain  <padraig.obriain@sun.com>

	* src/file-manger/fm-properties-window.c:
	(attach_owner_menu): Return option_menu created in this function.
	(create_permissions_page): Set mnemonic widget for owner_label.
	Fixes bug #126637.

2003-11-19  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-link.c 
	(athena_link_get_link_info_given_file_contents): Do not return value
	in function returing void. Fixes build problem.

2003-11-17  David Malcolm <david@davemalcolm.demon.co.uk>

	* src/file-manager/fm-properties-window.c
	(update_properties_window_icon): Set the icon of the GtkWindow for 
	the Properties window whenever the icon in the Basic page is updated.

2003-11-17  Dave Camp  <dave@ximian.com>

	* components/emblem/athena-emblem-view.c:
	(athena_emblem_view_drag_received_cb): NULL out the keyword
	fields.  Patch from Kiran Kumar Immidi <kimmidi@novell.com>.

2003-11-16  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-file.c:
	(compare_by_modification_time): Don't compare unknown
	modification times.  Patch from Sivaiah Nallagatla 
	<snallagatla@novell.com>.

2003-11-16  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-directory-view.c:
	(activate_activation_uri_ready_callback),
	(fm_directory_view_activate_file): Reread the activation URI of
	symlinks in case the link target is stale.  Patch from
	Maneesh Pusalkar <mpusalkar@novell.com>.

2003-11-13  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (open_location):
	Only monitor then for_open_with file when the popup menu is visible.
	Also, don't monitor it when opening the location, as this can cause
	us to unnecessary re-read the mime list on force-reload	opens
	(e.g. non-local opens).
	
=== athena 2.5.1.1 ===

2003-11-12  Dave Camp  <dave@ximian.com>

	* NEWS:
	* configure.in: 2.5.1.1
	
	* configure.in:
	* components/emblem/Makefile.am:
	* components/image_properties/Makefile.am:
	* components/sample/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am: Cleaned up DISABLE_DEPREACTED 
	bits.

2003-11-11  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c 
	(list_view_get_first_visible_file_callback): Unref the file
	before returning its uri.

=== athena 2.5.1 ===

2003-11-10  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump to 2.5.1, require later eel & gnome-vfs
	
2003-11-06  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am:
	* athena-computer.desktop.in:
	* athena-home.desktop.in:
	New desktop files
	
	* athena.desktop.in:
	Make this one "browse filesystem"
	
	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	computer desktop icon prefs
	
	* libathena-private/athena-desktop-icon-file.c:
	(update_info_from_link): Set permissions too
	
	* libathena-private/athena-desktop-link-monitor.c:
	* libathena-private/athena-desktop-link.[ch]:
	Add computer icon
	
	* src/Makefile.am:
	* src/athena-connect-server-dialog.[ch]:
	Connect server dialog
	
	* src/file-manager/fm-directory-view.c:
	Mount drives on activation.

	* src/file-manager/fm-icon-container.c:
	Sort computer first
	
	* src/file-manager/fm-properties-window.c:
	Put back AthenaDesktopLink handling for e.g. computer and home.
	
	* src/athena-application.[ch]:
	Reload dirs on mounts.
	add browser_window argument on open window
	
	* src/athena-main.c:
	add browser_window argument on open window (--browser)
	hack to register computer icon
	
	* src/athena-shell-interface.idl:
	* src/athena-shell.c: 
	add browser_window argument on open window
	
	* src/athena-navigation-window-ui.xml:
	* src/athena-spatial-window-ui.xml:
	* src/athena-window-menus.c:
	Add connect to server
	Add computer
	
	* src/athena-window.c:
	Nice title for burn:///

2003-11-05  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require new gnome-vfs
	
	* components/tree/athena-tree-view.c:
	* libathena-private/athena-desktop-link-monitor.c:
	* libathena-private/athena-desktop-link.[ch]:
	* libathena-private/athena-monitor.c:
	* libathena-private/athena-trash-directory.c:
	* libathena-private/athena-trash-monitor.[ch]:
	* src/athena-application.c:
	Use gnome-vfs-volume-manager instead of athena-volume-manager.c
	
	* libathena-private/athena-desktop-icon-file.c:
	Set the volume on the athenafile
	
	* libathena-private/athena-directory-async.c:
	Load volume info from link
	
	* libathena-private/athena-file-attributes.h:
	* libathena-private/athena-mime-actions.c:
	Add new VOLUMES attribute
	
	* libathena-private/athena-file-private.h:
	Add has_volume and has_drive to AthenaFile
	
	* libathena-private/athena-file.[ch]:
	Add has_volume and has_drive to AthenaFile
	Volumes/drives are sorted separately

	* libathena-private/athena-link-desktop-file.[ch]:
	* libathena-private/athena-link.[ch]:
	Read drive and volume id from links

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/athena-desktop-icon-view-ui.xml:
	Remove volume ops. Remove disks menu
	
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/athena-directory-view-ui.xml:
	Implement volume ops using gnome-vfs
	
	* src/file-manager/fm-properties-window.c:
	Handle drives/volumes
	
	* src/athena-window.c:
	Make a nicer title for some specific locations

	* libathena-private/athena-volume-monitor.[ch]:
	* libathena-private/Makefile.am
	remove this old crap

2003-11-03  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-bonobo-extensions.h:
	* libathena-private/athena-bonobo-extensions.c:
	(athena_bonobo_register_activation_shortcut),
	(athena_bonobo_unregister_activation_shortcut),
	(athena_bonobo_activate_from_id):
	Allow to register shortcuts for in-process IIDs so
	that activation doesn't go through bonobo-activation.
	
	* src/athena-application.c: (create_object_shortcut),
	(athena_application_instance_init),
	(athena_application_destroy):
	* components/emblem/libmain.c:
	* components/history/libmain.c:
	* components/notes/athena-notes.c:
	* components/tree/libmain.c:
	Register activation shortcuts.

	* src/athena-navigation-window.c:
	(athena_navigation_window_hide_sidebar),
	(athena_navigation_window_show_sidebar):
	Avoid gratuitus gconf write.
	
2003-11-01  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window.c (athena_window_hide_status_bar) 
	(athena_window_show_status_bar):
	Don't write ATHENA_PREFERENCES_START_WITH_STATUS_BAR on each
	open new window.

2003-10-29  Martin Wehner  <martin.wehner@epost.de>

	* components/tree/athena-tree-model.c:
	* libathena-private/athena-icon-dnd.c:
	* src/file-manager/fm-properties-window.c:
	Fix leaks.

2003-10-22  Padraig O'Briain  <padraig.obriain@sun.com>

        * libathena-private/athena-icon-container.c
        (select_previous_or_next_icon): Cycle around to start or end if
        at last or first icon. (bug #82609)

2003-10-21  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-desktop-link.c:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-file.c:
	* libathena-private/athena-icon-factory.c: 
	* src/athena-application.c:
	* src/athena-bookmark-list.c:
	Fix leaks.
	Patch from Martin Wehner <martin.wehner@epost.de>

Mon Oct 20 13:38:16 2003  Jonathan Blandford  <jrb@gnome.org>
 
	* src/Makefile.am (INCLUDES): remove GTK and
	GNOME_DISABLE_DEPRECATED

	* src/file-manager/Makefile.am (INCLUDES): ditto

	* components/emblem/Makefile.am (INCLUDES): ditto

2003-10-20  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Change back orbit req.

=== athena 2.5.0 ===

2003-10-20  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update
	
	* configure.in:
	Require new eel & orbit
	Bump to 2.5.0

2003-10-17  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-manage-views.c:
	Use themed icon for desktop.
	Patch from Luca Ferretti <elle.uca@libero.it>

2003-10-17  Alexander Larsson  <alexl@redhat.com>

	* components/image_properties/athena-image-properties-view.c:
	Split up camera & maker.
	Don't center text
	Allow selection of text.
	Parts of patch from hugo.
	
2003-10-14  Alexander Larsson  <alexl@redhat.com>

	* acconfig.h:
	* components/image_properties/Makefile.am:
	* components/image_properties/athena-image-properties-view.c:
	* configure.in:
	Support for exif info.
	Patch from Hugo <athena@starbreeze.knoware.nl>

2003-10-11  Dennis cranston <dennis_cranston at yahoo com>

       * src/file-manager/fm-icon-view.c:  Fixes to the 'Link here' 
       and 'Cancel' drag and drop actions.

2003-10-13  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (cell_renderer_edited):
	Don't rename files to "". Fixes #124420
	Based on patch from mwehner@tfh-berlin.de.

2003-10-11  Dave Camp  <dave@ximian.com>

	* src/Makefile.am: Add athena-location-dialog.[ch] and
	athena-location-entry.[ch]
	* src/athena-location-bar.c: (editable_event_after_callback),
	(athena_location_bar_init):
	* src/athena-location-entry.c: Moved the tab-completing entry
	into its own widget.
	* src/athena-location-dialog.c
	* src/athena-spatial-window.c: (real_prompt_for_location),
	(athena_spatial_window_class_init): Add an Open Location 
	dialog for the spatial windows.

2003-10-10  Christophe Fergeau  <teuf@gnome.org>

	* components/tree/athena-tree-view.c : expand rows in the 
	  directory tree view on double-click

2003-10-08  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-canvas-item.c 
	(athena_icon_canvas_item_accessible_ref_state_set) Avoid 
	dereferencing a NULL pointer. (bug #124122)

2003-10-07  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_scroll_to_icon): Scroll to ICON_PAD_TOP
	above the icon.
	
	* src/athena-navigation-window.c:
	(athena_navigation_window_set_sidebar_panels),
	(athena_navigation_window_class_init):
	* src/athena-spatial-window.c:
	(athena_spatial_window_class_init):
	* src/athena-view-frame.c: (athena_view_frame_new),
	(athena_view_frame_get_prop), (create_ambient_properties):
	* src/athena-view-frame.h:
	* src/athena-window-manage-views.c: (load_content_view):
	* src/athena-window.h:
	* libathena/athena-view-component.idl:
	* libathena/athena-view.c: (athena_view_set_listener_mask),
	(athena_view_get_window_type):
	* libathena/athena-view.h: Added a window type property to
	the view frame.
	
	* src/file-manager/fm-directory-view.c:
	(can_use_component_for_file), (reset_bonobo_open_with_menu),
	(showing_trash_directory), (should_show_empty_trash),
	(file_list_all_can_use_components), (real_update_menus),
	(activate_callback), (fm_directory_view_accepts_dragged_files):
	* src/file-manager/athena-directory-view-ui.xml: Don't use
	file views in spatial windows.  Use Browse Folder in spatial
	windows and Open in New Window in navigation windows.  Don't
	show "Empty Trash" in non-trash spatial windows.

2003-10-02  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	Separate SNAP_SIZE into SNAP_SIZE_X and SNAP_SIZE_Y.
	Make SNAP_SIZE_Y 1/4 of old SNAP_SIZE.

2003-10-01  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/athena-directory-view-ui.xml:
	Ctrl-S to select by pattern.

2003-10-01  Murray Cumming  <murrayc@usa.net>

	* src/Makefile.am, src/file-manager/Makefile.am: Removed 
	-DG_DISABLE_DEPRECATED so that it builds against glib 2.3.0, which
	has deprecated g_value_string_set_take_ownership() in favour of 
	g_value_take_string(). G_DISABLE_DEPRECATED has already been removed
	from configure.in, but it is hard-coded into lots of the Makefile.am
	files.

2003-09-30  Dave Camp  <dave@ximian.com>

	* Merge the athena-spatial-playground branch to HEAD.

2003-09-30  Dave Camp  <dave@ximian.com>

	* src/Makefile.am:
	* src/athena-application.c:
	(athena_application_get_spatial_window_list),
	(athena_application_get_existing_spatial_window),
	(find_parent_spatial_window),
	(athena_application_close_with_parent_windows),
	(spatial_window_destroyed_callback),
	(athena_application_present_spatial_window):
	* src/athena-application.h:
	* src/athena-desktop-window.c:
	(athena_desktop_window_update_directory):
	* src/athena-desktop-window.h:
	* src/athena-object-window.c:
	* src/athena-object-window.h:
	* src/athena-shell.c: (open_window),
	(restore_one_window_callback):
	* src/athena-spatial-window.c: (save_window_geometry_timeout),
	(athena_spatial_window_configure_event),
	(athena_spatial_window_unrealize),
	(athena_spatial_window_destroy),
	(athena_spatial_window_finalize),
	(athena_spatial_window_save_geometry),
	(athena_spatial_window_save_scroll_position),
	(athena_spatial_window_show),
	(file_menu_close_with_parent_windows_callback), (real_merge_menus),
	(real_set_content_view_widget), (real_delete_event),
	(athena_spatial_window_instance_init),
	(athena_spatial_window_class_init):
	* src/athena-spatial-window.h:
	* src/athena-window-manage-views.c: (open_location),
	(position_and_show_window_callback):
	* src/athena-window-private.h:  Renamed AthenaObjectWindow 
	to AthenaSpatialWindow.

2003-09-30  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-manage-views.c (load_new_location_in_all_views):
	Don't load from window->new_content_view in the view list.

2003-09-29  Dave Camp  <dave@ximian.com>

	* src/athena-navigation-window.c:
	(athena_navigation_window_tear_down_sidebar),
	(athena_navigation_window_clear_back_list),
	(compare_view_identifier_with_iid),
	(disconnect_and_destroy_sidebar_panel), (set_side_panel_image),
	(side_panel_image_changed_callback),
	(report_side_panel_failure_to_user),
	(side_panel_view_failed_callback), (connect_side_panel),
	(side_panel_view_loaded_callback),
	(athena_navigation_window_set_sidebar_panels):
	* src/athena-window-manage-views.c: (change_selection),
	(update_title), (view_frame_info_new), (set_view_frame_info),
	(athena_window_get_view_frame_label),
	(report_content_view_failure_to_user_internal),
	(load_new_location_in_all_views), (load_content_view),
	(handle_view_failure), (position_and_show_window_callback),
	(athena_window_stop_loading),
	(athena_window_connect_extra_view),
	(athena_window_disconnect_extra_view),
	(content_view_failed_callback), (view_loaded_callback),
	(connect_view), (disconnect_view), (disconnect_view_callback),
	(athena_window_manage_views_destroy):
	* src/athena-window-manage-views.h:
	* src/athena-window.h:  Move side-panel specific code into
	the navigation window.

2003-09-28  James Willcox  <james@ximian.com>

	* libathena-private/athena-metadata.h:
	* src/athena-object-window.c: (athena_object_window_destroy),
	(athena_object_window_save_scroll_position), (delete_event_cb),
	(athena_object_window_instance_init):
	* src/athena-object-window.h:
	* src/athena-view-frame.c:
	(athena_view_frame_get_first_visible_file):
	* src/athena-window-manage-views.c:
	(position_and_show_window_callback):

	Save the scroll position in object windows.

2003-09-24  Dave Camp  <dave@ximian.com>

	* src/athena-desktop-window.c: (real_get_title),
	(athena_desktop_window_class_init): Return "Desktop" for everything.
	* src/athena-navigation-window.c: (real_set_title),
	(athena_navigation_window_class_init): Set the title to 
	"File Browser: foo"
	* src/athena-object-window.c: (real_set_title),
	(athena_object_window_class_init): Set the title to the object
	name.
	* src/athena-window-manage-views.c: (update_title): Moved
	title handling to AthenaWindow.
	(athena_window_manage_views_destroy): Destroy side panes.
	* src/athena-window.h:
	* src/athena-window.c: (compute_default_title), (real_get_title),
	(athena_window_get_title), (real_set_title),
	(athena_window_set_title), (athena_window_update_title),
	(athena_window_class_init): Moved title handling here.

2003-09-24  Dave Camp  <dave@ximian.com>

	* src/athena-navigation-window.c: (activate_nth_short_list_item),
	(activate_extra_viewer), (view_as_menu_switch_views_callback),
	(create_view_as_menu_item), (new_gtk_separator),
	(view_as_menu_choose_view_callback), (load_view_as_menu),
	(real_load_view_as_menu), (real_set_content_view_widget),
	(athena_navigation_window_class_init):
	* src/athena-window-manage-views.c:
	(location_has_really_changed):
	* src/athena-window-private.h:
	* src/athena-window.c: (update_extra_viewer_in_view_as_menus),
	(athena_window_synch_view_as_menus), (real_load_view_as_menu),
	(load_view_as_menus_callback), (real_set_content_view_widget),
	(athena_window_class_init):
	* src/athena-window.h: Fixed up the View As optionmenu for
	the navigation window. 

2003-09-23  Dave Camp  <dave@ximian.com>

	* src/athena-navigation-window-menus.c: (forget_history_if_yes),
	(forget_history_if_confirmed), (go_menu_forget_history_callback),
	(athena_window_remove_go_menu_callback),
	(athena_window_remove_go_menu_items), (refresh_go_menu),
	(refresh_go_menu_idle_callback), (schedule_refresh_go_menu),
	(athena_navigation_window_initialize_go_menu),
	(athena_navigation_window_initialize_menus_part_1),
	(athena_navigation_window_initialize_menus_part_2):
	* src/athena-navigation-window-ui.xml:
	* src/athena-shell-ui.xml:
	* src/athena-spatial-window-ui.xml:
	* src/athena-window-menus.c:
	(athena_window_initialize_menus_part_1):
	* src/athena-window.c: (ui_idle_handler):  Moved the Go menu 
	and history to the navigation window.  In the spatial window,
	moved Open Parent and Open Location to the File menu, and added 
	a Places menu with a few static bookmarks.

2003-09-23  Dave Camp  <dave@ximian.com>

	* libathena/athena-view-component.idl:
	* libathena/athena-view.c: (call_open_location),
	(athena_view_open_location):
	* libathena/athena-view.h:
	* src/athena-view-frame-corba.c: (open_location), (close_window),
	(impl_Athena_ViewFrame_open_location),
	(athena_view_frame_corba_part_class_init):
	* src/athena-view-frame-private.h:
	* src/athena-view-frame.c: (athena_view_frame_open_location),
	(athena_view_frame_class_init):
	* src/athena-view-frame.h:
	* src/athena-window-manage-views.c: (new_window_show_callback),
	(open_location), (athena_window_open_location),
	(athena_window_open_location_with_selection),
	(open_location_callback): Implemented a new open_location API.

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_did_not_drag),
	(athena_icon_container_class_init), (handle_icon_button_press),
	(activate_selected_items), (activate_selected_items_alternate):
	* libathena-private/athena-icon-container.h:
	* src/file-manager/fm-directory-view.c: (open_callback),
	(open_location), (switch_location_and_view),
	(open_one_in_new_window), (open_scripts_folder_callback),
	(activate_callback), (fm_directory_view_activate_file),
	(fm_directory_view_activate_files):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	(icon_container_activate_callback),
	(icon_container_activate_alternate_callback),
	(create_icon_container):
	* src/file-manager/fm-list-view.c: (activate_selected_items),
	(activate_selected_items_alternate), (fm_list_view_did_not_drag),
	(button_press_callback):  Use new open_location API, if an 
	item is middle-clicked to activate, close the window
	behind it.
	
	* src/file-manager/fm-search-list-view.c:
	(reveal_selected_items_callback):
	* components/adapter/athena-adapter.c:
	(athena_adapter_open_location_callback):
	* components/history/athena-history-view.c:
	(row_activated_callback):
	* components/tree/athena-tree-view.c:
	(got_activation_uri_callback): Updated for new open_location API.

2003-09-21  Dave Camp  <dave@ximian.com>

	* src/athena-shell-ui.xml: Get rid of the find menu item for 
	now.

2003-09-21  Dave Camp  <dave@ximian.com>

	* src/Makefile.am: Added athena-spatial-window-ui.xml.
	* src/athena-application.h:
	* src/athena-application.c:
	(athena_application_close_all_navigation_windows): Moved
	here from athena_application_close_all_windows, only
	close navigation windows.
	(athena_application_get_existing_object_window),
	(find_parent_object_window),
	(athena_application_close_with_parent_windows): New functions.
	* src/athena-navigation-window-menus.c:
	(file_menu_close_all_windows_callback),
	(athena_navigation_window_initialize_menus_part_1):
	* src/athena-navigation-window-ui.xml: Move "Close All Windows" 
	to the navigation window.
	* src/athena-object-window.h:
	* src/athena-object-window.c:
	(file_menu_close_with_parent_windows_callback), (real_merge_menus),
	(athena_object_window_class_init): Added a "Close With Parents"
	command to the spatial windows.
	* src/athena-shell-ui.xml: 
	* src/athena-window-menus.c:
	(athena_window_initialize_menus_part_1): Took out "close all 
	windows"

2003-09-18  Dave Camp  <dcamp@novell.com>

	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h: Removed 
	the "start with toolbar" preference.
	* src/athena-navigation-window-menus.c: 
	(athena_navigation_window_update_show_hide_menu_items),
	(athena_navigation_window_initialize_menus_part_1): 
	* src/athena-navigation-window-ui.xml: Removed the toolbar 
	toggle.
	* src/athena-window-private.h: Removed the unused 
	throbber bits.
	* src/athena-window-toolbars.c:
	(athena_navigation_window_initialize_toolbars): Ignore the
	"start with toolbar" preference.
	* src/athena-navigation-window.c:
	(athena_navigation_window_show): Show or hide the dock 
	items before showing the window.

2003-09-14  Dave Camp  <dave@ximian.com>

	* src/athena-file-management-properties.c:
	(athena_file_management_properties_dialog_setup):
	* src/athena-file-management-properties.glade:
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h: Removed the
	"always use new window" preference.
	* libathena/athena-view-component.idl: Updated the 
	documentation for the open_location functions.
	* src/Makefile.am: Added new files.
	* src/file-manager/fm-directory-view.c: (open_alternate_callback),
	(open_location), (switch_location_and_view),
	(fm_directory_view_init), (fm_directory_view_finalize),
	(open_one_in_new_window), (open_scripts_folder_callback),
	(real_update_menus), (fm_directory_view_activate_files): Use new
	window-opening logic.
	* src/file-manager/athena-desktop-icon-view-ui.xml:
	* src/file-manager/athena-directory-view-ui.xml: Moved "open
	in new window" to Open With.
	* src/athena-application.h:
	* src/athena-application.c:
	(athena_application_get_object_window_list), (create_window),
	(object_window_destroyed_callback),
	(athena_application_present_object_window): New functions.
	(athena_application_create_navigation_window): Moved here
	from athena_application_create_window().
	(volume_unmounted_callback): Close the window if it's the last
	one.
	* src/athena-desktop-window.h:
	* src/athena-desktop-window.c:
	(athena_desktop_window_update_directory), (real_merge_menus),
	(athena_desktop_window_class_init): Derive from 
	AthenaObjectWindow.
	* src/athena-location-bar.h:
	* src/athena-location-bar.c: (athena_location_bar_get_window),
	(drag_data_received_callback), (athena_location_bar_new): Take
	a AthenaNavigationWindow.
	* src/athena-navigation-window-menus.c: (go_menu_back_callback),
	(go_menu_forward_callback),
	(view_menu_show_hide_sidebar_state_changed_callback),
	(view_menu_show_hide_toolbar_state_changed_callback),
	(view_menu_show_hide_location_bar_state_changed_callback),
	(athena_navigation_window_update_show_hide_menu_items),
	(bookmarks_menu_add_bookmark_callback),
	(bookmarks_menu_edit_bookmarks_callback), (append_separator),
	(free_bookmark_list), (get_bookmark_list),
	(remove_bookmarks_for_uri_if_yes), (show_bogus_bookmark_window),
	(create_menu_item_from_node), (add_bookmark_for_current_location),
	(edit_bookmarks),
	(athena_window_bookmarks_preference_changed_callback),
	(refresh_bookmarks_menu),
	(athena_navigation_window_initialize_bookmarks_menu),
	(athena_navigation_window_initialize_menus_part_1),
	(athena_navigation_window_initialize_menus_part_2),
	(athena_navigation_window_remove_bookmarks_menu_callback),
	(athena_navigation_window_remove_bookmarks_menu_items),
	(append_dynamic_bookmarks), (refresh_bookmarks_menu_idle_callback),
	(schedule_refresh_bookmarks_menu):  Moved all of the
	navigation-window-specific menu code here.
	* src/athena-shell-ui.xml:
	* src/athena-shell.c: (open_window),
	(restore_one_window_callback): Open navigation windows (this
	needs work).
	* src/athena-switchable-navigation-bar.c:
	(create_search_bar_if_non_existant),
	(athena_switchable_navigation_bar_new):
	* src/athena-switchable-navigation-bar.h: Take a 
	AthenaNavigationWindow.
	* src/athena-view-frame.c: (emit_zoom_parameters_changed),
	(emit_zoom_parameters_changed_callback),
	(emit_zoom_level_changed_callback),
	(athena_view_frame_get_zoom_level),
	(athena_view_frame_get_min_zoom_level),
	(athena_view_frame_get_max_zoom_level),
	(athena_view_frame_get_has_min_zoom_level),
	(athena_view_frame_get_has_max_zoom_level),
	(athena_view_frame_get_can_zoom_in),
	(athena_view_frame_get_can_zoom_out):
	* src/athena-view-frame.h: Store zoom parameters in the
	view frame so that it can be a model for the UI rather than
	the zoom control.
	* src/athena-navigation-window.c:
	(athena_navigation_window_instance_init), (go_to_callback),
	(navigation_bar_location_changed_callback),
	(navigation_bar_mode_changed_callback),
	(side_pane_close_requested_callback),
	(side_pane_size_allocate_callback), (setup_side_pane_width),
	(set_current_side_panel), (side_pane_switch_page_callback),
	(athena_navigation_window_set_up_sidebar),
	(athena_navigation_window_tear_down_sidebar),
	(athena_navigation_window_unrealize),
	(athena_navigation_window_destroy),
	(athena_navigation_window_finalize),
	(athena_navigation_window_add_sidebar_panel),
	(athena_navigation_window_remove_sidebar_panel),
	(athena_navigation_window_go_back),
	(athena_navigation_window_go_forward),
	(athena_navigation_window_set_search_mode),
	(athena_navigation_window_get_search_mode),
	(athena_navigation_window_go_home),
	(athena_navigation_window_allow_back),
	(athena_navigation_window_allow_forward), (real_merge_menus),
	(zoom_level_changed_callback), (zoom_parameters_changed_callback),
	(connect_view), (disconnect_view), (real_set_content_view_widget),
	(real_set_throbber_active),
	(athena_navigation_window_show_location_bar_temporarily),
	(real_prompt_for_location),
	(athena_navigation_window_clear_forward_list),
	(athena_navigation_window_clear_back_list), (add_sidebar_panels),
	(show_dock_item), (hide_dock_item), (dock_item_showing),
	(athena_navigation_window_hide_location_bar),
	(athena_navigation_window_show_location_bar),
	(athena_navigation_window_location_bar_showing),
	(athena_navigation_window_hide_toolbar),
	(athena_navigation_window_show_toolbar),
	(athena_navigation_window_toolbar_showing),
	(athena_navigation_window_hide_sidebar),
	(athena_navigation_window_show_sidebar),
	(athena_navigation_window_sidebar_showing),
	(athena_navigation_window_get_base_page_index),
	(athena_navigation_window_show),
	(athena_navigation_window_class_init):
	* src/athena-navigation-window.h:
	* src/athena-object-window.c: (save_window_geometry_timeout),
	(athena_object_window_configure_event),
	(athena_object_window_unrealize),
	(athena_object_window_destroy),
	(athena_object_window_finalize),
	(athena_object_window_save_geometry),
	(athena_object_window_show), (real_set_content_view_widget),
	(athena_object_window_instance_init),
	(athena_object_window_class_init):
	* src/athena-object-window.h:
	* src/athena-window-manage-views.c: (change_selection),
	(update_title), (set_displayed_location), (handle_go_back),
	(handle_go_forward), (handle_go_elsewhere), (update_up_button),
	(viewed_file_changed_callback), (update_history),
	(update_for_new_location), (open_location),
	(athena_window_open_location),
	(athena_window_open_location_with_selection),
	(load_new_location_in_sidebar_panels),
	(load_new_location_in_all_views),
	(disconnect_and_destroy_sidebar_panel), (handle_view_failure),
	(position_and_show_window_callback),
	(athena_window_stop_loading),
	(athena_navigation_window_set_sidebar_panels),
	(zoom_level_changed_callback), (zoom_parameters_changed_callback),
	(go_back_callback),
	(open_location_prefer_existing_window_callback),
	(open_location_force_new_window_callback),
	(report_redirect_callback), (set_side_panel_image),
	(view_loaded_callback), (athena_window_manage_views_destroy),
	(athena_navigation_window_back_or_forward):
	* src/athena-window-manage-views.h:
	* src/athena-window-menus.c: (bookmark_holder_new),
	(show_bogus_bookmark_window), (activate_bookmark_in_menu_item),
	(athena_menus_append_bookmark_to_menu),
	(file_menu_new_window_callback), (file_menu_burn_cd_callback),
	(go_menu_location_callback),
	(athena_window_update_show_hide_menu_items),
	(athena_window_initialize_menus_part_1),
	(athena_window_initialize_menus_part_2), (refresh_go_menu):
	* src/athena-window-private.h:
	* src/athena-window-toolbars.c:
	(activate_back_or_forward_menu_item),
	(activate_back_menu_item_callback),
	(activate_forward_menu_item_callback),
	(create_back_or_forward_menu), (get_back_button),
	(get_forward_button), (back_or_forward_button_pressed_callback),
	(create_back_or_forward_toolbar_item), (throbber_set_throbbing),
	(throbber_created_callback),
	(athena_navigation_window_set_throbber_active),
	(athena_navigation_window_activate_throbber),
	(athena_navigation_window_initialize_toolbars):
	* src/athena-window.c: (athena_window_instance_init),
	(ui_idle_handler), (athena_window_go_up),
	(athena_window_allow_up), (athena_window_allow_stop),
	(athena_window_allow_reload), (athena_window_allow_burn_cd),
	(athena_window_go_home), (athena_window_launch_cd_burner),
	(athena_window_prompt_for_location),
	(athena_window_get_location), (real_merge_menus),
	(athena_window_constructed), (athena_window_destroy),
	(athena_window_finalize), (athena_window_close),
	(update_extra_viewer_in_view_as_menus),
	(athena_window_synch_view_as_menus),
	(load_view_as_menus_callback), (athena_window_display_error),
	(real_set_content_view_widget),
	(athena_window_set_content_view_widget), (show_dock_item),
	(hide_dock_item), (dock_item_showing),
	(athena_window_hide_status_bar),
	(athena_window_show_status_bar),
	(athena_window_status_bar_showing), (athena_window_show),
	(athena_window_get_ui_container),
	(athena_window_set_viewed_file), (add_to_history_list),
	(real_add_current_location_to_history_list),
	(athena_window_add_current_location_to_history_list),
	(athena_forget_history), (athena_window_class_init):
	* src/athena-window.h: Split AthenaWindow into three 
	classes.  A AthenaWindow base class, a AthenaObjectWindow
	class, and a AthenaNavigationWindow class.

2003-09-30  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (athena_icon_container_scroll_to_icon):
	Force any scheduled relayout to run before scrolling.

2003-09-27  James Willcox  <james@ximian.com>

	* src/file-manager/fm-directory-view.c: (pattern_select_response_cb)
	
	Reveal the current selection.  Useful if the selected pattern is
	not currently visible.

2003-09-26  Dennis Cranston <dennis_cranston at yahoo com>

	* src/file-manager/fm-directory-view.c:
	(select_pattern):
	
	HIG fixes (add a missing mnemonic and correct the widget 
	padding) for the "Select Pattern" dialog.
	
2003-09-25  James Willcox  <james@ximian.com>

	* libathena-private/athena-directory.c:
	(athena_directory_match_glob):
	* libathena-private/athena-directory.h:
	* src/file-manager/fm-directory-view.c: (get_pattern_selection),
	(bonobo_menu_select_pattern_callback), (real_merge_menus):
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-shell-ui.xml:
 
 	Add a "Edit->Select Pattern" menu entry
 
2003-09-25  Ettore Perazzoli  <ettore@ximian.com>

	* src/file-manager/fm-directory-view.c
	(struct FMDirectoryViewDetails): Removed member
	display_pending_timeout_id.
	(schedule_timeout_display_of_pending_files): Removed.
	(unschedule_timeout_display_of_pending_files): Removed.
	(display_pending_timeout_callback): Removed.
	(unschedule_display_of_pending_files): Don't call
	unschedule_timeout_display_of_pending_files() since it's gone.
	(queue_pending_files): Schedule an idle display only if we are not
	loading, or if all the files have been seen.
	(finish_loading): Don't schedule a timeout display.

2003-09-22  Dave Camp  <dave@ximian.com>

	* configure.in (DISABLE_DEPRECATED_CFLAGS): Removed 
	G_DISABLE_DEPRECATED for now.

2003-09-19  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (permission_change_callback):
	Updated fix for bug #122537.
	
2003-09-19  Alexander Larsson  <alexl@redhat.com>

	* add-include-prefix:
	Fix to work correctly on MacOS X and NetBSD.
	Fixes bug #87835.

2003-09-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_get_internal):
	Don't assert_not_reached for unsupported URIs when create == FALSE.
	Fixes bug #122265.

2003-09-19  Dennis Cranston <dennis_cranston at yahoo com>

	* libathena-private/athena-file-operations.c:  HIGify
	the empty trash dialog. Changes strings.

2003-09-18  Alexander Larsson  <alexl@redhat.com>

	* libathena/athena-view-standard-main.c (athena_view_instrument_for_failure):
	Correctly remove athena_view_never_got_frame_timeout timeout on destroy.
	Fixes #120904, thanks to Narayana Pattipati for diagnosing this.

2003-09-18  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (permission_change_callback):
	Fix compilation error (bug #122537).
	Patch by david.hawthorne@sun.com
	
2003-09-18  Alexander Larsson  <alexl@redhat.com>

	* src/athena-property-browser.c (make_properties_from_directories):
	Only add eraser for emblems browser.

2003-09-18  Alexander Larsson  <alexl@redhat.com>
	
	* src/athena-window-manage-views.c (begin_location_change):
	Check for content_view != NULL before saving current location
	the old view might have failed. Fixes bug #119407.
	Thanks to Narayana Pattipati for discovering this.

2003-09-18  Alexander Larsson  <alexl@redhat.com>

	* src/athena-main.c (main):
	Call gnome_vfs_shutdown before unreffing application to
	avoid crashes on shutdown.
	Patch by Martin Wehner <martin.wehner@epost.de>

2003-09-16  Alexander Larsson  <alexl@redhat.com>

	* cut-n-paste-code/gsequence/gsequence.c:
	Patch from Soeren Sandmann to fix removes.
	Thanks to Martin Wehner for tracking this down.
	
2003-09-11 Mathieu Lacage <mathieu@gnome.org>

	* src/file-manager/fm-properties-window.c: add a wait cursor during
	permission change. This is most useful when changing the permission
	a big group of files.

2003-09-11  Bastien Nocera  <hadess@hadess.net>

	* libathena-private/athena-volume-monitor.c:
	(get_iso9660_volume_name_data_track_offset),
	(get_iso9660_volume_name): get the volume name correctly on CDs
	where the data track is not the first track (Linux only)

=== athena 2.4.0 ===

2003-09-08  Alexander Larsson  <alexl@redhat.com>

	* AUTHORS:
	* THANKS:
	* README: Updated for 2.4.0

2003-09-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in: 2.4.0

2003-09-05  Miguel Ibarra  <mibarra@ximian.com>

	* configure.in (HAVE_STARTUP_NOTIFICATION): If found,
	libstartup-notification is added to the extra core modules list.
	
2003-09-05  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c (migrate_old_athena_files):
	Don't migrate .gnome-desktop if its a symlink.

2003-09-05  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c (realized_callback):
	Hack to workaround messed up desktop icons.

2003-09-02  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* libathena-private/athena-icon-factory.c:
	(athena_remove_icon_file_name_suffix):
	Handle xpm icons in .desktop correctly (mdk bug 4453)

2003-09-02  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* libathena-private/.cvsignore: quiet CVS..

	* libathena-private/athena-file.c: (get_real_name):
	convert user real name to UTF-8 if needed (fix Mdk bug 4939)

=== athena 2.3.90 ===

2003-09-02  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in: 2.3.90

2003-09-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_invalidate_attributes_internal):
	Don't invalidate attributes for AthenaDesktopIconFiles, since
	they are always up to date (being in-memory objects). This fixes the
	problem where the trash and/or home icons became unusable with the default
	icon.

2003-08-29  Alexander Larsson  <alexl@redhat.com>

	* components/tree/athena-tree-view.c (theme_changed_callback):
	Don't set theme if model is NULL.

2003-08-27  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory-private.h:
	New function athena_set_kde_trash_name.
	Auto hide KDE trash dir in desktop dir
	
	* libathena-private/athena-directory.[ch]:
	New function athena_directory_is_desktop_directory()

	* libathena-private/athena-file-utilities.[ch]:
	* libathena-private/athena-file.c:
	Tweak the is_desktop_directory a bit so it works for
	both Files and Directories.

	* src/athena-application.c:
	On initialization, read the kde config to figure out the kde
	trash directory name.

=== athena 2.3.9 ===

2003-08-25  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in: 2.3.9

2003-08-22  Dave Camp  <dave@ximian.com>

	* components/tree/athena-tree-view.c:
	(show_selection_idle_callback), (schedule_show_selection),
	(row_loaded_callback), (create_tree), (load_location_callback),
	(athena_tree_view_dispose): Remove the show_selection idle
	handler if the view goes away, and chain up in the dispose
	handler.  Fixes #119150.

2003-08-20  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c:
	(set_keyboard_rubberband_start),
	(clear_keyboard_rubberband_start),
	(get_rubberband), (keyboard_move_to), (keyboard_home),
	(keyboard_end), (keyboard_arrow_key), (select_matching_name),
	(select_previous_or_next_icon), (button_press_event),
	(athena_icon_container_clear), (icon_destroy): *
	libathena-private/athena-icon-private.h: Make shift+keynav
	select icons in a rectangle.  Fixes #48403.

2003-08-14  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "ne" to ALL_LINGUAS.

2003-08-08  Dave Camp  <dave@ximian.com>

	* src/athena-window-manage-views.c:
	(determined_initial_view_callback): Improved error string for
	missing proxy hostnames.  Patch from  Christophe Fergeau 
	<teuf@users.sourceforge.net> 

2003-08-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (key_press_event): 
	* src/athena-location-bar.c (entry_would_have_inserted_characters):
	Handle keypad navigation keys too.

=== athena 2.3.8 ===

2003-08-08  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update
	
	* configure.in:
	Require new eel, bump to 2.3.8

2003-08-04  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-desktop-directory.c
	(desktop_finalize): Free the details after its members.  Patch
	from Joe Marcus Clarke <marcus@freeBSD.org>

2003-08-04  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-file-operations.c:
	(handle_new_folder_vfs_error): Use the parent_view's 
	toplevel for the dialog rather than the view itself.

2003-07-25  Chris Altmann  <altmann@rcsis.com>

	* src/file-manager/fm-properties-window.c
	  (struct FMPropertiesWindowDetails),
	  (create_basic_page),
	  (select_image_button_callback):
	  Track opening and closing of icon_selector window, resuse existing
	  window if user clicks "Select Custom Icon" multiple times and
	  close it if the proerties window is closed. Fixes bug #118135

2003-07-20  Fredrik Jösson  <fjo@nada.kth.se>

	* src/file-manager/fm-directory-view.c: move g_slist_free further
	down to prevent crash.

2003-08-01  James Willcox  <jwillcox@gnome.org>

	* libathena-private/apps_athena_preferences.schemas.in:
	Fix a typo.  Bug #116843.

	* components/emblem/athena-emblem-view.c:  When adding emblems,
	give people a chance to rename invalid keywords instead of just
	bombing out.  Fixes #104169.

2003-07-30  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-canvas-item.c 
	(athena_icon_canvas_item_accessible_create): See role to ICON instead
	of LABEL. Correct setting of role. (Fixes #118251)

2003-07-27  Bastien Nocera  <hadess@hadess.net>

	* src/athena-shell-ui.xml: show the "Write to CD" label as priority
	in the athena toolbar when we're in burn:/// easier to find out
	for the users (Closes: #110427)

Tue Jul 22 16:34:10 2003  George Lebl <jirka@5z.com>

	* libathena-private/athena-global-preferences.c
	  (import_old_preferences_if_needed): Don't import
	  a preference if we can't write the new value

	* libathena-private/athena-sound.c (athena_sound_init)
	  (athena_sound_kill_sound) (athena_sound_register_sound)
	  (athena_sound_can_play_sound): If we can't write the current
	  sound state key, don't allow the sound preview since we won't be
	  able to kill the preview process later, and don't set the sound
	  state key if not writable.

	* src/athena-shell.c (save_window_states):  If we can't
	  save the start state, don't save it then.

	* src/athena-window.c (side_pane_size_allocate_callback)
	  (side_pane_switch_page_callback) (athena_window_hide_location_bar)
	  (athena_window_show_location_bar)
	  (athena_window_hide_toolbar) (athena_window_show_toolbar)
	  (athena_window_hide_sidebar) (athena_window_show_sidebar)
	  (athena_window_hide_status_bar) (athena_window_show_status_bar):
	  When we can't write the preference of the start state, don't set
	  it.

2003-07-21  Dave Camp  <dave@ximian.com>

	* configure.in:
	* NEWS: 
	Bumped to 2.3.7.

2003-07-20  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-link-desktop-file.c:
	(athena_link_desktop_file_local_create),
	(athena_link_desktop_file_local_create_from_gnome_entry):
	* libathena-private/athena-link-desktop-file.h:
	* libathena-private/athena-link.c:
	(athena_link_local_create),
	(athena_link_local_create_from_gnome_entry):
	* libathena-private/athena-link.h:
	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	Pass the screen number when creating athena links, fixes
	#117946
	
2003-07-19  Dennis Cranston <dennis_cranston at yahoo com>

	* icons/Makefile.am: Added window icon for the File Management
	capplet.
	
	* icons/athena-file-management-properties.png:  New file.

Thu Jul 17 15:32:55 2003  George Lebl <jirka@5z.com>

	* src/file-manager/fm-icon-view.c (play_file): when the playing
	  command can't be run, or the file can't be opened don't return
	  into the parent process from the child and do weird things,
	  but exit.  Also if the fork fails don't set the sound pid to
	  -1 (and later try to kill it).

2003-07-09  Johan Dahlin  <jdahlin@async.com.br>

	* src/file-manager/fm-properties-window.c: Add support for total
	size and total count for multi-file property dialogs. 

2003-07-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c: (is_needy):
	Skip assert for commonly run code.
	
	* libathena-private/athena-file-utilities.[ch]:
	(desktop_dir_changed_callback),
	(athena_is_desktop_directory_escaped):
	New function athena_is_desktop_directory_escaped to handle
	faster check if file is desktop dir.
	* libathena-private/athena-file.c:
	(athena_file_info_missing), (compare_by_display_name),
	(file_is_desktop), (athena_file_get_display_name_collation_key),
	(athena_file_get_display_name_nocopy),
	(athena_file_get_file_type):
	Some micro-optimizations. Faster file_is_desktop
	
	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_invalidate_bounds_cache),
	(athena_icon_canvas_item_invalidate_label_size),
	(athena_icon_canvas_item_set_image),
	(athena_icon_canvas_item_set_emblems),
	(athena_icon_canvas_item_set_attach_points),
	(athena_icon_canvas_item_set_embedded_text_rect),
	(athena_icon_canvas_item_bounds):
	Cache bounds calculation. Invalidate when needed.

2003-07-08  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c (create_normal_cache_icon):

	Don't leak pixbuf.

2003-07-07  Anders Carlsson  <andersca@codefactory.se>

	* src/file-manager/fm-directory-view.c:
	(set_script_environment_variables):
	Make scripts work better for files on NFS.
	
2003-07-07  Alexander Larsson  <alexl@redhat.co,>

        Patch from XD2.
	
	* libathena-private/athena-volume-monitor.c:
	(update_removable_volumes), (fstab_monitor_callback),
	(athena_volume_monitor_init),
	(athena_volume_monitor_class_init),
	(athena_volume_monitor_dispose), (floppy_sort):
	* libathena-private/athena-volume-monitor.h:
	Monitor fstab
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_init), (removable_volumes_changed_callback),
	(mount_or_unmount_removable_volume):
	Update disks menu when removable disks change.

2003-07-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-link-desktop-file.c (athena_link_desktop_file_get_link_icon_from_desktop):
	Return icon name instead of resolved absolute filename.
		
2003-07-07  Alexander Larsson  <alexl@redhat.com>

	* docs/Makefile.am (EXTRA_DIST): 
	* docs/athena-internals.sxw:
	* docs/athena-internals.pdf:
	Added source and prerendered version 

2003-07-05  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_update_scroll_region): Assume a
	(0, 0) scroll origin in automatic layout.  This fixes the worst
	of the gutter-on-the-right-side problems.

2003-07-05  Dave Camp  <dave@ximian.com>

	* libathena-private/apps_athena_preferences.schemas.in: 
	Turn on sort_directories_first by default, and show no 
	additional data in the icon view by default.

2003-07-05  Dave Camp  <dave@ximian.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	* src/athena-application.c: (migrate_old_athena_files):
	A bunch of string fixes from Christian Rose <menthos@menthos.com> 
	and Reinout van Schouwen <reinout@cs.vu.nl>.

2003-07-05  Dave Camp  <dave@ximian.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	Fixed some long descriptions.  Patch from 
	Luca Ferretti <elle.uca@libero.it>

2003-07-05  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-canvas-item.c 
	(draw_or_measure_label_text): Don't add LABEL_LINE_SPACING to the
	total height if there is no additional text.

2003-07-02 Jordi Mallach  <jordi@sindominio.net>

	* athena.desktop.in: Add Encoding and fixed Terminal entries.
	* data/*.desktop.in: Likewise.

2003-07-02  Bastien Nocera  <hadess@hadess.net>

	* src/athena-application.c: (athena_application_instance_init),
	(check_mount_window_disabled): removed creation of new window
	when mounting CD-Roms, it was useless and very annoying

2003-06-29  Dave Camp  <dave@ximian.com>

	* src/athena-view-frame.c:
	(athena_view_frame_get_first_visible_file),
	(athena_view_frame_scroll_to_file): Pass envs to the CORBA
	calls.

2003-06-29  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-canvas-item.c:
	(real_map_pixbuf), (map_pixbuf): Try colorizing selected pixbufs
	with the selection color.

2003-06-29  Dafydd Harries  <daf@parnassus.ath.cx>

	* configure.in: Added cy (Welsh) to ALL_LINGUAS.

2003-06-28  Dave Camp  <dave@ximian.com>

	* src/athena-zoom-control.c
	(athena_zoom_control_button_press_event): Zoom to fit when the
	label is clicked.

2003-06-28  Dave Camp  <dave@ximian.com>

	* components/tree/athena-tree-view.c (add_one_volume_root): Return 
	a value.

=== athena 2.3.6 ===

2003-06-27  Dave Camp  <dave@ximian.com>

	* NEWS:
	* configure.in:
	Bumped to 2.3.6

2003-06-27  Alexander Larsson  <alexl@redhat.com>

	* components/tree/athena-tree-view.c: (create_tree):
	* libathena-private/athena-directory-async.c:
	(should_skip_file), (dequeue_pending_idle_callback),
	(remove_callback), (file_list_cancel), (count_non_skipped_files),
	(read_dot_hidden_file), (start_monitoring_file_list),
	(deep_count_one), (mime_list_one):
	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-directory.c:
	(athena_directory_init), (athena_directory_finalize):
	* libathena-private/athena-file.c: (is_file_hidden),
	(athena_file_should_show):
	Implement .hidden files, synchronosly, for file:// only.
	
	* components/tree/athena-tree-view.c (create_tree):
	Change root name to "Filesystem"

2003-06-27  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-desktop-icon-view.c: (update_disks_menu):
	* src/file-manager/fm-directory-view.c: (update_scripts_menu),
	(paste_clipboard_data), (paste_clipboard_received_callback),
	(paste_into_clipboard_received_callback), (paste_files_callback),
	(paste_files_into_callback), (real_merge_menus),
	(clipboard_targets_received), (real_update_menus):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_merge_menus):
	* src/file-manager/athena-shell-ui.xml: 
	* src/file-manager/athena-directory-view-ui.xml:  
	Trimmed up the context menu, and changed the New items to be 
	Open (for things that create windows) and Create (for things that
	create files).

2003-06-27  Alexander Larsson  <alexl@redhat.com>

	* components/tree/athena-tree-model.c (athena_tree_model_get_flags):
	Mark model as ITERS_PERSIST.
	
2003-06-27  Alexander Larsson  <alexl@redhat.com>

        Patch by Soren Sandmann
	
	* configure.in:
	CFLAGS for gsequence
	
	* cut-n-paste-code/Makefile.am:
	* cut-n-paste-code/gsequence/.cvsignore:
	* cut-n-paste-code/gsequence/Makefile.am:
	* cut-n-paste-code/gsequence/gsequence.[ch]:
	New cut-n-paste lib for gsequence (by Soren Sandmann)
	
	* src/Makefile.am:
	Link to gsequence
	
	* src/file-manager/fm-list-model.c:
	Use gsequence plus a reverse mapping hashtable.

2003-06-27  Alexander Larsson  <alexl@redhat.com>

	This is based on a patch by Jürg Billeter <j@bitron.ch> which was
	partly based on a patch by Wolfgang Pichler <madmin@dialog-telekom.at>.

	* components/tree/athena-tree-model.[ch]:
	Support multiple roots. New row_loaded signal that gets fired when a
	directory has been fully loaded. New font-weight column.
	* components/tree/athena-tree-view.c:
	Remove tree expansion.
	Populate multiple roots: ~/,  / and mounted removable media.
	Tree follows view uri.
	* libathena-private/athena-desktop-link-monitor.c:
	(create_volume_link), (athena_desktop_link_monitor_init),
	(desktop_link_monitor_finalize):
	Kill black_list, its moved to athena-volume-manager.
	* libathena-private/athena-desktop-link.c:
	(athena_desktop_link_new_from_volume):
	Move get_icon_for_volume to athena-volume-manager
	* libathena-private/athena-tree-view-drag-dest.c:
	(file_for_path), (get_drop_target):
	Handle NULL for root_uri, meaning drops on the background
	are not allowed.
	* libathena-private/athena-volume-monitor.[ch]:
	(athena_volume_get_icon),
	(athena_volume_is_in_removable_blacklist):
	Add get_icon and the removable media blacklist.

2003-06-26  James Willcox  <jwillcox@gnome.org>

	* src/athena-property-browser.c: (emblem_dialog_clicked):

	Correct "~/.gnome-desktop" to "~/Desktop" in the docs for the
	/apps/athena/preferences/show_desktop key.  Fixes #114624.

	* libathena-private/apps_athena_preferences.schemas.in:

	Refresh the emblem list after adding the new custom emblem.
	Fixes #104238.

2003-06-26  Mohammad DAMT  <mdamt@bisnisweb.com>

	* po/id.po: Added Indonesian translation by Yohanes Nugroho <yohanes@opensource.or.id>
	* configure.in: Added "id" to ALL_LINGUAS

2003-06-25  David Bordoley  <borodley@msu.edu>

	* src/athena-shell.c: (open_window):
	Prefer an existing window for a location when opening 
	a location from the command line and the user's
	preference is open in new window mode.

=== athena 2.3.5 ===

2003-06-23  Dave Camp  <dave@ximian.com>

	* NEWS
	* configure.in:
	Bumped version to 2.3.5.

2003-06-22  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-file.c:
	(athena_file_get_volume_free_space): Handle NULL vfs uris (such
	as desktop links).

2003-06-22  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-desktop-link.c:
	(athena_desktop_link_rename): Set the trash gconf key instead of
	the home key when renaming the trash.

2003-06-21  Dave Camp  <dave@ximian.com>

	* src/athena-file-management-properties.c:
	(athena_file_management_properties_dialog_setup):
	* src/athena-file-management-properties.glade: Removed
	"Manual Layout" and "Sort in Reverse" from the properties 
	dialog, and moved "Text beside icons" to the Icon View 
	section.

2003-06-20  Bastien Nocera  <hadess@hadess.net>

	* configure.in: fix build

2003-06-17  Kenneth Rohde Christiansen  <kenneth@gnu.org>

	* configure.in: Added 'li' to ALL_LINGUAS.

2003-06-15  Mark McLoughlin  <mark@skynet.ie>

	* libathena-private/athena-directory-background.c:
	(image_loading_done_callback): create a 1x1 pixmap with
	the background colour and set _XROOTPMAP_ID when we have
	a solid colour background. Fixes panel translucency with
	solid colour backgrounds.

2003-06-16  Taneem Ahmed  <taneem@eyetap.org>

	* configure.in: Added "bn" to ALL_LINGUAS.

2003-06-15  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* configure.in:
        Remove -Wsign-promo and add -Wno-strict-aliasing to the list
        of options to test for. Fixes the gcc 3.3 aliasing warnings.

	* libathena-private/athena-file.c:
	(athena_file_compare_for_sort_internal):
	* libathena-private/athena-icon-factory.c:
	(athena_get_icon_size_for_zoom_level):
	gcc 3.3 doesn't like g_return_val_if_fail (FALSE, ...). 
	Use g_return_val_if_reached instead.

2003-06-12  Anders Carlsson  <andersca@codefactory.se>

	* configure.in: Remove nonexistant throbber directories.

2003-06-12  Alexander Larsson  <alexl@redhat.com>

	* components/tree/athena-tree-model.c: (set_theme),
	(athena_tree_model_set_theme):
	* components/tree/athena-tree-model.h:
	* components/tree/athena-tree-view.c: (theme_changed_callback),
	(athena_tree_view_instance_init):
	Correctly handle icon theme changes.
	Based on patch by muktha.narayan@wipro.com
	Fixes #99000

2003-06-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c (athena_icon_canvas_item_draw):
	Only draw exposed area.
	Patch from sandmann@daimi.au.dk

2003-06-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_fit_date_as_string):
	Don't call gettext on NULL string.
	Patch from hidetoshi.tajima@sun.com
	Fixes #113930
	
2003-06-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (fm_properties_window_present):
	Handle the case when the data is alreay ready.
	This fixes properties on the home icon on the desktop.

2003-06-11  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_did_not_drag) 
	(button_press_callback):
	Don't deselect multiple selected files when dragging
	with middle button.

2003-06-11  Alexander Larsson  <alexl@redhat.com>

	* icons/Makefile.am:
	* icons/crux_eggplant/Makefile.am:
	* icons/crux_eggplant/decrement-i.png:
	* icons/crux_eggplant/decrement.png:
	* icons/crux_eggplant/increment-i.png:
	* icons/crux_eggplant/increment.png:
	* icons/crux_eggplant/number_strip.png:
	* icons/crux_eggplant/theme_preview.png:
	* icons/crux_eggplant/throbber/001.png:
	* icons/crux_eggplant/throbber/002.png:
	* icons/crux_eggplant/throbber/003.png:
	* icons/crux_eggplant/throbber/004.png:
	* icons/crux_eggplant/throbber/005.png:
	* icons/crux_eggplant/throbber/006.png:
	* icons/crux_eggplant/throbber/007.png:
	* icons/crux_eggplant/throbber/008.png:
	* icons/crux_eggplant/throbber/009.png:
	* icons/crux_eggplant/throbber/010.png:
	* icons/crux_eggplant/throbber/011.png:
	* icons/crux_eggplant/throbber/012.png:
	* icons/crux_eggplant/throbber/013.png:
	* icons/crux_eggplant/throbber/014.png:
	* icons/crux_eggplant/throbber/015.png:
	* icons/crux_eggplant/throbber/016.png:
	* icons/crux_eggplant/throbber/017.png:
	* icons/crux_eggplant/throbber/018.png:
	* icons/crux_eggplant/throbber/019.png:
	* icons/crux_eggplant/throbber/020.png:
	* icons/crux_eggplant/throbber/021.png:
	* icons/crux_eggplant/throbber/022.png:
	* icons/crux_eggplant/throbber/023.png:
	* icons/crux_eggplant/throbber/024.png:
	* icons/crux_eggplant/throbber/025.png:
	* icons/crux_eggplant/throbber/026.png:
	* icons/crux_eggplant/throbber/027.png:
	* icons/crux_eggplant/throbber/028.png:
	* icons/crux_eggplant/throbber/029.png:
	* icons/crux_eggplant/throbber/030.png:
	* icons/crux_eggplant/throbber/Makefile.am:
	* icons/crux_eggplant/throbber/rest.png:
	* icons/crux_eggplant/zoom_body.png:
	* icons/crux_teal/Makefile.am:
	* icons/crux_teal/decrement-i.png:
	* icons/crux_teal/decrement.png:
	* icons/crux_teal/increment-i.png:
	* icons/crux_teal/increment.png:
	* icons/crux_teal/number_strip.png:
	* icons/crux_teal/theme_preview.png:
	* icons/crux_teal/throbber/001.png:
	* icons/crux_teal/throbber/002.png:
	* icons/crux_teal/throbber/003.png:
	* icons/crux_teal/throbber/004.png:
	* icons/crux_teal/throbber/005.png:
	* icons/crux_teal/throbber/006.png:
	* icons/crux_teal/throbber/007.png:
	* icons/crux_teal/throbber/008.png:
	* icons/crux_teal/throbber/009.png:
	* icons/crux_teal/throbber/010.png:
	* icons/crux_teal/throbber/011.png:
	* icons/crux_teal/throbber/012.png:
	* icons/crux_teal/throbber/013.png:
	* icons/crux_teal/throbber/014.png:
	* icons/crux_teal/throbber/015.png:
	* icons/crux_teal/throbber/016.png:
	* icons/crux_teal/throbber/017.png:
	* icons/crux_teal/throbber/018.png:
	* icons/crux_teal/throbber/019.png:
	* icons/crux_teal/throbber/020.png:
	* icons/crux_teal/throbber/021.png:
	* icons/crux_teal/throbber/022.png:
	* icons/crux_teal/throbber/023.png:
	* icons/crux_teal/throbber/024.png:
	* icons/crux_teal/throbber/025.png:
	* icons/crux_teal/throbber/026.png:
	* icons/crux_teal/throbber/027.png:
	* icons/crux_teal/throbber/028.png:
	* icons/crux_teal/throbber/029.png:
	* icons/crux_teal/throbber/030.png:
	* icons/crux_teal/throbber/Makefile.am:
	* icons/crux_teal/throbber/rest.png:
	* icons/crux_teal/zoom_body.png:
	* icons/decrement.png:
	* icons/default/Makefile.am:
	* icons/default/decrement.png:
	* icons/default/increment.png:
	* icons/default/number_strip.png:
	* icons/default/theme_preview.png:
	* icons/default/zoom_body.png:
	* icons/gnome/Makefile.am:
	* icons/gnome/theme_preview.png:
	* icons/gnome/throbber/001.png:
	* icons/gnome/throbber/002.png:
	* icons/gnome/throbber/003.png:
	* icons/gnome/throbber/004.png:
	* icons/gnome/throbber/005.png:
	* icons/gnome/throbber/006.png:
	* icons/gnome/throbber/Makefile.am:
	* icons/gnome/throbber/rest.png:
	* icons/increment.png:
	* icons/number_strip.png:
	* icons/sierra/Makefile.am:
	* icons/sierra/number_strip.png:
	* icons/sierra/theme_preview.png:
	* icons/tahoe/Makefile.am:
	* icons/tahoe/number_strip.png:
	* icons/tahoe/theme_preview.png:
	* icons/throbber/001.png:
	* icons/throbber/002.png:
	* icons/throbber/003.png:
	* icons/throbber/004.png:
	* icons/throbber/005.png:
	* icons/throbber/006.png:
	* icons/throbber/007.png:
	* icons/throbber/008.png:
	* icons/throbber/009.png:
	* icons/throbber/010.png:
	* icons/throbber/011.png:
	* icons/throbber/012.png:
	* icons/throbber/013.png:
	* icons/throbber/014.png:
	* icons/throbber/015.png:
	* icons/throbber/016.png:
	* icons/throbber/017.png:
	* icons/throbber/018.png:
	* icons/throbber/019.png:
	* icons/throbber/020.png:
	* icons/throbber/021.png:
	* icons/throbber/022.png:
	* icons/throbber/023.png:
	* icons/throbber/024.png:
	* icons/throbber/025.png:
	* icons/throbber/026.png:
	* icons/throbber/027.png:
	* icons/throbber/028.png:
	* icons/throbber/029.png:
	* icons/throbber/030.png:
	* icons/throbber/Makefile.am:
	* icons/throbber/rest.png:
	* icons/zoom_body.png:
	Remove lots of old theme stuff

2003-06-11  Alexander Larsson  <alexl@redhat.com>

	* acconfig.h:
	* configure.in:
	Look for libstartup-notification.
	
	* libathena-private/athena-program-choosing.c:
	Use libstartup-notification. Requires latest
	gnome-vfs.

=== athena 2.3.4 ===

2003-06-10  Dave Camp  <dave@ximian.com>

	* configure.in: 
	* NEWS: 
	Updated to 2.3.4.

2003-06-10  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-background.c:
	Don't update the desktop background image four times
	for each change in the desktop directory.

2003-06-09  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-canvas-item.c:
	(compute_text_rectangle),
	(athena_icon_canvas_item_update_bounds),
	(draw_or_measure_label_text), (measure_label_text),
	(draw_label_text), (athena_icon_canvas_item_draw),
	(create_label_layout), (athena_icon_canvas_item_bounds),
	(athena_icon_canvas_item_get_text_rectangle),
	(athena_icon_canvas_item_get_max_text_width):
	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-icon-container.c: (get_grid_width),
	(lay_down_icons_horizontal),
	(athena_icon_container_set_label_position):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-private.h:  Add a mode for
	text-beside-icons.

	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.h: 
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_class_init), (real_supports_keep_aligned),
	(real_supports_labels_beside_icons):
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_supports_labels_beside_icons),
	(real_supports_labels_beside_icons), (set_labels_beside_icons),
	(fm_icon_view_begin_loading),
	(labels_beside_icons_changed_callback), (fm_icon_view_class_init),
	(fm_icon_view_instance_init):
	* src/file-manager/fm-icon-view.h: Add a "text beside icons" 
	preference.

	* src/athena-file-management-properties.c:
	(athena_file_management_properties_dialog_setup):
	* src/athena-file-management-properties.glade: Add the pref
	to the dialog.
	
2003-06-08  Dave Camp  <dave@ximian.com>

	* components/adapter/main.c: (main): Call
	gnome_authentication_manager_init ().

2003-06-08  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-directory-view.c:
	(add_bonobo_menu_ui_and_verbs): Allow the context menu to supply
	an icon.

2003-06-08  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-properties-window.c:
	(create_basic_page): 
	(get_pixbuf_for_properties_window),
	(update_properties_window_icon), (create_image_widget): If
	all files have the same icon, show that icon.
	(properties_window_update): Update the icon.
	(remove_from_dialog): Fixed a problem removing from the 
	target file list.

2003-06-08  Dave Camp  <dave@ximian.com>

	* src/athena-zoom-control.c: (athena_zoom_control_finalize),
	(athena_zoom_control_button_press_event), (zoom_out_clicked),
	(zoom_in_clicked), (set_label_size), (label_style_set_callback),
	(athena_zoom_control_instance_init), (athena_zoom_control_new),
	(athena_zoom_control_redraw), (create_zoom_menu),
	(athena_zoom_control_set_zoom_level),
	(athena_zoom_control_set_parameters),
	(athena_zoom_control_class_init),
	(athena_zoom_control_accessible_get_type):
	* src/athena-zoom-control.h: New zoom control using stock 
	widgets.  Patch from Iain Holmes <iain@prettypeople.org>. 

2003-06-08  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-properties-window.h:
	* libathena-private/athena-mime-actions.c:
	(has_server_info_in_list), (server_info_list_intersection),
	(athena_mime_get_property_components_for_files):
	* libathena-private/athena-mime-actions.h:
	* src/file-manager/fm-directory-view.c:
	(open_properties_window_callback), (open_one_in_new_window):
	* src/file-manager/fm-properties-window.c: (is_multi_file_window),
	(get_original_file), (get_target_file_for_original_file),
	(get_target_file), (add_prompt_and_separator),
	(get_pixbuf_for_properties_window), (reset_icon),
	(create_image_widget_for_file), (update_name_field),
	(name_field_restore_original_name), (name_field_done_editing),
	(file_has_keyword), (get_initial_emblem_state),
	(emblem_button_toggled), (emblem_button_update),
	(update_properties_window_title), (remove_from_dialog),
	(mime_list_equal), (get_mime_list), (properties_window_update),
	(file_list_attributes_identical), (file_list_get_string_attribute),
	(file_list_all_local), (file_list_all_directories),
	(value_field_update_internal), (value_field_update),
	(attach_value_field_internal), (attach_value_field),
	(attach_ellipsizing_value_field), (append_separator),
	(directory_contents_value_field_update),
	(attach_directory_contents_value_field), (append_title_value_pair),
	(append_title_and_ellipsizing_value),
	(update_visibility_of_item_count_fields),
	(should_show_custom_icon_buttons), (should_show_file_type),
	(should_show_accessed_date), (should_show_mime_type),
	(should_show_link_target), (should_show_free_space),
	(create_basic_page), (get_initial_emblems), (create_emblems_page),
	(permission_change_callback), (get_initial_permission_state),
	(permission_button_toggled), (permission_button_update),
	(set_up_permissions_checkbox), (add_permissions_checkbox),
	(append_special_execution_checkbox),
	(append_special_execution_flags), (all_can_get_permissions),
	(all_can_set_permissions), (get_initial_permissions),
	(create_permissions_page), (get_uri_list),
	(bonobo_page_activate_callback), (can_handle_multiple_files),
	(append_bonobo_pages), (should_show_emblems),
	(should_show_permissions), (get_pending_key), (startup_data_new),
	(startup_data_free), (create_properties_window),
	(get_target_file_list), (add_window), (remove_window),
	(get_existing_window), (cancel_create_properties_window_callback),
	(directory_view_destroyed_callback),
	(cancel_call_when_ready_callback), (remove_pending),
	(is_directory_ready_callback), (fm_properties_window_present),
	(real_destroy), (real_finalize), (set_icon_callback),
	(select_image_button_callback), (remove_image_button_callback):
	Implement multi-file property dialogs.
	
	* components/image_properties/Athena_View_image_properties.server
	.in.in:
	* components/image_properties/athena-image-properties-view.c:
	(athena_image_properties_view_finalize), (get_property),
	(set_property), (athena_image_properties_view_init):
	* components/notes/Athena_View_notes.server.in.in:
	* components/notes/athena-notes.c: (set_bonobo_properties),
	(make_notes_view): Use new multipage property.

2003-06-08  Greg Merchan  <merchan@phys.lsu.edu>
	* libathena-private/athena-program-chooser.c,
	  src/file-manager/fm-desktop-icon-view.c,
	  src/athena-bookmarks-window.c,
	  src/athena-property-browser.c,
	  src/athena-window-menus.c,
	  src/athena-window.c,
	  src/athena-file-management-properties.c,
	  src/athena-server-connect.c
	Change GTK_BUTTONS_CLOSE to GTK_BUTTONS_OK for HIG compliance
	Fixes bug 112207
	
2003-06-06  SamÃºel JÃ³n Gunnarsson  <sammi@techattack.nu>

	* configure.in: Added "is" into ALL_LINGUAS

2003-06-04  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Removed ta (tamil) from ALL_LINGUAS.

2003-06-04  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Update to 2.3.3, update requirements.

2003-05-30  Marco Pesenti Gritti  <marco@it.gnome.org>

	* components/throbber/athena-throbber.c:
	(get_throbber_dimensions), (athena_throbber_instance_init),
	(athena_throbber_theme_changed), (select_throbber_image),
	(scale_to_real_size), (extract_frame),
	(athena_throbber_load_images), (athena_throbber_finalize):

	Use gnome-spinner icons from gnome-icon-theme. Extract
	the images from a grid instead of using an icon for
	each frame.
	It's necessary to install a recent gnome icon theme cvs
	to have throbber working.	

2003-05-30  Stephen Browne <stephen.browne@sun.com>

	* src/Athena_shell.server.in: added x-directory/smb-share to
	both icon and list view supported mime-types

2003-05-27  Pasupathi Duraisamy <pasupathi.duraisamy@wipro.com>

	* src/file-manager/fm-list-view.c: Fixes spacebar keynav
	issue. Bugzilla bug #102259

2003-05-26  Anders Carlsson  <andersca@codefactory.se>

	* libathena-private/Makefile.am:
	* libathena-private/athena-authn-manager.c:
	* libathena-private/athena-authn-manager.h:
	* src/athena-application.c: (finish_startup):
	Use the authentication manager from libgnomeui instead.
	
2003-05-26  Pasupathi Duraisamy <pasupathi.duraisamy@wipro.com>

	* libathena/Makefile.am: link only dependent libraries.

	Patch reviewed by:  Alexander Larsson  <alexl@redhat.com>

2003-05-26  Alexander Larsson  <alexl@redhat.com>

	Patch by Christian Neumair <chris@gnome-de.org>

	* src/athena-bookmarks-window.glade:
	* src/athena-file-management-properties.glade:
	* src/athena-server-connect.glade:
	Some HIG changes wrt spacing
	
	* src/file-manager/fm-properties-window.c:
	* src/athena-property-browser.c:
	Small string changes.

2003-05-26  Alexander Larsson  <alexl@redhat.com>

	* src/athena-bookmarks-window.c (repopulate):
	row_activated_signal_id is on the bookmar_list_widget object and
	nothing else.

2003-05-23  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-desktop-icon-file.c:
	Don't ref directory twice. Rename finalizer.
	
	* libathena-private/athena-desktop-link-monitor.c:
	unref monitor on shutdown
	Unref correct object in finalize

	* libathena-private/athena-desktop-link.c:
	unref icon file in finalizer.
	
2003-05-23  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-desktop-link-monitor.c (create_volume_link):
	Fix the volume uniquification code.

2003-05-23  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c (fm_icon_view_screen_changed):
	Update the per-screen filtering when the view changes screens.
	This was needed to fix multihead desktops, since the BonoboPlug
	initially realizes on the wrong screen, and gets moved to the right
	screen when the window is mapped.

2003-05-20  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-model.c: (each_path_get_data_binder):
	* src/file-manager/fm-list-view.c: (get_drag_pixbuf),
	(motion_notify_callback): Don't use the pointer offset when
	setting the drag icon.

2003-05-20  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c (get_desktop_manager_selection,
	athena_application_create_desktop_windows):
	Get the _NET_DESKTOP_MANAGER selection before creating desktop
	window.

2003-05-19  Christophe Merlet  <redfox@redfoxcenter.org>

	* THANKS: Updated my email.

=== athena 2.3.2 ===

2003-05-19  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump to 2.3.2.
	
2003-05-19  Alexander Larsson  <alexl@redhat.com>
	
	* src/file-manager/fm-icon-view.c (play_file):
	mp3 mimetype is now audio/mpeg.

2003-05-18  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-file.c
	(athena_file_get_internal): Use eel_uris_match() instead of
	strcmp().

2003-05-16  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c (popup_menu_callback): Return
	TRUE.

2003-05-16  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-emblem-utils.c:
	(is_reserved_keyword), (athena_emblem_should_show_in_list):  Add
	the desktop emblem.
	* libathena-private/athena-file-utilities.c:
	(athena_get_desktop_directory_uri_no_create): 
	(get_desktop_path): New functions.
	(athena_get_desktop_directory),
	(athena_get_desktop_directory_uri): Use get_desktop_path()
	* libathena-private/athena-file-utilities.h:
	* libathena-private/athena-file.h:
	* libathena-private/athena-file.c: (file_is_desktop),
	(get_automatic_emblems_as_integer),
	(prepend_automatic_emblem_names): Add a desktop emblem to the
	desktop directory.

2003-05-16  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c (migrate_old_athena_files):
	Migration of old .gnome-desktop.

2003-05-16  Padraig O'Briain  <padraig.obriain@sun.com>

	* src/file-manager/fm-list-view.c:
	Use the signal "popup_menu" to handle Shift+F10 instead of doing 
	it in "key_press_event" signal handler. This fixes bug #103348.
	
2003-05-16  Padraig O'Briain  <padraig.obriain@sun.com>

        * libathena-private/athena-program-chooser.c:
        (athena_program_chooser_instance_init): Add calls to
        gtk_label_set_mnemonic_widget so that ATK relation label-for and
        labelled-by will exist when accessibiity is enabled.
        This fixes bug #79059.

2003-05-16  Anders Carlsson  <andersca@codefactory.se>

	* src/athena-zoom-control.c: (draw_number), (draw_pixbuf):
	Replace deprecated calls to gdk_pixbuf_render_to_drawable_alpha
	with calls to gdk_draw_pixbuf.
	
2003-05-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	Added new files.
	
	* libathena-private/apps_athena_preferences.schemas.in:
	* libathena-private/athena-global-preferences.[ch]:
	New prefs for home and trash links.
	
	* libathena-private/athena-desktop-directory.[ch]:
	New files. Implements the AthenaDesktop object for the
	virtual x-athena-desktop: uri. The directory merges the contents
	of the directory with the real desktop directory.
	
	* libathena-private/athena-desktop-directory-file.[ch]:
	New files. Implements the Athenafile corresponding to
	AthenaDestkopDirectory.
	
	* libathena-private/athena-desktop-icon-file.[ch]:
	New files.
	Implement AthenaFile for a virtual file in a AthenaDesktopDirectory.
	Gets all the actual file data from a AthenaDesktopLink.

	* libathena-private/athena-desktop-link-monitor.[ch]:
	New files.
	Keep track of home and trash visibility prefs and mounted volumes and
	create/destroy corresponding AthenaDesktopLink object.
	
	* libathena-private/athena-desktop-link.[ch]:
	New files.
	Keeps track of all the real information in a desktop icon link.
	These are home, trash and volume links at the moment.
	
	* libathena-private/athena-directory-async.c:
	Indentation correction.
	
	* libathena-private/athena-directory.c:
	(athena_directory_new):
	Create AthenaDesktopDirectory objects for x-athena-desktop: uris
	
	* libathena-private/athena-dnd.c: (athena_drag_items_local):
	Handle NULL GnomeVFSURIs.
	(athena_drag_items_on_desktop): New function to check if items
	are on the desktop.
	(athena_drag_default_drop_action_for_icons):
	Special case desktop uris.
	(athena_drag_selection_includes_special_link):
	Convert from old-style special links to current.
	
	* libathena-private/athena-dnd.h:
	New function athena_drag_items_on_desktop.
	
	* libathena-private/athena-file-operations.c:
	(is_special_link), (athena_file_operations_copy_move):
	Convert from old-style special links to current.
	(athena_file_operations_delete):
	Special case desktop links
	
	* libathena-private/athena-file-utilities.[ch]:
	(athena_get_desktop_directory):
	(athena_get_gmc_desktop_directory):
	Change desktop dir to ~/Desktop
	(athena_get_desktop_directory_uri):
	New function to return desktop dir as a uri.

	
	* libathena-private/athena-file.c:
	(athena_file_new_from_relative_uri),
	(athena_file_get_internal):
	Handle creation of desktop icon files.
	(athena_file_can_rename), (rename_guts),
	(athena_file_get_drop_target_uri):
	Update for new special links.
	(athena_file_is_in_desktop):
	Update for new desktop dir.
	(athena_file_get_uri):
	Fix uris for self owned files. This changed due to
	the new canonicalization rules for foo:
	
	
	* libathena-private/athena-icon-dnd.c:
	(athena_icon_container_selection_items_local),
	(handle_nonlocal_move):
	Handle desktop uri.
	
	* src/Athena_shell.server.in:
	icon view handles x-athena-desktop: uris
	
	* src/athena-application.c: (finish_startup):
	Initialize the desktop link monitor
	
	* src/athena-desktop-window.c:
	(athena_desktop_window_update_directory):
	Show x-athena-desktop: 
	
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_finalize), (fm_desktop_icon_view_init),
	(volume_ops_callback), (trash_link_is_selection),
	(volume_link_is_selection), (volume_link_device_type),
	(real_supports_zooming):
	
	* src/file-manager/fm-directory-view.c:
	Remove lots of old support for desktop icon.
	Reimplement some of it with the new desktop icon support.
	
	* src/file-manager/fm-directory-view.h:
	New function fm_directory_view_get_backing_uri
	
	* src/file-manager/fm-icon-container.c:
	(fm_icon_container_get_icon_text):
	Don't show extra text for desktop icons
	(get_sort_category): Update for new desktop icons
	
	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	Use get_backing_uri()
	
	* src/file-manager/fm-properties-window.c: (get_target_file):
	Use the new desktop icon support.
	
	* libathena-private/athena-icon-container.c:
	(lay_down_icons_tblr):
	Don't loop forever if icon doesn't in the height of the container.

2003-05-14 Gaute Lindkvist <lindkvis@stud.ntnu.no>

	* libathena-private/athena-icon-canvas-item.c
	Fixes bug #112830 by adding pixels for the area to be redrawed
	
2003-05-06  Alexander Larsson  <alexl@redhat.com>

	Patch from danny_milo@yahoo.com.
	
	* src/athena-zoom-control.c (athena_zoom_control_scroll_event,
	athena_zoom_control_class_init):
	Handle scroll wheel events.

2003-05-06  Danilo Å egan  <dsegan@gmx.net>

	* configure.in: Added "sr" and "sr@Latn" to ALL_LINGUAS.

2003-05-05  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas.in:
	Disable directory_limit.

=== athena 2.3.1 ===

2003-05-05  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	Update
	
	* configure.in:
	Bump version
	Bump requirements for eel, gnome-vfs, bonoboui

2003-05-05  Alexander Larsson  <alexl@redhat.com>

	* src/athena-shell-ui.xml:
	Make Go to CD burner a command
	
	* src/athena-window-menus.c (athena_window_initialize_menus_part_1):
	Hide Go to CD burner if burn: not availible.

	* docs/style-guide.html:
	Clarify the change. We still have to declare variables at the
	beginning of a block.

2003-05-05  Alexander Larsson  <alexl@redhat.com>

	* HACKING:
	Add some text about patch submission.

2003-05-03  Dave Camp  <dave@ximian.com>

	* components/hardware/athena-hardware-view.c:
	(athena_hardware_view_drag_data_received): Updated to (sort of) 
	new EelBackground api.
	
2003-05-03  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c: (icon_set_size),
	(icon_toggle_selected), (snap_position),
	(compare_icons_by_position), (placement_grid_new),
	(placement_grid_free), (placement_grid_position_is_free),
	(placement_grid_mark), (canvas_position_to_grid_position),
	(placement_grid_mark_icon), (find_empty_location), (align_icons),
	(lay_down_icons_tblr), (athena_icon_container_move_icon),
	(destroy), (update_stretch_at_idle), (undo_stretching),
	(athena_icon_container_unstretch),
	(athena_icon_container_is_keep_aligned), (align_icons_callback),
	(unschedule_align_icons), (schedule_align_icons),
	(athena_icon_container_set_keep_aligned):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-dnd.c: (handle_local_move):
	* libathena-private/athena-icon-private.h:
	* libathena-private/athena-metadata.h:
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_class_init), (real_supports_auto_layout),
	(real_supports_keep_aligned):
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_supports_keep_aligned), (update_layout_menus),
	(get_default_directory_keep_aligned),
	(fm_icon_view_get_directory_keep_aligned),
	(fm_icon_view_set_directory_keep_aligned),
	(real_supports_keep_aligned), (fm_icon_view_begin_loading),
	(keep_aligned_state_changed_callback), (fm_icon_view_merge_menus),
	(fm_icon_view_reset_to_defaults), (fm_icon_view_class_init):
	* src/file-manager/fm-icon-view.h:
	* src/file-manager/athena-icon-view-ui.xml:
	Implemented a "Keep Aligned" mode on the desktop, that snaps icons
	to a grid.

2003-05-03  Masahiro Sakai  <sakai@tom.sfc.keio.ac.jp>

	* configure.in: Call AC_LIBTOOL_WIN32_DLL which is necessary for
	building shared library on win32 platform. Check fstab.h. 

	* components/emblem/Makefile.am (libathena_emblem_view_la_LDFLAGS):
	* components/history/Makefile.am (libathena_history_view_la_LDFLAGS):
	* components/image_properties/Makefile.am (libathena_image_properties_view_la_LDFLAGS):
	* components/notes/Makefile.am (libathena_notes_view_la_LDFLAGS):
	* components/tree/Makefile.am (libathena_tree_view_la_LDFLAGS):
	* libathena/Makefile.am (libathena_la_LDFLAGS):
	* libathena-adapter/Makefile.am (libathena_adapter_la_LDFLAGS):
	* libathena-private/Makefile.am (libathena_private_la_LDFLAGS):
	Add -no-undefined which is necessary for building shared library
	on some platforms (e.g. Win32, BeOS, etc).

	* libathena-adapter/Makefile.am (libathena_adapter_la_LIBADD):
	Fix library order. libathena.la should be ahead of other libraries
	that libathena.la depends on.

	* libathena-private/athena-volume-monitor.c:
	Include fstab.h conditionaly.
	Define MOUNT_TABLE_PATH as MOUNTED on cygwin.
	(get_removable_volumes, volume_is_removable, get_mount_list) Use
	endmntent() to close a file opened by setmntent(). Because using
	fclose() causes a crash on cygwin.

2003-04-30  Alexander Larsson  <alexl@redhat.com>

	* docs/style-guide.html:
	Remove the all-declarations-on-top rule.

2003-04-28  Alexander Larsson  <alexl@redhat.com>

	Based on a patch by Frank Worsley <fworsley@shaw.ca>

	* libathena-private/athena-program-chooser.[ch]:
	(athena_program_chooser_show_no_choices_message),
	(athena_program_chooser_show_invalid_message):
	Added the term 'action' to the dialogs when there is
	no default application or component.
	
	* libathena-private/athena-program-choosing.[ch]:
	(application_cannot_open_location), (athena_launch_show_file),
	(athena_launch_action), (athena_launch_application):
	Updated to use the new gnome-vfs functions and error codes.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_launch_application), (activate_callback),
	(activate_activation_uri_ready_callback),
	(cancel_activate_callback), (fm_directory_view_activate_file):
	Cleaned up to properly support the new gnome-vfs functionality
	and an external component viewer. Also fixed to get activation uri
	for a file and then retrieve properties for the activation uri
	not the file that was clicked (fixes #42391).

2003-04-25  Michael Meeks  <michael@ximian.com>

	* src/athena-view-frame.c (athena_view_frame_get_first_visible_file),
	(athena_view_frame_scroll_to_file): add some pre-conditions.

2003-04-23  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	Modify emblems on the original_file, not the target_file.

2003-04-23  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (key_press_callback): 
	* libathena-private/athena-icon-container.c (key_press_event): 
	* docs/key_mouse_navigation.txt (Keyboard):
	Bring up context menu is Ctrl-F10, not Shift-F9

2003-04-23  Glynn Foster  <glynn.foster@sun.com>

	* src/athena-bookmarks-window.c:
	(athena_bookmarks_window_response_callback),
	(create_bookmarks_window), (go_to_selected_bookmark),
	(on_jump_button_clicked), (on_row_activated),
	(on_selection_changed), (repopulate):
	* src/athena-bookmarks-window.glade: Add navigation to the bookmarks
	editor and changed UI to be more inline with the Epiphany bookmarks
	dialog. Fixes bug #47180.

2003-04-23  Alexander Larsson  <alexl@redhat.com>
	
	* src/file-manager/fm-desktop-icon-view.c (volume_ops_callback):
	Check for file: instead of is_local when verifying a volume desktop file
	is ok. Fixes bug #98306.

2003-04-23  Alexander Larsson  <alexl@redhat.com>

	Patch from Michael Meeks in bug #87414.
	
	* src/athena-window.c (athena_window_finalize):
	NULL various pointers to help debugging.
	(athena_window_ui_thaw, athena_window_ui_freeze): 
	hold a reference on the window over the various
	re-enterancy points guarded by the freeze / thaw.

2003-04-23  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	* libathena-private/apps_athena_preferences.schemas:
	* libathena-private/apps_athena_preferences.schemas.in:
	Mark schema for translation.

2003-04-23  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-menus.c (view_menu_zoom_normal_callback):
	Do a zoom to 100%, not a best-fit.
	Fixes bug #109413, patch by Jens Finke.
	
2003-04-23  Alexander Larsson  <alexl@redhat.com>

        AIX port from Laurent.Vivier@bull.net (Laurent Vivier)
	
	* configure.in:
	Look for popt and some aix headers
	
	* components/hardware/Athena_View_hardware.server.in.in:
	Fix up LIBEXECDIR reference
	
	* components/history/athena-history-view.c:
	* components/notes/athena-notes.c:
	* components/throbber/athena-throbber.c:
	* libathena-private/athena-icon-canvas-item.c:
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-dnd.c:
	* libathena-private/athena-program-chooser.c:
	* libathena-private/athena-volume-monitor.h:
	* src/athena-applicable-views.h:
	* src/athena-property-browser.c:
	* src/athena-sidebar-title.c:
	* src/file-manager/fm-directory-view.c:
	* test/test-athena-preferences-change.c: (main):
	* test/test.c: (test_quit):
	Fix c++ comments and commas at end of enums.
	Move math.h includes to top.
	
	* data/Makefile.am:
	Remove duplicate definitions
	
	* libathena-adapter/Makefile.am:
	* libathena-private/Makefile.am:
	* libathena/Makefile.am:
	Add correct libs
	
	* libathena-private/athena-file-private.h:
	Bitfields can't be enums.
	
	* libathena-private/athena-volume-monitor.c:
	Implement AIX support.
	
	* src/Makefile.am:
	Add POPT_FLAGS

2003-04-16  Alexander Larsson  <alexl@redhat.com>

	* src/athena-information-panel.c: (burn_cd_callback),
	(athena_information_panel_update_buttons):
	* src/athena-shell-ui.xml:
	* src/athena-window-manage-views.c: (update_burn_cd_items),
	(update_for_new_location):
	* src/athena-window-menus.c: (file_menu_burn_cd_callback),
	(go_menu_go_to_burn_cd_callback),
	(athena_window_initialize_menus_part_1):
	* src/athena-window-private.h:
	* src/athena-window.c: (athena_window_constructed),
	(athena_window_allow_reload), (athena_window_allow_burn_cd):
	* src/athena-window.h:
	Add the athena-cd-burner integration patch from RH.

2003-04-16  Alexander Larsson  <alexl@redhat.com>

	* cut-n-paste-code/libegg/Makefile.am:
	* cut-n-paste-code/libegg/egg-recent-vfs-util.c:
	* cut-n-paste-code/libegg/egg-recent-vfs-util.h:
	Remove old files
	
	* cut-n-paste-code/libegg/egg-recent-item.c:
	(egg_recent_item_set_uri), (egg_recent_item_get_uri_for_display):
	* cut-n-paste-code/libegg/egg-recent-model.c:
	(egg_recent_model_update_item), (egg_recent_model_filter),
	(egg_recent_model_read), (egg_recent_model_add_full),
	(egg_recent_model_get_list), (egg_recent_model_changed):
	* cut-n-paste-code/libegg/egg-screen-exec.c:
	(egg_screen_exec_environment),
	(egg_screen_execute_command_line_async):

	Update libegg stuff.
	Among other stuff this makes athena scripts execute in the
	right directory.

2003-04-16  Alexander Larsson  <alexl@redhat.com>

	* components/emblem/Athena_View_emblem.server.in.in:
	* components/history/Athena_View_history.server.in.in:
	* components/image_properties/Athena_View_image_properties.server.in.in:
	* components/notes/Athena_View_notes.server.in.in:
	* components/tree/Athena_View_tree.server.in.in:
	Don't add .so to the server files. This makes it work on systems that
	don't use .so as the library name.
	
	* src/athena-main.c: (main):
	* src/athena-server-connect.c: (browse):
	Don't initialize array to a non-constant value.
	   
2003-04-07  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (unschedule_timeout_display_of_pending_files) 
	(unschedule_idle_display_of_pending_files):
	Remove no longer correct asserts.

2003-04-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.[ch]:
	Create canvas items hidden.
	New function athena_icon_container_layout_now().
	
	* src/file-manager/fm-directory-view.[ch]:
	Added virtual function flush_added_files.
	Tuned directory loading to avoid lots of relayouts on load.
	
	* src/file-manager/fm-icon-view.c:
	Implement flush_added_files using athena_icon_container_layout_now()

2003-04-02  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c (motion_notify_callback): Only 
	handle motion_notify_event for the bin window.

2003-04-02  Alexander Larsson  <alexl@redhat.com>

	* components/notes/athena-notes.c:
	* components/tree/athena-tree-model.c:
	* components/tree/athena-tree-view.c:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory-background.c:
	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-directory.c:
	* libathena-private/athena-directory.h:
	* libathena-private/athena-file-attributes.h:
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c: (rename_callback),
	* libathena-private/athena-file.h:
	* libathena-private/athena-icon-factory.c:
	* libathena-private/athena-icon-factory.h:
	* libathena-private/athena-link.c:
	* libathena-private/athena-merged-directory.c:
	* libathena-private/athena-mime-actions.c:
	* libathena-private/athena-mime-actions.h:
	* libathena-private/athena-program-choosing.c:
	* libathena-private/athena-trash-file.c:
	* libathena-private/athena-trash-monitor.c:
	* libathena-private/athena-vfs-directory.c:
	* libathena-private/athena-vfs-file.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-container.c:
	* src/file-manager/fm-properties-window.c:
	* src/athena-applicable-views.c:
	* src/athena-information-panel.c:
	* src/athena-sidebar-title.c:
	* src/athena-window-manage-views.c:
	* src/athena-window.c:
	* test/test-athena-mime-actions-set.c:
	* test/test-athena-mime-actions.c:

	Convert file attributes from list of strings to a bitmask.
	Patch from andersca@codefactory.se.

=== athena 2.2.3 ===

2003-03-31  Alexander Larsson  <alexl@redhat.com>

	* configure.in: 
	Bump to 2.2.3
	
	* NEWS:
	Update.

2003-03-28  Alexander Larsson  <alexl@redhat.com>

	* docs/key_mouse_navigation.txt:
	More updates

	* NEWS:
	Add 2.2.3 entries

2003-03-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	Fix up the single click mode double-click protection
	Don't use eel_prefs to get the single-click-mode, we already
	have it in details.

2003-03-28  Alexander Larsson  <alexl@redhat.com>
	
	* src/file-manager/fm-list-view.c (fm_list_view_click_policy_changed):
	Use the FMDirectoryView click_policy_changed instead of our own.
	
2003-03-28  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c (fm_icon_view_class_init):
	Sort directory_view_class initializers

	* src/file-manager/fm-list-view.c:
	Implement reveal_selection() for FMDirectoryView

2003-03-27  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-dnd.c:
	Tune AUTOSCROLL_TIMEOUT_INTERVAL and AUTO_SCROLL_MARGIN so that
	auto-scrolling is easier to trigger.

2003-03-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-model.c (fm_list_model_get_value):
	Scale icons to fit in row-height.

2003-03-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file): 
	* libathena-private/athena-icon-container.c (athena_icon_container_start_renaming_selected_item):
	Use eel_filename_get_rename_region for both list and icon view to
	get the initial region to select on rename.
	
2003-03-27  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window.h: 
	* src/athena-window.c: 
	* src/athena-window-menus.c:
	Don't save the location bar enabled prefs when showing it
	temporarily.

2003-03-27  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-list-view.c:
	Keyboard shortcuts for context menu.
	Don't eat CTRL-Space, that means we can't multiple-select.

2003-03-27  Alexander Larsson  <alexl@redhat.com>

	* docs/key_mouse_navigation.txt:
	Update keynav docs.
	
	* libathena-private/athena-icon-private.h:
	* libathena-private/athena-icon-container.c:
	(button_release_event), (motion_notify_event), (key_press_event),
	(handle_icon_button_press), (has_multiple_selection),
	(has_selection):
	Don't do context menu on middle button.
	Shift-F10 gives directory context menu if no selection
	Change Ctrl-F10 to Shift-F9 to pop up directory context menu. Ctrl-F10 was
	conflicting with Toolbar keynav.
	
	* src/athena-shell-ui.xml:
	Remove Escape accelerator for escape. It was colliding with various
	other uses of escape all over. Need to rethink this.

2003-03-26  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "yi" to ALL_LINGUAS.

2003-03-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (handle_icon_button_press):
	Re-Fix Home/End.
	Make Ctrl-space create a keyboar focus if none exists instead of activating
	the selection.

	* docs/Makefile.am:
	* docs/key_mouse_navigation.txt:
	Add some key/mouse docs for views.

2003-03-26  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c: (activate_selected_items),
	(fm_list_view_did_not_drag), (drag_data_get_callback),
	(selection_foreach), (get_selection_refs), (ref_list_free),
	(stop_drag_check), (get_drag_pixbuf), (motion_notify_callback),
	(button_event_modifies_selection), (button_press_callback),
	(button_release_callback), (key_press_callback),
	(create_and_set_up_tree_view), (fm_list_view_finalize): Implement
	the widget side drag and drop here instead of eggtreemultidnd.c.
	Clean up mouse event handling to be more similar to the icon view.

	Fixes bug #48051, #89980, #90437, #105593, #108946, among others.

	Thanks to marten ter borgh <marten@terborgh.demon.nl> for help
	with this patch.
	
2003-03-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-private.h: 
	* libathena-private/athena-icon-container.c:
	Fix keyboard arrow key navigation for manual layout so that you
	can reach all icons.
	Fix home and end for automatic layout.

2003-03-25  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (fm_directory_view_display_selection_info):
	Remove Free space from status bar.
	
2003-03-25  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (fm_directory_view_display_selection_info):
	Free space in status bar.

	* src/athena-window-manage-views.c (begin_location_change):
	Set status to " " instead to avoid status bar disappearing.
	
2003-03-25  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-manage-views.c (begin_location_change):
	Clear status on location change.

2003-03-25  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (done_loading):
	Report selected files when done loading.
	This makes the selected files status text not stick on
	directory change.

2003-03-25  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-thumbnails.c (thumbnail_thread_start):
	Fix race on thumbnail creation. If a thumbnail was being created when the file
	was modified the request wouldn't be entered in the queue, but the created
	thumbnail has the wrong mtime.

2003-03-24  Gaute Lindkvist <lindkvis@stud.ntnu.no>

	* libathena-private/athena-file.h:
        * libathena-private/athena-file.c (athena_file_get_string_attribute),
	(athena_file_get_volume_name),
	(athena_file_get_volume_free_space)
	Added functions for finding volume name and free space

	* src/file-manager/fm-properties-window.c (should_show_free_space),
	(create_basic_page)
	Now shows volume name and free space
		
2003-03-24  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-manage-views.c (athena_window_reload):
	Scroll to current position on reload.

2003-03-22  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added Walloon (wa) to ALL_LINGUAS

2003-03-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (select_one_unselect_others):
	Fix crash.
	
2003-03-19  Alexander Larsson  <alexl@redhat.com>

	* src/athena-view-frame.c (attach_view):
	If the ViewFrame is mapped already, activate the frame control.
	This fixes the tree sidebar not loading when you hide/show the
	sidebar.

2003-03-19  Padraig O'Briain  <padraig.obriain@sun.com>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_accessible_ref_state_set): New function
	which sets which state ATK_STATE_FOCUSED, if appropriate.

	* libathena-private/athena-icon-container.c
	(select_one_unselect_others): Call atk_focus_tracker_notify() if
	selection changed.

	This fixes bug #107639.

2003-03-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-emblem-utils.c:
	(is_reserved_keyword), (athena_emblem_should_show_in_list):
	notes emblem is a reserved name, and does not show up in lists.
	
	* libathena-private/athena-file.h:
	Added notes emblem name
	
	* libathena-private/athena-file.c: (file_has_note),
	(get_automatic_emblems_as_integer),
	(prepend_automatic_emblem_names):
	Implement automatic notes emblem.

2003-03-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (handle_icon_button_press):
	Don't activate on double click of any modifiers are used.

2003-03-18  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* libathena-private/athena-icon-factory.c:
	(athena_icon_factory_instance_init),
	(athena_icon_factory_finalize), (mimetype_limited_by_size):
	Don't use eel_g_hash_table_new_free_at_exit, it only outputs
	wrong warnings when exiting.

2003-03-18  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* src/file-manager/fm-directory-view.c:
	(set_up_scripts_directory_global), (create_scripts_directory),
	(open_scripts_folder_callback):
	Fix script migration from Athena 1.0.x (bug #80704)

2003-03-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (record_arrow_key_start): 
	Use bottom middle point as start position, since otherwise you might miss
	icons that are not as tall as half the height of the current one.
	
2003-03-17  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.c
	(athena_file_management_properties_dialog_setup):
	Correctly handle cases where one widget controls several keys
	by using new _slave stuff in eel.

	* libathena-private/apps_athena_preferences.schemas:
	Correct paths for show_backup_files & show_hidden_files
	
2003-03-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (lay_down_icons_tblr):
	Fix clean up by name layout.
	
2003-03-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (athena_icon_container_start_renaming_selected_item):
	Move rename widget left one pixel to handle frame width.

	* libathena-private/athena-icon-canvas-item.c (compute_text_rectangle):
	Make the LABEL_OFFSET be part of the text rect to avoid a gap.

2003-03-14  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file): 
	Don't start a rename if there is already a rename in progress.

	Patch from marten ter borgh <marten@terborgh.demon.nl>, fixes
	bug #106464.

2003-03-14  Dave Camp  <dave@ximian.com>

	* components/adapter/athena-adapter-stream-load-strategy.c 
	(athena_adapter_stream_load_strategy_load_location): Recompute
	the mime type and passit to the stream's load method.

2003-03-14  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-dnd.c (drag_leave_callback): 
	Clear the drop target.

2003-03-14  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-global-preferences.c:
	Fix some default values.
	
	* libathena-private/apps_athena_preferences.schemas:
	Update the schema file.
	
2003-03-14  Alexander Larsson  <alexl@redhat.com>

	* src/athena-main.c (main):
	Call g_set_application_name().
	String change.

2003-03-14  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory.h:
	* libathena-private/athena-directory.c:
	(athena_directory_new):
	Make AthenaDirectory a GObject.
	
	* libathena-private/athena-file.h:
	* libathena-private/athena-file.c:
	(athena_file_new_from_relative_uri),
	(athena_file_new_from_info):
	Make AthenaFile a GObject.
	
	* libathena-private/athena-trash-file.c:
	(trash_callback_remove_file_cover), (trash_finalize),
	(athena_trash_file_class_init):
	Convert destroy into finalize.
	
	* libathena-private/athena-vfs-directory.h:
	* libathena-private/athena-vfs-directory.c:
	(athena_vfs_directory_init), (athena_vfs_directory_class_init):
	* libathena-private/athena-vfs-file.c:
	(athena_vfs_file_init), (athena_vfs_file_class_init):
	* libathena-private/athena-vfs-file.h:
	Remove unused details fields.
	
	* src/file-manager/fm-directory-view.c: (disconnect_handler),
	(disconnect_directory_handler),
	(disconnect_directory_as_file_handler):
	* src/file-manager/fm-search-list-view.c: (real_adding_file):
	Don't cast AthenaFiles and AthenaDirectories to GtkObjects.

2003-03-13  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "ml" to ALL_LINGUAS.

2003-03-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c (should_show_thumbnail):
	Make the thumbnail size prefs only affect images.

2003-03-13  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.c (athena_file_management_properties_dialog_show):
	Call the response callback on delete_event, with GTK_RESPONSE_CLOSE.
	
	* src/athena-file-management-properties-mail.c:
	indentation fix.
	
2003-03-13  Alexander Larsson  <alexl@redhat.com>

	* configure.in: 
	* athena.spec.in: 
	Updated spec file from Neil Weisenfeld <weisen@ai.mit.edu>

2003-03-12  Bastien Nocera  <hadess@hadess.net>

	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list): do not
	allow gnome-desktop to parse the file if it's not a .desktop file
	(Closes: #106970 in Totem)

2003-03-12  Alex Duggan  <aldug@astrolinux.com>

	* Makefile.am: install athena-file-management-properties
	.desktop file to the correct location so it's seen in
	the gnome-panel menus

	* athena-file-management-properties.desktop.in:
	Add startup notification

2003-03-12  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-properties-window.c 
	(name_field_update_to_match_file): Always set the original_name 
	object data if it hasn't been set yet.

2003-03-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c: (finalize),
	(athena_file_invalidate_attributes_internal),
	(athena_file_is_thumbnailing),
	(athena_file_set_is_thumbnailing):
	* libathena-private/athena-file.h:
	Keep track of whether the file is being thumbnailed.
	If it is at finalization, remove from the thumbnail queue.
	
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-container.c:
	(redo_layout_internal), (realize),
	(athena_icon_container_instance_init),
	(athena_icon_container_prioritize_thumbnailing),
	(athena_icon_container_prioritize_thumbnailing_for_visible_icons)
	, (handle_vadjustment_changed):
	Prioritize thumbnailing for icons visibile on the screen.
	
	* libathena-private/athena-icon-factory.c:
	(show_thumbnails_changed_callback):
	Remove all thumbnails from queue when thumbnails are disabled.
	
	* libathena-private/athena-thumbnails.h:
	* libathena-private/athena-thumbnails.c: (free_thumbnail_info),
	(athena_thumbnail_remove_from_queue),
	(athena_thumbnail_remove_all_from_queue),
	(athena_thumbnail_prioritize),
	(thumbnail_thread_notify_file_changed),
	(athena_create_thumbnail), (thumbnail_thread_start):
	New functions to remove thumbnails from the queue and to prioritize them.
	
	* src/file-manager/fm-icon-container.c:
	(fm_icon_container_prioritize_thumbnailing),
	(fm_icon_container_class_init):
	Implement prioritize_thumbnailing.

2003-03-11  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window.c (athena_window_save_geometry):
	Don't save geometry if the window is maximized.

=== athena 2.2.2 ===

2003-03-10  Alexander Larsson  <alexl@redhat.com>

	* components/text/Makefile.am (EXTRA_DIST):
	Add ui_DATA to EXTRA_DIST.

2003-03-10  Alexander Larsson  <alexl@redhat.com>

	* configure.in: 
	* NEWS:
	Bump to 2.2.2.
	Require Eel 2.2.2

	* libathena-private/athena-customization-data.c:
	Don't embedd reset label into the reset image.
	This drops the last user of PangoFT2.

2003-03-10  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-global-preferences.c: 
	* libathena-private/apps_athena_preferences.schemas:
	Make 50% the default list view zoom.

	* libathena-private/athena-bookmark.h:
	* libathena-private/athena-bookmark.c:
	(athena_bookmark_finalize),
	(athena_bookmark_uri_known_not_to_exist),
	(athena_bookmark_set_scroll_pos),
	(athena_bookmark_get_scroll_pos):
	Add scroll positions to bookmarks. Used for the window
	back/forward history.
	
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_get_first_visible_icon),
	(athena_icon_container_scroll_to_icon):
	Add new functions.
	
	* libathena/athena-view-component.idl:
	Add Athena::ScollPositionable interface.
	
	* libathena/Makefile.am:
	* libathena/athena-scroll-positionable.h:
	* libathena/athena-scroll-positionable.c:
	Standard implementation of Athena::ScollPositionable.
	
	* src/file-manager/fm-icon-view.c:
	(icon_view_get_first_visible_file_callback),
	(icon_view_scroll_to_file_callback), (fm_icon_view_instance_init):
	Implement Athena::ScollPositionable for icon view.
	
	* src/file-manager/fm-list-view.c:
	(list_view_get_first_visible_file_callback),
	(list_view_scroll_to_file_callback), (fm_list_view_instance_init):
	Implement Athena::ScollPositionable for list view.
	
	* src/athena-view-frame.h:
	* src/athena-view-frame.c: (destroy_view),
	(create_corba_objects),
	(athena_view_frame_get_first_visible_file),
	(athena_view_frame_scroll_to_file):
	Add support for Athena::ScollPositionable.
	
	* src/athena-window-private.h:
	* src/athena-window-manage-views.c: (open_location),
	(free_location_change), (end_location_change),
	(begin_location_change), (athena_window_set_content_view),
	(load_complete_callback), (athena_window_back_or_forward),
	(athena_window_reload):
	Save scroll position when changing location and switching
	components. Scroll to the right place on back/forward.

2003-03-08  Dave Camp  <dave@ximian.com>

	* components/text/athena-text-view-ui.xml: Fixed the strings 
	to match the strings used in the shell.

2003-03-07  Dave Camp  <dave@ximian.com>

	* components/text/Makefile.am:
	* components/text/athena-text-view-ui.xml:
	* components/text/athena-text-view.c: (copy_callback),
	(bonobo_control_activate_callback),
	(athena_text_view_instance_init): Implement Copy to clipboard.
	Don't need cut or paste, since the view is read-only.

2003-03-06  Dave Camp  <dave@ximian.com>

	* src/athena-file-management-properties.glade: Fixed alignment
	and padding.  Patch from Luca Ferretti <elle.uca@libero.it>.

2003-03-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-bookmark.c:
	(athena_bookmark_get_pixbuf), (athena_bookmark_update_icon):
	* libathena-private/athena-emblem-utils.c:
	(athena_emblem_rename_emblem):
	* src/athena-sidebar-title.c: (update_emblems):
	* src/file-manager/fm-directory-view.c: (ready_to_load):
	Update according to AthenaIconFactory API changes.
	
	* libathena-private/athena-file.h:
	* libathena-private/athena-file.c:
	(athena_file_peek_top_left_text),
	(athena_file_get_top_left_text):
	Add needs_loading out parameter to athena_file_peek_top_left_text.
	
	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_finalize),
	(athena_icon_canvas_item_set_embedded_text_rect),
	(athena_icon_canvas_item_set_embedded_text),
	(draw_embedded_text), (athena_icon_canvas_item_draw):
	Render embedded text on exposes.
	(athena_icon_canvas_item_get_image):
	Return a GdkPixmap + mask instead of pixbuf, so that
	we can do the text rendering on it.
	
	* libathena-private/athena-icon-private.h:
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_clear), (icon_destroy),
	(athena_icon_container_get_icon_images),
	(athena_icon_container_start_monitor_top_left),
	(athena_icon_container_stop_monitor_top_left),
	(athena_icon_container_update_icon):
	For icons that have an embedded text rect, request the
	top-left text, and set the text on the canvas item.
	
	* libathena-private/athena-icon-dnd.c:
	(athena_icon_dnd_begin_drag):
	athena_icon_canvas_item_get_image now returns a pixmap, handle this
	change.
	
	* libathena-private/athena-icon-factory.h:
	* libathena-private/athena-icon-factory.c: (cache_key_destroy),
	(athena_icon_factory_get_required_file_attributes),
	(get_icon_from_cache), (athena_icon_factory_get_pixbuf_for_icon),
	(cache_key_hash), (cache_key_equal),
	(athena_icon_factory_get_pixbuf_for_file),
	(athena_icon_factory_get_pixbuf_from_name),
	(athena_icon_factory_remove_from_cache):
	Remove all embedded text handling.
	(athena_icon_factory_get_basic_file_attributes):
	Remove, not needed anymore.
	(athena_icon_factory_get_icon_for_file):
	Pass in whether you want icons for text embedding or not.
	
	* src/file-manager/fm-icon-container.c:
	(fm_icon_container_get_icon_images),
	(fm_icon_container_start_monitor_top_left),
	(fm_icon_container_stop_monitor_top_left),
	(fm_icon_container_class_init):
	Update to new APIs. pass TRUE for embedd_text in get_icon_for_file.
	Implement start/stop top left monitoring.
	
	* src/file-manager/fm-icon-view.c:
	(list_covers),(fm_icon_view_clear):
	Clear the icon container before unreferencing the AthenaFiles.
	Otherwise the stop_monitor call uses the unref:ed file.

2003-03-05  Alexander Larsson  <alexl@redhat.com>

	* src/athena-zoom-control.[ch]:
	Derive from EelInputEventBox instead of GtkEventBox.
	Works better with themes.

2003-03-04  Alexander Larsson  <alexl@redhat.com>

	* src/athena-location-bar.c (athena_location_bar_init):
	Use EelInputEventBox for the location label.
	This makes theming nicer.

2003-03-04  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c (fm_desktop_icon_view_init):
	Don't connect empty void-returning handler to "event". Fixes
	delete-key on desktop, and probably other random keynav-on-desktop
	failures.

2003-03-04  Alexander Larsson  <alexl@redhat.com>

	* src/athena-property-browser.c (make_properties_from_directories) 
	(make_drag_image): Add back erase emblem to backgrounds & emblems dialog.

2003-03-04  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	* athena-zoom-control.c:
	Don't chain up to initialize if it is null.
	
2003-03-04  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (athena_icon_container_accessible_get_type):
	EEL_CANVAS, not GNOME_CANVAS.

	* libathena-private/athena-icon-canvas-item.c (athena_icon_canvas_item_accessible_get_type):
	Implements AtkText for icons presenting the text on both lines.
	Implements atk_text_get_offset_at_point and atk_text_get_character_extents
	so that screen readers can obtain the text.

	* src/athena-zoom-control.c (athena_zoom_control_accessible_initialize):
	Set the role for the zoom widget.
	
	All patches by padraig.obriain@sun.com

2003-03-03  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-dnd.c (confirm_switch_to_manual_layout):
	Disable switch-to-manual layout dialog.

2003-03-03  Alexander Larsson  <alexl@redhat.com>
	
	* libathena-private/athena-icon-container.c:
	(icon_toggle_selected), (button_press_event),
	(athena_icon_container_did_not_drag), (handle_icon_button_press):
	* libathena-private/athena-icon-private.h:
	Ctrl/shift dragging doesn't deselect the icon you click on.
	Double-clicking has to be twice on the same icon.

2003-03-01  Dave Camp  <dave@ximian.com>

	* src/athena-side-pane.h:
	* src/athena-side-pane.c: (athena_side_pane_get_current_panel):
	New function.
	* src/athena-window-manage-views.c:
	(athena_window_set_sidebar_panels):
	* src/athena-window.c: (set_current_side_panel),
	(side_pane_switch_page_callback), (athena_window_set_up_sidebar),
	(athena_window_tear_down_sidebar),
	(athena_window_add_sidebar_panel), (add_sidebar_panels): Save
	the current side pane view when it is changed, and show that
	when creating the side pane.
	* libathena-private/apps_athena_preferences.schemas:
	* libathena-private/athena-global-preferences.h: Add
	a current side panel option.

2003-03-01  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c: (icons_changed_callback),
	(fm_list_view_instance_init): Refresh the rows when the icon
	theme changes.

2003-03-01  Dave Camp  <dave@ximian.com>

	* src/athena-window-private.h:
	* src/athena-window-toolbars.c: (get_back_button),
	(get_forward_button), (menu_position_under_widget),
	(create_back_or_forward_toolbar_item): Use 	
	bonobo_ui_component_widget_set for the back and forward dropdowns.

	This is the athena end of a fix for bug #106457.

2003-02-28  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-canvas-item.c: (hit_test):
	Don't use alpha when checking for hits on the icon.

2003-02-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_start_renaming_selected_item)
	(rename_filename_selection_end):
	Only select the non-extension part of the name when starting a rename.
	Set cursor at end of selection.
	Set correct font on rename widget.
	Make some internal function static.

2003-02-28  Alexander Larsson  <alexl@redhat.com>

	* components/throbber/athena-throbber.c:
	* libathena-private/athena-bonobo-extensions.c:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory.c:
	* libathena-private/athena-dnd.c:
	* libathena-private/athena-drag-window.c:
	* libathena-private/athena-entry.c:
	* libathena-private/athena-file-operations-progress.c:
	* libathena-private/athena-icon-canvas-item.c:
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-tree-view-drag-dest.c:
	* libathena-private/athena-volume-monitor.c:
	* libathena/athena-idle-queue.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/athena-bookmarks-window.c:
	* src/athena-location-bar.c:
	* src/athena-main.c:
	* src/athena-view-frame.c:
	* src/athena-window-menus.c:
	* src/athena-window.c:
	Don't use deprecated APIs.
	Patch by iain <iain@prettypeople.org>

2003-02-28  Alexander Larsson  <alexl@redhat.com>

	* components/text/athena-text-view.c (athena_text_view_instance_init):
	Use monospaced font for text view.
	Patch by Luca Ferretti <elle.uca@libero.it>

2003-02-28  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.c: 
	* src/athena-file-management-properties.glade:
	Add a 1 GB value for the thumbnailing limit.
	Rename "Image Files" to "Other Previewable Files" in thumbnail page.
	Patch from Keith Conger <kconger@navisite.com>
	[string change]

2003-02-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-volume-monitor.c (finish_creating_volume):
	Correctly handle floppies and cdroms mounted outside /mnt too.
	Based on patch from Mattias Eriksson <snaggen@acc.umu.se>.

2003-02-21  Roozbeh Pournader  <rozobeh@sharif.edu>

	* configure.in: Added "fa" to ALL_LINGUAS.

2003-02-20  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require bonobo-activation 2.1.0

	* src/athena-server-connect.c (D):
	Fix macro

2003-02-18  Alexander Larsson  <alexl@redhat.com>

	* libathena/athena-view-standard-main.c (athena_view_standard_main_multi):
	Move the GNOME_CLIENT_PARAM_SM_CONNECT property setting to the
	gnome_program_init call. Setting it later doesn't work.
	
	* src/file-manager/fm-directory-view.c (no_locale_at_end) 
	(get_bonobo_menu_verb_names): Filter out locale versions
	of athenaverbs.

2003-02-17  Arvind Samptur <arvind.samptur@wipro.com>
	* src/athena-file-management-properties.[ch]:
	(athena_file_management_properties_dialog_setup):
	(athena_file_management_properties_dialog_show):
	* src/athena-window-menus.c:
	(preferences_callback):
	* src/athena-file-management-properties-main.c:
	(main):

	Multi-head stuff done for the preferences dialog.

	* libathena-private/athena-icon-dnd.c: (confirm_switch_to_manual_layout)
	Get the transient parent for the "Switch to Manual Layout ?" right.

	Patches approved by Dave Camp. #100343 and #106086.
	
2003-02-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-thumbnails.c (thumbnail_thread_start):
	Free pixbuf when saved.

2003-02-13  Alexander Larsson  <alexl@redhat.com>

	* src/athena-main.c (main):
	Set DISPLAY activation env variable to canonical display name, since that is what
	we register for. Without this, do *not* run e.g. "DISPLAY=:0 athena".

2003-02-13  Alexander Larsson  <alexl@redhat.com>

	* src/athena-server-connect.c:
	Include locale.h. (#105756)

=== athena 2.2.1 ===

2003-02-11  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump to 2.2.1

	* libathena-private/athena-bonobo-extensions.c (athena_bonobo_activation_register_for_display):
	Don't use deprecated functions.

2003-02-10  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-directory.c:
	(athena_directory_notify_files_moved): Use
	athena_file_update_name_and_directory().
	
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c: (update_name_internal): New
	function.
	(athena_file_update_name_and_directory): New function.
	(athena_file_update_name): Use update_name_internal.
	(athena_file_set_directory): Use
	athena_file_update_name_and_directory().

	Fixes #97490.

2003-02-08 John Fleck <jfleck@inkstain.net>

	* cvs removing all the stuff in the old help directory, since
	we're not using it any more, reducing the load for poor sods using
	modems and fixing bug #86440

2003-02-08  Dave Camp  <dave@ximian.com>

	* components/notes/Athena_View_notes.server.in.in: Removed
	view_as_name so this isn't chosen as a content view.
	* components/image_properties/Athena_View_image_properties.server
	.in.in: Removed the Athena::View interface (it isn't implemented
	any more), removed the view_as_name.  Fixes #102790.

2003-02-08  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-dnd.c:
	(athena_drag_drop_action_ask),
	(athena_drag_drop_background_ask):
	* libathena-private/athena-dnd.h:
	* libathena-private/athena-icon-dnd.c:
	(get_background_drag_action),
	(athena_icon_container_receive_dropped_icons):
	* libathena-private/athena-tree-view-drag-dest.c:
	(receive_uris):
	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	* src/athena-information-panel.c: (receive_dropped_uri_list),
	(receive_dropped_color): Set the GdkScreen on the drag-and-drop 
	context menu.  Fixes #90920.

2003-02-08  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-factory.c:
	(athena_remove_icon_file_name_suffix),
	(path_represents_svg_image): Allow .svgz rendering in athena.
	Patch from Dom Lachowicz <cinamod@hotmail.com>

2003-02-05  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c (create_mount_link):
	Correct icon name for zip disks.

2003-02-04  Alexander Larsson  <alexl@redhat.com>

	* components/adapter/athena-adapter-control-embed-strategy.h:
	* components/adapter/athena-adapter-embed-strategy.h:
	* components/adapter/athena-adapter-file-load-strategy.h:
	* components/adapter/athena-adapter-load-strategy.h:
	* components/adapter/athena-adapter-stream-load-strategy.h:
	* components/adapter/athena-adapter.h:
	* components/adapter/athena-zoomable-proxy.c:
	* components/emblem/athena-emblem-view.h:
	* components/hardware/athena-hardware-view.h:
	* components/loser/content/athena-content-loser.h:
	* components/loser/sidebar/athena-sidebar-loser.h:
	* components/music/athena-music-view.h:
	* components/news/athena-cell-renderer-news.c:
	* components/text/athena-text-view.h:
	* components/throbber/athena-throbber.h:
	* libathena-private/athena-directory-metafile-monitor.h:
	* libathena-private/athena-directory.h:
	* libathena-private/athena-entry.h:
	* libathena-private/athena-file.h:
	* libathena-private/athena-horizontal-splitter.h:
	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-keep-last-vertical-box.h:
	* libathena-private/athena-merged-directory.h:
	* libathena-private/athena-metafile.h:
	* libathena-private/athena-program-chooser.h:
	* libathena-private/athena-trash-directory.h:
	* libathena-private/athena-trash-file.h:
	* libathena-private/athena-vfs-directory.h:
	* libathena-private/athena-vfs-file.h:
	* libathena-private/athena-volume-monitor.h:
	* libathena/athena-view-standard-main.c:
	* libathena/athena-view.h:
	* src/file-manager/fm-desktop-icon-view.h:
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.h:
	* src/file-manager/fm-properties-window.h:
	* src/file-manager/fm-search-list-view.h:
	* src/athena-bookmark-list.h:
	* src/athena-complex-search-bar.h:
	* src/athena-component-adapter-factory.h:
	* src/athena-desktop-window.h:
	* src/athena-information-panel.h:
	* src/athena-location-bar.h:
	* src/athena-navigation-bar.h:
	* src/athena-property-browser.h:
	* src/athena-search-bar-criterion.h:
	* src/athena-search-bar.h:
	* src/athena-sidebar-title.h:
	* src/athena-simple-search-bar.h:
	* src/athena-switchable-navigation-bar.h:
	* src/athena-switchable-search-bar.h:
	* src/athena-view-frame.h:
	* src/athena-window.h:
	* src/athena-zoom-control.h:
	Change GtkType to GType, patch by Christian Meyer <chrisime@uni.de>

2003-02-03  David Bordoley <bordoley@msu.edu>

       * lbathena-private/athena-file-operations.c 
       (handle_transfer_vfs_error):
       Fixed dialogs to use GTK_STOCK_CANCEL/GTK_STOCK_OK
       instead of stop where appropriate. Fix button order to be
       HIG compliant.

2003-02-03  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window.c (athena_window_finalize):
	Free window->last_geometry.
	Patch from Arjan van de Ven <arjanv@redhat.com>

	* libathena-private/athena-icon-factory.c (create_normal_cache_icon):
	Free filename. Patch from Arjan van de Ven <arjanv@redhat.com>

2003-01-31  James Willcox  <jwillcox@gnome.org>

	* libathena-private/athena-icon-container.c:
	(handle_icon_button_press):

	Update the selection *before* we tell people to popup a context menu.

2003-01-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c (file_info_start):
	Clear get_info_failed before starting the get_file_info. This means
	that old failed get_info calls don't get "stuck", such as if you entered
	the wrong password in an smb share.

2003-01-28  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added THai (th) to ALL_LINGUAS

=== athena 2.2.0.2 ===

2003-01-27  Dave Camp  <dave@ximian.com>

	* NEWS: 
	* configure.in: 2.2.0.2.

2003-01-27  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c
	(athena_icon_factory_get_icon_for_file):
	Only pass GNOME_ICON_LOOKUP_FLAGS_EMBEDDING_TEXT if there
	is top-left text to use.

2003-01-23  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-directory-background.c
	(background_destroyed_callback): Remove callbacks for background
	gconf keys.

=== athena 2.2.0.1 ===

2003-01-22  Dave Camp  <dave@ximian.com>

	* NEWS:
	* configure.in: 2.2.0.1

2003-01-22  Dave Camp  <dave@ximian.com>

	* libathena/athena-view-standard-main.c: (make_object): Unref
	the control.

2003-01-22  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Added "am" and "ar" to ALL_LINGUAS

2003-01-22  Christian Rose  <menthos@menthos.com>

	* configure.in: Added "mn" to ALL_LINGUAS.

2003-01-21  Yanko Kaneti  <yaneti@declera.com>

	* configure.in: Added mk to ALL_LINGUAS by MK team request.

=== athena 2.2.0 ===
	
2003-01-20  Dave Camp  <dave@ximian.com>

	* NEWS:
	* configure.in: 2.2.0
	* THANKS: Added a name I forgot.

2003-01-20  Dave Camp  <dave@ximian.com>

	* AUTHORS: Added the 2.2 team.
	* THANKS: Added a section for 2.x, updated.
	* README: Removed the obsolete info, added some up-to-date info.
	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	Added the 2.2 team to the about box.
	* HACKING: Updated, patch from Alex Duggan.

2003-01-20  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c (key_press_callback): Removed
	previous patch to this function, it was breaking keynav.

2003-01-20  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (bonobo_mime_action_activate_callback):
	Correct the CORBA_Any usage with context menus.

	* libathena-private/athena-icon-factory.c:
	Look at mtime for absolute filename icons so we reload thumbnails etc.

2003-01-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	When deleting an icon with the keyboard focus, set focus on
	an adjacent icon.

2003-01-20  Alexander Larsson  <alexl@redhat.com>

	* src/athena-file-management-properties.c:
	Implement the help button.

2003-01-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c:
	Revert the symlink activation change. For later discussion.

2003-01-18  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c (fm_list_view_start_renaming_file): 
	Free the path.
	
2003-01-18  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(create_and_set_up_tree_view), (fm_list_view_start_renaming_file):
	Don't initiate a rename on mouse clicks.
	Patch from Marten Ter Borgh <marten-devel@terborgh.demon.nl>,
	fixes bug #83552.

2003-01-18  TÃµivo LeedjÃ¤rv  <toivo@linux.ee>

	* configure.in: Added et to ALL_LINGUAS.

2003-01-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	Convert link names and duplicate names with
	g_filename_to/from_utf8(). (#103721)
	Patch from hidetoshi.tajima@sun.com

2003-01-16  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (athena_file_operations_new_folder):
	Convert new directory name with g_filename_from_utf8(). (#90154)
	
2003-01-16  Alexander Larsson  <alexl@redhat.com>


	* athena-file-management-properties.desktop.in:
	* src/network-scheme.desktop.in:
	Change the icon to something that exists.

2003-01-14  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-view-identifier.c:
	(athena_view_identifier_new), (athena_view_identifier_copy),
	(athena_view_identifier_new_from_bonobo_server_info),
	(athena_view_identifier_free):
	* libathena-private/athena-view-identifier.h: Add a 
	view_as_label_with_mnemonic field to the server file and 
	AthenaViewIdentifier.
	* src/athena-window.c: (add_view_as_bonobo_menu_item): Use
	the mnemonics in the view menu.
	* src/Athena_shell.server.in: Add view_as_label_with_mnemonic
	fields to the Icon and List views.

2003-01-14  David Bordoley <bordoley@msu.edu>
 
 	* src/athena-view-frame.c
 	Fixed typo in athena_view_frame_class_init 
 	s/open_location_in_this_window/open_location_prefer_existing_window 
 	for the prefer existing window case.

2003-01-14  Anders Carlsson  <andersca@codefactory.se>

	* src/file-manager/fm-icon-view.c:
	(get_stored_icon_position_callback),
	(icon_position_changed_callback):
	Store the value of the previous locale, not the C
	one that we're setting. 
	Fixes #45300, reported by Christian Rose. 

=== athena 2.1.91 ===

2003-01-13  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Update to 2.1.91.
	Require eel 2.1.91.

2003-01-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-background.c:
	Rename athena_file_update_desktop_pixmaps to 
	athena_file_update_root_pixmaps for clarity.
	Call eel_background_set_is_constant_size on the desktop
	background earlier.
	Set the color on the correct window (root window, not desktop window).

	* libathena-private/athena-icon-container.c:
	Override the draw_background signal to not clear/redraw the background
	on every expose. That's not needed since EelBackground correctly sets
	the background of the XWindow.

2003-01-13  Dave Camp  <dave@ximian.com>

	* components/image_properties/athena-image-properties-view.c
	(athena_image_properties_view_class_init): Save the parent
	class.
	(athena_image_properties_view_finalize): Chain to the parent
	class.

2003-01-12  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c (key_press_callback): Only
	handle keypresses on the bin window.

	Fixes #102259, thanks to Pasupathi <pasupathi.duraisamy@wipro.com>
	for helping to track this down.
	
2003-01-12  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c (button_press_callback): In
	single click mode, don't activate if shift or control is held
	down.  This matches the icon view behavior.

	Fixes #81896.

2003-01-12  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-list-view.c: (button_press_callback): Handle
	activation and the popup menu from here.
	(create_and_set_up_tree_view): Don't connect to
	button_release_event or event_after.

	Fixes #91176.

2003-01-08  Alex Duggan  <aldug@gnome.org>

	* configure.in:
	Use pkg-config instead of orbit2-config. (fixes #73299)

	* libathena-private/athena-icon-container.c:
	Remove unneccessary include of libathena/athena-clipboard.h
	
	* src/file-manager/fm-directory-view.c:
	Remove unnecessary include of fm-desktop-icon-view.h
	Patch from David Bordoley <bordoley@msu.edu>

2003-01-07  Alex Duggan  <aldug@gnome.org>

	* components/notes/Athena_View_notes.server.in.in: s/Nodes/Notes/
	Patch from R.I.P. Deaddog. Fixes #102736.
	Approved by i18n and release teams
	
2003-01-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_get_activation_uri):
	Don't follow symlinks like shortcuts.
	Patch from Rolf Kulemann

2002-01-07  Naba Kumar  <naba@gnome.org>

	* configure.in: Added hi (hindi) in ALL_LINGUAS
	
2003-01-06  Alex Duggan  <aldug@gnome.org>
	
	* src/athena-window.c:
	* src/athena-window.h:
	Removed statusbar timeout
	
	* libathena-private/athena-global-preferences.c:
	Removed unnecessary include.  Patch from 
	Dave Bordoley <bordoley@msu.edu>

2003-01-06  Alex Duggan  <aldug@gnome.org>

	* src/athena-shell-ui.xml: remove control-f keybinding leftover
	from athena-1.0.x.  Partially fixes #85230
	
=== athena 2.1.6 ===

2003-01-06  Dave Camp  <dave@ximian.com>
	
	* configure.in: 
	* NEWS: Bump version to 2.1.6, require eel 2.1.6.

2003-01-06  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/athena-directory-view-ui.xml:
	Remove duplicate accel for move to trash. Fixes
	the delete-in-rename-deletes-file bug. (#101203)
	
	Patch by Rolf Kulemann
	
2003-01-06  Arvind Samptur <arvind.samptur@wipro.com>
	* src/athena-information-panel.c
	(athena_information_panel_update_buttons): changing the
	mnemonic of "Empty Trash" button. Resolves the conflict
	between "Edit" menu option and "Empty Trash" button, which
	caused the desktop to be badly stuck.
	Please see #101690, for Owen's comments as well.

2002-12-31  Dave Camp  <dave@ximian.com>

	* src/athena-file-management-properties.glade: Applied UI review 
	suggestions.  Patch from Luca Ferretti <elle.uca@libero.it>
	
	* libathena-private/athena-dnd.c
	(athena_drag_drop_background_ask): Use "Folder" instead of
	"Directory".

2002-12-27  Bastien Nocera  <hadess@hadess.net>

	* src/athena-server-connect.c: (update_icon): disable DEBUG
	(Closes: #101430), use GnomeIconTheme stuff so we get the icons back
	as in the old times

2002-12-27  Bastien Nocera  <hadess@hadess.net>

	* configure.in: require libgnome 2.1.1 for the libegg stuff
	(gnome_url_show_with_env is required)

2002-12-19  James Willcox  <jwillcox@gnome.org>

	* libathena-private/athena-directory-notify.h:
	* libathena-private/athena-directory.c:
	(athena_directory_schedule_position_set):
	* libathena-private/athena-file-changes-queue.c:
	(athena_file_changes_queue_schedule_position_set),
	(athena_file_changes_consume_changes):
	* libathena-private/athena-file-changes-queue.h:
	* libathena-private/athena-file-operations.c:
	(icon_position_iterator_new), (apply_one_position),
	(athena_file_operations_copy_move):
	* libathena-private/athena-icon-dnd.c: (handle_local_move),
	(handle_nonlocal_move):
	* libathena-private/athena-metadata.h:
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_init):
	* src/file-manager/fm-directory-view.c: (new_folder_done),
	(file_changed_callback):
	* src/file-manager/fm-icon-view.c: (should_show_file_on_screen),
	(fm_icon_view_remove_file), (fm_icon_view_add_file),
	(fm_icon_view_file_changed), (fm_icon_view_filter_by_screen),
	(fm_icon_view_instance_init):
	* src/file-manager/fm-icon-view.h:

	Make the desktop icon view store the screen number with the icon
	positions.  Now, a given icon appears on one screen only, and you
	can drag them between screens, etc.

2002-12-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-background.c (image_loading_done_callback):
	Handle the fact the we may have to reload the background if it
	needed to be rescaled before.

2002-12-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c (build_error_string):
	Better error message when moving a file over a parent directory.
	
2002-12-18  Alexander Larsson  <alexl@redhat.com>

	* src/athena-preferences-dialog.c:
	* src/athena-preferences-dialog.h:
	* src/athena-theme-selector.c:
	* src/athena-theme-selector.h:
	Removed unused files.

2002-12-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-view-identifier.c (get_lang_list):
	Use gnome_i18n_get_language_list. (#100393)

2002-12-17  Fernando Herrera  <fherrera@onirica.com>

	* athena.desktop.in: add X-Gnome-Bugzilla-OtherBinaries poiting to
	athena binaries

=== athena 2.1.5 ===

2002-12-16  Alexander Larsson  <alexl@redhat.com>

	* Makefile.am (EXTRA_DIST): 
	Remove gnome-starthere.png and gnome-starthere-96.png.
	
2002-12-16  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	Update.
	
	* configure.in:
	Bump version to 2.1.5. Require new eel and gnome-vfs.

2002-12-13  Alex Graveley  <alex@ximian.com>

	* libathena-private/athena-directory-async.c
	(should_look_for_dot_directory_file): Add
	"applications-all-users:" and "preferences-all-users:" which fixes
	bug 89618.

2002-12-13  Alex Duggan  <aldug@gnome.org>

	* configure.in:
   * athena.spec.in:
   remove libgnomecanvas dep
   
2002-12-13  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations-progress.c:
	Make sure text is valid utf8. (#98886)

2002-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c: 
	* libathena-private/athena-icon-canvas-item.c:
	Correctly do w2c transformations. Fixes struts.

2002-12-12  Alexander Larsson  <alexl@redhat.com>

	* data/preferences.desktop.in:
	* data/serverconfig.desktop.in:
	* data/serverconfig.directory.in:
	* data/starthere-link.desktop.in:
	* data/starthere.desktop.in:
	* data/starthere.directory.in:
	* data/sysconfig.desktop.in:
	* data/sysconfig.directory.in:
	Use the new icons in gnome-icon-theme for these.
	
	* Makefile.am:
	* gnome-starthere-96.png:
	* gnome-starthere.png:
	Remove the icons. They moved to gnome-icon-theme.

2002-12-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c:
	Special case the display name for the root of non-local files.
	This means we show e.g. fonts:// instead of / as the title.

2002-12-12  Alexander Larsson  <alexl@redhat.com>

	* src/athena-applicable-views.c:
	* src/athena-applicable-views.h:
	Add ATHENA_DETERMINE_VIEW_NO_MASTER_BROWSER result.

	* src/athena-window-manage-views.c:
	Give nice error message when there is no master browser.

	Note: This change requires gnome-vfs cvs after the 2.1.4 release.
	
2002-12-09  James Willcox  <jwillcox@gnome.org>

	* libathena-private/athena-icon-factory.c:
	(destroy_icon_factory), (get_icon_factory),
	(show_thumbnails_changed_callback), (should_show_thumbnail),
	(athena_icon_factory_get_icon_for_file):

	Respond properly to prefs regarding when to show thumbnails.
	Fixes #96644.

2002-12-09  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_self_check_file):
	Fix test

=== athena 2.1.4 ===

2002-12-09  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Update

	* configure.in:
	Require eel 2.1.4, bump version to 2.1.4

2002-12-07  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c 
	(lay_down_icons_horizontal): Removed unnecessary assigment.
	Fixes #98543. Patch from Gediminas Paulauskas <menesis@delfi.lt>

2002-12-04  James Willcox  <jwillcox@gnome.org>

	* libathena-private/athena-icon-factory.c:
	(icon_theme_changed_callback), (athena_icon_factory_clear):

	Clear the cache when the icon theme changes so we get the new icons.

2002-12-05  Glynn Foster  <glynn.foster@sun.com>

	* libathena/athena-clipboard-ui.xml: Add missing mnemonics.

2002-12-04  James Willcox  <jwillcox@gnome.org>

	* src/athena-window.c: (athena_window_instance_init):

	Disconnect "icons_changed" handler from the icon factory when the
	window is closed.  Fixes #98038.

2002-12-04  James Willcox  <jwillcox@gnome.org>

	* components/emblem/athena-emblem-view.c:
	(athena_emblem_view_drag_received_cb):

	Fixed a silly double negation in an error string.  (Fixes #100376)

2002-12-04  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-tree-view-drag-dest.c:
	(tree_view_weak_notify), (athena_tree_view_drag_dest_dispose),
	(athena_tree_view_drag_dest_class_init),
	(athena_tree_view_drag_dest_new): Remove the scroll timeout
	when either the TreeView or the DragDest is destroyed. 

2002-12-04  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c (create_properties_window):
	Don't use GTK_WIN_POS_MOUSE.

2002-12-03  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-file.c (update_info_internal): 
	Removed unused code that should have been removed in the last 
	commit.

2002-12-03  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-file.c: (rename_callback),
	(update_info_internal): Moved the display name invalidation 
	from update_info_internal to rename_callback.

2002-12-03  Alexander Larsson  <alexl@redhat.com>

	* athena.desktop.in:
	* src/athena-server-connect.desktop.in:
	Add X-GNOME-Bugzilla lines.
	Patch from Fernando Herrera <fherrera@onirica.com>

2002-12-02  Alexander Larsson  <>

	* libathena-private/athena-thumbnails.c (thumbnail_thread_starter_cb):
	Allocate 128K thread stack. Patch from marcus@freebsd.org. (#99917)

2002-11-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas:
	Make treeview show_only_directories default to TRUE.
	Patch from MArk Finlay <sisob@eircom.net>

	* src/file-manager/fm-properties-window.[ch]:
	Make window not dialog,
	patch from David Emory Watson <dwatson@cs.ucr.edu>
	Center window on mouse at popup.

2002-11-28  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/athena-directory-view-ui.xml: 
	Add gtk-properties stock pixmap to menus.
	
2002-11-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas:
	Make show_special_flags default to TRUE, since we removed
	the prefs from the ui.

	* libathena-private/athena-icon-container.c:
	query-drag with middle button. Open context menus faster. (#46276)
	Patch by Marco Pesenti Gritti.

2002-11-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	Do linking instead of copying for burn:. I accidentally
	checked in this code some days ago.

=== athena 2.1.3 ===

2002-11-25  Alexander Larsson  <alexl@redhat.com>

	* configure.in: 
	* NEWS:
	Bump to 2.1.3

2002-11-24  Dave Camp  <dave@ximian.com>

	* configure.in: Remove sample and loser from the build.

2002-11-21  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-background.c:
	(image_loading_done_callback): Only set image of required size,
	when now pixmap needed, kill old pixmap and set color.
	(free_root_pixmap): New function to free root background image

	Patch from Brian.Cameron@sun.com

2002-11-20  Anders Carlsson  <andersca@gnu.org>

	* components/Makefile.am:
	Remove sample and loser from the default build.
	
	* libathena-private/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file):
	Special-case the trash location so that it gets the correct icon.
	
2002-11-19  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-properties-window.c:
	(clear_bonobo_pages) Don't reference wrong notebook pages
	 (properties_window_file_changed_callback) correct strcmp comparison

2002-11-19  Padraig O'Briain  <padraig.obriain@sun.com>

	* components/text/Makefile.am:
	* components/throbber/Makefile.am:
	* components/tree/Makefile.am:
	Add CLEANFILES so that make clean deletes $(server_DATA) and
	$(server_DATA).in

	This change should have been made on September 20th

	* libathena-private/athena-icon-container.c (button_press_event):
	Get double_click_time from GtkSettings property instead of using
	hardcoded value.

	This fixes bug #92372.

2002-11-13  Diego Gonzalez  <diego@pemas.net>

	* libathena-private/athena-theme.[c-h]:
	(athena_theme_set_theme), (athena_theme_make_preview_pixbuf),
	(athena_theme_for_each_theme), (athena_theme_remove_user_theme),
	(athena_theme_install_user_theme)

	* libathena-private/athena-theme.c:
	(load_theme_document), (vfs_file_exists), (theme_get_property),
	(theme_get_name_property), (theme_get_description_property),
	(theme_list_prepend), (has_theme_xml), (theme_get_themes_for_location),
	(theme_get_builtin_themes), (theme_get_user_themes),
	(theme_list_invoke_callback), (attributes_free)

	Theme cleanup, remove all these functions since they are no longer
	used.

2002-11-10  James Willcox  <jwillcox@gnome.org>

	* docs/athena-context-menus.txt:
	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_popup_components_for_file):

	Fixed a slight bug in the context menu query code, and added a bit of
	documentation.

2002-11-09  Dmitry G. Mastrukov  <dmitry@taurussoft.org>

	* configure.in: Added Belarusian to ALL_LINGUAS

2002-11-08  James Willcox  <jwillcox@gnome.org>

	* components/image_properties/athena-image-properties-view.c:
	(get_property), (set_property),
	(athena_image_properties_view_init):
	* components/image_properties/athena-image-properties-view.h:
	* components/notes/athena-notes.c: (set_bonobo_properties),
	(make_notes_view):
	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_property_components_for_file):
	* libathena-private/athena-mime-actions.h:
	* src/file-manager/fm-properties-window.c:
	(bonobo_page_activate_callback), (append_bonobo_pages):

	Make bonobo property pages regular controls instead of AthenaViews.


2002-11-07  James Willcox  <jwillcox@gnome.org>

	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_default_component_for_file_internal),
	(athena_mime_get_short_list_components_for_file),
	(athena_mime_actions_file_needs_full_file_attributes),
	(athena_mime_get_all_components_for_file_extended),
	(athena_mime_get_popup_components_for_file),
	(has_server_info_in_list), (server_info_list_intersection),
	(athena_mime_get_popup_components_for_files),
	(mime_get_all_components_for_uri_scheme),
	(make_bonobo_activation_query_with_known_mime_type),
	(make_bonobo_activation_query_with_uri_scheme_only),
	(athena_do_component_query):
	* libathena-private/athena-mime-actions.h:
	* libathena-private/athena-program-chooser.c:
	(repopulate_program_list):
	* libathena-private/athena-program-choosing.c:
	(choose_component_callback):
	* src/file-manager/fm-directory-view.c:
	(bonobo_mime_action_data_new), (bonobo_mime_action_data_free),
	(bonobo_mime_action_activate_callback),
	(bonobo_mime_action_callback),
	(bonobo_mime_action_menu_data_destroy_callback),
	(can_handle_multiple_files), (add_bonobo_menu_ui_and_verbs),
	(get_bonobo_menu_verb_names), (has_file_in_list),
	(get_unique_files), (reset_bonobo_mime_actions_menu),
	(real_update_menus):
	* src/file-manager/athena-directory-view-ui.xml:

	Add the ability to have mime-type-sensitive context menus.

2002-11-07  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-customization-data.c:
	* icons/chit_frame.png:
	Make chit alpha blended. New image from Jens Lautenbacher <jtl@schlund.de>.

2002-11-06  Kjartan Maraas  <kmaraas@gnome.org>

	* src/athena-file-management-properties.glade: Fix some bad
	english.
	
2002-11-07  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	* libathena-private/athena-icon-canvas-item.c:
	(draw_or_measure_label_text), (create_label_layout),
	(get_label_layout), (athena_icon_canvas_item_event):

	In single click mode use a hand cursor instead of underlining.

	* src/athena-window.c: (create_view_as_menu_item):
	* src/Athena_shell.server.in:

	Add mnemonics to the 'View as List' and 'View as Icons' entries.

	* icons/Makefile.am:
	* src/athena-window-manage-views.c: (compute_title),
	(athena_window_update_icon), (set_displayed_location),
	(viewed_file_changed_callback), (location_has_really_changed),
	(title_changed_callback):
	* src/athena-window-private.h:
	* src/athena-window.c: (icons_changed_callback),
	(athena_window_instance_init):

	Use the real file icons as window border icons in the athena window
	and file properties dialog. Use a special desktop icon and title in
	the Ctrl-Alt-Tab window.

2002-11-06  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-program-chooser.c:
	* libathena-private/athena-program-choosing.c:
	* libathena-private/athena-recent.h:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	Fix up includes.

2002-11-06  Anders Carlsson  <andersca@gnu.org>

	* configure.in:
	* cut-n-paste-code/Makefile.am:
	* cut-n-paste-code/libegg/Makefile.am:
	* cut-n-paste-code/libegg/egg-recent-item.c: (egg_recent_item_new),
	(egg_recent_item_free), (egg_recent_item_ref),
	(egg_recent_item_unref), (egg_recent_item_new_from_uri),
	(egg_recent_item_set_uri), (egg_recent_item_get_uri),
	(egg_recent_item_peek_uri), (egg_recent_item_get_uri_utf8),
	(egg_recent_item_get_uri_for_display),
	(egg_recent_item_set_mime_type), (egg_recent_item_get_mime_type),
	(egg_recent_item_set_timestamp), (egg_recent_item_get_timestamp),
	(egg_recent_item_get_groups), (egg_recent_item_in_group),
	(egg_recent_item_add_group), (egg_recent_item_remove_group),
	(egg_recent_item_set_private), (egg_recent_item_get_private),
	(egg_recent_item_get_type):
	* cut-n-paste-code/libegg/egg-recent-item.h:
	* cut-n-paste-code/libegg/egg-recent-model.c:
	(egg_recent_model_string_match), (egg_recent_model_write_raw),
	(egg_recent_model_delete_from_list),
	(egg_recent_model_add_new_groups), (egg_recent_model_update_item),
	(egg_recent_model_read_raw), (parse_info_init), (parse_info_free),
	(push_state), (pop_state), (peek_state), (start_element_handler),
	(list_compare_func_mru), (list_compare_func_lru),
	(end_element_handler), (text_handler), (error_handler),
	(egg_recent_model_enforce_limit), (egg_recent_model_sort),
	(egg_recent_model_group_match), (egg_recent_model_filter),
	(egg_recent_model_monitor_list_cb),
	(egg_recent_model_monitor_list),
	(egg_recent_model_changed_timeout), (egg_recent_model_monitor_cb),
	(egg_recent_model_monitor), (egg_recent_model_set_limit_internal),
	(egg_recent_model_read), (egg_recent_model_write),
	(egg_recent_model_open_file), (egg_recent_model_lock_file),
	(egg_recent_model_unlock_file), (egg_recent_model_finalize),
	(egg_recent_model_set_property), (egg_recent_model_get_property),
	(egg_recent_model_class_init), (egg_recent_model_limit_changed),
	(egg_recent_model_expiration_changed), (egg_recent_model_init),
	(egg_recent_model_new), (egg_recent_model_add_full),
	(egg_recent_model_add), (egg_recent_model_delete),
	(egg_recent_model_get_list), (egg_recent_model_set_limit),
	(egg_recent_model_get_limit), (egg_recent_model_clear),
	(egg_recent_model_set_filter_mime_types),
	(egg_recent_model_set_filter_groups),
	(egg_recent_model_set_filter_uri_schemes),
	(egg_recent_model_set_sort), (egg_recent_model_changed),
	(egg_recent_model_remove_expired_list),
	(egg_recent_model_remove_expired), (egg_recent_model_get_type):
	* cut-n-paste-code/libegg/egg-recent-model.h:
	* cut-n-paste-code/libegg/egg-recent-vfs-utils.c:
	(make_valid_utf8), (istr_has_prefix), (str_has_prefix),
	(uri_is_local_scheme), (handle_trailing_slashes),
	(make_uri_canonical), (format_uri_for_display),
	(egg_recent_vfs_format_uri_for_display),
	(is_valid_scheme_character), (has_valid_scheme),
	(escape_high_chars), (make_uri_from_input_internal),
	(egg_recent_vfs_make_uri_from_input),
	(make_uri_canonical_strip_fragment), (uris_match),
	(egg_recent_vfs_uris_match), (egg_recent_vfs_get_uri_scheme):
	* cut-n-paste-code/libegg/egg-recent-vfs-utils.h:
	* cut-n-paste-code/libegg/egg-screen-exec.c:
	(egg_screen_exec_display_string), (egg_screen_exec_environment),
	(egg_screen_execute_async), (egg_screen_execute_shell),
	(egg_screen_execute_command_line_async):
	* cut-n-paste-code/libegg/egg-screen-exec.h:
	* cut-n-paste-code/libegg/egg-screen-help.c:
	(egg_help_display_on_screen),
	(egg_help_display_with_doc_id_on_screen),
	(egg_help_display_desktop_on_screen),
	(egg_help_display_uri_on_screen):
	* cut-n-paste-code/libegg/egg-screen-help.h:
	* cut-n-paste-code/libegg/egg-screen-url.c:
	(egg_url_show_on_screen):
	* cut-n-paste-code/libegg/egg-screen-url.h:
	* cut-n-paste-code/libegg/eggtreemultidnd.c:
	(egg_tree_multi_drag_source_get_type),
	(egg_tree_multi_drag_source_row_draggable),
	(egg_tree_multi_drag_source_drag_data_delete),
	(egg_tree_multi_drag_source_drag_data_get), (stop_drag_check),
	(egg_tree_multi_drag_button_release_event), (selection_foreach),
	(path_list_free), (set_context_data), (get_context_data),
	(get_info), (egg_tree_multi_drag_drag_data_get),
	(egg_tree_multi_drag_motion_event),
	(egg_tree_multi_drag_button_press_event),
	(egg_tree_multi_drag_add_drag_support):
	* cut-n-paste-code/libegg/eggtreemultidnd.h:
	* cut-n-paste-code/libegg/update-from-egg.sh:
	* libathena-private/Makefile.am:
	* libathena-private/egg-recent-item.c:
	* libathena-private/egg-recent-item.h:
	* libathena-private/egg-recent-model.c:
	* libathena-private/egg-recent-model.h:
	* libathena-private/egg-recent-vfs-utils.c:
	* libathena-private/egg-recent-vfs-utils.h:
	* libathena-private/egg-screen-exec.c:
	* libathena-private/egg-screen-exec.h:
	* libathena-private/egg-screen-help.c:
	* libathena-private/egg-screen-help.h:
	* libathena-private/egg-screen-url.c:
	* libathena-private/egg-screen-url.h:
	* libathena-private/eggtreemultidnd.c:
	* libathena-private/eggtreemultidnd.h:
	* libathena-private/athena-program-chooser.c: (help_cb):
	* libathena-private/update-from-egg.sh:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-list-model.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-properties-window.c: (help_button_callback):
	* src/file-manager/update-from-egg.sh:
	* src/athena-bookmarks-window.c:
	(athena_bookmarks_window_response_callback):
	* src/athena-property-browser.c: (help_button_callback):
	* src/athena-window-menus.c:
	(help_menu_athena_manual_callback):
	Move libegg stuff to cut-n-paste-code and update to the latest
	egg versions.

2002-11-05  Dave Camp  <dave@ximian.com>

	* test/Makefile.am:
	* test/test.c:
	* test/test.h: Removed property widget tests. 

2002-11-05  James Willcox  <jwillcox@gnome.org>

	* libathena-private/Makefile.am:
	* libathena-private/athena-recent.[ch]:
	* src/file-manager/Makefile.am:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_launch_application), (fm_directory_view_init),
	(fm_directory_view_destroy):

	Only make an EggRecentModel once, instead of for every new window.
	Moved egg-recent*.[ch] into libathena-private

2002-11-05  James Willcox  <jwillcox@gnome.org>

	* libathena-private/apps_athena_preferences.schemas:
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-sidebar-functions.c:
	(sidebar_get_sidebar_panel_view_identifiers),
	(athena_sidebar_get_all_sidebar_panel_view_identifiers):
	* libathena-private/athena-sidebar-functions.h:
	* src/athena-window.c: (athena_window_instance_init),
	(athena_window_set_up_sidebar), (add_sidebar_panels):

	Removed all the stuff that was used to show/hide sidebars.

2002-11-05  Diego Gonzalez  <diego@pemas.net>

	* po/POTFILES.in: remove athena-preferences-dialog.c and
	athena-theme-selector.c

	* src/Makefile.am: remove athena-preferences-dialog.[c-h] and 
	athena-theme-selector.[c-h] from the built, as they are not used anymore

	* src/athena-window-menus.c: remove athena-preferences-dialog.h
	from the includes

2002-11-04  Diego GonzÃ¡lez  <diego@pemas.net>

	* src/athena-window-toolbars.c: (throbber_set_throbbing):
	Use bonobo_pbclient_set_value_async instead of 
	eel_bonobo_pbclient_set_value_async.

	* configure.in: require latest libbonobo

2002-11-04  Alexander Larsson  <alexl@redhat.com>

	* components/throbber/athena-throbber.c: (get_bonobo_properties),
	(athena_throbber_instance_init), (athena_throbber_expose),
	(athena_throbber_class_init),
	(athena_throbber_accessible_get_type):
	* src/athena-window-private.h:
	* src/athena-window-toolbars.c: (throbber_created_callback):
	* src/athena-window.c: (athena_window_unrealize):

	Remove click-on-throbber. Patch by Jan Arne Petersen <jpetersen@gnome-de.org>
	
=== athena 2.1.2 ===

2002-10-31  Dave Camp  <dave@ximian.com>

	* NEWS: Updated.
	* configure.in: Removed music-view-related stuff, updated to
	2.1.2.

2002-10-31  Dave Camp  <dave@ximian.com>

	* components/Makefile.am (SUBDIRS): Removed the music view.

2002-10-31  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-directory-background.c:
	(athena_file_background_get_default_settings),
	(athena_file_background_is_set), (background_changed_callback),
	(background_reset_callback):
	* libathena-private/athena-dnd.c: 
	(athena_drag_drop_background_ask):
	* libathena-private/athena-dnd.h:
	* libathena-private/athena-global-preferences.h:
	* libathena-private/athena-icon-dnd.c: 
	(get_background_drag_action),
	(receive_dropped_color), (receive_dropped_tile_image),
	(athena_icon_container_receive_dropped_icons),
	(drag_data_received_callback):  Set the background globally by 
	default.  On a right-drag from the property dialog, pop up a 
	context menu asking to set it globally or for that directory.

	* libathena-private/apps_athena_preferences.schemas:
	* src/athena-information-panel.c: (athena_information_panel_init),
	(athena_information_panel_finalize),
	(information_panel_has_background),
	(athena_information_panel_create_context_menu),
	(athena_information_panel_read_defaults),
	(athena_information_panel_theme_changed),
	(receive_dropped_uri_list), (receive_dropped_color),
	(athena_information_panel_drag_data_received),
	(background_settings_changed_callback),
	(background_reset_callback),
	(athena_information_panel_update_appearance): Take the default
	background from gconf, handle global vs. per-directory
	backgrounds.

	* athena-property-browser.c: (element_clicked_callback): Add 
	ASK to the list of actions.

2002-10-31  Bastien Nocera  <hadess@hadess.net>

	* src/Makefile.am: upd
	* src/athena-server-connect.c: (create_desktop), (update_icon),
	(main): update for the icon
	* src/athena-server-connect.desktop.in: update icon
	* src/network-scheme.desktop.in: added
	
2002-10-31  Dave Camp  <dave@ximian.com>

	* src/Makefile.am (bin_PROGRAMS): Removed the extra 'athena'.

2002-10-31  Dave Camp  <dave@ximian.com>

	* Makefile.am:
	* athena-file-management-properties.desktop.in:

	* src/athena-file-management-properties-main.c:
	* src/athena-file-management-properties.c:
	* src/athena-file-management-properties.h: New preferences
	dialog.
	* src/athena-window-menus.c: (preferences_respond_callback),
	(preferences_callback): Use the new prefs dialog.
	* src/athena-window.c: (athena_window_hide_location_bar),
	(athena_window_show_location_bar),
	(athena_window_hide_toolbar), (athena_window_show_toolbar),
	(athena_window_hide_sidebar), (athena_window_show_sidebar),
	(athena_window_hide_status_bar),	
	(athena_window_show_status_bar): As things are toggled, save
	them as the default for new windows.

	Patch from Jan Arne Petersen <jpetersen@uni-bonn.de>.

2002-10-31  Bastien Nocera  <hadess@hadess.net>

	* icons/Makefile.am: upd
	* icons/athena-server-connect.png: added
	* src/Makefile.am: upd
	* src/athena-server-connect.c: added
	* src/athena-server-connect.desktop.in: added
	* src/athena-server-connect.glade: added (This all still needs some
	work)

2002-10-31  Anders Carlsson  <andersca@gnu.org>

	* configure.in: Require gtk+ 2.1.1

	* libathena-private/athena-directory-background.c:
	(screen_size_changed), (remove_connection),
	(desktop_background_realized):
	* src/athena-desktop-window.c:
	(athena_desktop_window_screen_size_changed), (unrealize),
	(realize):
	Add support for the size_changed signal so that the desktop
	window will resize correctly.
	
2002-10-26  Thomas Vander Stichele <thomas@apestaart.org>

  	* components/sample/Athena_View_sample.server.in.in:
	  fix location of bonobo FAQ

2002-10-25  James Willcox  <jwillcox@gnome.org>

	* components/notes/Athena_View_notes.server.in.in:
	* libathena-private/athena-mime-actions.c:
	(athena_mime_has_any_components_for_file_extended),
	(athena_mime_has_any_components_for_file):
	* libathena-private/athena-mime-actions.h:
	* libathena-private/athena-program-chooser.c:
	(repopulate_program_list):
	* libathena-private/athena-program-choosing.c:
	(choose_component_callback):
	* src/file-manager/fm-properties-window.c: (clear_bonobo_pages),
	(refresh_bonobo_pages), (properties_window_file_changed_callback),
	(bonobo_page_error_message), (bonobo_page_activate_callback),
	(append_bonobo_pages):

	* Activate the bonobo property pages asynchronously
	* Hide the bonobo property pages from the component chooser
	* Slightly modify the notes sidebar to also work as a property page
	* Handle changes in the file type (add/remove pages)

2002-10-24  Dennis M. Cranston  <dennis_cranston@yahoo.com>

	* src/file-manager/fm-properties-window.[ch]:
	Properties dialog fixes for #95836. 

2002-10-24  Alexander Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	* components/image_properties/.cvsignore:
	* components/image_properties/Makefile.am:
	* components/image_properties/Athena_View_image_properties.server.in.in:
	* components/image_properties/libmain.c: 
	* components/image_properties/athena-image-properties-view.[ch]:
	* configure.in:

	Implement image properties page
	
	Patch from James Willcox  <jwillcox@gnome.org>
	
	* libathena-private/athena-mime-actions.[ch]:
	Add athena_mime_get_all_components_for_file_extended
	
	* src/file-manager/fm-properties-window.c:
	Plug-in property pages.

2002-10-24 Stephen Browne <stephen.browne@sun.com>

	* libathena-private/athena-file-operations.c:
	(athena_file_operations_copy_move): 

	filter out invalid URIs

2002-10-23  James Willcox  <jwillcox@gnome.org>

	* components/emblem/athena-emblem-view.c:
	(emblem_widget_sort_func), (athena_emblem_view_populate):
	
	Correctly sort the emblems

2002-10-21  James Willcox  <jwillcox@gnome.org>

	* components/emblem/athena-emblem-view.c:
	(athena_emblem_view_button_press_cb),
	(athena_emblem_view_delete_cb), (rename_dialog_response_cb),
	(create_rename_emblem_dialog), (athena_emblem_view_rename_cb),
	(create_emblem_widget_with_pixbuf), (create_add_emblems_dialog),
	(athena_emblem_view_drag_received_cb):
	* libathena-private/athena-emblem-utils.c:
	(athena_emblem_can_remove_emblem),
	(athena_emblem_can_rename_emblem),
	(athena_emblem_remove_emblem), (athena_emblem_rename_emblem):
	* libathena-private/athena-emblem-utils.h:
	* libathena-private/athena-icon-factory.c:
	(athena_icon_factory_remove_from_cache):
	* libathena-private/athena-icon-factory.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy):

	Add a popup menu to the emblems in the emblem sidebar that allows
	renaming and removing of emblems.

2002-10-21  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (lay_down_icons_horizontal):
	Make non-compact layout gridded.

2002-10-20  Dave Camp  <dave@ximian.com>

	* src/athena-location-bar.c (try_to_expand_path): Don't complete
	the filename if there is a trailing slash.  Patch from Manuel Clos
	<llanero@jazzfree.com>.  Fixes #90652.
	
2002-10-19  Dave Camp  <dave@ximian.com>

	* configure.in: Take out -DBONOBO_DISABLE_DEPRECATED until the 
	make_registration_id api is worked out.

2002-10-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c (ready_callback_key_compare):
	More casts.

2002-10-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (athena_file_compare_for_sort_internal): 
	* src/file-manager/fm-icon-view.c (fm_icon_view_compare_files): 
	* src/file-manager/fm-icon-container.c (get_icon_view):
	Remove type checks, was showing up in profiles.

	* libathena-private/athena-directory.c (athena_directory_notify_files_added):
	Don't leak directory_uri

2002-10-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c:
	The HP-UX compiler is an anal retentive bastard.

2002-10-16  Alex Duggan  <aldug@astrolinux.com>
	* configure.in
   require gnome-desktop >= 2.1.0 (fixes #95979)
   
2002-10-16  Alexander Larsson  <alexl@redhat>

	* libathena-private/athena-dnd.h:
	Add application/x-rootwindow-drop.
	
	* libathena-private/athena-icon-private.h:
	* libathena-private/athena-icon-container.[ch]:
	Moved dnd init/fini to realize/unrealize.
	Add athena_icon_container_set/get_is_desktop().
	
	* libathena-private/athena-icon-dnd.[ch]:
	Implement rootwindow drops.
	
	* src/file-manager/fm-desktop-icon-view.c:
	call athena_icon_container_set_is_desktop()

2002-10-15  Bastien Nocera  <hadess@hadess.net>

        * src/athena-shell-ui.xml: add BackSpace as a key shortcut for
	"Go Up" (like Windows does)

=== athena 2.1.1 ===

2002-10-14  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Updated
	
	* configure.in:
	Bump version to 2.1.1
	Require libgnomeui 2.1.1 and eel 2.1.1, pango 1.1.2

2002-10-11  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_destroy): Set recent_model to NULL rather than
	model.

2002-10-10  James Willcox  <jwillcox@gnome.org>

	* src/file-manager/fm-directory-view.c: (fm_directory_view_init):
	Set the recent-files limit to 0, since we aren't displaying the
	list at all.

2002-10-10  Dave Camp  <dave@ximian.com>

	* src/file-manager/Makefile.am: Added egg-recent files.  
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_launch_application), (fm_directory_view_init),
	(fm_directory_view_destroy): Add files to the EggRecentModel when
	launching apps.

	Patch from James Willcox <jwillcox@gnome.org>
	
2002-10-10  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-theme.c (theme_list_prepend):
	If no preview pixmap found. ignore theme. Fixes crash for some crap theme i had installed.

2002-10-10  Alexander Larsson  <alexl@redhat.com>
	
	* libathena-private/athena-emblem-utils.c (athena_emblem_install_custom_emblem):
	Touch the theme toplevel dir when finished installing emblem.

2002-10-07  James Willcox  <jwillcox@gnome.org>

	* components/emblem/Makefile.am:  define DATADIR
	* components/emblem/athena-emblem-view.c:
	(create_emblem_widget_with_pixbuf), (create_emblem_widget),
	(athena_emblem_view_populate):  Add erase emblem
	* configure.in:  Remove data/emblems
	* data/Makefile.am:  ditto
	* icons/Makefile.am:  install erase.png

2002-10-05  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-canvas-item.c:
	(draw_or_measure_label_text): Draw the selection rectangle in the
	active color if the widget doesn't have focus.
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_class_init): Remove highlight_color
	property, always use base[SELECTED/ACTIVE].  Theme authors can set
	base for this widget only if they want.
	(update_selected): New function to refresh the selected icons.
	(handle_focus_in_event), (handle_focus_out_event): Refresh the
	selected icons.
	(athena_icon_container_instance_init): Connect to
	focus_out_event.
	(athena_icon_container_get_label_color_and_gc): If the container
	isn't focused, return the ACTIVE values.
	(setup_label_gcs): Setup ACTIVE values in addition to HIGHLIGHT
	values.
	(athena_icon_container_theme_changed): Always use the base color
	for the highlight rectangle
	* libathena-private/athena-icon-private.h: Remove the unused
	highlight_color member.

2002-10-05  Dave Camp  <dave@ximian.com>

	* icons/crux_eggplant/crux_eggplant.xml:
	* icons/crux_teal/crux_teal.xml:
	* icons/default/default.xml:
	* icons/gnome/gnome.xml:
	* icons/sierra/sierra.xml: Removed newly obsoleted theme elements.

2002-10-05  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_class_init): Install gtk style properties
	for the light/dark info colors, selection box color/alpha, and
	highlight color/alpha.
	(start_rubberbanding): Take the selection box color/alpha from the
	gtk theme instead of the athena theme.
	(setup_label_gcs): Take the light/dark info color from the gtk
	theme.
	(athena_icon_container_theme_changed): Take the highlight
	color/alpha from the gtk theme, and don't use the athena
	theme to find the text selection frame image (this wasn't 
	being themed anyway).

2002-10-05  Dave Camp  <dave@ximian.com>

	* icons/crux_eggplant/crux_eggplant.xml:
	* icons/crux_teal/crux_teal.xml:
	* icons/default/default.xml:
	* icons/gnome/gnome.xml:
	* icons/sierra/sierra.xml:
	* icons/tahoe/tahoe.xml:  Remove unused theme elements.
	* configure.in:
	* icons/crux_eggplant/Makefile.am:
	* icons/crux_teal/Makefile.am:
	* icons/default/Makefile.am:
	* icons/gnome/Makefile.am:
	* icons/sierra/Makefile.am:
	* icons/tahoe/Makefile.am: Remove unused icons and backgrounds
	from the build.
	* libathena-private/athena-theme.c: (has_theme_xml),
	(theme_get_themes_for_location): Check for the existence of
	theme.xml rather than an i-directory image.

2002-10-05  Dave Camp  <dave@ximian.com>
	
	* libathena-private/athena-directory-background.c:
	(initialize_background_from_settings),
	(athena_file_background_get_default_settings): Don't read
	settings from the athena theme.  Return the globally configured
	background if it is set, otherwise return empty settings (in which
	case the EelBackground will use colors from the gtk theme).
	(athena_file_background_read_desktop_settings):
	(athena_file_background_write_desktop_settings): Don't read
	defaults from the theme.
	(athena_file_background_write_desktop_default_settings): Just
	unset the desktop gconf keys.
	(athena_file_background_is_set),
	(athena_file_background_matches_default_settings): Compare
	against the globally configured background rather than the theme
	settings.
	(athena_connect_background_to_file_metadata): Respond to changes
	in the globally configured background.
	(athena_connect_desktop_background_to_file_metadata),
	(background_is_desktop): Use a boolean value to identify the
	desktop, instead of the theme_source.  *
	libathena-private/athena-global-preferences.h: *
	src/file-manager/fm-desktop-icon-view.c:
	(reset_background_callback): Removed the code to unset gconf keys,
	this has been moved to
	athena_file_background_write_desktop_default_settings.  Reset
	the EelBackground.  
	* libathena-private/apps_athena_preferences.schemas: Add the
	background configuration keys.

2002-10-04  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require pango 1.1.1 (really HEAD, but...)
	
2002-10-04  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	* libathena-private/athena-icon-container.c:
	Use PANGO_WRAP_WORD_CHAR. Requires pango HEAD.

2002-10-04  James Willcox  <jwillcox@gnome.org>

	* components/emblem/athena-emblem-view.h:  Added missing file.

2002-10-04  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-emblem-utils.[ch]:
	New common utils for emblems

	* components/emblem/athena-emblem-view.c:
	* libathena-private/athena-icon-factory.c:
	* src/file-manager/fm-properties-window.c:
	* src/athena-property-browser.c:
	Use the common emblem utils.

	REQUIRES libgnomeui HEAD
	
2002-10-04  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.[ch]:
	Add display_name argument to athena_icon_factory_get_pixbuf_for_icon
	and athena_icon_factory_get_pixbuf_from_name.
	
	* libathena-private/athena-bookmark.c:
	* libathena-private/athena-icon-container.c:
	* src/athena-sidebar-title.c:
	Fix up according to change above
	
	* components/emblem/Makefile.am:
	* components/emblem/Athena_View_emblem.server.in.in:
	* components/emblem/libmain.c: (emblem_shlib_make_object):
	* components/emblem/athena-emblem-view-iids.h:
	* components/emblem/athena-emblem-view.c:
	New emblem sidebar from James Willcox <jwillcox@gnome.org>,
	with some changes by me.

2002-10-02  James Willcox  <jwillcox@gnome.org>

	* components/Makefile.am:  Added emblems component
	* configure.in:  same

2002-10-02  Mark McLoughlin  <mark@skynet.ie>

	* acconfig.h: define HAVE_GTK_MULTIHEAD for
	egg-screen-exec methods.

	* configure.in: require gtk 2.1.0 and don't
	define HAVE_GTK_MULTIHEAD.

	* libathena-private/athena-multihead-hacks.h: kill.

	* libathena-private/athena-directory-background:
	(make_root_pixmap), (set_root_pixmap): use
	 gdk_screen_get_display instead of assuming the default
	display.

	* src/athena-shell.c: (restore_one_window_callback):
	add backwards compat support for sessions without
	a screen number.

2002-10-02  Mark McLoughlin  <mark@skynet.ie>

	* libathena-private/athena-program-choosing.c:
	(athena_launch_application_from_command):
	s/eel_gnome_screen_exec/eel_gnome_exec..._on_screen/g

	* src/file-manager/fm-desktop-icon-view.c:
	(new_terminal_callback): ditto.

2002-10-02  Mark McLoughlin  <mark@skynet.ie>

	* libathena-private/Makefile.am:
	* libathena-private/egg-screen-help.[ch]:
	* libathena-private/egg-screen-url.[ch]:
	add the multiscreen variants of gnome-help from libegg.

	* libathena-private/athena-multihead-hacks.h: add
	gtk_window_get_screen.

	* libathena-private/athena-program-chooser.c:
	(help_cb): use egg_screen_help_display_desktop and use
	the chooser window as the transient parent for the error
	dialog.

	* src/athena-bookmarks-window.c:
	(athena_bookmarks_window_response_callback): use
	egg_screen_help_display_desktop.

	* src/athena-preferences-dialog.c: (preferences_show_help):
	use egg_screen_help_display_desktop and use the prefs dialog
	as the transient parent for the error dialog rather than
	the help button.

	* src/athena-property-browser.c: (help_button_callback):
	use egg_screen_help_display_desktop.

	* src/athena-window-menus.c:
	(help_menu_athena_manual_callback): use
	egg_screen_help_display_desktop and use the AthenaWindow as
	the transient parent for the error dialog.

2002-10-02  Mark McLoughlin  <mark@skynet.ie>

	* libathena-private/athena-directory-background.c:
	(make_root_pixmap), (set_root_pixmap): don't pass
	a screen number arg, pass a GdkScreen instead. Also,
	fix bogus use of the default root window.
	(image_loading_done_callback): update.

2002-10-02  Mark McLoughlin  <mark@skynet.ie>

	* libathena-private/athena-icon-dnd.c:
	(athena_icon_dnd_set_stipple): ref the new stipple
	before unrefing the old.

	* src/file-manager/fm-desktop-icon-view.c:
	(icon_container_set_workarea): fix up sanity check.

2002-10-02  Mark McLoughlin  <mark@skynet.ie>

	* configure.in: check for gtk with multihead
	support and define GTK_MULTIHEAD.

	* components/tree/athena-tree-view.c:
	(got_activation_uri_callback): launch applications on the
	correct screen.

	* libathena-private/Makefile.am: add egg-screen-exec.[ch]
	to the build.

	* libathena-private/athena-directory-background.c:
	Make sure we're drawing the background on the correct
	screen.

	* libathena-private/athena-dnd.[ch]: (athena_drag_init),
	(athena_drag_finalize): move the stipple from here into
	icon-dnd, where its actually used.

	* libathena-private/athena-icon-canvas-item.c:
	(draw_stretch_handles): create the stipple on the correct
	screen.

	* libathena-private/athena-icon-container.c:
	(realize): create the stipple here, but use eel_stipple
	instead of homebrew.

	* libathena-private/athena-icon-dnd.c:
	(athena_icon_dnd_set_stipple): impl changing the stipple.

	* libathena-private/athena-multihead-hacks.h: impl
	A set of hacks to allow building with gtk+ 2.0.x and
	not have loads of #ifdef HAVE_GTK_MULTIHEAD.

	* libathena-private/athena-program-chooser.c:
	Launch the mime capplet on the correct screen.
	
	* libathena-private/athena-program-choosing.c:
	Implement launching apps on the correct screen.

	* src/file-manager/fm-desktop-icon-view.c:
	(icon_container_set_workarea), (net_workarea_changed),
	(desktop_icon_view_property_filter),
	(fm_desktop_icon_view_finalize), (unrealized_callback),
	(realized_callback), (fm_desktop_icon_view_init),
	(new_terminal_callback), (new_launcher_callback),
	(change_background_callback), (volume_ops_callback):
	* src/file-manager/fm-directory-view.c: (edit_launcher),
	(edit_launcher_callback), (new_launcher_callback),
	(run_script_callback), (create_popup_menu), (activate_callback),
	(fm_directory_view_move_copy_items):
	* src/file-manager/fm-properties-window.c:
	(create_properties_window), (fm_properties_window_present):

	* src/athena-application.c:
	(athena_application_create_desktop_windows): create a desktop
	window on every screen.
	(athena_application_create_window): realize the window on
	the given screen.
	(volume_mounted_callback): open a new window on the default
	screen when a new volume is mounted.

	* src/athena-desktop-window.c:
	(athena_desktop_window_new): realize on the correct screen
	using the dimensions of said screen.
	(realize), (unrealize): set and unset ATHENA_DESKTOP_WINDOW_ID
	on the RootWindow on the correct screen on realize and unrealize.
	(set_wmspec_desktop_hint), (set_desktop_window_id): use
	gdk_property_change.

	* src/athena-preferences-dialog.c:
	(athena_preferences_dialog_show): show the dialog on the correct
	screen.

	* src/athena-property-browser.c:
	(athena_property_browser_new): realize on the correct screen.
	(athena_property_browser_show): use a weak pointer instead
	of destroy handler crack.

	* src/athena-shell.c:
	(open_window): open on the default screen.
	(save_window_states), (restore_one_window_callback): save
	and restore screen info across restart.

	* src/athena-sidebar.c: (athena_sidebar_create_context_menu):
	Pop the context menu up on the correct screen.

	* src/athena-window-menus.c: bring everything up on the
	correct screen.

	* src/athena-window.c:
	(athena_window_size_request): use the dimensions of the screen
	upon which the window is realized.

2002-10-01  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c:
	Try to avoid flashing when moving the rename widget.

2002-09-30  Narayana Pattipati  <narayana.pattipati@wipro.com>

        * src/file-manager/fm-desktop-icon-view.c: Unescape the media path so
        that athena link is removed properly when it has special characters
        like #.

        * libathena-private/athena-link-desktop-file.c: Escape the media
        path so that media name is created properly when it has special
        characters like #.

2002-09-30  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c (real_update_menus):
	Make the delete accelerator <Ctrl>t, as otherwise it overrides
	the one in the rename widget (and others).

	* src/file-manager/athena-directory-view-ui.xml:
	Add a keysym "Delete" to the trash accel.

2002-09-30  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_get_icon_rectangle):
	Do i2w conversion

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_start_renaming_selected_item):
	Correct rename widget placement
	
2002-09-30  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c: (renaming_icon_callback):
	Correctly do the rename ui op merging

2002-09-30  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c (compute_text_rectangle):
	Fix text rect zoom handling. Fixes redraw issues at 75%.

=== athena 2.1.0 ===

2002-09-27  Dave Camp  <dave@ximian.com>

	* src/athena-window-manage-views.c: #include
	<libathena-private/athena-theme.h>.
	* NEWS: Updated.

2002-09-27  Alexander Larsson  <alexl@redhat.com>

	* configure.in:
	Require eel 2.1.0, libgnomeui 2.1.0
	Bump version to 2.1.0

	* libathena-private/Makefile.am:
	* libathena-private/gnome-icon-lookup.[ch]:
	* libathena-private/gnome-thumbnail-pixbuf-utils.c:
	* libathena-private/gnome-thumbnail.[ch]:
	Removed. Moved to libgnomeui.
	
	* libathena-private/athena-icon-factory.[ch]:
	* libathena-private/athena-link-desktop-file.c:
	Update to new APIs.

2002-09-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-find-icon-image.c:
	* libathena-private/athena-find-icon-image.h:
	* libathena-private/athena-thumbnails-jpeg.c:
	* libathena-private/athena-thumbnails-jpeg.h:
	* libathena-private/athena-thumbnails.c:
	Remove unused files.

2002-09-26  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.[ch]:
	Update to new canvas
	use DITHER_NORMAL instead of DITHER_MAX for performance on non-24bit
	and remote.
	* libathena-private/athena-icon-container.[ch]:
	* libathena-private/athena-icon-dnd.[ch]:
	* libathena-private/athena-icon-private.h:
	Update to new canvas and rename widget.
	
	* src/athena-sidebar-title.c:
	Build fix.

2002-09-23  Dave Camp  <dave@ximian.com>

	* src/athena-side-pane.c: (switch_page_callback): Removed the
	current image indicator.
	(athena_side_pane_init), (athena_side_pane_destroy): Put a
	tooltip on the close button.
	(athena_side_pane_show_panel): New function.
	(shortcut_clicked_callback),
	(create_shortcut), (athena_side_pane_set_panel_image): Take a
	GdkPixbuf instead of a GtkImage.  Create a shortcut on the side
	pane for panels with images.
	* src/athena-side-pane.h:
	* src/athena-window-manage-views.c: (set_side_panel_image): Pass
	a pixbuf rather than a GtkImage.

2002-09-22  Dave Camp  <dave@ximian.com>

	* src/athena-side-pane.h:
	* src/athena-side-pane.c: (menu_detach_callback),
	(athena_side_pane_destroy), (athena_side_pane_init): Attach
	and detach the menu widget.
	(athena_side_pane_init), (update_current_image),
	(switch_page_callback), (athena_side_pane_set_panel_image):
	Allow the user to set images for each panel.
	(athena_side_pane_add_panel), (athena_side_pane_remove_panel):
	Added preconditions, use GtkImageMenuItem instead of GtkMenuItem
	for panel menu items.
	* src/athena-window-manage-views.c: (set_side_panel_image),
	(side_panel_image_changed_callback), (connect_side_panel),
	(view_loaded_callback): Listen to the "tab_image" property on side
	panels, and update the side pane with the proper images.
	* src/athena-window-private.h:
	* src/athena-window.c: (side_panel_set_open),
	(side_pane_switch_page_callback),
	(athena_window_set_up_sidebar): Set the "close" property of
	panels as they are shown and hidden.

2002-09-22  Dave Camp  <dave@ximian.com>

	* src/athena-side-pane.h: 
	* src/athena-side-pane.c: (switch_page_callback),
	(athena_side_pane_class_init): Added a switch_page signal to the
	side pane.
	(select_button_press_callback),
	(select_button_key_press_callback), (menu_deactivate_callback),
	(athena_side_pane_init): Depress the menu button while the menu
	is popped up.

2002-09-21  Dave Camp  <dave@ximian.com>

	* src/athena-window.c (athena_window_tear_down_sidebar): Set
	window->information_panel to NULL.

2002-09-21  Dave Camp  <dave@ximian.com>

	* configure.in:
	* icons/Makefile.am:
	* icons/crux_eggplant/Makefile.am:
	* icons/crux_eggplant/crux_eggplant.xml:
	* icons/crux_teal/Makefile.am:
	* icons/crux_teal/crux_teal.xml:
	* icons/default/default.xml:
	* icons/gnome/Makefile.am:
	* icons/gnome/gnome.xml:
	* icons/sierra/sierra.xml: Removed sidebar_tab_pieces from the
	Makefiles and theme definitions.
	* src/athena-sidebar.c: 
	* src/athena-sidebar.h: Removed.

2002-09-21  Dave Camp  <dave@ximian.com>

	* src/athena-sidebar-title.c: Removed #include
	"athena-sidebar.h".

2002-09-21  Dave Camp  <dave@ximian.com>

	* src/athena-shell-ui.xml: Added F9 as an accelerator for Show
	Hide Sidebar, for consistency with mozilla.

2002-09-21  Dave Camp  <dave@ximian.com>

	* src/athena-side-pane.c:
	* src/athena-side-pane.h: New files, container for the side
	panels.
	* src/athena-information-panel.c:
	* src/athena-information-panel.h: Moved athena-sidebar.[ch] here,
	converted it into just another panel, instead of a container.
	* src/Makefile.am: Build athena-information-panel.[ch] and
	athena-side-pane.[ch].
	* src/athena-window-manage-views.c: (update_title),
	(update_for_new_location), (handle_view_failure),
	(athena_window_set_sidebar_panels): 
	* src/athena-window-private.h:
	* src/athena-window.h: 
	* src/athena-window.c: (side_pane_close_requested_callback),
	(side_pane_size_allocate_callback), (setup_side_pane_width),
	(athena_window_set_up_sidebar),
	(athena_window_add_sidebar_panel),
	(athena_window_remove_sidebar_panel): Use the new information
	panel and side pane.

2002-09-21  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c:
	Some small performance enhancements

2002-09-20  Padraig O'Briain  <padraig.obriain@sun.com>

	* components/adapter/Makefile.am:
	* components/hardware/Makefile.am:
	* components/history/Makefile.am:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/music/Makefile.am:
	* components/notes/Makefile.am:
	* components/sample/Makefile.am:
	* components/text/Makefile.am:
	* components/throbber/Makefile.am:
	* components/tree/Makefile.am:
	Add CLEANFILES so that make clean deletes $(server_DATA) and
	$(server_DATA).in

2002-09-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/gnome-icon-lookup.c:
	* libathena-private/gnome-thumbnail-pixbuf-utils.c:
	* libathena-private/gnome-thumbnail.c:
	Write docs.

2002-09-19  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c (ICON_NAME_THUMBNAIL_LOADING):
	Correct thumbnail loading icon.

	* libathena-private/athena-file.c (update_info_internal):
	Don't invalidate DISPLAY_NAME for all files, since this will re-load
	file_info making directory loads very slow! As a workaround, only do
	this if file->details->display_name is already set. I don't know
	if this is the correct way though.

2002-09-18  Alexander Larsson  <alexl@redhat.com>

	Merge the new-icon-factory-branch branch to HEAD.
	
2002-09-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/gnome-icon-lookup.c:
	* libathena-private/athena-bookmark.c:
	* src/file-manager/fm-desktop-icon-view.c:
	Final icon naming.

2002-09-18  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-factory.c:
	Compile fixes for gnome-desktop head.

2002-09-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/gnome-icon-lookup.c:
	Also look for generic mimetypes.
	
2002-09-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/gnome-icon-lookup.c:
	Clean up #defines

2002-09-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/gnome-icon-lookup.c (gnome_icon_lookup):
	Look up mime icons before file types.

2002-09-17  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	Added SYSCONFDIR.
	Removed athena-find-icon-image.[ch]
	
	* libathena-private/gnome-icon-lookup.c:
	Add gif to gdk-pixbuf supported list.
	
	* libathena-private/gnome-thumbnail.c:
	Add gif to gdk-pixbuf supported list.
	Thumbnailing scripts
	Fix failed thumbnail directory creation
	
	* libathena-private/athena-directory-async.c: 
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c:
	* libathena-private/athena-file.h:
	* libathena-private/athena-icon-factory.c:
	custom_icon_uri -> custom_icon
	
	* libathena-private/athena-thumbnails.c:
	Write failed files on thumbnail failure.

2002-09-13  Alexander Larsson  <alexl@redhat.com>
	
	* libathena-private/gnome-thumbnail.[ch]:
	const cleanups
	Add gnome_thumbnail_has_uri.
	
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-private.h:
	Clean up TODOs
	
	* libathena-private/athena-icon-factory-private.h:
	Remove athena_icon_factory_remove_by_uri
	
	* libathena-private/athena-icon-factory.c:
	Disable self checks by default
	Fix memory management of cache and fallback_icon
	Remove athena_icon_factory_remove_by_uri
	Clean up old code leftovers
	Use "loading" icon while thumbnailing.
	
	* libathena-private/athena-thumbnails.c:
	Remove some old code
	Reimplement athena_update_thumbnail_file_renamed and
	athena_remove_thumbnail_for_file

2002-09-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/gnome-thumbnail-pixbuf-utils.c:
	Add fast jpeg loading code.
	
	* libathena-private/gnome-icon-lookup.[ch]:
	Add GNOME_ICON_LOOKUP_FLAGS_SHOW_SMALL_IMAGES_AS_THEMSELVES flag.
	
	* libathena-private/gnome-thumbnail.c:
	Threadsafe GnomeThumbnailFactory
	Use fast jpeg loader
	cleanup
	Thumbnail more image formats.
	
	* libathena-private/athena-icon-container.c:
	Don't scale wide but not very tall icons
	
	* libathena-private/athena-icon-factory.[ch]:
	Better handling of scaling with unknown base_size
	Frame thumbnails
	Add ATHENA_ICON_SIZE_THUMBNAIL
	
	* libathena-private/athena-thumbnails.c:
	Don't look for old framed thumbnails.
	We changed thumbnailing system anyway.

2002-09-11  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	* libathena-private/gnome-icon-lookup.c:
	* libathena-private/gnome-icon-lookup.h:
	* libathena-private/gnome-thumbnail-pixbuf-utils.c:
	* libathena-private/gnome-thumbnail.c:
	* libathena-private/gnome-thumbnail.h:
	New files. Destined for libgnomeui eventually.
	
	* libathena-private/athena-icon-factory.c:
	* libathena-private/athena-icon-factory.h:
	* libathena-private/athena-thumbnails.c:
	* libathena-private/athena-thumbnails.h:
	Major rewrite of icon factory and thumbnailing code.
	
	* libathena-private/athena-bookmark.c:
	* libathena-private/athena-bookmark.h:
	* libathena-private/athena-file-private.h:
	* libathena-private/athena-file.c:
	* libathena-private/athena-file.h:
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-private.h:
	* src/file-manager/fm-icon-container.c:
	* src/athena-bookmark-list.c:
	* src/athena-bookmark-parsing.c:
	* src/athena-sidebar-title.c:
	Use the new APIs

2002-09-15  Dave Camp  <dave@ximian.com>

	Fixes bug #88596.
	
	* components/music/athena-music-view.c:
	(set_adjustment_value): New function, blocks the value_changed handler.
	(reset_playtime), (play_status_display): Use set_adjustment_value.
	(athena_music_view_destroy),  (changed_idle_callback),
	(slider_changed_callback): When the value changes and the slider isn't being dragged,
	queue a seek in an idle handler.
	(add_play_controls): Tweak the page size.

2002-09-15  Dave Camp  <dave@ximian.com>

	* src/athena-preferences-dialog.c: Provide accessible
	descriptions for the speed tradeoff items.

2002-09-15  Dave Camp  <dave@ximian.com>

        Fixes bug #89616. 
	
	* libathena-private/athena-directory.c:
	(athena_directory_notify_files_added): If a AthenaFile already
	exists for this file, send a changed notification rather than an
	added notification.
	* libathena-private/athena-directory.h:
	* libathena-private/athena-file.c: (update_info_internal):
	Invalidate the display name.
	
2002-09-10  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c: (realize):
	Removed background-modification code.
	(athena_icon_container_instance_init): Call
	eel_background_set_use_base().

	This fixes the updating problem on theme switches.

2002-09-10  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c: (keyboard_space):
	* src/file-manager/fm-list-view.c: (key_press_callback): Activate
	files on space.

2002-09-09  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c:
	* src/athena-zoom-control.c: Make accessible_parent_class
	variables static.  Patch from padraig.obriain@sun.com.

2002-09-04  Havoc Pennington  <hp@pobox.com>

	* src/file-manager/fm-desktop-icon-view.c (real_update_menus):
	never set "Use default background" item insensitive for the
	desktop.

	* src/file-manager/fm-desktop-icon-view.c
	(reset_background_callback): Just unset the gconf keys for the
	background in order to "use default background", instead of
	getting background from athena theme.

2002-09-04  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-trash-directory.c: (add_volume): 
	Don't start a search for a trash directory if one is already
	running.

2002-08-31  David Bordoley <bordoley@msu.edu>

	* src/athena-shell-ui.xml:
	Added escape keybinding to the stop button (bug 83691)

	* src/file-manager/fm-directory-view.c:
	* src/file-manager/athena-directory-view-ui.xml:
	Removed the "Remove Custom Icon" entry from the view menu 
	and context menu (bug 82117 also sort of takes care of 
	bug 86179). 
	Changed keybinding for "Move to Trash" to delete 
	and for "Delete" to shift+delete (bug 83218 this fixes bug 
	78120 as well).
	Use GTK_STOCK_DELETE in a bunch of dialogs instead of our own string.
	Changed broken link dialog string to "Do you want to move this 
	link to the Trash?" and changed confirming button to 
	"Mo_ve to Trash" to be consistent with the rest of the UI.

2002-08-30  Alexander Larsson  <alexl@redhat.com>

	Branched off Gnome 2.0.x development on the gnome-2-0 branch.

2002-08-29  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-volume-monitor.c (mount_volume_iso9660_add):
	Don't mark loopback mounts as CDROM.

2002-08-29  Alexander Larsson  <alexl@redhat.com>

	* src/athena-application.c (volume_mounted_callback):
	Allow other apps that do their own CD switching to temporary disable
	athena from popping up CD windows by grabbing the
	_ATHENA_DISABLE_MOUNT_WINDOW selection.

=== athena 2.0.6 ===
	
2002-08-28  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	* configure.in:
	Bump version to 2.0.6

2002-08-28  Alexander Larsson  <alexl@redhat.com>

 	* libathena-private/athena-volume-monitor.h: 
	* libathena-private/athena-volume-monitor.c: 
	New functions: athena_volume_copy, athena_volume_free,
	athena_volume_hash, athena_volume_is_equal.
	
	* libathena-private/athena-trash-directory.c:
	AthenaVolumes are not persistant. Don't keep pointers to old
	ones, keep copies instead. 

2002-08-23  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas:
	Correct start_with_sidebar key. Patch from hp@redhat.com

=== athena 2.0.5 ===
	
2002-08-23  Alexander Larsson  <alexl@redhat.com>

	* configure.in: 
	* NEWS:
	Bump to 2.0.5.

2002-08-21  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-factory.c
	(athena_icon_factory_get_icon_for_file): fix
	in-icon svg rendering, also obey thumbnailing
	preferences for svg files (!).

2002-08-20  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-link-desktop-file.c:
	* libathena-private/athena-link-desktop-file.h:
	New function athena_link_desktop_file_local_is_utf8.

	* libathena-private/athena-link.c:
	* libathena-private/athena-link.h:
	New function athena_link_local_is_utf8.
	
	* src/file-manager/fm-desktop-icon-view.c
	(update_desktop_directory):
	Recreate trash and homedir links if they are not in utf8.

2002-08-15  Dave Camp  <dave@ximian.com>

	* libathena/athena-clipboard.c (select_all_callback): Save the 
	source so the idle callback can cancel the weak ref.
	(select_all_idle_callback): Cancel the weak ref so the source
	isn't destroyed twice.
	This should fix #74403.

2002-08-15  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (icon_set_position):
	Work around our strange size allocation problems by always assuming
	the size of fixed_size containers is the size of the screen.
	This fixes the problem where all desktop icons end up in a pile in the
	top left corner on startup.
	We really need to fix our size allocation.

2002-08-14  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c: 
	(athena_icon_container_class_init): Install a frame_text gtk
	style property, so that accessible themes can force the icon
	container to put a frame around unselected text.
	(setup_label_gcs): Use text[SELECTED] for the highlight text
	color, since it is now displayed against base[SELECTED].  If
	frame_text is set, use text[NORMAL] for normal text, since it will
	be displayed against base[NORMAL].
	(athena_icon_container_set_use_drop_shadows): If frame_text is
	set, don't enable drop shadows, but save that they were requested.
	(style_set): Update use_drop_shadows based on whether frame_text
	is set and whether drop shadows were requested.
	(athena_icon_container_theme_changed): Call setup_label_gcs().

	* libathena-private/athena-icon-canvas-item.c: (draw_frame):
	New function.
	(draw_or_measure_label_text): Rearranged for clarity, make it work
	when it is called for draw without being called for measure (ugh).
	Fixed a PangoLayout leak.  If frame_text is set on the icon
	container, draw a background rectangle.
	(draw_label_layout): Don't drop shadow selected text.  Drawing
	with text[SELECTED] on base[SELECTED] should look just fine
	without a drop shadow.
	
	* libathena-private/athena-icon-private.h: Added a
	drop_shadow_requested member.

=== athena 2.0.4 ===
	
2002-08-14  Alexander Larsson  <alexl@redhat.com>

	* NEWS: 
	* configure.in:
	Bump to 2.0.4

2002-08-12  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-dnd.c:
	(athena_drag_default_drop_action_for_icons): Unref target_uri
	before returning when eel_uri_is_trash (target_uri_string).
	* libathena-private/athena-file-operations.c:
	(append_basename): Free the filename returned from 
	gnome_vfs_uri_etract_short_name().
	* libathena-private/athena-theme.c: (attributes_free): Free
	the attributes struct.
	* libathena-private/athena-undo-manager.c: (finalize): Free
	the details struct.
	* src/athena-bookmark-list.c: (append_bookmark_node): Free the
	mime type string.

2002-08-12  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (rename_guts):
	Don't actually change desktop files when renaming and the
	new and old name are the same. This happens in the properties dialog
	when you switch notebook pages and is especially bad for vfolder
	directories.

2002-08-11  Frank Worsley  <fworsley@shaw.ca>

	* libathena-private/athena-file-operations-progress.h:
	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_update),
	(athena_file_operations_progress_destroy), (map_callback),
	(delayed_show_callback), (athena_file_operations_progress_new),
	(athena_file_operations_progress_new_file),
	(athena_file_operations_progress_done),
	(athena_file_operations_progress_pause_timeout),
	(athena_file_operations_progress_resume_timeout):
	use a timeout for showing the progress dialog

	* libathena-private/athena-file-operations.c:
	(create_transfer_dialog), (handle_transfer_vfs_error),
	(handle_transfer_overwrite), (athena_file_operations_copy_move),
	(athena_file_operations_delete), (do_empty_trash):
	modified to support timeout

2002-07-10  Jody Goldberg <jody@gnome.org>

	* libathena-private/athena-directory-async.c
	(mime_db_changed_callback) : if the mime db changes invalidate a pile
	  of stuff for anything that is monitoring file information.
	(athena_directory_monitor_add_internal) : add a mime-db monitor if
	  necessary.

2002-08-09  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-canvas-item.c:
	(draw_label_layout): Don't draw a drop shadow on selected text.
	* libathena-private/athena-icon-container.c: (style_set): Call
	setup_label_gcs().
	(setup_label_gcs): Use the text color from the gtk theme as a
	fallback for the selection text color.
	(athena_icon_container_theme_changed): Make the
	highlight_color_rgba a little bit transparent when falling back to
	the gtk theme.

2002-08-09  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-directory.c
	(call_files_changed_common): Don't add files to the work queue of
	a directory they don't belong to.

	* libathena-private/athena-directory-async.c
	(mime_list_start): Replaced got_directory_count with
	got_mime_list.
	(athena_directory_add_file_to_work_queue): Added a 
	g_return_if_fail (file->details->directory == directory)	

2002-08-08  Federico Mena Quintero  <federico@ximian.com>

	* icons/crux_teal/crux_teal.xml: Added the "highlight_color_rgba"
	attribute to directory lists so that they will look pretty.

2002-08-08  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-directory-async.c
	(athena_directory_cancel_loading_file_attributes): Remove the
	file from the work queue.

2002-08-08  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-factory.c
	(athena_gdk_pixbuf_supported): fix ugly leak and
	daftness.

2002-08-07  Federico Mena Quintero  <federico@ximian.com>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_theme_changed): Move sub-block variables
	to the function level, making this uglier, less clear, and more
	prone to uninitialized values, but following the Athena coding
	guidelines, which in this respect are incompatible with the GNOME
	Programming Guidelines via the GNU Coding Standards.

	* libathena-private/athena-icon-canvas-item.c
	(draw_or_measure_label_text): Likewise.

2002-08-07  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-file.c
	(athena_file_can_rename): pass in info if we
	have it already.

	* src/file-manager/fm-desktop-icon-view.c
	(update_trash_link_and_delete_copies),
	(update_home_link_and_delete_copies),
	(delete_all_mount_links): kill in favour of
	(update_desktop_directory): so we don't stat / mime
	sniff everything 3+ times.
	(update_link_and_delete_copies): push this method and
	it's file / sniff loop upwards.

	* src/file-manager/fm-directory-view.c
	(special_link_in_selection): upd.
	(fm_directory_link_type_in_selection): kill, unused.
	
	* libathena-private/athena-link.c
	(get_link_style_for_local_file): operate on the passed
	in GnomeVFSInfo if we have it.

	* libathena-private/athena-dnd.c
	(athena_drag_selection_includes_special_link): upd
	for efficiency.

2002-08-06  Alex Graveley  <alex@ximian.com>

	* libathena-private/athena-file.c (rename_guts): Use
	eel_vfs_has_capability() to check if file is local (instead of
	explicitly looking for a file:/// uri) so that renaming .desktop
	files works with vfolder uris.  Fixes #73773.

2002-07-02  Jody Goldberg <jody@gnome.org>

	* libathena-private/athena-program-chooser.c
	(launch_mime_capplet) : That a AthenaFile and pass both the mime
	  type and the name to the capplet so that it can make more
	  intelligent defaults if necessary.
	(launch_mime_capplet_on_ok) : adjust to changes in launch_mime_capplet.
	(launch_mime_capplet_and_close_dialog) : ditto.

2002-08-06  Federico Mena Quintero  <federico@ximian.com>

	Fixes #82194.

	* icons/text-selection-frame.png: Made the base frame image white
	with rounded corners over a transparent background.

	* libathena-private/athena-icon-container.c
	(athena_icon_container_theme_changed): If the theme does not
	specify a color for the text highlight color, use the widget
	style's base[GTK_STATE_SELECTED].

	* libathena-private/athena-icon-canvas-item.c
	(draw_or_measure_label_text): Multiply the (white) selection
	pixbuf by the highlight color so that we get a tinted pixbuf with
	proper alpha.

=== athena 2.0.3 ===
	
2002-08-05  Dave Camp  <dave@ximian.com>

	* NEWS: updated.
	* configure.in: 2.0.3

2002-08-02  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-factory.c
	(path_represents_svg_image): don't do a synchronous mime
	sniff on every icon we load.

2002-08-02  Thomas Meeks  <thomas@imaginator.com>

	* libathena-private/athena-icon-factory.c
	(athena_gdk_pixbuf_supported): impl. we need
	this to detect small, local image files that gdk-pixbuf
	can't render.
	(athena_icon_factory_get_icon_for_file): fix logic
	bug, so that we do get_thumbnail_uri for small, local
	images that may be tractable to 'convert'.

2002-08-01  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c:
	(start_rubberbanding): Get the selection color from the gtk theme
	if none is specified in the athena theme. 
	(realize): Use gtk_widget_modify_bg() to set the background color.
	(style_set): Call athena_icon_container_theme_changed(), as
	changes to the style can now affect the theme.

2002-07-31  Frank Worsley  <fworsley@shaw.ca>

	* libathena-private/athena-program-choosing.c:
	(athena_launch_desktop_file):
	be smarter about appending local paths or uris to command

2002-07-31  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c:
	(motion_notify_event): Use gtk_drag_check_threshold() to check for
	drag distance.
	* libathena-private/athena-icon-dnd.c:
	(athena_icon_dnd_begin_drag): Handle a gtk_drag_begin() that
	returns NULL.

2002-07-31  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-file-operations.c
	(build_error_string): fall back to the other routines if
	source_name is NULL [ eg. permission failure moving a
	whole directory not a single file ] #87686

2002-07-27  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-factory.c
	(icon_theme_changed_callback): Fixed a problem where shortcutting
	|| was preventing the fallback theme from being set. Fixes
	#89178.

2002-07-27  Dave Camp  <dave@ximian.com>

	* src/athena-sidebar.c:
	(background_settings_changed_callback): Update the
	current_background_color, the current_background_image, and
	is_default_background.

2002-07-27  Dave Camp  <dave@ximian.com>

	* libathena-private/eggtreemultidnd.c: (stop_drag_check),
	(egg_tree_multi_drag_button_release_event),
	(egg_tree_multi_drag_button_press_event):  Save the events to be
	propagated in order.  (fixes #89214)

2002-07-26  Dave Camp  <dave@ximian.com>

	* libathena-private/Makefile.am: Added eggtreemultidnd.[ch].
	* libathena-private/eggtreemultidnd.c:
	* libathena-private/eggtreemultidnd.h: New files.
	* src/file-manager/fm-list-model.c:
	(fm_list_model_multi_row_draggable),
	(fm_list_model_file_for_path),
	(each_path_get_data_binder), (fm_list_model_multi_drag_data_get),
	(fm_list_model_multi_drag_data_delete),
	(fm_list_model_set_drag_view), (fm_list_model_get_drag_types),
	(fm_list_model_multi_drag_source_init), (fm_list_model_get_type):
	Implemented the multi drag source.
	* src/file-manager/fm-list-model.h:
	* src/file-manager/fm-list-view.c: (event_after_callback): Moved 
	the context menu out of here...
	(button_release_callback): to here.
	(button_press_callback): Pass the current view and the position
	to the model.
	(create_and_set_up_tree_view): Enable drag source on the view.

2002-07-25  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-factory.c
	(icon_theme_changed_callback): upd.
	(athena_icon_factory_init): upd.
	(is_theme_in_user_directory): move from here.
	(set_theme_name): kill.
	(athena_icon_factory_init, cache_icon_new),
	(cache_icon_ref, cache_icon_unref): only do the
	cache_icons thing when debugging is turned on.

	* libathena-private/athena-find-icon-image.c
	(is_theme_in_user_directory): move to here.
	(athena_icon_theme_set_names),
	(athena_icon_theme_destroy),
	(athena_icon_theme_new): impl.
	(choose_theme): upd.
	(get_themed_icon_file_path): don't do the XML parse of
	i-regular.xml twice, just pass scalable_details in to
	read_details.
	(details_from_doc_node): split from
	(read_details): upd.

2002-07-25  Dave Camp  <dave@ximian.com>

	* components/tree/athena-tree-view.c: (get_root_uri_callback),
	(get_file_for_path_callback), (move_copy_items_callback): New
	functions.
	(create_tree): Create a AthenaTreeViewDragDest.
	(athena_tree_view_dispose): Unref the DragDest object.
	(athena_tree_view_class_init): initialize dispose.
	* libathena-private/Makefile.am: Build
	athena-tree-view-drag-dest.[ch].
	* libathena-tree-view-drag-dest.c:
	* libathena-tree-view-drag-dest.h: New files.
	* libathena-private/athena-dnd.c: 
	(athena_drag_selection_includes_special_link): Moved here
	from athena-icon-dnd.c.
	* libathena-private/athena-dnd.h: Prototype for
	athena_drag_selection_includes_special_link.
	* libathena-private/athena-file.c:
	(athena_file_get_drop_target_uri): Moved here from
	fm-directory-view.
	* libathena-private/athena-file.h:
	* libathena-private/athena-icon-dnd.c:
	(athena_icon_container_receive_dropped_icons): Call
	athena_drag_selection_includes_special_link().
	* libathena-private/athena-marshal.list: New marshallers.
	* src/file-manager/fm-icon-view.c:
	(get_icon_drop_target_uri_callback): Use
	athena_file_get_drop_target_uri().
	* src/file-manager/fm-list-view.c: (get_root_uri_callback),
	(get_file_for_path_callback), (move_copy_items_callback): New
	functions.
	(create_and_set_up_tree_view): Create a AthenaViewDragDest
	object. 
	(fm_list_view_dispose): Unref the DragDest object.

=== athena 2.0.2 ===

2002-07-25  Dave Camp  <dave@ximian.com>

	* NEWS: Add news items.
	* configure.in: Bump requirements, patch from Rodney Dawes.
	Bump version to 2.0.2.

2002-07-24  Dave Camp  <dave@ximian.com>

	(athena_music_view_init): Use an EelBackgroundBox instead of a
	GtkEventBox.
	* components/music/athena-music-view.c:
	* src/athena-sidebar.c: Derive from EelBackgroundBox instead of
	GtkEventBox.
	(athena_sidebar_style_set): Removed special case for
	EelBackgroundStyle.

2002-07-24  Michael Meeks  <michael@ximian.com>

	* src/athena-window-manage-views.c
	(update_title): only set the location bookmark if
	it's non NULL. #87889

2002-07-24  Michael Meeks  <michael@ximian.com>

	* src/athena-window.c (athena_window_destroy):
	NULL various elements, including the sidebar
	here: #87414

=== athena 2.0.1 ===

2002-07-22  Alexander Larsson  <alexl@redhat.com>

	* NEWS:
	Add major news items

	* configure.in:
	Bump version to 2.0.1
	Require eel 2.0.1

2002-07-22  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/athena-shell-ui.xml:
	* src/athena-sidebar.c:
	Fixup usage of ellipses.
	Patch from Gregory Merchan  <merchan@phys.lsu.edu>

2002-07-22  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-file.c (rename_guts):
	Allow renaming desktop files to have a slash in them.

2002-07-22  Alexander Larsson  <alexl@redhat.com>

	* components/history/Athena_View_history.server.in.in: 
	* components/notes/Athena_View_notes.server.in.in:
	Fix wrong location.

2002-07-22  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c:
	Fix for #86073. Don't show removable media options for non
	removable media. Also name the unmount menu item "Eject" for
	removable media.
	
2002-07-19  Federico Mena Quintero  <federico@ximian.com>

	Fixes the Athena part of #46238; see eel for the other part.

	* components/hardware/athena-hardware-view.c
	(athena_hardware_view_init): Do not set a hardcoded background
	color; just use the color from the GTK+ theme.  We still set up
	the EelBackground as this handles dragged colors, but it does not
	save them anywhere.

	* components/notes/athena-notes.c (make_notes_view): Do not set
	up an EelBackground at all for the text view; just let it use the
	default color from the GTK+ theme.  This code did not handle
	dragged colors or anything, anyways.

	* src/athena-property-browser.c
	(athena_property_browser_init): Do not set a hardcoded
	background color.

	* src/athena-sidebar.c (athena_sidebar_style_set):
	::style_set() handler; we act as if the theme changed.

	* icons/gnome/gnome.xml: Removed hardcoded colors and background
	images so that we follow the current GTK+ theme.  It's bland but good.

2002-07-17  Frank Worsley  <fworsley@shaw.ca>

	* src/athena-application.c: (save_window_geometry_timeout),
	(athena_window_configure_event_callback),
	(athena_window_unrealize_event_callback):
	improve saving of geometry. only save it if we really resize
	a window, not when a window is first shown or viewport change

	* src/athena-shell.c: (open_window):
	* src/athena-bookmarks-window.c:
	(athena_bookmarks_window_restore_geometry):
	update for changed eel function
	

	* src/athena-window-manage-views.c:
	(pending_location_already_showing): added new
	(position_and_show_window_callback):
	ignore saved window position if same window already showing
	
	* src/athena-window.c: (athena_window_instance_init),
	(athena_window_save_geometry):
	* src/athena-window.h:
	updated for new eel function and changes described above

2002-07-17  jacob berkman  <jacob@ximian.com>

	* components/adapter/Makefile.am (EXTRA_DIST): fixup

2002-07-17  Michael Meeks  <michael@ximian.com>

	* components/hardware/Makefile.am
	(server_in_files): fixup name.

2002-07-17  Bastien Nocera  <hadess@hadess.net>

	* libathena-private/athena-directory-async.c:
	(should_look_for_dot_directory_file): fix function not to run
	eel_str_has_prefix against NULL, either we use a NULL terminator to
	the array, or G_N_ELEMENTS. Makes rio500: work, and should speed up
	most network methods. (Closes: #78951)

2002-07-11  Michael Meeks  <michael@ximian.com>

	* components/*/.server.in -> *.server.in.in
	* components/*/Makefile.am: move stuff into $(libexec)
	and $(libdir)/bonobo - a very, very boring ( and likely to
	be buggy ) patch, watch the tinderbox...

	* libathena-private/athena-icon-container.c
	(athena_icon_container_class_init): upd.
	(expose_event): add for debugging, looks like most icons
	areas get 3 expose events each on startup.

2002-07-16  Dave Camp  <dave@ximian.com>

	* src/athena-window-manage-views.c (load_content_view): Use
	"folder" instead of "directory" in the accessible description.

2002-07-15  Federico Mena Quintero  <federico@ximian.com>

	* libathena-private/athena-directory-background.c
	(image_loading_done_callback): Fix window/background_window typo.

2002-07-15  Rohit R  <rohit.raveendran@wipro.com>
            Laavanya K R  <laavanya.gopalan@wipro.com>
 
	* src/file-manager/fm-directory-view.c: (can_move_uri_to_trash)
	* libathena-private/athena-dnd.c
        (athena_drag_default_drop_action_for_icons): Changed the file
	permission from 0777 to 0 for the .Trash while calling
	gnome_vfs_find_directory, since gnome-vfs now ignores the
	permissions parameter when creating trash.

2002-07-15  jacob berkman  <jacob@ximian.com>

	* libathena-private/athena-directory-background.c
	(image_loading_done_callback): check that our window and the
	pixmap have the same depth

2002-07-12  Damon Chaplin  <damon@ximian.com>

	* libathena-private/athena-program-chooser.c
	(athena_program_chooser_instance_init): add a Help button.
	(help_cb): show the help page corresponding to the current dialog mode.
	Fixes bug #85804.

2002-07-12  Damon Chaplin  <damon@ximian.com>

	* libathena-private/athena-file-operations.c (confirm_empty_trash):
	ui-review fixes to add an icon to the 'Empty' button, add a mnemonic,
	make 'Empty' the default button, and change the title.
	Fixes bug #85666. (Though I didn't make it non-modal as that is a bit
	awkward.)

2002-07-11  Damon Chaplin  <damon@ximian.com>

	* src/file-manager/fm-properties-window.c: ui-review changes.
	added '_Name:' label for filename, added mnemonics, and used standard
	capitalization. On the permissions page I added _Read/_Write/E_xecute
	labels to the checkbuttons, since it improves keynav. Currently
	GtkCheckButton doesn't show a focus indicator if there is no label.
	Even if that were fixed (there is a patch on bug #74830) mnemonic
	accelerators work better with labels for all the checkbuttons.
	Fixes bug #85658.
	
2002-07-11  jacob berkman  <jacob@ximian.com>

	* libathena-private/athena-volume-monitor.c (entry_is_supermounted_volume): 
	(has_removable_mntent_options): use a macro to portably access the
	fs type (fixes bug #87889)
	(entry_is_supermounted_volume): #ifdef HAVE_HASMNTOPT around the
	body of this
	(get_removable_volumes): fix typos etc. when HAVE_GETMNTINFO is
	defined

	* configure.in: add checks for getmntinfo and sys/mount.h so that
	bsd mount code paths actually get built / run

2002-07-11  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-directory.c
	(athena_directory_notify_files_moved): Cancel loading of
	attributes in the old directory before moving to the new directory.

2002-07-11  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-container.c
	(setup_gc_with_fg, setup_label_gcs, update_label_color):
	impl, split, upd.
	(athena_icon_container_get_label_color): don't
	fetch the style for no good reason, get the colored
	gc from an array instead. rename to
	(athena_icon_container_get_label_color_and_gc): this
	(realize, unrealize): setup / free the gcs.

	* libathena-private/athena-icon-canvas-item.c
	(draw_or_measure_label_text): use cached gc(s) from
	the container, instead of thrashing them.
	(antialias_selection_rectangle): upper case, and #define
	since it's always true.

2002-07-11  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_update): move the render out of
	update_bounds so we request_redraw if the bounds don't change,
	odd that we need to do that.

2002-07-11  Dave Camp  <dave@ximian.com>

	* src/athena-location-bar.c: (athena_location_bar_init): Added
	a relation between the label and entry.
	* src/athena-preferences-dialog.c: Changed "file names" to
	"filenames" on request of the ui-review.
	* src/athena-window-manage-views.c: (load_content_view),
	(athena_window_set_sidebar_panels): Added some a11y names and
	descriptions.

2002-07-11  Dave Camp  <dave@ximian.com>

	* components/history/athena-history-view.c: (update_history):
	Don't block the selection_changed signal.
	(row_activated_callback): Moved here from
	selection_changed_callback.
	(update_click_policy), (click_policy_changed_callback): New
	functions.
	(athena_history_view_instance_init): Connect to row_activated,
	set up a preferences callback for the click policy, and call
	update_click_policy().
	(athena_history_view_finalize): Remove the preferences callback.

2002-07-10  Damon Chaplin  <damon@ximian.com>

	* libathena-private/athena-program-choosing.c
	(athena_launch_desktop_file): don't pass
	GNOME_DESKTOP_ITEM_LOAD_ONLY_IF_EXISTS to 
	gnome_desktop_item_new_from_uri(), as it returns NULL if the executable
	isn't found and we crash. Athena will find out that it doesn't exist
	when it tries to run it, and it will show an error dialog.
	Fixes bug #87286.

2002-07-10  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_set_renaming): make is_renaming
	a bit-field to save ~4+ bytes per canvas item.
	(athena_icon_canvas_item_update): don't request another
	re-draw on the item immediately after returning, save some uta
	thrash.

2002-07-10  Michael Meeks  <michael@ximian.com>

	* src/athena-sidebar.c (athena_sidebar_update_appearance):
	update the title color only if the background has changed;
	(athena_sidebar_finalize):
	keep the current background colour/image on the sidebar as well
	as the defaults.
	(value_different, athena_sidebar_update_appearance): update
	only when the values are different, pass the background in.
	(athena_sidebar_create_context_menu): use stored boolean.
	(athena_sidebar_background_is_default): do this
	(athena_sidebar_update_appearance): inline, once here.

	* src/athena-sidebar-title.c
	(athena_sidebar_title_background_is_default): kill this method
	cut and paste coded from athena-sidebar.c
	(realize_callback, appearance_changed_callback): remove contorted
	'wizard'ry ( and redundant pixbuf colouring logic )
	(athena_sidebar_title_theme_changed): don't do title changed,
	athena-sidebar.c will do it for us.
	(update_all): don't update the title colour, every time we move
	directory a file ( with pixbuf darkness test, etc. etc. )
	(athena_sidebar_title_select_text_color): bin
	background == NULL mess, it never happens now.
	(athena_sidebar_title_background): more applied spaghetti hurling
	gone.

2002-07-10  Michael Meeks  <michael@ximian.com>

	* src/athena-application.c (is_kdesktop_present): disable
	the look_for_kdesktop_recursive code, since this takes ~1 second
	at startup on my Ultra 2.
	(look_for_kdesktop_recursive, has_wm_state, get_self_typed_prop):
	don't compile these either.

2002-07-09  Damon Chaplin  <damon@ximian.com>

	* src/athena-preferences-dialog.c (dialog_button_response_callback): 
	updated pane names so help for "Side Panes" and "Performance" pages
	works again.

2002-07-09  Damon Chaplin  <damon@ximian.com>

	* src/athena-window-menus.c (refresh_bookmarks_menu): if
	WEB_NAVIGATION_ENABLED is not defined don't ever append the static
	(system default) bookmarks. Since athena isn't a good web browser
	at present these make little sense.
	(append_static_bookmarks): 
	(get_static_bookmarks_file_path): ifdeffed out unused functions.

	* src/file-manager/fm-desktop-icon-view.c
	(update_home_link_and_delete_copies): 
	* src/athena-window.c (athena_window_go_home): 
	* src/athena-window-manage-views.c
	(determined_initial_view_callback): use #ifdef WEB_NAVIGATION_ENABLED
	to determine whether we use the ATHENA_PREFERENCES_HOME_URI
	preference or just use the user's $HOME. WEB_NAVIGATION_ENABLED isn't
	defined for now.

	* src/athena-preferences-dialog.c: Lots of string changes.
	Hid the 'Navigation' pane.
	(global_preferences_populate_sidebar_panels_callback): just use the
	side pane name as the preference name, rather than 'Display %s tab in
	side pane'.
	(preferences_dialog_populate_themes_group): set the theme selector
	height to 300 so it fills its page a bit better. (Would be nicer if
	we could set an 'expand' option but that is more complicated.)

	* libathena-private/athena-global-preferences.c: change
	'Local Files Only' to 'Local File Only'.

	Fixes most of bug #85673.

2002-07-09  Michael Meeks  <michael@ximian.com>

	* src/athena-property-browser.c
	(property_browser_category_button_new): build
	radio button & set mode.
	(category_clicked_callback): cut most of it out.
	(make_category_link): upd.
	(build_radio_accessibility_relations): kill - uses
	real radio buttons now.

2002-07-09  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-global-preferences.c:
	* src/file-manager/fm-desktop-icon-view.c:
	(update_home_link_and_delete_copies):
	* src/athena-location-bar.c: (athena_location_bar_init):
	* src/athena-preferences-dialog.c:
	(global_preferences_populate_sidebar_panels_callback),
	(preferences_dialog_populate_themes_group):
	* src/athena-theme-selector.c:
	(athena_theme_selector_instance_init):
	* src/athena-window-manage-views.c: (load_content_view),
	(determined_initial_view_callback),
	(athena_window_set_sidebar_panels):
	* src/athena-window-menus.c: (refresh_bookmarks_menu):
	* src/athena-window.c: (athena_window_go_home):

2002-07-09  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c:
	(select_previous_or_next_icon): Moved here from
	select_previous_or_next_name(), select the next item in the sort
	order instead of the next alphabetically.
	(key_press_event): Use select_previous_or_next_icon().

2002-07-08  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-container.c
	(update_label_color): short circuit via use_drop_shadows
	doing a horribly expensive eel_background_is_dark on the
	(potentially huge) desktop background.

2002-07-08  Michael Meeks  <michael@ximian.com>

	* src/athena-zoom-control.c
	(athena_zoom_control_set_parameters): add pre-condition.

	* src/athena-location-bar.c
	(editable_event_after_callback): if shift or control are
	down, don't pop to the end of the field to help
	auto-completers.

2002-07-08  Alexander Larsson  <alexl@redhat.com>

	* icons/default/desktop-home.png:
	Use the normal gnome home icon by tigert.
	
2002-07-08  Gregory Merchan  <merchan@phys.lsu.edu>

	* components/music/athena-music-view.c
	* components/news/athena-news.c
	* libathena-private/athena-customization-data.c
	* libathena-private/athena-directory-async.c
	* libathena-private/athena-file-utilities.c
	* libathena-private/athena-file-utilities.h
	* libathena-private/athena-find-icon-image.c
	* libathena-private/athena-icon-factory.c
	* libathena-private/athena-link-historical.c
	* libathena-private/athena-theme.c
	* src/athena-application.c
	* src/athena-bookmark-list.c
	* src/athena-first-time-druid.c
	* src/athena-property-browser.c
	* src/athena-window-menus.c
	* src/file-manager/fm-desktop-icon-view.c
	Replace athena_make_path (dir, file) with
	 g_build_filename (dir, path, NULL).
	Remove athena_make_path ().
	Fixes bug #42424.

2002-07-08  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-container.c
	(key_press_event): handle [C/S]-F10 for popup a11y.
	(handle_popups): impl.

2002-07-08  Michael Meeks  <michael@ximian.com>

	* src/athena-property-browser.c
	(athena_property_browser_init): re-instate label
	boldness for Alex.
	(make_category_link): return the button widget.
	(athena_property_browser_update_contents): keep track
	of the buttons & call relation setup in
	(build_radio_accessibility_relations): here.

2002-07-08  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* libathena-private/filesystem-attributes.xml:
	* libathena-private/athena-volume-monitor.c:
	(has_removable_mntent_options), (get_removable_volumes),
	(entry_is_supermounted_volume), (volume_is_removable),
	(mount_volume_make_cdrom_name), (get_mount_list),
	(mount_unmount_callback),
	(athena_volume_monitor_mount_unmount_removable),
	(finish_creating_volume):
	Add support for supermount.
	
	* libathena-private/athena-volume-monitor.c:
	(eject_device):
	Fix crash when eject media.

2002-07-05  Dave Camp  <dave@ximian.com>

	* src/athena-sidebar.c (athena_sidebar_create_context_menu):
	Changed "Reset Background" to "Use Default Background" and put it
	at the end of the menu for consistency with the icon view.

2002-07-05  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-directory-view.c: (real_merge_menus),
	(real_update_menus): Update menu paths and mnemonics.
	* src/file-manager/athena-directory-view-ui.xml: Moved Duplicate,
	Make Link, Rename, Move to Trash, and Delete from the File menu to
	the Edit menu.  Removed the gtk-new pixmap from New Folder (it is
	confusing).  Removed Go to Trash, this was put in the shell.
	* src/file-manager/athena-icon-view-ui.xml: Changed mnemonics.
	* src/athena-shell-ui.xml: Moved "Dangerous File Items"
	placeholder from File to Edit, added a "File Items Placeholder" in
	Edit, added a Stop button to the view menu, changed the 
	Show/Hide menuitems to toggle buttons, and added a Go To Trash 
	menu item.
	* src/athena-window-menus.c: (go_menu_go_to_trash_callback),
	(view_menu_show_hide_sidebar_state_changed_callback),
	(view_menu_show_hide_toolbar_state_changed_callback),
	(view_menu_show_hide_location_bar_state_changed_callback),
	(view_menu_show_hide_statusbar_state_changed_callback): New
	functions.
	(athena_window_update_show_hide_menu_items): Change toggle state
	instead of menu item text.
	(athena_window_initialize_menus_part_1): Connect bonobo
	listeners to the toggle menu items.

2002-07-05  Alexander Larsson  <alexl@redhat.com>

	* src/athena-window-manage-views.c:
	Don't use window geometry metadata to place the desktop window.

	* libathena-private/athena-icon-factory.[ch]:
	Add a GnomeIconLoader to AthenaIconFactory.
	This is just initial code for handling icon themes in desktop
	file icons.

	* libathena-private/athena-link-desktop-file.c:
	Use GnomeIconLoader to load desktop file icons.

	* configure.in:
	Add gnome-desktop to COMPONENT_MODULES.

2002-07-02  Damon Chaplin  <damon@ximian.com>

	* libathena-private/athena-file.c (rename_guts): for .desktop files
	invalidate the file's ATHENA_FILE_ATTRIBUTE_DISPLAY_NAME attribute
	rather than calling athena_file_changed(), since otherwise it will
	just use the old display name. Fixes bug #85966.

2002-07-02  Damon Chaplin  <damon@ximian.com>

	* src/file-manager/fm-list-view.c (create_and_set_up_tree_view): set
	the initial pixbuf column to match the initial zoom level, 25%.
	Otherwise the pixbuf column may not be set and the icons don't appear.
	Fixes bug #85286.

2002-07-02  Michael Meeks  <michael@ximian.com>

	* src/athena-preferences-dialog.c
	(global_preferences_populate_sidebar_panels_callback),
	(dialog_button_response_callback): sidebar -> side pane.

	* src/athena-window-menus.c
	(athena_window_update_show_hide_menu_items): ditto.

	* components/tree/Athena_View_tree.server.in,
	* components/notes/Athena_View_notes.server.in,
	* components/history/Athena_View_history.server.in: ditto.

2002-07-02  Michael Meeks  <michael@ximian.com>

	* src/athena-bookmarks-window.c
	(create_bookmarks_window): use new eel_glade_get_file.

	* configure.in: hack libglade out, we use eel now,
	requires a recent eel.

	* data/browser.xml: add mnemonics

	* src/athena-property-browser.c
	(athena_property_browser_init): don't shrink the
	description text, un-bold description [ makes it
	look ugly, but hey ].

2002-07-02  Michael Meeks  <michael@ximian.com>

	* src/athena-bookmarks-window.c
	(repopulate): remove cut and paste complexity.

2002-07-01  Michael Meeks  <michael@ximian.com>

	* src/athena-bookmarks-window.c
	(create_bookmark_store): split out
	(create_bookmarks_window): UI review changes.
	(repopulate): set style.
	(bookmarks_set_empty): impl.
	(get_selected_bookmark): upd.
	(on_remove_button_clicked): upd.

	* configure.in: add libglade checks.

2002-07-02  Dave Camp  <dave@ximian.com>

	* src/athena-shell-ui.xml: Applied patches from Juan Salaverria
	<rael@vectorstar.net> to change "Up a Level" to "Up", and to add a
	separator between Up and Home.  Fixes ui review bugs 82313 and
	82109.

2002-07-02  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_update_menus):
	* src/file-manager/fm-directory-view.c:
	(reset_bonobo_open_with_menu), (real_update_menus): Use
	athena_bonobo_set_label instead of
	athena_bonobo_set_label_for_menu_item_and_command, since popups
	should now have mnemonics.
	* src/file-manager/athena-desktop-icon-view-ui.xml:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/athena-icon-view-ui.xml:
	* src/athena-shell-ui.xml: Added mnemonics to items on the popup
	menus, changed some mnemonics to prevent duplicates (including a
	patch from David Bordoley <bordoley@msu.edu>
	* libathena-private/athena-bonobo-extensions.c:
	(athena_bonobo_set_label_for_toolitem_and_command): Moved here
	from athena_bonobo_set_label_for_menu_item_and_command, since
	popups should display mnemonics.  This function isn't used
	anymore, but I'm leaving it in because it is still useful if we
	ever want to change the label of a verb with a toolbar button
	associated with it.

2002-07-02  Dave Camp  <dave@ximian.com>

	* src/athena-application.c (set_session_restart): Set the
	restart style to RESTART_IF_RUNNING instead of RESTART_NEVER when
	restart is FALSE.

2002-07-01  Dave Camp  <dave@ximian.com>

	* src/athena-window-menus.c: (forget_history_if_confirmed):
	Change wording as suggested in the ui review, bug #85668.

2002-07-01  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/file-manager/fm-directory-view.c:
	(update_scripts_menu): Remove all old script menus before rebuilding...

	* src/file-manager/fm-list-view.c:
	(button_press_callback): Fix memory leak.

2002-07-01  Dave Camp  <dave@ximian.com>

	Changes from the UI review, bug #85669.

	* libathena-private/athena-program-chooser.c:
	(run_program_configurator_callback): Changed the wording.
	(athena_program_chooser_instance_init): Added a mnemonic to the
	Choose button.
	(athena_program_chooser_new): Refer to the File Types and
	Programs dialog rather than the (now nonexistant) GNOME Control
	Center.
	(athena_program_chooser_show_no_choices_message): Changed the
	wording.

2002-06-29  Gregory Merchan  <merchan@phys.lsu.edu>

	* src/athena-desktop-window.c:
	Call gdk_lower_window on map to not cover existing windows.
	Should alleviate bug #85784, but note that a window manager
	could always interfere.

2002-06-28  Christian Rose  <menthos@menthos.com>

	* src/athena-bookmarks-window.c,
	src/athena-preferences-dialog.c,
	src/athena-property-browser.c: Added line break to help error
	message.

2002-06-28  Alexander Larsson  <alexl@redhat.com>

       * src/file-manager/fm-directory-view.c
       Fixed mneumonic collision between "Make Link" and "Delete"

       Patch by David Bordoley <bordoley@msu.edu>
	
2002-06-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c (athena_icon_canvas_item_bounds):
	Fix bounds so we don't leave trails from the selected text rect.

2002-06-28  Alexander Larsson  <alexl@redhat.com>

	* icons/gnome/throbber/Makefile.am: 
	* icons/gnome/throbber/001-006.png: 
	* icons/gnome/gnome.xml:
	New throbber for gnome theme.
	Drawn by Ben FrantzDale <bfrantzdale@hmc.edu>

2002-06-28  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-directory.c
	(athena_directory_file_list_length_reached): use the
	key here.

	* libathena-private/apps_athena_preferences.schemas:
	add directory_limit, so it's not a hard coded '4000'.

2002-06-28  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* icons/default/default.xml:
	Fix url, since it is a redirection and athena-gtkhtml
	doesn't support that.

2002-06-28  Alexander Larsson  <alexl@redhat.com>
	
	* libathena-private/apps_athena_preferences.schemas
	* libathena-private/athena-global-preferences.c
	* libathena-private/athena-global-preferences.h
	* libathena-private/athena-program-choosing.c
	Removed xalf preferences and all remaining code references 
	to xalf since we no longer support xalf in athena. 

	* src/athena-window-menus.c
	Removed unused define for old help.

	Patch from David Bordoley <bordoley@msu.edu>

2002-06-28  Alexander Larsson  <alexl@redhat.com>

	* icons/default/Makefile.am (icon_DATA):
	* icons/default/trash-empty-192.png:
	* icons/default/trash-full-192.png:
	Added new 192 pixel versions of trash icon.
	Drawn by Ben FrantzDale <bfrantzdale@hmc.edu>

2002-06-28  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-volume-monitor.c:
	Don't eject when things are unmounted.
	Eject when we're explicitly unmounting a volume.
	
	* libathena-private/athena-volume-monitor.h:
	Add should_eject to athena_volume_monitor_mount_unmount_removable.
	
	* src/file-manager/fm-desktop-icon-view.c:
	Pass should_eject right.

2002-06-28  Alexander Larsson  <alexl@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c (volume_ops_callback):
	Quote rawdevice_path. Patch from rajeev.karale@wipro.com

2002-06-27  Frank Worsley  <fworsley@shaw.ca>

	* libathena-private/athena-program-choosing.c:
	(athena_launch_desktop_file): use eel vfs capabilities
	to determine if file is safe to launch

2002-06-27  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-volume-monitor.c
	(finish_creating_volume): Save the volume device earlier, since
	nfs and smbfs file systems were causing the function to return
	before the device was being saved.  This fixes a bug where the
	"Unmount Volume" menu item wasn't working on nfs and smbfs mounts.

2002-06-26  Mark McLoughlin  <mark@skynet.ie>

	* src/file-manager/fm-desktop-icon-view.c:
	(desktop_icon_view_property_filter): more typo fixage.

2002-06-25  Shivram U  <shivaram.upadhyayula@wipro.com>
 
	* libathena-private/athena-directory-background.c
	(make_root_pixmap): Set the Colormap for the GdkPixmap created via
	gdk_pixmap_foreign_new().  Fix for bug #83259. 

2002-06-25  Frank Worsley  <fworsley@shaw.ca>

	* components/tree/athena-tree-view.c:
	(got_activation_uri_callback):
	implement viewing/opening and executing of files 
	for the	tree view
	
	* libathena-private/athena-dnd.c:
	* libathena-private/athena-link-desktop-file.c:
	* libathena-private/athena-link-historical.c:
	updated for new desktop-file: command specifier to allow
	proper launching of desktop files
	
	* libathena-private/athena-program-choosing.c:
	(athena_launch_desktop_file):
	new function to launch desktop files with proper exec
	parameter support
	
	* libathena-private/athena-program-choosing.h:
	define command specifiers in one place
	
	* src/file-manager/fm-directory-view.c:
	(get_executable_text_file_action):
	add "run in terminal" button, partial fix for #41773
	
	(activate_callback), (fm_directory_view_move_copy_items):
	support proper launching of and dnd to desktop files

2002-06-25  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-icon-view.c (get_icon_drop_target_uri_callback): 
	Use eel_vfs_has_capability() to test for locality of the drop
	target.  Fixes #82644.

2002-06-25  Damon Chaplin  <damon@ximian.com>

	* libathena-private/athena-icon-factory.c (load_icon_from_path): 
	Check for "/.athena/thumbnails/" rather than "/.thumbnails/".
	Fixes bug #82780.

2002-06-25  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-icon-view.c (icon_view_handle_uri_list): 
	Use the eel_vfs_has_capability() functon.

2002-06-25 Rajeev Karale <rajeev.karale@wipro.com

	* athena/libathena-private/athena-volume-monitor.c
	finish_creating_volume(), adding code to handle pcfs related
	solaris specific issue.

	* athena/libathena-private/filesystem-attributes.xml.c
	Adding three more file system entries.

2002-06-25  Mark McLoughlin  <mark@skynet.ie>

	* src/file-manager/fm-desktop-icon-view.c:
	(net_workarea_changed), (desktop_icon_view_property_filter),
	(fm_desktop_icon_view_init): its _NET_WORKAREA, not
	_NET_WM_WORKAREA. Requires latest metacity.

2002-06-24  Damon Chaplin  <damon@ximian.com>

	* components/music/athena-music-view.c (get_song_text): if there are
	no tracks in the list just return "".
	(play_current_file): if there are no tracks in the list just return.
	Fixes bug #85975.

2002-06-24  Damon Chaplin  <damon@ximian.com>

	* src/athena-theme-selector.c (theme_selector_changed_callback): 
	added a final NULL argument to g_signal_emit(). Fixes bug #85399.

	* src/athena-preferences-dialog.c (theme_changed_callback): just
	return if selected_theme is NULL. This can happen when the dialog is
	being destroyed.

2002-06-20  Mark McLoughlin  <mark@skynet.ie>

	* src/file-manager/fm-desktop-icon-view.c:
	(icon_container_set_workarea): impl method to set icon
	container margins from workarea geometries.
	(net_wm_workarea_changed): renamed from panel_desktop_area_changed
	and uses _NET_WM_WORKAREA instead of GNOME_PANEL_DESKTOP_AREA.
	(desktop_icon_view_property_filter), (fm_desktop_icon_view_init):
	update.

2002-06-17  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c:
	(find_open_grid_space), (mark_icon_location_in_grid): Add
	DESKTOP_PAD_[HORIZONTAL,VERTICAL] to width and height to avoid new
	icons from being placed too closely to other icons, and don't
	place an icon partially outside of the grid.
	(lay_down_icons_tblr): Wrap before placing the icon if necessary,
	and reset max_width when moving to a new column.

2002-06-14  Damon Chaplin  <damon@ximian.com>

	* src/athena-preferences-dialog.c (preferences_show_help): new
	function to show the help file.
	(dialog_button_response_callback): handle the Help button and show
	the appropriate help file.
	(preferences_dialog_create): add a Help button.
	Based on patch from Satyajit Kanungo  <satyajit.kanungo@wipro.com>.

	Fixes bug #83511.

2002-06-13  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-file.c:
	(athena_file_get_symbolic_link_target_uri): Escape the symlink
	name before constructing the uri.  Fixes #84004.

2002-06-12  Damon Chaplin  <damon@ximian.com>

	* src/athena-property-browser.c (athena_property_browser_init): 
	Add a 'Help' button on the bottom-left of the dialog. Also used
	gtk_window_set_default_size() rather than gtk_widget_set_size_request()
	so the dialog grows if necessary.
	(help_button_callback): new callback to show the help page.
	Based on patch from Satyajit Kanungo  <satyajit.kanungo@wipro.com>.

	Fixes bug #83524.

2002-06-12  Damon Chaplin  <damon@ximian.com>

	* test/Makefile.am (INCLUDES): 
	* src/Makefile.am (INCLUDES): 
	* components/tree/Makefile.am (INCLUDES): 
	* components/throbber/Makefile.am (INCLUDES): 
	* components/text/Makefile.am (INCLUDES): 
	* components/notes/Makefile.am (INCLUDES): 
	* components/news/Makefile.am (INCLUDES): 
	* components/music/Makefile.am (INCLUDES): 
	* components/history/Makefile.am (INCLUDES): 
	* components/hardware/Makefile.am (INCLUDES): use
	$(prefix)/${DATADIRNAME}/locale rather than $(datadir)/locale so
	it works on Solaris.

2002-06-03  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/file-manager/fm-list-view.c:
	(get_derfault_zoom_level): New, protects us from illegal preferences.
	(set_zoom_level_from_metadata_and_preferences),
	(fm_list_view_reset_to_defaults),
	(fm_list_view_set_zoom_level),
	(fm_list_view_restore_default_zoom_level): Update.
	(fm_list_view_scale_font_size): Replace switch with loop and always
	use default font at default zoom level.
	(click_policy_changed_callback): Make underlines appear or disappear
	when the click policy changes.

2002-06-02  David Emory Watson  <dwatson@cs.ucr.edu>

	* components/text/athena-text-view.c:
	(athena_text_view_instance_init): Turn on word wrapping.

2002-06-12  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-program-chooser.c: change
	vbox spacing to 5.

	Patch from Jorn Baayen  <jorn@nl.linux.org>

2002-06-11  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-window.h (athena_window_save_geometry): 
	* src/athena-window-manage-views.c (determined_initial_view_callback): 
	* src/athena-application.c (athena_application_create_window):
	Fix indentation.

	* NEWS:
	Update version

	* configure.in:
	Bump requirements to latest versions.

2002-06-10  Frank Worsley  <fworsley@shaw.ca>

	* src/athena-application.c: 
	* src/athena-window-manage-views.c:
	* src/athena-window.c: 
	* src/athena-window.h:
	always load the saved window geometry and save the geometry
	whenever a window is resized

2002-06-10 Rajeev Karale <rajeev.karale@wipro.com>

	* libathena-private/athena-volume-monitor.c:finish_creating_volume()        zip disk mount path fix for solaris.

2002-05-29  Satyajit Kanungo  <satyajit.kanungo@wipro.com>

	* src/athena-bookmarks-window.c: added a help button in the
	bookmark dialog box.  put the help callback to link the help
	button to appropiate section in the help document.  Fixes #83515.

2002-06-06  Michael Meeks  <michael@ximian.com>

	* src/file-manager/fm-icon-view.c
	(icon_view_handle_uri_list): use new eel
	capabilities test.

	* configure.in: require various gnome 2.0 releases.
	
	* Version 2.0.0

2002-06-06  Michael Meeks  <michael@ximian.com>

	* configure.in: Only enable the hardware view on
	Linux, if explicitely requested with --enable-hardware
	add status printout at the end of configure.

	* components/hardware/Makefile.am
	(bin_PROGRAMS): only setup if ENABLE_HARDWARE_VIEW

=== athena 1.1.19 ===
 
2002-06-03  Alex Larsson  <alexl@redhat.com>

	* NEWS:
	Add some news.

2002-06-03  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	* NEWS:
	Bump version to 1.1.19 and update requirements.

2002-06-02  Frank Worsley  <fworsley@shaw.ca>

	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	always use the user selected font at default zoom
	nice if you have a small/large default zoom so you
	don't have a tiny/large font
	
2002-06-03  Dave Camp  <dave@ximian.com>

	* src/athena-window-manage-views.c (update_title): Removed 
	gtk_window_set_role() call.

2002-06-01  David Emory Watson  <dwatson@cs.ucr.edu>

	* libathena-private/apps_athena_preferences.schemas: Added schemas
	for the list view.

2002-06-01 John Fleck <jfleck@inkstain.net>

	* src/athena-window-menus.c
	fix help - it was pointing at the wrong spot

2002-06-01 John Fleck <jfleck@inkstain.net>

	* Makefile.am
	* configure.in
	remove old help docs from build

2002-05-28  Satyajit Kanungo <satyajit.kanungo@wipro.com>

	* athena-window-menus.c : Added the help callback to link the 
	  Help documents present under user-guide for athena.
	  
2002-05-31  Alex Larsson <alexl@redhat.com>

	* libathena-private/athena-icon-canvas-item.c:
	Draw drop shadows if use_drop_shadows.
	
	* libathena-private/athena-icon-container.c:
	Implement athena_icon_container_set_use_drop_shadows.
	Use light color for labels if use_drop_shadows.
	
	* libathena-private/athena-icon-container.h:
	Add new function athena_icon_container_set_use_drop_shadows.
	
	* libathena-private/athena-icon-private.h:
	Add use_grop_shadow variable.
	
	* src/file-manager/fm-desktop-icon-view.c:
	Call athena_icon_container_set_use_drop_shadows()

2002-05-31  Damon Chaplin  <damon@ximian.com>

	* src/athena-application.c
	(athena_application_create_desktop_window): realize the desktop
	window immediately, and do a gdk_flush(), so the
	ATHENA_DESKTOP_WINDOW_ID property is set and gnome-settings-daemon
	can tell that athena is running. Fixes part of #74311.

2002-05-31  Michael Meeks  <michael@ximian.com>

	* components/adapter/athena-adapter-file-load-strategy.c
	(athena_adapter_file_load_strategy_load_location): upd.
	(get_file_load_method): impl.

	* components/adapter/athena-adapter-stream-load-strategy.c
	(athena_adapter_stream_load_strategy_load_location): upd.
	(unref_stream_cb, get_stream_load_method): impl.

	* components/adapter/athena-adapter-load-strategy.c
	(athena_adapter_load_strategy_load_async): impl.
	(athena_adapter_load_strategy_report_async_status): impl.
	(athena_adapter_load_strategy_report_load_failed),
	(athena_adapter_load_strategy_report_load_complete): prune.

2002-05-31  Michael Meeks  <michael@ximian.com>

	* src/file-manager/fm-directory-view.c
	(display_pending_idle_callback): only NIL the idle_id
	if we are going to return FALSE and disconnect
	ourselves #83591

2002-05-30  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-desktop-icon-view.c (fm_desktop_icon_view_init): Setup the
	root window to receive PropertyNotify events.

2002-05-30  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-directory-view.c (process_new_files): Don't
	add files to old_changed_files if they are not shown.

2002-05-30  Dave Camp  <dave@ximian.com>

	* src/athena-application.c (set_session_restart): Don't set the
	restart command here.
	(save_session): Implemented.

	* src/athena-window-manage-views.c (update_title): Set the role
	to the displayed uri.

2002-05-25  David Bordoley <bordoley@msu.edu>

	*src/athena-window-menus.c
	*src/athena-shell-ui.xml
	Changed names of callbacks for "backgrounds and emblems" and preferences
	to make them more descriptive.

	*src/athena-windows-menus.c
	Removed unused code relating to eazel customer feedback
	Use stock clear button in the clear history dialog

Thu May 30 13:14:58 2002  George Lebl <jirka@5z.com>

	* src/file-manager/fm-desktop-icon-view.c,
	  src/file-manager/athena-desktop-icon-view-ui.xml:  Rename
	  the New Launcher verb to "New Launcher Desktop" since it's sort
	  of a more special case then the one in directory-view.  This
	  fixes the issue with the fix of #72715

2002-05-30  Damon Chaplin  <damon@ximian.com>

	* src/athena-property-browser.c: use a separate pointer for each
	of the patterns/emblems/color dialogs, and make them not modal.

	It was using 'property_browser->details->category' in some of the
	callbacks, which meant it didn't work if the user had switched to one
	of the other patterns/colors/emblems pages. I hard-coded "patterns"
	and "emblems" instead. Fixes bug #80683.

2002-05-30  Damon Chaplin  <damon@ximian.com>

	* components/music/athena-music-view.c: removed PLAYER_NEXT state,
	as it wasn't really necessary and was a bit confusing.
	(selection_changed): updated to make sure we update the displayed
	song title.
	(play_status_display): changed the code to move to the next track,
	as we don't use PLAYER_NEXT any more.
	(play_current_file): use esdout_can_play() to check if we can connect
	to esd.
	(go_to_previous_track): use 3000 instead of 300. (1000 is 1 second,
	see play_status_display()).
	(get_player_state): just return the state. Don't call esdout_playing().

	* components/music/esd-audio.c (esdout_can_play): added new function
	to check if we can connect to esd.
	(esdout_playing): updated this so it only checks if we are currently
	playing a track. It doesn't try to connect to esd any more.

	Fixes bug #79231.

2002-05-30  Damon Chaplin  <damon@ximian.com>

	* src/athena-bookmarks-window.c: Added support for DnD using
	GtkTreeView. I added on_row_changed() and on_row_deleted() and removed
	the old on_row_move(). I also added an extra column to the table to
	store a pointer to the bookmark object, so we can handle DnD.
	And a few hacks to keep the list store in sync with the bookmarks
	list. Fixes bug #80986.

2002-05-30  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (size_allocate):
	Don't relayout when window height changes unless we need it.
	Based on a patch by JÃ¶rgen Viksell <jorgen.viksell@telia.com>

Thu May 30 10:02:30 2002  George Lebl <jirka@5z.com>

	* src/Athena_shell.server.in, src/file-manager/fm-directory-view.c,
	  src/file-manager/athena-directory-view-ui.xml:  Add a New
	  Launcher and Edit Launcher menu items for directories of type
	  x-directory/vfolder-desktop, also have the icon and list view
	  be able to view these just as the normal dirs.  This should fix
	  #72715, although since the monitors aren't yet working you have
	  to hit reload after making a change.  You also need an up to date
	  panel (to get a well working gnome-desktop-item-edit proggie)

2002-05-29  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-file.c
	(athena_file_mark_gone): remove the file from
	the link hash if it is going, since we bin the
	file info here and thus can't remove it later
	#74120

2002-05-28  Laszlo Peter  <laca@sun.com>

	* libathena-private/athena-thumbnails.c: #include <signal.h> for
	kill() and SIGKILL.

2002-05-27  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-file.c (make_valid_utf8):
	split out into eel.
	(athena_file_get_display_name_nocopy): upd.
	requires HEAD eel, re-re-close #77892

=== athena 1.1.18 ===
 
2002-05-27  Alexander Larsson  <alla@lysator.liu.se>

	* configure.in:
	* NEWS:
	Bump version to 1.1.18 and update requirements.

2002-05-27  Jonathan Blandford  <jrb@gnome.org>

	* components/tree/athena-tree-model.c
	(TreeNode): make flag storage more efficient.
	(report_node_inserted): report has_child toggled before
	reporting row_inserted.

	* components/tree/athena-tree-view.c
	(row_inserted_expand_node_callback): remove evil hack to
	emit has_child toggled on the view.

2002-05-27  Chris Lyttle  <chris@wilddev.net>

	* Makefile.am: remove omf-install dir
	* configure.in: remove athena-quick-reference,
	athena-release-notes, athena-screenshot-guidelines from
	makefiles section.
	* help/omf.make: Added new file for changed omf build system
	* help/xmldocs.make: Updated for new omf build system
	* help/Makefile.am: remove athena-quick-reference,
	athena-release-notes, athena-screenshot-guidelines from subdirs
	and htmldocs.make, sgmldocs.make from EXTRA_DIST
	* help/athena-user-manual/C/Makefile.am: Change figs to figdir, add
	legal.xml
	* help/athena-user-manual/C/athena-user-manual-C.omf: Changed to
	conform to new omf format
	
2002-05-24  Anders Carlsson  <andersca@gnu.org>

	* src/file-manager/fm-desktop-icon-view.c: (volume_ops_callback):
	Don't exit if the file is local. Sigh, won't people test their code?

	* src/file-manager/fm-directory-view.c: (activate_callback):
	Special case "file" type URIs, so that people can still open
	their nfs mounted directories.
	
	* src/athena-window-private.h:
	* src/athena-window-toolbars.c:
	(athena_window_initialize_toolbars):
	* src/athena-window.c: (athena_window_finalize):
	Remove un-needed theme code.
	
2002-05-24  Michael Meeks  <michael@ximian.com>

	* components/tree/athena-tree-view.c
	(row_inserted_expand_node_callback): work around the
	aformentioned gtk+ bug, since it seems not to be being fixed.

2002-05-24  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-dnd.c
	(drag_data_received_callback): fix proximate cause of #80896

	* libathena-private/athena-icon-container.c
	(athena_icon_container_update_icon): fix proximate cause
	of #78568.

2002-05-24  Alex Graveley  <alex@ximian.com>

	* libathena-private/athena-monitor.c (monitor_add_internal):
	Fix typo which was horking monitors.

2002-05-23  Alex Graveley  <alex@ximian.com>

	* libathena-private/athena-link-desktop-file.c
	(athena_link_desktop_file_local_create): Don't dup the string if
	there is an icon.

2002-05-23  Damon Chaplin  <damon@ximian.com>

	* libathena-private/athena-thumbnails.c: major changes to use a
	thread to create thumbnails instead of forking for each one. May fix
	bug #78542 and #76338.

2002-05-23  Michael Meeks  <michael@ximian.com>

	This change only partially works, it works correctly
	with a fix to Gtk+ from jrb, but then dies with multiple
	views.

	* components/tree/athena-tree-view.c
	(athena_tree_view_finalize): don't de-queue idle
	epansion state save.
	(schedule_save_expansion_state_callback),
	(save_expansion_state_idle_callback): kill.
	(create_tree): don't save the gconf key on each
	row expand / contract.
	(athena_tree_view_instance_init): setup expanded_uris.
	(load_expansion_state): kill.
	(row_inserted_expand_node_callback): impl.
	(create_tree): connect signal, always expand root.
	(load_expansion_state): impl.
	(save_expansion_state_callback): rename.
	(expand_row_if_stored): impl.
	Sigh - I spent hours working out there was a sort_path.

	* components/tree/athena-tree-model.c
	(athena_tree_model_new): optionally set the root.
	(athena_tree_model_set_root_uri): publicise.
	(athena_tree_model_iter_has_child): add some debug.

2002-05-23  Alex Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c:
	Move disconnect_model_handlers from finalize to destroy.
	This fixes a problem with signals arrive after the view is destroyed.

	Patch from Gustavo GirÃ¡ldez <gustavo.giraldez@gmx.net>

2002-05-23  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-link-historical.c (athena_link_historical_local_create_from_gnome_entry):
	Update to new gnome-desktop api.

2002-05-23  Yanko Kaneti  <yaneti@declera.com>

	* configure.in: (ALL_LINGUAS) Added Bulgarian - bg.

2002-05-22  Alex Graveley  <alex@ximian.com>

	* configure.in: Remove FAM check.

	* acconfig.h: Remove HAVE_LIBFAM.

	* libathena-private/athena-monitor.[ch]: Convert to using
	gnome-vfs monitors.  athena_monitor_active() now checks if FAM
	can be used by creating a monitor for the user's desktop
	directory, and caches this if successful.  Adds an idle handler to
	call athena_file_changes_consume_changes(), so multiple file
	changes have a chance of being chunked together.

2002-05-22  Bastien Nocera  <hadess@hadess.net>

	reviewed by: Alex Larsson  <alexl@redhat.com>

	* libathena-private/filesystem-attributes.xml:
	add some new filesystem types, fix smbfs' name
	* libathena-private/athena-volume-monitor.c:
	(mount_unmount_callback),
	(athena_volume_monitor_mount_unmount_removable),
	(finish_creating_volume),
	(athena_volume_monitor_get_mount_name_for_display):
	* libathena-private/athena-volume-monitor.h:
	fix display name for device with a trailing '/' in the mount
	point (ie. /foo/), add some more matching prefixes, add smb, windows,
	and apple types
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link):
	create the launcher with i-smb for smb mounts
	* src/athena-application.c: (volume_mounted_callback):
	update to use gconf like magicdev for gnome2

2002-05-20  Jorn Baayen  <jorn@nl.linux.org>

	* src/athena-shell-ui.xml:
	* src/athena-window-private.h:	
	* src/athena-window-toolbars.c: always use the gtk stock
	icons in toolbars, set the priority property for some buttons,
	add history dropdown buttons, remove rightclick menu.

2002-05-22  Eric Baudais  <baudais@okstate.edu>

	* help/athena-user-manual/C/athena-user-manual-C.omf
	Updated the OMF file for GNOME 2.0.

2002-05-22  Michael Meeks  <michael@ximian.com>

	* src/file-manager/fm-directory-view.c
	(display_selection_info_idle_callback): hold a ref
	during the duration of the call, to guard against
	re-enterancy related sudden death #72991
	(display_pending_timeout_callback),
	(update_menus_timeout_callback),
	(display_pending_idle_callback): ditto for good 
	measure.

2002-05-22  Michael Meeks  <michael@ximian.com>

	* src/athena-window.c (ui_idle_handler): hold a ref
	on the window while we do a load of possibly
	re-enterant stuff. #82050

2002-05-22  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-dnd.c (add_one_uri):
	add the full, non-mangled, clean, escaped URI.
	(is_path_that_gnome_uri_list_extract_filenames_can_parse),
	(add_one_compatible_uri): #ifdef out these abominations :-)
	Fixes bug #48423, breaks a certain level of
	compatibility with gnome-libs 1.4, inasmuch that
	complex URLs, containing strange characters will not
	be backwards compatible.

	* src/athena-window-manage-views.c (open_location):
	add a eel_uri_is_valid check, so the next #48423 is easier
	to track.

2002-05-21  Frank Worsley  <fworsley@shaw.ca>

	* libathena-private/athena-link-desktop-file.c:
	(athena_link_desktop_file_local_create): allow creation
	of desktop files without a athena icon
	
	* src/file-manager/fm-icon-view.c:
	(icon_view_handle_uri_list): make dnd of uri lists work right

2002-05-21  Michael Meeks  <michael@ximian.com>

	* src/athena-sidebar-tabs.c (get_property_bag):
	cache the property bag item, so we're not forever
	querying for it.
	(tab_item_destroy): re-write, belt and braces.
	(athena_sidebar_tabs_connect_view): update.
	(get_tab_image_name): don't release the property bag.
	(athena_sidebar_tabs_update_indicator): kill, unused.
	(athena_sidebar_tabs_add_view): associate the tab
	with it's parent.
	(tab_indicator_changed_callback): update just 1 tab.
	(athena_sidebar_tabs_update_all_indicators): remove,
	not what we wanted anyway.
	(athena_sidebar_tabs_update_tab_item): update sig.

2002-05-21  Michael Meeks  <michael@ximian.com>

	* src/file-manager/fm-list-view.c
	(list_activate_callback): move this code
	(event_after_callback): into here, it seems we get
	the event after the callback whether handled or not.
	(create_and_set_up_tree_view): unhook list_activate.

2002-05-20  Michael Meeks  <michael@ximian.com>

	* src/athena-window-menus.c
	(refresh_bookmarks_menu): hold refs on the window,
	in case we re-enter during bookmark build and destroy
	it.

2002-05-20  Alex Graveley  <alex@ximian.com>

	* libathena-private/athena-link-desktop-file.c
	(athena_link_desktop_file_local_create): Force saving of desktop
	file to counteract bug in libgnome-desktop.

2002-05-21  Anders Carlsson  <andersca@gnu.org>

	* src/file-manager/fm-directory-view.c: (finish_loading):
	Schedule an idle instead of a timeout when we know all the 
	files in the directory.
	
=== athena 1.1.17 ===
 
2002-05-20  Alex Larsson  <alexl@redhat.com>

	* configure.in:
	* NEWS:
	Bumped to 1.1.17.
	Require eel 1.1.15.

2002-05-17  Alex Larsson  <alexl@redhat.com>

	* configure.in:
	Remove libpng checks. They are not used.

2002-05-17  Alex Graveley  <alex@ximian.com>

	* src/file-manager/fm-icon-view.c
	(get_icon_drop_target_uri_callback): Pass file URI to
	athena_link_*, instead of local path.
	(icon_view_handle_uri_list): Ditto, for parent directory.
	(icon_view_handle_uri_list): Ditto.

	* src/file-manager/fm-icon-container.c
	(fm_icon_container_get_icon_text): Pass file URI to
	athena_link_*, instead of local path.
	(get_sort_category): Ditto.

	* src/file-manager/fm-directory-view.c
	(fm_directory_link_type_in_selection): Pass file URI to
	athena_link_*, instead of local path.
	(special_link_in_selection): Ditto.

	* src/file-manager/fm-desktop-icon-view.c (volume_ops_callback):
	Pass file URI to athena_link_*, instead of local path.
	(trash_link_is_selection): Ditto.
	(volume_link_is_selection): Ditto
	(volume_link_device_type): Ditto.

	* libathena-private/athena-file.c (rename_guts): Pass file URI
	to athena_link_desktop_file_local_set_text(), handle non-local
	launchers gracefully.

	* libathena-private/athena-link-desktop-file.c: Use URIs
	throughout, and load desktop items using
	gnome_desktop_item_new_from_uri.
	(athena_link_desktop_file_local_create): Use
	gnome_desktop_item_new_from_string, instead of using fputs
	directly.

	* libathena-private/athena-link-historical.c: Use URIs instead
	of local paths throughout.

	* libathena-private/athena-link.c: Use URIs instead of local
	paths throughout.

2002-05-17  Damon Chaplin  <damon@ximian.com>

	* src/file-manager/fm-list-view.c (key_press_callback): new function
	to activate the selected items when Return is pressed, to match the
	icon view. Fixes bug #74976.

2002-05-15  Alex Larsson  <alexl@redhat.com>

	* MAINTAINERS:
	Fix my email address.

2002-05-17  Michael Meeks  <michael@ximian.com>

	* configure.in: require libbonoboui >= 1.116.1 [ CVS ]

	* src/file-manager/fm-list-model.c
	(fm_list_model_clear): add pre-condition.

	* src/file-manager/fm-list-view.c
	(create_and_set_up_tree_view): hold a ref on the model.
	(fm_list_view_dispose): impl.
	(fm_list_view_class_init): upd.
	(fm_list_view_clear): only clear a non NULL model.

	* src/file-manager/fm-icon-view.c
	(get_icon_container): return NULL if we've no container.
	(fm_icon_view_clear): tolerate a NIL icon_container
	( on a 2nd dispose perhaps )

	* libathena-private/athena-directory-background.c
	(athena_file_background_read_desktop_settings): check
	the wallpaper_filename is not empty.

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_destroy): hoist pointer
	NULLification up the method.

2002-05-16  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-bookmark.c
	(athena_bookmark_get_pixmap_and_mask): kill, unused.

2002-05-17  Anders Carlsson  <andersca@gnu.org>

	* src/file-manager/fm-directory-view.c: Remove some
	old, unused code.

2002-05-17  Alexander Larsson  <alexl@redhat.com>

	* components/history/athena-history-view.h:
	Add copyright notice.
	
	* components/notes/Makefile.am:
	* components/notes/Athena_View_notes.server.in:
	* components/notes/athena-notes.c:
	Make the notes component a shlib component.

2002-05-16  Damon Chaplin  <damon@ximian.com>

	* configure.in (FAM_LIBS): applied patch from Ali Akcaagac to save the
	language and switch to C++. Almost identical to the gnome-vfs patch
	which has been approved. Fixes bug #80827.

2002-05-16  Abel Cheung  <maddog@linux.org.hk>

	* libathena-private/apps_athena_preferences.schemas:
	Missing bracket in default value.

2002-05-16  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-container.c
	(select_matching_name): free match_state's name
	if we have no icon.

	* libathena-private/athena-undo-signal-handlers.c
	(editable_register_edit_undo): don't leak undo_text.

	* src/athena-location-bar.c (try_to_expand_path): 
	unref the URI after use.

2002-05-16  Michael Meeks  <michael@ximian.com>

	* src/athena-location-bar.c (try_to_expand_path): 
	* icons/tahoe/tahoe.xml: 
	* icons/gnome/gnome.xml:
	* icons/sierra/sierra.xml: 
	* icons/crux_teal/crux_teal.xml: 
	* icons/crux_eggplant/crux_eggplant.xml: 
	* icons/default/default.xml: put back the old
	athena values, keep the new values in
	number_v_2_offset.
	
	* src/athena-zoom-control.c (draw_number):
	ask for number_v_2_offset so we can keep theme
	compatibility and get offsets right. Mostly
	we want 0 for the offset anyway, so this
	automagically gets most things right.

2002-05-16  Jacob Berkman  <jacob@ximian.com>

	* components/history/Makefile.am
	(libathena_history_view_la_SOURCES): include
	athena-history-view.h
	
2002-05-15  Sean Atkinson  <sean@cantab.net>

	* src/athena-window-manage-views.c
	(get_history_list_callback):
	* libathena/athena-view.c (history_dup):
	* libathena/athena-view-component.idl:
	Remove icon XML string from HistoryItem.

	* components/history/athena-history-view.c
	(update_history): Use bookmark icon, not XML one.

	* components/history/athena-history-view.h: Moved some stuff
	from athena-history-view.c here for libmain.c.

	* components/history/Athena_View_history.server.in: Changed exe
	to shlib to run history in-process.

	* components/history/libmain.c: Added for shared library.

	* components/history/Makefile.am: Build shared library.
	

2002-05-13  Frank Worsley  <fworsley@shaw.ca>

	* libathena-private/athena-file.c:
	enable renaming of .desktop files by setting the Name
	attribute within the .desktop file

	* libathena-private/athena-link-desktop-file.c:
	added athena_link_desktop_file_local_set_text

2002-05-10  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/file-manager/fm-list-view.c:
	(list_activate_callback),
	(click_policy_changed),
	(fm_list_view_class_init): Update to use click_policy_auto_value.
	(rows_reordered_callback): Renamed to
	(sort_column_changed_callback): this and only write preferences to disk
	if they differ from the defaults.
	(default_sort_order_changed_callback)
	(fm_list_view_instance_init): React to changes in the defaults.

	* src/file-manager/fm-list-model.c:
	* src/file-manager/fm-list-model.h:
	(fm_list_model_get_athena_file_sort_type): Renamed to
	(fm_list_model_get_sort_type_from_sort_column_id): this.
	(fm_list_model_compare_func): Update.
	(fm_list_model_add_file): Update.

=== athena 1.1.16 ===
 
2002-05-13  Alex Larsson  <alexl@redhat.com>

	* configure.in: 
	* NEWS:
	Bump version number

2002-05-13  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-file-operations.c:
	Make empty trash confirmation dialog title say "Empty Trash?"
	instead	of "Delete Trash Contents?".

2002-05-13  Michael Meeks  <michael@ximian.com>

	* src/athena-window.c (athena_window_show_toolbar): 
	activate the throbber in case we didn't earlier.

	* src/athena-window-toolbars.c
	(athena_window_activate_throbber): split out of
	(athena_window_initialize_toolbars): here,
	only activate the throbber if we are starting
	with a toolbar.

	* src/athena-window.c: 
	(athena_window_show_toolbar, athena_window_hide_toolbar): move
	into athena-window-toolbars.

	* libathena/athena-view-standard-main.c
	(object_destroyed): upd. comment.
	(make_object): prune bogus comment.
	(athena_view_instrument_for_failure): impl.
	(object_destroyed): only do 1 destroy ever, rename
	(view_object_destroy): to this.
	(make_object): upd.
	(athena_view_never_got_frame_timeout),
	(athena_view_set_frame_callback),
	(athena_view_cnx_broken_callback): impl.

2002-05-12  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-global-preferences.c:
	* src/athena-bookmarks-window.c: (create_bookmarks_window):
	* src/athena-preferences-dialog.c: Added mnemonics.

2002-05-12  Alexander Larsson  <alla@lysator.liu.se>

	* src/file-manager/fm-directory-view.c
	(clipboard_targets_received, real_update_menus):
	Make sure to keep a ref to the view until we got the response.
	Handle the case the detail->ui was destroyed (it's a weak ref).

2002-05-10  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-directory-view.c (process_new_files): Handle
	files that are moved/removed and not ready.

2002-05-11  Alex Larsson  <alexl@redhat.com>

	* components/music/athena-music-view.c: (set_up_tree_view):
	Don't use custom font.
	
	* libathena-private/apps_athena_preferences.schemas:
	Add preferences/desktop_font.
	Remove old fonts keys
	
	* libathena-private/athena-file.c:
	(athena_file_get_display_name_nocopy):
	Don't leak.
	
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	Remove old font prefs. Add desktop font prefs.
	
	* libathena-private/athena-icon-canvas-item.c:
	(create_label_layout):
	Use default widget font unless one is set.
	
	* libathena-private/athena-icon-container.c: (finalize),
	(style_set), (athena_icon_container_class_init),
	(athena_icon_container_instance_init),
	(athena_icon_container_set_font):
	* libathena-private/athena-icon-container.h:
 	* libathena-private/athena-icon-private.h:
	Change athena_icon_container_set_font_name to
	athena_icon_container_set_font.
	Change font_size_table to have the difference from the base font size.
	Invalidate labels on style_set.
	
	* libathena-private/athena-icon-factory.c:
	(embedded_text_font_changed_callback), (embed_text):
	Use default widget font for embedded text.
	
	* src/athena-preferences-dialog.c:
	* src/athena-sidebar-title.c:
	Remove font prefs. Update on style_set.
	
	* src/athena-sidebar-tabs.c: (athena_sidebar_tabs_class_init),
	(athena_sidebar_tabs_load_theme_data), (style_set),
	(athena_sidebar_tabs_init), (athena_sidebar_tabs_destroy),
	(make_tab_text_layout):
	Use normal gtk+ fonts.
	
	* src/file-manager/fm-desktop-icon-view.c: (font_changed_callback),
	(fm_desktop_icon_view_update_icon_container_fonts),
	(fm_desktop_icon_view_init):
	Use desktop font.
	
	* src/file-manager/fm-icon-view.c:
	(default_zoom_level_changed_callback), (create_icon_container),
	(fm_icon_view_instance_init):
	(athena_sidebar_title_class_init), (style_set),
	(athena_sidebar_title_init), (update_title_font):
	Remove font handling.

2002-05-10  Anders Carlsson  <andersca@gnu.org>

	* src/athena-bookmark-list.c: (athena_bookmark_list_load_file):
	Check that the file exists before trying to parse it. This stops
	libxml from spewing crack "entity not found" messages.
	
2002-05-10  Damon Chaplin  <damon@ximian.com>

	* libathena-private/athena-directory-async.c (link_info_read_done):
	moved the athena_file_unref() to the end of the function.
	Hopefully fixes bug #80207.

2002-05-09  Damon Chaplin  <damon@ximian.com>

	* components/text/athena-text-view.c (read_file_callback): if the
	file size is 0, just report loading is complete and return.
	Fixes bug #79745.

2002-05-09  Alex Larsson  <alexl@redhat.com>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_update_menus):
	* src/file-manager/athena-icon-view-ui.xml:
	Fix menu mnemonic collision.
	Patch by Samuel Stringham <sams@e-sa.com>.

2002-05-09  Stuart MacLean <stuart@cs.dal.ca>
	* src/athena-window-menus.c
	(forget_history_if_confirmed): Make Clear History dialog
	consistent with other Athena dialogs.

2002-05-09  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_default_action_type_for_file): 
	(athena_mime_get_default_application_for_file_internal): 
	(athena_mime_get_default_component_for_file_internal): 
	(athena_mime_get_short_list_applications_for_file):
	(athena_mime_get_short_list_components_for_file):
	(athena_mime_get_all_applications_for_file): 
	(athena_mime_extend_all_applications_for_file): 
	(athena_mime_remove_from_all_applications_for_file): Plug leaks.
	(athena_mime_set_short_list_applications_for_file): Free the
	normal_short_list after computing the delta, and use g_list_free
	on normal_short_list_ids rather than eel_g_list_free_deep.
	(str_list_difference): Duplicate the strings before inserting them
	into the list.

2002-05-09  Dave Camp  <dave@ximian.com>
 
	* src/file-manager/fm-desktop-icon-view.c (mount_parameters_new): 
	(mount_parameters_free): Don't hold references to the view.

2002-05-08  Alex Larsson  <alexl@redhat.com>

	* libathena-private/apps_athena_preferences.schemas:
	* libathena-private/athena-file-utilities.c:
	* libathena-private/athena-file-utilities.h:
	* libathena-private/athena-file.c:
	* libathena-private/athena-file.h:
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-metafile.h:
	* libathena-private/athena-thumbnails.c:
	* libathena-private/athena-vfs-directory.c: 
	* src/athena-preferences-dialog.c:
	Remove public metadata

2002-05-09  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-icon-container.c (realize): Unref
	the style after setting it on the widget.

2002-05-08  Alex Larsson  <alexl@redhat.com>

	* data/browser.xml:
	* data/emblems/Makefile.am:
	* data/emblems/documents.png:
	* data/emblems/multimedia.png:
	* data/emblems/package.png:
	* data/emblems/web.png:
	* icons/default/Makefile.am:
	* icons/default/emblem-documents.png:
	* icons/default/emblem-multimedia.png:
	* icons/default/emblem-package.png:
	* icons/default/emblem-web.png:
	More emblems from jimmac.

2002-05-08  Alex Larsson  <alexl@redhat.com>

	* src/file-manager/fm-directory-view.c: 
	* src/file-manager/athena-directory-view-ui.xml:
	Show Properties -> Properties.

2002-05-08  Damon Chaplin  <damon@ximian.com>

	* src/athena-property-browser.c (add_new_pattern): handle the
	icon selector dialog being returned as NULL, which can happen if the
	user presses Escape or clicks OK/Cancel while the icons are loading.
	Fixes part of bug #75387.

2002-05-08  Damon Chaplin  <damon@ximian.com>

	* src/athena-window-manage-views.c (athena_window_back_or_forward):
	If we can't move in the given direction just return, and if the given
	distance to move is off the end of our history list just jump to the
	end. Do all this rather than a g_assert(). Fixes bug #77681.

2002-05-08  Alex Larsson  <alexl@redhat.com>

	* data/browser.xml:
	* data/emblems/Makefile.am:
	* data/emblems/art.png:
	* data/emblems/camera.png:
	* data/emblems/mail.png:
	* data/emblems/pictures.png:
	* data/emblems/sound.png:
	* icons/default/Makefile.am:
	* icons/default/emblem-art.png:
	* icons/default/emblem-camera.png:
	* icons/default/emblem-mail.png:
	* icons/default/emblem-pictures.png:
	* icons/default/emblem-sound.png:
	Add some new emblems from tigert's set.

2002-05-08  Alex Larsson  <alexl@redhat.com>

	* src/file-manager/athena-directory-view-ui.xml: 
	* src/athena-shell-ui.xml:
	Use gtk-new icon for new document.
	Ctrl-n is new window and Shift-Ctrl-n is new folder.

2002-05-08  Alex Larsson <alexl@redhat.com>

	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	* src/athena-preferences-dialog.c:
	Remove all references to the http proxy settings.
	These are now handled by gnome-vfs and the control-center.

=== athena 1.1.15 ===
 
2002-05-06  Alex Larsson  <alexl@redhat.com>

	* NEWS:
	* configure.in:
	Bump version to 1.1.15.

2002-05-05  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/athena-location-bar.c:
	(editable_event_after_callback): Don't expand ~ or ~/ until the user
	presses enter, bug 47239.
	(has_exactly_one_slash): Removed.

2002-05-05  David Emory Watson  <dwatson@cs.ucr.edu>

	* libathena-private/athena-global-preferences.c: Make list view
	default to 75% zoom to get "nice" looking font size while maintaining
	range of different font sizes.

	* src/file-manager/fm-list-view.c:
	(button_press_callback): Don't let the list view unselect anything when
	the user attempts to get the right-click menu on a selection.
	(fm_list_view_set_zoom_level): Invent equivalent of XXX_LARGE and make
	the font size at all zoom levels one bigger.

2002-05-04  David Emory Watson  <dwatson@cs.ucr.edu>

	* configure.in: Require eel 1.1.13.

	* src/athena-location-bar.c:
	(try_to_expand_path): Handle filenames with embeded or trailing white-
	space.  Fixes bug 46582.  Also fixes a minor utf8 bug that crept into
	the build.

2002-05-05  Christophe Merlet  <christophe@merlet.net>

       * src/file-manager/athena-desktop-icon-view-ui.xml:
       Fixed a typo.

2002-05-03  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/athena-location-bar.c:
	(try_to_expand_path): Remove extranious check (we always expand "~/"
	before we get here) and call set_position_and_selection_to_end () since
	the behavior of gtk_entry_set_text () has changed.
	(editable_event_after_callback): Useless optimization.
	(athena_location_bar_set_location): Call set_position_and_selectio...

2002-05-01  David Emory Watson  <dwatson@cs.ucr.edu>

	Implement zooming for the list view and other small cleanups.

	* src/file-manager/fm-list-view.c:
	(create_and_set_up_tree_view): Keep track of cell renderers.
	(fm_list_view_begin_loading): Set initial zoom level.
	(set_zoom_level_from_metadata_and_preferences),
	(fm_list_view_set_zoom_level),
	(fm_list_view_bump_zoom_level),
	(fm_list_view_zoom_to_level),
	(fm_list_view_restore_default_zoom_level),
	(fm_list_view_can_zoom_in),
	(fm_list_view_can_zoom_out),
	(default_zoom_level_changed): Impl.
	(fm_list_view_class_init): Hook up zoom auto value.
	(fm_list_view_instance_init): Use while_alive to monitor changes to
	default_zoom_level and click_policy.
	(fm_list_view_finalize): Update click_policy callback.

	Added a column for each pixbuf size to the model.

	* src/file-manager/fm-list-model.c,
	src/file-manager/fm-list-model.h:
	(fm_list_model_get_column_type): Update.
	(fm_list_model_get_column_id_from_zoom_level),
	(fm_list_model_get_zoom_level_from_column_id): Impl.
	(fm_list_model_get_value): Update.

2002-05-01  David Bordoley <bordoley@msu.edu>

	* src/athena-shell-ui.xml
	Made bookmark shortcut keys hig compliant
	Switched Home shortcut key to Alt-Home
	
	* src/file-manager/athena-directory-view-ui.xml
	Removed shortcut key for duplicate

2002-05-01 David Bordoley <bordoley@msu.edu>

       * data/Makefile.am:
       Remove favorites .desktop file

       * src/file-manager/athena-directory-view-ui.xml:
       Added stock icon for move to trash

       * src/athena-shell-ui.xml:
       Removed athena quick references
       Changed "Athena User Manual" to "Contents"
       Added stock help icon
       Added F1 shortcut key for help

       * src/athena-windows-menus.c:
       Removed athena quick references

2002-05-01  Jacob Berkman  <jacob@ximian.com>

	* configure.in (AC_OUTPUT): remove new sidebar

2002-04-30  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-link-desktop-file.c (athena_link_desktop_file_local_create):
	Encode new desktop files in UTF8.

2002-04-30  Alex Larsson  <alexl@redhat.com>

	* components/Makefile.am:
	Disable news sidebar.

2002-04-30  Alex Larsson  <alexl@redhat.com>

	* src/athena-shell-ui.xml:
	Removed ellipsis from items that are meant brings up dialog and
	nothing more. IE: About, Preferences and Edit Bookmarks.
	Change Back/Forward/Up keyboard shortcuts to be Alt-<cursor-key>

	* libathena-private/athena-icon-container.c (key_press_event):
	Don't eat alt-down key events.

	* src/athena-preferences-dialog.c:
	Disable news preferences.

	* src/file-manager/athena-directory-view-ui.xml:
	Use Alt-down as alternative open.
	

2002-04-29 David Bordoley <bordoley@msu.edu>

       * src/athena-shell-ui.xml:
       Changed tooltip for up arrow

       * file-manager/fm-directory-view.c
       * file-manager/athena-directory-view-ui.xml:
	Changed "Show Properties" to "Properties"
	
       * src/file-manager/athena-desktop-icon-view-ui.xml:
       * src/file-manager/athena-directory-view-ui.xml:
       Change "Reset Background" to "Use Default Background".

=== athena 1.1.14 ===
 
2002-04-28  Alexander Larsson  <alla@lysator.liu.se>

	* NEWS:
	* configure.in:
	Bump version to 1.1.14.
	Require eel 1.1.12

2002-04-27  Alexander Larsson  <alexl@redhat.com>

	* libathena-private/athena-dnd.c:
	(athena_drag_default_drop_action_for_icons),
	(athena_drag_drop_action_ask):
	* libathena-private/athena-dnd.h:
	* libathena-private/athena-icon-dnd.c:
	(selection_is_image_file),
	(athena_icon_container_receive_dropped_icons),
	(athena_icon_container_get_drop_action), (drag_motion_callback):
	Make dnd modifiers behave like standard Gtk+ (#76789).
	Implemented "Set as Background" for dnd action == ASK.

2002-04-27  Alexander Larsson  <alexl@redhat.com>

	* data/preferences.desktop.in:
	Name is now "Desktop Preferences"
	
	* src/file-manager/fm-directory-view.c: 
	* src/file-manager/athena-directory-view-ui.xml:
        "Remove Custom Images" -> "Remove Custom Icons" for consistency
	
	* src/athena-shell-ui.xml:
	Move preferences to bottom of menu.

	patches from Dave Bordoley <bordoley@msu.edu>
		
2002-04-27  Dave Camp  <dave@ximian.com>

	* src/athena-zoom-control.c (nearest_preferred): Initialize
	current_value.

2002-04-26  Alex Larsson <alexl@redhat.com>

	* src/athena-shell-ui.xml:
	Close window at end of menu according to HIG.
	
	patch from Dave Bordoley <bordoley@msu.edu>
		
2002-04-26  Alex Larsson <alexl@redhat.com>

	* src/athena-shell-ui.xml:
	HIG compliant toolbar button ordering

	patch from Dave Bordoley <bordoley@msu.edu>
	
2002-04-26  Alex Larsson  <alexl@redhat.com>

	* src/file-manager/athena-directory-view-ui.xml:
	Stock icons for new window, and zooming. Don't use
	stock icons for close all (duplicate use of stock).
	
	* src/athena-shell-ui.xml:
	Stock icon for open.
	"Reset View to Match _Preferences" -> "Reset View to _Defaults"
	Stock icons for cut and paste.
	Stock icons for open.
	
	* src/athena-window-menus.c: (refresh_go_menu):
	Limit history to 10 entries.

	Based on patches from Dave Bordoley <bordoley@msu.edu>

2002-04-26  Damon Chaplin  <damon@ximian.com>

	* components/notes/athena-notes.c (make_notes_view): turn on
	word-wrapping for the GtkTextView. Fixes bug #75209.
	(Approved by Alex Larsson)

2002-04-24  Dave Camp  <dave@ximian.com>

	* src/athena-view-frame.c: (athena_view_frame_set_zoom_level):
	* src/athena-view-frame.h:
	* src/athena-window-manage-views.c:
	(zoom_parameters_changed_callback):
	* src/athena-window-private.h:
	* src/athena-window.c: (athena_window_zoom_to_level): Replace
	doubles in the zoom interfaces with floats to match the bonobo
	zoomable interface.
 
	* src/athena-zoom-control.c:
	(athena_zoom_control_expose): Draw the focus rectangle if the
	zoom control is focused.
	(athena_zoom_control_button_press_event): Grab focus.
	(zoom_menu_callback), (create_zoom_menu_item),
	(athena_zoom_control_change_value),
	(athena_zoom_control_set_zoom_level),
	(athena_zoom_control_set_parameters): Replace double with float.
	(athena_zoom_control_class_init): Initialize keybindings.
	(athena_zoom_control_get_accessible),
	(athena_zoom_control_accessible_do_action),
	(athena_zoom_control_accessible_get_n_actions),
	(athena_zoom_control_accessible_action_get_description),
	(athena_zoom_control_accessible_action_get_name),
	(athena_zoom_control_accessible_action_interface_init),
	(athena_zoom_control_accessible_get_current_value),
	(athena_zoom_control_accessible_get_maximum_value),
	(athena_zoom_control_accessible_get_minimum_value),
	(nearest_preferred),
	(athena_zoom_control_accessible_set_current_value),
	(athena_zoom_control_accessible_value_interface_init),
	(athena_zoom_control_accessible_get_name),
	(athena_zoom_control_accessible_get_description),
	(athena_zoom_control_accessible_class_init),
	(athena_zoom_control_accessible_get_type): Implement the zoom
	accessible.
	* src/athena-zoom-control.h: Added the change_value signal.

2002-04-26  Damon Chaplin  <damon@ximian.com>

	* libathena-private/athena-directory-metafile.c
	(athena_directory_get_file_metadata): check the ev for errors.
	If an error occurs output a warning and return the default value.
	Fixes bug #73456. (Approved by Alex Larsson)

2002-04-26  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* libathena-private/athena-program-chooser.c:
	(launch_mime_capplet_on_ok),
	(athena_program_chooser_show_no_choices_message):
	Changed OK to Yes, as this is a Yes/No question.
	Fixed dialog to really open the capplet when choosing yes (#75372).

	* athena.desktop.in: (Bugzilla Bug: 75830) Use the stock home icon
	for the Home folder in applications menu. 
	(Patch from Dennis Cranston <dennis_cranston@yahoo.com>)

2002-04-26  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-theme.c:
	(athena_theme_install_user_theme):
	Allow installation of tared themes.
	
	* libathena-private/athena-theme.h:
	* src/athena-theme-selector.c:
	(file_selection_ok_clicked_callback):
	Better warnings for non-theme files.

2002-04-26  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-volume-monitor.c:
	* libathena-private/athena-volume-monitor.h:
	Added new function athena_volume_get_device_path.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(have_volume_format_app), (have_volume_properties_app),
	(have_volume_protection_app), (volume_ops_callback),
	(volume_link_device_type), (real_update_menus), (real_merge_menus):
	* src/file-manager/athena-desktop-icon-view-ui.xml:
	Add support for various volume properties helper applications.

	Based on patch from Rajeev Karale <rajeev.karale@wipro.com>

Thu Apr 25 12:22:57 2002  Jonathan Blandford  <jrb@gnome.org>

	* data/serverconfig.directory.in (_Name): 
	* data/serverconfig.desktop.in (_Name): 
	s/Server Configuration/Server Settings

	* src/athena-bookmarks-window.c (athena-bookmarks-window.c):
	Small UI tweaks.

2002-04-24  Jody Goldberg <jody@gnome.org>

	* src/file-manager/fm-list-model.c
	(fm_list_model_get_attribute_from_sort_column_id) : suppress warning
	  to fix the build.

2002-04-24  Murray Cumming  <murrayc@usa.net>

	* Added the necessary bonobo_object_ref() to my previous commit,
	to prevent crashing during the unref when the window closes.

2002-04-23  Murray Cumming  <murrayc@usa.net>

	* src/athena-window.c (athena_window_instance_init):
	Now that BonoboWindow has been fixed, it is no longer necessary
	to create and set the UIContainer. 
	
2002-04-22	Diego GonzÃ¡lez  <diego@pemas.net>

	* src/file-manager/fm-list-model.[c-h]
	  (fm_list_model_get_sort_column_id_from_attribute): fix typo
	  (fm_list_model_get_attribute_from_sort_column_id): implement

	* src/file-manager/fm-list-view.c
	  (create_and_set_up_tree_view): connect to sort_column_changed signal of 
	  the model
	  (rows_reordered_callback): implement, it stores the metadata of the
	  directory that is being viewed
	  (get_attribute_from_sort_type): remove, no longer needed
	  (real_get_default_sort_attribute): remove, no longer needed
	
Tue Apr 23 16:18:05 2002  Owen Taylor  <otaylor@redhat.com>

	* src/athena-preferences-dialog.c (dialog_button_response_callback):
	Fix build breakage from misapplied patch in last commit.

2002-04-23  Ganesan Sethuraman <ganesan.sethuraman@wipro.com>
         
         * src/athena-preferences-dialog.c : Handled the "delete_event"
         signal. Fixes bug #73850
 
2002-04-23  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* src/file-manager/fm-icon-container.c:
	(fm_icon_container_get_icon_text): 
	Don't show the normal extra information for desktop files (#74910).

2002-04-23  Rajeev Karale <rajeev.karale@wipro.com>

	* libathena-private/athena-volume-monitor.c: finish_creating_volume()
	Bug Fixing : #77313. Mount_path for volume is different for solaris.

2002-04-22  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-icon-container.c:
	(lay_down_icons_tblr):
	Take pixels_per_unit into account when setting width and height.
	
2002-04-22  Anders Carlsson  <andersca@gnu.org>

	* src/athena-property-browser.c:
	(athena_property_browser_init), (athena_emblem_dialog_new),
	(athena_color_selection_dialog_new), (add_new_pattern),
	(add_new_color), (athena_property_browser_update_contents):
	Re-add the length limit for color and emblem names. Also fix
	button ordering to be Add, Remove. Finally, set up focus correctly
	for entries.
	
	* src/athena-theme-selector.c: (create_button_with_stock_image),
	(athena_theme_selector_instance_init):
	Add stock icons to Add and Remove buttons.
	
=== athena 1.1.13 ===
 
2002-04-21  Alexander Larsson  <alla@lysator.liu.se>

	* NEWS:
	* configure.in:
	Bump version to 1.1.13.
	Require eel 1.1.11

2002-04-21  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-directory-background.c:
	Remove deprecated usage of gnome-config.
	Patch by Diego GonzÃ¡lez <diego@pemas.net>
	
2002-04-21  Alexander Larsson  <alla@lysator.liu.se>

	* src/file-manager/fm-properties-window.c
	(create_properties_window): Add close button.
	Patch from Benedikt Roth <Benedikt.Roth@gmx.net>

2002-04-21  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-shell-ui.xml:
	Stock icons for back, forward, up, home, new, close,
	add bookmarks
	
	* icons/default/default.xml:
        * icons/crux_teal/crux_teal.xml:
	* icons/crux_eggplant/crux_eggplant.xml:
	Point throbber to http://www.gnome.org/athena/

	* icons/default/Makefile.am:
        * icons/crux_teal/Makefile.am:
	* icons/crux_eggplant/Makefile.am:
	* icons/default/Makefile.am:
	* icons/*/[Back|Forward|Home|Refresh|Stop|Up].png:
	Use stock toolbar items for all out themes.
	
	Patches from Dave Bordoley <bordoley@msu.edu>
	
2002-04-21  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-preferences-dialog.c:
	* src/file-manager/fm-icon-view.c:
	* src/athena-shell-ui.xml:
	* src/athena-window-menus.c:
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/athena-icon-view-ui.xml:
	Patches from sander for better HIG compliance
	Lay Out Items -> Arrange Items
	View Preferences -> View Defaults
	Forget History -> Clear History
	Reset View to Match Preferences -> Reset View to Default
	
2002-04-22  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-directory-async.c:
	(should_read_link_info_sync), (link_info_read_done),
	(link_info_start):
	Read .desktop files sync if they're local. This speeds
	up loading directories that have .desktop files in them.
	
2002-04-21  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-directory-background.c
	(image_loading_done_callback), (make_root_pixmap):
	Check the return value of XOpenDisplay and handle
	failures.
	
2002-04-21  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-desktop-window.c (athena_desktop_window_class_init):
	Disable the whole flash-workaround hack since it doesn't work
	and is causing crashes on solaris.

2002-04-21  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-window.h:
	* src/athena-window-manage-views.c:
	Only display toplevel window when it's fully constructed.

	* src/athena-desktop-window.c (athena_desktop_window_new): 
	* src/athena-application.c (athena_application_create_desktop_window):
	Don't show desktop window here. It's shown later when the view
	is loaded.

	* libathena-private/athena-horizontal-splitter.c
	(athena_horizontal_splitter_pack2): Remove old code that is
	not neccesary when we display the window fully constructed.

2002-04-21  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-icon-container.c:
	(icon_set_position),
	(athena_icon_container_update_scroll_region):
	Take pixels_per_unit into account when dealing with widget
	coordinates in the fixed mode.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_finalize), (get_default_zoom_level),
	(default_zoom_level_changed), (fm_desktop_icon_view_init):
	Have the desktop view use the default icon view zoom level.
	
2002-04-21  Anders Carlsson  <andersca@gnu.org>

	* src/athena-zoom-control.c 
	(athena_zoom_control_button_press_event): 
	Don't do anything with double-click or triple-click events.

	* components/text/athena-text-view.c:
	(athena_text_view_finalize), (athena_text_view_class_init):
	AthenaView is a GObject, not a GtkObject.
	
	* src/athena-sidebar-title.c:
	(athena_sidebar_title_select_text_color),
	Set shadow color and offset using new eel functions.
	
	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	Don't show translator credits when we don't need to.
	Also add myself as an author :)
	
2002-04-20  Diego GonzÃ¡lez  <diego@pemas.net>

	* src/athena-preferences-dialog.c: split "Windows & Desktop" into two
	  blocks "Windows" and "Desktop & Trash". Fixes bug 72931.

2002-04-20  Diego GonzÃ¡lez  <diego@pemas.net>

	* libathena-private/athena-find-icon-image.c (make_full_icon_path):
	  if the path is not partial also check that the icon exists with the
	  suffix passed. With this we are able to see the correct icons when they
	  are given with the whole path.
 
2002-04-20  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-drag-window.c:
	(athena_drag_window_register):
	Disable drag window registration for now.
	
	* libathena-private/athena-global-preferences.c:
	Change extra monitor paths to account for the rename.
	
	* athena.desktop.in:
	Update icon path.
	
	* src/file-manager/fm-properties-window.c: (reset_icon),
	(fm_properties_window_drag_data_received), (set_icon_callback):
	Add support for dragging the reset icon to remove custom icons.
	
	* src/athena-property-browser.c: (athena_emblem_dialog_new),
	(athena_color_selection_dialog_new), (emblem_keyword_valid),
	(add_new_emblem):
	Fix "Add new emblem" dialog and add mnemonics.
	
2002-04-20  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/apps_athena_preferences.schemas:
	Add more keys to the schemas files. Based on work by
	Luis Gutierrez <luisgtz@megared.net.mx>

2002-04-20  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-global-preferences.h
	Use underscore instead of dashes in gconf keys.
	
	* libathena-private/Makefile.am
	* libathena-private/athena.schemas:
	* libathena-private/apps_athena_preferences.schemas:
	Renamed schemas file to apps_athena_preferences.schemas.
	Some new keys are documented.

	This patch is from Jonathan Blandford <jrb@redhat.com>

2002-04-20  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-icon-container.c (lay_down_icons_horizontal):
	Fruitless attempt to optimize icon layout. It turns out it is text-measure and
	icon lookup bound. I'm checking in this optimization anyway, even though it
	doesn't help much.
	(athena_icon_container_class_init): icon_removed was using the wrong
	struct offset.

	* src/athena-window-menus.c:
	Add me to authors :)

2002-04-20  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-drag-window.c 
	(athena_drag_window_register): 
	Disable this feature until we come up with a 
	better way to do it.
	
	* configure.in:
	Fix profiler CFLAGS.
	
	* libathena-private/athena-file-utilities.c:
	* libathena-private/athena-file-utilities.h:
	Remove time stamp and build message functions.
	* src/athena-profiler.c: (widget_set_busy_cursor),
	(dump_dialog_new):
	Remove deprecated functions.
	
	* src/athena-window-manage-views.c: (update_title):
	Remove time stamp in title.
	
	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	Remove unused build_message variable.
	
	* src/athena-window.c: (athena_window_instance_init):
	Set initial title to "Athena". Fixes #74627.

2002-04-19	Diego GonzÃ¡lez  <diego@pemas.net>

	* src/athena-window-menus.c (forget_history_if_confirmed):
	  use eel_create_question_dialog to show the buttons with the
	  proper strings. This fixes bug 74949.

2002-04-19  Anders Carlsson  <andersca@gnu.org>

	* src/file-manager/fm-directory-view.c:
	(clipboard_targets_received):
	Free targets.
	
	* src/athena-component-adapter-factory.c:
	Fix a spelling error, #79195.
	
2002-04-19  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-file-operations.c 
	(handle_transfer_vfs_error): Abort on GTK_RESPONSE_DELETE_EVENT.
	Fixes #78948.

	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	Remove ATHENA_PREFERENCES_CAN_ADD_CONTENT.
	
	* src/file-manager/fm-list-view.c: (event_after_callback),
	(button_release_callback), (create_and_set_up_tree_view):
	When in single-click mode, activate files on button release
	instead of button press.
	
	* src/athena-property-browser.c:
	(athena_property_browser_init),
	(athena_property_browser_destroy),
	(athena_property_browser_new),
	(athena_color_selection_dialog_new), (add_new_pattern),
	(add_color_to_browser), (show_color_selection_window),
	(athena_property_browser_update_contents):
	Fix the add and remove dialogs and add a few mnemonics. Fixes
	#79123.
	
	* src/athena-sidebar-title.c: (update_title), (update_more_info),
	(update_emblems), (update_notes):
	Remove fixed FIXMEs.
	
2002-04-19  Anders Carlsson  <andersca@gnu.org>

	* components/throbber/athena-throbber.c: (get_bonobo_properties),
	(set_bonobo_properties), (athena_throbber_instance_init),
	(load_themed_image), (athena_throbber_load_images):
	Make the throbber smaller if we're using a toolbar without 
	text labels. Fixes #47777.
	
2002-04-18  Michael Meeks  <michael@ximian.com>

	* *.server.in, *.c: replace all the OAFIIDs with more
	sensibly named ones, that follow the namespacing
	guidelines in the libbonobo/docs/FAQ. Needs a new
	gnome-vfs to work well.
	
	* src/athena-window-toolbars.c
	(throbber_set_throbbing): impl.
	(throbber_created_callback): upd.
	(athena_window_allow_stop): upd.

	* libathena-private/athena-mime-actions.c
	(athena_do_component_query): remove hack around bonobo's
	sample text component, we no longer have one.

2002-04-17  Anders Carlsson  <andersca@gnu.org>

	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_drag_data_received):
	Get the "exactly one" check right. Fixes #75187.
	
2002-04-17  Anders Carlsson  <andersca@gnu.org>

	* src/file-manager/fm-directory-view.c:
	(clipboard_targets_received), (real_update_menus):
	Query the clipboard TARGET types so we can set the sensitivity
	of the "Paste Files" items accordingly.
	
2002-04-17  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-customization-data.c:
	(add_reset_text):
	* libathena-private/athena-theme.c:
	(athena_theme_make_preview_pixbuf):
	* src/athena-property-browser.c: (element_clicked_callback):
	Plug memory leaks.
	
2002-04-17  Anders Carlsson  <andersca@gnu.org>

	* components/hardware/athena-hardware-view.c:
	(athena_hardware_view_class_init),
	(athena_hardware_view_finalize):
	Use ::finalize instead of ::destroy so we don't free 
	data twice.
	
2002-04-17  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-volume-monitor.c:
	(athena_file_system_type_free):
	Remove debugging output.
	
	* src/file-manager/fm-directory-view.c: (fm_directory_view_init),
	(fm_directory_view_finalize), (convert_file_list_to_string),
	(get_clipboard_callback), (clear_clipboard_callback),
	(copy_or_cut_files), (clipboard_received_callback),
	(paste_files_callback), (fm_directory_view_class_init):
	Use GtkClipboard instead of using a selection on the window.
	This simplifies a lot of the code and fixes #77684.
	
2002-04-17  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_init):
	Fixup padding so that the dialog looks more like the 
	Athena 1.0 one.
	
	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_finalize):
	Unref the layouts.
	
	* libathena-private/athena-volume-monitor.c:
	(load_file_system_table), (athena_volume_monitor_class_init),
	(athena_volume_monitor_finalize), (get_mount_list),
	(athena_file_system_type_free),
	(load_additional_mount_list_info):
	Free the file system table on ::finalize.
	
	* src/file-manager/fm-list-model.c: (fm_list_model_finalize):
	Free details on ::finalize.
	
2002-04-17  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in,po/vi.po: Added Vietnamese po file

=== athena 1.1.12 ===
 
2002-04-14  Alexander Larsson  <alla@lysator.liu.se>

	* NEWS:
	* configure.in:
	Bump version to 1.1.12.
	Require eel 1.1.10

2002-04-14  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-icon-container.c (athena_icon_container_add):
	Avoid gnome-canvas move to top operation if there is no
	rubber-band selection, because the new item will be on top already,
	and the extra move_to_top was showing up badly on profiles.

2002-04-13  Alexander Larsson  <alla@lysator.liu.se>

	* components/text/Makefile.am:
	* components/text/Athena_View_text.server.in:
	* components/text/athena-text-view.c:
	New text view, by Dave Camp <dave@ximian.com>

2002-04-13  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-shell-ui.xml:
	Fix tooltip name for Home. Patch from dave <dm9211@bris.ac.uk>

2002-04-11  Jody Goldberg <jody@gnome.org>

	* libathena-private/athena-program-chooser.c :
	Change file-types-capplet to gnome-file-types-properties.

2002-03-30  Jody Goldberg <jody@gnome.org>

	* libathena-private/athena-mime-actions.c
	(athena_mime_set_short_list_components_for_file) : Don't free the
	  objects while we're still looking at their iids.  Don't double free
	  the iids.

2002-04-11  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_accessible_get_type): return
	an invalid type in an inaccessible scenario.
	(athena_icon_canvas_item_accessible_create): return
	a no-op object if no a11y enabled.

2002-04-10  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-canvas-item.h:
	remove bounds_changed.

2002-04-07  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/file-manager/fm-list-model.c:
	(fm_list_model_add_file): Fix mixed up comparison.
	(set_sort_order_from_metadata_and_preferences),
	(fm_list_view_reset_to_defaults): Should be GTK_SORT_DESCENDING when
	sort_reversed, bug 77174.
	* src/file-manager/fm-list-view.c:
	(fm_list_view_finalize): Oops, I screwed up the disconnect last time...

2002-04-09  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_class_init): remove unused
	'bounds_changed' signal.
	(athena_icon_canvas_item_update_bounds): don't emit
	it either.

	* src/file-manager/fm-icon-view.c
	(icon_container_compare_icons_callback): kill.
	(icon_container_compare_icons_by_name_callback): kill.
	(fm_icon_view_compare_files): publicize.
	(compare_files_cover): upd.

	* src/file-manager/fm-desktop-icon-view.c
	(desktop_icons_compare_callback): move
	(fm_desktop_icon_view_init): upd.

	* libathena-private/athena-icon-container.c
	(athena_icon_container_get_icon_text),
	(athena_icon_container_get_icon_images): wrap the
	virtual methods.
	(athena_icon_container_update_icon): upd. to use them.
	(sort_icons_by_name, compare_icons_by_name),
	(compare_icons, sort_icons): use the virtual methods
	instead for speed.
	(athena_icon_container_class_init): prune some signals.

	* src/file-manager/fm-icon-view.c
	(create_icon_container): use the fm-icon-container.
	(create_icon_container): upd.
	(get_icon_images_callback),
	(get_icon_text_callback): move

	* src/file-manager/fm-icon-container.[ch]: impl.
	(fm_icon_container_get_icon_images),
	(fm_icon_container_get_icon_text): move
	(fm_icon_container_compare_icons),
	(fm_icon_container_compare_icons_by_name): impl.
	(fm_icon_container_icons_compare): move here.
	create this to handle special desktop bits.
	(fm_icon_container_set_sort_desktop): impl.

2002-04-09  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-customization-data.c:
	* src/athena-property-browser.c (make_drag_image):
	Handle svg emblems.

2002-04-07  Diego Gonzalez  <dggonz@yahoo.com>

	* src/file-manager/fm-list-view.c (create_and_set_up_list_view):
	  make columns in the list view resizable, bug 74749

2002-04-07  Diego Gonzalez  <dggonz@yahoo.com>

	* src/file-manager/athena-desktop-icon-view-ui.xml
	  add "New Laucher" item
	* src/file-manager/fm-desktop-icon-view.c:
	  (new_launcher_callback) hook and implement

2002-04-06  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/file-manager/fm-list-model.c:
	(fm_list_model_get_sort_column_id_from_sort_type): Size was incorrectly
	returning name, bug 76191.

2002-04-07  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-icon-factory.c:
	Keep track of file size in addition to mtime when
	determining if the cache is uptodate.
	I needed this for a script that changes the size
	of the file, but keeps the mtime.

2002-04-07  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-global-preferences.c:
	ATHENA_PREFERENCES_IMAGE_FILE_THUMBNAIL_LIMIT is an integer
	(global_preferences_register_enumerations): Allow integer enum
	prefs.
	
	* src/athena-preferences-dialog.c:
	Make ATHENA_PREFERENCES_IMAGE_FILE_THUMBNAIL_LIMIT a
	EEL_PREFERENCE_ITEM_ENUMERATION_MENU_INTEGER.

2002-04-05  David Emory Watson  <dwatson@cs.ucr.edu>

	This fixes single click activation in the list view, bug 76197.

	* src/file-manager/fm-list-view.c:
	(list_activate_callback): only do this if the double click activation
	preference is set.
	(event_after_callback): handle single click activation preference.
	(click_policy_changed): new function to handle whether file names
	are underlined or not.
	(create_and_set_up_tree_view): connect click policy preference callback
	(fm_list_view_finalize): disconnect.

2002-04-05  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/athena-sidebar.c:
	(receive_dropped_uri_list): now g_strsplit returns an additional empty
	string when a delimiter is present at the end of the parameter string.

2002-04-05  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-metafile.c:
	(metafile_read_check_for_directory): fix bug 77520 by replacing assert
	with conditional call to metafile_read_done.

2002-04-05  Michael Meeks  <michael@ximian.com>

	* components/throbber/athena-throbber.c
	(athena_throbber_accessible_class_init),
	(athena_throbber_accessible_initialize), 
	(athena_throbber_accessible_get_type),
	(athena_throbber_get_accessible): impl.
	(athena_throbber_class_init): upd.
	(athena_throbber_accessible_image_get_size): 
	(athena_throbber_accessible_image_interface_init): 
	(athena_throbber_set_location): split out of
	(athena_throbber_button_release_event): here.
	(athena_icon_container_accessible_do_action): use it.
	(athena_throbber_accessible_get_n_actions),
	(athena_throbber_accessible_action_get_description),
	(athena_throbber_accessible_action_get_name),
	(athena_throbber_accessible_action_get_keybinding),
	(athena_throbber_accessible_action_set_description),
	(athena_throbber_accessible_action_interface_init): impl.

2002-04-04  Michael Meeks  <michael@ximian.com>

	* src/athena-window-toolbars.c
	(create_back_or_forward_toolbar_item): add tooltip
	parameter so we can get a11y descriptions.
	(athena_window_initialize_toolbars): upd.

	* src/athena-window.c
	(athena_window_instance_init): create a tooltips object.
	(athena_window_destroy): kill it.

	* src/athena-shell-ui.xml: prune some cruft.

	* components/music/athena-music-view.c
	(athena_music_view_set_album_image): set image name.

2002-04-04  jacob berkman  <jacob@ximian.com>

	* src/file-manager/fm-desktop-icon-view.c
	(change_background_callback): the background crapplet changed
	names (again)

2002-04-02  Michael Meeks  <michael@ximian.com>

	* This commit requires a newer eel, which requires gail.
	
	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_finalize): free text util.
	(athena_icon_canvas_item_set_property): sync the text.
	(athena_icon_canvas_item_accessible_create): create the
	text util idly as required.
	(athena_icon_canvas_item_image_interface_init),
	(athena_icon_canvas_item_get_text): impl.
	(athena_icon_canvas_item_class_init): add interface,
	should do it in a get_type, but artefact of boilerplate
	macros hiding that.
	(athena_icon_canvas_item_get_type): bin boilerplate
	so we can add an interface.
	(athena_icon_canvas_item_set_property): add atk
	focus notification / tracking.

2002-03-28  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-container.c
	(start_rubberbanding): set name / description on the
	selection rectangle.

2002-03-30  Dave Camp  <dave@ximian.com>

        * libathena-private/athena-icon-canvas-item.c:
        (athena_icon_canvas_item_accessible_get_parent):
        (athena_icon_canvas_item_accessible_get_index_in_parent): New
        functions.
        (athena_icon_canvas_item_accessible_class_init): Initialize
        get_parent and get_index_in_parent.

        * libathena-private/athena-icon-container.c: (get_accessible),
        (athena_icon_container_class_init): Init get_accessible, add
        icon_added, icon_removed, and cleared signals.
        (finish_adding_icon): Emit icon_added.
        (athena_icon_container_remove): Emit icon_removed.
        (accessible_get_priv),
        (athena_icon_container_accessible_do_action),
        (athena_icon_container_accessible_get_n_actions),
        (athena_icon_container_accessible_action_get_description),
        (athena_icon_container_accessible_action_get_name),
        (athena_icon_container_accessible_action_get_keybinding),
        (athena_icon_container_accessible_action_set_description),
        (athena_icon_container_accessible_action_interface_init),
        (athena_icon_container_accessible_update_selection),
        (athena_icon_container_accessible_selection_changed_cb),
        (athena_icon_container_accessible_icon_added_cb),
        (athena_icon_container_accessible_icon_removed_cb),
        (athena_icon_container_accessible_cleared_cb),
        (athena_icon_container_accessible_add_selection),
        (athena_icon_container_accessible_clear_selection),
        (athena_icon_container_accessible_ref_selection),
        (athena_icon_container_accessible_get_selection_count),
        (athena_icon_container_accessible_is_child_selected),
        (athena_icon_container_accessible_remove_selection),
        (athena_icon_container_accessible_select_all_selection),
        (athena_icon_container_accessible_selection_interface_init),
        (athena_icon_container_accessible_get_n_children),
        (athena_icon_container_accessible_ref_child),
        (athena_icon_container_accessible_initialize),
        (athena_icon_container_accessible_finalize),
        (athena_icon_container_accessible_class_init),
        (athena_icon_container_accessible_get_type): New functions.

        * libathena-private/athena-icon-container.h: Added class
        members for the icon_added, icon_removed, and cleared signals.

2002-03-30  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-metafile.c: (write_all): New.
	(metafile_write_local): Use write_all to do the multiple writes that
	might be necessary in some cases.

2002-03-30  Darin Adler  <darin@bentspoon.com>

	Fixed security problem where we would write the metafile without
	protecting against potential symbolic links.

	* libathena-private/athena-metafile.c: (finalize): Update to
	use more text URIs, and fewer GnomeVFSURI objects.
	(construct_private_metafile_uri): Make a text URI, not a GnomeVFSURI.
	(athena_metafile_set_directory_uri): Use text URIs, not GnomeVFSURIs,
	for the locations of the public and private metafiles.
	(metafile_get_file_uri): Much simplified to use text URIs.
	(metafile_read_restart): Simplified to use text URIs.
	(metafile_write_succeeded): Broke out this common code needed for
	both local and async. success cases.
	(metafile_write_success_close_callback): Call metafile_write_succeeded.
	(metafile_write_local): New, does a metafile write safely using mkstemp
	and rename. All synchronous, which should be OK most of the time.
	(metafile_write_start): Use metafile_write_local for "file:" URLs and
	the existing code for other URLs.

2002-03-29  Jody Goldberg <jody@gnome.org>

	* libathena-private/athena-program-chooser.c
	(launch_mime_capplet_and_close_dialog) : don't delete the dialog, we
	  need to have it send a response (anything but OK I think) so that
	  the nested main loop will exit.

2002-03-27  Mark McLoughlin  <mark@skynet.ie>

	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list): don't
	assume its a local uri, but instead use gnome_desktop_item_new_from_uri.

2002-03-28  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-thumbnails-jpeg.c:
	Nasty libjpeg b0rkage workarounds. Now jpeg
	thumbnailing should work again.

2002-03-28  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-thumbnails-jpeg.c:
	Temporary revert libjpeg patch to keep it building.
	Will fix for real later.

2002-03-28  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-thumbnails.c:
	Thumbnail in a low priority idle handler instead of
	in a 400ms timeout. Damn, it's fast!

2002-03-28  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-thumbnails-jpeg.c:
	Don't define JCONFIG_INCLUDED. That breaks libjpeg for me.
	
	* libathena-private/athena-thumbnails.c:
	Use the global thumbnail if there is one, and the local
	one had the wrong timestamp. Otherwise we will loop if
	the local one is wrong and we can't write to the local
	directory.

2002-03-28  Dave Camp  <dave@ximian.com>

	* configure.in: Check for and include X libraries explicitly.

2002-03-28  David Emory Watson  <dwatson@cs.ucr.edu>

	* libathena-private/athena-link.h: Changed the comment for
	athena_link_local_is_special_link to be more clear.

2002-03-27  David Emory Watson  <dwatson@cs.ucr.edu>

        * libathena-private/athena-link.c,
        libathena-private/athena-link.h:
        (athena_link_local_is_volume_link),
        (athena_link_local_is_home_link),
        (athena_link_local_is_trash_link),
        (athena_link_local_is_special_link): Share code between different
        link implementations so that home directory link behavior can be
        controlled from one place.

        * libathena-private/athena-link-desktop-file.c,
        libathena-private/athena-link-desktop-file.h:
        (athena_link_desktop_file_local_is_volume_link),
        (athena_link_desktop_file_local_is_home_link),
        (athena_link_desktop_file_local_is_trash_link): Remove.

        * libathena-private/athena-link-historical.h,
        libathena-private/athena-link-historical.c:
        (athena_link_historical_local_is_volume_link),
        (athena_link_historical_local_is_home_link),
        (athena_link_historical_local_is_trash_link): Remove.

        * libathena-private/athena-file-operations.c:
        (is_special_link): Use athena_link_local_is_special_link.

        src/file-manager/fm-directory-view.c:
        (is_link_type_special): Remove.
        (special_link_in_selection):  Use athena_link_local_is_special_link.

        * src/file-manager/fm-desktop-icon-view.c:
        (update_home_link_and_delete_copies): Don't recreate the home directory
        link when desktop==home.

2002-03-27  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-file.c
	(athena_file_get_activation_uri): Use
	athena_file_get_symbolic_link_target_uri.
	(athena_file_get_symbolic_link_target_uri): New function.

2002-03-27  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_accessible_get_image_description),
	(athena_icon_canvas_item_accessible_get_image_size),
	(athena_icon_canvas_item_accessible_image_interface_init),
	(athena_icon_canvas_item_accessible_get_image_position): impl.
	(athena_icon_canvas_item_accessible_get_image_position): stub.
	(athena_icon_canvas_item_accessible_get_type): upd.

2002-03-27  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-canvas-item.c:
	specify the type name explicitely.
	
	* src/athena-window.c
	(athena_window_constructed): move some of the fast setup
	(athena_window_instance_init): to here, so it will be
	done by the time the throbber async activate comes in.

2002-03-26  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_class_init): kill nasty gconf
	re-enterancy hazard moving the auto_enum to
	(athena_icon_canvas_item_init): here.
	(athena_icon_canvas_item_class_init): add the a11y
	factory & instantiate the factory boilerplate.
	(athena_icon_canvas_item_accessibile_create),
	(athena_icon_canvas_item_accessible_get_name),
	(athena_icon_canvas_item_accessible_class_init),
	(athena_icon_canvas_item_accessible_get_type): impl.

2002-03-25  Mark McLoughlin  <mark@skynet.ie>

	* src/file-manager/fm-directory-view.c: (update_scripts_menu): also
	hide the scripts seperator on the background menu.

2002-03-25  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-location-bar.c: (style_set_handler):
	Port to gnome 2.
	(have_broken_filenames), (accumulate_name_utf8),
	(accumulate_name_locale), (try_to_expand_path):
	Fix filename completion, add support for G_BROKEN_FILENAMES

=== athena 1.1.11 ===

2002-03-24  Alexander Larsson  <alla@lysator.liu.se>

	* NEWS:
	bump version

	* configure.in:
	Require eel 1.1.9. Bump version to 1.1.11

2002-03-24  Dave Camp  <dave@ximian.com>

	* libathena-private/athena-entry.c: (athena_entry_init):
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	* src/athena-preferences-dialog.c: Remove references to the 
	"Use Emacs-style keyboard shortcuts" preference.

2002-03-24 John Fleck <jfleck@inkstain.net>

	* src/athena-shell-ui.xml
	* src/athena-window-menus.c
	remove link to release notes in help menu
	fixes bug #73077
	
2002-03-22  Havoc Pennington  <hp@pobox.com>

	* src/file-manager/fm-icon-view.c (should_preview_sound): set up
	an auto variable for the /desktop/gnome/sound/enable_esd setting,
	to avoid remote gconf query on every icon mouseover.

2002-03-22  Dave Camp  <dave@ximian.com>

	* src/file-manager/fm-properties-window.c: (create_emblems_page):
	use eel_scrolled_wrap_box_new().

	* components/news/athena-news.c:
	(check_button_focus_in_callback), (add_channel_entry): Use the 
	new eel_gtk_viewport functions to move the focused checkbox into
	view on focus changes.

2002-03-21 John Fleck <jfleck@inkstain.net>

	* help/athena-user-manual/C/athena-user-manual.xml, legal.xml
	first cut at modifying docs for GNOME2 Athena

2002-03-20  Michael Meeks  <michael@ximian.com>

	* src/athena-zoom-control.c (draw_number): revert
	my crack smoking fiddling with offsets changes - it seems
	ScaleableGorilla needs to change.

2002-03-20  Havoc Pennington  <hp@redhat.com>

	* libathena-private/athena-thumbnails.c: Add patch to
	re-thumbnail if the thumbnail timestamp is different from the 
	thumbnailed file (vs. newer). Fixes the case where people have
	files with future timestamps.

2002-03-20  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-directory-background.c 
	(athena_file_background_read_desktop_settings): 
	Comment out WPTYPE_EMBOSSED since it doesn't exist.

2002-03-19  Alexander Larsson  <alla@lysator.liu.se>

	Patch from Glen Gray <glen@antefacto.com>

	* components/hardware/icons/HD_drive.png:
	* components/hardware/icons/Makefile.am:
	Restore old harddrive icon
	
	* components/hardware/athena-hardware-view.c: (setup_form_title),
	(setup_overview_form):
	Use the hardrive icon. Make it look more like the 1.0.x version.

2002-03-19  Michael Meeks  <michael@ximian.com>

	* src/athena-zoom-control.c (draw_number):
	use the y_offset to center the number in the
	allocation, while was possible to 'fix' this
	centering by other means, it's not going to handle
	font size or other changes that change the pixel
	height of this toolbar.

	* libathena-private/athena.schemas: add the
	defaults in here to test.

	* components/music/athena-music-view.c
	(athena_music_view_init): prune old font bits.
	(set_up_tree_view): handle the font / size
	using Pango & the cell renderers.

	* components/news/athena-news.c
	(empty_message_size_allocate): remove, no longer
	neccessary GtkLabel will do the wrapping for us.
	(make_news_view): upd.

2002-03-18  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-directory-async.c
	(top_left_start): NULL top_left_text after free.

2002-03-18  Michael Meeks  <michael@ximian.com>

	* src/athena-application.c
	(athena_application_create_desktop_window):
	guard window creation to avoid re-enterancy, via.
	other shell calls to create windows.

	* src/athena-main.c (main): vfs and bonobo init
	is done for us by gnome_program_init.

	* src/athena-view-frame.c
	(athena_view_frame_selection_changed),
	(send_history): check we have a listener before
	constructing potentially large and slow change
	notifications.

	* configure.in: require bonobo 1.113.0 where we have
	the event source acceleration.

2002-03-17  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bump required versions.

=== athena 1.1.10 ===

2002-03-17  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-icon-factory.c (scale_icon):
	Fix typo. Was using x0 instead of y0. Reported by
	Edouard Poor <cs@edouard.info>

	* configure.in:
	Bump version to 1.1.10. Require eel 1.1.8

	* NEWS:
	Bump version

2002-03-15  Hasbullah Bin Pit <sebol@ikhlas.com>

	* configure.in: Added Malay (ms)to ALL_LINGUAS.

2002-03-14  Dave Camp  <dave@ximian.com>

	* components/news/athena-news.c: (add_command_buttons),
	(news_label_new), (make_remove_widgets), (make_add_widgets),
	(set_up_edit_widgets), (site_list_mnemonic_activate),
	(set_up_configure_widgets), (set_up_main_widgets): Add mnemonics
	to various controls and labels.

2002-03-14 John Fleck <jfleck@inkstain.net>

	* src/athena-shell-ui.xml
	* src/athena-window-menus.c
	changing "Status Bar" to "Statusbar", per documentation
	style guide, fixing bug #66649

2002-03-11  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-bonobo-extensions.c
	(athena_bonobo_activation_register_for_display): re-instate
	the making of per display iids.

	* components/loser/sidebar/main.c (main): use
	eel_bonobo_make_registration_id.

	* components/loser/content/main.c (main): ditto.

	* components/adapter/main.c (main): ditto.

	* libathena/athena-view-standard-main.c
	(athena_view_standard_main_multi): ditto.

2002-03-13  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/filesystem-attributes.xml:
	Disable thrash for afs filesystems.

2002-03-13  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-directory-async.c:
	(link_info_done): After loading the link info with the new display
	name, clear the old cached display name.

	* libathena-private/athena-file-private.h:
	(AthenaFileDetails):	Add cached utf-8 display name and the
	collation key for the display name.
	(athena_file_clear_cached_display_name): New function

	* libathena-private/athena-file.c:
	(finalize): Free cached display name and collation key.
	(update_info_internal, athena_file_update_name): clear
	cached display name when filename changes.
	(compare_by_display_name): Use athena_file_get_display_name_nocopy()
	to avoid copy. Use athena_file_get_display_name_collation_key() to
	avoid repeating expensive collation.
	(athena_file_clear_cached_display_name): New function to clear
	the cached display name and collation key.
	(athena_file_get_display_name_collation_key): Cache the
	value of g_utf8_collate_key() in order to do fast sorting on the
	display name.
	(athena_file_get_display_name_nocopy, athena_file_get_display_name):
	Cache the final display_name utf-8 value. Don't call g_utf8_validate()
	twice.

	* libathena-private/athena-icon-container.c:
	Remove assert that was showing up g_list_first() in my profiles.

2002-03-13  Gregory Leblanc  <gleblanc@linuxweasel.com>

	* athena.spec.in: Big rework, less painful now.  Parts from
	Chris Chabot, among others.

2002-03-13  Anders Carlsson  <andersca@gnu.org>

	* src/athena-window-menus.c 
	(help_menu_about_athena_callback): 
	Call gtk_window_set_transient_for on the about dialog.

2002-03-12  Alexander Larsson  <alla@lysator.liu.se>

	* components/music/athena-music-view.c:
	(music_view_set_selected_song_title,athena_music_view_update):
	Escape text that is parsed as markup that could
	have ampersands etc. in it.
	(fetch_song_info): Use display filename for title when
	the title is missing. This handles nice conversion to
	utf8.

2002-03-10  Diego GonzÃ¡lez  <dggonz@yahoo.com>

	* components/music/athena-music-vew.c (read_id_tag): convert
	title, comments, artist and album to UTF-8

2002-03-11 Diego GonzÃ¡lez  <dggonz@yahoo.com>

	* components/music/athena-music-view.c (go_to_next_track):
	Fix a crash where the music view would crash after playing the
	last song of a list. Correct indentation.

2002-03-11  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/Makefile.am:
	Add athena-file-operations-progress-icons.h
	* src/athena-window.c: (athena_window_hide_sidebar),
	(athena_window_show_sidebar):
	Don't try create or destroy the sidebar on desktop windows.
	
2002-03-11  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-file-operations-progress-icons.h:
	* libathena-private/athena-file-operations-progress.c:
	(athena_file_operations_progress_update_icon),
	(athena_file_operations_progress_update),
	(athena_file_operations_progress_init),
	(athena_file_operations_progress_class_init):
	Add progress jar feature; the progress dialog icon now looks like 
	a jar that fills up as the files is copied. This idea was suggested
	by Tuomas Kuosmanen.

2002-03-11  Michael Meeks  <michael@ximian.com>

	* libathena/athena-clipboard.c
	(select_all_callback): use g_object_weak_ref
	instead of the "destroy" signal which is mostly
	useless.
	(idle_source_destroy_callback): impl.

2002-03-11  James Henstridge  <james@daa.com.au>

	* configure.in: build fix: get rid of unneeded semicolons which
	cause compile errors with newer versions of autoconf (this doesn't
	break older versions).

2002-03-11  Anders Carlsson  <andersca@gnu.org>

	* icons/Makefile.am:
	* icons/athena-launch-icon.png:
	Re-add athena-launch-icon.
	
	* src/athena-window.c: (set_up_default_icon_list):
	Use athena_pixmap_file to get the full path to the icons used.
	(athena_window_class_init):
	Remove athena_window_realize function, it only contained
	stuff we don't need to do these days.
	
2002-03-11  Anders Carlsson  <andersca@gnu.org>

	* src/athena-window.c: (athena_window_set_up_sidebar),
	(athena_window_tear_down_sidebar), (athena_window_constructed),
	(athena_window_hide_sidebar), (athena_window_show_sidebar),
	(athena_window_sidebar_showing):
	Only create the sidebar if the "Display sidebar in new windows" 
	preference is turned on, otherwise create it when user activates
	"Show sidebar" and destroy it when user activates "Hide sidebar".
	This fixes #72595.

2002-03-11  Anders Carlsson  <andersca@gnu.org>

	* src/file-manager/fm-directory-view.c: (process_old_files),
	(queue_pending_files), (fm_directory_view_can_rename_file),
	(can_rename_file), (start_renaming_file),
	(reveal_newly_added_folder), (rename_file_callback),
	(real_merge_menus), (real_update_menus),
	(fm_directory_view_class_init):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c: 
	(fm_icon_view_can_rename_file), (fm_icon_view_start_renaming_file),
	(fm_icon_view_merge_menus), (fm_icon_view_update_menus),
	(fm_icon_view_class_init):
	* src/file-manager/fm-list-model.c:
	(fm_list_model_get_column_type), (fm_list_model_get_value):
	* src/file-manager/fm-list-model.h:
	* src/file-manager/fm-list-view.c: (cell_renderer_edited),
	(create_and_set_up_tree_view), (fm_list_view_start_renaming_file),
	(fm_list_view_class_init):
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/athena-icon-view-ui.xml:
	Move the "Rename" verb into fm-directory-view and implement rename
	callbacks for both the list and icon view.
	
=== athena 1.1.9 ===

2002-03-10  Darin Adler  <darin@bentspoon.com>

	* NEWS: Bump version.
	* configure.in: Bump version.

2002-03-10  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-file.c: (have_broken_filenames),
	(athena_file_rename), (athena_file_get_display_name):
	Cache the value of getenv("G_BROKEN_FILENAMES"), as this getenv
	showed up as 3.6% and nr 2 in profiles.

2002-03-10  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-property-browser.c (element_clicked_callback):
	Pass event->event to gtk_drag_begin in order get the right time
	for the grab. This avoids a race with the ungrab that could lead
	to stuck grabs.

2002-03-09  jacob berkman  <jacob@ximian.com>

	* athena.desktop.in (Exec): run-athena is no more, so just run
	athena

2002-03-08  Darin Adler  <darin@bentspoon.com>

	* components/tree/athena-tree-model.c:
	(tree_node_has_dummy_child): Add new "inserted_first_child"
	boolean so we can insert new children and get rid of the "empty"
	node.
	(insert_node): Handle the case where we insert the first child,
	and the empty node goes away.
	(start_monitoring_directory): Set the "done loading" state a bit
	earlier.
	(athena_tree_model_ref_node): Make the "done loading" state be
	false if there are no children, so we see "Loading" rather than
	"Empty" until we are sure it's empty.

	* icons/default/default.xml:
	* icons/gnome/gnome.xml:
	* icons/sierra/sierra.xml:
	* icons/tahoe/tahoe.xml:
	Vertical offset of "-1" looks right.

	* src/Makefile.am: Remove run-athena.
	* src/run-athena: Remove.

2002-03-08  Michael Meeks  <michael@ximian.com>

	* src/athena-window.c
	(athena_window_constructed): create a UI component for
	the status, that is separate from the shell UI component.
	(athena_window_finalize): release the status_ui.
	(athena_window_clear_status): remove fixme #43597
	(athena_window_set_status): upd.

2002-03-08  Darin Adler  <darin@bentspoon.com>

	* components/adapter/main.c: (main): Use gdk_get_display, not
	getenv ("DISPLAY").
	* components/loser/content/main.c: (main): Ditto.
	* components/loser/sidebar/main.c: (main): Ditto.

	* components/tree/athena-tree-model.c:
	(stop_monitoring_directory): Rename back from
	stop_monitoring_directory_without_reporting. This no longer
	changes the state of "done_loading".
	(set_done_loading): New, handles a state change in either
	direction.
	(done_loading_callback): Moved most of the guts of this into the
	new set_done_loading.
	(start_monitoring_directory): Call set_done_loading explicitly.
	Before, this had to use an idle function, but this is no longer
	necessary since we use an idle function at the next level up.

	* libathena-private/athena-directory-metafile.c:
	(free_factory):
	* libathena-private/athena-metafile.c:
	(corba_register_monitor):
	* libathena-private/athena-undo-context.c:
	(athena_undo_context_new), (finalize):
	* libathena/athena-undo-transaction.c:
	(athena_undo_transaction_finalize),
	(athena_undo_transaction_add_to_undo_manager):
	* libathena/athena-undo.c: (athena_undo_share_undo_manager):
	* libathena/athena-view.c: (forget_cached_view_frame):
	* src/athena-component-adapter-factory.c: (release_factory):
	* src/athena-view-frame.c: (destroy_view):
	Clean up code by not bothering with an ev for CORBA_Object_release
	and CORBA_Object_duplicate.

	* src/athena-shell-ui.xml: Remove "Feedback" menu item.

2002-03-08  Michael Meeks  <michael@ximian.com>

	* libathena/athena-clipboard.c
	(select_all_callback): a GSource is not a
	GObject, #73782.

2002-03-08  Michael Meeks  <michael@ximian.com>

	* src/athena-main.c (main): do a bonobo_ui_init,
	we shouldn't need it but libgnomeui has escaped from
	doing this for some reason.
	Remove eel_setenv DISPLAY chicanery

	* libathena/athena-view-standard-main.c
	(athena_view_standard_main_multi): remove double
	bonobo_ui_init.

2002-03-07  Darin Adler  <darin@bentspoon.com>

	* components/tree/athena-tree-model.h:
	* components/tree/athena-tree-model.c:
	(stop_monitoring_directory_without_reporting): Rename old
	stop_monitoring_directory function.
	(stop_monitoring_directory): New function that handles changes
	caused by stopping monitoring.
	(destroy_children_by_function): New.
	(destroy_by_function): New.
	(should_show_file): New.
	(update_node): Call should_show_file instead of
	athena_file_is_gone to decide whether a given file should show
	up.
	(process_file_change): Ditto.
	(start_monitoring_directory): Pass through flags for whether to
	monitor invisible or backup files, rather than just TRUE, TRUE.
	(athena_tree_model_get_value): Use PANGO_STYLE_ITALIC instead of
	PANGO_STYLE_OBLIQUE. Both will fall back to the other if not
	available, but if we have both, we'd prefer italic.
	(stop_monitoring_directory_and_children): New.
	(stop_monitoring): New.
	(athena_tree_model_set_show_hidden_files): New.
	(athena_tree_model_set_show_backup_files): New.
	(file_is_not_directory): New.
	(athena_tree_model_set_show_only_directories): New.

	* components/tree/athena-tree-view.c:
	(update_filtering_from_preferences): Call functions to change
	settings on model rather than storing these settings here.
	(tree_activate_callback),
	(filtering_changed_callback): Call
	update_filtering_from_preferences to set filtering for the newly
	created tree.
	(athena_tree_view_instance_init): Don't call
	update_filtering_from_preferences here, because we don't have a
	tree model yet.
	
	* libathena-private/athena-theme.c: Formatting tweaks.
	* libathena/athena-view-standard-main.c: Formatting tweak.
	* src/athena-window-toolbars.c: Formatting tweaks, and remove
	some unnecessary localized strings.
	
	* src/athena-zoom-control.h: Remove extern "C" stuff. If we need
	this, we'll do G_BEGIN_DECLS, and it's silly to use it for private
	headers that are never going to be used from C++.

	* libathena-private/athena-bonobo-extensions.c:
	(athena_bonobo_activation_register_for_display): Temporarily
	re-disable per-display registration since it doesn't work at all
	on my machine. I'll turn it back on after talking to Michael
	Meeks.
	
2002-03-07  Darin Adler  <darin@bentspoon.com>

	* icons/crux_eggplant/crux_eggplant.xml:
	* icons/crux_teal/crux_teal.xml:
	* icons/default/default.xml:
	* icons/gnome/gnome.xml:
	* icons/sierra/sierra.xml:
	* icons/tahoe/tahoe.xml:
	Tweaked the zoom control specifications to match the new nicer
	rules.

	* src/athena-zoom-control.c: (draw_number):
	Removed a lot of strangeness and fudge factors from this function.

2002-03-07  Darin Adler  <darin@bentspoon.com>

	* Tons of files:
	Because lots of recent bugs were due to "signal handler called after
	object gone" problems, switched many calls of g_signal_connect and
	g_signal_connect_swapped to use g_signal_connect_object instead.
	Also did other signal-related cleanup and changed some destroys to
	finalizes.

	* libathena/athena-view-standard-main.h:
	We no longer need to include athena-view.h in here. So include it
	in the files that use this instead.

	Did merges from stable branch:

	2001-10-25  Darin Adler  <darin@bentspoon.com>

        * libathena-private/athena-directory.c:
        (call_files_changed_common), (call_files_changed_free_list),
        (call_files_changed_unref_free_list),
        (athena_directory_notify_files_changed): Move call to
        athena_directory_add_file_to_work_queue into a better
        bottleneck; now it catches all the notify cases, not just changed.
        Also tell it to re-get top-left text and link info too when we get
        a changed notice.
        
        * src/file-manager/fm-directory-view.c: (queue_pending_files):
        Don't use the timeout (and the hysteresis) when queuing files once
        the initial directory load is complete. Doing this was causing
        delays processing changes that came in later, which we don't want.
        
        * src/athena-sidebar-title.c: (item_count_ready), (monitor_add),
	(update_all), (athena_sidebar_title_set_file): Monitor the
	directory count once we get it the first time. This makes sure
	that changes in the directory count get reflected in the sidebar
	without creating a race with the main view to see who calculates
	it first.

	2001-10-25  Alex Larsson  <alexl@redhat.com>

        * libathena-private/athena-directory.c
	(athena_directory_notify_files_changed): Call
	athena_directory_add_file_to_work_queue() when file_info is
	invalidated.  Otherwise it will not be read again.

2002-03-07  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-horizontal-splitter.c
	(athena_horizontal_splitter_size_allocate): impl. to
	cope with having a paned with no child2, without doing
	lots of bogus size re-allocation.
	(athena_horizontal_splitter_class_init): upd.
	(athena_horizontal_splitter_pack2): impl, since
	gtkpaned relies on the re-size to generate an expose
	to re-render it's splitter grabber thing.a

	* src/athena-sidebar.c
	(athena_sidebar_set_width): impl. moving all sidebar
	preferences here, 
	(athena_sidebar_init): move auto value setup
	here from class_init to save possible re-enterancy
	issue. Request the size we want for the sidebar,
	the pane will under-allocate if neccessary.
	Set the old_width to the correct size so we don't
	re-render the paned lots as it swiches about.

	* src/athena-window.c
	(athena_window_constructed): reflow to simplify,
	call sidebar_set_width.
	(athena_window_set_content_view_widget): use
	athena_..._pack2 instead of gtk_paned to fix rendering.

2002-03-06  Michael Meeks  <michael@ximian.com>

	* components/notes/athena-notes.c
	(make_notes_view): upd.

	* components/news/athena-news.c
	(rss_read_done_callback): parse the RTF, but don't spew
	warnings everywhere.
	(make_news_view): upd.

	* components/throbber/main.c
	(cb_create_throbber): impl.
	(throbber_object_destroyed, throbber_make_object):
	axe cut & paste.

	* libathena/athena-view-standard-main.c
	(athena_view_create_from_get_type_function):
	widen from AthenaView to BonoboObject, this
	code has a much wider application.
	(make_object): ditto.

	* components/hardware/athena-hardware-view.c
	(athena_hardware_view_get_athena_view): upd.

	* components/throbber/athena-throbber.c
	(athena_throbber_new): kill.

	* libathena/athena-view-standard-main.c
	(athena_view_standard_main_multi): use gdk_get_display.

	* libathena-private/athena-bonobo-extensions.c
	(athena_bonobo_activation_register_for_display): impl.

	* src/athena-application.c
	(athena_application_startup): use it.

	* src/athena-window-toolbars.c
	(location_change_at_idle_callback),
	(throbber_callback): move from athena-window.c
	(athena_window_allow_stop): move this here,
	prune redundant sets, simplify property bag
	extraction.

	* src/athena-window.c
	(athena_window_constructed): move throbber
	location changed code out of here.
	(athena_window_unrealize): no explicit removal
	from remote property bag neccessary & upd.

	* libathena-private/athena-metafile-factory.c
	(corba_open): reduce complexity.

2002-03-07  Anders Carlsson  <andersca@gnu.org>

	* configure.in: Require eel 1.1.7

	* src/athena-preferences-dialog.c: 
	Use EEL_PREFERENCE_ITEM_EDITABLE_PASSWORD_STRING for
	the proxy dialog. Fixes #69387.

2002-03-06  Alexander Larsson  <alla@lysator.liu.se>

	(merges from stable):
	
	* libathena-private/athena-monitor.c:
	(process_fam_notifications): Tweak comment.
	
	* src/athena-window-manage-views.c:
	(cancel_viewed_file_changed_callback), (update_for_new_location):
	Monitor the existence of the currently viewed file, so we notice
	when the file is deleted.

        * src/file-manager/fm-directory-view.h:
	Add emblems_changes method.

        * src/file-manager/fm-directory-view.c:
	(file_changed_callback): Call emblems_changed.
	(fm_directory_view_add_relative_emblems_to_exclude,
	real_get_emblem_names_to_exclude):
	exclude non-writable emblems if directory is not
	writable.
	
	* src/file-manager/fm-icon-view.c:
	Implement emblem_changes.
	
	* src/file-manager/fm-list-view.c:
	Add GNOME2_CONVERSION_COMPLETE where the emblem icon
	update is needed.

2002-03-06  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-list-model.c: (fm_list_model_remove_file):
	Don't warn when asked to remove a file that's not in the list.
	That happens relatively often.

2002-03-06  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_instance_init): Use g_signal_connect_object
	instead of g_signal_connnect to make sure we don't get called once
	the widget is dead.

2002-03-06  Darin Adler  <darin@bentspoon.com>

	* src/athena-bookmarks-window.c: (create_bookmarks_window):
	Say "Close" instead of "Done".
	
	* src/athena-property-browser.c:
	(athena_property_browser_init): Say "Close" instead of "Done".
	
	* src/athena-sidebar-title.c: (athena_sidebar_title_init): Use
	g_signal_connect_object instead of g_signal_connect_swapped.  This
	will probably fix the theme-switching problem people have been
	complaining about.

	* src/athena-preferences-dialog.c: Tweak formatting.
	* src/file-manager/fm-properties-window.c: Tweak formatting.

	* src/athena-application.c: Fix bug # in a comment.
	
2002-03-06  Darin Adler  <darin@bentspoon.com>

	* components/tree/athena-tree-model.c: (update_monitoring): New
	name for destroy_unneeded_children, which now starts monitoring
	for nodes that need it as well as stopping monitoring and
	destroying children for notes that don't need it.
	(update_monitoring_idle_callback): New name.
	(schedule_monitoring_update): New name.
	(athena_tree_model_ref_node): Call schedule_monitoring_update when
	a node is ref'd, rather than doing it right away.
	(athena_tree_model_unref_node): Hoist the code from last_child_unref
	here, since it's only a single call.

	* components/tree/athena-tree-view.c: (sort_model_iter_to_file),
	(compare_rows), (create_tree): Turn on the GtkTreeModelSort code.
	The above fix makes us stop crashing, and the Gtk fix I'll check in
	soon makes the sorting actually work.

2002-03-06  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-mime-actions.c:
	(athena_mime_set_short_list_applications_for_file),
	(athena_mime_set_short_list_components_for_file):
	Fix storage leaks.

2002-03-06  Michael Meeks  <michael@ximian.com>

	* src/file-manager/fm-icon-view.c
	(fm_icon_view_update_menus): don't try to set properties
	on a remote container that is being / has been torn down.

	* libathena-private/athena-global-preferences.c
	(default_icon_view_sort_order_or_manual_layout_changed_callback),
	(athena_global_preferences_set_default_folder_viewer),
	(default_folder_viewer_changed_callback): upd. for enum code.

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_class_init): use
	eel_preferences_add_auto_enum instead of auto_int.

	* src/file-manager/fm-list-view.c
	(fm_list_view_class_init): ditto.

	* src/file-manager/fm-icon-view.c
	(get_default_sort_order, get_default_zoom_level_font_size), 
	(get_default_zoom_level, fm_icon_view_init): ditto.

	* libathena-private/athena-thumbnails.c
	(prefer_global_thumbnails_location): ditto.

	* libathena-private/athena-icon-factory.c
	(should_display_image_file_as_itself): ditto.

	* libathena-private/athena-icon-container.c
	(athena_icon_container_class_init): ditto.

2002-03-05  Michael Meeks  <michael@ximian.com>

	* components/music/athena-music-view.c
	(athena_music_view_init): use
	eel_preferences_get_enum instead of get_integer

	* src/athena-switchable-search-bar.c
	(athena_search_uri_to_search_bar_mode),
	(athena_switchable_search_bar_new): ditto.

	* src/file-manager/fm-icon-view.c
	(fm_icon_view_update_click_mode): ditto.

	* src/file-manager/fm-directory-view.c
	(get_executable_text_file_action): ditto.

	* libathena-private/athena-metafile.c
	(can_use_public_metafile): ditto.

	* libathena-private/athena-file.c
	(show_directory_item_count_changed_callback),
	(show_text_in_icons_changed_callback): use get_enum

	* libathena-private/athena-global-preferences.c
	(preference_defaults): add the PREFERENCE_ENUM type
	and make this a string, as GConf expects.

	* configure.in: add the GConf magic.

	* libathena-private/Makefile.am (schemadir):
	add schema installation bits.

2002-03-06  Alexander Larsson  <alla@lysator.liu.se>

	* athena-icon-private.h: (AthenaIconContainerDetails):
	widget_x/y ->o world_x/y
	
	* libathena-private/athena-icon-container.c:
	Fix all the coordinate system problems. Now stretching should
	work correctly again. There are a multitude of issues when
	handling this:
	1) When doing rubberbanding we want to use widget-relative
	   coordinates so that we can auto-scroll.
	2) The widget events (button_press_event, button_release_event
	   and motion_notify_event) report coordintes relative to
	   GTK_LAYOUT(container)->bin_window, aka canvas "window
	   coordinates"
	3) The canvas item events (item_event_callback,
	   handle_icon_button_press) report coordinates in canvas
	   world coordinates (a change since gnome 1 i believe)

2002-03-05  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/athena-shell-ui.xml: applied patch by Andrew Burr to add mini
	icons for refresh, zoom-*, and about menu items.

2002-03-05  David Emory Watson  <dwatson@cs.ucr.edu>
	
	* src/file-manager/athena-directory-view-ui.xml: fix mini icons in
	the edit menu so that they don't disappear when the focus changes.

2002-03-05  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-bonobo-extensions.c:
	(athena_bonobo_set_accelerator): Remove unneeded
	g_return_if_fail. We call only one other function, so that can
	handle parameter checking.
	(athena_bonobo_set_label): Ditto.
	(athena_bonobo_set_tip): Ditto.
	(athena_bonobo_set_sensitive): Ditto.
	(athena_bonobo_set_toggle_state): Ditto.
	(athena_bonobo_set_hidden): Ditto.
	(athena_bonobo_get_label): Ditto.
	(athena_bonobo_get_hidden): Add g_return_if_fail.
	(get_numbered_menu_item_name): Remove unused parameters.
	(add_numbered_menu_item_internal): Set label with
	athena_bonobo_set_label so there aren't any issues with XML
	entity encoding.
	(athena_bonobo_add_submenu): Ditto.
	(athena_bonobo_add_menu_separator): Add g_return_if_fail.
	(remove_commands): Remove g_return_if_fail since caller does it.
	(athena_bonobo_set_label_for_menu_item_and_command): Add
	g_return_if_fail.

2002-03-06  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-directory-async.c:
	(should_look_for_dot_directory_file), (lacks_link_info):
	Only look for .directory files in directories that have a
	special scheme.

	(make_dot_directory_uri):
	Remove sync check for .directory files.
	
2002-03-05  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-list-view.c:
	(tree_selection_foreach_set_boolean): New.
	(tree_selection_not_empty): New.
	(tree_view_has_selection): New.
	(event_after_callback): Handle only clicks in the bin_window.
	Also, decide which menu to display by whether an item is selected
	or not rather than by where the click is.
	(button_press_callback): Deselect all items when you click on the
	background.
	(create_and_set_up_tree_view): Connect the new handler.

2002-03-05  Dave Camp  <dave@ximian.com>
       
	* components/notes/athena-notes.c:
	(notify_listeners_if_changed): Remove the #ifdef
	GNOME2_CONVERSION_COMPLETE and replace
	bonobo_property_bag_notify_listeners with a
	bonobo_event_source_notify_listeners_full call.
	(make_notes_view): Remove the #ifdef GNOME2_CONVERSION_COMPLETE
	and send the proper arguments to bonobo_control_set_properties.

2002-03-05  Anders Carlsson  <andersca@gnu.org>

	* src/file-manager/fm-list-view.c (event_after_callback): 
	Display the background context menu if no item is selected.

=== athena 1.1.8 ===

2002-03-05  Darin Adler  <darin@bentspoon.com>

	* NEWS: Bump version.
	* configure.in: Bump version.

	* TODO: Some update.

2002-03-05  Jens Finke  <jens@triq.net>

	* components/adapter/athena-adapter-stream-load-strategy.c
	(athena_adapter_stream_load_strategy_load_location): Escape '!'
	character in URIs before using it as a moniker string. 

2002-03-05  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-global-preferences.c 
	(athena_global_preferences_init_with_folder_browsing):
	Register default folder viewer enumeration too.

2002-03-05  Michael Meeks  <michael@ximian.com>

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_supports_zooming): check if
	zoomable is non NULL.
	(fm_directory_view_destroy): NULL the zoomable at
	the same time as the athena_view, since they're
	the same aggregate.

	* libathena-private/athena-icon-factory.c
	(get_image_cache_view): impl.
	(cache_icon_new): add the icon to the cache view.
	(cache_icon_unref): destroy the icon's view widget.

2002-03-04 John Fleck <jfleck@inkstain.net>

	* help/Makefile.am
	adding xmldocs.make to EXTRA_DIST

2002-03-04  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c: (real_file_limit_reached):
	Fix a stray AthenaFile unref that could cause big trouble.

	* src/file-manager/fm-list-view.c: (event_after_callback): New,
	puts up a menu when you right-click.
	(create_and_set_up_tree_view): Attach new handler.
	(fm_list_view_reset_to_defaults): Make this compile.

2002-03-04  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c:
	(real_get_selected_icon_locations): Put a default one in here, since
	there are only really icon locations for FMIconView.
	(fm_directory_view_class_init): Set up default get_selected_icon_locations.
	
	* src/file-manager/fm-list-model.c:
	(fm_list_model_get_sort_column_id_from_attribute): Allow NULL.
	(fm_list_model_get_sort_column_id_from_sort_type): Handle all types.

	* src/file-manager/fm-list-view.c:
	(set_sort_order_from_metadata_and_preferences): Fix to handle unknown
	values in metadata.
	(fm_list_view_reset_to_defaults): New.
	(fm_list_view_class_init): Hoom up the new reset_to_defaults function.

2002-03-04  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c: Formatting tweaks.

	* src/file-manager/fm-list-model.c: (remove_link_saving_prev):
	Fix bug where it would skip every other node.

	* src/file-manager/fm-list-view.c: (fm_list_view_select_all): New.
	(fm_list_view_class_init): Add placeholders for things we need to
	implement to satisfy FMDirectoryView. Implement one: select all.

=== athena 1.1.7 ===

2002-03-04  Darin Adler  <darin@bentspoon.com>

	* NEWS: Bump version.
	* configure.in: Bump version.

2002-03-04  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-global-preferences.c:
	(athena_global_preferences_init_with_folder_browsing):
	Call the real athena_global_preferences_init. Without this, all
	hell breaks loose.
	
	* libathena/athena-clipboard.c:
	(merge_in_clipboard_menu_items), (merge_out_clipboard_menu_items):
	Don't do anything if things are NULL. Helps us destroy cleanly.
	(focus_changed_callback): Add missing gboolean return value. These
	days, signal handlers have to be more careful.
	(target_destroy_callback): NULL things out instead of freeing
	since destroy can happen more than once.
	(athena_clipboard_set_up_editable): Do a weak ref so the target
	data gets freed.
	(first_focus_callback): Add missing gboolean return value. These
	days, signal handlers have to be more careful.
	
	* src/file-manager/fm-properties-window.c: (name_field_focus_out):
	Return FALSE, not TRUE.

2002-03-04  Darin Adler  <darin@bentspoon.com>

	* libathena/athena-clipboard.c:
	(clipboard_items_are_merged_in), (focus_changed_callback),
	(target_destroy_callback), (athena_clipboard_set_up_editable),
	(first_focus_callback):
	* src/file-manager/fm-properties-window.c: (name_field_focus_out):

2002-03-04  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-directory.c:
	(athena_directory_notify_files_removed): Don't pay any attention
	if we're told about removal of a file we're renaming.

	* libathena-private/athena-file-private.h: Add new call to tell
	if the file is being renamed.
	* libathena-private/athena-file.c: (rename_guts): Set flag to
	say this file is being renamed.
	(athena_file_rename_in_progress): New.

2002-03-04  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-global-preferences.c
	(athena_global_preferences_init): split out the ultra slow
	gnome-vfs thrashing bit into here
	(athena_global_preferences_init_with_folder_browsing): 

	* src/athena-main.c (main): do a full init here so we
	get the folder browsing setup.

2002-03-04  Darin Adler  <darin@bentspoon.com>

	* src/athena-sidebar-tabs.h:
	* src/athena-sidebar-tabs.c: (get_property_bag): Check for a
	NULL tab_view.
	(tab_item_destroy): Remove the weak pointer we now use for the
	tab_view lifetime.
	(athena_sidebar_tabs_connect_view): Add g_return_if_fail.
	(athena_sidebar_tabs_add_view): Add a weak pointer so we don't
	have trouble outside the tab_view lifetime.
	(athena_sidebar_tabs_set_title_mode): Check incoming boolean.
	(athena_sidebar_tabs_set_visible): Check incoming boolean.

2002-03-04  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	* src/athena-preferences-dialog.c:
	* src/athena-window-menus.c:
	(athena_window_initialize_menus_part_1):
	* src/athena-window.c:
	* src/athena-window.h:
	Remove the web search preference and the remnants of the "go to
	web search" feature.

2002-03-04  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/file-manager/fm-directory-view.c:
	(icons_changed_callback): New function.
	(fm_directory_view_init): Connect to icons_changed_callback so that the
	scripts menus will observe theme changes.
	(fm_directory_view_finalize): Remember to remove ATHENA_PREFERENCES_*
	callbacks when we are done with them.

2002-03-04  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-adapter/Makefile.am:
	* libathena-private/Makefile.am:
	* libathena/Makefile.am:
	Bump major soname version to 2. Should fix bug #73142.

2002-03-03  Alexander Larsson  <alla@lysator.liu.se>

	Based on patch from Richard Hestilow <hestilow@ximian.com>
	
	* Makefile.am: Add libbackground directory
	
	* configure.in: Add CAPPLET flags and libs for libbackground
	Add libbackground/Makefile to list of Makefiles
	
	* libathena-private/Makefile.am: Add libbackground to
	dependency_static_libs
	
	* libathena-private/athena-directory-background.c:
	(athena_connect_desktop_background_to_file_metadata),
	(athena_file_background_read_desktop_settings),
	(athena_file_background_write_desktop_settings),
	(desktop_background_destroyed_callback),
	(desktop_background_gconf_notify_cb),
	(athena_file_background_receive_gconf_changes),
	(set_root_pixmap): Implement reading and writing of
	desktop background setting using libbackground.

2002-03-03  Yanko Kaneti  <yaneti@declera.com>

	* components/notes/Makefile.am: (LDADD) use COMPONENT_LIBS rather than
	COMPONENT_CFLAGS.

2002-03-03  Alexander Larsson  <alla@lysator.liu.se>

	Patch from Diego GonzÃ¡lez <dggonz@yahoo.com>.

	* libathena-private/athena-horizontal-splitter.c:
	(splitter_hide), (splitter_show), (splitter_is_hidden),
	(athena_horizontal_splitter_expand),
	(athena_horizontal_splitter_hide),
	(athena_horizontal_splitter_show),
	(athena_horizontal_splitter_is_hidden):
	* libathena-private/athena-horizontal-splitter.h:
	Code to hide and show the sidebar fully.
	
	* src/athena-window.c: (athena_window_hide_sidebar),
	(athena_window_show_sidebar), (athena_window_sidebar_showing):
	Use the new horizontal splitter functions.

2002-03-03  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-directory-background.c
	(desktop_background_realized):	Call
	eel_background_set_is_constant_size() on the desktop
	background to avoid flashing with gradients.

	* configure.in:
	Require eel 1.1.6

2002-03-02  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/athena-shell-ui.xml: add stock icons to a couple of menu items
	in the edit menu.

2002-03-01  Darin Adler  <darin@bentspoon.com>

	* components/throbber/athena-throbber.c:
	(athena_throbber_instance_init), (athena_throbber_finalize):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_finalize), (real_merge_menus):
	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	Use eel_add_weak_pointer, since it's more foolproof than
	g_object_add_weak_pointer. Also fix the about case so that
	it only adds the weak pointer once per created window.

2002-03-01  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-dnd.h:
	Move reset constant into header.
	
	* libathena-private/athena-file.c:
	(athena_file_get_display_name): Use g_locale_to_utf8, so this
	works even when G_BROKEN_FILENAMES is not set.
	
	* libathena-private/athena-icon-dnd.c:
	Rearrange and clean up code a bit.
	
	* src/athena-property-browser.c:
	(athena_property_browser_destroy), (add_new_pattern),
	(show_color_selection_window), (add_new_color), (add_new_emblem):
	
	* src/athena-sidebar-title.c: (update_icon): Get rid of dead
	code that gets uri and doesn't use it. It's been showing up in bug
	reports too, so this is especially nice.
	
	* src/athena-window-manage-views.h:
	* src/athena-window-manage-views.c:
	(athena_window_manage_views_destroy),
	(athena_window_manage_views_finalize): Break this up into two
	functions again.
	
	* src/athena-window.c: (athena_window_destroy): Re-add this,
	because some of the cleanup has to be done at destroy time.
	(athena_window_finalize): Move some of this out.
	(athena_window_class_init): Set up both.

	* components/text/athena-text-view.c:
	* components/tree/athena-tree-model.c:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-program-choosing.c:
	* src/file-manager/fm-directory-view.c:
	* src/athena-bookmark-list.c:
	Miscellaneous porting to new names of functions, getting off
	less-desirable functions.
	
2002-03-01  Darin Adler  <darin@bentspoon.com>

	* src/athena-window-manage-views.h:
	* src/athena-window-manage-views.c: (begin_location_change): Add
	a ref/unref so that window->details won't go away at an
	inopportune time.
	(athena_window_manage_views_finalize): Rename from destroy.
	
	* src/athena-window.c: (load_mini_icon): Break into separate
	function.
	(set_up_default_icon_list): Break into separate function.
	(athena_window_finalize): Change from destroy to finalize.
	(athena_window_class_init): Move to bottom of file and simplify the
	code a bit.

2002-03-01  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c:
	(add_script_to_script_menus), (add_submenu_to_script_menus),
	(update_directory_in_scripts_menu):
	* src/file-manager/athena-directory-view-ui.xml:
	Patch from Gaute Lindkvist <lindkvis@stud.ntnu.no> that adds
	the script menu to the background right-click menu, not just the one
	you get when you click on an object.

2002-03-01  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-link-historical.c:
	(local_set_root_property): Check for NULL before calling xmlParseFile.

2002-03-01  Darin Adler  <darin@bentspoon.com>

	* src/athena-window-toolbars.c: (set_up_toolbar_images):
	Remove unneeded code to set icon for the deleted Web Search button.
	* icons/SearchWeb.png: Remove.
	* icons/crux_eggplant/SearchWeb.png: Remove.
	* icons/crux_teal/SearchWeb.png: Remove.
	* icons/default/SearchWeb.png: Remove.
	* icons/gnome/SearchWeb.png: Remove.
	* icons/search_results.png: Remove.
	* icons/services-rpm-72.png: Remove.

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_theme_changed): Use text-selection-frame.png,
	not text-selection-frame-aa.png.
	* icons/text-selection-frame-aa.png: Rename to remove -aa.
	* icons/text-selection-frame.png: New home for the file.

	* icons/Makefile.am:
	* icons/crux_eggplant/Makefile.am:
	* icons/crux_teal/Makefile.am:
	* icons/default/Makefile.am:
	* icons/gnome/Makefile.am:
	Update as needed for changes above.

2002-03-01  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-icon-dnd.c (athena_icon_dnd_begin_drag):
	Events are in bin_window coordinates. Not world coords.

2002-02-28 John Fleck <jfleck@inkstain.net>

	* add help/xmldocs.make
	* configure.in
	* help/athena-user-manual/Makefile.am
	* help/athena-user-manual/C/Makefile.am
	* help/athena-user-manual/C/athena-user-manual-C.omf
	* help/athena-user-manual/C/athena-user-manual.xml (added with
	cvs magic as a copy of the old sgml doc with history)
	converting old doc to xml and changing the build stuff to the new
	GNOME2 docness
	
2002-02-28  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-sidebar.c (athena_sidebar_class_init):
	(athena_sidebar_realize): Don't call
	gdk_window_set_static_gravities(). That old anti-flicker
	trick was just causing lots of flashing.
	Remove all traces of athena_sidebar_realize.

2002-02-28  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-link-desktop-file.c:
	(athena_link_desktop_file_get_link_icon_from_desktop):
	Fix handling of files with Icon entries that are full paths.

	* libathena-private/athena-file.c: Name tweak.

2002-02-28  Darin Adler  <darin@bentspoon.com>

	* components/notes/athena-notes.c: (do_destroy): Remove some
	GNOME2_CONVERSION_COMPLETE code.

	* src/athena-theme-selector.h:
	* src/athena-theme-selector.c:
	(remove_theme_selector_idle_callback): New.
	(remove_theme_selector_changed_callback): Schedule the remove to be done
	at idle time, since GtkTreeView can't handle changes to the tree from
	inside the selection changed signal.
	(theme_selector_finalize): Cancel idle if it's still around.
	(for_each_theme_callback), (theme_selector_populate_list),
	(theme_selector_update_selected_theme_from_preferences),
	(athena_theme_selector_get_selected_theme): Return NULL rather
	than emitting a g_warning when no theme is selected.

2002-02-28  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c: (add_numbered_menu_item):
	Escape the path too, not just the menu item name, because the path
	contains other menu item names.
	(add_submenu): Same.

2002-02-28  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-link-desktop-file.c:
	(athena_link_desktop_file_get_link_icon_from_desktop):
	Fix assert where it was calling gnome_vfs_get_uri_from_local_path
	on something that wasn't an absolute local path.

2002-02-28  Josh Barrow  <drleary@mac.com>

	* icons/Makefile.am:
	* icons/Services.png:
	No-one uses services anymore, remove

	* icons/bubble-LL.png:
	* icons/bubble-LR.png:
	* icons/bubble-UL.png:
	* icons/bubble-UR.png:
	All of these were for a non-realized Services project.
	Remove.

	* icons/bullet.png:
	This was for the aa version of the stretch handles.  If we
	decide to make the stretch handles aa, we can "cvs bring them back"

	* icons/computer.png:
	* icons/computer.svg:
	These were both for the ~/Athena thing.  ~/Athena doesn't
	exist anymore.

	* icons/default/desktop_home.png:
	* icons/default/temp-home.png:
	Rename temp-home.png to desktop_home.png as it's not very temporary.
	It's been there for over a year.

	* icons/druid_header.png:
	* icons/druid_header_stretch.png:
	* icons/druid_sidebar.png:
	There's nolonger a first time druid.  Remove these.

	* icons/expert-selected.png:
	* icons/expert.png:
	* icons/intermediate-selected.png:
	* icons/intermediate.png:
	* icons/novice-selected.png:
	* icons/novice.png:
	There are nolonger user levels.  Remove these

	* icons/home.png:
	* icons/leftarrow.png:
	* icons/rightarrow.png:
	* icons/uparrow.png:
	* icons/search.png:
	If I recall, these were from the very first try at theming
	support in Athena.  They haven't been used for a *very* long
	time.  Remove them.

	* icons/netscape.png:
	This was used in ~/Athena, remove it.

	* icons/text-selection-frame.png:
	Not used now that there's not an aa v. non-aa thing going on.

	* icons/theme_preview.png:
	This is now in the default theme folder.

	* icons/tiny-alert.png:
	* icons/multi-ok.png:
	* icons/not.png:
	No clue what these were, but I'm certain they're not used anywhere.

	* src/file-manager/fm-desktop-icon-view.c:
	(update_home_link_and_delete_copies):
	Change instance of "temp-home" to "desktop_home"

2002-02-28  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-file.c: (in_filesystem): New.
	(rename_guts): Rename athena_file_rename to this.
	(athena_file_rename): Convert name to locale encoding if
	G_BROKEN_FILENAMES is set.
	(athena_file_get_display_name): Convert name to UTF-8
	assuming the locale character set if it's not valid UTF-8.
	It was already doing it when G_BROKEN_FILENAMES was set.

2002-02-28  Darin Adler  <darin@bentspoon.com>

	* src/athena-sidebar.c: (add_command_buttons): Use
	eel_str_replace_substring to replace the %s rather than using
	g_strdup_printf. It's not safe to use a string from a data
	file as a strdup format string.

	* configure.in: Bump librsvg required verson.

2002-02-28  Josh Barrow  <drleary@mac.com>

	* icons/sierra/Makefile.am:
	Remove sierra_green.png
	* icons/sierra/sierra.xml:
	Change instance of sierra_green.png to #BAC5C0.  Why wasn't 
	this like this to begin with?  sierra_green.png was just a 
	patch of #BAC5C0...  what a waste!
	* icons/sierra/sierra_green.png:
	Remove.

	Not certain, but I think that this makes the sierra theme a 
	tiny bit faster.

2002-02-28  Josh Barrow  <drleary@mac.com>

	* icons/Makefile.am:
	Doh!  Broke the build.  Remove icons from Makefile.am as well.

2002-02-27  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-window-menus.c (help_menu_about_athena_callback):
	Patch from drleary@mac.com, add a weak_pointer to the about-dialog
	to catch it being destroyed.

	* libathena-private/athena-find-icon-image.h:
	(athena_get_icon_file_name): Take extra argument for scalable details

	* libathena-private/athena-find-icon-image.c:
	(read_details): If size == 0, read scalable details, looking
	for size "*" and using coordinated between 0..1000
	(athena_get_icon_file_name): Take a scalable_details argument
	and fill it out.

	* libathena-private/athena-icon-factory.c
	(load_pixbuf_svg): Load svg icons at the right size, considering
	their embedded size, the zoom level, and the icon max size.
	If there are scalable details availible, scale them and put them
	in the unscaled ones.
	(load_icon_from_path): Take details and max_size arguments and pass
	them to load_pixbuf_rsvg.
	(load_named_icon): max_size arg used for svg scaling.
	Get scalable details from icon data, pass it on.
	(load_icon_for_scaling): Try exact size lookup before trying
	the specific zoom level sizes. This is so we don't have to scale
	SVGs after their initial rendering.
	(get_icon_from_cache, load_icon_scale_if_necessary,
	load_specific_icon): Pass on max size as needed.
	
2002-02-27  Josh Barrow  <drleary@mac.com>

	* icons/About_Image.png:
	* icons/about_background.png:
	These are no longer used since we switched to GnomeAbout.

2002-02-27  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-program-chooser.c:
	Change file-types-capplet to gnome2-file-types-properties.

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_finalize), (fm_desktop_icon_view_class_init):
	Use finalize instead of destroy.

	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_update_icon_container_fonts): Get rid of unneeded
	athena_icon_container_request_update_all call.

	* src/Makefile.am:
	* src/athena-about.c: Remove.
	* src/athena-about.h: Remove.

2002-02-27  Gediminas Paulauskas <menesis@delfi.lt>

	* libathena-private/athena-bookmarks.c: add missing include

2002-02-27  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-directory-metafile.c:
	(free_factory): Just release, don't unref.
	(get_metafile): Don't keep a ref. Also fix CORBA objref leak.

	* libathena-private/athena-icon-factory.c:
	(get_icon_from_cache):

	* libathena-private/athena-metafile-factory.c:
	(athena_metafile_factory_get_instance): Return the same
	instance each time, don't ref, since lifetime is not managed
	by ref counting.

	* libathena/athena-clipboard.c:
	(initialize_clipboard_component_with_callback_data):
	Get rid of BonoboUIComponent leak.

	* src/athena-application.c: Formatting tweaks.
	* libathena-private/athena-bookmark.c: Minor cleanup.

	* test/Makefile.am:
	* test/test-athena-async-activation.c: Remove.

2002-02-27  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-program-choosing.c
	(concat_option_cb): impl.
	(get_xalf_prefix): use gconf.

	* libathena-private/athena.schemas: add Xalf bits.

	* libathena-private/athena-global-preferences.c: ditto.

	* libathena-private/athena-icon-container.c
	(athena_icon_container_start_renaming_selected_item):
	don't pass a font name, it isn't used anyway.

	* libathena-private/athena-directory-async.c
	(should_display_file_name): protect with
	GNOME2_HAS_MEDUSA instead.

2002-02-27  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-file-operations.c
	(handle_transfer_overwrite, handle_transfer_vfs_error),
	(handle_transfer_overwrite): pass a widget context to
	help pango. 
	(extract_and_ellipsize_file_name_for_dialog),
	(format_and_ellipsize_uri_for_dialog): pass pango context
	to ellipsization.
	(ellipsize_string_for_dialog): re-implement for pango.
	(get_label_font): kill.

2002-02-27  Darin Adler  <darin@bentspoon.com>

	* src/athena-sidebar-tabs.c: (make_tab_text_layout): New
	(draw_one_tab_plain), (draw_one_tab_themed), (get_tab_width):
	Use common function to create PangoLayout so we don't forget
	anything. The old code forgot to set the font description in
	one case, leading to wrong-looking sidebar tabs.
	
	* src/athena-theme-selector.h:
	* src/athena-theme-selector.c: Minor cleanup.

2002-02-25  Dave Camp  <dave@ximian.com>

	* components/news/athena-news-pixmaps.h: Removed.

	* components/news/Makefile.am: Build
	athena-cell-renderer-news.c, don't build
	athena-news-pixmaps.h.

	* components/news/athena-news.c:
	(toggle_open_state), (rss_logo_callback),
	(set_bonobo_properties), (rss_read_done_callback),
	(max_items_changed), (set_views_for_mode), (switch_page),
	(configure_button_clicked), (add_site_button_clicked),
	(add_site_from_fields), (remove_selected_site),
	(athena_news_load_location), (empty_message_size_allocate),
	(set_up_edit_widgets), (set_up_configure_widgets),
	(set_up_main_widgets), (make_news_view): use a GtkNotebook to
	store the pages of the news view, and switch between them instead
	of individually hiding and showing the widgets when pages are
	flipped.  This allowed all the size negotiation code to go away,
	as the GtkNotebook takes care of it.
	
	* components/news/athena-news.c: (update_node),
	(get_channel_markup), (get_item_markup), (set_bonobo_properties),
	(do_destroy), (go_to_uri), (set_row_widths), (wrap_idle),
	(athena_news_size_allocate), (node_data_for_path),
	(athena_news_activate_path), (athena_news_row_activated),
	(athena_news_button_release_event), (athena_news_set_title),
	(free_rss_data_item), (free_channel),
	(athena_news_set_news_changed), (clear_channel_changed_flags),
	(athena_news_make_channel_document), (rss_logo_callback),
	(extract_items), (has_matching_uri), (mark_new_items),
	(extract_rss_title), (extract_scripting_news_title),
	(rss_read_done_callback), (athena_news_insert_channel),
	(athena_news_load_channel), (detach_items), (remove_items),
	(update_channels), (update_items),
	(athena_news_make_new_channel), (athena_news_add_channels),
	(athena_news_load_images), (athena_news_cell_data_func),
	(athena_news_row_expanded), (athena_news_row_collapsed),
	(max_items_changed),
	(add_channel_to_remove_list), (add_site_from_fields),
	(remove_selected_site), (add_command_buttons),
	(athena_news_load_location), (add_channel_entry),
	(empty_message_size_allocate), (make_remove_widgets),
	(set_up_configure_widgets), (set_up_main_widgets),
	(make_news_view):  Use a GtkTreeView to render the news.

	(make_news_view): Remove the #ifdef GNOME2_CONVERSION_COMPLETE
	and send the proper arguments to bonobo_control_set_properties.
	(athena_news_set_news_changed): Remove the #ifdef
	GNOME2_CONVERSION_COMPLETE and replace
	bonobo_property_bag_notify_listeners with a
	bonobo_event_source_notify_listeners_full call.

2002-02-26  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-icon-factory.c (load_icon_for_scaling):
	Fix typo that used ATHENA_ZOOM_LEVEL_STANDARD instead of
	ATHENA_ICON_SIZE_STANDARD. This made athena cache many icons twice.
	(get_icon_from_cache): Need to handle the case where an inner
	get_icon_from_cache call already put the icon in the cache.
	
2002-02-26  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_set_font_size_table): Remove stray line of code.

	* libathena-private/athena-icon-private.h: Remove unused field.

2002-02-27  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-undo-manager.c
	(corba_append, corba_forget, corba_undo): fix the
	undo manager impl. to map the servant properly.

2002-02-26  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-entry.c
	(athena_entry_get_type): write out in full so we
	can handle the editable interface.
	(athena_entry_editable_init): setup the editable
	interface.
	(athena_entry_set_selection_bounds),
	(athena_entry_insert_text),
	(athena_entry_delete_text): re-instate.

2002-02-26  Darin Adler  <darin@bentspoon.com>

	* Many files:
	Simplified calls to bonobo_object_ref/unref.
	
	* components/history/athena-history-view.c: (update_history):
	Fixed so that a history update while one is already in progress
	will work properly.
	
	* libathena/athena-view.c:
	(remove_listener): New.
	(update_listener): Renamed from athena_view_set_frame, made it
	handle various cases better. Fixed leak of property bag.
	(forget_cached_view_frame): New.
	(athena_view_set_frame_callback): Use new forget_cached_view_frame
	and update_listener.
	(athena_view_construct_from_bonobo_control): Use
	g_signal_connect_object.  Not sure if this is better, since they
	are part of the same aggregate.
	(athena_view_finalize): Use new forget_cached_view_frame and
	remove_listener.
	(athena_view_dispose): Use new forget_cached_view_frame and
	remove_listener.
	(athena_view_get_view_frame): Fixed leak of control frame.
	(athena_view_set_listener_mask): Simplified, and made it work even
	if you call it multiple times, by calling new update_listener.

	* libathena-private/athena-icon-canvas-item.c:
	(create_label_layout): Handle NULL font_name case just in case.
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_set_zoom_level): Use
	invalidate_label_sizes instead of setting update_icon_font.
	(athena_icon_container_set_font_name): Do nothing if font name
	doesn't change. If it does, use invalidate_label_sizes rather than
	setting update_icon_font.
	(athena_icon_container_set_font_size_table): Only redraw if font
	size changes. Also, use invalidate_label_sizes rather than setting
	update_icon_font.

	* libathena-private/athena-directory.c:
	(add_preferences_callbacks):
	* libathena-private/athena-icon-factory.c: (get_icon_factory):
	Initialize global preferences as needed.
	
	* src/file-manager/fm-icon-view.c: (fm_icon_view_finalize):
	* src/file-manager/fm-search-list-view.c: (real_destroy):
	* src/athena-application.c: (athena_application_destroy),
	(athena_application_create_window),
	(athena_application_class_init):
	* src/athena-main.c: (main):

	* src/athena-view-frame.c: (create_corba_objects): Fix property
	bag leak.

2002-02-26  Michael Meeks  <michael@ximian.com>

	* components/history/athena-history-view.c
	(update_history): only set the selection if we have
	some items.

2002-02-26  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/athena-location-bar.c:
	(accumulate_name),
	(has_exactly_one_slash): UTF8 fixes.
	(try_to_expand_path): UTF8 and gtk_editable fixes.
	(get_editable_length): Rename to
	(get_editable_number_of_chars): this and include UTF8 fixes.
	(editable_key_press_callback): Rename to
	(editable_event_after_callback): this.  Modify to skip non key_press
	events.
	(athena_location_bar_init): Replace marshaled key_press_event signal
	with normal event_after signal.

2002-02-26  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-file.c:
	(athena_file_get_display_name): Patch from Havard Wigtil
	that makes us return the right name, rather than returning
	an already-freed pointer.

=== athena 1.1.6 ===

2002-02-25  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bump version.

2002-02-26  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-drag-window.c 
	(drag_begin_emission_callback): 
	Use gtk_widget_get_toplevel to find out the top-level
	window.
	
2002-02-25  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-drag-window.c:
	(wm_protocols_filter), (athena_drag_window_realize),
	(athena_drag_window_register):
	Get the don't-raise-on-drag feature working again.
	
2002-02-25  Anders Carlsson  <andersca@gnu.org>

	* components/tree/athena-tree-model.c:
	(athena_tree_model_get_column_type),
	(athena_tree_model_get_value):
	* components/tree/athena-tree-model.h:
	* components/tree/athena-tree-view.c: (create_tree):
	Let "Loading" and "Empty" special nodes be italic.
	
	* libathena-private/athena-global-preferences.c:
	(default_font_callback):
	Return "sans" here instead of "fixed"
	
	* libathena-private/athena-icon-canvas-item.c:
	(draw_or_measure_label_text), (create_label_layout),
	Set font from icon container name, use gdk_gc_set_rgb_fg_color.
	
	* libathena-private/athena-icon-container.c: (finalize):
	(realize), (athena_icon_container_init),
	(athena_icon_container_update_icon),
	(athena_icon_container_set_zoom_level),
	(athena_icon_container_request_update_all),
	(athena_icon_container_get_label_color), (update_label_color),
	(athena_icon_container_theme_changed),
	(athena_icon_container_set_font_name),
	(athena_icon_container_set_font_size_table):
	Add support for setting fonts, and fix some bugs with the 
	label color handling.
	
	* libathena-private/athena-icon-container.h:
	Add athena_icon_container_set_font_name and 
	athena_icon_container_set_font_size_table.
	
	* libathena-private/athena-icon-factory.c:
	(embedded_text_font_changed_callback), (embed_text):
	Set the font of the embedded text to the default font.
	
	* libathena-private/athena-icon-private.h:
	Add font name and font size table variables to 
	AthenaIconContainerDetails.
	
	* libathena-private/athena-program-chooser.c:
	(athena_program_chooser_init):
	Fix button ordering according to the HIG.
	
	* src/file-manager/fm-icon-view.c: 
	(fm_icon_view_update_icon_container_fonts),
	(fm_icon_view_update_icon_container_font_size_table):
	Set font name and font size table in the icon container.
	
	* src/athena-sidebar-tabs.c:
	(athena_sidebar_tabs_load_theme_data),
	(default_font_changed_callback), (athena_sidebar_tabs_init),
	(athena_sidebar_tabs_destroy), (draw_one_tab_plain),
	(draw_one_tab_themed):
	Use the "default font" preference.
	
	* src/athena-sidebar-title.c:
	(athena_sidebar_title_class_init),
	(default_font_changed_callback), (athena_sidebar_title_init),
	(athena_sidebar_title_destroy), (update_title_font):
	Use the "default font" preference.
	
	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	Use the GnomeAbout widget.
	
2002-02-25  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-file-operations.c
	(fit_rect_on_screen, center_dialog_over_rect),
	(center_dialog_over_window): kill deprecated code, use
	gtk_window_set_transient instead.

	* libathena-private/athena-file-operations-progress.c
	(athena_file_operations_progress_init): setup the default
	dialog width instead of the bar's.

2002-02-21  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-customization-data.c
	(add_reset_text): port, requires new eel API.

2002-02-25  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-icon-factory.c:
	Use rsvg_pixbuf_from_file_at_max_size() to render svg icons at
	the right size.

2002-02-25  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bump required versions of some things.

2002-02-24  Seth Nickell  <snickell@stanford.edu>

	* src/file-manager/athena-indexing-info.c:
	(update_progress_display), (index_progress_dialog_new):
	Convert deprecated use of GtkProgress to GtkProgressBar
	to fix the build for people who build Medusa support.

2002-02-24  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-directory-background.c (image_loading_done_callback):
	Enable gdk_window_set_back_pixmap() again. This limits flicker when
	switching workspaces and moving windows.

2002-02-24  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-icon-container.c (realize):
	Don't set background pixmap None. Gtk+ already does that when
	scrolling windows these days, and due to a bug in Gtk+ (now fixed)
	this was actually making that feature not work! 

2002-02-23  Alexander Larsson  <alla@lysator.liu.se>

	* src/athena-window.c (athena_window_class_init):
	Set the default icon list for all windows.
	(athena_window_realize): Remove old
	GNOME2_CONVERSION_COMPLETE code for setting the window
	icon.

2002-02-27  Jody Goldberg <jody@gnome.org>

	* components/music/configure.c : misc minor deprecation removals.
	* components/music/fileinfo.c : ditto.
	(athena_music_view_update) : reconnect the background.
	* components/music/athena-music-view.c (play_current_file) : convert
	  to gconf.
	* src/file-manager/fm-icon-view.c (preview_audio) : convert to gconf.

	* components/hardware/athena-hardware-view.c
	s/gtk_label_set_wrap/gtk_label_set_line_wrap/
	(setup_overview_form) : Use gnome_program_locate_file to find iconf
	  from gnome-mime-data.
	* components/hardware/main.c (main) : use athena_view_standard_main.
	(cb_create_hardware_view) : new work around the odd inheritance of the
	  view.

2002-02-22  Gediminas Paulauskas <menesis@delfi.lt>

	* configure.in: remove obsolete
	GNOME_COMMON_INIT and GNOME_PLATFORM_GNOME_2 macros.
	* libathena-private/athena-file-operations.c
	(handle_transfer_duplicate):
	* libathena-private/athena-icon-dnd.c
	(athena_icon_container_get_drop_action):
	* libathena-private/athena-volume-monitor.c
	(mount_volume_deactivate):
	add break; statement to empty default: labels to fix warning
	on gcc 3.
	* libathena-private/athena-icon-container.c (clear_drag_state):
	fix typo.

2002-02-22  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-icon-container.c:
	(remove_context_menu_timeout): New.
	(clear_drag_state): Use remove_context_menu_timeout.
	(motion_notify_event): Use remove_context_menu_timeout.
	This fixes a bug where you might end up with two timeouts.
	Remove the code marked "KLUDGE ALERT" which seemed to mess
	up dragging coordinates.

2002-02-22  Darin Adler  <darin@bentspoon.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-icon-text-item.c: Remove.
	* libathena-private/athena-icon-text-item.h: Remove.
	
	* libathena-private/athena-file-dnd.h:
	* libathena-private/athena-file-dnd.c:
	(athena_drag_file_receive_dropped_keyword): Use const char *.
	
	* libathena-private/athena-icon-container.c:
	(rubberband_timeout_callback), (start_rubberbanding),
	(update_stretch_at_idle), (button_release_event),
	(motion_notify_event), (handle_icon_button_press):
	* libathena-private/athena-icon-dnd.c: (icon_get_data_binder),
	(athena_icon_container_position_shadow),
	(receive_dropped_keyword), (receive_dropped_uri_list),
	(athena_icon_container_find_drop_target),
	(athena_icon_container_receive_dropped_icons),
	(athena_icon_container_get_drop_action),
	(athena_icon_dnd_update_drop_target),
	(athena_icon_dnd_begin_drag):
	Use eel_gtk_widget_get_button_event_location and
	eel_gnome_canvas_widget_to_world and the other similar functions
	to fix coordinate handling. Also some const char * fixes.
	
	* libathena-private/athena-icon-private.h: window -> widget
	
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	fm_directory_get_selected_icon_locations ->
	fm_directory_view_get_selected_icon_locations

2002-02-21  Darin Adler  <darin@bentspoon.com>

	* AUTHORS:
	* HACKING:
	* MAINTAINERS:
	* README:
	Update names in a few places.

	* src/athena-main.c: (main): Remove obsolete ENABLE_NLS comment.

2002-02-22  Kjartan Maraas  <kmaraas@gnome.org>

	* components/hardware/main.c: Remove #ifdef ENABLE_NLS since it's not
	supported in GNOME 2.
	* components/music/fileinfo.c: Same here.
	* libathena/athena-view-standard-main. Here too.
	* src/athena-main.c: Same here.
	
	* components/hardware/main.c: Use GETTEXT_PACKAGE.
	* components/history/athena-history-view.c: Same here.
	* components/music/main.c: Same here.
	* components/news/athena-news.c: Same here.
	* components/notes/athena-notes.c: Same.
	* components/text/main.c: Same
					
2002-02-21  Jody Goldberg <jody@gnome.org>

	* components/adapter/athena-adapter-control-factory-embed-strategy.c
	  (athena_adapter_control_factory_embed_strategy_new) : typo.

2002-02-21  Darin Adler  <darin@bentspoon.com>

	* components/image-viewer/: Remove. Michael already took it out of the
	tarball, so I am removing it from cvs for clarity.

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_init): Use g_signal_connect_object with
	G_CONNECT_SWAPPED instead of g_signal_connect_closure.
	
	* src/athena-desktop-window.c: Some code cleanup.

2002-02-21  Darin Adler  <darin@bentspoon.com>

	* libathena-private/Makefile.am: Remove athena-desktop-file-loader.[ch].
	* libathena-private/athena-desktop-file-loader.c: Remove.
	* libathena-private/athena-desktop-file-loader.h: Remove.
	
	* libathena-private/athena-directory-async.c:
	(link_info_athena_link_read_callback): Pass in NULL for the new
	optional URI parameter for parsing existing link files.
	
	* libathena-private/athena-link-desktop-file.h:
	* libathena-private/athena-link-desktop-file.c:
	Change to use GnomeDesktopItem instead of AthenaDesktopFile.
	
	* libathena-private/athena-link.h:
	* libathena-private/athena-link.c:
	(athena_link_get_link_uri_given_file_contents),
	(athena_link_get_link_name_given_file_contents),
	(athena_link_get_link_icon_given_file_contents):
	Add optional URI parameter for parsing existing link files. This
	is passed down to the GnomeDesktopItem level, which can sometimes
	do a better job if it knows the URI.
	
	* src/file-manager/fm-directory-view.c: (activate_callback):
	Change to use GnomeDesktopItem instead of AthenaDesktopFile. Also,
	simplify error handling.

	* Many files:
	Fix includes to use <> style in headers more consistently, and remove
	unnecessarily includes.
	
2002-02-20  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-factory.c
	(embed_text): do the clipping with a new eel method.

2002-02-21  Kjartan Maraas  <kmaraas@gnome.org>

	* src/athena-main.c: Use GETTEXT_PACKAGE, not just PACKAGE
	in the bindtextdomain functions.
	
2002-02-20  Jens Finke <jens@triq.net>

	* src/athena-window-toolbars.c
	(set_up_standard_bonobo_button),
	(set_up_special_bonobo_button): Added gtk stock item fallback
	which is used if a custom icon wasn't found.
	(set_up_toolbar_images): Define proper stock item replacements.

2002-02-20  Jody Goldberg <jody@gnome.org>

	* components/adapter/Makefile.am : add DISABLE_DEPRECATED_CFLAGS.
	* components/adapter/athena-adapter-load-strategy.c
	(athena_adapter_load_strategy_get) : ProgressiveDataSink is gone in
	  gnome2.
	* components/adapter/athena-adapter-embed-strategy.c
	(athena_adapter_embed_strategy_class_init) : use g_cclosure_marshal_*
	  which are not deprecated.
	(athena_adapter_embed_strategy_get) : try ControlFactory in place of
	  Embeddable.
	* components/adapter/athena-adapter-control-factory-embed-strategy.c :
	* components/adapter/athena-adapter-control-factory-embed-strategy.c :
	  Renamed from athena-adapter-embeddable-embed-strategy.c
	  Convert to ControlFactory.
	* components/adapter/athena-adapter-control-factory-embed-strategy.h :
	  Convert to G_* casts.
	* components/adapter/athena-adapter.c :
	  s/gtk_signal_disconnect/g_signal_handler_disconnect/

2002-02-20  David Emory Watson  <dwatson@cs.ucr.edu>

	* src/file-manager/fm-directory-view.c:
	(update_scripts_menu): Avoid race condition by resetting
	scripts_invalid flag before we build the script menus.
	(update_directory_in_scripts_menu): Simplified code. 
	(add_scripts_directory): Moved into
	(add_directory_to_scripts_directory_list): here.
	(remove_scripts_directory): Renamed to
	(remove_directory_from_scripts_directory_list): this.
	(update_scripts_menu): Made code more readable.

2002-02-20  Jens Finke <jens@triq.net>

	* src/file-manager/fm-desktop-icon-view.c
	(change_background_callback): Call gnome2 background setting
	program.

2002-02-20  jacob berkman  <jacob@ximian.com>

	* src/file-manager/athena-indexing-info.c:
	(show_index_progress_dialog), (show_last_index_time_dialog),
	(show_indexing_info_dialog):
	s/g_signal_connect_object/g_signal_connect_swapped/, as this was
	gtk_signal_connect_object which is not the same as
	g_signal_connect_object

2002-02-20  Michael Meeks  <michael@ximian.com>

	* components/throbber/athena-throbber.c
	(athena_throbber_set_small_mode): remove usize
	mis-use.

	* components/text/athena-text-view.c: remove
	bogus ghttp include.

	* components/music/athena-music-view.c
	(image_button_callback): upd. signal handling.
	(xpm_dual_label_box, xpm_label_box): upd. container
	border width.
	(athena_music_view_update): fix leak & upd.
	path handling.

	* components/music/mpg123.c (eval_id3_format),
	(mpg123_format_song_title): upd. path handling.

	* components/hardware/main.c: include string.h

	* components/hardware/athena-hardware-view.c
	(setup_form_title): use gnome_program_locate_file.

	* components/hardware/Makefile.am,
	* components/sample/Makefile.am,
	* components/tree/Makefile.am,
	* components/text/Makefile.am,
	* components/throbber/Makefile.am,
	* components/music/Makefile.am: add disable
	deprecated cflags.

	* components/Makefile.am: remove image_viewer

	* configure.in: upd.

2002-02-20  Michael Meeks  <michael@ximian.com>

	* libathena/athena-view.c
	(athena_view_set_frame): don't spew debug as we
	disconnect from a dead parent.

	* src/athena-sidebar-tabs.c
	(tab_item_destroy): ditto.

	* src/athena-window.
	(athena_window_unrealize): ditto.

2002-02-19  Bastien Nocera  <hadess@hadess.net>

	* src/athena-window-manage-views.c:
	(determined_initial_view_callback):
	display a better message if smb: is the scheme we use

2002-02-19  jacob berkman  <jacob@ximian.com>

	* configure.in: require gnome-desktop library
	
	* libathena-private/athena-icon-dnd.[ch]:
	(athena_icon_dnd_uri_list_extract_uris),
	(athena_icon_dnd_uri_list_free_strings): paste old gnome-mime
	code here as we still need it

	* libathena-private/athena-link-desktop-file.[ch]:
	(athena_link_desktop_file_local_create_from_gnome_entry):
	* libathena-private/athena-link-historical.[ch]:
	(athena_link_historical_local_create_from_gnome_entry):
	* libathena-private/athena-link.[ch]:
	(athena_link_local_create_from_gnome_entry):
	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	port to gnome-desktop and re-enable

	* src/athena-location-bar.c: (drag_data_received_callback): use
	new uri list functions

	* src/athena-zoom-control.c: (draw_number),
	(athena_zoom_control_unload_images),
	(athena_zoom_control_load_images): port to PangoLayout and
	re-enable text fallback

2002-02-19  jacob berkman  <jacob@ximian.com>

	* libathena-private/athena-icon-dnd.c (drag_data_received_callback): 
	(athena_icon_container_free_drag_data): call
	gtk_selection_data_copy() and gtk_selection_data_free() rather
	than the eel versions

2002-02-19  Bastien Nocera  <hadess@hadess.net>

	* libathena-private/athena-authn-manager.c:
	(present_authentication_dialog_nonblocking):
	make password box work again, catching "response"
	signal instead of "clicked"

2002-02-19  Michael Meeks  <michael@ximian.com>

	* src/athena-window-manage-views.c
	(determined_initial_view_callback): ensure we survive
	without trashing the WM, even if we can get no working
	mime data at all.

	* libathena-private/athena-icon-container.c
	(athena_icon_container_init): g_signal_connect_object
	is not like gtk_signal_connect_object_while_alive, it's
	missing a vital arg. swap.

2002-02-17  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_theme_changed): setup both
	the rgba and GdkColor variants.
	(update_label_color): upd. color handling.
	(alloc_colors): allocate the colors on realize

2002-02-15  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_get_label_color): return
	the colors we need, grab them from the style's text
	information though.

2002-02-14  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-canvas-item.c
	(athena_icon_canvas_item_get_property),
	(athena_icon_canvas_item_set_property): port to
	properties.
	(draw_or_measure_label_text): update color handling,
	could we re-use the gc here ?
	(draw_stretch_handles): upd gc unref.
	(athena_icon_canvas_item_class_init): upd.

	* libathena-private/athena-theme.c
	(athena_pixmap_file_may_be_local),
	(athena_theme_install_user_theme),
	(athena_theme_make_preview_pixbuf),
	(theme_get_property),
	(load_theme_document): upd. file tests.

	* libathena-private/athena-monitor.c
	(get_event_uri): use g_build_filename.

	* libathena-private/athena-find-icon-image.c
	(get_user_emblem_path, make_full_icon_path),
	(make_full_icon_path): upd. file test.

	* libathena-private/athena-file-utilities.c
	(athena_pixmap_file),
	(athena_get_data_file_path), 
	(athena_get_user_directory),
	(athena_get_desktop_directory): upd. file tests.

	* libathena-private/athena-directory-metafile.c
	(athena_directory_get_boolean_file_metadata): use
	strcasecmp not ascii_strdown to save yet more malloc
	locking penalty.

	* libathena-private/athena-directory-background.c
	(athena_file_background_receive_root_window_changes),
	(desktop_background_destroyed_callback): upd. root
	window macro.
	(athena_connect_background_to_file_metadata),
	(initialize_background_from_settings),
	(image_loading_done_callback): upd g_signal bits.

	* libathena-private/athena-volume-monitor.c
	(athena_volume_monitor_class_init): upd file test.

	* libathena-private/athena-undo-signal-handlers.c
	(athena_undo_tear_down_athena_entry_for_undo): upd.

	* libathena-private/athena-undo-manager.c
	(athena_undo_manager_class_init): upd. signal bits.

	* libathena-private/athena-trash-monitor.c
	(athena_trash_monitor_class_init): g_cclosureize.
	(athena_trash_monitor_init): g_signal upds.

	* libathena-private/athena-trash-file.c
	(trash_destroy, athena_trash_file_init),
	(remove_real_file): upd. g_signal bits.

	* libathena-private/athena-trash-directory.c
	(athena_trash_directory_init): upd. signal connect.
	(trash_destroy): upd. signal bits.

	* libathena-private/athena-program-choosing.c
	(get_xalf_prefix): upd. find_program_in_path.

	* libathena-private/athena-program-chooser.c
	(athena_program_chooser_init): upd. window policy

	* libathena-private/athena-merged-directory.c
	(merged_remove_real_directory): upd. g_signal.
	(athena_merged_directory_class_init): upd. g_closure

	* libathena-private/athena-link-desktop-file.c
	(athena_link_desktop_file_get_link_icon_from_desktop):
	upd. pixmap location.

	* libathena-private/athena-icon-factory.c
	(athena_icon_factory_class_init): upd. marshallers
	(is_theme_in_user_directory): upd. file test.

	* libathena-private/athena-icon-dnd.c
	(auto_scroll_timeout_callback): do a queue_draw_area
	instead of a widget_draw.

	* libathena-private/athena-icon-container.c
	(athena_icon_container_init),
	(set_pending_icon_to_reveal): g_signal updates.
	(athena_icon_container_new): remove visual
	push/pop.

	* libathena-private/athena-file.c
	(athena_file_fit_date_as_string): upd. julian date get.
	(athena_file_class_init): upd. marshallers.
	
	* libathena-private/athena-file-operations.c
	(extract_and_ellipsize_file_name_for_dialog): use
	get_basename.
	(athena_file_operations_copy_move): use gtk stock.


	* libathena-private/athena-file-operations-progress.c
	(athena_file_operations_progress_update): use
	progress_bar_set_fraction.
	(athena_file_operations_progress_init): prune
	progress setup - these are the defaults.

	* libathena-private/athena-entry.c
	(athena_entry_key_press): upd select_region.

	* libathena-private/athena-drag-window.c
	(get_ancestor_blocked_by): upd type_is_a.

	* libathena-private/athena-dnd.c
	(athena_drag_finalize),
	(athena_drag_init): g_object ref upd.

	* libathena-private/athena-directory.c
	(athena_directory_class_init): marshaller upd..
	(athena_directory_schedule_metadata_remove),
	(athena_directory_schedule_metadata_copy),
	(athena_directory_schedule_metadata_move):
	basename upd.

	* libathena-private/athena-directory-background.c
	(desktop_background_realized): g_signal upd.
	(theme_image_path_to_uri): file test upd.
	(image_loading_done_callback): object unref on gc & pixmap.
	(background_changed_callback): g_signal upd.

	* libathena-private/athena-bookmark.c
	(athena_bookmark_disconnect_file): g_signal upd.
	(athena_bookmark_uri_known_not_to_exist): upd
	file test.

	* libathena-private/athena-authn-manager.c
	(authentication_dialog_button_clicked): use
	GTK_RESPONSE_OK

	* libathena-private/Makefile.am: add deprc.
	CFLAGS.

	* libathena/Makefile.am: ditto.

	* configure.in (DISABLE_DEPRECATED_CFLAGS): add.

2002-02-13  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-dnd.c
	(athena_icon_container_free_drag_data):
	re-enterancy protection.

2002-02-17  Kjartan Maraas  <kmaraas@gnome.org>

	* libathena-private/athena-icon-container.c: Remove calls to
	gtk_widget_push|pop_visual() since they do nothing now.
	
2002-02-15  David Emory Watson <dwatson@cs.ucr.edu>

	* configure.in: Require eel 1.1.5.
	
	* src/athena-sidebar-tabs.c
	(athena_sidebar_tabs_set_color): Use eel_gdk_color_parse () for
	backward compatible color spec. parsing.

	* src/athena-property-browser.c:
	(make_color_drag_image): Same as above.
	(athena_property_browser_drag_data_get): Same as above.

2002-02-15  jacob berkman  <jacob@ximian.com>

	* src/Makefile.am (EXTRA_DIST): remove athena-shell-marshal.list

2002-02-14  Dave Camp  <dave@ximian.com>

	* components/notes/athena-notes.c (done_with_file): 
	(notes_save_metainfo): Replace deprecated signal handling
	functions.

2002-02-14  jacob berkman  <jacob@ximian.com>

	* src/Makefile.am:
	* src/file-manager/Makefile.am: add -DFOO_DISABLE_DEPRECATED to
	disable glib, gtk, and gnome deprecated calls

	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/file-manager/fm-search-list-view.c:
	* src/athena-about.c:
	* src/athena-application.c:
	* src/athena-bookmark-list.c:
	* src/athena-bookmarks-window.c:
	* src/athena-complex-search-bar.c:
	* src/athena-location-bar.c:
	* src/athena-main.c:
	* src/athena-navigation-bar.c:
	* src/athena-property-browser.c:
	* src/athena-search-bar-criterion.c:
	* src/athena-shell.c:
	* src/athena-sidebar-tabs.c:
	* src/athena-sidebar-title.c:
	* src/athena-sidebar.c:
	* src/athena-simple-search-bar.c:
	* src/athena-switchable-navigation-bar.c:
	* src/athena-switchable-search-bar.c:
	* src/athena-theme-selector.c:
	* src/athena-view-frame.c:
	* src/athena-window-manage-views.c:
	* src/athena-window-menus.c:
	* src/athena-window-toolbars.c:
	* src/athena-window.c:
	* src/athena-zoom-control.c: port to non-deprecated calls.  This
	was mostly GnomeDialog -> GtkDialog and gtk_signal -> g_signal

2002-02-12  David Emory Watson  <dwatson@cvs.gnome.org>

	* libathena-private/athena-bonobo-extensions.c:
	(athena_bonobo_add_submenu): Allow submenus to have pixbufs.

	* libathena-private/athena-bonobo-extensions.h: Add pixbuf argument
	to prototype for athena_bonobo_add_submenu ()

	* src/athena-window-menus.c:
	(create_menu_item_from_node): Make reference to
	athena_bonobo_add_submenu conform to new prototype.

	* src/file-manager/fm-directory-view.c:
	(add_submenu): Make reference to athena_bonobo_add_submenu conform to
	new prototype and remove FIXME.

2002-02-12  David Emory Watson  <dwatson@cvs.gnome.org>

	* data/browser.xml: The blue component for Danube was 7FF but somehow
	got converted to FF instead of the correct value of 7F.  This fix makes
	Danube a nice color again.

2002-02-12  Darin Adler  <darin@bentspoon.com>

	* components/tree/athena-tree-model.c:
	(schedule_destroy_unneeded_children): Record the idle ID so we can
	cancel it properly.
	* components/tree/athena-tree-view.c: (sort_model_iter_to_file):
	New.
	(sort_model_path_to_file): Renamed from path_to_file to clarify
	which kid of path.
	(selection_changed_callback): Replaces the old row_activated_callback.
	Switch to the selected directory when you click on a row.
	(create_tree): Connect the "changed" to the selection object.

	* src/file-manager/fm-directory-view.c: Formatting tweaks.
	(update_directory_in_scripts_menu): Fix storage leak.

	* src/file-manager/fm-icon-view.c: (renaming_icon_callback): Enable
	a bit of GNOME2_CONVERSION_COMPLETE code.
	(create_icon_container): Formatting tweaks.

2002-02-12  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c:
	(metadata_for_directory_as_file_ready_callback),
	(metadata_for_files_in_directory_ready_callback):
	A few places where we said "=" but meant "==".

2002-02-11  Darin Adler  <darin@bentspoon.com>

	* configure.in: Require at least libxml 2.4.7, since that's
	the version where xmlFree and friends were moved out of
	<libxml/xmlmemory.h>.

	* components/news/athena-news.c:
	* components/text/athena-text-view.c:
	* libathena-private/athena-customization-data.c:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-find-icon-image.c:
	* libathena-private/athena-link-desktop-file.c:
	* libathena-private/athena-link-historical.c:
	* libathena-private/athena-link.c:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-theme.c:
	* libathena-private/athena-volume-monitor.c:
	* src/athena-bookmark-list.c:
	* src/athena-property-browser.c:
	* src/athena-window-menus.c:
	Remove unneeded include of <libxml/xmlmemory.h>.

	* components/tree/athena-tree-model.c: (get_node_uri): New,
	used only for logging ref. counts.
	(decrement_ref_count): New.
	(abandon_node_ref_count): New.
	(abandon_dummy_row_ref_count): New.
	(report_dummy_row_inserted): Do nothing if the parent is not yet
	in the inserted state.
	(report_dummy_row_deleted): Make it abandon any lingering ref
	count that's still in the dummy row.
	(report_node_inserted): Make it report that the dummy node is
	inserted if the node starts with a dummy child. Also, set the new
	inserted state so we know this node is live.
	(report_node_contents_changed): Do nothing if the node is not
	yet in the inserted state.
	(report_node_has_child_toggled): Do nothing if the node is not yet
	in the inserted state.
	(report_dummy_row_contents_changed): Do nothing if the parent is
	not yet in the inserted state.
	(stop_monitoring_directory): Set done_loading to FALSE so we'll get
	a dummy node for directories we are not monitoring.
	(destroy_node_without_reporting): Abandon any ref count left in the
	node. Also set the inserted state to FALSE before destroying children.
	(destroy_node): Report if the parent gains a dummy node as a result
	of destroying this node.
	(update_node_without_reporting): Don't clear done_loading any more,
	since stop_monitoring_directory does it now.
	(reparent_node): Abandon any ref count that's still in the node
	before reparenting it.
	(schedule_destroy_unneeded_children): New.
	(last_child_unref): Use new schedule_destroy_unneeded_children
	function so we cna share code with the new abandon ref count functions.
	(athena_tree_model_ref_node), (athena_tree_model_unref_node): Add
	some logging for debugging purposes.

	* components/tree/athena-tree-view.c: (compare_rows): Sort function
	to use when GtkTreeModelSort works.
	(create_tree): Hook up sort function.

2002-02-08  Michael Meeks  <michael@ximian.com>

	* src/athena-window.c
	(athena_window_constructed): remove registering own
	'synchronizer' #ifdef bits.
	(athena_window_allow_stop): add 'access' sys
	calls to allow easier strace profiling.

2002-02-11  Jody Goldberg <jody@gnome.org>

	* src/athena-bookmark-parsing.c : Include libxml/globals.h to get
	  xmlFree from its new position.

2002-02-10  Bastien Nocera  <hadess@hadess.net>

	* libathena-private/athena-thumbnails-jpeg.c:
	disable jpeglib's reading of its config.h file
	fixes HAVE_STDLIB double-definition

=== athena 1.1.5 ===

2002-02-09  Darin Adler  <darin@bentspoon.com>

	* NEWS: Bump version number.
	* configure.in: Bump version number.

2002-02-09  Seth Nickell  <snickell@stanford.edu>

	* icons/crux_eggplant/i-directory-12.png:
	* icons/crux_eggplant/i-directory-20.png:
	* icons/crux_eggplant/i-directory-24.png:
	* icons/crux_eggplant/i-directory-36.png:
	* icons/crux_eggplant/i-directory-72.png:
	* icons/crux_eggplant/i-directory.png:
	* icons/crux_teal/i-directory-12.png:
	* icons/crux_teal/i-directory-192.png:
	* icons/crux_teal/i-directory-20.png:
	* icons/crux_teal/i-directory-24.png:
	* icons/crux_teal/i-directory-36.png:
	* icons/crux_teal/i-directory-72.png:
	* icons/crux_teal/i-directory-96.png:
	* icons/crux_teal/i-directory.png:
	* icons/crux_teal/i-regular-12.png:
	* icons/crux_teal/i-regular-192.png:
	* icons/crux_teal/i-regular-20.png:
	* icons/crux_teal/i-regular-24.png:
	* icons/crux_teal/i-regular-36.png:
	* icons/crux_teal/i-regular-72.png:
	* icons/crux_teal/i-regular-96.png:
	* icons/crux_teal/i-regular.png:
	* icons/sierra/i-directory-12.png:
	* icons/sierra/i-directory-24.png:
	* icons/sierra/i-directory-36.png:
	* icons/sierra/i-directory-72.png:
	* icons/sierra/i-directory-96.png:
	* icons/sierra/i-directory-accept-12.png:
	* icons/sierra/i-directory-accept-24.png:
	* icons/sierra/i-directory-accept-36.png:
	* icons/sierra/i-directory-accept-72.png:
	* icons/sierra/i-directory-accept-96.png:
	* icons/sierra/i-directory-accept.png:
	* icons/sierra/i-directory.png:

	Darin's script apparently went wrong, because a number of the themes
	got switched to only having the *non* anti-aliased icons. Replaced 
	them with the anti-aliased versions.

2002-02-08  Darin Adler  <darin@bentspoon.com>

	* components/tree/athena-tree-model.h:
	* components/tree/athena-tree-model.c: (tree_node_destroy),
	(tree_node_get_pixbuf_from_factory), (tree_node_update_pixbuf),
	(tree_node_update_closed_pixbuf), (tree_node_update_open_pixbuf),
	(tree_node_get_closed_pixbuf), (tree_node_get_open_pixbuf),
	(update_node_without_reporting),
	(athena_tree_model_get_column_type),
	(athena_tree_model_get_value):
	Added open pixbuf support.

	* components/tree/athena-tree-view.c: (save_expansion_state):
	Fix storage leak.
	(row_activated_callback): Fix AthenaFile ref. count leak.
	(create_tree): Pass in open pixbuf for "pixbuf_expander_open".
	(get_filtering_as_integer), (update_filtering_from_preferences),
	(filtering_changed_callback), (athena_tree_view_instance_init),
	(athena_tree_view_finalize): Starting on code needed to
	respect the filtering preferences.

2002-02-07  Darin Adler  <darin@bentspoon.com>

	* components/tree/athena-tree-model.h:
	* components/tree/athena-tree-model.c:
	(get_parent_node_from_file): New.
	(insert_node): New.
	(reparent_node): New.
	(update_node): Handle files that disappear or move.
	(process_file_change): Don't create nodes for files that are
	already gone by the time we get here.
	(done_loading_callback): Don't assert if the node for this file
	is gone by the time this shows up.
	(done_loading_idle_callback): New.
	(start_monitoring_directory): Do a done_loading callback for
	directories that are already fully loaded at the start. We have
	to do this at idle time, though, since the tree code can't handle
	all the new nodes showing up inside ref_node.
	(athena_tree_model_iter_n_children): Add; was missing.
	(destroy_unneeded_children): New.
	(destroy_unneeded_children_idle_callback): New.
	(last_child_unref): Destroy the children at idle time, not right
	away. I did this to try to make GtkTreeModelSort work, but it
	didn't fix the whole problem, so maybe take this out later.
	(athena_tree_model_unref_node): Tighten assert.
	(athena_tree_model_iter_get_file): New.
	(athena_tree_model_finalize): Cleanup for new idle functions.
	(athena_tree_model_tree_model_init):

	* components/tree/athena-tree-view.c: (load_expansion_state):
	New placeholder, not yet implemented.
	(path_to_file): New.
	(prepend_one_uri): New.
	(save_expansion_state): New.
	(save_expansion_state_idle_callback): New.
	(schedule_save_expansion_state_callback): New.
	(got_activation_uri_callback): New.
	(cancel_activation): New.
	(row_activated_callback): New.
	(create_tree): Put in first cut at using GtkTreeModelSort;
	couldn't get it working so it's ifdef'd out. Save list of expanded
	URIs next idle after a row is expanded or collapsed. Switch the
	view location when a row is activated.
	(tree_activate_callback): Put in a call to load_expansion_state,
	although it's not implemented yet.
	(athena_tree_view_finalize): Cleanup for new idle functions.

2002-02-08  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added "zh_CN" to ALL_LINGUAS.

2002-02-06  Darin Adler  <darin@bentspoon.com>

	* components/throbber/athena-throbber.c:
	(athena_throbber_instance_init): eel_signal_connect_while_alive
	-> g_object_add_weak_pointer.
	(athena_throbber_finalize), (athena_throbber_class_init):
	Switch to finalize instead of destroy.

	* components/tree/athena-tree-expansion-state.c: Remove.
	* components/tree/athena-tree-expansion-state.h: Remove.
	* components/tree/athena-tree-node-private.h: Remove.
	* components/tree/athena-tree-node.c: Remove.
	* components/tree/athena-tree-node.h: Remove.

	* components/tree/athena-tree-model.h:
	* components/tree/athena-tree-model.c:
	Rewrite, based on Anders's first cut.

	* components/tree/athena-tree-view.h: Tweaks.
	* components/tree/athena-tree-view.c: (create_tree): Get rid of
	the header.
	(athena_tree_view_finalize), (athena_tree_view_class_init):
	Added a missing finalize so that we don't leak.

	* libathena-private/athena-directory.h:
	* libathena-private/athena-directory.c:
	(athena_directory_get_for_file): New.

	* libathena-private/athena-file.h:
	* libathena-private/athena-file.c:
	(finalize): Change to finalize from destroy.
	(athena_file_get_parent): Make public, simplify implementation
	by using athena_directory_get_corresponding_file.

	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_init):
	* src/athena-sidebar.c: (athena_sidebar_update_buttons):
	* src/athena-view-frame.c: (athena_view_frame_init),
	(attach_view):
	* src/athena-window-menus.c:
	(athena_window_initialize_bookmarks_menu),
	(athena_window_initialize_go_menu):
	Use g_signal_connect-object instead of eel_signal_connect_while_alive.

2002-02-06  Dave Camp  <dave@ximian.com>

	* components/news/athena-news.c: Make this component build with
	the deprecation flags set.
	(update_size_and_redraw): #ifed out the gtk_widget_set_usize()
	call pending changes to the size negotation code.
	(get_xml_path): Use g_file_test() instead of g_file_exists().
	(add_channel_to_remove_list), (remove_selected_site),
	(make_remove_widgets): Use a GtkTreeView instead of a GtkCList
	here.
	(determine_sort_position): Use gtk_container_get_children()
	instead of gtk_container_children().
	(add_channel_entry): Use g_object_set_data() instead of
	gtk_object_set_user_data().
	(remove_list_selection_changed): New function, update the remove
	button.
	(update_remove_button): Make the remove button insensitive if no
	channel is selected for removal.
	(make_remove_widgets), (make_add_widgets), (add_command_buttons):
	Use gtk_box_set_spacing() instead of gtk_button_box_set_spacing(), 
	and remove calls to gtk_button_box_set_child_size().
	
2002-02-06  Michael Meeks  <michael@ximian.com>

	* src/athena-window-manage-views.c
	(load_new_location_in_sidebar_panels): guard
	against re-enterancy; hold refs on the sidebars.

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_class_init): move re-entering
	auto preference registers to 
	(fm_directory_view_init): here.

2002-02-05  Darin Adler  <darin@bentspoon.com>

	* components/tree/athena-tree-change-queue.c: Remove.
	* components/tree/athena-tree-change-queue.h: Remove.
	* components/tree/athena-tree-view-dnd.c: Remove.
	* components/tree/athena-tree-view-dnd.h: Remove.
	* components/tree/athena-tree-view-private.h: Remove.

	* libathena-private/Makefile.am:
	* libathena-private/athena-dnd.c:
	* libathena-private/athena-dnd.h:
	Move eel-dnd.[ch] back into Athena, because it currently is
	completely file-manager-specific.

	* libathena-private/athena-file-dnd.c:
	* libathena-private/athena-file-dnd.h:
	* libathena-private/athena-icon-dnd.c:
	* libathena-private/athena-icon-dnd.h:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	Change to use eel-dnd.[ch] in their new location in Athena.

	* src/file-manager/fm-directory-view.c: Add included needed due
	to include changes.

2002-02-05  Anders Carlsson  <andersca@gnu.org>

	* components/tree/Makefile.am:
	* components/tree/athena-tree-model.c:
	(athena_tree_node_set_parent), (athena_tree_node_new),
	(athena_dummy_tree_node_new), (athena_tree_node_update_icons),
	(athena_tree_model_get_type), (athena_tree_model_init),
	(athena_tree_model_class_init), (uri_get_parent_text),
	(athena_tree_model_get_node_from_file),
	(athena_tree_model_get_node), (report_node_changed),
	(report_root_node_if_possible), (process_file_change),
	(athena_tree_model_directory_files_changed_callback),
	(athena_tree_model_directory_done_loading_callback),
	(athena_tree_model_begin_monitoring_directory),
	(athena_tree_model_get_n_columns),
	(athena_tree_model_get_column_type),
	(athena_tree_model_get_iter), (athena_tree_model_get_path),
	(athena_tree_model_get_value), (athena_tree_model_iter_next),
	(athena_tree_model_iter_children),
	(athena_tree_model_iter_parent),
	(athena_tree_model_iter_has_child),
	(athena_tree_model_iter_nth_child),
	(athena_tree_model_tree_model_init),
	(athena_tree_model_root_node_file_monitor),
	(athena_tree_model_set_root_uri), (athena_tree_model_new),
	(athena_tree_model_dump_helper), (athena_tree_model_dump):
	* components/tree/athena-tree-model.h:
	* components/tree/athena-tree-view.c: (create_tree),
	(tree_activate_callback), (dump_tree), (athena_tree_view_init),
	(athena_tree_view_class_init):
	* components/tree/athena-tree-view.h:
	Port to GtkTreeView, lots of work still remains though.
	
	* src/athena-application.c: (finish_startup):
	Remove GMC trash migration.
	
2002-02-04  Michael Meeks  <michael@ximian.com>

	* src/file-manager/fm-icon-view.c
	(fm_icon_view_class_init): move re-enterant CORBA stuff
	(fm_icon_view_init): to here.

	* src/athena-shell-ui.xml: add a default placeholder.

	* configure.in (BONOBO_UI_REQUIRED): require a fixed
	libbonoboui that can cope with default placeholders.

2002-02-04  Darin Adler  <darin@bentspoon.com>

	* src/athena-shell-ui.xml: Put a placeholder in so that component
	menus will go to the left of the Help menu.

=== athena 1.1.4 ===

2002-02-04  Darin Adler  <darin@bentspoon.com>

	* .cvsignore: Don't ignore tarballs.
	* NEWS: Bump version number.
	* configure.in: Bump version number.

	* src/file-manager/fm-directory-view.c: (activate_callback):
	Clean up code here a bit; patch submitted by David Emory Watson.

	* src/file-manager/athena-icon-view-ui.xml: Tweak wording as
	suggested by Steve Fox <drfickle@k-lug.org>.

2002-02-04  Laszlo Peter  <laca@ireland.sun.com>

	* libathena/athena-clipboard.[ch]: fix licensing info.

2002-02-01  Dave Camp  <dave@ximian.com>

	* configure.in: Increased GNOME_UI_REQUIRED to 1.110.1

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_class_init): Use
	athena_marshal_VOID__POINTER_STRING instead of
	athena_marshal_VOID__POINTER_POINTER for the icon_text_changed
	signal.
	(handle_focus_out_event): Return FALSE.
	(athena_icon_container_start_renaming_selected_item),
	(end_renaming_mode): Use GnomeIconTextItem instead of
	AthenaIconTextItem.  This includes changing how the size was
	calculated, as AthenaIconTextItem expected a center point and
	maximum width, and GnomeIconTextItem expects a bounding box.

	* libathena-private/athena-icon-private.h: Use
	GnomeIconTextItem instead of AthenaIconTextItem for
	rename_widget.
	* libathena-private/athena-marshal.list: Added
	VOID:POINTER,STRING.
	* src/file-manager/fm-icon-view.c: (renaming_icon_callback):
	Temporarily #ifed out the
	athena_clipboard_set_up_editable_in_control for the renaming
	editable.

2002-01-31  John Harper  <jsh@unfactored.org>

	Make the search feature work again:

	* configure.in: fixed how HAVE_MEDUSA is defined. Add
	MEDUSA_CFLAGS to CORE_CFLAGS

	* src/file-manager/fm-search-list-view.c: moved some of the
	GNOME2_CONVERSION_COMPLETE ifdefs around so that we get a
	functional object, just without some of the features of the
	original

	* src/athena-shell-ui.xml: copied search parts from athena
	1 version

	* src/athena-application.c (create_object): reenable
	search-list-view creation

	* src/file-manager/athena-indexing-info.c: random changes to
	make it compile (untested as yet)

2002-01-30  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bump eel version required.
	
	* libathena-private/athena-icon-container.c:
	(rubberband_timeout_callback), (start_rubberbanding),
	(update_stretch_at_idle), (motion_notify_event):
	* libathena-private/athena-icon-dnd.c: (icon_get_data_binder),
	(athena_icon_container_position_shadow),
	(receive_dropped_keyword),
	(athena_icon_container_find_drop_target),
	(athena_icon_container_receive_dropped_icons),
	(athena_icon_container_get_drop_action),
	(athena_icon_dnd_update_drop_target), (athena_icon_dnd_init),
	(athena_icon_dnd_begin_drag):
	Use new eel functions that eliminate the funky interaction between
	the new GtkLayout and GnomeCanvas. Basically, all the functions
	that deal with window coordinates are getting bin_window
	coordinates instead. This should really be fixed in GnomeCanvas.

2002-01-30  Zbigniew Chyla  <cyba@gnome.pl>

	* libathena-private/athena-authn-manager.c
	(construct_password_dialog):
	DO NOT mark empty strings for translation.

2002-01-29  Darin Adler  <darin@bentspoon.com>

	* components/tree/athena-tree-view.c: (create_tree),
	(athena_tree_view_destroy):
	* libathena-private/athena-directory.c:
	(add_preferences_callbacks):
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	* libathena-private/athena-icon-canvas-item.c:
	(measure_label_text), (athena_icon_canvas_item_render),
	(athena_icon_canvas_item_set_show_stretch_handles):
	* libathena-private/athena-icon-container.c:
	(start_rubberbanding), (finalize), (athena_icon_container_init),
	(athena_icon_container_update_icon),
	(athena_icon_container_theme_changed):
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-private.h:
	* src/file-manager/fm-directory-view.c: (fm_directory_view_init),
	(fm_directory_view_finalize):
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-icon-view.c:
	(fm_icon_view_update_icon_container_font_size_table),
	(create_icon_container), (fm_icon_view_class_init):
	Remove smooth mode and unused font and font size machinery.

	* test/.cvsignore: Remove test-athena-smooth-graphics.
	* test/Makefile.am: Remove test-athena-smooth-graphics.
	* test/test-athena-smooth-graphics.c: Remove.

	* src/athena-preferences-dialog.c:
	(dialog_delete_event_callback), (dialog_button_response_callback),
	(preferences_dialog_create): Fix bug where we'd lose the
	preferences dialog if you closed it with a delete_event.
	
=== athena 1.1.3 ===

2002-01-29  Darin Adler  <darin@bentspoon.com>

	* NEWS: Update for 1.1.3 release.
	* configure.in: Bump version.

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_finalize), (real_merge_menus):
	Use a weak pointer so we don't retain a pointer to the UI component
	if the BonoboControl goes away, but we don't. This doesn't really
	fix anything, but it also does no harm.

2002-01-28  Seth Nickell  <snickell@stanford.edu>

	* data/applications.desktop.in:
	* data/preferences.desktop.in:

	Bring start-here stuff up to date with current
	URI schemes, update to use appropriate system icons.
	
2002-01-28  Remi Cohen-Scali  <remi@cohen-scali.com>

	* libathena-private/athena-program-choosing.c 
	(athena_launch_application_from_command): Changed the system(3) call to 
	launch application from command. Instead use eel_gnome_shell_execute.

	* src/file-manager/fm-directory-view.c (activate_callback): 
	Now use newly public AthenaDesktopFile class & athena_desktop_file_launch
	to launch the corresponding command.

	* libathena-private/athena-desktop-file-loader.c: 
	* libathena-private/athena-desktop-file-loader.h: 
	Made the AthenaDesktopFile class public. The struct has been moved
	from the source to the header. The athena_desktop_file_new method
	is not static any more.
	
	* libathena-private/athena-desktop-file-loader.c 
	(athena_desktop_file_launch):
	Add the locale name taken from the desktop file to display it
	through xalf (launch feedback).	

2002-01-28  Seth Nickell  <snickell@stanford.edu>

	* icons/Makefile.am:
	* icons/default/Makefile.am:
	* icons/default/emblem-OK.svg:
	* icons/default/emblem-broken-link.png:
	* icons/default/emblem-certified.svg:
	* icons/default/emblem-cool.svg:
	* icons/default/emblem-danger.svg:
	* icons/default/emblem-distinguished.svg:
	* icons/default/emblem-draft.svg:
	* icons/default/emblem-favorite.svg:
	* icons/default/emblem-generic.png:
	* icons/default/emblem-generic.svg:
	* icons/default/emblem-important.gif:
	* icons/default/emblem-important.svg:
	* icons/default/emblem-new.gif:
	* icons/default/emblem-new.svg:
	* icons/default/emblem-noread.png:
	* icons/default/emblem-noread.svg:
	* icons/default/emblem-nowrite.svg:
	* icons/default/emblem-ohno.svg:
	* icons/default/emblem-personal.svg:
	* icons/default/emblem-special.svg:
	* icons/default/emblem-symbolic-link-12.png:
	* icons/default/emblem-symbolic-link-24.png:
	* icons/default/emblem-symbolic-link-36.png:
	* icons/default/emblem-symbolic-link.png:
	* icons/default/emblem-trash.png:
	* icons/default/emblem-urgent.svg:
	* icons/emblem-OK.svg:
	* icons/emblem-broken-link.png:
	* icons/emblem-certified.svg:
	* icons/emblem-cool.svg:
	* icons/emblem-danger.svg:
	* icons/emblem-distinguished.svg:
	* icons/emblem-draft.svg:
	* icons/emblem-favorite.svg:
	* icons/emblem-generic.png:
	* icons/emblem-generic.svg:
	* icons/emblem-important.gif:
	* icons/emblem-important.svg:
	* icons/emblem-new.gif:
	* icons/emblem-new.svg:
	* icons/emblem-noread.png:
	* icons/emblem-noread.svg:
	* icons/emblem-nowrite.svg:
	* icons/emblem-ohno.svg:
	* icons/emblem-personal.svg:
	* icons/emblem-special.svg:
	* icons/emblem-symbolic-link-12.png:
	* icons/emblem-symbolic-link-24.png:
	* icons/emblem-symbolic-link-36.png:
	* icons/emblem-symbolic-link.png:
	* icons/emblem-trash.png:
	* icons/emblem-urgent.svg:

	Move emblems into the default theme so they start working
	again. Remove the hand*.png icons, which are no longer
	used (used to be used for eazel services).
	
2002-01-28  Gediminas Paulauskas <menesis@delfi.lt>

	* libathena-private/athena-directory.c,
	libathena-private/athena-icon-container.c: use g_list_copy
	instead of eel version
	* src/athena-preferences-dialog.c,
	src/athena-property-browser.c,
	src/athena-window-manage-views.c,
	src/athena-window-menus.c,
	src/file-manager/fm-properties-window.c: use gtk_window_present
	instead of eel version.

2002-01-28  Seth Nickell  <snickell@stanford.edu>

	* libathena-private/athena-global-preferences.c:
	(import_old_preferences_if_needed),
	(athena_global_preferences_init):

	Add a function for moving preference values (if they exist)
	from their old location to their new location, if it
	hasn't already been done.
	
	* libathena-private/athena-global-preferences.h:

	Change the location/name of THEME, SHOW_HIDDEN_FILES and
	SHOW_BACKUP_FILES so other file viewers in GNOME can smoothly
	access them.

2002-01-28  Anders Carlsson  <andersca@gnu.org>

	* components/throbber/main.c (main): Call gnome_program_init.

	* libathena/athena-view-standard-main.c 
	(athena_view_standard_main_multi): Call gnome_program_init.

	* libathena-private/athena-entry.c: Fix build.

	* libathena-private/athena-file.c: 
	* libathena-private/athena-file.h:
	Remove gmc link support and calls to gnome_set_metadata.
	
	* libathena-private/athena-file-operations.c 
	(create_transfer_dialog): Set transfer_info as user_data.

	* libathena-private/athena-file-operations-progress.c: Move stuff
	to finalize.

	* libathena-private/athena-entry.c: Remove cursor obscuring code
	since that exists in GtkEntry now.

2002-01-27  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-icon-canvas-item.c:
	(draw_or_measure_label_text), (draw_stretch_handles): Formatting tweaks.
	* libathena-private/athena-icon-container.c: (icon_raise): Use new
	eel_gnome_canvas_item_send_behind.

2002-01-27  Alexander Larsson  <alla@lysator.liu.se>

	* libathena-private/athena-icon-canvas-item.c:
	Draw alpha-blended rounded rectangles around selected text even
	in non-aa mode.

	* libathena-private/athena-icon-container.c:
	Use the new EelCanvasRect item for selection rectangle in
	non-aa mode.
	Also make sure we never raise anything above the selection
	rectangle item. This means we can remove the
	gnome_canvas_item_raise_to_top() in rubberband_timeout_callback,
	which is good, since that call redraws the whole selection
	rectangle if something was above it.

2002-01-27  Anders Carlsson  <andersca@gnu.org>

	* src/file-manager/fm-properties-window.c (attach_label): Add selectable argument.
	(attach_value_label): set selectable to TRUE.
	(attach_ellipsizing_value_label): Likewise.
	(attach_title_field): set selectable to FALSE.

2002-01-23  Anders Carlsson  <andersca@gnu.org>

	* libathena/athena-view-standard-main.c (delayed_quit_timeout_callback): 
	Use gtk_main_quit.

2002-01-25  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-bookmark.c
	(athena_bookmark_set_name): return a 'changed'
	boolean.

	* src/athena-window-manage-views.c
	(update_title): only re-send history if it changed.

	* src/athena-window.c (add_to_history_list): prune
	the end of the list more succinctly, don't fire
	send_history_list_changed if we didn't change the list.

2002-01-24  Darin Adler  <darin@bentspoon.com>

	GNOME2_CONVERSION_COMPLETE eradication campaign

	* libathena-private/athena-icon-factory.c: (cache_icon_new):
	No last_unref_handler any more.
	(cache_icon_unref): Just keep one ref for the factory, just like
	in the old days, since we don't have a "last_unref_handler" any
	more.
	(athena_icon_factory_possibly_free_cached_icon): Look at
	ref_count rather than looking at "outstanding" flag.
	(athena_icon_factory_get_pixbuf_for_icon): Just ref, no fancy
	"oustanding" logic.
	(embed_text): Rewrite to use Pango.
	
	* src/file-manager/fm-list-model.h: Tweak formatting and order.
	* src/file-manager/fm-list-model.c: Tweak formatting and order.
	* src/file-manager/fm-list-view.h: Tweak formatting and order.
	* src/file-manager/fm-list-view.c: Tweak formatting and order.
	
	* src/file-manager/fm-properties-window.c:
	(select_image_button_callback): Turn this code back on.
	
	* src/athena-bookmarks-window.c: (on_row_move): Remove puts.
	
	* src/athena-complex-search-bar.c:
	(athena_complex_search_bar_queue_resize): GnomeDock -> BonoboDock.
	
	* src/athena-property-browser.c: (athena_emblem_dialog_new):
	Finish porting to GtkDialog.
	(athena_color_selection_dialog_new): Finish porting to
	GtkDialog.
	(add_new_pattern): Re-enable some code.
	(labeled_image_configure): Re-enable some code, take out other stuff.
	(labeled_image_new): Take out some dead code.
	(property_browser_category_button_new): Take out some dead code.
	
	* src/athena-sidebar-tabs.c: (tab_item_destroy),
	(tab_indicator_changed_callback),
	(athena_sidebar_tabs_connect_view):
	Use a listener object now, not a listener ID.

	* src/athena-simple-search-bar.c:
	(athena_simple_search_bar_class_init): Remove some undo code.
	
	* src/athena-switchable-navigation-bar.c:
	(athena_switchable_navigation_bar_set_mode): GnomeDock -> BonoboDock.
	
	* src/athena-switchable-search-bar.c:
	(athena_switchable_search_bar_set_mode): GnomeDock -> BonoboDock.
	
	* src/athena-view-frame.c: (destroy_view): Make deregister code use
	the BonoboUIEngine instead of the BonoboWindow.

2002-01-24  Darin Adler  <darin@bentspoon.com>

	GNOME2_CONVERSION_COMPLETE eradication campaign

	* components/hardware/athena-hardware-view.c:
	(athena_hardware_view_init): Re-enable the property bag.
	
	* components/image-viewer/Makefile.am: Remove io-png.[ch].
	* components/image-viewer/io-png.c: Remove.
	* components/image-viewer/io-png.h: Remove.
	* components/image-viewer/athena-image-view.c:
	(save_image_to_stream): Not implemented.
	
	* libathena-private/athena-directory-metafile.c:
	(athena_directory_register_metadata_monitor),
	(athena_directory_unregister_metadata_monitor):
	Wipe out some bonobo_object_corba_objref calls.
	
	* src/athena-window.h: Make the throbber private.
	* src/athena-window-private.h: Make the throbber private.
	Use a listener object now, not a listener ID.
	
	* src/athena-window-toolbars.c:
	(athena_window_initialize_toolbars): Move the throbber
	into details.
	
	* src/athena-window.c: (athena_window_constructed),
	(athena_window_unrealize): Use the new listener calls that
	use an object, not an ID.
	(athena_window_allow_stop): Move the throbber into details.

2002-01-24  Darin Adler  <darin@bentspoon.com>

	* src/athena-bookmarks-window.c: (create_bookmarks_window):
	Remove stray call to gtk_tree_view_column_new.

2002-01-24  Seth Nickell  <snickell@stanford.edu>

	* athena.desktop.in:

	Change name to "Home Folder".

2002-01-23  Darin Adler  <darin@bentspoon.com>

	* components/adapter/main.c: (main):
	* components/image-viewer/athena-image-view.c:
	(init_server_factory):
	* components/throbber/main.c: (main):
	Use newfangled gnome-client.h calls to turn off session management.

	* libathena/athena-view-standard-main.c:
	(athena_view_standard_main_multi): Since we think
	the per-display IID scheme is broken in bonobo-activation,
	we turned it off there, rather than turning it off here.

2002-01-23  Michael Meeks  <michael@ximian.com>

	* libathena/athena-view-standard-main.c
	(athena_view_standard_main_multi): re-remove the
	per display IID creation scheme - it's broken.

	* components/throbber/athena-throbber.c
	(athena_throbber_draw): kill, no draw methods
	in gtk 2.0
	(draw_throbber_image): remove bonobo bug
	workaround, if it still exists it should be fixed
	in bonobo and fold into
	(athena_throbber_expose): here
	(draw_pixbuf): fold into
	(athena_throbber_expose): here, and fix
	rendering bugs.
	(athena_throbber_size_allocate): kill bogus
	sizing logic.
	(athena_throbber_button_release_event): do
	conversion.
	(athena_throbber_destroy): remove
	force_destroy_later.

2002-01-21  Michael Meeks  <michael@ximian.com>

	* src/athena-window.c,
	* src/athena-application.c,
	* src/athena-view-frame.c,
	* libathena-private/athena-undo-manager.c,
	* libathena-private/athena-metafile-factory.c,
	* libathena/athena-undo-transaction.c,
	s/bonobo_object_corba_objref/BONOBO_OBJREF/

	* libathena-private/athena-directory-metafile.c
	(get_factory): update referencing.

	* libathena/athena-view.c
	(athena_view_get_view_frame): impl. helper to
	reduce sync CORBA traffic.
	(view_frame_call_end, view_frame_call_begin): upd.
	(athena_view_dispose): release the CORBA ref. if we
	took it.
	(athena_view_set_frame): unset the frame if we
	loose it.

	* libathena-private/athena-bonobo-extensions.c
	(add_numbered_menu_item_internal): kill the label encoding.
	(athena_bonobo_add_submenu): ditto.
	(athena_bonobo_set_icon): kill unused.

	* components/adaptor/bonobo-stream-vfs.[ch]: remove, now
	inside gnome-vfs.

2002-01-23  jacob berkman  <jacob@ximian.com>

	* icons/default/Makefile.am (SUBDIRS): remove since automake
	doesn't like an empty SUBDIRS

2002-01-22  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-icon-factory.c:
	(load_icon_for_scaling): Disable the code that destroys the fallback
	icon at shutdown time since it was hitting some snags.

	* libathena/athena-view-standard-main.c:
	(athena_view_standard_main_multi): Add a bonobo_activate to try
	to reduce the complaints at quit time.

	* src/athena-location-bar.c: (editable_key_press_callback):
	Make the End key do what the right arrow key did.

	* src/athena-window-manage-views.c: (use_saved_window_positions),
	(open_location), (position_and_show_window_callback),
	(determined_initial_view_callback): Open windows right away unless
	we are using saved window positions.

	* icons/default/Makefile: Remove.
	* icons/default/Makefile.in: Remove.

2002-01-22  Josh Barrow  <drleary@mac.com>

	* icons/crux_eggplant/crux_eggplant.xml:
	* icons/crux_teal/crux_teal.xml:
	* icons/default/default.xml:
	* icons/gnome/gnome.xml:
	Changed tab fonts to use something that Pango understands.

2002-01-22  Seth Nickell  <snickell@stanford.edu>

	Seperate document icons from the themes so they
	can be moved into gnome-mime-data and used by
	other applications more cleanly.

	* configure.in:

	* icons/Makefile.am:
	* icons/default.xml:
	* icons/default/.cvsignore:
	* icons/default/Back.png:
	* icons/default/Forward.png:
	* icons/default/Home.png:
	* icons/default/Makefile:
	* icons/default/Makefile.am:
	* icons/default/Makefile.in:
	* icons/default/Refresh.png:
	* icons/default/Search.png:
	* icons/default/SearchWeb.png:
	* icons/default/Stop.png:
	* icons/default/Up.png:
	* icons/default/decrement.png:
	* icons/default/default.xml:
	* icons/default/home.png:
	* icons/default/i-bookmark-20.png:
	* icons/default/i-bookmark-missing-20.png:
	* icons/default/i-bookmark-missing.png:
	* icons/default/i-bookmark.png:
	* icons/default/i-broken-image.png:
	* icons/default/i-directory-12.png:
	* icons/default/i-directory-24.png:
	* icons/default/i-directory-36.png:
	* icons/default/i-directory-72.png:
	* icons/default/i-directory-96.png:
	* icons/default/i-directory-accept-12.png:
	* icons/default/i-directory-accept-24.png:
	* icons/default/i-directory-accept-36.png:
	* icons/default/i-directory-accept-72.png:
	* icons/default/i-directory-accept-96.png:
	* icons/default/i-directory-accept.png:
	* icons/default/i-directory-accept.xml:
	* icons/default/i-directory.png:
	* icons/default/i-directory.xml:
	* icons/default/i-regular-12.png:
	* icons/default/i-regular-24.png:
	* icons/default/i-regular-36.png:
	* icons/default/i-regular-72.png:
	* icons/default/i-regular-96.png:
	* icons/default/i-regular.png:
	* icons/default/i-regular.xml:
	* icons/default/i-search-72.png:
	* icons/default/i-spreadsheet.png:
	* icons/default/i-stalled.png:
	* icons/default/i-symlink.png:
	* icons/default/i-web-72.png:
	* icons/default/increment.png:
	* icons/default/loading.png:
	* icons/default/manual.png:
	* icons/default/number_strip.png:
	* icons/default/side_bar_image.png:
	* icons/default/temp-home.png:
	* icons/default/theme_preview.png:
	* icons/default/trash-empty.png:
	* icons/default/trash-full.png:
	* icons/default/zoom_body.png:

	Move default theme from icons/ into icons/default.
	
	* icons/gnome-application-encapsulated_postscript.png:
	* icons/gnome-application-pdf-192.png:
	* icons/gnome-application-pdf.png:
	* icons/gnome-application-pgp-192.png:
	* icons/gnome-application-pgp.png:
	* icons/gnome-application-postscript-192.png:
	* icons/gnome-application-postscript-72.png:
	* icons/gnome-application-postscript-96.png:
	* icons/gnome-application-postscript.png:
	* icons/gnome-application-x-c-header.png:
	* icons/gnome-application-x-c-source.png:
	* icons/gnome-application-x-cc-source.png:
	* icons/gnome-application-x-e-theme.png:
	* icons/gnome-application-x-generic-spreadsheet.png:
	* icons/gnome-application-x-gnome-app-info.png:
	* icons/gnome-application-x-java-source.png:
	* icons/gnome-application-x-kde-app-info.png:
	* icons/gnome-application-x-php.png:
	* icons/gnome-application-x-reject.png:
	* icons/gnome-application-x-scheme-source.png:
	* icons/gnome-application-x-sql.png:
	* icons/gnome-audio-basic.png:
	* icons/gnome-audio-midi.png:
	* icons/gnome-audio-ulaw.png:
	* icons/gnome-audio-x-aiff.png:
	* icons/gnome-audio-x-mod-192.png:
	* icons/gnome-audio-x-mod.png:
	* icons/gnome-audio-x-mp3-192.png:
	* icons/gnome-audio-x-mp3.png:
	* icons/gnome-audio-x-ogg-192.png:
	* icons/gnome-audio-x-ogg.png:
	* icons/gnome-audio-x-pn-realaudio.png:
	* icons/gnome-audio-x-real-192.png:
	* icons/gnome-audio-x-s3m-192.png:
	* icons/gnome-audio-x-s3m.png:
	* icons/gnome-audio-x-stm-192.png:
	* icons/gnome-audio-x-stm.png:
	* icons/gnome-audio-x-voc.png:
	* icons/gnome-audio-x-wav.png:
	* icons/gnome-audio-x-xi-192.png:
	* icons/gnome-audio-x-xi.png:
	* icons/gnome-audio-x-xm.png:
	* icons/gnome-audio.png:
	* icons/gnome-compressed-192.png:
	* icons/gnome-compressed.png:
	* icons/gnome-core.png:
	* icons/gnome-emacs-192.png:
	* icons/gnome-font-afm.png:
	* icons/gnome-font-ttf.png:
	* icons/gnome-font-x-pcf.png:
	* icons/gnome-gimp.png:
	* icons/gnome-gnumeric.png:
	* icons/gnome-http-url.png:
	* icons/gnome-image-bmp.png:
	* icons/gnome-image-generic.png:
	* icons/gnome-image-gif.png:
	* icons/gnome-image-ief.png:
	* icons/gnome-image-jpeg.png:
	* icons/gnome-image-pbm.png:
	* icons/gnome-image-pgm.png:
	* icons/gnome-image-png.png:
	* icons/gnome-image-pnm.png:
	* icons/gnome-image-ppm.png:
	* icons/gnome-image-psd.png:
	* icons/gnome-image-ras.png:
	* icons/gnome-image-rgb.png:
	* icons/gnome-image-tga.png:
	* icons/gnome-image-tiff.png:
	* icons/gnome-image-x-xfig.png:
	* icons/gnome-image-xbm.png:
	* icons/gnome-image-xcf.png:
	* icons/gnome-image-xpm.png:
	* icons/gnome-image-xwd.png:
	* icons/gnome-library.png:
	* icons/gnome-manpage.png:
	* icons/gnome-objectfile.png:
	* icons/gnome-pack-deb.png:
	* icons/gnome-pack-rpm.png:
	* icons/gnome-package.png:
	* icons/gnome-tex-192.png:
	* icons/gnome-tex.png:
	* icons/gnome-text-html-192.png:
	* icons/gnome-text-html.png:
	* icons/gnome-text-x-authors.png:
	* icons/gnome-text-x-copying.png:
	* icons/gnome-text-x-credits.png:
	* icons/gnome-text-x-install.png:
	* icons/gnome-text-x-makefile-192.png:
	* icons/gnome-text-x-makefile.png:
	* icons/gnome-text-x-readme.png:
	* icons/gnome-textfile.png:
	* icons/gnome-video-mpeg.png:
	* icons/gnome-video-quicktime.png:
	* icons/gnome-video-x-msvideo.png:
	* icons/gnome-word-192.png:
	* icons/i-blockdev.png:
	* icons/i-bookmark-20.png:
	* icons/i-bookmark-missing-20.png:
	* icons/i-bookmark-missing.png:
	* icons/i-bookmark.png:
	* icons/i-broken-image.png:
	* icons/i-cdrom-192.png:
	* icons/i-cdrom.png:
	* icons/i-chardev.png:
	* icons/i-core.png:
	* icons/i-device.png:
	* icons/i-dirclosed.png:
	* icons/i-directory-12.png:
	* icons/i-directory-24.png:
	* icons/i-directory-36.png:
	* icons/i-directory-72.png:
	* icons/i-directory-96.png:
	* icons/i-directory-accept-12.png:
	* icons/i-directory-accept-24.png:
	* icons/i-directory-accept-36.png:
	* icons/i-directory-accept-72.png:
	* icons/i-directory-accept-96.png:
	* icons/i-directory-accept.png:
	* icons/i-directory-accept.xml:
	* icons/i-directory.png:
	* icons/i-directory.xml:
	* icons/i-executable.png:
	* icons/i-fifo.png:
	* icons/i-floppy.png:
	* icons/i-harddisk.png:
	* icons/i-music-12.png:
	* icons/i-music-24.png:
	* icons/i-music-36.png:
	* icons/i-music.png:
	* icons/i-nfs.png:
	* icons/i-printer.png:
	* icons/i-regular-12.png:
	* icons/i-regular-24.png:
	* icons/i-regular-36.png:
	* icons/i-regular-72.png:
	* icons/i-regular-96.png:
	* icons/i-regular.png:
	* icons/i-regular.xml:
	* icons/i-search-72.png:
	* icons/i-sock.png:
	* icons/i-spreadsheet.png:
	* icons/i-stalled.png:
	* icons/i-symlink.png:
	* icons/i-web-72.png:
	* icons/i-zip.png:
	* icons/i-zipdisk.png:
	* icons/i-zipdisk2.png:
	* icons/loading.png:
	* icons/manual.png:
	* icons/temp-home.png:
	* icons/trash-empty.png:
	* icons/trash-full.png:

	Move icons to either gnome-mime-data/icons or, perhaps,
	athena/icons/default

	* libathena-private/athena-find-icon-image.c:
	(make_full_icon_path), (get_themed_icon_file_path),
	(athena_get_icon_file_name):

	Add support for looking in DATADIR/share/pixmaps/document-icons
	as a fallback for the current theme and the fallback theme.

	Remove hardcoded "default" theme stuff.
	
	* libathena-private/athena-icon-factory.c:
	(icon_theme_changed_callback):

	If a theme doesn't have a fallback theme listed, use the
	"default" theme as the fallback. Should be the only default
	theme hardcoding left.
	
	* libathena-private/athena-theme.c: (load_theme_document),
	(athena_theme_get_theme_data_from_theme),
	(athena_theme_get_image_path_from_theme),
	(athena_theme_make_preview_pixbuf), (has_image_file),
	(theme_get_property), (athena_theme_for_each_theme):

	Remove hardcoding of default theme.
	
	* icons/crux_eggplant/crux_eggplant.xml:

	Remove inheritance clause which was pointing to "arlo",
	a theme which does not exist anymore.
	
2002-01-16  Havoc Pennington  <hp@redhat.com>

	* libathena-private/athena-file-operations.c
	(ellipsize_string_for_dialog): add comment about how this should
	be fixed

	* components/news/athena-news.c (ellipsize_string): add comment
	about how this should be fixed

2002-01-21  Darin Adler  <darin@bentspoon.com>

	* icons/Makefile.am:
	* icons/text-selection-frame-aa.png:
	* icons/text-selection-frame.png:
	Restore the anti-aliased text selection frame.

2002-01-21  Darin Adler  <darin@bentspoon.com>

	* components/tree/athena-tree-view.c:
	(athena_tree_view_insert_model_node),
	(athena_tree_view_update_model_node):
	* libathena-private/athena-bookmark.c:
	(athena_bookmark_get_pixbuf):
	* libathena-private/athena-find-icon-image.c: (read_details),
	(get_themed_icon_file_path), (theme_has_icon),
	(athena_get_icon_file_name):
	* libathena-private/athena-find-icon-image.h:
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_update_icon):
	* libathena-private/athena-icon-factory-private.h:
	* libathena-private/athena-icon-factory.c:
	(load_thumbnail_frame), (athena_icon_factory_init),
	(athena_icon_factory_destroy), (icon_theme_changed_callback),
	(should_display_image_file_as_itself),
	(athena_icon_factory_get_icon_for_file), (load_icon_from_path),
	(load_named_icon), (load_specific_icon), (load_icon_for_scaling),
	(load_icon_scale_if_necessary), (get_icon_from_cache),
	(athena_icon_factory_get_pixbuf_for_icon), (cache_key_hash),
	(cache_key_equal), (athena_icon_factory_get_pixbuf_for_file),
	(athena_icon_factory_get_pixbuf_from_name),
	(athena_icon_factory_get_thumbnail_frame):
	* libathena-private/athena-icon-factory.h:
	* libathena-private/athena-thumbnails.c:
	(athena_thumbnail_load_framed_image):
	* libathena-private/athena-thumbnails.h:
	* src/file-manager/fm-directory-view.c:
	(add_script_to_script_menus), (add_submenu_to_script_menus):
	* src/file-manager/fm-list-model.c: (fm_list_model_get_value):
	* src/file-manager/fm-properties-window.c:
	(get_pixbuf_for_properties_window):
	* src/athena-sidebar-title.c: (update_icon), (update_emblems):
	Get rid of code that passes around the "optimize for AA" flag.
	
	* cut-n-paste-code/widgets/gimphwrapbox/gtkhwrapbox.c:
	* cut-n-paste-code/widgets/gimphwrapbox/gtkhwrapbox.h:
	* cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.c:
	* cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.h:
	Roll in the latest version from gimp source tree.
	
	* icons: Overwrite all the non-aa versions with the aa versions.
	Remove all the aa versions.

2002-01-21  Darin Adler  <darin@bentspoon.com>

	* check-signals.pl: Remove.
	* components/adapter/bonobo-stream-vfs.c: Remove.
	* components/adapter/bonobo-stream-vfs.h: Remove.
	* components/adapter/athena-adapter-progressive-load-strategy.c: Remove.
	* components/adapter/athena-adapter-progressive-load-strategy.h: Remove.

	* components/adapter/Makefile.am:
	* components/hardware/Makefile.am:
	* components/history/Makefile.am:
	* components/image-viewer/Makefile.am:
	* components/music/Makefile.am:
	* components/news/Makefile.am:
	* components/notes/Makefile.am:
	* components/text/Makefile.am:
	* components/throbber/Makefile.am:
	* components/tree/Makefile.am:
	* libathena-private/Makefile.am:
	* test/Makefile.am:
	General cleanups, mostly formatting.

	* configure.in: Remove libiconv stuff, since we don't use it
	any more. Do esound stuff in the main call to pkg-config, not
	a separate set of variables.

	* components/image-viewer/athena-image-view.c: Remove unused
	libart includes.

	* cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.h: Remove
	the use of "decrement" as a synonym for "remove".

	* test/test.c: Remove unused libart include.

2002-01-21  Anders Carlsson  <andersca@gnu.org>

	* configure.in:
	Change libprofiler location.
	
	* libathena-private/athena-directory-async.c:
	(lacks_link_info), (make_dot_directory_uri), (link_info_start):
	Remove support for gmc style links.
	
	* libathena-private/athena-entry.c:
	(emacs_shortcuts_preference_changed_callback),
	(athena_entry_init), (athena_entry_finalize),
	(athena_entry_key_press), (select_all_at_idle),
	(athena_entry_select_all_at_idle):
	Use gtk_idle_add instead and store the idle id in the details
	struct. This fixes some weirdness in the file properties dialog, 
	since the "destroy" signal can be emitted more than once.
	
	* libathena-private/athena-icon-canvas-item.c:
	(update_label_layouts):
	Enable underlining.
	
	* libathena-private/athena-monitor.c: (get_event_uri):
	Silently return if we can't find the base path. This is valid when
	we've called athena_monitor_cancel but still have some events 
	in the queue.
	
2002-01-18  Michael Meeks  <michael@ximian.com>

	* src/athena-window-toolbars.c
	(back_or_forward_toolbar_item_property_set_cb): upd to
	handle orientation too
	(create_back_or_forward_toolbar_item): add orientation prop.

2002-01-18  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-directory-metafile.c: 
	(athena_directory_unregister_metadata_monitor): Fix storage leak by
	unrefing the metafile monitor before dropping it on the floor.

	* libathena-private/athena-directory-metafile-monitor.h: Remove
	uneeded BonoboXObject stuff.

	* libathena-private/athena-directory.c:
	(athena_directory_finalize): Remove unneeded NULLing.

	* libathena-private/athena-directory-metafile-monitor.c: Whitespace tweak.

2002-01-18  Johan Dahlin  <jdahlin@telia.com>

	* components/history/athena-history-view.c: Port to GtkTreeView.

2002-01-18  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bump eel requirement to 1.1.2.

2002-01-18  Darin Adler  <darin@bentspoon.com>

	* Makefile.am: Remove athena-launch-icon.png.
	
	* components/hardware/athena-hardware-view.c: (setup_form_title),
	(setup_overview_form): Port from EelImage to GtkImage.
	
	* components/music/athena-music-view.c: Remove unused include.
	* src/athena-theme-selector.c: Remove unused includes.
	
	* libathena-private/athena-bonobo-extensions.c:
	(bonobo_activation_activation_callback): Add warning message so we
	get to see the error from bonobo-activation.
	
	* libathena-private/athena-directory-metafile.c: (get_factory):
	* libathena-private/athena-icon-factory.c: (get_icon_factory),
	(load_icon_for_scaling), (embed_text):
	* libathena-private/athena-metafile-factory.c:
	(athena_metafile_factory_get_instance):
	* libathena-private/athena-theme.c:
	(athena_theme_get_theme_data_from_theme):
	* libathena-private/athena-trash-monitor.c:
	(athena_trash_monitor_get):
	* libathena-private/athena-volume-monitor.c:
	(athena_volume_monitor_get):
	* src/file-manager/athena-indexing-info.c:
	(show_indexing_info_dialog):
	* src/athena-preferences-dialog.c:
	(global_preferences_get_dialog):
	* src/athena-window.c: (athena_window_class_init),
	(add_to_history_list):
	Use eel_debug_call_at_shutdown instead of g_atexit.
	
	* libathena-private/athena-file.c:
	(athena_file_get_display_name): Add G_BROKEN_FILENAMES support.
	
	* libathena-private/athena-global-preferences.c:
	(athena_global_preferences_init): Remove eel_smooth_widget code.
	
	* libathena/Makefile.am: Add missing ORBIT_IDL dependency.
	
	* libathena/athena-view-standard-main.c:
	(athena_view_standard_main_multi): Remove
	bonobo_ui_debug_shutdown for now. It does us no good unless we
	also do eel_debug_shut_down, but libathena can't depend on eel.
	
	* athena-launch-icon.png: Remove.
	
	* src/file-manager/fm-properties-window.c:
	(update_properties_window_icon),
	(fm_properties_window_drag_data_received),
	(create_image_widget_for_file): Port from EelImage to GtkImage.
	
	* src/athena-component-adapter-factory.c:
	(athena_component_adapter_factory_get): Use
	eel_debug_call_at_shutdown instead of g_atexit.
	(athena_component_adapter_factory_create_adapter): Look at
	exceptions before looking at return values from CORBA calls.
	
	* src/athena-main.c: (main): Add a call to eel_debug_shut_down.
	
	* src/athena-property-browser.c:
	(athena_property_browser_init), (element_clicked_callback),
	(athena_property_browser_update_contents): Port from EelViewport
	to GtkViewport.
	
	* src/athena-search-bar-criterion.c:
	(athena_search_bar_criterion_destroy),
	(athena_search_bar_criterion_new_from_values): Fix for change
	that made AthenaSignaller no longer a GtkObject.
	
	* src/athena-sidebar-title.c: (athena_sidebar_title_init),
	(update_icon), (add_emblem): Port from EelImage to GtkImage.
	
	* src/athena-signaller.h:
	* src/athena-signaller.c: (athena_signaller_get_current): Use
	eel_debug_call_at_shutdown instead of g_atexit.
	(athena_signaller_instance_init),
	(athena_signaller_class_init): Change to GObject, not GtkObject.
	
	* src/athena-window-menus.c: (get_bookmark_list): Use
	eel_debug_call_at_shutdown instead of g_atexit.
	(athena_window_initialize_go_menu): Fix for change that made
	AthenaSignaller no longer a GtkObject.
	
	* test/test-athena-preferences-change.c: Remove unused include.
	* test/test-athena-preferences-display.c: Remove unused includes.
	* test/test-athena-wrap-table.c: Remove unused includes.
	* test/test.c: Remove unused function.
	* test/test.h: Remove unused function.

2002-01-18  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-directory-background.c
	(image_loading_done_callback): don't set the background, it
	causes a strange segv later.

	* src/athena-window-toolbars.c
	(set_widget_for_bonobo_control): fold into
	(set_up_back_or_forward_toolbar_item): here.
	(set_up_standard_bonobo_button): kill redundant
	freeze / thaws.
	(set_up_special_bonobo_button): don't do nasty
	pixbuf roundtrips on a NULL icon_file_name
	(get_pixbuf_for_xml_node): kill - somewhat inefficient.
	(set_up_special_bonobo_button): set a straight pixbuf
	on the button item for more speed, and kill bogus
	in-proc freeze/thaw.
	(set_up_back_or_forward_toolbar_item): rename to
	(create_back_or_forward_toolbar_item): this to better
	reflect function, aggregate a property bag.
	(back_or_forward_tooblar_item_property_set_cb): impl.
2002-01-18  Ian McKellar  <yakk@yakk.net>

	* configure.in:
	Get esd's CFLAGS and LIBS from pkg-config

2002-01-17  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_update_bounds),
	(draw_or_measure_label_text), (update_label_layouts),
	(get_label_layout), (draw_label_layout), (draw_label_layout_aa),
	(draw_or_measure_label_text_aa), (athena_icon_canvas_item_event):
	Add non-aa pango support.
	
	* libathena-private/athena-directory-async.c (make_dot_directory_uri): 
	Do an sync check for the .directory file before scheduling an async read 
	of the file.

	* libathena-private/athena-link-desktop-file.c 
	(athena_link_desktop_file_get_link_uri_from_desktop): 
	Free the type string.

	* src/athena-view-frame.c (athena_view_frame_selection_changed): 
	Call CORBA_free on uri_list.
	(send_history): Call CORBA_free on history.

	* src/athena-bookmark-parsing.c (athena_bookmark_new_from_node): 
	free icon_mime_type.

	* src/file-manager/fm-icon-view.c (update_layout_menus): free path.

	* src/file-manager/Makefile.am: Add fm-list-model.[ch]

	* src/file-manager/fm-list-model.c: New file.

	* src/file-manager/fm-list-model.h: New file.

	* src/file-manager/fm-list-view.c: Port to GtkTreeView.

	* src/file-manager/fm-list-view.h: Port to GtkTreeView.

	* src/file-manager/fm-directory-view.c (fm_directory_view_destroy):
	Stop and clear the directory view before setting view to NULL because
	clearing the directory when athena_view is NULL can trigger an assertion.
	
2002-01-17  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-mime-actions.c: Added include
	needed for compatibility with new gnome-vfs.

	* src/file-manager/fm-directory-view.c:
	(set_up_scripts_directory_global): Fix mistake with use of
	GNOME_DOT_GNOME by using gnome_util_home_file instead.

2002-01-16  Darin Adler  <darin@bentspoon.com>

	* components/hardware/main.c: (main):
	* components/image-viewer/athena-image-view.c:
	(init_server_factory):
	* components/loser/content/main.c: (main):
	* components/loser/sidebar/main.c: (main):
	* components/throbber/main.c: (main):
	* libathena/athena-view-standard-main.c:
	(athena_view_standard_main_multi),
	(athena_view_create_from_get_type_function):
	* src/athena-main.c: (main):
	Remove unneeded code and restore display-specific registration.
	This gets rid of a bunch of GNOME2_CONVERSION_COMPLETE ifdefs.

	* libathena-private/athena-directory-metafile-monitor.h:
	* libathena-private/athena-metafile-factory.c:
	* libathena-private/athena-metafile-factory.h:
	* libathena-private/athena-metafile.h:
	These had emacs mode lines that said they were IDL files.

	* libathena-private/athena-directory-metafile-monitor.c:
	* libathena-private/athena-metafile-factory.c:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-undo-context.c:
	* libathena-private/athena-undo-manager.c:
	* libathena/athena-undo-transaction.c:
	* src/athena-application.c:
	* src/athena-shell.c:
	* src/athena-view-frame-corba.c:
	Use BONOBO_CLASS_BOILERPLATE_FULL instead of EEL_BONOBO_BOILERPLATE_FULL.

	* src/athena-sidebar-title.c: (measure_width_callback),
	(update_more_info): First cut at implementing date that fits into
	sidebar. Not working yet.

	* src/athena-theme-selector.c:
	(install_theme_button_clicked_callback):
	Remove eel_gtk_window_set_up_close_accelerator call, since this is a
	GtkDialog that comes its own close accelerator.

=== athena 1.1.2 ===

2002-01-16  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bump version to 1.1.2
	* NEWS: Update news a tiny bit.

	* components/loser/content/Athena_View_content-loser.oaf.in: Remove.
	* components/loser/sidebar/Athena_View_sidebar-loser.oaf.in: Remove.

2002-01-15  Johan Dahlin  <jdahlin@telia.com>

        * libathena/Makefile.am (athena_view_component_idl_stamp):  
        * libathena/athena-view-component.idl: define
        __athena_view_component_COMPILATION instead of 
        ATHENA_VIEW_COMPONENT_COMPILATION, to be compatible with
        libbonobo and bonobo-activation's idls.

=== athena 1.1.1 ===

2002-01-15  Darin Adler  <darin@bentspoon.com>

	* components/text/Makefile.am: Re-add ui_DATA to EXTRA_DIST.
	I removed it by accident.

2002-01-15  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bump required eel version number. Get rid of
	ORBIT_REQUIRED.

	* libathena/Makefile.am: Remove unneeded "-I$(builddir)" since
	it is screwing up "make distcheck".

2002-01-15  Darin Adler  <darin@bentspoon.com>

	* src/Makefile.am:
	* src/athena-profiler.c:
	Do an ifdef in the profiler code rather than in the makefile.

2002-01-15  Darin Adler  <darin@bentspoon.com>

	* NEWS: Prepare for 1.1.1 release.
	* TODO: A few things got done.

2002-01-15  Darin Adler  <darin@bentspoon.com>

	* src/athena-desktop-window.c: (finalize),
	(athena_desktop_window_class_init):
	Fix another of those double-destroy problems by turning a destroy
	into a finalize.

2002-01-15  Darin Adler  <darin@bentspoon.com>

	Inspired by a patch from Jacob Berkman <jacob@ximian.com>, got
	rid of all the Makefile.am hackery so that everything ends up in
	the tarball.

	* configure.in: Bumped version to 1.1.1.

	* components/Makefile.am: Re-enabled all the subdirs.
	
	* components/adapter/Makefile.am: Re-enabled
	athena-adapter-embeddable-embed-strategy.[ch].
	
	* components/adapter/athena-adapter-embeddable-embed-strategy.c:
	Put an #if GNOME2_CONVERSION_COMPLETE around the whole thing.
	
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	Update for COMPONENT_CFLAGS in ATHENA_PRIVATE_CFLAGS.
	
	* components/loser/content/main.c: (loser_make_object), (main):
	* components/loser/sidebar/main.c: (loser_make_object), (main):
	* components/loser/content/athena-content-loser.c:
	(athena_content_loser_init):
	* components/loser/sidebar/athena-sidebar-loser.c:
	(athena_sidebar_loser_init):
	Make these compile, not sure if they actually work.

	* components/shell/Athena_View_shell.server.in: Remove.
	* components/shell/shell.c: Remove.
	This component can go in a separate package -- it doesn't need to be
	part of the main Athena source tree.
	
	* components/text/Makefile.am: Turned off compiling of the component,
	but used EXTRA_DIST to make sure the source code still gets into the
	tarball.
	
	* components/tree/Makefile.am: Removed $(COMPONENT_LIBS) from the
	libathena_tree_view_la_SOURCES list. Not sure why it was in there.
	
	* libathena-private/Makefile.am: Remove stale references to the
	athena-druid-related headers.
	
	* libathena/athena-view-standard-main.c:
	(athena_view_standard_main_multi): Remove some
	GNOME2_CONVERSION_COMPLETE code that is now clearly not going to
	be needed. Left in the stuff that is a placeholder for things we
	still need.
	
	* src/Makefile.am: Distribute the profiler sources even when they are
	not built.

	* libathena-private/athena-icon-container.c: Whitespace tweak.

2002-01-15  Johan Dahlin  <jdahlin@telia.com>

	* src/athena-bookmarks-window.c: Port to GtkTreeView.

2002-01-09  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-file.c: (make_valid_utf8),
	(athena_file_get_display_name), (athena_file_get_name): First
	cut at ensuring file names are always valid UTF-8. We probably
	need other checks like this for various other places we read in
	external stuff. Also, we might later decide to cache the "made
	valid" name. Finally, we might want to support the glib
	G_BROKEN_FILENAMES feature.

2002-01-09  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (fm_directory_view_finalize),
	(fm_directory_view_class_init):
	* src/file-manager/fm-icon-view.c: (fm_icon_view_finalize),
	(fm_icon_view_class_init):
	* src/file-manager/fm-list-view.c: (fm_list_view_class_init),
	(fm_list_view_finalize):
	Some destroy/finalize fixes.

2002-01-08  Darin Adler  <darin@bentspoon.com>

	* Makefile.am: Remove a stray reference to athena-help.desktop.

2002-01-08  Darin Adler  <darin@bentspoon.com>

	* TODO: Mention bad looking text.

	* libathena-private/athena-icon-container.c: (destroy),
	(finalize), (athena_icon_container_init), (item_event_callback),
	(athena_icon_container_clear):
	Various fixes to make destroy on a AthenaIconContainer work.

	* components/tree/athena-tree-view-dnd.c:
	(athena_tree_view_drag_motion), (athena_tree_view_drag_drop),
	(athena_tree_view_button_press),
	(athena_tree_view_button_release),
	(athena_tree_view_motion_notify):
	* libathena-private/athena-undo-signal-handlers.c:
	(editable_key_press_event):
	* src/athena-bookmarks-window.c: (handle_close_accelerator):
	Remove unneeded stop_emit-type calls, now that the signal machinery
	understands that TRUE means to stop emitting in some cases.

2002-01-08  Darin Adler  <darin@bentspoon.com>

	* .cvsignore:
	* Makefile.am:
	* athena-help.desktop.in: Remove.
	Remove athena-help.desktop since Athena isn't the help browser
	any more.
	
	* components/adapter/athena-adapter-load-strategy.c:
	(athena_adapter_load_strategy_class_init):
	* components/news/athena-news.c: (set_up_main_widgets):
	* libathena-private/athena-bookmark.c:
	(athena_bookmark_class_init):
	* libathena-private/athena-volume-monitor.c:
	(athena_volume_monitor_class_init):
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_destroy),
	(fm_desktop_icon_view_handle_middle_click), (delayed_init),
	(fm_desktop_icon_view_init), (desktop_icons_compare_callback):
	* src/athena-sidebar.c: (athena_sidebar_finalize),
	(athena_sidebar_update_buttons), (athena_sidebar_set_uri):
	Use more g_signal, less gtk_signal stuff.
	
	* components/hardware/athena-hardware-view.c: (setup_form_title),
	(setup_overview_form), (setup_CPU_form), (setup_RAM_form),
	(setup_IDE_form):
	* components/news/athena-news.c: (set_up_main_widgets):
	* src/file-manager/athena-indexing-info.c:
	(update_progress_display), (last_index_time_dialog_new),
	(index_progress_dialog_new):
	* src/athena-property-browser.c:
	(athena_property_browser_init), (element_clicked_callback),
	(labeled_image_new), (make_properties_from_directories),
	(add_reset_property), (make_properties_from_xml_node):
	* src/athena-sidebar-title.c: (athena_sidebar_title_init),
	(athena_sidebar_title_select_text_color), (update_title_font),
	(update_title), (update_more_info),
	(sidebar_title_create_title_label),
	(sidebar_title_create_more_info_label):
	Port more code from EelLabel to GtkLabel. Also change all code that
	was using things like "make_larger" to use "set_scale" now.
	
	* components/music/athena-music-view.c: (xpm_label_box),
	(xpm_dual_label_box), (athena_music_view_set_album_image):
	* libathena-private/athena-bookmark.c:
	(create_image_widget_for_bookmark),
	(athena_bookmark_menu_item_new):
	* src/athena-complex-search-bar.c:
	(load_find_them_pixmap_widget):
	Port more code from GtkPixmap to GtkImage.
	
	* components/notes/athena-notes.c:
	* components/throbber/athena-throbber.c:
	* src/file-manager/fm-properties-window.c:
	* src/athena-zoom-control.c:
	Remove extra includes.
	
	* libathena-private/athena-icon-factory.c:
	* libathena-private/athena-icon-factory.h:
	Remove athena_icon_factory_get_pixmap_and_mask_for_file.
	
	* src/athena-about.c: (draw_aa_string), (draw_author_list),
	(athena_about_draw_info): Port to use Pango to draw the text. It
	looks really bad right now, but should be straightforward to fix.
	
2002-01-08  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-bonobo-extensions.c (activation_handle_free): 
	New function to free a handle and it's associated object.
	(activation_idle_callback): Call activation_handle_free.
	(activation_cancel): Likewise.

	* libathena-private/athena-icon-container.c:
	(athena_icon_container_update_icon):
	* libathena/athena-view-component.idl:
	* libathena/athena-view.c: (call_close_window),
	(athena_view_close_window):
	* libathena/athena-view.h:
	* src/athena-profiler.c:
	(athena_profiler_bonobo_ui_report_callback):
	* src/athena-view-frame-corba.c: (close_window),
	(impl_Athena_ViewFrame_close_window),
	(athena_view_frame_corba_part_class_init):
	* src/athena-view-frame-private.h:
	* src/athena-view-frame.c: (athena_view_frame_close_window),
	(athena_view_frame_class_init):
	* src/athena-view-frame.h:
	* src/athena-window-manage-views.c: (close_window_callback):
	Implement athena_view_close_window ().
	
2002-01-08  Anders Carlsson  <andersca@gnu.org>
 
	* src/athena-zoom-control.c (athena_zoom_control_finalize): Remove
	preferences calback in ::finalize.
	(athena_zoom_control_unload_images): Set image pointers to NULL after
	unloading images.

	* src/athena-window-menus.c: Remove some userlevel #defines.

	* src/athena-switchable-search-bar.c 
	(athena_switchable_search_bar_finalize): Remove the preferences callback
	in ::finalize instead of ::destroy.
 
	* src/athena-switchable-navigation-bar.c: Create the search bar lazily.
	Creating the search bar came up high on the profile when creating new windows,
	and doing it lazily helps, especially when we don't have medusa support yet.
	(athena_switchable_navigation_bar_finalize): Free details in ::finalize.

	* src/athena-simple-search-bar.c (athena_simple_search_bar_finalize):
	Free details in ::finalize.
	(athena_simple_search_bar_destroy): Disable the undo stuff. Perhaps we could
	call connect to "destroy" in athena_undo_set_up_athena_entry_for_undo
	and call athena_undo_tear_down_athena_entry_for_undo there instead.

	* src/athena-sidebar.c (athena_sidebar_init): Ref and sink the title tab.
	(athena_sidebar_finalize): Move things from ::finalize to ::destroy.

	* src/athena-preferences-dialog.c 
	(preferences_dialog_populate_themes_group): The image chooser isn't
	broken anymore so we can enable it now.

	* src/athena-main.c (main): Call gtk_main instead of bonobo_main
	since bonobo_main is for non-gui apps and won't be affected by 
	gtk_main_quit.

	* src/athena-location-bar.c: Destroy things in ::finalize
	instead of in ::destroy.

	* src/athena-profiler.c: Port to GtkTextView.

	* src/athena-application.c (athena_application_new): 
	Call bonobo_generic_factory_construct_noreg so that we set
	the IID.
	(athena_application_destroy): Unref the undo manager
	in ::destroy instead.

	* libathena-private/athena-icon-container.c: 
	Use g_list_sort_with_data when sorting icons so we can get rid
	of the hack_icon_container hack.

	* libathena-private/athena-entry.c: Free details struct
	in ::finalize instead of in ::destroy

	* libathena-private/athena-icon-dnd.c 
	(confirm_switch_to_manual_layout): Compare with GTK_RESPONSE_YES.

	* libathena-private/athena-file-operations.c 
	(confirm_empty_trash): Compare with GTK_RESPONSE_YES.

2002-01-07  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-desktop-file-loader.c:
	(validated_strdup): Fixed to use g_iconv instead of iconv,
	starting with a patch from Jean Schurger <jschurger@schurger.org>.

	* libathena-private/athena-font-factory.c: Remove.
	* libathena-private/athena-font-factory.h: Remove.
	* libathena-private/Makefile.am:
	Remove athena-font-factory.[ch].

	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_finalize),
	(athena_icon_canvas_item_set_arg),
	(athena_icon_canvas_item_get_arg), (draw_or_measure_label_text),
	(athena_icon_canvas_item_class_init):
	Get rid of the "font" arg. We'll have to replace this with something
	that works with Pango -- maybe just a font name.

	* src/file-manager/fm-list-view.c: (truncate_middle_callback),
	(get_cell_text): Turn off the GdkFont ellipsizing code. I hope this
	just goes away when Anders finishes his port to GtkTextView.

	* src/file-manager/fm-properties-window.c:
	(fm_properties_window_class_init), (real_destroy), (real_finalize):
	Fix a bug where it would try to disconnect a signal on an object
	that is already NULL by that time.

	* src/athena-profiler.c:
	(athena_profiler_bonobo_ui_report_callback): Disable the dump
	window, pending a port to GtkTextView instead of GtkText.

	* components/music/athena-music-view.c:
	* components/news/athena-news.c:
	* components/notes/athena-notes.c:
	* components/text/athena-text-view.c:
	* libathena-private/athena-file-operations-progress.c:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-icon-container.c:
	* src/file-manager/fm-icon-view.c:
	* src/athena-sidebar-title.c:
	Get rid of some includes of unused headers.

2002-01-07  Darin Adler  <darin@bentspoon.com>

	Integrate patches from Frank Worsley <fworlsey@shaw.ca>.

	* libathena-private/athena-link.c:
	(get_link_style_for_mime_type): Fix porting mistake that caused all
	desktop files to be treated as Athena links.

	* libathena-private/athena-file.c: (rename_callback):
	Fix storage leak.

2002-01-07  Dave Camp  <dave@ximian.com>

	* src/athena-theme-selector.c (theme_selector_finalize): Put
	back the accidentally removed g_free (theme_selector)->details.

2002-01-07  Dave Camp  <dave@ximian.com>

	* src/athena-preferences-dialog.c
	(preferences_dialog_populate_themes_group): Take out the return.
	The EelLabel exorcism did in fact mostly fix the theme selector.

	* src/athena-theme-selector.c (theme_selector_finalize): Moved here
	from theme_selector_destroy.
	(athena_theme_selector_class_init): Fixed the argument type list for
	the theme_changed signal, and reflect the destroy->finalize change.

2002-01-05  Michael Meeks  <michael@ximian.com>

	* configure.in (IMLIB_REQUIRED, GDK_PIXBUF_REQUIRED),
	(POPT_REQUIRED, GCONF_REQUIRED): prune

2002-01-04  Havoc Pennington  <hp@pobox.com>

	* libathena-private/athena-global-preferences.c
	(athena_global_preferences_init): add preload of the gconf
	cache, to hopefully avoid a zillion round trips to gconfd on
	startup.

	* test/test.c (test_window_new): remove weird gtk_window_set_policy

	* test/test-athena-preferences-display.c: remove user level
	stuff

	* test/test-athena-preferences-change.c: remove user level stuff

	* libathena-private/athena-global-preferences.c: the default 
	click policy was SPEED_TRADEOFF_LOCAL_ONLY, fix

	* libathena-private/athena.schemas: add schemas file, 
	incomplete, needs to be finished and installed

	* libathena-private/athena-global-preferences.c: strip out
	user levels

	* src/athena-shell-ui.xml: strip out user level menu

	* src/athena-window-menus.c: strip out user level menu

2002-01-04  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-icon-container.c:
	(rubberband_timeout_callback): Fix rubberband selection when
	the icon view is scrolled by using the bin_window.
	
	* src/athena-sidebar.c: (athena_sidebar_destroy):
	Fix one of those "double-destroy" problems.

	* TODO: Formatting tweak.
	* configure.in: Formatting tweak.
	
2002-01-04  Dave Camp  <dave@ximian.com>

	* components/adapter/athena-zoomable-proxy.c
	(athena_zoomable_prozy_init_epv): Renamed from
	athena_get_modified_bonobo_zoomable_epv and changed to
	initialize a passed in epv rather than allocating a new one.
	(athena_zoomable_proxy_destroy): 
	(athena_zoomable_proxy_finalize): 
	(athena_zoomable_proxy_class_init): 
	(athena_zoomable_proxy_get): 
	(athena_zoomable_proxy_get_type): Derive from BonoboObject rather
	than BonoboZoomable, as this object fully implements the Zoomable
	interface. 

	* components/adapter/athena-adapter.c (athena_adapter_new): 
	Replaced gtk_signal_connect_object with g_signal_connect_swapped,
	cast callbacks to G_CALLBACK, and use a weak reference rather than
	a "destroy" handler.
	(athena_adapter_activate_callback): Pass NULL as the opt_ev
	parameter to bonobo_control_get_remote_ui_container().

	* components/adapter/athena-adapter-stream-load-strategy.c
	(athena_adapter_stream_load_strategy_load_location): The
	bonobo-stream-vfs code was moved to the VFS moniker in gnome-vfs,
	so use it here.

	* components/adapter/athena-adapter-load-strategy.c
	(athena_adapter_load_strategy_class_init): replaced
	eel_marshal_VOID__DOUBLE with g_cclosure_marshal_VOID__DOUBLE.
	(athena_adapter_load_strategy_get): Disabled the progressive
	data sink code using GNOME2_CONVERSION_COMPLETE.

	* components/adapter/athena-adapter-factory-server.c (athena_adapter_factory_server_class_init): 
	(athena_adapter_factory_server_init):
	(athena_adapter_factory_server_finalize):
	(adapter_object_destroyed):
	(impl_Athena_ComponentAdapterFactory_create_adapter):
	(athena_adapter_factory_server_get_type): Changed to the new
	style of deriving from BonoboObject.
	(impl_Athena_ComponentAdapterFactory_create_adapter): Use a weak
	reference to the adapter view rather than connecting to "destroy".
	
	* components/adapter/athena-adapter-embed-strategy.c (athena_adapter_embed_strategy_class_init): Fixed the argument type lists for the
	activate and open_location signals.
	(athena_adapter_embed_strategy_get): Disable use of the embeddable
	embed strategy using GNOME2_CONVERSION_COMPLETE.

	* components/adapter/athena-adapter-control-embed-strategy.c
	(athena_adapter_control_embed_strategy_new): Pass NULL for the
	opt_ev parameter of bonobo_control_frame_bind_to_control().

	* components/adapter/main.c (main): Replaced initialization
	functions with bonobo_ui_init, and put an #ifdef
	GNOME2_CONVERSION_COMPLETE around
	gnome_client_disable_master_connect().
	(adapter_factory_make_object): Use a weak reference rather than a
	destroy signal handler.
	(adapter_factory_object_weak_notify): Moved here from
	adapter_factory_object_destroy, use bonobo_main_quit() rather than
	gtk_main_quit().

	* components/adapter/Makefile.am: Removed
	athena-adapter-progressive-load-strategy.[ch], and moved
	athena-adapter-embeddable-embed-strategy.[ch] out of the build,
	removed bonobo-stream-vfs.[ch] replaced
	ATHENA_PRIVATE_CFLAGS/LIBS with COMPONENT_CFLAGS/LIBS.

	* src/athena-component-adapter-factory.c: Removed
	no-longer-necessary #if GNOME2_CONVERSION_COMPLETE lines.
	(activate_factory): Replaced BonoboObjectClient code with a call to
	bonobo_get_object().

2002-01-04  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* configure.in: Add esound cflags to CORE_CFLAGS,
	Call GNOME_COMMON_INIT to correctly initialize
	AC_LOCAL flags

2002-01-04  Anders Carlsson  <andersca@gnu.org>

	* libathena-private/athena-program-choosing.c: 
	Update to matched changed return value from
	athena_program_chooser_new ().
	
	* libathena-private/athena-program-chooser.h: 
	* libathena-private/athena-program-chooser.c: 
	Port to GtkTreeView, and make AthenaProgramChooser
	into a real object.

	* components/Makefile.am: Re-enable the music
	view.

	* components/music/athena-music-view.c: Port to 
	GtkTreeView and GNOME2.

2002-01-03  Andy Hertzfeld  <andy@differnet.com>
	
	reviewed by: <darin@bentspoon.com>

	* src/file-manager/fm-icon-view.c: (play_file), (preview_audio),
	made remote sound previewing work by using gnome-vfs to read from
	the remote source and feeding the data to the sound player via popen.
	
	* (should_preview_sound):
	removed code that disabled remote sound previewing even if the
	preference was set

2002-01-03  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-global-preferences.c:
	(athena_global_preferences_init):
	Remove some smooth-font related stuff to get rid of the
	dependency on EelFontManager.

	* TODO: Quick update.

2002-01-03  Darin Adler  <darin@bentspoon.com>

	* test/test.c: (test_text_caption_get_text_as_int):
	Don't use the eel_eat function.

2002-01-03  Darin Adler  <darin@bentspoon.com>

	* Makefile.am: Turn on test subdirectory.
	* test/test.c: (test_init), (test_label_new):
	* test/test.h:
	Build without using EelLabel.

	* src/athena-sidebar-title.c: Remove unused header include.

2002-01-03  Darin Adler  <darin@bentspoon.com>

	* TODO: Updated.

	* libathena-private/athena-icon-canvas-item.c:
	(create_label_layout): Use eel_pango_layout_set_underline.

	* components/music/athena-music-view.c:
	Don't include EelList.

2002-01-03  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-icon-container.c:
	(start_rubberbanding):
	Use GnomeCanvasRect instead of EelCanvasRect. We can redo the
	EelCanvasRect optimization if we want to, but it should really
	be put into libgnomecanvas.
	
	* components/music/common.c:
	* components/music/athena-music-view.c:
	* libathena-private/athena-customization-data.c:
	* libathena-private/athena-desktop-file-loader.c:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory.c:
	* libathena-private/athena-file.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/athena-property-browser.c:
	* src/athena-sidebar-title.c:
	* src/athena-window.c:
	Remove lots of unneeded includes, including all cases of
	including the locale-sensitive <ctype.h>.

2002-01-03  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-global-preferences.c:
	(athena_global_preferences_init):
	* libathena-private/athena-sidebar-functions.c:
	(sidebar_panel_make_preference_key):
	* libathena-private/athena-sidebar-functions.h:
	Remove some help sidebar panel remnants.

2002-01-03  Michael Meeks  <michael@ximian.com>

	* components/image-viewer/io-png.c
	(image_save): disable png stuff.

2001-01-03  Michael Meeks  <michael@ximian.com>

	* configure.in: bump requirements on bonobo to get
	something that works well.

2002-01-03  John Fleck <jfleck@inkstain.net>

	* help/athena-quick-reference/C/index.html
	removing duplicate width tags, fixing
	http://bugzilla.gnome.org/show_bug.cgi?id=47433

2002-01-02  Darin Adler  <darin@bentspoon.com>

	* configure.in:
	Explicitly depend on librsvg instead of getting it through eel.

2002-01-03  Anders Carlsson  <andersca@gnu.org>

	* src/athena-component-adapter-factory.c: Fix warnings by
	putting #ifdef GNOME2_CONVERSION_COMPLETE around unused functions
	and variables.

2002-01-02  Darin Adler  <darin@bentspoon.com>

	* components/hardware/athena-hardware-view.c:
	(update_uptime_text), (setup_overview_form):
	* components/music/athena-music-view.c:
	* src/file-manager/athena-indexing-info.c:
	(update_progress_display):
	* src/athena-property-browser.c:
	(athena_property_browser_init), (labeled_image_configure),
	(labeled_image_new), (make_category),
	(property_browser_category_button_new),
	(athena_property_browser_update_contents):
	* test/test.h:
	* src/athena-shell.c:
	* src/athena-sidebar-title.c: (athena_sidebar_title_init):
	Port from EelLabel to GtkLabel.
	
	* components/news/athena-news.c: (do_destroy),
	(draw_rss_logo_image), (draw_rss_title), (draw_rss_items),
	(athena_news_set_title), (free_channel),
	(empty_message_size_allocate), (set_up_main_widgets),
	(make_news_view):
	* libathena-private/athena-icon-private.h:
	* src/athena-sidebar-tabs.c:
	(athena_sidebar_tabs_load_theme_data),
	(athena_sidebar_tabs_init), (athena_sidebar_tabs_destroy),
	(draw_one_tab_plain), (draw_one_tab_themed), (get_tab_width),
	(athena_sidebar_tabs_add_view):
	Port to Pango text instead of Eel text.
	
	* libathena-private/athena-customization-data.c:
	(add_reset_text):
	* libathena-private/athena-icon-factory.c:
	(embedded_text_font_changed_callback), (embed_text):
	* src/athena-about.c: (draw_aa_string), (draw_author_list),
	(athena_about_draw_info), (athena_about_update_authors):
	Disable Eel text and ifdef with GNOME2_CONVERSION_COMPLETE.
	
	* libathena-private/athena-global-preferences.h:
	* libathena-private/athena-global-preferences.c:
	Turn off font-related preferences. Maybe delete later or
	convert for Pango fonts.
	
	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-icon-container.h:
	Remove eel-scalable-font.h includes.
	
	* src/athena-component-adapter-factory.c:
	(athena_component_adapter_factory_create_adapter):
	Disable the adapter because it was causing problems.
	
2002-01-02  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* libathena-private/athena-directory-background.c:
	(initialize_background_from_settings): Remove flash when
 	Athena desktop is started with a pixmap background
	
	* src/athena-desktop-window.c: (map): Remove unneeded variable

2001-12-18  Michael Meeks  <michael@ximian.com>

	* components/hardware/athena-hardware-view.c
	(setup_overview_form): fix strcmp style for Darin.

	* components/music/fileinfo.c (find_genre_id),
	(file_info_http): ditto.

	* libathena-private/athena-customization-data.c
	(athena_customization_data_get_next_element_for_display),
	(athena_customization_data_new): ditto.

	* src/athena-property-browser.c
	(athena_property_browser_drag_data_get),
	(make_category_link, make_drag_image): ditto.

	* libathena-private/athena-volume-monitor.c
	(option_list_has_option): ditto.

2001-12-17  Michael Meeks  <michael@ximian.com>

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_init): set mask.

	* src/athena-view-frame.c
	(create_corba_objects): set ambient property bag.
	(create_ambient_properties),
	(athena_view_frame_get_prop): impl.
	(athena_view_frame_title_changed),
	(athena_view_frame_selection_changed),
	(send_history): re-implement to fire event instead.

	* components/history/athena-history-view.c
	(athena_history_view_instance_init): set mask.
	(history_changed_callback, update_history): constify.

	* libathena/athena-view.c
	(impl_Athena_View_title_changed),
	(impl_Athena_View_history_changed): kill.
	(impl_Athena_View_selection_changed): kill.
	(athena_view_construct_from_bonobo_control):
	connect to set_frame.
	(athena_view_set_frame_callback): impl.
	(athena_view_dispose): impl. to unset the frame
	(athena_view_class_init): upd signals, epv & hook
	dispose.
	(athena_view_frame_property_changed_callback): impl.
	(athena_view_get_ambient_properties): impl.
	(athena_view_set_listener_mask): impl.

	* libathena/athena-view-component.idl: remove
	title_changed and history_changed - use a propert
	and the more flexible listener interface.

2001-12-17  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-icon-canvas-item.h:
	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_init),
	(athena_icon_canvas_item_finalize),
	(athena_icon_canvas_item_invalidate_label_size),
	(athena_icon_canvas_item_set_arg),
	(athena_icon_canvas_item_get_arg), (draw_or_measure_label_text),
	(measure_label_text), (create_label_layout), (get_label_layout),
	(draw_label_layout), (draw_or_measure_label_text_aa),
	(draw_label_text_aa), (athena_icon_canvas_item_class_init):
	Do text drawing with Pango for the anti-aliased case. Remove all
	use of the non-Pango Eel anti-aliased text drawing code.
	
	* libathena-private/athena-icon-container.h:
	* libathena-private/athena-icon-container.c: (finalize),
	(athena_icon_container_init),
	(athena_icon_container_update_icon),
	(athena_icon_container_set_label_font_for_zoom_level):
	* src/file-manager/fm-icon-view.c: (create_icon_container),
	(fm_icon_view_init):
	Remove the smooth-font stuff. We're going to use a single font
	once we change everything to use Pango.
	
	* icons/Makefile.am: Remove help-system icons.
	* icons/hyperbola-*: Remove help-system icons.
	
2001-12-14  Seth Nickell  <snickell@stanford.edu>

        The programs:/ URI is now applications:/ to conform with the
	HIG and GDP word list.

	* data/Makefile.am:
	* data/applications.desktop.in:
	* data/programs.desktop.in:

	Move programs.desktop.in to applications.desktop.in and change
	the URI and Name in the desktop entry.
	
2001-12-14  Seth Nickell  <snickell@stanford.edu>

	* Makefile.am:

	Install athena and help .desktop files into the proper 
	location for GNOME2 menu entries ($datadir/applications).

2001-12-13  Darin Adler  <darin@bentspoon.com>

	* components/Makefile.am:
	* components/help/*:
	* athena.spec.in:
	Deleted help component as it is not slated to be part of Gnome 2.

	* RENAMING: No need to rename hyperbola if it's gone.

	* configure.in: Removed ScrollKeeper check. Took a cut at making
	the medusa check use pkg-config, it's probably messed up but at
	least we won't define HAVE_MEDUSA if we see the Gnome 1 medusa.

	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_init),
	(athena_icon_canvas_item_finalize),
	(athena_icon_canvas_item_set_arg),
	(athena_icon_canvas_item_get_arg),
	(draw_or_measure_label_text_aa), (draw_label_text_aa),
	(athena_icon_canvas_item_class_init):
	Quick cut at porting to Pango from Eel font code. It's all under
	ifdef USE_EEL_TEXT because it's not working well yet. At the moment
	the text looks bad, and it's very slow, and it's not centered.

	* libathena-private/athena-icon-factory.c: (embed_text):
	Baby steps at doing the port to Pango here too.

        * src/file-manager/fm-directory-view.c: (real_update_menus):
        Add a check for NULL that seems required. This change was
        suggested by the backtrace in bug 66809, but it's not clear
        if this really fixes anything. (Rolled from stable branch.)

	* src/file-manager/fm-icon-view.c: (icon_view_handle_uri_list):
	Fix code that passed a path instead of a URI when creating a
        desktop file. (Rolled from stable branch.)

	* TODO: Minor updates.

2001-12-12  Michael Meeks  <michael@ximian.com>

	* src/file-manager/fm-icon-view.c
	(fm_icon_view_merge_menus): fix container ref leak.

	* src/file-manager/fm-search-list-view.c
	(real_merge_menus): ditto.

	* src/file-manager/fm-desktop-icon-view.c
	(fm_desktop_icon_view_destroy): more guards.
	(real_merge_menus): fix container ref leak.

2001-12-12  Michael Meeks  <michael@ximian.com>

	* src/athena-window.c (athena_window_destroy):
	protect vs. double destroy.

	* src/athena-window-manage-views.c (disconnect_view):
	start macro definitions on the first line.

	* src/athena-sidebar.c (athena_sidebar_destroy):
	protect vs. double destroy.

	* src/athena-sidebar-tabs.c
	(athena_sidebar_tabs_destroy): protect vs. double destroy
	and theoretical re-enterancy hazard.

	* src/athena-sidebar-title.c
	(athena_sidebar_title_destroy): protect vs. double
	destroys.

	* src/athena-application.c (create_object): re-enable
	list view.

	* src/file-manager/fm-list-view.c: re-enable.

2001-12-11  Laszlo Peter  <laca@ireland.sun.com>

	* libathena-private/athena-authn-manager.c:
	s/__FUNCTION__/G_GNUC_FUNCTION/

	* libathena-private/athena-directory-background.c: get rid of
	_gdk_display_name

	* libathena-private/athena-volume-monitor.c
	(athena_volume_get_device_type): remove "const" to match the
	prototype.

2001-12-09  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-file-operations.c:
	(handle_transfer_ok): Do fix based on patch from Martin Wehner
	<mwehner@tfh-berlin.de> to prevent cancel of emptying trash or
	deleting from core dumping.
	
	* Makefile.am:
	* configure.in:
	* docs/.cvsignore:
	* docs/Makefile.am:
	Add files in the docs directory to tarball.
	
	* libathena/athena-view-standard-main.c:
	(athena_view_standard_main_multi): Whitespace tweak.

2001-12-08  Anders Carlsson  <andersca@gnu.org>

	* components/throbber/athena-throbber.c:
	(athena_throbber_instance_init):
	* src/athena-window.c: (athena_window_allow_stop):
	Update for new bonobo property bag API.
	
2001-12-08  Michael Meeks  <michael@ximian.com>

	* components/tree/athena-tree-view.c
	(athena_tree_view_init): unroll control creation,
	connect to "activate" signal handler not map / unmap
	on no-window widget GtkScrolledWindow.
	(tree_map_callback, tree_unmap_callback): kill.
	(tree_activate_callback): impl.

	* components/tree/libmain.c
	(BonoboActivation_Plugin_info) ->
	(Bonobo_Plugin_info).

	* components/tree/Makefile.am: setup ldflags
	correctly, and a LIBADD so we can activate it
	independantly.

	* components/throbber/main.c (main): fix for
	bonobo-activation-server race condition.

	* libathena-private/athena-marshal.list:
	add VOID:STRING,STRING

2001-12-06  Michael Meeks  <michael@ximian.com>

	* libathena/athena-view-standard-main.c
	(athena_view_standard_main_multi): if we were
	already registered - due to a beautifuly inefficient
	activation server race - just quit.

2001-12-07  Darin Adler  <darin@bentspoon.com>

	* docs/design.txt:
	* docs/gnomad-notes.txt:
	* docs/metaitems.txt:
	* docs/athena.faq:
	* docs/use-cases.txt:
	Tweak some documents, removing obsolete ones.

2001-12-06  Darin Adler  <darin@bentspoon.com>

	* components/Makefile.am:
	* components/mozilla/.cvsignore:
	* components/mozilla/Makefile.am:
	* components/mozilla/Athena_View_mozilla.server.in:
	* components/mozilla/bonobo-extensions.c:
	* components/mozilla/bonobo-extensions.h:
	* components/mozilla/main.c:
	* components/mozilla/mozilla-components.cpp:
	* components/mozilla/mozilla-components.h:
	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/mozilla-events.h:
	* components/mozilla/mozilla-preferences.cpp:
	* components/mozilla/mozilla-preferences.h:
	* components/mozilla/athena-mozilla-content-view.c:
	* components/mozilla/athena-mozilla-content-view.h:
	* components/mozilla/athena-mozilla-embed-extensions.cpp:
	* components/mozilla/athena-mozilla-embed-extensions.h:
	* components/mozilla/athena-mozilla-encoding-tables.c:
	* components/mozilla/athena-mozilla-encoding-tables.h:
	* components/mozilla/athena-mozilla-ui.xml:
	* configure.in:
	* athena.spec.in:
	Moved mozilla component into its own module.

2001-12-06  Darin Adler  <darin@bentspoon.com>

	* lots of files
	Get rid of casts in callers to g_object_ref/g_object_unref.
	Remove parameters to eel_make_warnings_and_criticals_stop_in_debugger.

2001-12-05  Gediminas Paulauskas <menesis@delfi.lt>

	* libathena-private/athena-desktop-file-loader.c: remove
	cut'n'pasted functions which are in glib now.
	* src/athena-about.c (athena_about_instance_init): don't set
	close key accelerator, Gtk+ does that already.

2001-12-05  Gediminas Paulauskas <menesis@delfi.lt>

	* configure.in, libathena/Makefile.am,
	libathena/libathena.pc.in: make libathena know to pkg-config

2001-12-05  Gediminas Paulauskas <menesis@delfi.lt>

	* components/hardware/main.c, components/help/hyperbola-main.c,
	components/image-viewer/athena-image-view.c,
	components/mozilla/main.c, libathena/athena-view-standard-main.c,
	src/athena-main.c: (main) get translated messages from athena
	text domain in utf-8.
	* src/athena-window-menus.c: (help_menu_about_athena_callback)
	replace copyright symbol with utf-8 version of it.

2001-12-04  Darin Adler  <darin@bentspoon.com>

	Fix bugs exposed by "make check".

	* libathena-private/athena-directory-async.c:
	(is_dot_or_dot_dot), (should_skip_file),
	(dequeue_pending_idle_callback), (directory_load_one),
	(count_non_skipped_files), (directory_count_callback),
	(start_monitoring_file_list), (deep_count_one), (mime_list_one):
	Add new code to handle stuff that we did with a gnome-vfs filter
	in the old version.
	
	* libathena-private/athena-search-uri.c:
	(strip_uri_beginning), (tokenize_uri): Fix use of g_strsplit since
	the meaning of the parameter has changed.

2001-12-03  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c:
	(set_up_scripts_directory_global): Use GNOME_DOT_GNOME.

2001-11-30  Darin Adler  <darin@bentspoon.com>

	* src/athena-bookmark-list.c: (athena_bookmark_list_load_file):
	* src/athena-property-browser.c: (remove_color),
	(make_properties_from_xml_node),
	(athena_property_browser_update_contents):
	Skip over non-element nodes when walking libxml DOM tree.

	* libathena-private/athena-theme.c:
	(athena_theme_get_theme_data_from_theme): Whitespace tweak.

2001-11-30  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-directory-async.c:
	(top_left_read_callback): Roll double-free bug fix from the branch.
	
	* TODO: Some small updates.
	
	* components/hardware/athena-hardware-view.c:
	* data/browser.xml:
	* icons/crux_eggplant/crux_eggplant.xml:
	* icons/crux_teal/crux_teal.xml:
	* icons/default.xml:
	* icons/gnome/gnome.xml:
	* icons/sierra/sierra.xml:
	* icons/tahoe/tahoe.xml:
	* libathena-private/athena-directory-background.c:
	(athena_file_background_write_desktop_settings):
	* libathena-private/athena-icon-container.c:
	(start_rubberbanding):
	* libathena-private/athena-icon-text-item.c:
	(fetch_themed_color):
	* src/athena-property-browser.c: (add_color_to_browser):
	* src/athena-sidebar-tabs.c: (setup_light_text),
	(setup_dark_text), (athena_sidebar_tabs_init),
	(athena_sidebar_tabs_receive_dropped_color):
	* src/athena-sidebar-title.c:
	(athena_sidebar_title_select_text_color):
	* src/athena-sidebar.c: (receive_dropped_color):
	Changed all rgb:RRRR/GGGG/BBBB to #RRGGBB. We still probably have
	to handle the old format just for old data files.
	
	* libathena-private/.cvsignore:
	athena-marshal-guts.h -> athena-marshal.h
	
	* src/file-manager/fm-directory-view.c:
	(update_directory_in_scripts_menu): Add filter so that we don't
	see invisible or backup files in the scripts menu. In the old
	days, gnome-vfs supplied the filtering.
	
	* src/athena-about.c: (athena_about_finalize),
	(athena_about_instance_init), (athena_about_hide),
	(athena_about_hide_on_response),
	(athena_about_hide_on_delete), (athena_about_class_init):
	Get rid of double-destroy problem with about, and fix OK button.
	
	* src/athena-bookmarks-window.c:
	(athena_bookmarks_window_response_callback): Fix Done button.
	(create_bookmarks_window): Hook up response callback.
	(on_window_delete_event), (handle_close_accelerator): Get rid of
	save_geometry_and_hide, since hide already does that.
	
	* src/athena-main.c: (main): Add some missing domains for better
	debugging. We should figure out a way to do this without a list of
	domains.

2001-11-27  Seth Nickell  <snickell@stanford.edu>

	* athena-help.desktop.in:
	* athena.desktop.in:

	Change list format for Categories field.
	
2001-11-27  Seth Nickell  <snickell@stanford.edu>

	* athena.desktop.in:
	* athena-help.desktop.in:
	
	Add "Categories=" section to work with George's
	new vfolder panel menu system.

Mon Nov 26 20:34:52 2001  Owen Taylor  <otaylor@redhat.com>

	* libathena-private/athena-icon-factory.c: 
	* libathena-private/athena-icon-container.h 
	  libathena-private/athena-file-operations-progress.h: Return
	from get_type() functions is GType, not guint.

	* components/sample/athena-sample-content-view.c
	  libathena/athena-undo-private.h: Deal with
	errant gobject/* includes. (George Karabin)

2001-11-22  Michael Meeks  <michael@ximian.com>

	* components/notes/athena-notes.c (make_notes_view):
	listen for changed on the text buffer.
	(notes_load_metainfo): set buffer to "" not NULL.

	* libathena/athena-view-standard-main.c
	(delayed_quit_timeout_callback): do a bonobo_main_quit.
	(object_destroyed): GObject-ify.

	* components/throbber/main.c (main): upd.

2001-11-22  Michael Meeks  <michael@ximian.com>

	* libathena-private/athena-icon-container.c
	(athena_icon_container_class_init): fix marshaller.

	* libathena-private/athena-marshal.list: add
	INT_POINTER_BOOLEAN
	
	* src/file-manager/fm-properties-window.c
	(real_destroy): protect against double destroys.

Tue Nov 20 21:45:43 2001  Owen Taylor  <otaylor@redhat.com>

	* configure.in: Add [quoting] around AC_CHECK_HEADERS needed for 
	some autoconf versions.
	
	* components/text/athena-text-view.c (file_read_callback): 
	text_view->details->text_display is set to NULL in
	athena_text_view_destroy(), so simply check for non-NULL
	rather than calling GTK_OBJECT_DESTROYED().

	* src/file-manager/fm-properties-window.c (real_destroy): NULL
	out name_field here, since it will be destroyed, so we
	can avoid accessing it in rename_callback.

	* libathena-private/Makefile.am (athena-marshal-guts.c): Get rid
	of athena-marshal-guts.h, since glib-genmarshal now generates correct
	standalone headers.

	* libathena/athena-clipboard.c (select_all_callback),
	* libathena-private/athena-entry.c (athena_entry_select_all_at_idle):
	Remove the idle on destrunction of the widget, rather than checking
	GTK_OBJECT_DESTROYED().

2001-11-21  Michael Meeks  <michael@ximian.com>

	* test/test-athena-wrap-table.c (main): fix.

	* test/test-athena-mime-actions.c (main): upd. init.

	* test/test.c (test_init): upd.
	(test_label_new): kill tile_pixbuf support.
	(test_image_new): ditto.

	* test/test-athena-async-activation.c (main): upd.

	* test/Makefile.am: add CORE_CFLAGS, update LDADD.

	* libathena-private/athena-directory.c
	(athena_directory_destroy): rename to
	(athena_directory_dispose): this, but leave as a
	gtk object for now, double emission protect, move
	removal from directories list to head & split into:
	(athena_directory_finalize): here.

	* libathena-private/athena-directory-async.c
	(athena_directory_async_state_changed): fully remove
	GTK_OBJECT_DESTROYED check.

2001-11-21  Michael Meeks  <michael@ximian.com>

	* src/athena-main.c (main): kill g_log_domain_glib.

	* components/news/athena-news.c (main): ditto.

	* libathena-private/athena-marshal.h: upd.

	* libathena/athena-view.c (athena_view_class_init):
	update for new marshallers.

	* libathena-private/athena-directory-async.c
	(athena_directory_async_state_changed): #ifdef out
	GTK_OBJECT_DESTROYED check.

	* libathena/athena-clipboard.c
	(select_all_idle_callback): kill GTK_OBJECT_DESTROYED
	check; unneccessary.

	* libathena-private/athena-directory.c
	(athena_directory_find_file_by_internal_uri): ditto.

	* libathena-private/athena-entry.c
	(select_all_at_idle): ditto.

	* components/text/athena-text-view.c
	(file_read_callback): ditto.

	* src/file-manager/fm-properties-window.c
	(rename_callback): ditto.

2001-11-15  Ramiro Estrugo  <ramiro@fateware.com>

	* src/athena-preferences-dialog.c:
	(preferences_dialog_populate_themes_group):
	Workaround the crashing preferences dialog problem.  Turn off the
	theme chooser for now.  The image chooser is broken because of
	EelLabel usage.  Im hopeful that a general exorcism of EelLabel
	will fix this along with many other label related problems.
	
2001-11-13  Michael Meeks  <michael@ximian.com>

	* components/tree/athena-tree-view.c
	(athena_tree_view_destroy): allow double destroys &
	split out
	(athena_tree_view_finalize): impl.
	(athena_tree_view_class_init): upd.

	* components/text/athena-text-view.c
	(athena_text_view_class_init): upd.
	(athena_text_view_destroy): allow double destroys.
	(athena_text_view_finalize): impl.

	* components/music/athena-music-view.c
	(athena_music_view_class_init): upd.
	(athena_music_view_destroy): upd.
	(athena_music_view_finalize): impl.

	* components/notes/athena-notes.c (do_destroy): don't
	do hacks around the old bonobo.

	* components/adapter/athena-adapter.c
	(athena_adapter_new): don't gtk_signal_connect_object to a 
	BonoboObject.

2001-11-14  Darin Adler  <darin@bentspoon.com>

	* src/athena-main.c: (main): Remove g_log_domain_gruntime.

2001-11-14  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* libathena-private/athena-volume-monitor.c:
	(volume_is_automounted), (mount_volume_deactivate):
	Add detection of automounted volume, don't eject automounted CDROMs.

	* libathena-private/athena-volume-monitor.c:
	(athena_volume_monitor_set_volume_name):
	Fix search for volume to modify.

2001-11-12  Darin Adler  <darin@bentspoon.com>

	* components/history/athena-history-view.c:
	* components/notes/athena-notes.c:
	* components/sample/athena-sample-content-view.c:
	* components/throbber/athena-throbber.c:
	Update to use proper boilerplate macros. Other porting tweaks.
	
	* libathena/athena-view.c: Switch to gnome version of macros
	instead of eel version.

2001-11-12  Michael Meeks  <michael@ximian.com>

	* libathena/athena-view.c
	(view_frame_call_begin): guard against
	CORBA_OBJECT_NIL return from get_control_frame.

2001-11-12  Thomas Canty  <tommydal@optushome.com.au>
	
	* configure.in: Initialise the gnome-vfs-module package,
	which is required for the help component

  	* components/help/*.[c|am]: Get the help component
	working.

	* components/text/athena-text-view.c: Some work towards
	getting this file compiling.

	* components/throbber/main.c: register the factory iid 
	directly.

	* components/tree/*.c: get the tree component compiling 
	and linking.

2001-11-12  Michael Meeks  <michael@ximian.com>

	* components/throbber/main.c: include string.h
	
2001-11-10  Thomas Canty  <tommydal@optushome.com.au>
 
 	* Lots of files:
 	Work towards getting the components compiling and 
 	working. History, News, Notes and Throbber components 
 	are now working.
 
 	*  libathena/athena-view-standard-main.c:
 	Change the initialisation to use bonobo_ui_init
 
 	* src/athena-window-toolbars.c:
 	Re-enable the throbber.

2001-11-10  Benedikt Roth  <Benedikt.Roth@gmx.net>
 
	* components/help/hyperbola-nav-index.c:
	* components/help/hyperbola-nav-tree.c:
	Include <config.h> so that localization works

2001-11-09  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-horizontal-splitter.c:
	Remove unused stuff.

	* libathena-private/athena-icon-container.c: (destroy),
	(finalize), (athena_icon_container_class_init): Fix the
	destroy and finalize code for the new object lifetime rules.
	* libathena-private/athena-icon-dnd.c:
	(athena_icon_dnd_fini): Fix another multiple-invocation
	issue.
	* libathena-private/athena-program-chooser.c:
	(athena_program_chooser_new): Change response codes to
	match the way this worked under GnomeDialog.

	* libathena-private/README: Update wording a bit.

2001-11-09  Michael Meeks  <michael@ximian.com>

	* src/athena-main.c (main): return bonobo_debug_shutdown,
	if only we could get there.

	* libathena-private/athena-icon-dnd.c
	(athena_icon_dnd_fini): don't try to double free the
	drag_info, allow mutliple invocations.

2001-11-08  Darin Adler  <darin@bentspoon.com>

	* Lots of files.
	Get rid a lot of unneeded casts.

2001-11-08  Darin Adler  <darin@bentspoon.com>

	* components/sample/Makefile.am: Cleanup, turn on all
	DISABLE_DEPRECATED.
	* libathena/Makefile.am: Turn on all DISABLE_DEPRECATED.
	
	* components/sample/athena-sample-content-view.c:
	(athena_sample_content_view_instance_init): Remove gratuitous
	assert.
	
	* libathena/athena-clipboard.c: (cut_callback),
	(copy_callback), (paste_callback): Remove bug workaround.
	(merge_in_clipboard_menu_items), (merge_out_clipboard_menu_items),
	(athena_clipboard_set_up_editable),
	(disconnect_set_up_in_control_handlers): gtk_signal -> g_signal.

2001-11-08  Darin Adler  <darin@bentspoon.com>

	* MAINTAINERS: Just me, not the mailing list.
	
	* Makefile.am: Enable the components directory.
	* components/Makefile.am: Disable all but sample.
	
	* components/*/.cvsignore:
	* components/*/*.oaf.in: Removed.
	* components/*/*.server.in: Added.
	server -> oaf
	
	* components/*/Makefile.am:
	Install the servers in the right place.
	
	* configure.in:
	* libathena-adapter/Makefile.am:
	* libathena-private/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	Simplified CFLAGS, LIBS, and IDL_INCLUDES.

	* components/sample/Makefile.am:
	Switch to the new COMPONENT_CFLAGS.
	
	* components/sample/athena-sample-content-view.h:
	* components/sample/athena-sample-content-view.c:
	(athena_sample_content_view_finalize): Use instead of destroy.
	(bonobo_sample_callback): Mark string for localization.
	
2001-11-08  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_loading_directory),
	(fm_report_error_renaming_file), (fm_report_error_setting_group),
	(fm_report_error_setting_owner),
	(fm_report_error_setting_permissions):
	Remove John Sullivan's email address from these error messages.

	* src/athena-view-frame.c: (shut_down),
	(athena_view_frame_unrealize), (athena_view_frame_destroy),
	(athena_view_frame_finalize), (athena_view_frame_class_init):
	Start shutting down in unrealize, since the BonoboPlug will also
	start shutting down then, and we don't want to misinterpret that
	as a failure.

2001-11-08  Darin Adler  <darin@bentspoon.com>

	* configure.in:
	* cut-n-paste-code/widgets/Makefile.am:
	* cut-n-paste-code/widgets/e-paned:
	* libathena-private/Makefile.am:
	* libathena-private/athena-horizontal-splitter.c:
	* libathena-private/athena-horizontal-splitter.h:
	* src/athena-window.c: (athena_window_constructed),
	(athena_window_set_content_view_widget),
	(athena_window_hide_sidebar), (athena_window_show_sidebar),
	(athena_window_sidebar_showing):
	Remove e-paned.
	
	* configure.in:
	* data/Makefile.am:
	* data/linksets/
	* libathena-private/Makefile.am:
	* libathena-private/athena-file-utilities.c:
	* libathena-private/athena-link-set.c:
	* libathena-private/athena-link-set.h:
	* src/Makefile.am:
	* src/athena-link-set-window.c:
	* src/athena-link-set-window.h:
	* src/athena-sidebar.c: (metadata_button_callback):
	Remove link sets.

	* libathena-private/athena-program-chooser.c:
	(launch_mime_capplet_on_ok),
	(launch_mime_capplet_and_close_dialog):
	* src/athena-window-menus.c: (forget_history_if_yes),
	(remove_bookmarks_for_uri_if_yes):
	Destroy dialogs when done, since GtkDialog doesn't do this for us.
	
	* src/athena-preferences-dialog.c: (preferences_dialog_create):
	Get rid of close signal handler, since default close handler does
	the same thing as a delete_event, which is what we want. We still
	might have to do something fancier on a delete_event.
	
2001-11-08  Darin Adler  <darin@bentspoon.com>

	* NEWS: Remove Athena 1 news. This file is empty for now.
	* RENAMING: Add some renaming ideas.
	* TODO: Add a tiny porting to-do list. I should take that
	survey of GNOME2_CONVERSION_COMPLETE that Havoc did and put
	it in here.
	* TRADEMARK_NOTICE: Removed this file. Eazel logo isn't in
	here any more.
	* Makefile.am: Remove TRADEMARK_NOTICE.
	
	* components/help/hyperbola-nav-index.c:
	* components/mozilla/athena-mozilla-content-view.c:
	* libathena-private/athena-authn-manager.c:
	* libathena-private/athena-file-operations-progress.c:
	* libathena-private/athena-file-operations-progress.h:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-icon-dnd.c:
	* libathena-private/athena-program-chooser.c:
	* libathena-private/athena-program-chooser.h:
	* libathena-private/athena-program-choosing.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-search-list-view.c:
	* src/file-manager/athena-indexing-info.c:
	* src/athena-about.c:
	* src/athena-about.h:
	* src/athena-application.c:
	* src/athena-bookmarks-window.c:
	* src/athena-location-bar.c:
	* src/athena-property-browser.c:
	* src/athena-shell.c:
	* src/athena-window-menus.c:
	* src/athena-window.c:
	First cut at converting to GtkDialog from GnomeDialog.

2001-11-08  Anders Carlsson  <andersca@gnu.org>
 
 	* libathena-private/athena-icon-dnd.c 
 	(athena_icon_dnd_update_drop_target): Plug a leak.

2001-11-08  Darin Adler  <darin@bentspoon.com>

	* configure.in: Finish the job of removing the converters.

2001-11-07  Darin Adler  <darin@bentspoon.com>

	* .cvsignore: Freshen up a bit.

2001-11-07  Darin Adler  <darin@bentspoon.com>

	* acconfig.h:
	* configure.in:
	Switch to glib's gettext.
	
	* components/help/converters/*:
	Remove, since these were moved to libgnome.

	* Many files:
	Get rid of incorrect uses of many locale-specific functions like
	g_strcasecmp and isspace.

2001-11-07  Darin Adler  <darin@bentspoon.com>

	* Makefile.am:
	* README:
	* athena-clean.sh:
	* athena.spec.in:
	* src/athena-application.c: (athena_application_startup):
	Remove athena-clean.sh -- use bonobo-slay instead.

	* libathena-private/athena-program-chooser.c:
	(athena_program_chooser_new): The -2 feature is gone from
	gtk_window_set_default_size, so use -1.

	* src/athena-sidebar-title.c: (smooth_font_changed_callback),
	(athena_sidebar_title_select_text_color), (update_title_font),
	(update_title), (measure_width_callback), (update_more_info),
	(sidebar_title_create_title_label),
	(sidebar_title_create_more_info_label): Change to use GtkLabel
	instead of EelLabel for now -- that makes us actually get a label.

2001-11-07  Darin Adler  <darin@bentspoon.com>

	* components/help/help-method.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	These were still including <libgnomevfs/gnome-vfs-mime.h>.

2001-11-08  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-file.c,
	libathena-private/athena-link.c,
	libathena-private/athena-mime-actions.c: Tweak headers for
	latest gnome-vfs. I promise to stop messing with this now.

2001-11-06  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-find-icon-image.c: (read_details):
	libxml2 complains about NULL path, which libxml1 just handled by
	returning NULL, so check for NULL path.
	
	* libathena-private/athena-icon-canvas-item.c:
	(athena_icon_canvas_item_finalize),
	(athena_icon_canvas_item_class_init): Change destroy to finalize.
	(athena_icon_canvas_item_set_arg),
	(athena_icon_canvas_item_get_arg): Use pointer instead of boxed
	type for font.
	
	* src/athena-window-menus.c: (create_menu_item_from_node),
	(append_static_bookmarks): In the old days, all nodes were elements,
	but now we have nodes for text too. Change code to skip over non-
	element nodes.

2001-11-06  Darin Adler  <darin@bentspoon.com>

	* Lots of files.
	Another GtkObject -> GObject pass.

2001-11-06  Darin Adler  <darin@bentspoon.com>

	Did some fixes based on a patch Michael sent me.

	* cut-n-paste-code/widgets/e-paned/e-paned.c:
	(e_paned_class_init): Turn off e_paned_expose for now.
	
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_class_init): Marshaller said the
	parameters were strings, but they were actually pointers to
	strings.
	
	* libathena/athena-view.c: (queue_incoming_call): Pass
	servant, not bonobo object.
	
	* src/athena-view-frame.c: (athena_view_frame_init),
	(attach_view): Switch to eel versions of connect_while_alive
	functions, since the gtk versions work only on gtk objects.

2001-11-06  Darin Adler  <darin@bentspoon.com>

	* Lots of files.
	Another GtkObject -> GObject pass.

2001-11-06  Darin Adler  <darin@bentspoon.com>

	Update for gnome-vfs API changes.

	* libathena-private/athena-file.c:
	Remove include of gnome-vfs-mime-info.h. Also switch to
	g_ascii_strcasecmp instead of g_strcasecmp.
	
	* libathena-private/athena-icon-factory.c:
	Remove includes of gnome-vfs-mime.h and gnome-vfs-mime-info.h.
	
	* libathena-private/athena-link-desktop-file.c:
	Remove include of gnome-vfs-mime.h.
	
	* libathena-private/athena-link-historical.c:
	(local_get_root_property): Rewrote to use
	gnome_vfs_get_file_info. Removed include of gnome-vfs-mime.h.
	
	* libathena-private/athena-link.c:
	(get_link_style_for_mime_type): New function.
	(get_link_style_for_local_file): New function, uses
	gnome_vfs_get_file_info instead of gnome_vfs_get_mime_type.
	(get_link_style_for_data): New function.
	(athena_link_local_create),
	(athena_link_local_set_icon), (athena_link_local_set_link_uri),
	(athena_link_local_set_type),
	(athena_link_local_get_additional_text),
	(athena_link_local_get_link_uri),
	(athena_link_local_get_link_type),
	(athena_link_get_link_uri_given_file_contents),
	(athena_link_get_link_name_given_file_contents),
	(athena_link_get_link_icon_given_file_contents),
	(athena_link_local_is_volume_link),
	(athena_link_local_is_home_link),
	(athena_link_local_is_trash_link),
	(athena_link_local_create_from_gnome_entry):
	Rewrote all of these to simplify and get rid of spread-out MIME
	type code.
	
	* libathena-private/athena-mime-actions.c:
	Remove include of gnome-vfs-mime-info.h.
	
	* src/Makefile.am: Remove extra dist-hook.

2001-11-06  Michael Meeks  <michael@ximian.com>

	* src/athena-view-frame.c
	(create_corba_objects): upd. bind to zoomable.

	* components/image-viewer/athena-image-view.c
	(zoomable_set_zoom_level_callback): upd. for bonobo.

	* src/file-manager/fm-directory-view.c
	(fm_directory_view_set_zoom_level): ditto.

	* components/text/athena-text-view.c
	(athena_text_view_zoom_to_level): ditto.

2001-11-06  Michael Meeks  <michael@ximian.com>

	* configure.in: update bonobo requirement to 1.106.0
	bump bonobo-activation to 0.9.3, bump canvas and libgnome[ui]
	to 1.105, ORBit2 >= 2.3.97, glib, gtk+, gdk-pixbuf >= 1.3.10,
	gconf >= 1.1.3

	* components/adapter/athena-adapter-control-embed-strategy.c
	(athena_adapter_control_embed_strategy_activate): add NULL opt_ev
	to bonobo_ui_util_set_ui and/or bonobo_control_frame_set_ui_container

	* components/adapter/athena-adapter-embeddable-embed-strategy.c
	(athena_adapter_embeddable_embed_strategy_activate): ditto.

	* libathena/athena-view.c (athena_view_set_up_ui): ditto.

	* libathena/athena-clipboard.c (merge_in_clipboard_menu_items): ditto.

	* src/athena-window.c (athena_window_constructed): ditto.

	* src/file-manager/fm-desktop-icon-view.c (real_merge_menus): ditto.

	* src/file-manager/fm-search-list-view.c (real_merge_menus): ditto.

	* libathena/athena-view.c (athena_view_set_up_ui): ditto.

2001-11-05  Darin Adler  <darin@bentspoon.com>

	* cut-n-paste-code/widgets/e-paned/e-paned.c:
	(e_paned_handle_shown): Fix a G_OBJECT_CLASS that should
	have been G_OBJECT_GET_CLASS.

	* libathena-private/Makefile.am: Add back the dependency on
	the cut-n-paste libraries.

	* libathena-private/athena-bonobo-extensions.c:
	(athena_bonobo_get_hidden): Silently ignore when there's no
	"hidden" attribute rather than warning every time.

	* libathena-private/athena-icon-factory.c:
	(athena_icon_factory_get_pixbuf_for_icon): Ref all the pixbufs
	on their way out of the icon factory since we don't have a new
	strategy for removing them from the cache when the caller is done
	yet.

	* src/athena-sidebar-title.c:
	(sidebar_title_create_more_info_label): Don't call make_smaller
	so Havoc won't complain every time we do it.

	* src/athena-view-frame.c: (athena_view_frame_destroy): Check
	for NULL so we can call destroy any number of times.

	* src/athena-window-toolbars.c:
	(athena_window_initialize_toolbars): Turn off the code that
	tries to load the throbber since we aren't compiling it yet.

	* components/loser/content/athena-content-loser-ui.xml:
	* components/loser/sidebar/athena-sidebar-loser-ui.xml:
	* components/sample/athena-sample-content-view-ui.xml:
	* libathena/athena-clipboard-ui.xml:
	* src/athena-shell-ui.xml:
	Update for new names of stock icons.

2001-11-03  Darin Adler  <darin@bentspoon.com>

	* Tons of files.
	More GtkObject -> GObject stuff.

2001-11-03  Darin Adler  <darin@bentspoon.com>

	* Many files.
	Update for change in Eel boilerplate macro names.
	
	* src/athena-application.c: (athena_application_startup):
	GtkObject -> GObject.
	* src/athena-shell.c: (athena_shell_class_init), (finalize),
	(athena_shell_new):
	GtkObject -> GObject.

2001-11-02  Darin Adler  <darin@bentspoon.com>

	* src/Makefile.am: Put the server file in the right directory.
	* athena.spec.in: Fix some things -- still totally wrong.

2001-11-02  Darin Adler  <darin@bentspoon.com>

	* src/athena-location-bar.c: (try_to_expand_path): Get rid of
	use of gnome_vfs_uri_get_basename. Not sure if I fixed this
	right. This could have been the one caller who really wanted a
	basename-type call.

2001-11-01  Havoc Pennington  <hp@pobox.com>

	* libathena/athena-clipboard.c (select_all): remove GtkText
	workaround (I'm also checking in a fix for the bug being worked
	around)

	* libathena-private/athena-bookmark.c
	(athena_bookmark_menu_item_new): replace some PixmapMenuItem
	with ImageMenuItem

	* src/file-manager/fm-directory-view.c
	(set_script_environment_variables): use
	eel_gtk_window_get_geometry_string

	* src/athena-zoom-control.c: just nuke the draw method, it ain't
	coming back

	* src/athena-window.c (set_initial_window_geometry): remove 
	gtk_window_set_policy() that was useless, and replace set_usize
	with set_size_request.
	(athena_window_constructed): remove menu_bar_no_resize_hack, I
	have no idea what GTK bug it's talking about, neither does the
	referenced bug report say, but if we see it
	again we'll fix it. (plus it says the bug is unsigned math, 
	and GTK 2 pretty much did a global s/uint/int/, especially 
	in the size request/alloc code)

	* src/athena-desktop-window.c (realize): just remove the 
	gnome_win_hints stuff, as the FIXME says, it's dead.
	(realize): remove the set_decorations, set_functions, and 
	the move_resize, all cruft
	(athena_desktop_window_init): simplify some cruft in here

	* src/athena-bookmarks-window.c
	(athena_bookmarks_window_save_geometry):
	use eel_gtk_window_get_geometry_string

	* src/athena-window.c (athena_window_save_geometry): ditto
	
2001-11-01  Darin Adler  <darin@bentspoon.com>

	More changes to make Athena get closer to running.

	* libathena-private/athena-bonobo-extensions.h: Remove
	ATHENA_BONOBO_X_BOILERPLATE, superceded by EEL_DEFINE_
	BONOBO_BOILERPLATE

	* libathena-private/athena-directory-metafile-monitor.c:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-undo-context.c:
	* libathena/athena-undo-transaction.c:
	Same fixes Havoc did, formatted differently.

	* libathena-private/athena-undo-manager.c: (corba_append),
	(corba_forget), (corba_undo), (athena_undo_manager_new),
	(finalize), (athena_undo_manager_class_init):
	GtkObject -> GObject fixes. bonobo_object_from_servant fixes.

	* athena-clean.sh: Not sure if we still need this, but
	change gconfd-1 to gconfd-2 and oafd to bonobo-activation-server.

	* athena.spec.in: Some updates, not sure if they are right.

	* src/athena-application.c: (athena_application_new),
	(athena_application_finalize), (athena_application_class_init):
	GtkObject -> GObject fixes.

	* src/athena-main.c: (main): Use gnome_program_init.

	* src/Makefile.am: Define a bunch more stuff used by
	GNOME_PROGRAM_STANDARD_PROPERTIES.

2001-11-01  Havoc Pennington  <hp@pobox.com>

	* src/athena-view-frame-corba.c: fix
	EEL_DEFINE_BONOBO_BOILERPLATE call
	
	* src/athena-property-browser.c
	(athena_property_browser_init): mnemonics

	* src/athena-complex-search-bar.c
	(attach_criterion_to_search_bar): use gtk_widget_activate instead
	of eel_gtk_button_auto_click

	* src/athena-simple-search-bar.c
	(athena_simple_search_bar_new): ditto
	
	* src/athena-sidebar.c (athena_sidebar_update_buttons): 
	remove eel_gtk_button_set_standard_padding, add mnemonic to
	button

	* src/athena-bookmarks-window.c (create_bookmarks_window): 
	remove eel_gtk_button_set_standard_padding, add mnemonic to
	button
	
	* src/file-manager/fm-properties-window.c (create_basic_page):
	remove eel_gtk_button_set_standard_padding, add mnemonics to
	buttons

	* src/file-manager/fm-directory-view.c (copy_or_cut_files): remove
	use of eel_get_current_event_time()
	(paste_files_callback): ditto

	* Makefile.am (SUBDIRS): cut-n-paste-code seems to be required by
	libathena-private, so move it before libathena-private

	* libathena-private/athena-undo-manager.c: fix
	EEL_DEFINE_BONOBO_BOILERPLATE call

	* libathena-private/athena-undo-context.c: fix
	EEL_DEFINE_BONOBO_BOILERPLATE call

	* libathena-private/athena-program-chooser.c
	(athena_program_chooser_new): axe
	eel_gtk_button_set_standard_padding, add mnemonic to button
	(athena_program_chooser_new): axe
	eel_gtk_button_set_standard_padding, add mnemonic to button

	* libathena-private/athena-metafile.c: fix
	EEL_DEFINE_BONOBO_BOILERPLATE call

	* libathena-private/athena-metafile-factory.c: fix 
	EEL_DEFINE_BONOBO_BOILERPLATE call

	* libathena-private/athena-icon-dnd.c
	(athena_icon_dnd_begin_drag): replace eel_drag_set_icon_pixbuf
	
	* libathena-private/athena-directory-metafile-monitor.c: fix
	EEL_DEFINE_BONOBO_BOILERPLATE call
	
	* libathena/athena-undo-transaction.c: fix
	EEL_DEFINE_BONOBO_BOILERPLATE call

2001-11-01  Louise Miller  <louise.miller@sun.com>

	* Lots of files in components/help 
	Intregation of scrollkeeper indexing capabilities
	into athena.
	
2001-10-31  Darin Adler  <darin@bentspoon.com>

	* configure.in:
	* Makefile.am:
	Removed athena-config and athenaConf.sh stuff.
	Get rid of applets, helper-scripts, and helper-utilities.
	Compile user-guide, help, and omf-install.

	* applets/
	* helper-scripts/
	* helper-utilities/
	Removed.

	* src/Athena_shell.oaf.in: Renamed to .server.in.
	* src/.cvsignore: Ignore the new .server.

	* src/athena-view-frame.c: Add missing include.

	* src/athena-window.c: (athena_window_allow_stop):
	Put code in #if GNOME2_CONVERSION_COMPLETE.

2001-10-31  Darin Adler  <darin@bentspoon.com>

	* README: Try to be kinda up to date.
	* configure.in: Fix dependencies. I removed too many last
	time so idl compiles all failed.

2001-10-30  Darin Adler  <darin@bentspoon.com>

	* Lots of files:
	cut-n-paste-code now compiles, and we are a hair's breadth
	away from linking -- so far from running, though

2001-10-30  Darin Adler  <darin@bentspoon.com>

        * Lots of files:
	src now compiles -- next problem is linking

2001-10-29  Darin Adler  <darin@bentspoon.com>

        * Lots of files:
	libathena-private now compiles -- on to src

2001-10-29  Darin Adler  <darin@bentspoon.com>

	* configure.in: Locate glib-genmarshal.
	* libathena-private/.cvsignore:
	* libathena-private/Makefile.am:
	* libathena-private/athena-marshal.list:
	* src/athena-view-frame.c: (athena_view_frame_class_init):
	* src/athena-zoom-control.c: (athena_zoom_control_class_init):
	Add marshalers used inside Athena only.

	* components/adapter/athena-adapter-load-strategy.c:
	(athena_adapter_load_strategy_class_init):

	* libathena-private/athena-horizontal-splitter.c:
	* libathena-private/athena-icon-canvas-item.c:
	* libathena-private/athena-icon-text-item.h:
	Put code in #if GNOME2_CONVERSION_COMPLETE.

	* libathena-private/athena-icon-container.c:
	(set_pending_icon_to_reveal), (athena_icon_container_class_init),
	(athena_icon_container_init), (set_pending_icon_to_rename):
	Convert signal-handling code.

	* libathena-private/athena-icon-dnd.c:
	(get_data_on_first_target_we_support): Update for GdkAtom changes.
	(confirm_switch_to_manual_layout): Switch to GtkDialog.

2001-10-28  Darin Adler  <darin@bentspoon.com>

	* Lots of files:
	More GNOME 2 work. We now compile up to libathena-private and
	I'm working my way through the files in there. Also changed all
	the initialize_class and initialize to class_init and init.

2001-10-25  Thomas Canty  <tommydal@optushome.com.au>

	* Lots of files:
	More work towards compiling under GNOME 2

2001-10-24  Darin Adler  <darin@bentspoon.com>

	* Lots of files:
	First baby steps at compiling under GNOME 2.

2001-10-24  Anders Carlsson  <andersca@gnu.org>
 
 	* libathena-private/athena-file.c 
 	(athena_file_get_activation_uri): If the file is a symbolic link, 
 	return the uri the file points at. Fixes bug #48353. The fix is not
	perfect though, so the bug is still open.
 
2001-10-21  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* libathena-private/athena-link-desktop-file.c:
	(athena_link_desktop_file_get_link_name_from_desktop):
	Use the localized string

=== Gnome 1 Athena development continues on athena-gnome-1 stable branch ===

=== athena 1.0.5 ===

2001-10-19  Darin Adler  <darin@bentspoon.com>

	* NEWS: Add mention of Mozilla 0.9.5.
	* THANKS: Thank Frank.
	* README: Make a little more up to date, but still needs work.

2001-10-18  Darin Adler  <darin@bentspoon.com>

	Fixed a bunch of bugs that were causing directory display to be
	even slower than it ought to be. The hysteresis wasn't working at
	all because of the confusion about when files were ready for
	display. Also changed hysteresis to 1 second and file chunk to 300
	files instead of 100.

	* libathena-private/athena-directory-async.c:
	(link_info_gmc_link_read_callback): Fix function so it uses the
	actual URI, not the thing that starts with URL. The old way it
	was always failing to read. There were some other backwards if
	statements in here too.
	
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_initialize): Create "non-ready files" hash.
	(fm_directory_view_destroy): Destroy it.
	(real_file_still_belongs): Move this here from FMListView.
	(still_should_show_file): New function, used to decide whether to
	keep a file in the window or not.
	(ready_to_load): New function, used to decide whether a file is
	ready enough to show in the window.
	(process_new_files): Move files from the "new files" lists to the
	"old files" lists, filtering out ones that are not ready to load
	and putting those into the "non-ready files" hash. Also sort the
	added files so the ones that show up at the top are the first to
	be added.
	(split_off_first_n): Renamed to eliminate the "g" namespace.
	(process_old_files): The guts of what used to be in
	display_pending_files. Now we use a separate signal for remove
	instead of just reusing the changed signal.
	(display_pending_files): We're not done loading until all the
	"non-ready files" are ready. Also reverse the sense of the return
	value, so it returns TRUE if there is more work to do.
	(display_pending_idle_callback): Don't zero out the idle ID if we
	are going to return TRUE.
	(display_pending_timeout_callback): If there are more files than
	we can handle, do the remainder at idle time, not in another
	timeout.
	(schedule_idle_display_of_pending_files): Lower the priority so we
	are more likely to get canvas updates between idles.
	(done_loading_callback): We're not done until there are no
	"non-ready files" left.
	(fm_directory_view_queue_file_change): Tiny optimization.
	(unref_key_and_remove): Helper function for clearing out the
	"non-ready files" hash.
	(fm_directory_view_stop): Clear out the 4 lists and the hash (it
	used to just be 2 lists).
	(real_sort_files): Default implementation, doesn't sort.
	(fm_directory_view_initialize_class): Various new methods.
	
	* src/file-manager/fm-icon-view.c: (fm_icon_view_add_file): Do
	less work, since the rules about which files should be shown and
	which files are ready to be seen are now in FMDirectoryView.
	(fm_icon_view_remove_file): New function.
	(fm_icon_view_file_changed): Do way less work, since
	FMDirectoryView does the heavy lifting now.
	(play_file), (preview_audio): Some rudimentary fixes, still seems
	to be broken.
	(compare_files): New function.
	(compare_files_cover): New function.
	(fm_icon_view_sort_files): If automatic layout is on, sort the
	files on their way in so the first ones displayed are the top left
	ones.
	(icon_container_compare_icons_callback): Share code by using the
	new compare_files function.
	(fm_icon_view_initialize_class): Various new methods.

	* src/file-manager/fm-list-view.h:
	* src/file-manager/fm-list-view.c:
	(fm_list_view_initialize_class): Various new methods.
	(fm_list_view_add_file): Do less work, since the rules about which
	files should be shown and which files are ready to be seen are now
	in FMDirectoryView.
	(fm_list_view_file_changed): Do way less work, since
	FMDirectoryView does the heavy lifting now.
	(fm_list_view_remove_file): New function.
	(fm_list_view_sort_files): This replaces the old override of
	display_pending_files.
	
	* src/file-manager/fm-search-list-view.c:
	(fm_search_list_view_initialize_class): The file_still_belongs
	method moved to FMDirectoryView.

2001-10-15  Darin Adler  <darin@bentspoon.com>

	Switch to require Mozilla 0.9.5 -- sadly this means we are
	now incompatible with any older verion. Thanks to frb@ximian.com
	for his patch and help making it compile with 0.9.5.

	* README: Tell people 0.9.5 is needed.
	* configure.in: Various cleanup, and ask for 0.9.5.
	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/athena-mozilla-embed-extensions.cpp:
	Work around gcc bug with the directory named string. Switch to use
	new calls in cases where the old ones are gone.
	
2001-10-13  Carlos PerellÃ³ MarÃ­n <carlos@gnome-db.org>

        * configure.in (ALL_LINGUAS): Added pt

2001-10-12  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c: Change hysteresis value
	from .1 second to 4 seconds. I think this will get rid of the
	slowness people have been reporting.

2001-10-12  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bumped gnome-vfs requirement to 1.0.3.

2001-10-11  Darin Adler  <darin@bentspoon.com>

	* Makefile.am: Remove RPMs-README.
	
	* libathena/Makefile.am: -I$(builddir)
	
	* libathena/athena-undo-private.h:
	* libathena/athena-undo-transaction.h:
	Use #include <libathena/x.h> rather than #include "x.h".

	* NEWS: Some refinement.

2001-10-11  Darin Adler  <darin@bentspoon.com>

	* NEWS: Add a first cut at Athena 1.0.5 release notes.
	* THANKS: Updated to match change log better.
	* configure.in: Bumped version to 1.0.5 in preparation for the
	release.

2001-10-09  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-find-icon-image.c:
	Include libgnomevfs/gnome-vfs-utils.h, needed for
	gnome_vfs_icon_path_from_filename().

	* libathena-private/athena-volume-monitor.c (copy_volume):
	Copy is_read_only.

2001-10-09  Darin Adler  <darin@bentspoon.com>

	* configure.in: Require newer versions of various libraries to
	cut down on the bug reports with people using newer athena
	and older versions of those libraries. Including bonobo 1.0.9,
	eel 1.0.2, librsvg 1.0.1. Remove the freetype stuff here, since
	that's all taken care of in librsvg. Remove old GNOME2_PATH thing
	that is definitely not needed. Remove gnome_canvas_set_dither
	check which is now in eel if needed at all. Remove ammonite
	configure flags.

	* athena.spec.in: Remove freetype dependencies. This is now
	handled in librsvg.
	
	* components/mozilla/Makefile.am:
	* components/mozilla/main.c: (main):
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_location_callback), (mozilla_link_message_callback),
	(mozilla_dom_mouse_click_callback),
	(navigate_mozilla_to_athena_uri), (post_widget_initialize):
	* src/Makefile.am:
	Remove dependencies on ammonite and some more remnants of
	Eazel services code.

2001-10-09  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-find-icon-image.c:
	(get_themed_icon_file_path): Fix typo.

2001-10-09  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-find-icon-image.c:
	(get_themed_icon_file_path): Fix problem with NULL themes.

2001-10-08  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-file.c:
	(get_automatic_emblems_as_integer),
	(prepend_automatic_emblem_names): Bend to the forces of
	practicality and mediocrity and turn off the trash emblem until we
	can make the "in trash" check fast.
	
	* libathena-private/athena-icon-factory.c:
	Tweak formatting.

2001-10-08  Darin Adler  <darin@bentspoon.com>

	Separate out the part of the code that locates icons.

	* libathena-private/Makefile.am: New source files.
	
	* libathena-private/athena-find-icon-image.h: New.
	* libathena-private/athena-find-icon-image.c: New.

	* libathena-private/athena-icon-factory.c:
	(cache_icon_new): Use new theme structure.
	(athena_icon_factory_destroy): Use new theme structure.
	(get_mime_type_icon_without_suffix): Use suffix remove function
	moved into new file by its new name.
	(set_theme_name): Helper function to keep the theme change code
	simpler.
	(icon_theme_changed_callback): Rewrote to get rid of confused
	juxtaposition of old and new theme concepts.
	(image_uri_to_name_or_uri): Use suffix remove function moved into
	new file by its new name.
	(athena_icon_factory_get_emblem_icon_by_name): Use emblem prefix
	by new name.
	(load_named_icon): Use athena_get_icon_file_name function in new
	source file.
	(load_specific_icon), (scale_icon), (load_icon_with_embedded_text):
	IconDetails is now AthenaIconDetails.

2001-10-07  Darin Adler  <darin@bentspoon.com>

	* Makefile.am:
	* data/Makefile.am:
	* helper-scripts/Makefile.am:
	A few DESTDIR fixes.

	* libathena-private/athena-icon-factory.c:
	Cache more icons. The old number was arbitrary and way too small.

2001-10-05  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-icon-factory.c: Remove gratuitous
	suffixes from the icon file search. We now look only for .svg and
	.png and .jpg files. Lets use .png files most of the time.

2001-10-05  Darin Adler  <darin@bentspoon.com>

	* eazel-logos: removed
	* libathena-private/athena-file-utilities.c:
	(athena_pixmap_file): Remove the code to look for Eazel logos.

	* configure.in:
	* Makefile.am:
	* athena.spec.in:
	Remove the code to include the Eazel logos in the tarball and
	the package.

	* HACKING: Remove the instructions on how to omit the Eazel logos.

2001-10-05  Benedikt Roth  <Benedikt.Roth@gmx.net>

 	* src/file-manager/fm-properties-window.c: (uri_is_local_image),
 	(fm_properties_window_drag_data_received),
 	(create_image_widget_for_file):
 	Implemented DnD for the icon in the file properties dialog

2001-10-04  Darin Adler  <darin@bentspoon.com>

	A bit more renaming to be explicit about "display name".
	This is slightly gratuitious, because we don't really need to be
	explicit about which name in every case, but it does no harm and
	a tiny bit of good.

	* components/tree/athena-tree-view.c: (ctree_compare_rows):
	* libathena-private/athena-file.c: (compare_by_display_name),
	(compare_by_full_path), (athena_file_compare_for_sort_internal),
	(compare_by_display_name_cover),
	(athena_file_list_sort_by_display_name),
	(athena_self_check_file):
	* libathena-private/athena-file.h:
	* libathena-private/athena-global-preferences.c:
	(default_icon_view_sort_order_or_manual_layout_changed_callback):
	* src/file-manager/fm-desktop-icon-view.c:
	(desktop_icons_compare_callback):
	* src/file-manager/fm-directory-view.c:
	(update_directory_in_scripts_menu):
	* src/file-manager/fm-icon-view.c: (get_default_sort_order),
	(icon_container_compare_icons_by_name_callback):
	* src/file-manager/fm-list-view.c: (compare_rows_by_name),
	(get_attribute_from_sort_type), (real_get_column_specification):
	* src/file-manager/fm-search-list-view.c:
	(real_get_column_specification):
	Change ATHENA_FILE_SORT_BY_NAME to ATHENA_FILE_SORT_BY_DISPLAY_NAME
	and compare_by_name to compare_by_display_name and
	athena_file_list_sort_by_name to athena_file_list_sort_by_display_name.

2001-10-04  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-file-attributes.h,
	libathena-private/athena-file-private.h: Rename CUSTOM_NAME
	attribute to DISPLAY_NAME.

	* libathena-private/athena-file.h,
	libathena-private/athena-file.c:
	(athena_file_get_name): Always return the real name of the file.
	(athena_file_get_display_name): New function which returns the
	display name of the file, taking into account special names that
	may be set for .desktop files or gmc-style links, as
	athena_file_get_name formerly did.
	(athena_file_compare_display_name): Use display name and rename
	for clarity.
	
	(destroy, compare_by_name, athena_file_get_string_attribute,
	athena_file_get_all_attributes, athena_self_check_file):
	Adjust for custom_name->display_name change, use
	athena_file_get_display_name instead of athena_file_get_name
	where appropriate.
	
	* libathena-private/athena-directory-async.c:
	(athena_directory_set_up_request), (link_info_done,
	(link_info_gmc_link_read_callback): Adjust for custom_name->display_name change.

	
	In all the places below, use athena_file_get_display_name
	instead of athena_file_get_name:
	
	* components/text/athena-text-view.c: (file_read_callback):
	* components/tree/athena-tree-model.c:
	(athena_tree_model_monitor_add),
	(athena_tree_model_node_begin_monitoring_no_connect):
	* components/tree/athena-tree-view.c:
	(athena_tree_view_insert_model_node),
	(athena_tree_view_update_model_node):
	* libathena-private/athena-program-chooser.c:
	(get_file_name_for_display):
	* libathena-private/athena-program-choosing.c:
	(application_cannot_open_location):
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_display_selection_info),
	(real_file_limit_reached), (file_name_from_uri),
	(add_script_to_script_menus), (add_submenu_to_script_menus),
	(copy_or_cut_files), (get_executable_text_file_action),
	(fm_directory_view_activate_file), (finish_loading):
	* src/file-manager/fm-error-reporting.c:
	(fm_report_error_loading_directory),
	(fm_report_error_renaming_file), (fm_report_error_setting_group),
	(fm_report_error_setting_owner),
	(fm_report_error_setting_permissions), (fm_rename_file):
	* src/file-manager/fm-icon-view.c:
	(icon_container_preview_callback), (get_icon_text_callback):
	* src/file-manager/fm-list-view.c: (match_row_name):
	* src/file-manager/fm-properties-window.c:
	(name_field_update_to_match_file),
	(update_properties_window_title), (create_permissions_page),
	(create_properties_window):
	* src/file-manager/fm-search-list-view.c: (real_adding_file):
	* src/athena-window-manage-views.c: (compute_default_title):
	* src/athena-window.c: (athena_window_set_viewed_file):

2001-10-02  Darin Adler  <darin@bentspoon.com>

	Fix the longstanding problem where the Notes and History sidebar
	panels failed to load.

	* libathena-private/athena-directory-metafile.c:
	(die_on_failed_activation): Give better error messages.
	(get_factory): Check the ev result from oaf_activate_from_id
	rather than relying on getting NIL when it fails.
	(open_metafile): New helper function.
	(get_metafile): Don't complain if the open call fails the first
	time, and re-get the factory and retry before doing a g_error.

2001-10-02  Darin Adler  <darin@bentspoon.com>

	* src/athena-window.c: (athena_window_destroy),
	(athena_window_set_viewed_file): Fix bug where we would leave a
	file monitored when we closed the window.

	* libathena-private/athena-volume-monitor.c:
	(mount_unmount_callback): Formatting tweaks.

2001-10-02  Frederic Crozat  <fcrozat@mandrakesoft.com>

	* libathena-private/filesystem-attributes.xml: add support for JFS
	* libathena-private/athena-volume-monitor.c:
	(close_error_pipe), (mount_unmount_callback): Set locale to "C"
	before running mount/umoun to be able to parse mount message in english

2001-10-01  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-directory-async.c:
	(deep_count_start): Say that the deep count of a non-directory is
	"done" rather "not started". This was causing an infinite loop when
	doing the directory self-check.

2001-10-01  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* libathena-private/athena-file-operations.c:
	(parse_previous_duplicate_name), (make_next_duplicate_name),
	(athena_self_check_file_operations):
	Fix #47701, Duplicate numbering scheme does not correctly number 
	the 11th, 12th, and 13th copies

2001-10-01  Alex Larsson  <alexl@redhat.com>

	* data/Makefile.am (install-data-local):
	Move sysconfig and serverconfig out of starthere.
	That was a merge error.

2001-10-01  Darin Adler  <darin@bentspoon.com>

	* README: Updated tags and build order in the README to match
	what Athena hackers really use.

2001-09-28  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bump gnome-vfs requirement to 1.0.2, since we
	use new APIs that aren't in 1.0.1.

2001-09-27  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* components/hardware/athena-hardware-view.c:
	(get_CPU_description):
	i18n fixes for cpu speed and cache size (fixes #45298)
	* icons/gnome/gnome.xml:
	Fix #48322, Theme description for new Gnome theme lacks a dot

2001-09-27  Darin Adler  <darin@bentspoon.com>

	* components/news/athena-news.c: (draw_rss_logo_image):
	Format time using eel_strdup_strftime so we don't have
	a fixed maximum buffer size and marked the time format
	for localization.

2001-09-26  Alex Larsson  <alexl@redhat.com>

	* components/mozilla/athena-mozilla-content-view.c:
	Allow the mozilla component to open Chrome windows.
	This is needed for simple dialogs when e.g. submitting
	forms.

2001-09-26  Alex Larsson  <alexl@redhat.com>

	Merged more patches from the Red Hat branch.

	2001-09-20  Alex Larsson  <alexl@redhat.com>
	
	* libathena-private/athena-desktop-file-loader.c:
	Correct filename in header.
	(athena_desktop_file_new): Use g_new0
	(athena_desktop_file_load):
	Don't initialize contents. Don't need to check contents
	for NULL.
	(athena_desktop_file_foreach_section):
	Coding style fix.

	* libathena-private/athena-link-desktop-file.c
	(athena_link_desktop_file_local_create): Use fputs instead
	of fwrite.
	
	2001-09-19  Alex Larsson  <alexl@redhat.com>
	
	* libathena-private/athena-link-desktop-file.c
	(athena_link_desktop_file_get_link_uri_from_desktop):
	Handle broken .desktop file with type "URL".

	* libathena-private/athena-icon-factory.c:
	Load the default icon name even when we have a custom icon uri.
	It may be needed if the custom icon was not there.

	2001-09-19  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-directory-async.c
	(make_dot_directory_uri): gnome_vfs_uri_new() may fail.
	(link_info_start): Handle make_dot_directory_uri failing.
	
	* libathena-private/athena-icon-container.c:
	Remove fixed FIXME.
	
	* libathena-private/athena-link-desktop-file.c
	(slurp_key_string): Pass uris to athena_desktop_file_load ().
	(athena_link_desktop_file_local_create): Create files
	using FILE * instead of GnomeVFS.
	(athena_link_desktop_file_local_set_icon,
	athena_link_desktop_file_local_get_link_uri):
	The argument is a path, not a uri.
	(athena_link_desktop_file_local_set_type,
	athena_link_desktop_file_local_set_link_uri): Remove failing functions.
	(athena_link_desktop_file_local_get_additional_text): Comment
	out additional text for now.

	* libathena-private/athena-link-desktop-file.h
	  (athena_link_desktop_file_local_set_type,
           athena_link_desktop_file_local_set_link_uri): Remove failing functions.

	* libathena-private/athena-link-historical.c:
	  (local_get_root_property):
	  Always use paths for the arguments.

	* libathena-private/athena-link.c:
	Make athena_link_local_set_link_uri and athena_link_local_set_type
	not be called for .desktop files.

	* src/file-manager/fm-directory-view.c:
	Remove unnecessary include

	* src/file-manager/fm-icon-view.c:
	Re-enable additional text.
	
	2001-09-19  Alex Larsson  <alexl@redhat.com>

	* libathena-private/Makefile.am:
	* libathena-private/athena-desktop-file-loader.[ch]:
	* libathena-private/athena-link-historical.[ch]:
	Rename athena-link-impl to athena-link-historical
	and nauitlus-link-desktop to athena-link-desktop-file.

	* libathena-private/athena-link-impl-desktop.[ch]:
	* libathena-private/athena-link-impl.[ch]:
	Removed old files.

	* libathena-private/athena-link.c:
	* libathena-private/athena-file.c:
	* libathena-private/athena-icon-factory.c:
	Update for the renames.

	* libathena-private/athena-desktop-file-loader.c:
	Some coding style changes.
	
	2001-09-18  Alex Larsson  <alexl@redhat.com>

	* libathena-private/desktop-file-loader.[ch],
	libathena-private/athena-desktop-file.[ch]:
	Removed files.
	* libathena-private/athena-desktop-file-loader.[ch],
	libathena-private/Makefile.am:
	New, cleaned up version of the desktop-file loader.

	* libathena-private/athena-link-impl-desktop.c:
	Update to the new desktop file parser names.

	2001-09-13  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-file.c
	(athena_file_contains_text): Fix test for NULL mime type with
	reverse polarity; don't free the mime type string since we are not
	copying it. I could have sworn I fixed both of these problems
	before merging my changes to the RH branch!

	2001-09-01  Maciej Stachowiak  <mjs@noisehavoc.org>

	Merged changes from mjs-patches-to-redhat-patches branch to
	redhat-outstanding-patches:

	2001-08-27  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-directory-async.c
	(athena_directory_invalidate_count_and_mime_list): Fix a
	reference count underflow.

	2001-08-27  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-directory-async.c:
	(link_info_read_done, start_or_stop_io,
	file_needs_high_priority_work_done,
	file_needs_low_priority_work_done, file_needs_work_done,
	athena_directory_add_file_to_work_queue,
	athena_directory_remove_file_from_work_queue,
	move_file_to_low_priority_queue): Use two queues instead of one
	for file attributes. The high priority attributes are ones needed
	to display an icon at all (file_info and link_info), the rest are
	things that can be displayed later. This change makes directory
	counts and top left text generally get loaded after all the files
	appear, instead of slowing down the load.
	* libathena-private/athena-directory-private.h: Adjusted
	for the two queue change.
	libathena-private/athena-directory.c
	(athena_directory_initialize, athena_directory_destroy):
	Likewise.
	* libathena-private/athena-file-queue.h,
	libathena-private/athena-file-queue.c:
	(athena_file_queue_new, athena_file_queue_destroy,
	athena_file_queue_enqueue, athena_file_queue_dequeue,
	athena_file_queue_remove, athena_file_queue_head,
	athena_file_queue_is_empty): New data structure that provides a
	queue of AthenaFiles that allows constant time removal from an
	arbitrary point in the list and avoids storing duplicates
	(basically factored out this code from athena-direcvtory-async).
	* libathena-private/Makefile.am: Add athena-file-queue.[ch] to
	build.

	2001-08-27  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-directory-async.c
	(lacks_link_info): If we can determine here that link info will
	not be applicable to this file, set the proper flags and say it's
	not wanted. This removes much of the chunky loading effect the
	previous changes were causing.
	(link_info_start): Make test for gmc link more efficient by using
	nutilus_file_is_mime_type for mime type checking.

	* libathena-private/athena-file.c:
	(athena_file_contains_text): Speed this check up by avoiding
	memory allocation.

	2001-08-25  Maciej Stachowiak  <mjs@noisehavoc.org>

	Reworked athena-directory-async to maintain a queue of files
	that need some async I/O done, to avoid n^2 behavior on large
	directory loads.
	
	* libathena-private/athena-directory-private.h: Added
	declarations of file queue data structures and functions.

	* libathena-private/athena-directory-async.c:
	(athena_directory_add_file_to_work_queue,
	add_all_files_to_work_queue,
	athena_directory_remove_file_from_work_queue): New functions for
	managing work queue.
	(file_needs_work_done): New function to determine when a file
	needs async I/O of any kind done.
	(athena_directory_monitor_add_internal,
	athena_directory_monitor_remove_internal,
	athena_directory_remove_file_monitors,
	athena_directory_add_file_monitors,
	athena_directory_call_when_ready_internal,
	athena_directory_force_reload_internal): Add files to work
	queue or remove files from work queue as appropriate.
	(athena_directory_invalidate_count_and_mime_list): Invalidate
	using the generic file attribute invalidation code, to make sure
	the right file is added to the work queue.
	(lacks_directory_count, lacks_deep_count, lacks_mime_list): Don't
	bother to check if it's a directory, since the relevant `_start'
	functions will check for that case and set the flag that says the
	data is up to date.
	(file_list_start_or_stop): Renamed to make effects more clear.
	(directory_count_callback): Set directory count info properly in
	the failure case.
	(link_info_done): Don't send a file changed notification
	here, since this might be called in cases where link info doesn't
	apply, and we don't want to send a notice in that case. 
	(link_info_read_done): Instead, send it here, since cases where
	the link info applies all go through here.
	(top_left_read_done): Don't say we got the top left text when it
	failed.
	(directory_count_stop, directory_count_start, deep_count_stop,
	deep_count_start, mime_list_stop, mime_list_start,
	top_left_read_callback, top_left_stop, top_left_start),
	file_info_stop, file_info_start, link_info_stop, link_info_start):
	Split start and stop functions; make start functions take a file
	to start work on, if applicable, instead of searching the file
	list for a needy file.
	(start_or_stop_io): Revise algorithm as follows: stop all I/O that
	is no longer wanted; remove all files from the head of the queue
	that need no more I/O; and start any needed I/O for the file
	currently at the head of the queue.

	* libathena-private/athena-directory.c:
	(athena_directory_initialize, athena_directory_destroy):
	Create and destroy work queue hash table.
	(athena_directory_add_file, athena_directory_remove_file): Add
	file to or remove file from work queue.
	* libathena-private/athena-file.c
	(athena_file_invalidate_attributes): Add file to work queue.

	2001-08-22  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-icon-factory.c:
	(image_uri_to_name_or_uri,
	athena_icon_factory_get_icon_for_file): Don't crash (oops).

	2001-08-21  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-icon-factory.c
	(athena_icon_factory_get_icon_for_file): Fix slight merge
	problem.

	2001-08-21  Maciej Stachowiak  <mjs@noisehavoc.org>

	These changes are meant to fix some of the areas of slowness
	uncovered by getting the link info asynchronously. They don't do
	the job all the way though.

	* libathena-private/athena-directory-async.c: (lacks_top_left,
	lacks_link_info, top_left_start): Fix these up a bit to avoid
	doing the more expensive mime type comparing checks too
	frequently.

	* libathena-private/athena-icon-private.h,
	libathena-private/athena-icon-container.c: (destroy),
	(athena_icon_container_initialize),
	(athena_icon_container_clear), (icon_destroy),
	(athena_icon_container_add), (athena_icon_container_remove),
	(athena_icon_container_request_update),
	(athena_icon_container_reveal): Add a hashtable mapping from
	icon data to icons, to make some formerly linear operations
	constant time and so hopefully avoid N^2 behavior. Manage the
	hashtable properly.

	* libathena-private/athena-icon-factory.h,
	libathena-private/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file,
	athena_icon_factory_get_required_file_attributes): Tweak a bit.
	(athena_icon_factory_get_basic_file_attributes,
	athena_icon_factory_is_basic_icon_ready_for_file): New functions
	that let you determine if most of the info needed to get an icon
	is ready - "most" being everything but top left text right now.
	
	* libathena-private/athena-link-impl-desktop.c
	(athena_link_impl_desktop_get_link_icon_from_desktop): Remove
	stray printf.

	2001-08-21  Maciej Stachowiak  <mjs@noisehavoc.org>

	* src/file-manager/fm-icon-view.c: (fm_icon_view_add_file,
	fm_icon_view_file_changed): Try to avoid displaying the generic
	icon before custom icon data is read.

	2001-08-21  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-file-attributes.h: Add
	ATHENA_FILE_CUSTOM_NAME attribute.

	* libathena-private/athena-directory-private.h,
	libathena-private/athena-directory-async.c:
	(link_info_cancel), (athena_directory_set_up_request),
	(athena_async_destroying_file), (lacks_link_info),
	(wants_link_info), (request_is_satisfied), (link_info_done),
	(link_info_read_done), (link_info_athena_link_read_callback),
	(link_info_gmc_link_read_callback),
	(link_info_gmc_link_read_more_callback), (make_dot_directory_uri),
	(link_info_start), (start_or_stop_io),
	(athena_directory_cancel),
	(cancel_link_info_for_file), (cancel_loading_attributes),
	(athena_directory_cancel_loading_file_attributes): Changes to
	get the custom name and custom icon out of a link files and
	.directory files asynchronously and with caching. The I/O is
	shared with the fetching of the activation URI. 

	* libathena-private/athena-file-private.h,
	libathena-private/athena-file.c: (destroy),
	(athena_file_get_name), (athena_file_get_activation_uri),
	(athena_file_get_custom_icon_uri), (invalidate_link_info),
	(athena_file_invalidate_attributes_internal),
	(athena_file_get_all_attributes): Handle new custom_name and
	custom_icon_uri attributes and link_info internal attribute
	properly.

	* libathena-private/athena-file.h: Prototype new
	athena_file_get_custom_icon_uri call.

	* libathena-private/athena-icon-factory.c
	(athena_icon_factory_get_icon_for_file): Remove code for reading
	icons from .directory files and various kinds of links. Instead
	rely on athena_file_get_custom_icon_uri.

	* libathena-private/athena-link.h,
	libathena-private/athena-link.c:
	(athena_link_get_link_uri_given_file_contents): Fix to work for
	classic athena links.
	(athena_link_get_link_name_given_file_contents): New call to get
	a custom name given link contents. (Actually does nothing for
	old-style athena links).
	(athena_link_get_link_icon_given_file_contents): New call to get
	a custom icon given link contents.
	(athena_link_local_set_icon, athena_link_local_set_link_uri):
	Invalidate the relevant file attributes.

	* libathena-private/athena-link-impl-desktop.h,
	libathena-private/athena-link-impl-desktop.c:

	* libathena-private/athena-link-impl-desktop.h,
	libathena-private/athena-link-impl-desktop.c:
	(athena_link_impl_desktop_local_set_icon): Remve attempt at
	notification (now done by generic layer).
	(athena_link_impl_desktop_get_link_name_from_desktop,
	athena_link_impl_desktop_get_link_name_given_file_contents):
	Implement getting the custom name.
	(athena_link_impl_desktop_get_link_icon_from_desktop,
	athena_link_impl_desktop_get_link_icon_given_file_contents):
	Implement getting the custom icon. This no longer attempts the
	hack of asynchronously downloading and caching remote
	icons. Nothing uses this feature and it should really be done in
	the icon factory, not here.

	* libathena-private/athena-link-impl.h,
	libathena-private/athena-link-impl.c:
	(athena_link_impl_local_set_link_uri): Remove attempt at
	notification (done by generic layer now).
	(athena_link_impl_get_link_icon_given_file_contents): Implement
	getting the custom icon. This no longer attempts the hack of
	asynchronously downloading and caching remote icons. Nothing uses
	this feature and it should really be done in the icon factory, not
	here.

	* components/tree/athena-tree-model.c:
	(athena_tree_model_monitor_add,
	athena_tree_model_node_begin_monitoring_no_connect): Monitor
	custom_name and attributes required by icon factory.
	
	* src/file-manager/fm-directory-view.c (finish_loading): Monitor
	custom name attribute.

	* src/file-manager/fm-properties-window.c
	(create_properties_window): Monitor custom name attribute.
	
	* src/file-manager/fm-search-list-view.c (real_adding_file):
	Monitor custom name attribute.

	* src/athena-window-manage-views.c
	(viewed_file_changed_callback): Always update title even if URI
	did not change because custom name may have changed or just been
	retrieved.

	* src/athena-window.c: (athena_window_set_viewed_file):
	Monitor custom name attribute.

	2001-08-20  Havoc Pennington  <hp@redhat.com>

	* libathena-private/athena-icon-factory.c
	(athena_icon_factory_get_icon_for_file):
	add a athena_file_is_local() before loading desktop files; this
	breaks Athena links, which are actually async. We lost the 
	is_local() check on .desktop files because the .desktop files were
	added as a athena link backend, and athena links were async,
	so people were using them in nonlocal cases, but we deleted the
	.desktop codepath in favor of the athena link codepath.

	(athena_icon_factory_get_icon_for_file): Do same processing for
	.directory image URI that we do for .desktop image URI, allowing
	us to handle X-Athena-Icon in .directory
	(image_uri_to_name_or_uri): function with the common processing

	Wed Aug  8 21:02:33 2001  Jonathan Blandford  <jrb@redhat.com>

	* libathena-private/athena-link-impl-desktop.c
	(athena_link_impl_desktop_local_create): fix to really work with
	gnome_vfs.

	Mon Aug  6 15:04:14 2001  Jonathan Blandford  <jrb@redhat.com>

	* libathena-private/athena-link-impl-desktop.c
	(athena_link_impl_desktop_local_create): write athena files
	using gnome-vfs instead of FILE.

	2001-08-01  Havoc Pennington  <hp@redhat.com>
	
	* libathena-private/athena-link-impl-desktop.c: use 
	desktop_file_get_locale_string() instead of
	desktop_file_get_string() to get the names from the desktop files.

	Wed Aug  1 04:58:35 2001  Jonathan Blandford  <jrb@redhat.com>

	* libathena-private/athena-link.c: Fix a crash when some files
	could return NULL as a mime-type.

	* src/file-manager/fm-icon-view.c (get_icon_text_callback):
	Disable additional_text for .desktop files.

	2001-07-31  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-link-impl-desktop.c
	(athena_link_impl_desktop_get_link_uri_from_desktop):
	Handle FSType desktop files here to. To allow unmounts.

	2001-07-31  Havoc Pennington  <hp@redhat.com>

	* libathena-private/athena-file.c (athena_file_get_name):
	get_text, not get_additional_text, for .directory files. fixes
	sidebar names hopefully.
	
	Fri Jul 27 16:03:12 2001  Jonathan Blandford  <jrb@redhat.com>

	* libathena-private/athena-link.c (get_uri_mime_type_full):
	check the file for the mime-type rather then just the file name.
	Grabs old athena-link files.

	Thu Jul 26 19:09:48 2001  Jonathan Blandford  <jrb@redhat.com>

	* src/file-manager/fm-desktop-icon-view.c
	(update_trash_link_and_delete_copies): fix Trash.desktop file.

	* libathena-private/athena-link-impl-desktop.c
	(slurp_uri_contents): '\000' terminate buffer read in.
	(athena_link_impl_desktop_local_set_icon): Implement.

	2001-07-26  Havoc Pennington  <hp@redhat.com>

	* src/file-manager/fm-directory-view.c
	(activate_callback): remove the hack for .desktop files, we now 
	do them the same way as Athena link files

	* libathena-private/athena-icon-factory.c
	(athena_icon_factory_get_icon_for_file):
	get icons for .desktop files and .directory files
	
	* libathena-private/athena-file.c
	(athena_file_get_name): handle .desktop files using the 
	desktop loader that works on non-file: URIs

	* libathena-private/desktop-file-loader.h, 
	libathena-private/desktop-file-loader.c: lame desktop file
	parser to be used temporarily until George finishes the Ultimate 
	Desktop File Loader.

	* libathena-private/Makefile.am: Add files for link file
	abstraction, intended to allow use of .desktop files in place of 
	Athena link files.

2001-09-25  Darin Adler  <darin@bentspoon.com>

	* components/adapter/athena-adapter.c:
	(athena_adapter_initialize): Ref and sink the new adapter.
	(athena_adapter_new): Remove unused CORBA_Environment.
	* components/adapter/athena-adapter.h: Whitespace tweak.

	* libathena-private/athena-directory-metafile.c:
	(athena_directory_get_integer_file_metadata):
	* libathena-private/athena-file.c: (get_id_from_digit_string):
	* libathena-private/athena-icon-factory.c:
	(parse_attach_points):
	* libathena-private/athena-thumbnails.c:
	(athena_thumbnail_load_framed_image):
	* src/file-manager/fm-icon-view.c:
	(get_stored_icon_position_callback):
	A bunch of places were trying to use %*s to detect whether there
	were stray characters at the end of a string when doing an sscanf.
	I wrote that code. But it doesn't work. A similar technique that
	does work is to use %c, and ignore the parsed character.

	* src/athena-search-bar-criterion.c:
	(athena_search_uri_get_first_criterion):
	This place wasn't using the %*s at all, so just remove it.

2001-09-24  Fabrice Bellet  <fabrice@gnu.org>

	* Reviewed by Darin Adler <darin@bentspoon.com> (Bug 44402)
	* components/adapter/bonobo-stream-vfs.c: vfs_get_info()
	needs to be implemented to make the EOG component happy.

2001-09-21  Philip Langdale  <philipl@mail.utexas.edu>

	* Reviewed by John Fleck <jfleck@inkstain.net> (Bug 60511)
        * components/help/converters/gnome-info2html2/html.c
        * components/help/converters/gnome-info2html2/html.h
        * components/help/converters/gnome-info2html2/main.c: Added optional
        "galeon mode" invoked with -g command line param. This involves writing 
        fully qualified info: hrefs instead of just the #nodename target,  
        which appears to me to be a bug, but might have negative effects on
        athena. It also uses ? queries instead of # refs when forming hrefs.

2001-09-20  Darin Adler  <darin@bentspoon.com>

	* components/help/hyperbola-nav-index.c:
	* components/help/hyperbola-nav-search.c:
	* components/news/athena-news.c:
	* components/text/athena-text-view.c:
	* libathena-private/athena-customization-data.c:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-file.c:
	* libathena-private/athena-icon-factory.c:
	* libathena-private/athena-link-set.c:
	* libathena-private/athena-link.c:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-metafile.h:
	* libathena-private/athena-theme.c:
	* libathena-private/athena-volume-monitor.c:
	* src/athena-bookmark-list.c:
	* src/athena-bookmark-parsing.c:
	* src/athena-bookmark-parsing.h:
	* src/athena-link-set-window.c:
	* src/athena-main.c:
	* src/athena-property-browser.c:
	* src/athena-sidebar.c:
	* src/athena-window-menus.c:
	Change all libxml includes to use #include <libxml/*>
	instead of #include <gnome-xml/*>.

2001-09-15  Darin Adler  <darin@bentspoon.com>

	Updated bugzilla.eazel.com references to refer to the
	corresponding bugzilla.gnome.org bug. Also updated my
	email address.

2001-09-14  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-monitor.c:
	(path_is_on_readonly_volume): Move inside #ifdef HAVE_FAM.

2001-09-05  Alex Larsson  <alexl@redhat.com>
	
	Merge some stuff from the redhat-outstanding-patches branch

	* eazel-logos/default.xml:
	* icons/default.xml:
	don't hardcode the title, title info, and
	shadow colors; this prevented the auto-color-selection stuff
	in athena-sidebar-title.c from working properly.
	And the hardcoded values were the same thing the autoselector
	would have chosen anyhow.

	* libathena-private/athena-monitor.c:
	Don't monitor files on read only volumes, they never change, and
	will keep cdroms from being unmounted because fam has open file
	descriptors on them.

	* libathena-private/athena-thumbnails.c:
	Always look for local thumbnails first.

	* libathena-private/athena-volume-monitor.[ch]:
	Add athena_volume_is_read_only() and
	athena_volume_monitor_get_volume_for_path()

	* src/athena-desktop-window.c:
	(set_wmspec_desktop_hint): function to set _NET_WM_WINDOW_TYPE, to
	avoid confusing kwin so badly, and also to go ahead and support
	the Window Manager Hints Of The Future.
	(set_gdk_window_background): only set root background to a pixel
	if we retrieved a pixel property
	(map): Set background of our child widgets in addition to our
	own background. This gets rid of the last of the ugliness during
	Athena startup, I believe.

	* src/file-manager/fm-icon-view.c:
	Don't read GMC position meta data -- it is never right for athena,
	due to different size icons, additional icons, different placement
	policies, so falling back to normal automatic placement works better.
	
2001-09-07  Darin Adler  <darin@bentspoon.com>

	* .cvsignore:
	* data/.cvsignore:
	Ignore .desktop and .directory files generated by the
	xml-18n-merge process.

2001-09-07  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-volume-monitor.c:
	(verify_current_mount_state): Remove unused variable.

2001-09-06  Owen Taylor  <otaylor@redhat.com>

	* libathena-private/athena-volume-monitor.c
	(verify_current_mount_state): 
	Fix bug where the mount list was stored without full mount
	names. Don't call mount_volume_make_name() on volumes that
	might not be on the system any more. Remove code that 
	(unsuccesfully) tried to fix the old volume names up, since
	we now have the correct old volume names.

	Effect of these changes is to fix a race condition where
	'unmount /mnt/cdrom; eject /dev/cdrom' would leave a left-over
	icon on the deskop.

2001-09-05  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-authn-manager.c:
	(construct_password_dialog,
	present_authentication_dialog_blocking, mark_callback_completed,
	authentication_dialog_button_clicked,
	present_authentication_dialog_nonblocking,
	vfs_async_authentication_callback, vfs_authentication_callback,
	athena_authentication_manager_initialize): Converted to use the
	new module callback API. Use async callbacks instead of our own
	mechanism to achieve the same effect.

2001-09-04  Alex Larsson  <alexl@redhat.com>
	
	Merge some stuff from the redhat-outstanding-patches branch

	* libathena-private/athena-file-utilities.[ch]
	(athena_user_main_directory_exists, athena_get_user_main_directory):
	Get rid of these. No more ~/Athena

	* libathena-private/athena-global-preferences.c:
	(default_home_location_callback): Always use your normal homedir
	as the home dir.

	* src/athena-application.c (check_required_directories): Don't
	create ~/Athena.
	(create_starthere_link_callback, athena_application_startup):
	Create a start here icon on the desktop.
	Turn of first time druid (by setting first time flag).
	(athena_application_startup, check_for_kdesktop, look_for_kdesktop_recursive,
	has_wm_state, get_self_typed_prop)
	Don't manage the desktop if kdesktop is running.

	* src/athena-first-time-druid.[ch]:
	Remove ~/Athena handling.
	s/druid_set_first_time_file_flag/athena_set_first_time_file_flag/

	* src/athena-shell-ui.xml:
	* src/athena-window-menus.c:
	Add start here to the go menu. Remove leftovers of the "support" menu item.

	* src/file-manager/fm-directory-view.c:
	Move scripts to ~/.gnome/athena-scripts

	* Makefile.am:
	Add starthere icons

	* data/Makefile.am:
	* data/*.desktop.in:
	* data/*.directory.in:
	Add starthere desktop files.
	
2001-09-04  Alex Larsson  <alexl@redhat.com>
	
	Merge some stuff from the redhat-outstanding-patches branch

	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-dnd.c:
	Change signature of the "handle_uri_list" callback to include the
	drag action.
	
	* src/file-manager/fm-icon-view.c (icon_view_handle_uri_list):
	Handle uri's more gracefully.

	* src/file-manager/fm-desktop-icon-view.c:
	(icon_view_handle_uri_list): Remove.  Now handled in the
	parent class.

2001-09-03  Alex Larsson  <alexl@redhat.com>

	Merge some stuff from the redhat-outstanding-patches branch

	* components/mozilla/athena-mozilla-embed-extensions.cpp
	(mozilla_get_document_title): add this from Galeon
	
	* components/mozilla/athena-mozilla-embed-extensions.cpp
	(mozilla_unicode_to_locale): copy code from Galeon to use Mozilla
	conversion features to convert unicode to locale encoding

	* components/mozilla/athena-mozilla-content-view.c
	(mozilla_title_changed_callback): set title in locale encoding
	
	* libathena-private/athena-directory-metafile.c
	(get_metafile): print error and exit if we fail to open the
	metafile factory; somewhat cleaner than segfaulting.
	
	* libathena-private/athena-file.c:
	Cache user information to avoid many getpwuid calls etc.

	* src/athena-complex-search-bar.c (load_find_them_pixmap_widget):
	Don't leak pixmap and mask.

	* libathena-private/athena-icon-container.c (lay_down_icons_tblr):
	64bit clean. Use sizeof (int *), not sizeof (int). 


	* Makefile.am, athena-help.desktop.in: Add a help icon that uses
	Athena

	* components/help/help-method.c (help_name_to_local_path): 
	handle ghelp:toc to go to the default page gnome-help-browser used
	to go to. kind of a lame hack, but so is this whole vfs module ;-)

2001-09-01  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-authn-manager.h,
	libathena-private/athena-authn-manager.c:
	(construct_password_dialog),
	(present_authentication_dialog_blocking),
	(authentication_dialog_button_clicked),
	(authentication_dialog_closed), (authentication_dialog_destroyed),
	(present_authentication_dialog_nonblocking),
	(run_authentication_dialog_on_main_thread),
	(vfs_authentication_callback),
	(athena_authentication_manager_initialize):

	Replace authn with authentication throughout.

	* src/athena-application.c (finish_startup): Adjust to rename.

	* RENAMING: Suggest renaming athena-authn-manager to
	nautillus-authentication-manager.c

2001-08-31  Darin Adler  <darin@bentspoon.com>

	* components/adapter/Makefile.am:
	* components/image-viewer/Makefile.am:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	Don't link in the libathena-private library for components that
	don't use it.
	* components/sample/Makefile.am: Pretty up the sample a bit.
	Don't link with GConf since we're not using it directly.
	
	* components/shell/shell.oafinfo: Remove this obsolete file.
	
	* components/news/athena-news.c: (draw_rss_items): Fix a leak
	by unref'ing the text layout object instead of just destroying it.
	* src/athena-complex-search-bar.c:
	(search_bar_criterion_type_changed_callback): Fix leak of the
	criterion object by sinking it instead of destroying it. The
	criterion object seems to be a widget that's never used as one.
	It should be a GtkObject instead.
	
	* src/athena-location-bar.c:
	(athena_location_bar_set_location): Simplified code a bit by
	getting rid of special cases for NULL.

2001-09-01  Wang Jian  <lark@linux.net.cn>

	* configure.in: zh_CN (Simplified Chinese) added in ALL_LINGUAS

2001-08-31  Abel Cheung  <maddog@linux.org.hk>

	* configure.in (ALL_LINGUAS): zh_TW.Big5 -> zh_TW

2001-08-30  Darin Adler  <darin@bentspoon.com>

	* src/athena-main.c: (main): Add workaround for gnome-metadata bug
	that was causing a stat and mkdir of NULL. (Yoann helped me find this).

	* src/athena-window-manage-views.c: (update_title): Fix code that
	was freeing the title and then using it afterward. (Yoann helped me
	find this).

	* src/athena-window.c: (refresh_stored_viewers): Fix code so that
	it uses g_list_prepend and g_list_reverse instead of using
	g_list_append, which is a bad habit.

2001-08-30  Darin Adler  <darin@bentspoon.com>

	* src/athena-search-bar-criterion.c:
	(athena_search_bar_criterion_new_from_values): Fix a storage
	leak that Yoann helped me find.

2001-08-28  Darin Adler  <darin@bentspoon.com>

	* components/help/hyperbola-filefmt.c: (get_locale_score),
	(locale_score): Fix unused variable and expression warnings, and
	fix to match Athena coding style.

2001-08-27  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* libathena-private/athena-link.c (athena_link_local_get_image_uri): 
	avoid un-needed string copy.

	* components/help/hyperbola-filefmt.c (locale_score): 
	free return of xmlGetProp on return. Do not use a char pointer 
	to point on the returned value, use an xmlChar pointer.

	* libathena-private/athena-link.c (athena_link_local_get_link_type): 
	Free the value returned by local_get_root_property.

2001-08-27  Seth Nickell  <snickell@stanford.edu>

	reviewed by: Maciej

	* libathena-private/athena-link.c: (local_set_root_property):

	change a const char * to an xmlChar *, since its being assigned
	a newly allocated xml property and promptly freed (and hence isn't 
	being treated as a const at all).

2001-08-27  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* src/athena-switchable-search-bar.c (athena_switchable_search_bar_new): 
	Don't leak a GtkBox.

	* src/athena-complex-search-bar.c (load_find_them_pixmap_widget): 
	Do not check pixmap, check pixbuf. This also fix a leak.

	* libathena-private/athena-link.c (local_set_root_property): 
	Fix a leak of the xmlProp returned data.

2001-08-27  Darin Adler  <darin@bentspoon.com>

	* helper-utilities/error-dialog/Makefile.am:
	Define VERSION for the preprocessor.

2001-08-26  Darin Adler  <darin@bentspoon.com>

	Some makefile cleanup.

	* Makefile.am: Don't build intl since we don't need it the way we
	use gettext.
	* applets/launcher/Makefile.am: Remove redundant -I$(srcdir).
	* applets/preferences-applet/Makefile.am: Remove redundant
	-I$(srcdir).
	* components/adapter/Makefile.am: Remove redundant -I.
	* components/mozilla/Makefile.am: Mark private headers as SOURCES,
	not noinst_HEADERS, as suggested by automake book and manual.
	* components/news/Makefile.am: Remove unneeded
	-I$(top_srcdir)/components/news.
	* configure.in: Don't build intl since we don't need it the way we
	use gettext.
	* libathena-adapter/Makefile.am: Remove redundant -I.
	* libathena-private/Makefile.am: Change -I for new
	cut-n-paste-code scheme. Also mark private headers as SOURCES, not
	noinst_HEADERS, as suggested by automake book and manual.
	* libathena/Makefile.am: Remove redundant -I.
	* src/Makefile.am: Change -I for new cut-n-paste-code scheme. Also
	mark private headers as SOURCES, not noinst_HEADERS, as suggested
	by automake book and manual.
	* src/file-manager/Makefile.am: Mark private headers as SOURCES,
	not noinst_HEADERS, as suggested by automake book and manual.
	
	* check-THANKS.pl: Change Seth's preferred email address.

	* cut-n-paste-code/widgets/e-paned/Makefile.am:
	* cut-n-paste-code/widgets/gimphwrapbox/Makefile.am:
	Don't use -static, since we plan to link 
	Remove unneeded -I directives now that we handle includes
	differently. Also mark private headers as SOURCES, not
	noinst_HEADERS, as suggested by automake book and manual.

	* cut-n-paste-code/widgets/e-paned/e-hpaned.h:
	* cut-n-paste-code/widgets/e-paned/e-vpaned.h:
	* libathena-private/athena-horizontal-splitter.h:
	* src/athena-complex-search-bar.c:
	* src/athena-search-bar-criterion.c:
	Simpler include scheme for cut-n-paste code.

2001-08-24  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-file.c:
	(is_special_desktop_gmc_file), (athena_file_get_name):
	Some new FIXMEs for I/O that's done at bad times -- these could
	contribute to the performance problems that Alan Cox reported.

2001-08-24  Darin Adler  <darin@bentspoon.com>

	* src/file-manager/fm-directory-view.c:
	(set_up_scripts_directory_global): Separate this from the code to
	create the scripts directory.
	(create_scripts_directory): New function.
	(fm_directory_view_initialize): Use set_up_scripts_directory_global.
	(open_scripts_folder_callback): Use create_scripts_directory.

2001-08-24  Darin Adler  <darin@bentspoon.com>

	Added support for nested directories inside the scripts directory,
	starting with a patch by David Emory Watson <dwatson@cs.ucr.edu>.

	* src/file-manager/fm-directory-view.c: (get_scripts_directory):
	Keep the scripts directory URI and string length in a global
	variable.
	(add_scripts_directory): New function, replaces
	connect_script_handlers. Refs the directory, puts it on the
	scripts directory list, and monitors more attributes than before.
	(fm_directory_view_initialize): Use add_scripts_directory instead
	of connect_script_handlers.
	(fm_directory_view_destroy): Use remove_scripts_directory on the
	entire list instead of disconnect_script_handlers.
	(add_submenu): New function.
	(add_script_to_script_menus): Change name, pass in path.
	(add_submenu_to_script_menus): New function.
	(directory_belongs_in_scripts_menu): New function.
	(add_directory_to_scripts_directory_list): New function, high
	level call used to turn a AthenaFile into a AthenaDirectory
	and call add_scripts_directory.
	(update_directory_in_scripts_menu): New function.
	(update_scripts_menu): New function, replaces reset_scripts_menu
	and uses new athena_directory_get_files_list rather than
	athena_directory_call_when_ready.
	(open_scripts_folder_callback): Use new global variable instead
	of calling get_scripts_directory.
	(real_update_menus): Call update_scripts_menu instead of
	schedule_reset_scripts_menu.
	(remove_scripts_directory): New function, replaces
	disconnect_script_handlers. Removes the directory from the scripts
	directory list and unrefs it after disconnecting handlers.

	* libathena-private/athena-directory.h:
	* libathena-private/athena-directory.c: (is_tentative): Moved
	from athena-directory-async.c.
	(athena_directory_get_file_list): New, made from formerly-
	private get_non_tentative_file_list in athena-directory-async.c.
	(athena_directory_list_ref): New.
	(athena_directory_list_unref): New.
	(athena_directory_list_free): New.
	(athena_directory_list_copy): New.
	(compare_by_uri), (compare_by_uri_cover),
	(athena_directory_list_sort_by_uri): New. Sorrts directories by
	URI, parents before children, and children sorted as if by
	athena_file_list_sort_by_name.
	* libathena-private/athena-directory-async.c:
	(athena_directory_monitor_add_internal), (ready_callback_call):
	Use athena_directory_get_file_list instead of
	get_non_tentative_file_list.
	
2001-08-23  Anders Carlsson  <andersca@gnu.org>

	* athena.spec.in: Remove CONTROL_CENTER_REQUIRED since athena
	doesn't require control-center anymore.

 	* configure.in: Remove CONTROL_CENTER_REQUIRED since athena
 	doesn't require control-center anymore.
 
 	* src/athena-window.c (athena_window_constructed): 
 	Set shrink to TRUE when adding the sidebar since it'll look
 	better when the splitter is collapsed.
 	(athena_window_destroy): Free the window title.
 
 	* src/athena-window-manage-views.c (begin_location_change): 
 	Unref the directory when we're done using it.
 
 	* src/athena-sidebar.c (athena_sidebar_destroy): Sink
 	the title tab so it'll destroyed even if it hasn't got a parent.
 
 	* libathena-private/athena-vfs-file.c (vfs_destroy): 
 	Free details struct.
 
 	* libathena-private/athena-vfs-directory.c (vfs_destroy): 
 	Free details struct.
 
 	* libathena-private/athena-mime-actions.c 
 	(athena_mime_get_short_list_applications_for_file): 
 	Free uri_scheme.
 	(make_oaf_query_with_uri_scheme_only): Free explicit_iid_query.
 
 	* libathena-private/athena-metafile.c (destroy): 
 	Unref the private vfs uri, and free the directory uri.
 
 	* libathena-private/athena-file.c (athena_file_get_internal): 
 	Free the string returned by athena_directory_get_name_for_self_as_new_file.
 
 	* libathena-private/athena-file-changes-queue.c 
 	(athena_file_changes_consume_changes): 
 	Free the change struct.
 
 	* libathena-private/athena-directory-async.c 
 	(athena_directory_invalidate_count_and_mime_list): 
 	Unref the file after using it.
 
 	* libathena/athena-idle-queue.c (execute_queued_functions): 
 	Free each list node.
 	(athena_idle_queue_destroy): Likewise.

2001-08-22  Ramiro Estrugo  <ramiro@fateware.com>

	* src/athena-main.c: (main):
	No longer need to check that we want to kill the athena shell
	before initializing preferences.  I used to do this because of the
	way visibilities and defaults were stored using gconf - which led
	to problems about too early initialization for gconf.   It also
	happens that some desktop prefernece checking code was just added
	for a situation when the athena shell is about to be killed.
	That was causing criticals, so thats the end of this now uneeded
	check.

2001-08-22  Christian Meyer  <chrisime@gnome.org>

	* src/athena-window.c: Removes header includes for eazel services.
	(athena_window_constructed): Services part removed.

	* src/athena-window-menus.c: Removed header includes for eazel
	services.
	(services_button_callback): Removed.
	(athena_window_initialize_menus_part_1): Removed eazel services.

	* src/athena-window-toolbars.c: Rmoved header includes for eazel
	services.
	(set_up_toolbar_images): Services removed.

	* src/Makefile.am: Removal of: athena-services.[ch],
	athena-window-services-ui.[ch], athena-servics-ui.xml

	* src/athena-services.[ch], src/athena-window-services-ui.[ch],
	athena-services-ui.xml: Removed, since they aren't necessary anymore.

2001-08-22  Christian Meyer  <chrisime@gnome.org>

	* data/static_bookmarks.xml: Removed Eazel related bookmarks and ad's.
	Added SuSE and Ximian.

2001-08-22  Christian Meyer  <chrisime@gnome.org>

	* src/athena-shell-ui.xml: Removed "Community Support"
	entry from file. Removed "Eazel" from feedback tip.

	* src/athena-shell.c: In function display_caveat():
	s/"http://www.eazel.com/feedback.html"/<athena-list@eazel.com>
	s/Eazel does not/We do not
	Removed eazel-install stuff in function save_window_states.

2001-08-21  Darin Adler  <darin@bentspoon.com>

	* docs/athena-io.txt: Add a new document.

2001-08-19  Maciej Stachowiak  <mjs@noisehavoc.org>

	* components/music/athena-music-view.c: (get_cell_text),
	(athena_music_view_initialize), (get_song_text),
	(music_view_set_selected_song_title), (selection_callback),
	(value_changed_callback), (compare_song_numbers),
	(compare_song_titles), (compare_song_artists),
	(compare_song_times), (compare_song_bitrates), (sort_list),
	(click_column_callback), (list_move_vertical), (list_moveto),
	(list_reveal_row), (play_current_file), (go_to_next_track),
	(athena_music_view_update), (athena_music_view_load_uri):
	Ported to use EelList instead of GtkCList. This looks better and
	allows for future drag and drop support.

2001-08-18  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-directory-background.c:
	(athena_file_background_receive_root_window_changes),
	(set_root_pixmap): Trap errors when doing the XKillClient
	call inside set_root_pixmap. I don't know why it would
	fail, exactly, but we have reports from the field that it
	is failing.

2001-08-16  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-volume-monitor.c:
	(athena_volume_monitor_get_mount_name_for_display):
	Corrected a backwards g_return_if_fail!

2001-08-15  Darin Adler  <darin@bentspoon.com>

	A pass at cleaning up the volume monitor. Made all the details of
	AthenaVolume private.

	* libathena-private/filesystem-attributes.xml: Changed the
	"description" string to be named "default_volume_name" and also
	marked it to be localized.
	
	* libathena-private/athena-file-utilities.h:
	* libathena-private/athena-file-utilities.c:
	(athena_get_data_file_path):
	Added a new utility function to locate a file that's either in the
	user's directory or in the Athena datadir.
	
	* src/athena-property-browser.c: (read_browser_xml): Use
	athena_get_data_file_path.

	* libathena-private/athena-trash-directory.c:
	(get_trash_volume):
	* libathena-private/athena-trash-monitor.c:
	(add_one_volume_trash):
	* src/file-manager/fm-desktop-icon-view.c: (volume_in_black_list),
	(create_unique_volume_name), (create_mount_link),
	(volume_unmounted_callback), (update_disks_menu):
	* src/athena-application.c: (volume_mounted_callback),
	(volume_unmounted_callback):
	* src/athena-bookmark-list.c:
	(athena_bookmark_list_get_file_path):
	Use only calls from the AthenaVolume public API -- no getting at
	the structure directly. Also fix callers that were using
	athena_volume_monitor_get_volume_mount_uri to correctly
	understand that they get the mount path, not the mount URI.
	
	* libathena-private/athena-volume-monitor.h:
	* libathena-private/athena-volume-monitor.c:
	(load_file_system_table): Fix storage leaks. Use the new
	athena_get_data_file_path. Translate the default volume names as
	they are loaded. Check for duplicate entries while loading the
	table. Don't bother checking the name of the root node, since
	there are plenty of other things about the file that we don't
	check and there's no reason we particularly need to check that.
	Fix some storage leaks. Free the doc, since I'm not seeing a
	"athena --quit" segfault.	
	(athena_volume_monitor_initialize): Only initialize stuff that
	g_new0 won't set up for us.
	(athena_volume_is_removable): Rename so it's a call on
	AthenaVolume, not the AthenaVolumeMonitor.
	(volume_is_removable): Fix logic so we don't have to have so many
	different calls to fclose.
	(athena_volume_get_name): Rename so it's a call on
	AthenaVolume, not the AthenaVolumeMonitor.
	(modify_volume_name_for_display): Don't bother supplying a name if
	passed NULL, since that won't ever be helpful the way this is used.
	(athena_volume_get_target_uri): Rename so it's a call on
	AthenaVolume, not the AthenaVolumeMonitor.
	(athena_volume_should_integrate_trash): Rename so it's a call on
	AthenaVolume, not the AthenaVolumeMonitor. Get the information
	from the file system type, so we don't have to copy it into each
	AthenaVolume object.
	(athena_volume_get_mount_path): Rename so it's a call on
	AthenaVolume, and don't call it a URI since it's really a path.
	(athena_volume_get_device_type): New call.
	(make_volume_name_from_path): Get the default from the file system
	type rather than passing it in.
	(free_mount_list): Get rid of some dumb extra code.
	(copy_volume), (athena_volume_free): Update for smaller set of
	fields.
	(create_volume), (finish_creating_volume),
	(finish_creating_volume_and_prepend): Restructure so we don't need
	to keep so much stuff around in the AthenaVolume object.

	* src/athena-first-time-druid.c:
	(druid_set_first_time_file_flag): Some tiny tweaking.
	
2001-08-15  Maciej Stachowiak  <mjs@noisehavoc.org>

	* components/music/Makefile.am: Revert accidental commit of not
	quite done change.

2001-08-15  Darin Adler  <darin@bentspoon.com>

	* components/image-viewer/athena-image-view.c:
	(load_image_from_stream): Use a 64K buffer size instead of a 4K
	buffer size.

2001-08-13  Maciej Stachowiak  <mjs@noisehavoc.org>

	* components/music/athena-music-view.c:
	(athena_music_view_initialize), (get_song_text), (sort_list),
	(click_column_callback), (ensure_uri_is_image),
	(athena_music_view_update): A bunch of code cleanup; stop using
	hidden columns in the list view and try to pave the way for better
	model/view separation.

	* src/athena-main.c (main): set DISPLAY variable to
	canonicalized version; this is needed to make
 
2001-08-14  Seth Nickell  <snickell@stanford.edu>

	Load filesystems from an XML file rather than hardcoding
	the various attributes and behaviors. Some properties, such
	as for CDDA and NFS, are still hardcoded because they require
	actual code. This also makes it easier to add new filesystems.
	
	* libathena-private/filesystem-attributes.xml

	Filesystem description file.
	
	* libathena-private/Makefile.am:

	Add filesystem-attribute.xml to the build.

	* libathena-private/athena-volume-monitor.c: 

	(mount_volume_prepend_filesystem):

	Don't try to detect filesystem strings and associate them
	with an enumeration type...nix the enumeration altogether
	since its not compatible with dynamically loading the
	filesystems.
		
	(get_xml_path), (load_filesystem_attributes_table)

	Functions for reading in filesystem-attribute.xml and
	loading the various filesystems into a hashtable.
	
	(athena_volume_monitor_initialize)

	Read in the filesystem attributes table.
	
	(get_removable_volumes), (mount_volume_deactivate), 
	(get_mount_list), (get_current_mount_list),
	(verify_current_mount_state)

	Take a file attributes hashtable, or pass one to a
	subfunction.
	
	(athena_volume_monitor_get_target_uri),

	CDDA is the only system we need to deal with in an unusual
	way. Take out a long list and just check for CDDA.
	
	(athena_volume_monitor_should_integrate_trash)

	Use information read from the file rather than hardcoding
	a list of filesystems that can use trash (should be the
	same for now).
	
	(make_volume_name_from_path), (mount_volume_make_name)

	Get name out of the filesystem table rather than hardcoding.

	(mount_volume_iso9660_add)

	We were deciding if a device was *really* a CDROM by 
	doing an ioctl on it to determine the drive status. This
	is a good check...except that on systems using DevFS
	devices can be user mountable without being user readable
	by default. Also, on my system it fails if there's no
	disk in the drive itself.

	(mount_volume_auto_add)

	Continue setting the device if its a floppy drive (eventually
	this should probably be cleaned out too), but don't set the
	filesystem type since we don't use the enum anymore.
	
	(mount_volume_cdda_add)

	Set as a CDDA device, but not a CDDA volume (since we don't
	have hardcoded volume types anymore).

	(mount_volume_nfs_add)

	Don't set NFS type since the enum was blown away.

	(create_volume)

	Accept a filesystem table and set attributes read from
	filesystem-attributes.xml if a volume's filesystem is found
	in the table. Perhaps eventually we should just assign a
	reference to the volume entry, but this was simpler for
	now since some functions modify things like the description.
	
	(copy_volume)

	Deal with copying the new attributes.

	* libathena-private/athena-volume-monitor.h:

	Nix the filesystem enumeration. Change ATHENA_DEVICE_CD_ROM
	to ATHENA_DEVICE_CDROM
	
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link),
	(update_disks_menu):

	Deal with rename of ATHENA_DEVICE_CD_ROM
	
	* src/athena-application.c: (volume_mounted_callback):

	Deal with rename of ATHENA_DEVICE_CD_ROM
	
	* AUTHORS:

	Update E-mail address.
	
	* configure.in:

	Make "FAM not found" warning a little more serious and
	informative. We particularly want to encourage distributors
	to enable FAM support.

2001-08-11  Seth Nickell  <snickell@stanford.edu>

	Trying to make athena volume monitor work more
	reliably. First step is to make the codebase more
	maintainable so I can start tracking down bugs in
	the volume monitor more easily.
	(I get complaints about this from friends, family, and
	coworkers all the time, so there must be some/one bugs).
	
	* libathena-private/athena-volume-monitor.h:
	* libathena-private/athena-volume-monitor.c:
	(athena_volume_monitor_initialize_class),
	(athena_volume_monitor_get_target_uri),
	(athena_volume_monitor_should_integrate_trash),
	(mount_volume_make_name), (mount_volume_deactivate),
	(mount_volume_generic_add), (mount_volume_prepend_filesystem):

	Remove mount_volume_*_add for filesystems that do
	effectively the same thing. This added a large amount of
	clutter to a module that already has a lot of similar
	functions. Add a generic function that accepts the filesystem
	type, and change calls to use this.

	Fix signal in initialize_class to be "athena_volume_unmount_failed"
	rather than "athena_volume_unmoun_failed" (nobody was assuming
	the broken behavior eithe, I checked, maybe this will fix something).

	Renamed ATHENA_VOLUME_REISER to ATHENA_VOLUME_REISERFS
	to maintain the naming convention the other filesystems use.

	Changed "unsdos" to "umsdos" everywhere. I don't think a unsdos
	filesystem exists, after web searches, and umsdos *is* one of
	the basic Linux filesystems. I suspect somebody misread a filesystem
	name browsing the kernel compilation menu or somesuch.

	Removed redundant (and erroneous) check for "ufs" type filesystems
	(the check was already listed in the if then statement above).
	
2001-08-07  Darin Adler  <darin@bentspoon.com>

	* components/mozilla/mozilla-events.cpp:
	* components/mozilla/athena-mozilla-embed-extensions.cpp:
	Add an include of nsIContentView.h in the hopes that this
	will make it work with newer Mozilla sources.

2001-08-06  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-thumbnails.c:
	(pixel_matches_value): Simplify logic.
	(pixbuf_is_framed): Do size and format reality checks on pixbuf
	before reading the pixels.
	(athena_thumbnail_load_framed_image): Handle case where the
	pixbuf loading failed. Handle case where there's no frame. Handle
	case where the frame offsets in the theme data is improperly
	formatted.

2001-08-02  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena/athena-view-standard-main.c:
	(athena_view_standard_main_multi): Get display name in a better
	way suggested by Havoc Pennington.

2001-08-01  Mike Fleming  <mfleming@eazel.com>

	Added gnome-vfs authentication dialog support.
	Currently works with HTTP basic and proxy authentication.

	A bug causes the dialog to appear more than once in quick succession
	in some cases.

	Separate processes (eg sidebar components) that need to access
	a protected URL will also pop open their own individual dialogs
	at this point 

	There's also no integration with Mozilla at this point, so
	Mozilla too will prompt separately.

	This code works against gnome-vfs head and the gnome-vfs-1-0
	branch, as well as the soon-to-be-released gnome-vfs 1.0.2

	* libathena-private/Makefile.am:
	* libathena-private/athena-authn-manager.c:
	(construct_password_dialog), (present_authn_dialog_blocking),
	(mark_callback_completed), (authn_dialog_button_clicked),
	(authn_dialog_closed), (authn_dialog_destroyed),
	(present_authn_dialog_nonblocking),
	(run_authn_dialog_on_main_thread), (vfs_authn_callback),
	(athena_authn_manager_initialize):
	* libathena-private/athena-authn-manager.h:
	* src/athena-application.c: (finish_startup):

2001-08-01  Darin Adler  <darin@bentspoon.com>

	* THANKS: More people to thank.

2001-07-31  Yanko Kaneti  <yaneti@declera.com>

	* components/help/topleveldocs.xml: remove the extra bg_BG(.cp1251)
	references, part of the gnome cvs wide move from bg_BG to bg

2001-07-27  Darin Adler  <darin@bentspoon.com>

	Fixed bug 8438 (changing desktop between $HOME and .gnome-desktop
	breaks desktop DnD from other apps).

	* src/file-manager/fm-desktop-icon-view.c:
	(desktop_directory_changed_callback): New function to update the
	local variable when the desktop directory changes.
	(fm_desktop_icon_view_initialize): Set up the callback rather than
	just setting up the global variable.

	* configure.in: Fixed code to set up compile-time options. It
	was putting the options into VFS_CFLAGS.

2001-07-25  Maciej Stachowiak  <mjs@noisehavoc.org>

	Fixed bug 6776 (In-place file rename allowed (but doesn't occur)
	at 25% zoom level):

	* src/file-manager/fm-icon-view.c: (fm_icon_view_set_zoom_level):
	Update menus since the sensitivity of "Rename" now depends on the
	zoom level.
	(fm_icon_view_update_menus): Disable the "Rename" item when at
	smallest zoom level, since renaming won't happen anyway.
	
2001-07-24  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-directory-background.c:
	(background_is_desktop): Remove eel_ prefix from name.
	(background_get_desktop_background_window): Remove eel_ prefix
	from name.

	* libathena-private/athena-icon-factory.c:
	(should_display_image_file_as_itself),
	(athena_icon_factory_get_icon_for_file), (load_icon_from_path):
	* libathena-private/athena-thumbnails.h:
	* libathena-private/athena-thumbnails.c: (make_thumbnail_uri),
	(athena_thumbnail_has_invalid_thumbnail),
	(athena_get_thumbnail_uri),
	(athena_update_thumbnail_file_renamed),
	(athena_remove_thumbnail_for_file), (check_for_thumbnails),
	(make_thumbnails), (athena_thumbnail_load_framed_image):
	Remove anti-aliased parameter from most functions, since the
	thumbnails are now the same either way.

	* THANKS:
	* check-THANKS.pl:
	Some more THANKS updates.

	* RPMs-README: No need for this any more.

2001-07-24  Jens Finke <jens@gnome.org>
	
	* components/news/news_channels.xml: Updated KDE rdf location.

2001-07-23  Andy Hertzfeld  <andy@differnet.com>

	changed thumbnailing to not draw the frame into the
	thumbnail images themselves anymore; instead, draw it at the time
	they're loaded. This makes anti-aliased thumbnail variants no
	longer necessary, so they're no longer used.  There's a cheap test so
	old thumbnails aren't framed twice.
	
	* libathena-private/athena-thumbnails.c: (make_thumbnail_uri),
	(make_thumbnails), (pixel_matches_value), (pixbuf_is_framed),
	(athena_thumbnail_load_framed_image):
	don't frame the thumbnails at creation time; instead, provide
	a routine to frame them at load time if necessary.
	
	* libathena-private/athena-thumbnails.h:
	added athena_thumbnail_load_framed_image
	
	* libathena-private/athena-icon-factory-private.h:
	added athena_icon_factory_get_thumbnail_frame
	
	* libathena-private/athena-icon-factory.c:
	(load_thumbnail_frames), (athena_icon_factory_initialize),
	(athena_icon_factory_destroy), (icon_theme_changed_callback),
	(load_icon_from_path), (load_named_icon), (load_specific_icon),
	(athena_icon_factory_get_thumbnail_frame):
	made it call athena_thumbnail_load_framed_image to load
	thumbnails; made the icon factory load the thumbnail frames so it
	doesn't have to be done repeatedly; changed how the aa flag is
	passed around a little, although this could be cleaned up more now.
	
2001-07-23 Benedikt Roth  <Benedikt.Roth@gmx.net>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Fix the tip for the "Delete from Trash" item in the right-click menu

2001-07-22  Maciej Stachowiak  <mjs@noisehavoc.org>

	* src/file-manager/fm-desktop-icon-view.c
	(update_trash_link_and_delete_copies): Update the icon even when
	newly creating it, in case the trash state changed while the
	desktop was off. This fixes bug 7956 (improper Trash icon state
	after desktop toggle )

2001-07-22  Maciej Stachowiak  <mjs@noisehavoc.org>

	* libathena-private/athena-directory-async.c
	(athena_file_invalidate_count_and_mime_list): Avoid a ref
	underflow. This was causing a crash noticed by Anders
	Carlsson. I'm so embarassed!

	* src/file-manager/fm-desktop-icon-view.c
	(fm_desktop_icon_view_destroy, delayed_init): Make sure to
	disconnect signals on destroy to avoid a possible crash when
	turning the desktop off and back on, and not using fam.

2001-07-22  Maciej Stachowiak  <mjs@eazel.com>

	* components/music/athena-music-view.c (click_column_callback):
	Fix bug 5242 (Selection not kept on-screen after column resort) by
	scrolling the selected item into view on a resort if it's not in
	view already.

2001-07-22  Maciej Stachowiak  <mjs@eazel.com>

	* components/music/athena-music-view.c: (get_song_text): Fix the
	remainer of bug 3769 (Music View window redraws upon clicking a
	different song) by making songs with no title show up with "-" for
	the title (I have quite a collection of broken mp3s).

2001-07-22  Maciej Stachowiak  <mjs@eazel.com>

	* components/music/athena-music-view.c:
	(read_id_tag): Fix bug 5175 (Music View displays year fields of
	'0'.) by filtering out years that are all zeros or all spaces.
	(filter_out_unset_year): New helper function. 

2001-07-22  Dan Mueth  <d-mueth@uchicago.edu>

	Updating doc build stuff so it works properly on RH7.1 and
	any other newer distributions which have the updated docbook
	tools where db2html doesn't work with GNOME's modified DTD.
	For these systems, we use jw instead of db2html.

	* configure.in:
	* help/sgmldocs.make:

2001-07-22  Maciej Stachowiak  <mjs@eazel.com>

	* components/music/athena-music-view.c: (string_non_empty),
	(get_song_text), (play_current_file): Add artist to the info
	displayed about the currently selected song. Also, fix a bug where
	a song entry does not get scrolled into view when the player
	switches to it sometimes. This happened because the song list
	would resize depending on whether or not there was an album
	name. Now if there is no album name (or artist) `-' is displayed
	in the second line.

2001-07-21  Darin Adler  <darin@bentspoon.com>

	* README: Update cvs tags for gnome-vfs, librsvg, eel.

2001-07-21  Anders Carlsson  <andersca@gnome.org>

	* components/help/Makefile.am:
	* components/sample/Makefile.am:
	* libathena-adapter/Makefile.am:
	* libathena-private/Makefile.am:
	* libathena/Makefile.am:
	Remove multiple references to $(ATHENA_PRIVATE_LIBS) since 
	having multiple references makes linking very slow with libtool 1.4.

2001-07-20  Maciej Stachowiak  <mjs@eazel.com>

	Fixed bugzilla.eazel.com bug 7015 (Item count not updated when
	copying an empty folder to another).
	
	* libathena-private/athena-directory-async.c:
	(athena_file_invalidate_count_and_mime_list): New function to
	invalidate a directory's item count and item mime list given it's
	corresponding AthenaFile object.
	(athena_directory_invalidate_count_and_mime_list): Reimplemented
	in terms of the above.

	* libathena-private/athena-file-private.h:
	Prototype the new function.

	* libathena-private/athena-directory.c:
	(athena_directory_notify_files_added): If the AthenaDirectory
	for a directory into which files are being moved is not being
	monitored but the AthenaFile is, make sure to invalidate it's
	item count and mime list. This is the corner case that bug 7015
	was tickling.

2001-07-20  Andy Hertzfeld  <andy@differnet.com>

	fixed problem that the reset property was not localizable, since
	it used an image that contained text.  Fixed, by removing the
	text from the image and compositing it on the fly, from a localizable
	string.
	
	* data/patterns/reset.png:
	new version of reset tile without text.
	
	* libathena-private/athena-customization-data.c:
	(athena_customization_data_get_next_element_for_display),
	(add_reset_text), (athena_customization_make_pattern_chit):
	composite the reset text on the fly when necessary
	
	* libathena-private/athena-customization-data.h:
	added a parameter to make_pattern_chit to tell it to draw
	the reset text when necessary
	
	* src/athena-property-browser.c: (make_drag_image),
	(make_color_drag_image), (add_reset_property):
	set the reset parameter properly when calling make_pattern_chit.
	
2001-07-20  Andy Hertzfeld  <andy@differnet.com>

	removed the bad hack of attributing special meaning to the
	"reset.png" filename; instead, use a newly defined drop type of
	"x-special/gnome-reset-background".
	
	* libathena-private/athena-icon-dnd.c:
	(drag_data_received_callback),
	(athena_icon_container_get_drop_action), (drag_drop_callback):
	make the icon view handle the new drop type.
	
	* src/athena-property-browser.c: (element_clicked_callback):
	make the property browser emit the new drop type for the reset property
	
	* src/athena-sidebar.c: (reset_background_callback),
	(athena_sidebar_drag_data_received):
	make the sidebar handle the new drop type.
	
2001-07-19  Darin Adler  <darin@bentspoon.com>

	More fixes like the one Alex just did.

	* libathena-private/athena-icon-container.c: (destroy):
	Move the call to unschedule_keyboard_icon_reveal into
	athena_icon_container_clear.
	(athena_icon_container_clear): Cancel both of the pending
	icon reveals, since all the icons are gone.
	(icon_destroy): Cancel a pending icon to reveal if the
	icon being destroyed is that icon.

	* libathena-private/athena-icon-private.h: Remove some
	unused fields.

2001-07-19  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-icon-container.c (athena_icon_container_clear):
	Clear details->drop_target. This should fix a hard to trigger DnD segfault.

2001-07-16  Darin Adler  <darin@bentspoon.com>

	* THANKS:
	* check-THANKS.pl:
	Updated thanks for recent changes in ChangeLog.

	* libathena-private/athena-file-operations.c:
	(build_error_string):
	* libathena-private/athena-file.c: (get_description):
	Updated the people to tell about various warnings.

2001-07-15  Anders Carlsson  <andersca@codefactory.se>

	* src/file-manager/fm-icon-view.c
	(icon_container_preview_callback): Check that the file mime type
	is correct (that the files is a music file) before calling
	athena_sound_can_play_sound () since that function launches esd
	which we don't want to do unless we have a music file.

2001-07-15  Andy Hertzfeld  <andy@differnet.com>

	allowed components to specify their sidebar icons and text info
	through the property bag interface.  Removed the special cases from
	the sidebar and icon factory, and added the relevant properties to the
	hardware and mozilla views.
	
	made the modification date in the sidebar adapt itself gracefully
	to the available space like the list view does, by calling
	athena_file_fit_modified_data_as_string.
	
	added an "uptime" display to the hardware view.
	
	* components/hardware/athena-hardware-view.c:
	(get_bonobo_properties), (set_bonobo_properties),
	(athena_hardware_view_initialize),
	(athena_hardware_view_destroy), (update_uptime_text),
	(setup_overview_form), (athena_hardware_view_load_uri),
	(make_summary_string):
	
	added a property bag interface for the icon_name and summary_info properties.
	added a field to display the update, and periodically updated it.
	
	* components/mozilla/athena-mozilla-content-view.c:
	(get_bonobo_properties), (set_bonobo_properties),
	(athena_mozilla_content_view_initialize),
	(athena_mozilla_content_view_destroy):
	
	added a property bag inteface for the icon_name and summary_info properties
	made it handle the "man:" protocol with a custom icon
	made it use the file icon for local files.

	* src/athena-sidebar-title.c: (get_property_from_component),
	(update_icon), (measure_width_callback), (update_more_info),
	(athena_sidebar_title_size_allocate),
	(sidebar_title_create_more_info_label):
	
	made it ask the components for custom icons and info text (through the
	property bags) and use them if available.
	
	made it call athena_file_filt modified_data_as_string for an optimal
	modification date format, and made it reconsider when the sidebar size
	changes.
		
	* libathena-private/athena-icon-factory.c:
	(get_icon_name_for_regular_file):
	removed special cases, since they're handled by the components now
	
	* components/news/athena-news.c: (do_destroy), (make_news_view):
	fixed leak where it wasn't releasing the property bag
		 
2001-07-14 John Fleck <jfleck@inkstain.net>

	reviewed by Laszlo Kovacs <laszlo.kovacs@sun.com>
	* components/help/converters/gnome-db2html3/gnome-db2html3.c
	change logic for testing whether a file is sgml or xml
	
2001-07-12  Alex Larsson  <alexl@redhat.com>

	* libathena-private/athena-monitor.c:
	Use a GIOChannel instead of gdk_input_add. This fixes the bug
	where when the fam connection dies it did gdk_input_remove (fd)
	instead of gdk_input_remove (tag)

2001-07-11  Alex Larsson  <alexl@redhat.com>
	
	* libathena-private/athena-volume-monitor.[ch]:
	Add support for ext3.

2001-07-11  Darin Adler  <darin@bentspoon.com>

	* components/help/converters/gnome-info2html2/html.c:
	(write_menu_entry_html):
	* components/help/converters/gnome-man2html2/gnome-man2html.c:
	(add_links), (scan_escape), (scan_format), (scan_table),
	(scan_expression), (scan_request), (scan_troff),
	(scan_troff_mandoc), (main):
	* src/athena-first-time-druid.c: (load_netscape_proxy_settings):
	* src/athena-property-browser.c: (emblem_keyword_valid):
	Fix code that was using <ctype.h> functions and passing char's
	rather than int's (using the standard "cast to unsigned char"
	trick).
	
	* libathena-private/athena-file.c:
	(athena_file_denies_access_permission),
	(athena_file_can_set_permissions), (athena_file_set_owner),
	(athena_file_get_group_name), (athena_file_can_set_group),
	(athena_file_get_settable_group_names),
	(athena_file_set_group):
	Get rid of the assumption that GnomeVFSFileInfo field types match
	the platform-specific uid_t and gid_t. This involves doing a few
	more type casts.
	(athena_extract_top_left_text): Fix a use of isprint on a char
	rather than an int.
	
	* libathena-private/athena-volume-monitor.c: Added ifdefs so
	this file can compile for Solaris without warnings.
	
	* test/test.c: (test_window_set_title_with_pid): Don't assume that
	getpid() returns an int. Instead cast it to unsigned long for
	printing.

2001-07-11  Alex Larsson  <alexl@redhat.com>

	* acconfig.h:
	Add HAVE_LIBFAM

	* configure.in:
	Check for libfam, not only header.

	* libathena-private/Makefile.am:
	Link to libfam

	* libathena-private/athena-monitor.c:
	Use normal fam library calls.

2001-07-11  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* components/text/athena-text-view-ui.xml:
	* components/text/athena-text-view.c:
	Created a 'Text view' menu to hold the 'Fonts' menu
	and services items

	* components/text/services/google.xml
	* components/text/services/webster.xml: 
	Removed references to http://services.eazel.com
	
2001-07-10  Jonathan Blandford  <jrb@redhat.com>

	* src/athena-desktop-window.c (realize): remove flash when
	starting up.

2001-07-10  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-sound.c: (kill_sound_if_necessary),
	(athena_sound_kill_sound): Change the kill function to not set
	the GConf value to 0 if it's already 0.  This may help with a
	minor performance problem Yoann found in the directory view.

2001-07-09  Darin Adler  <darin@bentspoon.com>

	* cut-n-paste-code/widgets/gimphwrapbox/gtkwrapbox.c:
	(gtk_wrap_box_expose): Fix a cast so that 64-bit systems
	won't warn. This is similar to the e-paned.c fix I did
	already.

2001-07-08  John Gotts  <jgotts@linuxsavvy.com>

	* data/static_bookmarks.xml:
	Made the bookmarks work again.

2001-07-07  Seth Nickell  <snickell@stanford.edu>

	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-thumbnails.c:
	* src/athena-window-menus.c:

	Add includes that were inadevertently pulled in
	by the older kinder GnomeVFS include heirarchy but
	aren't anymore (people forgot to include some headers 
	because the compiler never complained).
	
2001-07-05  Darin Adler  <darin@bentspoon.com>

	* AUTHORS:
	* THANKS:
	* check-THANKS.pl:
	Some credits updates based on recent ChangeLog entries.

2001-07-05  Darin Adler  <darin@bentspoon.com>

	* configure.in: Bump version to 1.0.4.1

	* cut-n-paste-code/widgets/e-paned/e-paned.c: (e_paned_expose):
	Fix type cast that was causing Ben trouble compiling on Solaris.
	
	Take a cut at removing the problem where opening a new window
	causes all the old windows to act as if all items were re-added.

	* libathena-private/athena-directory.h:
	* libathena-private/athena-directory.c:
	(athena_directory_file_monitor_add),
	(athena_self_check_directory):
	* libathena-private/athena-directory-async.c:
	(athena_directory_monitor_add_internal):
	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-merged-directory.c:
	(build_merged_callback_list), (merged_file_monitor_add),
	(forward_files_added_cover), (forward_files_changed_cover),
	(monitor_add_directory), (merged_add_real_directory):
	* libathena-private/athena-trash-file.c: (real_monitor_add):
	* libathena-private/athena-trash-monitor.c:
	(athena_trash_monitor_initialize):
	* libathena-private/athena-vfs-directory.c:
	(vfs_file_monitor_add):
	* libathena-private/athena-vfs-file.c: (vfs_file_monitor_add):
	Change monitor_add to take a parameter for a callback function, and
	call that instead of sending out a files_added message when someone
	starts monitoring files.
	
	* components/tree/athena-tree-model.c:
	(athena_tree_model_node_begin_monitoring_no_connect),
	(athena_tree_model_node_begin_monitoring),
	(athena_tree_model_directory_files_changed_callback):
	* src/file-manager/fm-directory-view.c: (connect_script_handlers),
	(finish_loading):
	Pass in a callback function to monitor_add, and don't hook up the
	files_added and files_changed signals until after the monitor is
	added.
	
=== Athena 1.0.4 ===
	
2001-07-05  Darin Adler  <darin@bentspoon.com>

	Preparation for the 1.0.4 release.

	* configure.in: Bump version to 1.0.4.
	* NEWS: Update for recent changes.

2001-07-05  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* src/athena-sidebar.c: (athena_sidebar_initialize),
	(athena_sidebar_destroy), (athena_sidebar_theme_changed),
	(athena_sidebar_confirm_trash_changed):
	Fix bug #8133 where changing of the
	ATHENA_PREFERENCES_CONFIRM_TRASH value led to inconsistent menu
	descriptions by adding a eel_preferences callback.

2001-07-05  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_display_selection_info):
	Made the statusbar messages when selecting several folders clearer
	and fixed i18n problems

2001-07-03  Benedikt Roth  <Benedikt.Roth@gmx.net>

	* src/file-manager/fm-directory-view.c: (real_update_menus):
	Fix bug #6202, "'Show Trash' menu item should be greyed 
	when viewing trash"

2001-07-03  Zbigniew Chyla  <cyba@gnome.pl>

	* libathena/athena-view-standard-main.c (struct CallbackData, 
	delayed_quit_timeout_callback, object_destroyed, make_object,
	athena_view_standard_main_multi):
	Changed behaviour of view processes, now every process using
	athena_view_standard_main/athena_view_standard_main_multi will be
	destroyed after 30 seconds of inactivity, not immediately.

2001-06-28  Havoc Pennington  <hp@redhat.com>

	* src/athena-first-time-druid.c (druid_finished): Don't create a
	desktop link to Eazel services or open Eazel home page.

2001-07-02  Cody Russell  <bratsche@gnome.org>

	* libathena-private/athena-volume-monitor.[ch]: Added
	ATHENA_VOLUME_PROC.
	athena_volume_monitor_should_integrate_trash() now returns
	FALSE for this volume type.  This solves the broken trash can
	on XFS (and probably other non-ext2) filesystems.

2001-07-01  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* libathena-private/athena-global-preferences.c: added
	no-c-format comments to make gettext not complain

2001-06-29  Ettore Perazzoli  <ettore@ximian.com>

	* libathena-private/athena-directory-metafile.c
	(get_metafile): Avoid initializing the exception and getting the
	URI if we already have a CORBA object, as they are not needed in
	that case.

2001-06-29  Darin Adler  <darin@bentspoon.com>

	* src/run-athena: Get rid of all the "smarts" in this
	script and made it just call Athena. The things it was
	doing (disable bug buddy, work around MOZILLA_FIVE_HOME
	for Debian users, call athena-verify-rpm.sh) are all
	obsolete now.

2001-06-29  Darin Adler  <darin@bentspoon.com>

	* configure.in: Fix minor problem in DB2HTML3 part that was
	causing trouble for some people.

2001-06-26  Darin Adler  <darin@bentspoon.com>

	* src/athena-window-manage-views.c: (begin_location_change):
	Don't force a reload if file monitoring will work properly
	for the location.

	* components/throbber/Makefile.am:
	* icons/sierra/Makefile.am:
	* icons/tahoe/Makefile.am:
	Remove use of empty SUBDIRS. At least some versions of automake
	have trouble with that.

	* src/file-manager/fm-directory-view.c: Formatting tweak.

2001-06-25  Ramiro Estrugo  <ramiro@fateware.com>

	Patch from Miguel RodrÃ­guez PÃ©rez  <migras@atlas.uvigo.es>
 
 	* libathena-private/athena-thumbnails.c (obfuscate_password): 
 	New function to look for a password in una uri and change it
 	for 6 asterisks.
 	(make_thumbnail_uri): Call obfuscate_passwd before generating the
 	final uri.
 	This prevents the password to be saved in cleartext in 
 	~/.athena/thumbnails if the user accesses some remote server.

2001-06-25  Ramiro Estrugo  <ramiro@fateware.com>

	* configure.in:
	Patch from David Sainty <dsainty@redhat.com>.

	Tidy up the mozilla-component option. Now both
	--enable-mozilla-component and --disable-mozilla component do as
	they should.
	
2001-06-18  Ramiro Estrugo  <ramiro@fateware.com>

	* athena.spec.in:
	Put the idl files in the main package, not the devel package
	because the perl corba bindings can use the .idl files at run
	time.  Thanks to jacob berkman <jacob@ximian.com> for pointing
	this out.
	
2001-06-17  Maciej Stachowiak  <mjs@noisehavoc.org>

	* components/tree/athena-tree-view.c (select_current_location):
	Fix bug 6801 (FIXME ... strcmp should be athena_uris_match).

2001-06-15  Fatih Demir <kabalak@gtranslator.org>

	* components/help/converters/gnome-db2html3/*: Added cvsignore
		files where needed.

2001-06-14  Marius Andreiana  <mandreiana@yahoo.com>

	* configure.in: Added ro (Romanian) to ALL_LINGUAS

2001-06-11 John Fleck <jfleck@inkstain.net>

	* reviewed to Laszlo Kovacs <laszlo.kovacs@sun.com>
	* components/help/converters/gnome/db2html3/
	docbook/Makefile.am to include file VERSION in DocBook
	stylesheet

2001-06-11 John Fleck <jfleck@inkstain.net>

	* components/help/converters/gnome-db2html3/gnome-customization
	gnome-customization.xsl
	updating path to including docbook stylesheets

2001-06-11  Darin Adler  <darin@bentspoon.com>

	* configure.in: Updated version to 1.0.3.2 for the 1.0.4
	candidate build.

	* icons/gnome/Makefile.am: Added missing backslash character.
	Without it, many icons didn't get installed.

	* src/athena-application.c: (need_to_show_first_time_druid):
	Fix some code that was building a URL by sticking a file://
	onto the front of a file name. I just changed it to use the
	path directly and do a plain unlink instead of gnome_vfs_unlink.

	* src/athena-profiler.c:
	(athena_profiler_bonobo_ui_report_callback):
	Use gnome_vfs_get_uri_from_local_path instead of just sticking
	a file:// on the front of a path name.

2001-06-10 John Fleck <jfleck@inkstain.net>

	* components/help/converters/gnome-db2html3/Makefile.am:
	fix segfault caused by the fact that we were linking to both
	libxml1 and 2

2001-06-09  Dan Mueth  <d-mueth@uchicago.edu>

	Updated Athena User Manual for 1.0.4.

	* help/athena-user-manual/C/athena-user-manual.sgml:

2001-06-09  Dan Mueth  <d-mueth@uchicago.edu>

	Fixing bug#8327.  (Thanks to John Fleck.)

	* help/athena-user-manual/es/athena-user-manual.sgml:

2001-06-08  Laszlo Kovacs <laszlo.kovacs@sun.com>

        reviewed by Seth Nickell <snickell@stanford.edu>
        patch containing the build environment for gnome-db2html3,
        the new stylesheet based XML->HTML converter, it all can be activated
        only by a manual change in configure.in, this patch is not active
        by default

        * components/help/converters/gnome-db2html3/docbook/common/Makefile.am:
        * components/help/converters/gnome-db2html3/docbook/html/Makefile.am:
        * components/help/converters/gnome-db2html3/docbook/lib/Makefile.am:
        * components/help/converters/gnome-db2html3/docbook/Makefile.am:
        * components/help/converters/gnome-db2html3/Makefile.am:
        * components/help/converters/gnome-db2html3/gnome-customization/Makefile.am:
        added

        * components/help/converters/gnome-db2html3/docbook/gnome-db2html3.c:
        * components/help/Makefile.am:
        conditional build flag added
        * components/help/converters/Makefile.am: gnome-db2html3 added
        * components/help/help-method.c:
        gnome-db2html3 called depending on build flag
        * configure.in: conditional dependencies for gnome-db2html3 added

2001-06-08  Dan Mueth  <dan@eazel.com>

	Updating Release Notes to contain new Mozilla version
	compatibility information based on Ramiro's updates to the README.

	* help/athena-release-notes/C/athena-release-notes.sgml:

2001-06-08  Ramiro Estrugo  <ramiro@fateware.com>

	* README:
	Update Mozilla for latest Mozilla 0.9.1 release which is the
	recommended one from now onwards.
	
2001-06-08  Andy Hertzfeld  <andy@differnet.com>

	* icons/gnome/Makefile.am:
	The "i-regular.xml" file that is needed to make
	embedded text work properly was missing, so I added it.
	
	* src/athena-sidebar-tabs.c: (draw_or_layout_all_tabs):
	fixed bug where the names of the rightmost tabs cound get cut
	off by tweaking the layout code.
	
2001-06-08  Dan Mueth  <d-mueth@uchicago.edu>

	Updating Athena Release Notes for 1.0.4.  Note that we
	probably still need to modify the Mozilla compatibility 
	section.

	* help/athena-release-notes/C/athena-release-notes.sgml:

2001-06-07  Dan Mueth  <dan@eazel.com>

	Updating Athena Quick Reference for 1.0.4 release.

	* help/athena-quick-reference/C/index.html:

2001-06-06  Darin Adler  <darin@bentspoon.com>

	* NEWS: Made a list of changes since 1.0.3 to get ready for
	the 1.0.4 release.

2001-06-06  Darin Adler  <darin@bentspoon.com>

	* components/music/athena-music-view.c: (play_current_file):
	* libathena-private/athena-icon-factory.c: (get_cache_time):
	* src/athena-window-menus.c: (get_static_bookmarks_file_path):
	Oops, a few of my changes were still in the editor. More places
	where we should follow links.

2001-06-06  Darin Adler  <darin@bentspoon.com>

	Frederic Devernay <Frederic.Devernay@sophia.inria.fr>
	pointed out that the icon factory wasn't following links.
	I found similar problems elsewhere.

	* components/music/athena-music-view.c:
	(athena_music_view_update):
	* libathena-private/athena-customization-data.c:
	(athena_customization_data_new),
	(athena_customization_data_get_next_element_for_display):
	* libathena-private/athena-icon-factory.c:
	(path_represents_svg_image):
	* libathena-private/athena-metafile.c:
	(metafile_read_check_for_directory):
	* libathena-private/athena-thumbnails.c:
	(first_file_more_recent):
	* src/athena-link-set-window.c: (get_link_set_names),
	(athena_link_set_configure_window):
	* src/athena-property-browser.c: (ensure_uri_is_image):
	Updated all places where we were using the gnome-vfs file info
	calls and not following links.

2001-06-03  Seth Nickell  <snickell@stanford.edu>

	Added Ben FrantzDale's <bfrantzdale@hmc.edu> revisions
	of the classic GNOME theme as well as his slightly revised
	classic icons for mime types (where they replace something
	that wasn't modified since GMC). Basically these add
	drop shadows and some higher resolution versions, as well
	as an attractive sidebar. I've made some alterations to his
	theme to make it sit better with our original and added 
	the build stuff.

	* configure.in:
	Update configure.in to add a Makefile for the new sidebar tabs
	directory in the GNOME theme.
	
	* icons/gnome-application-encapsulated_postscript.png:
	* icons/gnome-application-pdf-192.png:
	* icons/gnome-application-pdf.png:
	* icons/gnome-application-pgp-192.png:
	* icons/gnome-application-pgp.png:
	* icons/gnome-application-postscript-192.png:
	* icons/gnome-application-postscript-72.png:
	* icons/gnome-application-postscript-96.png:
	* icons/gnome-application-postscript.png:
	* icons/gnome-application-x-c-header.png:
	* icons/gnome-application-x-c-source.png:
	* icons/gnome-application-x-cc-source.png:
	* icons/gnome-application-x-e-theme.png:
	* icons/gnome-application-x-generic-spreadsheet.png:
	* icons/gnome-application-x-gnome-app-info.png:
	* icons/gnome-application-x-java-source.png:
	* icons/gnome-application-x-kde-app-info.png:
	* icons/gnome-application-x-php.png:
	* icons/gnome-application-x-reject.png:
	* icons/gnome-application-x-scheme-source.png:
	* icons/gnome-application-x-sql.png:
	* icons/gnome-audio-basic.png:
	* icons/gnome-audio-midi.png:
	* icons/gnome-audio-ulaw.png:
	* icons/gnome-audio-x-aiff.png:
	* icons/gnome-audio-x-mod-192.png:
	* icons/gnome-audio-x-mod.png:
	* icons/gnome-audio-x-mp3-192.png:
	* icons/gnome-audio-x-mp3.png:
	* icons/gnome-audio-x-ogg-192.png:
	* icons/gnome-audio-x-ogg.png:
	* icons/gnome-audio-x-pn-realaudio.png:
	* icons/gnome-audio-x-real-192.png:
	* icons/gnome-audio-x-s3m-192.png:
	* icons/gnome-audio-x-s3m.png:
	* icons/gnome-audio-x-stm-192.png:
	* icons/gnome-audio-x-stm.png:
	* icons/gnome-audio-x-voc.png:
	* icons/gnome-audio-x-wav.png:
	* icons/gnome-audio-x-xi-192.png:
	* icons/gnome-audio-x-xi.png:
	* icons/gnome-audio-x-xm.png:
	* icons/gnome-compressed-192.png:
	* icons/gnome-compressed.png:
	* icons/gnome-core.png:
	* icons/gnome-emacs-192.png:
	* icons/gnome-font-afm.png:
	* icons/gnome-font-ttf.png:
	* icons/gnome-font-x-pcf.png:
	* icons/gnome-http-url.png:
	* icons/gnome-image-bmp.png:
	* icons/gnome-image-generic.png:
	* icons/gnome-image-gif.png:
	* icons/gnome-image-ief.png:
	* icons/gnome-image-jpeg.png:
	* icons/gnome-image-pbm.png:
	* icons/gnome-image-pgm.png:
	* icons/gnome-image-png.png:
	* icons/gnome-image-pnm.png:
	* icons/gnome-image-ppm.png:
	* icons/gnome-image-psd.png:
	* icons/gnome-image-ras.png:
	* icons/gnome-image-rgb.png:
	* icons/gnome-image-tga.png:
	* icons/gnome-image-tiff.png:
	* icons/gnome-image-x-xfig.png:
	* icons/gnome-image-xbm.png:
	* icons/gnome-image-xcf.png:
	* icons/gnome-image-xpm.png:
	* icons/gnome-image-xwd.png:
	* icons/gnome-library.png:
	* icons/gnome-manpage.png:
	* icons/gnome-objectfile.png:
	* icons/gnome-pack-deb.png:
	* icons/gnome-pack-rpm.png:
	* icons/gnome-package.png:
	* icons/gnome-tex-192.png:
	* icons/gnome-tex.png:
	* icons/gnome-text-html-192.png:
	* icons/gnome-text-html.png:
	* icons/gnome-text-x-authors.png:
	* icons/gnome-text-x-copying.png:
	* icons/gnome-text-x-credits.png:
	* icons/gnome-text-x-install.png:
	* icons/gnome-text-x-makefile-192.png:
	* icons/gnome-text-x-makefile.png:
	* icons/gnome-text-x-readme.png:
	* icons/gnome-textfile.png:
	* icons/gnome-video-mpeg.png:
	* icons/gnome-video-quicktime.png:
	* icons/gnome-video-x-msvideo.png:
	* icons/gnome-word-192.png:

	Ben's revisions of classic mime type icons that
	we didn't modify (basically he added alpha blended
	drop shadows), and some high res versions.

	* icons/gnome/Makefile.am:
	* icons/gnome/application-x-e-cfg.png:
	* icons/gnome/audio-192.png:
	* icons/gnome/emblem-nowrite-72.png:
	* icons/gnome/emblem-nowrite-96.png:
	* icons/gnome/emblem-nowrite.png:
	* icons/gnome/gnome.xml:
	* icons/gnome/i-core.png:
	* icons/gnome/i-dirclosed.png:
	* icons/gnome/i-directory-12-aa.png:
	* icons/gnome/i-directory-192-aa.png:
	* icons/gnome/i-directory-20-aa.png:
	* icons/gnome/i-directory-20.png:
	* icons/gnome/i-directory-24-aa.png:
	* icons/gnome/i-directory-36-aa.png:
	* icons/gnome/i-directory-72-aa.png:
	* icons/gnome/i-directory-96-aa.png:
	* icons/gnome/i-directory-aa.png:
	* icons/gnome/i-directory-accept-12-aa.png:
	* icons/gnome/i-directory-accept-12.png:
	* icons/gnome/i-directory-accept-192-aa.png:
	* icons/gnome/i-directory-accept-192.png:
	* icons/gnome/i-directory-accept-20-aa.png:
	* icons/gnome/i-directory-accept-20.png:
	* icons/gnome/i-directory-accept-24-aa.png:
	* icons/gnome/i-directory-accept-24.png:
	* icons/gnome/i-directory-accept-36-aa.png:
	* icons/gnome/i-directory-accept-36.png:
	* icons/gnome/i-directory-accept-72-aa.png:
	* icons/gnome/i-directory-accept-72.png:
	* icons/gnome/i-directory-accept-96-aa.png:
	* icons/gnome/i-directory-accept-96.png:
	* icons/gnome/i-directory-accept-aa.png:
	* icons/gnome/i-directory-accept.png:
	* icons/gnome/i-executable.png:
	* icons/gnome/i-music-192.png:
	* icons/gnome/i-music.png:
	* icons/gnome/i-nfs.png:
	* icons/gnome/i-regular-12.png:
	* icons/gnome/i-regular-192.png:
	* icons/gnome/i-regular-24.png:
	* icons/gnome/i-regular-36.png:
	* icons/gnome/i-regular-72.png:
	* icons/gnome/i-regular-96-aa.png:
	* icons/gnome/i-regular.png:
	* icons/gnome/i-regular.xml:
	* icons/gnome/i-stalled.png:
	* icons/gnome/linux-penguin.png:
	* icons/gnome/rpm-directory.png:
	* icons/gnome/sidebar_tab_pieces/.cvsignore:
	* icons/gnome/sidebar_tab_pieces/Makefile.am:
	* icons/gnome/sidebar_tab_pieces/fill-active-prelight.png:
	* icons/gnome/sidebar_tab_pieces/fill-active.png:
	* icons/gnome/sidebar_tab_pieces/fill-empty-space.png:
	* icons/gnome/sidebar_tab_pieces/fill-prelight.png:
	* icons/gnome/sidebar_tab_pieces/fill.png:
	* icons/gnome/sidebar_tab_pieces/left-bumper-active-prelight.png:
	* icons/gnome/sidebar_tab_pieces/left-bumper-active.png:
	* icons/gnome/sidebar_tab_pieces/left-bumper-prelight.png:
	* icons/gnome/sidebar_tab_pieces/left-bumper.png:
	* icons/gnome/sidebar_tab_pieces/middle-normal-normal.png:
	* icons/gnome/sidebar_tab_pieces/middle-normal-prelight.png:
	* icons/gnome/sidebar_tab_pieces/middle-prelight-normal.png:
	* icons/gnome/sidebar_tab_pieces/right-bumper-prelight.png:
	* icons/gnome/sidebar_tab_pieces/right-bumper.png:
	* icons/gnome/sidebar_tab_pieces/right-empty-space.png:
	* icons/gnome/sidebar_tab_pieces/right-top-active-prelight.png:
	* icons/gnome/sidebar_tab_pieces/right-top-active.png:
	* icons/gnome/sidebar_tab_pieces/right-top-prelight.png:
	* icons/gnome/sidebar_tab_pieces/right-top.png:
	* icons/gnome/theme_preview.png:
	* icons/gnome/throbber/001.png:
	* icons/gnome/throbber/002.png:
	* icons/gnome/throbber/003.png:
	* icons/gnome/throbber/004.png:
	* icons/gnome/throbber/005.png:
	* icons/gnome/throbber/006.png:
	* icons/gnome/throbber/007.png:
	* icons/gnome/throbber/008.png:
	* icons/gnome/throbber/009.png:
	* icons/gnome/throbber/010.png:
	* icons/gnome/throbber/011.png:
	* icons/gnome/throbber/012.png:
	* icons/gnome/throbber/013.png:
	* icons/gnome/throbber/014.png:
	* icons/gnome/throbber/015.png:
	* icons/gnome/throbber/Makefile.am:
	* icons/gnome/throbber/rest.png:
	* icons/gnome/trash-empty-192.png:
	* icons/gnome/trash-empty-accept-192.png:
	* icons/gnome/trash-empty-accept.png:
	* icons/gnome/trash-empty.png:
	* icons/gnome/trash-full-192.png:
	* icons/gnome/trash-full.png:
	* icons/i-cdrom-192.png:
	* icons/i-cdrom.png:
	* icons/i-chardev.png:
	* icons/i-floppy.png:
	* icons/i-printer.png:
	* icons/i-sock.png:
	* icons/i-zip.png:

	Revision of the classic GNOME theme.

2001-06-02  Darin Adler  <darin@bentspoon.com>

	* src/athena-window-manage-views.c: (update_for_new_location),
	(handle_view_failure), (athena_window_set_sidebar_panels):
	Check the sidebar for NULL in a few more places.

2001-06-02  Darin Adler  <darin@bentspoon.com>

	* libathena-private/athena-volume-monitor.c:
	(modify_volume_name_for_display),
	(athena_volume_monitor_get_target_uri),
	(mount_volume_make_cdrom_name), (make_volume_name_from_path),
	(mount_volume_make_name), (mount_volume_activate),
	(mount_volume_deactivate), (get_current_mount_list),
	(update_modifed_volume_name), (verify_current_mount_state),
	(athena_volume_monitor_set_volume_name),
	(get_iso9660_volume_name), (load_additional_mount_list_info):
	Change volume name logic to be simpler. Also fixed some assert
	problems with the last check-in.

2001-06-01  Darin Adler  <darin@bentspoon.com>

	Started with patch by Caleb "J." Land <bokonon@rochester.rr.com>
	and added XFS support so that trash will work on XFS volumes.

	* libathena-private/athena-volume-monitor.h:
	* libathena-private/athena-volume-monitor.c:
	(athena_volume_monitor_should_integrate_trash),
	(make_volume_name_from_path), (mount_volume_get_name),
	(do_volume_activate), (mount_volume_activate),
	(verify_current_mount_state), (mount_volume_ext2_add),
	(mount_volume_udf_add), (mount_volume_vfat_add),
	(mount_volume_msdos_add), (mount_volume_affs_add),
	(mount_volume_auto_add), (mount_volume_fat_add),
	(mount_volume_hpfs_add), (mount_volume_hsfs_add),
	(mount_volume_minix_add), (mount_volume_proc_add),
	(mount_volume_reiserfs_add), (mount_volume_ufs_add),
	(mount_volume_smb_add), (mount_volume_unsdos_add),
	(mount_volume_xenix_add), (mount_volume_xfs_add),
	(mount_volume_xiafs_add), (copy_volume),
	(load_additional_mount_list_info),
	(mount_volume_prepend_filesystem):
	Added an XFS case and crunched code a bit.
	
	Rolled in patch by Johan Dahlin <zilch.am@home.se> to install the
	public IDL files in $(datadir)/idl so that non-C programmers can
	use them.

	* libathena/Makefile.am: Install the IDL files.

	Also added them to the .spec file.

	* athena.spec.in: Install the IDL files as part of athena-devel.

2001-06-01  Darin Adler  <darin@bentspoon.com>

	Rolled in patch by Juan Pablo Mendoza <pablo_juan@yahoo.com> to
	make the file dialog show up in the right position instead of
	showing up in one place and then moving right away.

	* libathena-private/athena-file-operations.c:
	(create_transfer_dialog): Move gtk_show_widget until after the
	center_dialog_over_window call.

2001-06-01  Darin Adler  <darin@bentspoon.com>

	Fixed mistakes in my MIME type change from yesterday.

	* libathena-private/athena-mime-actions.c:
	(build_joined_string): Correct variable so we build the string
	from all the elements in the list, not just the first element
	repeated over and over again.
	(athena_mime_get_short_list_components_for_file): Remove stray
	single-quote character so we build a legal query. The queries were
	all failing due to this typo.

	* src/athena-window.c: Spacing tweak.
	* NEWS: Remove lack-of-tinderbox lament.

2001-06-01  Darin Adler  <darin@bentspoon.com>

	Integrated revised version of patch by zilch.am@home.se to fix
	problems typing characters with values > 127 on some systems.

	* libathena-private/athena-icon-container.c: (match_best_name):
	Cast the result of tolower to a (char) before comparing it with
	another char.

2001-05-31  Darin Adler  <darin@bentspoon.com>

	Integrated patch by limval@yahoo.com to make typing and clicking
	faster by sending fewer "selection_changed" signals. This may fix
	bug 5010.

	* libathena-private/athena-entry.c: (athena_entry_key_press),
	(athena_entry_motion_notify): Only send the "selection_changed"
	signal when a selection was there to change.

2001-05-31  Darin Adler  <darin@bentspoon.com>

	* src/athena-window-manage-views.c: (update_title): Missed a
	place that required a non-NULL sidebar. Thanks to Miguel
	Rodriguez Perez <migras@atlas.uvigo.es> for pointing it out.

2001-05-31  Darin Adler  <darin@bentspoon.com>

	Fixed a bug where the MIME type components short list query was
	not sorted. This could result in the wrong default component being
	selected, and may be the problem that caused some users to get the
	text component instead of the Mozilla web page component.

	* libathena-private/athena-mime-actions.c:
	(athena_mime_get_default_component_for_file_internal): Update
	since athena_do_component_query no longer takes an &ev.
	(athena_mime_get_short_list_applications_for_file): Remove
	unused ev variable. Fix problem where the user's added items would
	be added in reverse order.
	(build_joined_string): New helper function.
	(athena_mime_get_short_list_components_for_file): Update since
	athena_do_component_query no longer takes an &ev. Pass in a
	sorting order to the query so we don't lose the order of the short
	list.
	(athena_mime_actions_file_needs_full_file_attributes): Update
	since athena_do_component_query no longer takes an &ev.
	(athena_mime_get_all_components_for_file): Update since
	athena_do_component_query no longer takes an &ev.
	(mime_get_all_components_for_uri_scheme): Update since
	athena_do_component_query no longer takes an &ev.
	(athena_do_component_query): Update to use its own &ev instead of
	take one passed in. None of the callers were looking at the &ev.
	
	* libathena-private/athena-directory-async.c: Bumped the
	number of items per call back up. Now that we've done other bug
	fixes, this makes things faster overall, not slower, although it
	does make the time until the first icon shows up a bit longer.
	
	* src/athena-sidebar-title.c: (athena_sidebar_title_set_file):
	Don't monitor the directory item count. If the main view monitors
	it we'll display it. If the main view doesn't, we'll show the old
	"last known" value or nothing. It's better to do less I/O and
	sometimes be wrong than do more I/O to always be right in this
	case.
	
	* src/athena-window.c: (add_sidebar_panel_callback),
	(athena_window_initialize), (athena_window_constructed),
	(athena_window_add_sidebar_panel),
	(update_sidebar_panels_from_preferences),
	(athena_window_hide_sidebar), (athena_window_show_sidebar),
	(athena_window_sidebar_showing):
	Simplify sidebar logic. Among other things, we no longer create an
	invisible sidebar for the desktop.

	* libathena-private/athena-icon-canvas-item.c:
	(in_single_click_mode): Use "(void)", not "()".
	
	* libathena-private/athena-icon-container.c:
	(athena_icon_container_did_not_drag): Coding style tweak.

2001-05-29 John Fleck <jfleck@inkstain.net>

	Initial checkin of gnome-db2html3, the new DocBook xml->html converter

	* components/help/converters/gnome-db2html3/
	  gnome-db2html3.c, README, AUTHORS
	* components/help/converters/gnome-db2html3/gnome-customization,
	  which contains GNOME customization stylesheet
	* components/help/converters/gnome-db2html3/docbook/, which
	  contains Norman Walsh's xsl stylesheet extravaganza

	(the actual checkin was done the 29th, but there was a lock on the
	ChangeLog, which is why this is being checked in a day later)
	
2001-05-23  Darin Adler  <darin@eazel.com>

	* libathena-private/athena-global-preferences.c: Added a
	default for the ADD_TO_SESSION preference. This should fix the
	problem where some people don't get any session
	management. Miguel's patch removed the code to set this preference
	in the first time druid so we need to default to TRUE.
	
	* libathena-private/athena-file.c:
	(athena_file_get_string_attribute_with_default): Used return
	statements to simplify the logic a bit.

2001-05-22  John Harper  <jsh@pixelslut.com>

	Fallout from fixing bug 8220 (Having Ctrl as default "modifier
	key used for default WM shortcuts" breaks everything...):

	* libathena-private/athena-icon-container.c
	(keyboard_space, keyboard_move_to): changed to use Control
	modifier instead of Alt

2001-05-22  Darin Adler  <darin@eazel.com>

	Fixed problem compiling with new gettext:

	* hack-macros/gnome.m4: Add BUILD_INCLUDED_LIBINTL for
	compatibility with the new gettext.
	
	Fixed a problem with the throbber detecting that its X window is
	gone. Based on suggestions from Owen Taylor.
	
	* libathena/athena-bonobo-workarounds.h:
	* libathena/athena-bonobo-workarounds.c:
	(destroy_later_callback), (destroyed_before_timeout_callback),
	(athena_bonobo_object_force_destroy_later): Changed to "destroy
	later" instead of "destroy at idle". This makes us less likely to
	experience race conditions.

	* src/athena-window.c: (athena_window_initialize_class),
	(athena_window_unrealize), (athena_window_destroy): Moved the
	throbber destruction to unrealize so we destroy the throbber
	before we destroy its X window.

	Starting with patch by Anders Carlsson <andersca@gnu.org>, added
	both prelighting and tracking to the throbber, also making it take
	action on release, not press.

	* components/throbber/athena-throbber.c:
	(athena_throbber_initialize_class): Add handlers for enter,
	leave, and release.
	(athena_throbber_initialize): Set flags so we get enter and
	leave events.
	(select_throbber_image): Ref the image that's returned.
	(draw_throbber_image): Make the image be prelit if the mouse is
	over the throbber but it wasn't clicked, and darkened if the mouse
	is over the throbber and it was clicked.
	(athena_throbber_enter_notify_event): Set flag and request
	redraw to prelight.
	(athena_throbber_leave_notify_event): Set flag and request
	redraw to un-prelight.
	(athena_throbber_button_press_event): Set flag to indicate we
	hit the button in the throbber. Also, respond only to left clicks.
	(athena_throbber_button_release_event): Look at flag set in
	press event. Do the work here now instead of at press time since
	we are more like a real button.

	Rolled in change by Miguel RodrÃ­guez PÃ©rez <migrax@terra.es> to
	fix volume mounting problems:

	* configure.in: Check for hasmntopt.
	* libathena-private/athena-volume-monitor.c:
	(get_removable_volumes): Fix typo (HAVE_MNTTENT_H ->
	HAVE_MNTENT_H).
	
	Integrated patch by Miguel RodrÃ­guez PÃ©rez <migrax@terra.es> to
	make Athena not try to preview MPEG lists:

	* src/file-manager/fm-icon-view.c:
	(icon_container_preview_callback): Made audio/x-mpegurl another
	exception to the list of audio types we can preview.

	Rolled in change by Dennis Smit <synap@area101.penguin.nl>:
 
	* THANKS: added more translators that were missing from the
	THANKS file (names from all the .po files in ./po).

	Other updates to THANKS:

	* THANKS: Added Jon K Hellan.
 	* check-THANKS.pl: Fixed logic so you can be credited as both an
	author and translator.

	Other changes:

	* src/file-manager/fm-list-view.c: (get_default_zoom_level): Fix
	typo (storaged -> storage).
	
	* src/athena-shell-ui.xml:
	* src/file-manager/athena-directory-view-ui.xml:
	Fixed keybindings entries to use the correct tags as described by
	ui-xml.txt.

2001-05-21  Andy Hertzfeld  <andy@eazel.com>

	made the news panel flash less by defering async updates with a timer
	task, so ones that fire close together are coalesced.
	
	* components/news/athena-news.c: (do_destroy),
	(rss_logo_callback), (update_timeout_callback),
	(queue_update_size_and_redraw), (rss_read_done_callback),
	(make_remove_widgets), (make_news_view):

2001-05-18  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	Code reviewed by Darin Adler <darin@bentspoon.com>.
	
	* src/file-manager/fm-directory-view.c (display_pending_idle_callback): 
	return TRUE if real_display_pending_files() return FALSE which mean 
	that there is other icon to be drawn (the idle won't be removed until
	the idle callback return FALSE).

	return FALSE if real_display_pending_files() return TRUE, which mean
	all files were drawn.

2001-05-18  Jon K Hellan  <hellan@acm.org>

	Code reviewed by Darin Adler <darin@bentspoon.com>

	* components/music/mpg123.h (struct id3v1tag_t): Fix track info.
	(struct id3tag_t): Fix track info. Not tested for v2, but big
	enough for what can be represented in v1.1.

	* components/music/mpg123.c (mpg123_id3v1_to_id3v2): Fix track
	info. Track in id3v1.1 is an 8 bit integer, not a string.
	Track is still unimplemented for id3v2. I did not fix it, as I
	don't have examples to test with.

2001-05-18  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	Code reviewed by Darin Adler <darin@bentspoon.com>,
	also, thanks for the help solving this issue.
	
	* src/file-manager/fm-directory-view.c (g_list_split_off_first_n): 
	moved from fm-list-view.c.
	(real_display_pending_files): move the fm-list-view.c function to
	display pending file, but remove the clist sorting code.
	(FILES_TO_PROCESS_AT_ONCE): new constant, appear to be a better name
	than LIST_VIEW_DISPLAY_PENDING_FILES_GROUP_SIZE.

	* src/file-manager/fm-list-view.c (LIST_VIEW_DISPLAY_PENDING_FILES_GROUP_SIZE): 
	removed this constant.
	(fm_list_view_display_pending_files): just sort the list by the clist criteria
	then call the parent function to display_pending_file.
	(g_list_split_off_first_n): removed.

	This should fix the issue where UI response (icon drawing) would take
	a long time because the directory loaded was cached by the kernel.
	We now draw with a fixed maximum number of files at once.
	
	The list view code was already doing that, so the code was just moved,
	and adaptated for use in directory view, so list view has the same 
	behavior as before without any code being duplicated.

2001-05-17  Darin Adler  <darin@eazel.com>

	Yoann and I did some more debugging and analysis and we stumbled
	over a bug that was responsible for some big slowdowns.

	* libathena-private/athena-directory-async.c:
	(activation_uri_start): Fixed bug that was causing activation URI
	reads to work strangely.
	
	* src/file-manager/athena-directory-view-ui.xml:
	* src/file-manager/fm-directory-view.c: (delete_callback),
	(bonobo_control_activate_callback), (fm_directory_view_destroy):
	* src/athena-shell-ui.xml:
	* src/athena-window.c: (athena_window_initialize_class),
	(athena_window_realize):
	Rip out keybinding hack and use Bonobo's (undocumented as far as I
	can tell) keybinding machinery instead.
	
	* libathena-private/athena-metafile.c: (schedule_next_read):
	Use (void), not ().
	
2001-05-17  Darin Adler  <darin@eazel.com>

	* configure.in:
	* athena.spec.in:
	Don't require ammonite any more in the default Athena RPM. I
	left the ability to compile ammonite support in for now. That can
	be removed at any time, but it doesn't hurt anybody.

	* libathena-private/athena-global-preferences.c: Change default
	web search to use google instead of the defunct Eazel search page.

2001-05-16  Darin Adler  <darin@eazel.com>

	* configure.in: Up version to 1.0.3.1 so we don't confuse cvs
	builds with the release.
	
	* libathena-private/athena-file.c:
	(athena_file_fit_date_as_string): Fix i18n problem by calling
	_() on strings before using.
	
	* src/file-manager/fm-directory-view.c: (key_press_event_callback),
	(bonobo_control_activate_callback), (fm_directory_view_destroy):
	* src/athena-window.c: (athena_window_key_press_event):
	Change key press event callbacks to run only after the parent
	class. This makes keys go to the focused text field first, so
	hitting delete while editing a file name doesn't delete the file.

2001-05-16  Darin Adler  <darin@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_destroy), (activate_callback),
	(cancel_activate_callback), (fm_directory_view_activate_file),
	Got rid of monitor_file_for_activation, another example of this
	same loose end as last time.
	
	* src/athena-window-manage-views.c:
	(set_to_pending_location_and_selection): There was an overzealous
	assert in here. Looked into why it fired, and fixed it up.

2001-05-16  Darin Adler  <darin@eazel.com>

	* src/athena-window-private.h:
	* src/athena-window-manage-views.c: (free_location_change),
	(begin_location_change):
	Finished up a loose end from when I made the change to
	determine_initial_view to not get full attributes. This leftover
	code was causing an extra directory load.

	* THANKS: Added Yoann.
	
2001-05-15  Andy Hertzfeld  <andy@eazel.com>

	* src/athena-sidebar.c: (notify_current_sidebar_view),
	(athena_sidebar_activate_panel),
	(athena_sidebar_deactivate_panel):
	at Darin's urging, coalesced the open and closed properties into a
	single one with a value.

	* components/news/athena-news.c: (get_bonobo_properties),
	(set_bonobo_properties), (athena_news_load_location):
	made it maintain the closed state and made load_location only redraw
	when opened.
	
2001-05-13  Yoann Vandoorselaere  <yoann@mandrakesoft.com>

	* libathena-private/athena-directory-async.c (DIRECTORY_LOAD_ITEMS_PER_CALLBACK): 
	Change from 32 item by callback to 10.
	This is much better for UI response time and will prevent having
	too much latency time when loading the directory.

	* src/file-manager/fm-directory-view.c (DISPLAY_TIMEOUT_INTERVAL_MSECS): 
	Change from 700 ms to 100 ms, this is much better for the user
	as he won't see any latency time before drawing start.

	Theses are the better experienced setting for now.
	
2001-05-13  Maciej Stachowiak  <mjs@eazel.com>

	Integrated patch from Yoann Vandoorselaere
	<yoann@mandrakesoft.com>. Yoann found that double-clicking on on a
	directory would wait for all the files to be read in before
	displaying anything, while typing the path in the location bar
	would should proper progressive loading. This checkin solves that
	problem.
	
	* src/file-manager/fm-directory-view.c:
	(fm_directory_view_activate_file): Only call_when_ready on the
	minimum attributes, not full. All the checks in activate_callback
	only depend on the minimum attributes, and do not need the extra
	directory item mime types attribute.

2001-05-11  Darin Adler  <darin@eazel.com>

	reviewed by: Yoann Vandoorselaere <yoann@mandrakesoft.com>

	Yoann Vandoorselaere <yoann@mandrakesoft.com> discovered that the
	code to load a directory was accidentally waiting for all the
	files to be read in before displaying anything. This fixes the two
	problems that caused that, but there are remaining loose ends
	(it's not entirely clear why View As Music is still showing
	properly in the View menu).

	* libathena-private/athena-directory-private.h:
	* libathena-private/athena-directory-async.c:
	(athena_directory_call_when_ready_internal): Take a parameter to
	say whether to wait for all the files in the file list, instead of
	deducing it from other parameters.
	
	* libathena-private/athena-directory.h:
	* libathena-private/athena-directory.c:
	(athena_directory_call_when_ready): Take a parameter to say
	whether to wait for all the files in the file list, instead of
	deducing it from other parameters.
	(athena_self_check_directory): Pass TRUE so we wait for the file
	list.
	
	* libathena-private/athena-merged-directory.c:
	(merged_call_when_ready): Pass through the new boolean.
	* libathena-private/athena-trash-file.c:
	(real_call_when_ready): Pass FALSE since there is no file list for
	a single file.
	* libathena-private/athena-vfs-directory.c:
	(vfs_call_when_ready): Pass through the new boolean.
	* libathena-private/athena-vfs-file.c:
	(vfs_file_call_when_ready): Pass FALSE since there is no file list
	for a single file.
	
	* src/athena-applicable-views.c:
	(athena_determine_initial_view),
	(athena_determine_initial_view_cancel): Removed the code to get
	full file attributes after getting the minimum required if
	athena_mime_actions_file_needs_full_file_attributes return
	TRUE. We want to make the choice fast, and it's OK if we choose
	poorly as a result. The question is whether this will cause any
	real end-user problems.

	* src/file-manager/fm-directory-view.c:
	(call_when_ready_on_scripts_directory): Pass TRUE so we read the
	entire scripts directory.
	(load_directory): Pass FALSE so we don't wait for all the files to
	be loaded before starting to display them. This is the core of the
	fix.
	
	* components/tree/athena-tree-change-queue.c:
	(athena_tree_change_queue_enqueue): A place where we can use
	g_slist_prepend instead of g_slist_append.
	* src/athena-complex-search-bar.c:
	(athena_complex_search_bar_initialize): A place where we can use
	g_slist_prepend instead of g_slist_append.
	
2001-05-10  John Sullivan  <sullivan@eazel.com>

	Made the thumbnail mechanism respect the "PUBLIC_METADATA"
	preference, so if you change "Make Folder Appearance Details
	Public" to Never (in Speed Tradeoffs at Advanced user level),
	thumbnails will always be created in ~/.athena/thumbnails,
	instead of in a .thumbnails subdirectory in each directory.
	Thanks to Michael Rothwell <rothwell@holly-springs.nc.us> for
	the idea and a first pass at the code.

	* libathena-private/athena-thumbnails.h:
	* libathena-private/athena-thumbnails.c: 
	(uri_is_local): 
	New convenience function, calls gnome_vfs_uri_is_local
	(prefer_global_thumbnails_location): New function that
	checks preference value.
	(make_thumbnail_uri): Call preference-checking function.
	(first_file_more_recent),
	(athena_thumbnail_has_invalid_thumbnail),
	(athena_get_thumbnail_uri),
	(athena_update_thumbnail_file_renamed_one),
	(athena_update_thumbnail_file_renamed),
	(athena_remove_thumbnail_for_file_one),
	(athena_remove_thumbnail_for_file): Use uri_is_local () to
	reduce duplicated code; change some parameter names for clarity.

2001-05-10  Darin Adler  <darin@eazel.com>

	* components/help/hyperbola-filefmt.c:
	(prepend_help_dir_if_exists), (fmt_help_populate_tree):
	* components/mozilla/athena-mozilla-content-view.c:
	(mozilla_view_create_charset_encoding_submenu),
	(mozilla_new_window_callback),
	(should_uri_navigate_bypass_athena),
	(should_mozilla_load_uri_directly):
	* components/music/fileinfo.c: (mpg123_file_info_box):
	* components/music/athena-music-view.c:
	(athena_music_view_update):
	* components/notes/athena-notes.c: (notes_load_metainfo):
	* components/throbber/athena-throbber.c:
	(athena_throbber_load_images):
	* components/tree/athena-tree-node.c:
	(athena_tree_node_set_parent):
	* libathena-private/athena-directory-background.c:
	(athena_connect_background_to_file_metadata):
	* libathena-private/athena-directory.c:
	(athena_self_check_directory):
	* libathena-private/athena-file-changes-queue.c:
	(athena_file_changes_consume_changes):
	* libathena-private/athena-file-dnd.c:
	(athena_drag_file_receive_dropped_keyword):
	* libathena-private/athena-file-operations.c:
	(handle_transfer_ok), (athena_file_operations_new_folder):
	* libathena-private/athena-file.c: (athena_self_check_file):
	* libathena-private/athena-icon-container.c:
	(lay_down_icons_tblr):
	* libathena-private/athena-mime-actions.c:
	(athena_do_component_query):
	* libathena-private/athena-search-uri.c: (tokenize_uri):
	* libathena-private/athena-theme.c: (theme_list_prepend),
	(theme_get_themes_for_location), (theme_get_default_themes),
	(athena_theme_remove_user_theme):
	* libathena-private/athena-thumbnails.c:
	(athena_get_thumbnail_uri):
	* libathena-private/athena-trash-monitor.c:
	(athena_trash_monitor_initialize), (add_one_volume_trash):
	* libathena-private/athena-volume-monitor.c:
	(get_removable_volumes), (build_volume_list_delta),
	(get_mount_list), (get_current_mount_list),
	(mount_volume_prepend_filesystem):
	* src/file-manager/fm-directory-view.c: (prepend_uri_one),
	(fm_directory_view_create_links_for_files),
	(fm_directory_view_duplicate_selection):
	* src/file-manager/fm-properties-window.c:
	(property_button_toggled):
	* src/athena-window-manage-views.c:
	(determined_initial_view_callback):
	Changed code that uses g_list_append to use g_list_prepend in all
	the cases where it was simple enough.

2001-05-10  Darin Adler  <darin@eazel.com>

	Integrated a patch from peter@ximian.com to move the
	MOZILLA_FIVE_HOME-setting code from the main Athena program
	(where it does no good) to the Mozilla component (which is a nicer
	place for it anyway).

	While integrating the patch I made some other small cleanups to
	the Mozilla component and the patch itself. I removed the code to
	set up LD_LIBRARY_PATH, since it's not needed, and changed the name
	of some things and simplified others.

	* components/mozilla/Makefile.am: Define PREFIX.
	* components/mozilla/main.c: (is_good_mozilla_path),
	(get_mozilla_path), (set_up_MOZILLA_FIVE_HOME), (main): Add the
	new code to set up MOZILLA_FIVE_HOME.
	
	* src/athena-application.c: (finish_startup): Remove the code
	from the old place.

	* check-THANKS.pl: Updated.

2001-05-09  Darin Adler  <darin@eazel.com>

	* libathena-private/athena-metafile-factory.c:
	* libathena-private/athena-vfs-directory.c:
	* libathena-private/athena-vfs-file.c:
	Added dummy members so we have no illegal empty structures.
	
	* src/athena-sidebar-title.c: (update_emblems): Get rid of some
	dead code.

2001-05-09  Darin Adler  <darin@eazel.com>

	* README: Updated required versions of packages.

2001-05-08  Darin Adler  <darin@eazel.com>

	Started with patch by Yoann Vandoorselaere
	<yoann@mandrakesoft.com> to not re-open /proc/mounts each time,
	but to simply rewind it instead. The patch had a lot of problems
	on Solaris and when HAVE_CDDA is true, but I reworked it so it
	should be OK.

	* libathena-private/athena-volume-monitor.c: (get_mount_list),
	(get_current_mount_list): Use rewind.

2001-05-08  Darin Adler  <darin@eazel.com>

	Integrated a fixed version of Gene's patch to compile under
	FreeBSD.

	* libathena-private/athena-volume-monitor.c:
	(has_removable_mntent_options), (get_removable_volumes),
	(volume_is_removable), (volume_is_read_only),
	(athena_volume_monitor_mount_unmount_removable),
	(athena_volume_monitor_get_mount_name_for_display): Added more
	ifdefs all over the place. This could be done more elegantly some
	day.

2001-05-08  Darin Adler  <darin@eazel.com>

	Integrated patch by Yoann Vandoorselaere <yoann@mandrakesoft.com>
	to fix a problem where we would try to get metadata for all files
	in the home directory if it was set to be used as the desktop
	directory.

	* libathena-private/athena-file-utilities.h:
	* libathena-private/athena-file-utilities.c:
	(athena_get_desktop_directory): Changed this to not bother with
	the call to create the directory when the home directory is used
	as the desktop.
	(athena_get_gmc_desktop_directory): New function.
	
	* libathena-private/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file): Use
	athena_get_gmc_desktop_directory for the check when deciding to
	look for old-fashioned gmc metadata.

=== Athena 1.0.3 ===
	
2001-05-08  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/Makefile.am:
	* configure.in:
	* README:
	Remove some Mozilla Milestone cruft.  Make the Mozilla component
	build with the newly released Mozilla 0.9.  Update the README with
	the latest Mozilla 0.9 support.
	
2001-05-07  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 8122 (Folders opened from the desktop should not
	reuse frontmost window). The previous behavior was intended to
	match the behavior of web browsers, but user feedback made it
	clear that it was confusing and annoying people too much.

	* src/athena-window-manage-views.c: 
	(get_topmost_athena_window_in_current_workspace_and_area):
	Removed this no-longer-needed function.
	(open_location): Always create a new window in the desktop case.

2001-05-07  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug 8251 (Mozilla component crashes every time I try to view a
	web page) by putting the same logic for locating Mozilla that is
	used by galeon into Athena.

	* src/athena-application.c: (is_mozilla_path_good),
	(get_mozilla_path), (find_mozilla): Code to find Mozilla and set
	up some environment variables that matches the code in galeon's
	startup script.
	(finish_startup): New function for initialization code that should
	be done only in the main Athena, not in clients that are going
	to contact the main Athena. More initialization should be moved
	in here over time. Calls find_mozilla among other things.
	(athena_application_startup): Moved the sound initialization and
	the code to migrate desktop directory contents inside the new
	initialization function.

2001-05-07  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* src/athena-first-time-druid.c: (make_title_page_icon_box):
	changed "arlo/i-directory-aa.png" to "crux_eggplant/i-directory-aa.png"
	as the arlo directory has been renamed.

2001-05-04  Jonathan Blandford  <jrb@webwynk.net>

	* src/file-manager/fm-icon-view.c
	(icon_container_preview_callback): Possibly play the file if it's
	an ogg.

	* src/file-manager/fm-icon-view.c (play_file): Check for ogg
	file.

2001-05-04  Darin Adler  <darin@eazel.com>

	* athena-installer.spec.in: Removed this obsolete file.

2001-05-04  Darin Adler  <darin@eazel.com>

	* THANKS: Add an entry for Bart.
	* indent.sh: Update switches (one was wrong for Athena style).

2001-05-04  Darin Adler  <darin@eazel.com>

	* libathena-private/.cvsignore: Update for name change.

2001-05-04  Darin Adler  <darin@eazel.com>

	* libathena-private/athena-mime-actions.c:
	(is_known_mime_type): Fix mistake where we put quotes
	around GNOME_VFS_MIME_TYPE_UNKNOWN. Use g_strcasecmp.
	(athena_mime_get_default_action_type_for_file),
	(application_supports_uri_scheme): Use g_strcasecmp.

2001-05-04  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* configure.in: upped version required of eel to 1.0 and
	  librsvg to 1.0.0

2001-05-04  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* configure.in: upped versions required, medusa >= 0.5.1
	  ammonite >= 1.0.2, gnome-vfs >= 1.0.1

2001-05-04  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* configure.in: requires eel 0.1

2001-05-04  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	No need to set gconf flags here since eel will have already done so.
	
	* athena.spec.in:
	Change the BuildRequires entries for eel and librsvg to be
	eel-devel and librsvg-devel.
	
	* libathena-private/athena-dateedit-extensions.c:
	* libathena-private/athena-dateedit-extensions.h:
	* libathena-private/athena-generous-bin.c:
	* libathena-private/athena-generous-bin.h:
	* libathena-private/athena-gconf-extensions.c:
	* libathena-private/athena-gconf-extensions.h:
	* libathena-private/athena-preferences-box.c:
	* libathena-private/athena-preferences-box.h:
	* libathena-private/athena-preferences-group.c:
	* libathena-private/athena-preferences-group.h:
	* libathena-private/athena-preferences-item.c:
	* libathena-private/athena-preferences-item.h:
	* libathena-private/athena-preferences-pane.c:
	* libathena-private/athena-preferences-pane.h:
	* libathena-private/athena-preferences.c:
	* libathena-private/athena-preferences.h:
	Moved to Eel.
	
	* applets/preferences-applet/athena-preferences-applet.c:
	* components/adapter/athena-adapter.c:
	* components/news/athena-news.c:
	* components/text/athena-text-view.c:
	* components/throbber/athena-throbber.c:
	* components/tree/athena-tree-expansion-state.c:
	* components/tree/athena-tree-view.c:
	* libathena-private/Makefile.am:
	* libathena-private/athena-directory-async.c:
	* libathena-private/athena-directory-background.c:
	* libathena-private/athena-directory.c:
	* libathena-private/athena-entry.c:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-file-utilities.c:
	* libathena-private/athena-file.c:
	* libathena-private/athena-font-factory.c:
	* libathena-private/athena-global-preferences.c:
	* libathena-private/athena-global-preferences.h:
	* libathena-private/athena-icon-canvas-item.c:
	* libathena-private/athena-icon-container.c:
	* libathena-private/athena-icon-factory.c:
	* libathena-private/athena-lib-self-check-functions.h:
	* libathena-private/athena-link-set.c:
	* libathena-private/athena-metafile.c:
	* libathena-private/athena-sidebar-functions.c:
	* libathena-private/athena-sound.c:
	* libathena-private/athena-theme.c:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/file-manager/athena-indexing-info.c:
	* src/athena-application.c:
	* src/athena-first-time-druid.c:
	* src/athena-link-set-window.c:
	* src/athena-main.c:
	* src/athena-navigation-bar.c:
	* src/athena-navigation-bar.h:
	* src/athena-preferences-dialog.c:
	* src/athena-property-browser.c:
	* src/athena-search-bar-criterion.c:
	* src/athena-shell.c:
	* src/athena-sidebar-tabs.c:
	* src/athena-sidebar-title.c:
	* src/athena-sidebar.c:
	* src/athena-switchable-search-bar.c:
	* src/athena-theme-selector.c:
	* src/athena-view-frame.c:
	* src/athena-view-frame.h:
	* src/athena-window-manage-views.c:
	* src/athena-window-menus.c:
	* src/athena-window-toolbars.c:
	* src/athena-window.c:
	* src/athena-zoom-control.c:
	* test/test-athena-preferences-change.c:
	* test/test-athena-preferences-display.c:
	* test/test-athena-smooth-graphics.c:
	* test/test.c:
	Update for latest round of stuff moving into Eel.
	
2001-05-03  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (ellipsize_string),
	(extract_items):
	made the news panel ellipsize long items.  I hope this can make it into
	1.0.3, but it's not worth making new rpms unless we have other
	reasons to do so.
	
2001-05-03  Robin * Slomkowski  <rslomkow@rslomkow.org>

	* configure.in: upped version to 1.0.3

2001-05-03  Ramiro Estrugo  <ramiro@eazel.com>

	* RENAMING:
	Remove libathena-extensions -> libathena-private entry since
	its done now.
	
2001-05-03  Ramiro Estrugo  <ramiro@eazel.com>

	* Makefile.am:
	* applets/launcher/Makefile.am:
	* applets/preferences-applet/Makefile.am:
	* applets/preferences-applet/athena-preferences-applet.c:
	* components/adapter/Makefile.am:
	* components/adapter/athena-adapter.c:
	* components/hardware/Makefile.am:
	* components/hardware/athena-hardware-view.c:
	* components/help/Makefile.am:
	* components/help/hyperbola-main.c:
	* components/help/hyperbola-nav-tree.c:
	* components/history/Makefile.am:
	* components/history/athena-history-view.c:
	* components/image-viewer/Makefile.am:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/bonobo-extensions.c:
	* components/mozilla/bonobo-extensions.h:
	* components/music/Makefile.am:
	* components/music/main.c:
	* components/music/athena-music-view.c:
	* components/news/Makefile.am:
	* components/news/athena-news.c:
	* components/notes/Makefile.am:
	* components/notes/athena-notes.c:
	* components/text/Makefile.am:
	* components/text/main.c:
	* components/text/athena-text-view.c:
	* components/throbber/Makefile.am:
	* components/throbber/main.c:
	* components/throbber/athena-throbber.c:
	* components/tree/athena-tree-expansion-state.c:
	* components/tree/athena-tree-model.c:
	* components/tree/athena-tree-node.c:
	* components/tree/athena-tree-node.h:
	* components/tree/athena-tree-view-dnd.c:
	* components/tree/athena-tree-view.c:
	* configure.in:
	* helper-utilities/error-dialog/athena-error-dialog.c:
	* libathena-extensions/.cvsignore:
	* libathena-extensions/Makefile.am:
	* libathena-extensions/README:
	* libathena-extensions/athena-audio-player.c:
	* libathena-extensions/athena-audio-player.h:
	* libathena-extensions/athena-bonobo-extensions.c:
	* libathena-extensions/athena-bonobo-extensions.h:
	* libathena-extensions/athena-bookmark.c:
	* libathena-extensions/athena-bookmark.h:
	* libathena-extensions/athena-cdrom-extensions.h:
	* libathena-extensions/athena-customization-data.c:
	* libathena-extensions/athena-customization-data.h:
	* libathena-extensions/athena-dateedit-extensions.c:
	* libathena-extensions/athena-dateedit-extensions.h:
	* libathena-extensions/athena-default-file-icon.c:
	* libathena-extensions/athena-default-file-icon.h:
	* libathena-extensions/athena-directory-async.c:
	* libathena-extensions/athena-directory-background.c:
	* libathena-extensions/athena-directory-background.h:
	* libathena-extensions/athena-directory-metafile-monitor.c:
	* libathena-extensions/athena-directory-metafile-monitor.h:
	* libathena-extensions/athena-directory-metafile.c:
	* libathena-extensions/athena-directory-metafile.h:
	* libathena-extensions/athena-directory-notify.h:
	* libathena-extensions/athena-directory-private.h:
	* libathena-extensions/athena-directory.c:
	* libathena-extensions/athena-directory.h:
	* libathena-extensions/athena-drag-window.c:
	* libathena-extensions/athena-drag-window.h:
	* libathena-extensions/athena-druid-page-eazel.c:
	* libathena-extensions/athena-druid-page-eazel.h:
	* libathena-extensions/athena-druid.c:
	* libathena-extensions/athena-druid.h:
	* libathena-extensions/athena-entry.c:
	* libathena-extensions/athena-entry.h:
	* libathena-extensions/athena-file-attributes.h:
	* libathena-extensions/athena-file-changes-queue.c:
	* libathena-extensions/athena-file-changes-queue.h:
	* libathena-extensions/athena-file-dnd.c:
	* libathena-extensions/athena-file-dnd.h:
	* libathena-extensions/athena-file-operations-progress.c:
	* libathena-extensions/athena-file-operations-progress.h:
	* libathena-extensions/athena-file-operations.c:
	* libathena-extensions/athena-file-operations.h:
	* libathena-extensions/athena-file-private.h:
	* libathena-extensions/athena-file-utilities.c:
	* libathena-extensions/athena-file-utilities.h:
	* libathena-extensions/athena-file.c:
	* libathena-extensions/athena-file.h:
	* libathena-extensions/athena-font-factory.c:
	* libathena-extensions/athena-font-factory.h:
	* libathena-extensions/athena-gconf-extensions.c:
	* libathena-extensions/athena-gconf-extensions.h:
	* libathena-extensions/athena-generous-bin.c:
	* libathena-extensions/athena-generous-bin.h:
	* libathena-extensions/athena-global-preferences.c:
	* libathena-extensions/athena-global-preferences.h:
	* libathena-extensions/athena-horizontal-splitter.c:
	* libathena-extensions/athena-horizontal-splitter.h:
	* libathena-extensions/athena-icon-canvas-item.c:
	* libathena-extensions/athena-icon-canvas-item.h:
	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-icon-container.h:
	* libathena-extensions/athena-icon-dnd.c:
	* libathena-extensions/athena-icon-dnd.h:
	* libathena-extensions/athena-icon-factory-private.h:
	* libathena-extensions/athena-icon-factory.c:
	* libathena-extensions/athena-icon-factory.h:
	* libathena-extensions/athena-icon-private.h:
	* libathena-extensions/athena-icon-text-item.c:
	* libathena-extensions/athena-icon-text-item.h:
	* libathena-extensions/athena-iso9660.h:
	* libathena-extensions/athena-keep-last-vertical-box.c:
	* libathena-extensions/athena-keep-last-vertical-box.h:
	* libathena-extensions/athena-lib-self-check-functions.c:
	* libathena-extensions/athena-lib-self-check-functions.h:
	* libathena-extensions/athena-link-set.c:
	* libathena-extensions/athena-link-set.h:
	* libathena-extensions/athena-link.c:
	* libathena-extensions/athena-link.h:
	* libathena-extensions/athena-medusa-support.c:
	* libathena-extensions/athena-medusa-support.h:
	* libathena-extensions/athena-merged-directory.c:
	* libathena-extensions/athena-merged-directory.h:
	* libathena-extensions/athena-metadata.h:
	* libathena-extensions/athena-metafile-factory.c:
	* libathena-extensions/athena-metafile-factory.h:
	* libathena-extensions/athena-metafile-server.idl:
	* libathena-extensions/athena-metafile.c:
	* libathena-extensions/athena-metafile.h:
	* libathena-extensions/athena-mime-actions.c:
	* libathena-extensions/athena-mime-actions.h:
	* libathena-extensions/athena-monitor.c:
	* libathena-extensions/athena-monitor.h:
	* libathena-extensions/athena-preferences-box.c:
	* libathena-extensions/athena-preferences-box.h:
	* libathena-extensions/athena-preferences-group.c:
	* libathena-extensions/athena-preferences-group.h:
	* libathena-extensions/athena-preferences-item.c:
	* libathena-extensions/athena-preferences-item.h:
	* libathena-extensions/athena-preferences-pane.c:
	* libathena-extensions/athena-preferences-pane.h:
	* libathena-extensions/athena-preferences.c:
	* libathena-extensions/athena-preferences.h:
	* libathena-extensions/athena-program-chooser.c:
	* libathena-extensions/athena-program-chooser.h:
	* libathena-extensions/athena-program-choosing.c:
	* libathena-extensions/athena-program-choosing.h:
	* libathena-extensions/athena-search-uri.c:
	* libathena-extensions/athena-search-uri.h:
	* libathena-extensions/athena-sidebar-functions.c:
	* libathena-extensions/athena-sidebar-functions.h:
	* libathena-extensions/athena-sound.c:
	* libathena-extensions/athena-sound.h:
	* libathena-extensions/athena-theme.c:
	* libathena-extensions/athena-theme.h:
	* libathena-extensions/athena-thumbnails-jpeg.c:
	* libathena-extensions/athena-thumbnails-jpeg.h:
	* libathena-extensions/athena-thumbnails.c:
	* libathena-extensions/athena-thumbnails.h:
	* libathena-extensions/athena-trash-directory.c:
	* libathena-extensions/athena-trash-directory.h:
	* libathena-extensions/athena-trash-file.c:
	* libathena-extensions/athena-trash-file.h:
	* libathena-extensions/athena-trash-monitor.c:
	* libathena-extensions/athena-trash-monitor.h:
	* libathena-extensions/athena-undo-context.c:
	* libathena-extensions/athena-undo-context.h:
	* libathena-extensions/athena-undo-manager.c:
	* libathena-extensions/athena-undo-manager.h:
	* libathena-extensions/athena-undo-signal-handlers.c:
	* libathena-extensions/athena-undo-signal-handlers.h:
	* libathena-extensions/athena-vfs-directory.c:
	* libathena-extensions/athena-vfs-directory.h:
	* libathena-extensions/athena-vfs-file.c:
	* libathena-extensions/athena-vfs-file.h:
	* libathena-extensions/athena-view-identifier.c:
	* libathena-extensions/athena-view-identifier.h:
	* libathena-extensions/athena-volume-monitor.c:
	* libathena-extensions/athena-volume-monitor.h:
	* libathena-private/Makefile.am:
	* libathena-private/README:
	* libathena-private/athena-directory-background.h:
	* libathena-private/athena-directory-metafile-monitor.c:
	* libathena-private/athena-directory-metafile-monitor.h:
	* libathena-private/athena-directory-metafile.c:
	* libathena-private/athena-directory-notify.h:
	* libathena-private/athena-druid-page-eazel.c:
	* libathena-private/athena-entry.c:
	* libathena-private/athena-file-dnd.h:
	* libathena-private/athena-file-operations.c:
	* libathena-private/athena-global-preferences.h:
	* libathena-private/athena-icon-factory.h:
	* libathena-private/athena-metafile-factory.c:
	* libathena-private/athena-metafile-factory.h:
	* libathena-private/athena-mime-actions.h:
	* libathena-private/athena-preferences-box.h:
	* libathena-private/athena-preferences-group.h:
	* libathena-private/athena-preferences-item.h:
	* libathena-private/athena-preferences-pane.h:
	* libathena-private/athena-undo-signal-handlers.h:
	* libathena/athena-view.c:
	* athena.spec.in:
	* po/POTFILES.in:
	* src/Makefile.am:
	* src/file-manager/fm-desktop-icon-view.c:
	* src/file-manager/fm-directory-view.c:
	* src/file-manager/fm-directory-view.h:
	* src/file-manager/fm-error-reporting.c:
	* src/file-manager/fm-error-reporting.h:
	* src/file-manager/fm-icon-view.c:
	* src/file-manager/fm-list-view.c:
	* src/file-manager/fm-properties-window.c:
	* src/file-manager/fm-properties-window.h:
	* src/file-manager/fm-search-list-view.c:
	* src/file-manager/athena-indexing-info.c:
	* src/athena-about.c:
	* src/athena-applicable-views.c:
	* src/athena-applicable-views.h:
	* src/athena-application.c:
	* src/athena-application.h:
	* src/athena-bookmark-list.c:
	* src/athena-bookmark-list.h:
	* src/athena-bookmark-parsing.c:
	* src/athena-bookmark-parsing.h:
	* src/athena-bookmarks-window.c:
	* src/athena-complex-search-bar.c:
	* src/athena-complex-search-bar.h:
	* src/athena-desktop-window.c:
	* src/athena-first-time-druid.c:
	* src/athena-link-set-window.c:
	* src/athena-link-set-window.h:
	* src/athena-location-bar.c:
	* src/athena-main.c: (main):
	* src/athena-navigation-bar.h:
	* src/athena-preferences-dialog.c:
	* src/athena-preferences-dialog.h:
	* src/athena-profiler.h:
	* src/athena-property-browser.c:
	* src/athena-search-bar-criterion.c:
	* src/athena-search-bar-criterion.h:
	* src/athena-search-bar.h:
	* src/athena-services.c:
	* src/athena-shell.c:
	* src/athena-sidebar-tabs.c:
	* src/athena-sidebar-title.c:
	* src/athena-sidebar-title.h:
	* src/athena-sidebar.c:
	* src/athena-simple-search-bar.c:
	* src/athena-switchable-navigation-bar.c:
	* src/athena-switchable-search-bar.c:
	* src/athena-theme-selector.c:
	* src/athena-view-frame.c:
	* src/athena-view-frame.h:
	* src/athena-window-manage-views.c:
	* src/athena-window-menus.c:
	* src/athena-window-private.h:
	* src/athena-window-toolbars.c:
	* src/athena-window.c:
	* src/athena-window.h:
	* src/athena-zoom-control.c:
	* test/Makefile.am:
	* test/test-athena-async-activation.c:
	* test/test-athena-mime-actions-set.c:
	* test/test-athena-mime-actions.c:
	* test/test-athena-preferences-change.c:
	* test/test-athena-preferences-display.c:
	* test/test-athena-smooth-graphics.c:
	* test/test-athena-wrap-table.c:
	* test/test.c:
	* test/test.h:
	Rename libathena-extensions to libathena-private.
	
2001-05-03  Ramiro Estrugo  <ramiro@eazel.com>

	* icons/arlo/throbber/.cvsignore:
	* icons/arlo/throbber/001.png:
	* icons/arlo/throbber/002.png:
	* icons/arlo/throbber/003.png:
	* icons/arlo/throbber/004.png:
	* icons/arlo/throbber/005.png:
	* icons/arlo/throbber/006.png:
	* icons/arlo/throbber/007.png:
	* icons/arlo/throbber/008.png:
	* icons/arlo/throbber/009.png:
	* icons/arlo/throbber/010.png:
	* icons/arlo/throbber/011.png:
	* icons/arlo/throbber/012.png:
	* icons/arlo/throbber/013.png:
	* icons/arlo/throbber/014.png:
	* icons/arlo/throbber/015.png:
	* icons/arlo/throbber/016.png:
	* icons/arlo/throbber/017.png:
	* icons/arlo/throbber/018.png:
	* icons/arlo/throbber/019.png:
	* icons/arlo/throbber/020.png:
	* icons/arlo/throbber/021.png:
	* icons/arlo/throbber/022.png:
	* icons/arlo/throbber/023.png:
	* icons/arlo/throbber/024.png:
	* icons/arlo/throbber/025.png:
	* icons/arlo/throbber/026.png:
	* icons/arlo/throbber/027.png:
	* icons/arlo/throbber/028.png:
	* icons/arlo/throbber/029.png:
	* icons/arlo/throbber/030.png:
	* icons/arlo/throbber/Makefile.am:
	* icons/arlo/throbber/rest.png:
	Remove old unused icons.
	
2001-05-03  Darin Adler  <darin@eazel.com>

	* cut-n-paste-code/freetype/.cvsignore: Removing this file so that
	this empty directory will become completely empty.

	* cut-n-paste-code/.cvsignore: Tweak.
	* cut-n-paste-code/widgets/.cvsignore: Tweak.

2001-05-03  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file): Fix Athena Link
	support so it works for links that have paths instead of URIs in
	their custom icon field.

2001-05-03  Dan Mueth  <dan@eazel.com>

	Added information about configuration files.

	* help/athena-user-manual/C/athena-user-manual.sgml:

2001-05-03  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (add_site_from_fields):
	fixed a memory trashing bug that Bart found in the news panel.
	
2001-05-03  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 8239 ("Zoom In" keyboard shortcut (Control-=) is
	untypable on many non-US keyboards)

	* src/athena-shell-ui.xml: Changed Zoom In shortcut to Control-+,
	so the more-mnemonic + appears in the menu.
	
	* src/athena-window.c: (athena_window_initialize_class),
	(athena_window_key_press_event):
	Make Control-+ and Control-= both activate Zoom In.

2001-05-03  Bart Decrem <bart@eazel.com>

	Added more RSS feeds:
	- Appwatch
	- Barrapunto
	- Barrapunto-Gnome
	- Security Focus
	- Linux.com
	- Mozilla Zine
	
	Fixed alphabetization error.

	* components/news/news_channels.xml

2001-05-03  Darin Adler  <darin@eazel.com>

	* RENAMING: Removed some obsolete name changes.
	* src/athena-property-browser.h: Got rid of one last NTL.

2001-05-03  Darin Adler  <darin@eazel.com>

	Fixed bug that was preventing custom icons from working in many
	cases.

	* libathena-extensions/athena-icon-factory.c:
	(load_icon_with_embedded_text): Pass in the URI for the custom
	icon.

2001-05-03  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	More tweaking on keyboard shortcuts for deleting and trashing.

	* src/file-manager/fm-directory-view.c:
	(ALL_NON_LOCK_MODIFIER_KEYS): Don't include MOD2, because it is
	"num lock". Don't include MOD3-5 because I don't know for sure if
	they are lock modifiers or not.
	(trash_or_delete_selected_files), (trash_callback): Separated out
	the Move To Trash command into a non-callback function.
	(delete_selected_files), (delete_callback): Separated out the
	Delete command into a non-callback function.
	(key_press_event_callback): Shift-Delete now means "Delete" if that
	command is turned on. Control-Backspace now means "Move To Trash".

2001-05-03  Bart Decrem <bart@eazel.com>
	
	reviewed by: no one :(

	Updated list of RSS feeds for the News sidebar.

	* components/news/news_channels.xml

	Removed:
	- Marihuana News
	- Macintosh News

	Added:
	- BSD Today
	- Dictionary.Com
	- Internet.com
	- Segfault
	- Web Reference
	
2001-05-03  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 8232 (Trash.gmc and home directory link files made by
	gmc show on Desktop):

	* libathena-extensions/athena-file.c:
	(athena_file_should_show): Moved special case for gmc files in
	here.
	(filter_hidden_and_backup_partition_callback): Removed special
	case for gmc files, since it's now in the lower level. Also fixed
	code that was casting a pointer to an int without using
	GPOINTER_TO_INT.
	
	* src/athena-application.c: Fix typo.

2001-05-03  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 8230 (launchers dragged from panel don't get icons as
	they did in Ximian's Athena 1.0.2):

	* libathena-extensions/athena-link.c:
	(athena_link_local_create_from_gnome_entry): Changed to use
	eel_make_uri_from_half_baked_uri so we can handle the kind of
	"URI"s that are in most .desktop files. Also did a lot of code
	cleanup.

	* src/file-manager/fm-desktop-icon-view.c:
	(icon_view_handle_uri_list): Changed to use
	eel_make_uri_from_half_baked_uri so we can handle the kind of
	"URI"s that are passed when dragging from old programs. Also did a
	lot of code cleanup.

2001-05-03  Darin Adler  <darin@eazel.com>

	Fixed bug 8228 (http://www.yahoo.com shows plain document icon,
	not HTML icon).

	* src/athena-sidebar-title.c: (update_icon): Changed code to
	pass in icon names to athena_icon_factory_get_pixbuf_by_name,
	instead of passing icon paths (no reason to do that).

2001-05-03  John Fleck  <jfleck@inkstain.net>

	* components/help/converters/gnome-db2html2/sect-elements.c
	improve support for <emphasis> tag to proporly support role="bold"
	and role="strong" attributes with <B> but *no* <EM> tags

2001-05-03  Dan Mueth  <dan@eazel.com>

	Updating Athena Release Notes to mention that anybody
	who builds or repackages Athena should make sure Medusa
	support isn't built in by accident.

	* help/athena-release-notes/C/athena-release-notes.sgml:

2001-05-03  Dan Mueth  <dan@eazel.com>

        Updates to Athena User Manual, including two new screenshots.

        * help/athena-user-manual/C/Makefile.am:
        * help/athena-user-manual/C/figures/help_num.png:
        * help/athena-user-manual/C/figures/news_num.png:
        * help/athena-user-manual/C/athena-user-manual.sgml:

2001-05-03  Zbigniew Chyla  <cyba@gnome.pl>

	* src/athena-theme-selector.c
	(install_theme_button_clicked_callback): Destroy fileselector after
	pressing escape key.

2001-05-02  Darin Adler  <darin@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(key_press_event_callback), (bonobo_control_activate_callback):
	Hook up the delete key to move files to trash. Another feature
	requested by Miguel.
	
	* src/file-manager/athena-icon-view-ui.xml: Only show the F2 in
	the menu bar, not the right-click menu.

	* libathena-extensions/athena-icon-factory.c:
	(cache_icon_new), (load_specific_icon), (load_icon_for_scaling),
	(scale_icon), (get_icon_from_cache),
	(athena_icon_factory_get_pixbuf_for_icon),
	(load_icon_with_embedded_text): Tried to fix bug 8228, but
	failed. I still want to keep my changes. I'll get back to this
	tomorrow.
	
2001-05-02  Ramiro Estrugo  <ramiro@eazel.com>

	* athena.spec.in:
	Add ammonite requires dependency.
	
2001-05-02  Darin Adler  <darin@eazel.com>

	* src/file-manager/athena-icon-view-ui.xml: Added an F2 key
	equivalent for the Rename command because: 1) we didn't have a key
	equivalent here before, 2) F2 is what you use to do this on
	Windows, and 3) Miguel asked me to.

2001-05-02  John Sullivan  <sullivan@eazel.com>

	* src/file-manager/fm-directory-view.c:
	(open_scripts_folder_callback), (disconnect_script_handlers):

	Made the dialog explaining how scripts work always show up when
	you choose "Open Scripts Folder", not just the first time.

2001-05-02  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fixed bug 8200 (News Sidebar panel crash on startup):

	* components/news/athena-news.c: (draw_rss_items): Use
	eel_strlen so it works with NULL titles.
	
	* configure.in:
	* athena.spec.in:
	Removed dependency on ghttp. Trilobite needs it, but not Athena.

2001-05-02  Darin Adler  <darin@eazel.com>

	Fix bug where most files weren't getting their MIME type icons.

	* libathena-extensions/athena-icon-factory.c:
	(load_icon_given_two_names), (is_generic_icon_name),
	(load_specific_icon): Made the two generic icons lose out if
	there's a MIME type icon. We can't always prefer the MIME type
	icon, since that would break things like the "thumbnail in
	progress" icon.

2001-05-02  Darin Adler  <darin@eazel.com>

	Fix bug where icon for Athena links were not appearing if they
	were icon names rather than complete URIs.

	* libathena-extensions/athena-icon-factory.c:
	(remove_icon_name_suffix): Separate out this function.
	(get_mime_type_icon_without_suffix): Use the new
	remove_icon_name_suffix function.
	(athena_icon_factory_get_icon_for_file): When getting a custom
	icon name from a file, call remove_icon_name_suffix.

	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link),
	(fm_desktop_icon_view_trash_state_changed_callback),
	(icon_view_handle_uri_list), (update_home_link_and_delete_copies),
	(update_trash_link_and_delete_copies): Leave the ".png" suffixes
	out of the icon names. They never did any good.

	* components/help/help-method.c: (help_uri_to_string): Fix name of
	info2html2 and disallow parameters that start with "-" (for a
	slight bit less security vulnerability).

2001-05-02  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Lots of improvement.  Make dealing with dependency libs/cflags simpler.

	* applets/launcher/Makefile.am:
	* applets/preferences-applet/Makefile.am:
	* components/adapter/Makefile.am:
	* components/hardware/Makefile.am:
	* components/help/Makefile.am:
	* components/history/Makefile.am:
	* components/image-viewer/Makefile.am:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/music/Makefile.am:
	* components/news/Makefile.am:
	* components/notes/Makefile.am:
	* components/sample/Makefile.am:
	* components/text/Makefile.am:
	* components/throbber/Makefile.am:
	* components/tree/Makefile.am:
	* helper-utilities/error-dialog/Makefile.am:
	* icons/arlo/throbber/Makefile.am:
	* icons/crux_eggplant/backgrounds/Makefile.am:
	* icons/crux_eggplant/sidebar_tab_pieces/Makefile.am:
	* icons/crux_eggplant/throbber/Makefile.am:
	* icons/gnome/throbber/Makefile.am:
	* icons/sidebar_tab_pieces/Makefile.am:
	* libathena-adapter/Makefile.am:
	* libathena-extensions/Makefile.am:
	* libathena/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	* test/Makefile.am:
	Eliminate cut-n-paste disease by using dependency macros defined
	in configure.in.

2001-05-02  Ramiro Estrugo  <ramiro@eazel.com>

	* autogen.sh:
	Detect whether the invocation of configure failed and print a
	message accordingly.  We used to always assume that configure was
	successful and print misleading "now type make to build $PROJECT"
	messages.
	
2001-05-01  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Use ATHENA_VERSION_INSIST from hack-macros instead of
	EAZEL_VERSION_INSIST.
	
2001-05-01  Ramiro Estrugo  <ramiro@eazel.com>

	* applets/launcher/Makefile.am:
	* applets/preferences-applet/Makefile.am:
	* components/adapter/Makefile.am:
	* components/hardware/Makefile.am:
	* components/help/Makefile.am:
	* components/history/Makefile.am:
	* components/image-viewer/Makefile.am:
	* components/loser/content/Makefile.am:
	* components/loser/sidebar/Makefile.am:
	* components/mozilla/Makefile.am:
	* components/music/Makefile.am:
	* components/notes/Makefile.am:
	* components/sample/Makefile.am:
	* components/text/Makefile.am:
	* components/throbber/Makefile.am:
	* components/tree/Makefile.am:
	* configure.in:
	* libathena-extensions/Makefile.am:
	* libathena/Makefile.am:
	* src/Makefile.am:
	* src/file-manager/Makefile.am:
	* test/Makefile.am:
	Patch from Christopher Lahey <clahey@ximian.com>.
	Use EEL_CFLAGS, LIBRSVG_CFLAGS instead of EEL_INCLUDEDIR, and
	EEL_CFLAGS.  Thanks Chris.
	
2001-05-01  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (draw_rss_title):
	made the titles prelight when appropriate.  Also, tweaked
	the channel gap size.
	
2001-05-01  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	Simplify the freetype2 detection insanity by using autoconf macro
	technology.  The new test should work with both FreeType2 RPMS as
	well as freetype built from source in any prefix.

2001-05-01  Dan Mueth  <dan@eazel.com>

	More updates to the User Manual for 1.0.3.

	* help/athena-user-manual/C/athena-user-manual.sgml:

2001-05-01  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (do_destroy),
	(rss_read_done_callback), (athena_news_load_channel),
	(check_for_updates):
	fixed bug 8216, removing the news panel when loading channels hangs
	Athena.  Fixed by making sure we don't launch multiple I/O request
	for a single channel.  I suspect there are still some problems lurking,
	but the reported bug is no longer reproducible.
	
2001-05-01  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (has_matching_uri),
	(mark_new_items):
	fixed problem where the new flag wasn't being maintained
	properly after updating, since it was using a whole new item
	list.  Fixed by propogating the new flag from the corresponding
	old item.
	
2001-05-01  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Some enhancements to icon lookup.

	* libathena-extensions/athena-icon-factory.h:
	* libathena-extensions/athena-icon-factory.c:
	(get_mime_type_icon_without_suffix): Function used to strip suffixes
	out so we can have file suffixes in the gnome-vfs icon database, but
	can ignore them and look at all suffixes for the named icon.
	(make_icon_name_from_mime_type): Construct an icon name for types
	that don't specify a particular icon. This allows theme designers
	to make icons for any MIME type.
	(get_icon_name_for_regular_file): Use the new "without suffix" call.
	This requires changing this function to return a strdup'd name.
	(get_icon_name_for_directory), (get_icon_name_for_file): Change to
	return a strdup'd name.
	(make_full_icon_path): Do the file exists check in here (was
	already doing it in some cases) and also call
	gnome_vfs_icon_path_from_filename.
	(get_themed_icon_file_path): Get rid of redundant g_file_exists
	checks and gnome_vfs_icon_path_from_filename call, since both are
	now handled inside make_full_icon_path.
	(athena_scalable_icon_get_text_pieces),
	(athena_scalable_icon_new_from_text_pieces),
	(athena_scalable_icon_unref), (athena_scalable_icon_hash),
	(athena_scalable_icon_equal): Add MIME type to the scalable
	icons.
	(athena_icon_factory_get_icon_for_file): Pass in the MIME type.
	(athena_icon_factory_get_emblem_icon_by_name): Pass NULL for
	MIME type.
	(load_pixbuf_svg): Change to pass in boolean for emblem hack since
	we don't always have an icon name.
	(load_icon_from_path): New function, share common code.
	(load_named_icon): New function, share common code.
	(load_specific_icon): Try icon based on MIME type first, then fall
	back on the name specified.
	(athena_icon_factory_get_pixbuf_from_name): Pass NULL for MIME
	type.
	(load_icon_with_embedded_text): Pass in the MIME type.

	* src/athena-bookmark-list.c: (append_bookmark_node):
	* src/athena-bookmark-parsing.c:
	(athena_bookmark_new_from_node):
	* libathena-extensions/athena-bookmark.c:
	(athena_bookmark_icon_is_different),
	(athena_bookmark_set_icon_to_default):
	Update to deal with MIME types in scalable icons.
	
	* components/help/hyperbola-filefmt.c:
	(fmt_scrollkeeper_parse_toc_section),
	(fmt_scrollkeeper_parse_doc_toc),
	(fmt_scrollkeeper_parse_document),
	(fmt_scrollkeeper_parse_section), (fmt_scrollkeeper_parse_xml),
	(fmt_scrollkeeper_trim_empty_branches),
	(fmt_scrollkeeper_tree_empty), (fmt_scrollkeeper_populate_tree),
	(remove_leading_and_trailing_white_spaces), (fmt_toplevel_add_doc),
	(get_path_from_node), (has_content), (fmt_toplevel_parse_xml_tree):
	Made more compatible with libxml by not using the content field
	directly and using xmlChildrenNode and xmlRootNode.
	
	* libathena-extensions/athena-trash-monitor.c:
	(athena_trash_monitor_get): Fixed AthenaDirectory leak.
	
	* THANKS: Added some more translator credits.
	* check-THANKS.pl: Fixed some email addresses and such.

	* icons/ardmore/.cvsignore:
	* icons/arlo/.cvsignore,
	* icons/arlo/backgrounds/.cvsignore:
	* icons/arlo/sidebar_tab_pieces/.cvsignore:
	* icons/villanova/.cvsignore:
	Removed these again.

2001-05-01  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (mark_new_items),
	(empty_message_size_allocate):
	fixed bug where it would inadvertently clear the new flag on items
	after refetching.
	
	fixed bug 8211, criticals when opening the news panel with no
	selected sites by making sure not to set the wrap width to a
	negative number.
	
	* components/news/news_channels.xml:
	added some new channels suggested by Joshua K.
	
2001-05-01  Zbigniew Chyla  <cyba@gnome.pl>

	* components/news/athena-news.c: Marked two strings for translation.

	* icons/ardmore/.cvsignore, icons/arlo/.cvsignore,
	icons/arlo/backgrounds/.cvsignore,
	icons/arlo/sidebar_tab_pieces/.cvsignore, icons/villanova/.cvsignore:
	New files, ignore Makefile.in and Makefile.

2001-05-01  Ramiro Estrugo  <ramiro@eazel.com>

	* components/news/athena-news.c:
	* libathena-extensions/athena-icon-canvas-item.c:
	* src/athena-about.c:
	* src/athena-sidebar-tabs.c:
	More work on changing parameters for functions that accept and
	return ArtIRect, EelArtIPoint, ArtDRect, EelDimensions to pass by
	value instead of by pointer.

2001-05-01  Ramiro Estrugo  <ramiro@eazel.com>

	* components/mozilla/main.c: (main): Make warnings and criticals
	stop in the debugger to make this beast easier to debug.
	
	* components/mozilla/athena-mozilla-content-view.c:
	Use Eel gtk boilerplate and method invocation macros.
	
2001-05-01  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	Add Mozilla 0.8.1 blurb.
	
2001-05-01  Dan Mueth  <dan@eazel.com>

	Updates to the header and first section of the User Manual.

	* help/athena-user-manual/C/athena-user-manual.sgml:

2001-04-30  Ramiro Estrugo  <ramiro@eazel.com>

	* icons/crux_teal/backgrounds/Makefile.am:
	* icons/crux_teal/sidebar_tab_pieces/Makefile.am:
	* icons/crux_teal/throbber/Makefile.am:
	Forgot to change arlo to crux_teal in these 3.
	
2001-04-30  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in:
	* icons/Makefile.am:
	* athena.spec.in:
	Rename the theme directories to match their displayed name.
	
	* icons/arlo
	* icons/villanova
	* icons/ardmore
	Old theme directory names.
	
	* icons/crux_teal
	* icons/sierra
	* icons/tahoe
	New theme directory names.

2001-04-30  Pavel Cisler  <pavel@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed 4964 (Files dragged to Trash from floppy don't
		    appear in Trash Can)
	Fixed 7406 (Trash doesn't work until first restart of Athena)
	Fixed 7976 (some files that you can't leave in the Trash just
		    silently go away instead of showing the dialog as
		    they should)

	New trash directories are created lazily, when someone tries to
	delete an item on the respective disk for the first time. The
	problem was that these new trash directories do not get integrated
	into the unified trash directory. Added logic to do that.
	
	* libathena-extensions/athena-file-operations.c:
	(athena_file_operations_copy_move):
	
	Before a move to trash operation is started check for any new
	trash directories and integrate them if needed.
	
	* libathena-extensions/athena-trash-directory.c:
	(check_trash_created), (check_trash_directory_added_callback),
	(volume_mounted_callback)

	Add calls to allow adding a new physical trash directory to the
	unified trash.

	* libathena-extensions/athena-trash-directory.h:
	* libathena-extensions/athena-trash-monitor.c:
	(athena_trash_monitor_initialize_class),
	(athena_trash_monitor_get),
	* libathena-extensions/athena-trash-directory.c:
	(athena_trash_directory_initialize),
	(athena_trash_directory_finish_initializing):
	
	Rearrange to allow initializing the athena trash directory and
	athena trash monitor properly, dodging a cyclic dependency.
	
	* libathena-extensions/athena-trash-monitor.c:
	* libathena-extensions/athena-trash-monitor.h:
	(athena_trash_monitor_get_trash_directories),
	(add_one_trash_directory_if_needed),
	(athena_trash_monitor_add_new_trash_directories):
	Add a new signal to allow clients get notified when a new
	trash directory might get added to the unified trash.

2001-04-30  Dan Mueth  <dan@eazel.com>

	Updating screenshots for Athena User Manual for Athena 1.0.3.

	* help/athena-user-manual/C/Makefile.am:
	* help/athena-user-manual/C/figures/custicon.png:
	* help/athena-user-manual/C/figures/custom_icon_num.png:
	* help/athena-user-manual/C/figures/full.png:
	* help/athena-user-manual/C/figures/home_folder_num.png:
	* help/athena-user-manual/C/figures/locationbar_nqr.png:
	* help/athena-user-manual/C/figures/locbar.png:
	* help/athena-user-manual/C/figures/athena_window_full_num.png:
	* help/athena-user-manual/C/figures/part-1.png:
	* help/athena-user-manual/C/figures/part-2.png:
	* help/athena-user-manual/C/figures/part-3.png:
	* help/athena-user-manual/C/figures/part.png:
	* help/athena-user-manual/C/figures/preferences_menu_num.png:
	* help/athena-user-manual/C/figures/prefmenu.png:
	* help/athena-user-manual/C/figures/sidebar.png:
	* help/athena-user-manual/C/figures/sidebar_num.png:
	* help/athena-user-manual/C/figures/xcf/custom_icon_num.xcf:
	* help/athena-user-manual/C/figures/xcf/home_folder_num.xcf:
	* help/athena-user-manual/C/figures/xcf/athena_window_full_num.
	xcf:
	* help/athena-user-manual/C/athena-user-manual.sgml:

2001-04-30  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (draw_rss_items),
	(athena_news_update_display),
	(athena_news_motion_notify_event), (rss_read_done_callback),
	(news_label_new), (make_add_widgets), (set_up_edit_widgets),
	(set_up_configure_widgets):
	
	fixed bug where things wouldn't prelight properly; fixed by not
	hit-testing channels that aren't visible in motion_notify
	
	made a bunch of layout changes at Arlo's request, including no
	longer using aa text for widgets.
	
	* components/news/changed_bullet.png:
	* components/news/athena-news-pixmaps.h:
	* components/news/news_bullet.png:
	new images from Arlo
	
2001-04-30  Ramiro Estrugo  <ramiro@eazel.com>

	* NEWS:
	Add blurb about Athena Themes moving to preferences dialog.
	
2001-04-30  Darin Adler  <darin@eazel.com>

	Worked on bug 8206 (xalf problems):

	* libathena-extensions/athena-program-choosing.c:
	(get_xalf_prefix): Don't use xalf unless a ATHENA_USE_XALF
	environment variable is defined.

	* NEWS: Updated with the features added since last time I edited
	the NEWS file. Since we are mostly doing bug fixes, there aren't
	too many.
	
2001-04-30  Darin Adler  <darin@eazel.com>

	* help/athena-screenshot-guidelines/C/.cvsignore:
	Ignore the .junk directory.

2001-04-30  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Updated for eel changes needed to fix bug 8198 ("New Terminal"
	does not use GNOME default applications):

	* libathena-extensions/athena-link.c:
	(athena_link_local_create_from_gnome_entry): Use the new
	eel_gnome_make_terminal_command instead of the obsolete
	eel_gnome_get_terminal_path.
	* libathena-extensions/athena-program-choosing.c:
	(athena_launch_application_from_command): Let eel do the /bin/sh
	-c trick. Get rid of it from here.

2001-04-30  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (extract_items),
	(has_matching_uri), (rss_read_error), (extract_rss_title),
	(extract_scripting_news_title), (extract_rss_image),
	(extract_scripting_news_image), (rss_read_done_callback):
	added support for "Scripting News" style rss files, which
	are quite a bit different from standard ones.  Also, restructured
	the rss_read_done routine by breaking it into smaller routines,
	plus other small cleanups.
	
	* components/news/news_channels.xml:
	added a few more channels
	
2001-04-30  Andy Hertzfeld  <andy@eazel.com>

	* components/news/news_channels.xml:
	added Eazel, GNOME and CNET news channels
	
2001-04-30  Ramiro Estrugo  <ramiro@eazel.com>

	* components/news/athena-news.c:
	* libathena-extensions/athena-icon-canvas-item.c:
	* libathena-extensions/athena-icon-canvas-item.h:
	* libathena-extensions/athena-icon-container.c:
	* libathena-extensions/athena-icon-dnd.c:
	* libathena-extensions/athena-icon-factory.c:
	* src/file-manager/fm-list-view.c:
	* src/athena-about.c:
	* test/test.c:
	Change parameters for functions that accept and return ArtIRect,
	EelArtIPoint, ArtDRect, EelDimensions to pass by value instead of
	by pointer.

2001-04-30  Dan Mueth  <dan@eazel.com>

	Updating Athena Quick Reference, both content and many
	new screenshots.  Removing old screenshots which have been
	replaced.

	* help/athena-quick-reference/C/Makefile.am:
	* help/athena-quick-reference/C/figures/backgrounds_nqr.png:
	* help/athena-quick-reference/C/figures/emblems.png:
	* help/athena-quick-reference/C/figures/emblems_nqr.png:
	* help/athena-quick-reference/C/figures/full.png:
	* help/athena-quick-reference/C/figures/locationbar_nqr.png:
	* help/athena-quick-reference/C/figures/locbar.png:
	* help/athena-quick-reference/C/figures/menubar.png:
	* help/athena-quick-reference/C/figures/menus_nqr.png:
	* help/athena-quick-reference/C/figures/music.png:
	* help/athena-quick-reference/C/figures/music_nqr.png:
	* help/athena-quick-reference/C/figures/athena_window_full_nqr.png:
	* help/athena-quick-reference/C/figures/navbar.png:
	* help/athena-quick-reference/C/figures/patterns.png:
	* help/athena-quick-reference/C/figures/sidebar.png:
	* help/athena-quick-reference/C/figures/sidebar_nqr.png:
	* help/athena-quick-reference/C/figures/themes.png:
	* help/athena-quick-reference/C/figures/themes_nqr.png:
	* help/athena-quick-reference/C/figures/toolbar_nqr.png:
	* help/athena-quick-reference/C/figures/xcf/athena_window_full_nqr.xcf:
	* help/athena-quick-reference/C/index.html:

2001-04-30  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-global-preferences.h:
	Add preferences for default manual layout support.
	
	* libathena-extensions/athena-global-preferences.c:
	(default_icon_view_sort_order_or_manual_layout_changed_callback),
	(athena_global_preferences_initialize):
	Use different enumerations for icon view and list view default
	sort order since only icon view supports manual layout.  Add
	entries for default manual layout preference.  Add proxy
	preference for both icon view sort order and manual layout so that
	it can be presented to the user as one choice and thus just one
	menu.  This also matches the view menu.

	* libathena-extensions/athena-preferences-item.c:
	(preferences_item_create_enumeration_list),
	(preferences_item_create_enumeration_menu):
	Add support for separators in string pickers.
	
	* src/file-manager/fm-icon-view.c:
	(get_default_directory_manual_layout),
	(fm_icon_view_real_get_directory_auto_layout),
	(fm_icon_view_real_set_directory_auto_layout),
	(fm_icon_view_reset_to_defaults),
	(default_use_manual_layout_changed_callback),
	(fm_icon_view_initialize):
	Add support for a default "use manual layout" preference.
	
	* src/athena-preferences-dialog.c:
	Make the default sort order preference use the proxy prefernece
	instead of the real one.
	
2001-04-29  Dan Mueth  <dan@eazel.com>

	Fixing some markup errors.

	* help/athena-user-manual/ko/athena-user-manual.sgml:

2001-04-29  Ramiro Estrugo  <ramiro@eazel.com>

	* components/help/converters/gnome-info2html2/main.c: (main):
	Remove the cast, its not needed and it breaks the build.  You
	probably need a newer popt if your build breaks without the cast.
	
2001-04-29  Fatih Demir <kabalak@gtranslator.org>

	* components/help/converters/gnome-info2html2/main.c: Cast argv to
		(const char **) to avoid a compiling error.

	* src/athena-window-menus.c: Include <locale.h>.

2001-04-28  Dan Mueth  <dan@eazel.com>

	Small updates to a couple docs.

	* help/athena-screenshot-guidelines/C/athena-screenshot-guideli
	nes.sgml:
	* help/athena-user-manual/C/athena-user-manual.sgml:

2001-04-27  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (athena_news_load_channel),
	(update_remove_button), (add_site_from_fields),
	(remove_selected_site), (make_news_view):
	fixed bug 8192, remove button left enabled when all sites are
	removed, by making the button insensitive when necessary.  Also,
	display the site name instead of the url when loading, since it's
	much more understandable.
	
2001-04-27  Darin Adler  <darin@eazel.com>

	reviewed by: Robin Slomkowski <rslomkow@eazel.com>

	Update FAM support so it works fine on systems with and without
	libfam installed. So if you build Athena with FAM, then you can
	run it on a system with or without FAM.

	* configure.in:
	* libathena-extensions/Makefile.am:
	Remove the FAM_LIBS part.
	
	* libathena-extensions/athena-monitor.c: (get_fam_connection):
	Load the module before the FAMOpen2 call, and get all the function
	pointers.
	(get_event_uri), (process_fam_notifications),
	(athena_monitor_file), (athena_monitor_directory),
	(athena_monitor_cancel): Use the new CALL_FAM macro so we can
	use the function pointers when we call FAM.

2001-04-27  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (go_to_uri):
	fixed bug 8186, clicking on a title while it's loading crashes
	the news panel; fixed by checking for NULL.
	
	* components/news/news_channels.xml:
	removed the Dan Gillmor channel since it just moved and I can't
	find where the rss file is on the new site.
	
2001-04-27  John Harper  <jsh@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 7732 (opening window from prompt spawns endless
	process cycle):

	* src/athena-application.c (desktop_changed_callback): call
	update_session () directly

	(update_session): don't check the SHOW_DESKTOP preference to
	see if we should add ourselves to the session, check that the
	current process has actually _created_ a desktop window

	(init_session): don't register a listener for the SHOW_DESKTOP
	preference since it's called by desktop_changed_callback ()

2001-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-preferences.c:
	(athena_self_check_preferences):
	Disabled preferences self checks until I can debug why these
	seemingly harmless tests dont work.

2001-04-27  Ramiro Estrugo  <ramiro@eazel.com>

	* components/help/hyperbola-main.c: (main): 
	Fix bug 8172 - Athena spews GConf error upon repeated clicking
	of "help"
	
	Intiialize preferences before creating the factory in case code in
	the factory needs to use prefernces.
	
	* src/athena-application.c: (athena_application_startup):
	Dont do the GMC migration if we are about to kill the athena
	shell.  Fixes criticals when 'athena --quit' is used.
	
2001-04-27  Andy Hertzfeld  <andy@eazel.com>

	* components/news/Makefile.am:
	* components/news/changed_bullet.png:
	added a placed holder "new article" bullet; hopefully, Arlo will
	provide us with a real one soon.
	
	* components/news/athena-news.c: (do_destroy), (draw_rss_items),
	(toggle_open_state), (athena_news_make_new_channel),
	(check_for_updates), (athena_news_load_images),
	(update_interval_changed), (make_news_view):
	made it use the changed bullet when appropriate; also, completed
	the preferences work by making it watch the update interval preference.
	
2001-04-27  Darin Adler  <darin@eazel.com>

	* libathena-extensions/athena-thumbnails-jpeg.c:
	(fatal_error_handler), (output_message_handler),
	(athena_thumbnail_load_scaled_jpeg): Added error handling
	based on Alex Larsson's revised patch. Needs more testing.

2001-04-27  Darin Adler  <darin@eazel.com>

	Fixed bug 7818 (Duplicating a link to a file on a different
	partition gives "You can't copy a file over itself" error).

	* libathena-extensions/athena-file-operations.c:
	(athena_file_operations_copy_move): There was a bug in the call
	to check_same_fs in here (it was passing in the target URI, which
	is often a file that doesn't even exist), so I removed that check.
	Did some other cleanups too.

2001-04-27  John Sullivan  <sullivan@eazel.com>

	Fixed bug 3214 (Confusing how to make bookmark changes "stick")
	Fixed bug 6277 (Bookmarks window should close with Escape key)

	* src/athena-bookmarks-window.c: (create_bookmarks_window):
	Made bookmarks window a GnomeDialog, giving it the single
	button "Done".

2001-04-27  Andy Hertzfeld  <andy@eazel.com>

	added preferences for the maximum numder of items per site and
	the update interval.  It's not quite finished, as the news
	view isn't watching the update interval preference yet.
	
	* components/news/athena-news.c: (do_destroy), (draw_rss_items),
	(athena_news_make_new_channel), (max_items_changed),
	(make_news_view):
	use the preference for max items and update interval
	
	* libathena-extensions/athena-global-preferences.c:
	define defaults for news panel preferences
	
	* libathena-extensions/athena-global-preferences.h:
	define news panel preferences
	
	* src/athena-preferences-dialog.c:
	add a news panel pane to the preferences dialog
	
2001-04-26  Andy Hertzfeld  <andy@eazel.com>

	changed the news panel not to display any sites by default, since
	it's obnoxious to be doing periodic I/O to sites that weren't explicitly
	enabled.  Added an instructive message about the news panel that is
	displayed when no sites are enabled.
	
	Also, made it immediately test new rss urls when they are input, and
	display an error dialog instead of adding them if they fail.
	
	Also, make it always display the main news display (not configuration
	stuff) when the panel is opened, even if it was in configure mode
	when closed. Plus a few smaller tweaks.
	
	* components/news/athena-news.c: (set_bonobo_properties),
	(toggle_open_state), (count_visible_channels),
	(set_views_for_mode), (configure_button_clicked),
	(add_site_from_fields), (make_add_widgets), (set_up_main_widgets),
	(make_news_view):
	
	* components/news/news_channels.xml:
	turn off all the channels by default
	
2001-04-26  Ramiro Estrugo  <ramiro@eazel.com>

	* configure.in: Make the control-center (capplet module) check
	properly decode the version number.  Awk wasn't being fed the
	right delimiter.
	
2001-04-26  Dan Mueth  <dan@eazel.com>

	Bringing three more images over from the 1.0.1/1.0.2 branch.
	The dimensional size of these are smaller, although they
	are not all smaller in bytes.  I think this difference
	is why John didn't originally bring these over from the branch.

	* help/athena-quick-reference/C/figures/find.png:
	* help/athena-quick-reference/C/figures/full.png:
	* help/athena-quick-reference/C/figures/music.png:

2001-04-26  Darin Adler  <darin@eazel.com>

	* THANKS: Give Alex Larsson credit for his contribution.

	* configure.in: Added the screenshot directory. Updated the check
	for control center to check for libcapplet instead. Chris Lahey
	told me that Ximian did this in the version they released, so I
	figured I should do it here too.

	* help/athena-screenshot-guidelines/.cvsignore:
	* help/athena-screenshot-guidelines/C/.cvsignore:
	Ignore more generated files.

2001-04-26  Darin Adler  <darin@eazel.com>

	Integrated a patch by Alexander Larsson <alla@lysator.liu.se> that
	adds a JPEG-specific thumbnailing function that's faster than the
	exiting thumbnail code. This new code is only included if the
	libjpeg library is present at configure time. We still need RPM
	spec file changes to require this library if we are going to build
	RPMs on systems that have libjpeg. I fixed a few bugs in Alex's
	original patch and made some coding style tweaks as well.

	* acconfig.h:
	* configure.in:
	Added a check for libjpeg.
	
	* libathena-extensions/Makefile.am:
	* libathena-extensions/athena-thumbnails-jpeg.c:
	* libathena-extensions/athena-thumbnails-jpeg.h:
	Add new source files with JPEG thumbnailer.
	
	* libathena-extensions/athena-thumbnails.c: (make_thumbnails):
	Call the new function for JPEG files.

	Other changes.
	
	* libathena-extensions/athena-volume-monitor.c: Change
	interval back to 2 seconds.

	* libathena-extensions/athena-preferences.c:
	(preferences_set_storage_path): Fix storage leak.
	(athena_self_check_preferences): Added more checks.
	
	* libathena-extensions/athena-icon-factory.c:
	(athena_icon_factory_get_icon_for_file): Tiny code tweak.

2001-04-26  Rebecca Schulman  <rebecka@eazel.com>
	
	Fix bugzilla.eazel.com bug 7934, to remove the ability
	to make an index using Athena.  

	reviewed by: Darin Adler <darin@eazel.com>

	* src/file-manager/fm-list-view.c: (get_cell_text):
	* src/file-manager/fm-search-list-view.c: (real_load_error),
	(display_indexed_search_problems_dialog), (real_get_link_column),
	(real_get_emblems_column):
	Simplify the dialog that allows a Athena user to request a new 
	index.  Tell the user instead how to create an index if the user
	has root access in this dialog instead.
	* src/file-manager/athena-indexing-info.c:
	(show_last_index_time_dialog), (last_index_time_dialog_new),
	(index_progress_dialog_new), (show_indexing_info_dialog):
	* src/file-manager/athena-indexing-info.h:
	Remove the request reindex function.  Remove option to create a new
	index.  Keep dialogs to show either the time of the last index creation,
	or the progress of the current indexing task, depending on whether
	an index is in progress or not.

2001-04-26  Dan Mueth  <dan@eazel.com>

	Committing first draft of the screenshot guidelines for Athena
	documentation.  It isn't completely done, but it will be safer in
	CVS than on my hard drive.

	* help/Makefile.am:
	* help/athena-screenshot-guidelines/C/Makefile.am:
	* help/athena-screenshot-guidelines/C/figures/callout_after.png:
	* help/athena-screenshot-guidelines/C/figures/callout_before.png:
	* help/athena-screenshot-guidelines/C/figures/circle_callout_after.png:
	* help/athena-screenshot-guidelines/C/figures/circle_callout_before.png:
	* help/athena-screenshot-guidelines/C/figures/dropshadow_after.png:
	* help/athena-screenshot-guidelines/C/figures/dropshadow_before.png:
	* help/athena-screenshot-guidelines/C/athena-screenshot-guidelines-C.omf:
	* help/athena-screenshot-guidelines/C/athena-screenshot-guidelines.sgml:
	* help/athena-screenshot-guidelines/Makefile.am:

2001-04-26  Darin Adler  <darin@eazel.com>

	Integrated Miguel's patches that he included in Ximian's version
	of Athena 1.0 after fixing some bugs, fixing all warnings, and
	adding code to not do the reload of the desktop every 4 seconds if
	FAM is working. The patch does a lot of things, mostly so that
	people can switch back and forth between gmc and athena more
	easily.
	
	* components/news/athena-news.c: Tweaked includes.
	* src/athena-view-frame.c: Tweaked a comment.

Here are notes Miguel included in the patch about the changes he made:

- 2001-04-19  Miguel de Icaza  <miguel@ximian.com>

	* libathena-extensions/athena-file.c (athena_file_get_name):
	Only return name when we actually loaded the name from the desktop
	entry.

	* libathena-extensions/athena-icon-factory.c
	(athena_icon_factory_get_icon_for_file): Compute file_path from
	file_uri, it was missing in this code path.

- 2001-04-16  Miguel de Icaza  <miguel@ximian.com>

	* libathena-extensions/athena-file.c
	(is_special_desktop_gmc_file): Use strcmp not strncmp here. 

	* src/athena-window.c (athena_window_realize): Use gnome-logo
	here. 

	* src/file-manager/fm-directory-view.c (activate_callback): Launch
	desktop entries here. 

- 2001-04-11  Miguel de Icaza  <miguel@ximian.com>

	* src/file-manager/fm-icon-view.c
	(get_stored_icon_position_callback): Try to load position
	information from GNOME metadata as well.
	(icon_position_changed_callback): Store metadata changes to the
	desktop as well.

	* src/athena-first-time-druid.c
	(athena_first_time_druid_show): Disable GMC transition page, as
	we now share the desktop directory and the data files.
	(druid_finished): Remove desktop link to Eazel services.

	* libathena-extensions/athena-file.c
	(athena_file_can_rename): Do not allow to rename x-gnome-apps. 
	(athena_file_get_name): Return the translated name of a desktop
	file instead of the file name.  
	Handle URL files in .gnome-desktop directories. 
	(is_special_desktop_gmc_file): New function: Returns true if a
	file should be hidden from the desktop-directory display (for
	sharing the directory with gmc).
	(filter_hidden_and_backup_partition_callback): If we are scanning
	the desktop directory, hide gmc metadata files or legacy files.

	* libathena-extensions/athena-directory-async.c
	(activation_uri_gmc_link_read_callback): Handle GMC link files
	correctly (skip the prefix "URL: ")

	* libathena-extensions/athena-icon-factory.c
	(athena_icon_factory_get_icon_for_file): Load icons from the
	gnome-metadata for files on the ~/.gnome-desktop directory.
	(athena_icon_factory_get_icon_for_file): Load icons for GNOME
	.desktop files.

- 2001-04-11  Miguel de Icaza  <miguel@ximian.com>

	* libathena-extensions/athena-directory-async.c
	(activation_uri_gmc_link_read_callback): Handle gmc URL
	links correctly.

- 2001-04-10  Miguel de Icaza  <miguel@ximian.com>

	* libathena-extensions/athena-file-utilities.c
	(DESKTOP_DIRECTORY_NAME): Make it .gnome-desktop.
	(athena_get_desktop_directory): Modified to make the athena
	home directory be the normal one.

- 2001-04-09  Miguel de Icaza  <miguel@ximian.com>

	* src/file-manager/fm-desktop-icon-view.c: Eliminated all over the
	place the loading of the desktop_directory directory from the
	athena api call, and instead just load this value once.

Here are changes that Miguel made, but did not mention in his notes:
	
	* libathena-extensions/athena-volume-monitor.c: Changed
	the interval for polling to every 4 seconds instead of every 2.

	* libathena-extensions/athena-file.c: (athena_file_rename):
	Rename GMC URLs by changing their metadata only. This leaves no
	way to change the real name of the GMC URL file.
	(athena_file_is_in_desktop): New function. Returns TRUE if a
	file seems to be in the desktop. Uses a simple rule that might
	give some false positives, but works even for other people's
	desktop.
	
	* src/file-manager/fm-desktop-icon-view.c:
	(fm_desktop_icon_view_destroy), (do_desktop_rescan),
	(done_loading), (delayed_init), (fm_desktop_icon_view_initialize):
	Set up a callback to reload the desktop every 4 seconds.
	
	* src/athena-application.c: (migrate_gmc_trash),
	(migrate_old_athena_files), (athena_application_startup):
	Rename ~/.gnome-desktop/Trash to ~/.gnome-desktop/Trash-gmc if
	it's a directory. Move files from ~/.athena/desktop to
	~/.gnome-desktop.
	
2001-04-26  Dan Mueth  <dan@eazel.com>

	Updated Athena Release Notes for Athena 1.0.3.  It
	still will need some work and additions, but I have most
	of the boilerplate stuff and new features added.

	* help/athena-release-notes/C/athena-release-notes.sgml:

2001-04-26  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-preferences-group.c:
	* libathena-extensions/athena-preferences-group.h:
	Add support for custom preferences items.

	* libathena-extensions/athena-preferences-item.h:
	* libathena-extensions/athena-preferences-item.c:
	Add support for custom preferences items.  For now only the theme
	selector uses this powerful technology.

	Fix bug 8167 - Crash boinking on single-click mode.  It was a dumb
	mistake left over from a previous fix.  Wrong number of arguments
	to a signal.

	Fix bug where strings in enumeration menus would show up
	untranslated in the preferences dialog, even in locales where
	translations exist.
	
	* libathena-extensions/athena-theme.h:
	* libathena-extensions/athena-theme.c: (load_theme_document),
	(athena_pixmap_file_may_be_local),
	(athena_theme_get_image_path_from_theme),
	(athena_theme_make_preview_pixbuf): Rename this function from
	athena_theme_make_selector for greater clarity.
	(has_image_file), (theme_get_property), (theme_get_name_property),
	(theme_get_description_property), (theme_list_insert),
	(theme_get_themes_for_location): Replace some cut-n-paste code by
	a shared function.  Add some FIXMEs for the funky handling of the
	"default" theme.
	(theme_get_builtin_themes), (theme_get_user_themes),
	(theme_get_default_themes): Functions for reaping the
	different types of themes available to Athena.
	(athena_theme_for_each_theme), (theme_list_invoke_callback): New
	function to iterate all the themese available to Athena.  Makes
	Athena code that needs to operate on themes (like the theme
	selector) easier to write.
	(athena_theme_get_user_themes_directory),
	(athena_theme_remove_user_theme),
	(athena_theme_install_user_theme):  Functions for reaping the
	different types of themes available to Athena.
	
	* src/athena-preferences-dialog.c:
	(preferences_dialog_populate_sidebar_tabs_group),
	(theme_changed_callback),
	(update_theme_selector_displayed_value_callback),
	(preferences_dialog_populate_themes_group):
	Add a custom preference item for the theme chooser.
	
	* src/athena-theme-selector.h:
	* src/athena-theme-selector.c:
	Use regular Gtk widgets in the list so that all the things that
	are expect to work do indeed work.  This includes Gtk+ theme
	changes and custom tweaks made in the code to satisfy the design.
	Larger and bolder labels for example.

	Simplify this code alot by using iterators for the available
	themes.  Also maintain two lists instead of managing a remove_mode
	boolean.  Makes the code simpler.
	
	* src/athena-window-menus.c:
	(athena_window_initialize_menus_part_1):
	Remove the standalone theme selector handling code.
	
	* src/athena-shell-ui.xml:
	Remove the standalone theme selector ui.

2001-04-26  John Sullivan  <sullivan@eazel.com>

	Made the emblems column wider to fit the title "Emblems" (in
	English, in the default font). Made the emblems column in the
	search results view match the one in the standard list view.

	Pavel wants to implement images as column titles, but this is
	passable if that doesn't get done.

	* src/file-manager/fm-list-view.c: (real_get_column_specification):
	Widen the emblems column.
	
	* src/file-manager/fm-search-list-view.c:
	(real_get_emblems_column), 
	(real_get_link_column): Swap positions of name/emblems columns.
	(real_get_column_specification): Widen the emblems column.

2001-04-26  John Sullivan  <sullivan@eazel.com>

	Search results view has been broken for awhile without anyone
	noticing. Between these changes and a NULL-handling fix I
	checked into eel-list.c, it works again. (Soon I will move the
	Emblems column for search list view also, but first I wanted
	to make it work.)

	* src/file-manager/fm-list-view.h:
	* src/file-manager/fm-list-view.c: (fm_list_view_initialize_class),
	(add_to_list), (install_row_images), (get_emblems_column),
	(real_get_emblems_column): Replaced #define for emblems column
	with overridable function.
	
	* src/file-manager/fm-search-list-view.c:
	(fm_search_list_view_initialize_class),
	(real_get_emblem_names_to_exclude), (real_get_emblems_column):
	Override get_emblems_column to return correct value.

2001-04-26  John Sullivan  <sullivan@eazel.com>

	Moved over a few changes from the athena-1 branch. 
	I've reviewed all the changes in the branch ChangeLog now,
	so I think we can kiss it goodbye.
	
	* configure.in: Bumped a bunch of version numbers to match
	branch. Robin may have to do some more bumping before 
	shipping 1.0.3.

	* help/athena-user-manual/C/figures/custicon.png:
	* help/athena-user-manual/C/figures/full.png:
	* help/athena-user-manual/C/figures/part.png:
	Smaller versions of screenshots which were too big to
	fit in the Athena main panel, by Arlo. (For some reason
	athena-quick-reference on HEAD had smaller figures than
	on athena-1, but vice-versa for athena-user-manual.)

	* src/athena-preferences-dialog.c:
	* src/athena-shell-ui.xml:
	* src/athena-window-menus.c:
	(athena_window_initialize_menus_part_1): Made Medusa stuff not
	appear when HAVE_MEDUSA is not defined.

	Other changes:
	
	* libathena-extensions/athena-program-choosing.c:
	(get_xalf_prefix): Bug fix from Darin (!= -> ==) that
	was breaking launching applications unless you had xalf
	installed (not from branch)
	
2001-04-26  Dan Mueth  <dan@eazel.com>

	Cleaning up documentation build system.  Now there should
	be no or few warnings spit out about the docs.

	* help/Makefile.am:
	* help/docs.make:
	* help/htmldocs.make:
	* help/athena-quick-reference/es/Makefile.am:
	* help/athena-quick-reference/no/Makefile.am:
	* help/athena-release-notes/C/Makefile.am:
	* help/athena-user-manual/C/Makefile.am:
	* help/athena-user-manual/es/Makefile.am:
	* help/athena-user-manual/ko/Makefile.am:
	* help/sgmldocs.make:

2001-04-25  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (athena_news_update_display):
	reversed decision about not drawing while the channel was loading
	since it's important to give feedback right away when a channel is
	enabled, and they sometimes takes a long time to load.
	
	* libathena-extensions/athena-global-preferences.c:
	* libathena-extensions/athena-sidebar-functions.c:
	* libathena-extensions/athena-sidebar-functions.h:
	enabled the news panel by default.  Also, while I was in here, I
	made the "home as desktop" feature only available at the advanced
	user level like Bud suggested.
	
2001-04-25  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (draw_rss_items),
	(athena_news_draw_channel), (athena_news_size_allocate):
	fixed measuring bug caused by the size of the scroll bar
	affecting the layout.  Fixed by calculating the line width at
	size_allocate time, instead of on the spur of the moment.
	
2001-04-25  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (draw_rss_logo_image),
	(draw_rss_items), (athena_news_configure_event),
	(athena_news_button_release_event), (update_size_and_redraw),
	(athena_news_size_allocate), (make_news_view):
	
	attach to size_allocate signal to properly resize the panel
	when the width changes, as well as for the first time when the
	size isn't allocated yet; don't draw the time when it overlaps
	the logo, plus other clean-ups.
	
	* athena-clean.sh:
	fixed recently introduced problem in athena-clean by replacing
	'==' with '=' as suggested by Darin.
	
2001-04-25  Robin * Slomkowski  <rslomkow@eazel.com>

	* athena.spec.in: removed mozilla-mail and mozilla-psm dependency
	                    http://bugzilla.eazel.com/show_bug.cgi?id=8020

2001-04-25  Dan Mueth  <dan@eazel.com>

	Adding versions from 1_0_1_BRANCH, which are more up-to-date.

	* help/athena-release-notes/C/athena-release-notes.sgml:
	* help/athena-user-manual/C/athena-user-manual.sgml:

	Adding version for 1.0.1 and 1.0.2.

	* help/athena-quick-reference/C/index.html:

2001-04-25  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c:
	(athena_news_button_release_event)
	fixed bug 8153, scroll wheel crashes news panel, by only
	taking action when button 1 is clicked.
		
	(add_site_from_fields):
	added error handling for when the fields are empty; also, use
	http as the protocol if no protocol is specified.
	
2001-04-25  Darin Adler  <darin@eazel.com>

	* src/athena-window-menus.c: (help_menu_about_athena_callback):
	Made the Copyright string translatable again, by popular demand.

2001-04-24  Dan Mueth  <dan@eazel.com>

	Left-justifying the labels in the help sidebar.
	Also changed strings to remove colons ":".
	Bug#: 8123

	* components/help/hyperbola-nav-tree.c:
	(hyperbola_navigation_tree_new):

	Updating so that 'make install' works right
	and users building RPM's don't get lots of warnings.
	Bug#: 8125

	* omf-install/Makefile.am:

	Changing from "Customer Support" to "Community Support".
	Bug#: 7837

	* src/athena-shell-ui.xml:

2001-04-24  Darin Adler  <darin@eazel.com>

	Fix bug 8152 (Opening Help sidebar crashes Athena):
	
	* src/athena-sidebar.c: (notify_current_sidebar_view): Add check
	for NIL control.

	* athena-clean.sh: Change egrep args so we get fewer false
	positives.
	
	* src/athena-view-frame.c: (athena_view_frame_get_control):
	Formatting tweaks.

2001-04-24  Darin Adler  <darin@eazel.com>

	reviewed by: Maciej Stachowiak <mjs@eazel.com>

	Fix bug 7963 (exiting Athena [with Ctrl-C for example] leaves
	athena-adapter behind):

	* src/athena-component-adapter-factory.c: (activate_factory),
	(unref_factory), (release_factory), (get_corba_factory),
	(athena_component_adapter_factory_initialize),
	(athena_component_adapter_factory_destroy),
	(athena_component_adapter_factory_initialize_class),
	(component_adapter_factory_at_exit_destructor),
	(athena_component_adapter_factory_get),
	(athena_component_adapter_factory_create_adapter): Redo so it
	creates the factory as needed, and doesn't keep a Bonobo reference
	to the factory so it will die if Athena goes away.

	* athena-clean.sh: Redo option parsing to use loop.

	* components/throbber/main.c: (main): Fix main function to match
	standard main. Tweak formatting.
	
2001-04-24  John Sullivan  <sullivan@eazel.com>

	Fixed bug 8418 (two more underline-accelerator conflicts)

	* src/file-manager/athena-directory-view-ui.xml: Changed
	"Make _Link" to "_Make Link" to avoid conflict with sometimes-
	present "De_lete"
	
	* src/file-manager/athena-icon-view-ui.xml: Changed
	"_Tighter Layout" to "Tighter _Layout" to avoid conflict
	with "By _Type".

2001-04-24  John Sullivan  <sullivan@eazel.com>

	Fixed part of bug 7649 (sidebar font doesn't update when font
	changed in non-smooth mode) and various other small problems
	with fonts in sidebar. The font in the tabs is still always
	the smooth font.

	Also, made both default smooth and default non-smooth fonts
	visible simultaneously in the Preferences dialog since they
	are both used in different places at the same time. Maybe
	if we fix the sidebar tabs to not insist on using a smooth
	font we can turn these two controls back into one.

	* src/athena-preferences-dialog.c: Changed labels from
	"Font for elsewhere in Athena", which had become context-free,
	to "Default smooth font" and "Default non-smooth font". Made
	both of these always visible.
	
	* src/athena-sidebar-title.c:
	(athena_sidebar_title_initialize_class): Set up auto-variable
	to get default non-smooth font name so we don't have to call 
	get_preferences	repeatedly.
	(get_non_smooth_font): New helper function to get a non-smooth
	font of a specified size.
	(non_smooth_font_changed_callback): New function, updates the
	non-smooth font for the title and "more info" text.
	(update_all_cover): Removed this function.
	(athena_sidebar_title_initialize): Call new callback instead of
	update_all when non-smooth font changes. update_all was bailing
	out without doing any work since the text hadn't changed. Also
	call callback once to set the initial non-smooth font info.
	(update_title_font): Changed name from update_font for clarity;
	moved some consts to become #defines instead; fixed bug where 
	this routine wasn't using bold font for either smooth or non-smooth 
	font (2 unrelated bugs); removed unnecessary font-setting call 
	(smooth font is already set elsewhere and doesn't change here);
	remove unnecessary callback for ATHENA_PREFERENCES_SMOOTH_GRAPHICS_MODE
	since each label piece already handles this separately.
	(update_title), (athena_sidebar_title_size_allocate): Updated for
	name change.

2001-04-24  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>

	Fix bug where theme selector would not show themes when the theme
	directory is a symlink.
	
	* src/athena-theme-selector.c:
	(athena_theme_selector_destroy): Small code cleanup.
	(vfs_file_exists): Pass GNOME_VFS_FILE_INFO_FOLLOW_LINKS.
	(populate_list_with_themes_from_directory): Pass
	GNOME_VFS_FILE_INFO_FOLLOW_LINKS.

	More work on making components go away if Athena is prematurely
	terminated.

	* src/athena-window-toolbars.c:
	(athena_window_initialize_toolbars): Don't create a throbber for
	the desktop, since it doesn't get killed reliably since it never
	gets an X window.
	
	* src/athena-window.c: (athena_window_constructed),
	(athena_window_destroy), (athena_window_allow_stop): Do some
	minor cleanup of throbber code.

	* athena-clean.sh: Add an option to just display the processes
	and not kill them. Useful for me when I'm writing code that's
	designed to make the processes go away. Also remove the gconfd
	saved state file if we kill gconfd (only athena-clean.sh -x) for
	maximum cleanliness (but also maximum unhappiness for any
	remaining gconf clients).
	
2001-04-24  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 7650 (Display flashes forever when Text viewer
	used in FTP)

	* components/text/athena-text-view.c: (file_read_callback):
	Bail out when bytes_read is 0, instead of trying again forever.
	This happens at EOF.

2001-04-23  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (mark_new_items),
	(rss_read_done_callback):
	when updating, only redraw if something changed
	
2001-04-23  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-first-time-druid.c:
	(athena_first_time_druid_show):
	Remove extra argument to update_draw_desktop_checkbox_state()
	which was declared as () (instead of (void)) before the last
	change and so the build broke.
	
2001-04-23  Darin Adler  <darin@eazel.com>

	reviewed by: John Sullivan <sullivan@eazel.com>
	
	Add a new command-line option "--no-desktop" as requested by
	fcrozat on behalf of people who want to run Athena under KDE as
	well as under GNOME. The option has no effect if Athena is
	already running, but if it's the first invocation of Athena,
	then no desktop-related preferences show up and the desktop is
	not shown regardless of the setting of those preferences.
	
	* src/athena-main.c: (main): Add the no-desktop option. Make the
	desktop-related preferences invisible if it's on, and pass it down
	to the AthenaApplication.

	* src/athena-application.h:
	* src/athena-application.c: (athena_application_startup):
	Don't start the desktop if no_desktop is passed in. Otherwise
	decide based on the preference.

	* libathena-extensions/athena-preferences-box.c:
	(preferences_box_find_row): Mark this private function static.
	(preferences_box_populate_pane): Get rid of code that would
	translate the pane_name twice.
	(athena_preferences_dialog_new): Simplified this code a bit.
	
	* libathena-extensions/athena-preferences.h:
	* libathena-extensions/athena-preferences.c:
	(preferences_make_user_level_filtered_key),
	(athena_preferences_get_is_invisible),
	(athena_preferences_set_is_invisible),
	(preferences_key_make_for_getter),
	(athena_preferences_visible_in_current_user_level),
	(athena_preferences_is_visible): Added new flag to make a
	preference invisible.

	* src/athena-first-time-druid.h:
	* src/athena-first-time-druid.c: (set_up_gmc_transition_page),
	(athena_first_time_druid_show): Removed code that used to make
	the druid default based on the desktop preference.

	Fixed the Tinderbox.

	* libathena-extensions/athena-global-preferences.c:
	(default_default_folder_viewer_callback): Allow NULL because that
	happens during self-check.

2001-04-23  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (has_matching_uri),
	(compare_channel_names), (athena_news_add_channels),
	(add_site_from_fields), (determine_sort_position),
	(add_channel_entry), (make_remove_widgets):
	
	made it maintain the channel lists in alphabetical order, and
	improved uri matching by canonicalizing them before comparison.
		
	* components/news/news_channels.xml:
	added some new channels
	
	* athena-spec.in:
	added news panel to spec file.
	
2001-04-23  Andy Hertzfeld  <andy@eazel.com>

	made the disclosure triangles reflect the changed state by using
	different images when the channel changed; currently, I'm using
	placeholder images, but Arlo will give me the real ones soon.
		
	* components/news/athena-news-pixmaps.h:
	added images for triangles to reflect the changed state
	* components/news/athena-news.c: (do_destroy), (draw_triangle),
	(rss_logo_callback), (athena_news_load_images):
	load the new images, release on destroy, and display when appropriate
	
2001-04-23  John Sullivan  <sullivan@eazel.com>

	reviewed by: Darin Adler  <darin@eazel.com>

	Fixed bug 8024 (Default folder viewer chosen from "View As..."
	window is not reflected in Preferences dialog)

	* libathena-extensions/athena-global-preferences.h:
	Put iids for Icon and List view here since they must be accessed
	from multiple places now. Add ATHENA_DEFAULT_FOLDER_VIEWER_OTHER
	enum case. Add prototype for 
	athena_global_preferences_set_default_folder_viewer.
	
	* libathena-extensions/athena-global-preferences.c:
	(get_default_folder_viewer_preference_from_iid): New helper function,
	returns appropriate ATHENA_DEFAULT_FOLDER_VIEWER preference value
	based on folder-viewing iid.
	(default_default_folder_viewer_callback): New function to determine
	default value of ATHENA_DEFAULT_FOLDER_VIEWER preference; uses
	gnome_vfs_mime (name is not a typo).
	(set_default_folder_viewer_in_gnome_vfs): New function,
	updates gnome-vfs mime database properly for new folder-viewing iid.
	(default_folder_viewer_changed_callback): New function, reacts
	to change in ATHENA_DEFAULT_FOLDER_VIEWER preference by updating
	gnome-vfs mime database (moved here from athena-application.c).
	(athena_global_preferences_set_default_folder_viewer): New public
	function to set the default folder viewer with an iid; handles setting
	both gnome-vfs and gconf's values.
	(athena_global_preferences_initialize): Add callback for when
	default folder viewer changes (moved here from athena-application.c).
	
	* libathena-extensions/athena-program-chooser.c:
	(set_default_for_type): Special-case folder viewer to call
	athena_global_preferences_set_default_folder_viewer.
	
	* src/file-manager/athena-directory-view-ui.xml: Changed
	"Reset to View Preferences" to "Reset View to Match Preferences".
	It's really long, but the former was very unclear. Improvements
	to wording are hereby solicited.
	
	* src/athena-application.c: (manufactures), (create_object),
	(default_folder_viewer_changed_callback): Updated for #define
	name changes.
	(athena_application_startup): Moved code that reacted to
	default folder viewer preference to athena-global-preferences.c.

2001-04-23  John Harper  <jsh@eazel.com>

	* athena-clean.sh: added `athena-news' to list of auxiliary
	programs

2001-04-23  Darin Adler  <darin@eazel.com>

	* src/athena-window-manage-views.c: (open_location): Handle NULL
	case that can happen now that we check the workspace and area --
	the desktop is no longer guaranteed to be in the list considered
	when looking for the topmost window.

2001-04-23  John Harper  <jsh@eazel.com>

	* components/news/athena-news.c (set_up_edit_widgets): when
	packing the remove list into its container, use `TRUE, TRUE'
	instead of `FALSE, FALSE'. This makes the `Remove a site' list
	expand properly

2001-04-23  Ramiro Estrugo  <ramiro@eazel.com>

	* libathena-extensions/athena-preferences-box.c:
	(preferences_box_populate_pane):
	Make sure we use the translated strings for pane and group names.
	
2001-04-23  Darin Adler  <darin@eazel.com>

	Fix bug 7830 (Athena should launch programs with code that has
	xalf support [like the panel does]).

	* libathena-extensions/athena-program-choosing.c:
	(get_xalf_prefix): Implemented, but not tested with xalf.

2001-04-23  John Harper  <jsh@eazel.com>

	* components/news/athena-news.c (set_up_configure_widgets):
	don't set the shadow type of the viewport to no shadow. This
	causes a drawing bug to occur, where vestiges of the checkbox
	prelight aren't erased

2001-04-23  Darin Adler  <darin@eazel.com>

	Prep for xalf feature. Add name of program to all code that
	uses the launch_application_from_command function.

	* libathena-extensions/athena-program-chooser.c:
	(launch_mime_capplet): Pass the file name of the files and
	programs capplet when starting it up. (Is there a better name to
	use for this case?)
	* src/file-manager/fm-desktop-icon-view.c:
	(change_background_callback): Pass "Background" as the name when
	starting the Background capplet.
	* src/file-manager/fm-directory-view.c: (run_script_callback):
	Pass the file name of the script as the name when starting a
	script.
	(activate_callback): Pass the file name of an executable file when
	starting an executable file by opening it.
	
	* libathena-extensions/athena-program-choosing.h:
	* libathena-extensions/athena-program-choosing.c:
	(athena_launch_application): Pass the application name from the
	gnome-vfs MIME database when starting an application.
	(get_xalf_prefix): Placeholder for code to figure out the right
	set of parameters to pass to xalf.
	(athena_launch_application_from_command): Change to take a name
	for the application. It's ignored when xalf is not used, but used
	as the title when xalf is used.

2001-04-23  Darin Adler  <darin@eazel.com>

	Fix bug 8027 (Viewer preferences are not respected).
	
	* src/athena-window.c:
	(athena_window_handle_ui_event_callback): Check
	updating_bonobo_state and ignore any callbacks while it's true.

2001-04-23  Ramiro Estrugo  <ramiro@eazel.com>

	* test/test-athena-preferences-display.c: (main):
	Need to initialize preferences.
	
2001-04-23  Ramiro Estrugo  <ramiro@eazel.com>

	* components/news/Makefile.am:
	Make sure the athena-news-pixmaps.h header is exported to the
	dist tarball.
	
2001-04-23  Ramiro Estrugo  <ramiro@eazel.com>

	Part of bug 7601 - FreeBSD portability fixes.

	* components/music/esd-audio.c: (esdout_loop): Add return NULL to
	make gcc happy.

	* components/music/mpg123.c: (decode_loop): Add return NULL to
	make gcc happy.

	* libathena-extensions/athena-customization-data.c: Add
	missing include of <stdlib.h>

	* libathena-extensions/athena-file.c: (group_includes_user):
	Cast the gid to (gid_t)

	* libathena-extensions/athena-sound.c: Include <wait.h> only
	if we have it.  Otherwise try <sys/wait.h>.

	* src/athena-bookmark-parsing.c: Add 	missing include of <stdlib.h>

2001-04-23  Ramiro Estrugo  <ramiro@eazel.com>

	* components/news/Makefile.am:
	Add include flags for for pixmaps in header file included from the
	source directory - which is different from the build directory for
	the tinderbox build.

	* components/news/athena-news.c:
	* components/news/athena-news-pixmaps.h:
	* components/news/pixmaps.h:
	Rename pixmaps.h to athena-news-pixmaps.h to prevent confusion
	in the future.

2001-04-22  Andy Hertzfeld  <andy@eazel.com>

	* components/Makefile.am:
	Josh pointed out that I forgot to add the news component here.
	
2001-04-22  Andy Hertzfeld  <andy@eazel.com>

	implemented change tracking and made the sidebar tab get an
	notification image whenever there's anything new.  Also, improved
	updating and other tweaks.  The news view is pretty much done
	now except for some images from Arlo and lots of testing/debugging.

	* components/news/athena-news.c: (get_bonobo_properties),
	(set_bonobo_properties), (athena_news_expose_event),
	(athena_news_set_prelight_index),
	(athena_news_set_news_changed), (clear_channel_changed_flags),
	(athena_news_clear_changed_flags), (update_size_and_redraw),
	(has_matching_uri), (mark_new_items), (rss_read_done_callback),
	(athena_news_load_channel), (news_get_indicator_image),
	(add_command_buttons), (make_news_view):
	
	* src/athena-sidebar.c: (notify_current_sidebar_view),
	(athena_sidebar_activate_panel),
	(athena_sidebar_deactivate_panel):
	added open/close notifications for sidebar views using
	the bonobo propery bag mechanism
	
2001-04-21  Andy Hertzfeld  <andy@eazel.com>

	implemented the remove command for the news panel, plus
	other clean-ups.
	
	* components/news/athena-news.c: (configure_button_clicked),
	(add_site_button_clicked), (add_channel_to_remove_list),
	(add_site_from_fields), (remove_selected_site),
	(add_command_buttons), (add_channel_entry),
	(add_channels_to_lists), (news_label_new),
	(select_row_in_remove_list), (make_remove_widgets),
	(make_add_widgets), (set_up_edit_widgets),
	(set_up_configure_widgets), (make_news_view):

2001-04-21  Andy Hertzfeld  <andy@eazel.com>

	* components/news/athena-news.c: (do_destroy), (draw_triangle),
	(draw_rss_logo_image), (is_current_uri), (draw_rss_items),
	(athena_news_motion_notify_event), (rss_read_done_callback),
	(make_news_view):

	various improvements to the news view, including Arlofied item positioning,
	prelighting of logos and disclosure triangle, and using bold text
	to indicate the current item instead of a different color.
	
2001-04-20  Gene Z. Ragan  <gzr@eazel.com>

	reviewed by: Darin Adler <darin@eazel.com>

	Fixed bug 8073, roll over Red Hat patches for their
	"plug-n-play" feature to Athena.
	
	The code does not use magicdev, but instead uses our
	distribution agnostic volume monitor to achieve identical,
	and in some cases superior, results.
	
	* libathena-extensions/athena-volume-monitor.c: (floppy_sort),
	(athena_volume_monitor_get_target_uri),
	(athena_volume_monitor_should_integrate_trash),
	(mount_volume_get_name), (mount_volume_activate),
	(mount_volume_deactivate), (mount_volume_floppy_add),
	(mount_volume_ext2_add), (mount_volume_udf_add),
	(mount_volume_vfat_add), (mount_volume_msdos_add),
	(mount_volume_iso9660_add), (mount_volume_affs_add),
	(mount_volume_auto_add), (mount_volume_cdda_add),
	(mount_volume_fat_add), (mount_volume_hpfs_add),
	(mount_volume_hsfs_add), (mount_volume_minix_add),
	(mount_volume_nfs_add), (mount_volume_proc_add),
	(mount_volume_reiserfs_add), (mount_volume_ufs_add),
	(mount_volume_smb_add), (mount_volume_unsdos_add),
	(mount_volume_xenix_add), (mount_volume_xiafs_add), (find_volumes),
	(create_volume), (copy_volume), (mount_volume_add_filesystem):
	Determine device type when performing volume type specific mount tasks.
	
	* libathena-extensions/athena-volume-monitor.h:
	Add new device type enumeration.
	
	* src/file-manager/fm-desktop-icon-view.c: (create_mount_link):
	
	* src/athena-application.c: (volume_mounted_callback):
	Check for cdroms being mounted and open a window to the cdrom
	mount point if the user has specified that behavior in the
	gnome preferences.

2001-04-20  Ramiro Estrugo  <ramiro@eazel.com>

	* src/athena-theme-selector.c:
	Trim down the includes a little bit to only those that are needed.
	
2001-04-20  Ramiro Estrugo  <ramiro@eazel.com>

	* README:
	Update the Mozilla information to point to Taska's support FAQ
	instead of the Athena mailing list post.
	
2001-04-20  Andy Hertzfeld  <andy@eazel.com>

	first check-in of "news" sidebar view to display news from selected
	sites that support an rss feed.  It's around 80% completed now, and
	should be quite usable; I just need to finish the remaining 80%.
	
	* components/news/.cvsignore:
	* components/news/Makefile.am:
	* components/news/Athena_View_news.oaf.in:
	
	* components/news/athena-news.c: (get_bonobo_properties),
	(set_bonobo_properties), (do_destroy), (pixbuf_composite),
	(draw_triangle), (draw_rss_logo_image), (draw_rss_title),
	(draw_rss_items), (athena_news_draw_channel),
	(athena_news_update_display), (athena_news_configure_event),
	(athena_news_expose_event), (athena_news_set_prelight_index),
	(go_to_uri), (toggle_open_state), (item_hit_test),
	(athena_news_button_release_event),
	(athena_news_motion_notify_event),
	(athena_news_leave_notify_event), (athena_news_set_title),
	(free_rss_data_item), (free_rss_channel_items), (free_channel),
	(athena_news_free_channel_list), (bool_to_text),
	(athena_news_make_channel_document),
	(athena_news_save_channel_state), (rss_logo_callback),
	(extract_items), (update_size_and_redraw),
	(rss_read_done_callback), (athena_news_load_channel),
	(athena_news_make_new_channel), (athena_news_add_channels),
	(get_xml_path), (read_channel_list), (check_for_updates),
	(news_get_indicator_image), (load_xpm_image),
	(athena_news_load_images), (configure_button_clicked),
	(add_site_button_clicked), (add_site_from_fields),
	(add_command_buttons), (get_channel_from_name),
	(check_button_toggled_callback), (athena_news_load_location),
	(add_channel_entry), (add_channels_to_configure_list),
	(set_up_add_widgets), (set_up_configure_widgets),
	(set_up_main_widgets), (make_news_view), (main):
	
	* components/news/news_bullet.png:
	* components/news/news_channels.xml:
	* components/news/pixmaps.h:
	* configure.in:

2001-04-20  Ramiro Estrugo  <ramiro@eazel.com>

	* ChangeLog: rolled over to ChangeLog-20010420.

# Local Variables:
# coding: utf-8
# End:
